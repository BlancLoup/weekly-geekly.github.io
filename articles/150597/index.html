<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>BDD vice versa</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I read about BDD, and realized one thing: BDD is a blablabla blabla blah. He has no normal definition. Here, for example, is written: 
 BDD combines t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>BDD vice versa</h1><div class="post__text post__text-html js-mediator-article">  I read about BDD, and realized one thing: BDD is a blablabla blabla blah.  He has no normal definition.  Here, for example, is written: <br><blockquote>  BDD combines the basic TDD techniques and practices and DDD ideas in order to provide programmers, testers, analysts, and managers with a common interaction process as they develop software. </blockquote>  All clear?  Nothing for me.  Therefore, I will tell you what we do and why, from what may be relevant to BDD. <br><a name="habracut"></a>  Starting planning features, we describe it in terms of "system behavior", for example: <br><blockquote>  Given Jira Issue with several bugs <br>  When all that bugs are fixed <br>  Then Issue is closed </blockquote>  We write this directly on the board, in the course of planning, together with the Product Owner, in such a volume so that it can be understood by the customer (product owner) and testers, and developers: what should we do and how to test it.  In fact, these are requirements / tests that are recorded in such a ‚Äúshort‚Äù (and notice, not clear) form, with the whole team, without spending much time on it.  And no more documentation, just words.  I understand that this is a rather ‚Äúwild‚Äù case, and everything is not always so simple, but in any case, we try to isolate the business problem, and write down the most concise solution, without going into details.  Details go later, they can be negotiated on the plan or it can be found out already during the development process with PO (yes, our customer quickly answers the questions), but they are not documented and not tested and no one will read them. <br><br>  Just do not confuse the description of the behavior and system documentation.  Behavior can (and will) change.  Today, this digging does one thing, tomorrow is another.  The above description of the behavior becomes outdated with each sprint / iteration, it is impossible to rely on it and find out how the feature is arranged after some time.  Therefore, there is a system documentation, which describes <b>all the current</b> functionality.  No, we do not have such documentation, we have everything in our head and code.  And so far, personally, I have not experienced inconvenience.  And what will happen if the head gets under the bus?  I also asked such a question.  I was told: it will be bad, but we do not believe that the documentation will save, they are unlikely to read it all, and it is unlikely to be so relevant and be able to give answers just like a head. <br><br>  Now about the tests.  There is a wonderful thing - Cucumber (and more similar: <a href="http://www.concordion.org/">concordion</a> ).  It allows each simple text line (such as: ‚Äúall that bugs are fixed‚Äù) to have its own method on .Net, Java, Ruby and other programming languages, and even allows you to select variables using regular expressions so that you can reuse methods. <br>  And thanks to cucumber, all tests have an excellent readable form, they reflect the current state of the system and can be a kind of system documentation, and besides, they are already written in the planning! <br>  Everything seems fine, but we do not use Cucumber, because: <br><ol><li> Our test methods, (the time test API, rather than those with the @ <code>Test</code> annotation), take as input complex values ‚Äã‚Äã/ objects (Map) that are difficult to write in plain text form and parsed using regular expressions. </li><li>  Test methods return and use variables, for example, return the Primary Key of the created entities, then this PK is used in other methods.  And although the support of "variables" is possible in the proto text language, it is still inconvenient and is a big disadvantage. </li><li>  We use expressions as variables.  For example, different builders to set the date of "last Sunday" or "next Monday."  By the way, we generate random / random test data wherever possible, and do all the checks based on them, so we often use expressions and variables. </li><li>  Context.  Most of our actions are tied to the current user session.  When it was necessary to create two parallel sessions, it did not cause any problems.  In the case of cucumber, would have to allocate completely new phrases / methods that would work, both with the indication of the session, and without. </li><li>  Checks data.  For this, we use hamcrest, and with just a few matchmakers, we can record a bunch of diverse and challenging conditions.  With cucumber, for this purpose it is necessary to allocate separate methods with one line of code for each combination of matchrs.  And in the worst case, one method for each combination of matchrs and the tested value. </li><li>  Refactoring.  I refactor tests much more than the code, (well, it turns out) and the IDE helps me a lot with this by automating quite complex actions.  How to refactor a simple text language?  And what will happen if before there was one method, and then the code changed and you need to divide it into two methods, with different variables or different names.  Is it possible to do this automatically, throughout the entire database of a simple-source code? </li></ol>  Instead of spending effort on developing plain text scripts with Cucumber, we write them in Java (like the rest of the project) and spend efforts to keep the code clean and readable. <br><blockquote>  The above is not a criticism of Cucumber, it is an excellent and necessary thing, just <strong>in our case,</strong> it would create more problems than solutions (in my opinion, subjective opinion). </blockquote><br>  Consider the code sample that corresponds to the above description of the behavior: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="java hljs">String issueId = issueHelper().createIssue(); List bugIds = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numberOfBugs = Random.getNumberBetween(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(numberOfBugs&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>){ bugIds.add(issueHelper().createBug(issueId)); numberOfBugs--; } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(String bugId : bugIds){ navigator().goto(bugId); workflowHelper().doAction(<span class="hljs-string"><span class="hljs-string">"fixed"</span></span>); } navigator().goto(issueId); assertThat(getField(<span class="hljs-string"><span class="hljs-string">"status"</span></span>),is(<span class="hljs-string"><span class="hljs-string">"Closed"</span></span>));</code> </pre><br><br>  When executing the test, this code displays the following: <br><blockquote>  Create Issue with arbitrary parameters (Key of new issue HR-17) <br>  Create Bug on issue HR-17 (Key for new bug BG-26) <br>  Create Bug on issue HR-17 (Key for new bug BG-27) <br>  Go to the page on the key BG-26 <br>  Execute fixed action <br>  Go to the page on the key BG-27 <br>  Execute fixed action <br>  Go to the HR-17 key page. <br>  Check that the value of the status is "Closed" </blockquote>  Such a test output is very similar to the cucumber script in my previous project, and can be read by analysts / managers (I checked).  They can even carry out a kind of ‚Äúcode review‚Äù of how much the log corresponds to the original BDD description. <br><br>  That's why we get ‚ÄúBDD the other way around.‚Äù <br><br>  Sometimes analysts or developers may not like something in the course of code review, then we can refactor the code in just a couple of clicks, for example, combining the ‚ÄúSwitch to page by key‚Äù and ‚ÄúExecute action‚Äù methods into one method. <br><br>  You may have noticed that there are no comments or special calls in the test code that could output such a log, and this is not accidental. <br>  All log output is made on the basis of AspectJ technology, which allows you to intercept any method calls and wrap them with your codes.  In our case, we log the method description from JavaDoc, substituting in it the values ‚Äã‚Äãof the parameters with which the call was made and, if possible, the value returned by the method. <br>  We do the same thing as Cucumber technology, exactly the opposite.  In ucumber, we associate each method with a regular expression (or pattern), according to which we will select variables from the text line, in our case, we match the template into which we will substitute the variables into the output log line. <br>  What is the point of all of this? <br>  From the point of view of BDD, documentation and collaboration all together, in an embrace - I do not know. <br>  But I know for sure, in the beautiful test log, there is a sense: <br><ol><li>  This greatly helps to improve the quality of the test code.  True, very. <br>  But only if you are logging descriptions of method calls, and not forcibly output: <code>log("I did something")</code> .  Then you <b>have</b> to allocate methods that correspond to business concepts, and then, you see, the code is less duplicated, and it is better structured.  And an analyst can follow this, with no programming experience, who will say that your code operates on business concepts, or it presses some strange buttons, i.e.  rolled down somewhere, to the lower level of the interface ticks.  Accordingly, the tests are shorter and clearer. </li><li>  This allows you to understand why the test "fell." <br>  And we can log in as calls to the first level methods, i.e.  those that are written in the test script, and calls internal methods.  And not just calls, but with all parameters and returned values. </li><li>  Sometimes it's easier to understand the log than the code to figure out what the test does. <br>  I myself am shocked by this, like trying, writing beautifully, refactoring, but still, after some time the code is not clear, and the ‚ÄúRussian‚Äù log helps.  Well, that means there is still room to try and improve the code.  Sometimes, by the way, it helps to look at the BDD description, which we rewrite from the board in the annotation to each test.  These descriptions go into a test report, because they are still smaller and clearer.  This once again convinces me that it was right to separate such descriptions from the test script. </li><li>  This makes writing JavaDoc to a test API, at least some.  And this, in turn, simplifies writing tests, especially if they are written by more than one person.  Interestingly, when using ucumber, can Ctrl + Space get hints of available methods, with a description of the parameters?  Went to &lt;Ctrl + Space&gt; </li><li>  You can distract and learn Aspect Oriented Programming.  As an idea for the future: I want to make it so that when calling <code>doSomething(getSomething())</code> in the <code>doSomething()</code> log, <code>doSomething()</code> not just the result of the <code>getSomething()</code> method (for example, just 5) that is substituted with the description from the JavaDoc method <code>getSomething()</code> , so that it is clear what this result means (5) and where it came from.  I will definitely deal with this when I am once again ‚Äúeverything is assured.‚Äù </li></ol><br>  If someone is interested in technical details: how to parse JavaDoc, how to work with AspectJ, write a comment, and I will prepare a separate post about it, in which I will also tell you how to stuff a table with test data in JavaDoc in plain text form (copy it from Excel), and make sure that the test method is called for each row of this table - this is exactly how Cucumber works, analysts like it, but I don‚Äôt see the charms in it.  What do you think? <br><br>  The moral of this story is: experiment, write tests, and a log to help you. <br><img src="http://habr.habrastorage.org/post_images/afa/19d/045/afa19d045b2bce238895a5f2856f9174.gif" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/150597/">https://habr.com/ru/post/150597/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../150590/index.html">SurfPatrol extension for Google Chrome</a></li>
<li><a href="../150591/index.html">The second gigapixel panorama of Yekaterinburg</a></li>
<li><a href="../150593/index.html">What is Windows Azure Media Services and how can they be used?</a></li>
<li><a href="../150595/index.html">Batch video conversion for household players</a></li>
<li><a href="../150596/index.html">Ministry of Finance cuts funding for federal space programs</a></li>
<li><a href="../150598/index.html">The practice of obtaining and using digital signatures when submitting reports to government agencies</a></li>
<li><a href="../150599/index.html">There, the dwarf leader for the quest gives the quest until you get bored</a></li>
<li><a href="../150600/index.html">Kindle touch paperwhite</a></li>
<li><a href="../150601/index.html">Study schedules online. The history of the startup Schoodle</a></li>
<li><a href="../150602/index.html">The strange logic of the programmers of Sberbank is dedicated to</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
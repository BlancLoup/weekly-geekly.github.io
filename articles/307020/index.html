<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Squid + Dansguardian + c-icap + ClamAV based on CentOS 7</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Purpose of the article 
 A number of articles are available on the Internet on setting up anti-virus protection in the squid + ClamAV bundle, but ther...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Squid + Dansguardian + c-icap + ClamAV based on CentOS 7</h1><div class="post__text post__text-html js-mediator-article"><h1>  <b>Purpose of the article</b> </h1><br>  A number of articles are available on the Internet on setting up anti-virus protection in the squid + ClamAV bundle, but there is no complete material on setting up the full bundle under CentOS 7. This article will show the process of setting up a proxy server with the following features: <br><ul><li>  filtering sites and links by categories; </li><li>  anti-virus protection. </li></ul><br><h1>  <b>Lecture hall</b> </h1><br>  Linux system administrators <br><br><img src="https://habrastorage.org/files/c53/643/a77/c53643a77a4f4f4cb55ec8a52ab90abe.png" alt="image"><a name="habracut"></a><br><br><h1>  <b>Introduction</b> </h1><br>  Most telecom operators now provide routable Internet access, where filtering and anti-virus protection of incoming traffic is somewhat more problematic.  In cases when it is necessary to restrict users from accessing certain sites by categories or URLs, as well as the implementation of checking incoming web traffic, in this case the use of a proxy server is the easiest solution. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://www.squid-cache.org/">Squid is</a> by far the most functional proxy server that supports a large number of <a href="http://wiki.squid-cache.org/Features">features</a> .  For the implementation of anti-virus protection it is proposed to use <a href="https://www.clamav.net/">ClamAV</a> - an open implementation of anti-virus protection.  Content filtering by category will be implemented by means of <a href="http://dansguardian.org/">Dansguardian</a> . <br><br>  The general solution diagram is schematically shown below: <br><br><img src="https://habrastorage.org/files/7c0/1b9/ad9/7c01b9ad9d834130be3f4b0cb32197a7.png" alt="image"><br><br><h1>  <b>Initial data</b> </h1><br>  We have a Linux server running CentOS 7. The server has routed Internet access. <br><br><h1>  <b>Basic squid setup</b> </h1><br><ul><li>  We update packages in the system </li></ul><br><pre><code class="hljs 1c"><span class="hljs-meta"><span class="hljs-meta"># yum update ‚Äìy # reboot (</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta"> )</span></span></code> </pre> <br><ul><li>  We connect the EPEL repository, which we need for additional packages </li></ul><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># yum -y install epel-release</span></span></code> </pre> <br><ul><li>  Install packages for squid </li></ul><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># yum -y install squid</span></span></code> </pre> <br><ul><li>  Configure the /etc/squid/squid.conf configuration file (no changes are required at this stage).  Detailed squid configuration (ACL, authorization, etc.) is beyond the scope of this article.  Here we use the configuration file provided <div class="spoiler">  <b class="spoiler_title">default package</b> <div class="spoiler_text"><pre> <code class="hljs vhdl"># egrep -v <span class="hljs-string"><span class="hljs-string">"^$|^#"</span></span> /etc/squid/squid.conf acl localnet src <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> # RFC1918 possible internal network acl localnet src <span class="hljs-number"><span class="hljs-number">172.16</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">12</span></span> # RFC1918 possible internal network acl localnet src <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> # RFC1918 possible internal network acl localnet src fc00::/<span class="hljs-number"><span class="hljs-number">7</span></span> # RFC <span class="hljs-number"><span class="hljs-number">4193</span></span> local private network <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> acl localnet src fe80::/<span class="hljs-number"><span class="hljs-number">10</span></span> # RFC <span class="hljs-number"><span class="hljs-number">4291</span></span> link-local (directly plugged) machines acl SSL_ports <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> <span class="hljs-number"><span class="hljs-number">443</span></span> acl Safe_ports <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> <span class="hljs-number"><span class="hljs-number">80</span></span> # http acl Safe_ports <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> # ftp acl Safe_ports <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> <span class="hljs-number"><span class="hljs-number">443</span></span> # https acl Safe_ports <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> <span class="hljs-number"><span class="hljs-number">70</span></span> # gopher acl Safe_ports <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> <span class="hljs-number"><span class="hljs-number">210</span></span> # wais acl Safe_ports <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> <span class="hljs-number"><span class="hljs-number">1025</span></span>-<span class="hljs-number"><span class="hljs-number">65535</span></span> # unregistered ports acl Safe_ports <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> <span class="hljs-number"><span class="hljs-number">280</span></span> # http-mgmt acl Safe_ports <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> <span class="hljs-number"><span class="hljs-number">488</span></span> # gss-http acl Safe_ports <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> <span class="hljs-number"><span class="hljs-number">591</span></span> # filemaker acl Safe_ports <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> <span class="hljs-number"><span class="hljs-number">777</span></span> # multiling http acl CONNECT method CONNECT http_access deny !Safe_ports http_access deny CONNECT !SSL_ports http_access allow localhost manager http_access deny manager http_access allow localnet http_access allow localhost http_access deny <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> http_port <span class="hljs-number"><span class="hljs-number">3128</span></span> coredump_dir /var/spool/squid refresh_pattern ^ftp: <span class="hljs-number"><span class="hljs-number">1440</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>% <span class="hljs-number"><span class="hljs-number">10080</span></span> refresh_pattern ^gopher: <span class="hljs-number"><span class="hljs-number">1440</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>% <span class="hljs-number"><span class="hljs-number">1440</span></span> refresh_pattern -i (/cgi-bin/|\?) <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>% <span class="hljs-number"><span class="hljs-number">0</span></span> refresh_pattern . <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>% <span class="hljs-number"><span class="hljs-number">4320</span></span></code> </pre> <br></div></div></li></ul><br><ul><li>  We start squid </li></ul><br><pre> <code class="hljs pgsql"># systemctl <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> squid Created symlink <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> /etc/systemd/<span class="hljs-keyword"><span class="hljs-keyword">system</span></span>/multi-<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>.target.wants/squid.service <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> /usr/lib/systemd/<span class="hljs-keyword"><span class="hljs-keyword">system</span></span>/squid.service. # systemctl <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> squid</code> </pre> <br><h1>  <b>Setting up ClamAV anti-virus scan services</b> </h1><br><ul><li>  Install the necessary packages </li></ul><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># yum install clamav clamav-update clamav-scanner clamav-scanner-systemd -y</span></span></code> </pre> <br><ul><li>  Rule the configuration file. <div class="spoiler">  <b class="spoiler_title">Here</b> <div class="spoiler_text"><pre> <code class="diff hljs"># diff -u /etc/clamd.d/scan.conf.orig /etc/clamd.d/scan.conf --- /etc/clamd.d/scan.conf.orig 2016-07-19 22:39:26.247090604 +0300 +++ /etc/clamd.d/scan.conf 2016-07-20 02:18:16.753828514 +0300 @@ -5,13 +5,13 @@ # Comment or remove the line below. -Example +#Example # Uncomment this option to enable logging. # LogFile must be writable for the user running daemon. # A full path is required. # Default: disabled -#LogFile /var/log/clamd.scan +LogFile /var/log/clamd.scan # By default the log file is locked for writing - the lock protects against # running clamd multiple times (if want to run another clamd, please @@ -63,11 +63,11 @@ # This option allows you to save a process identifier of the listening # daemon (main thread). # Default: disabled -#PidFile /var/run/clamd.scan/clamd.pid +PidFile /var/run/clamd.scan/clamd.pid # Optional path to the global temporary directory. # Default: system specific (usually /tmp or /var/tmp). -#TemporaryDirectory /var/tmp +TemporaryDirectory /var/tmp # Path to the database directory. # Default: hardcoded (depends on installation options) @@ -82,7 +82,7 @@ # Path to a local socket file the daemon will listen on. # Default: disabled (must be specified by a user) -#LocalSocket /var/run/clamd.scan/clamd.sock +LocalSocket /var/run/clamd.scan/clamd.sock # Sets the group ownership on the unix socket. # Default: disabled (the primary group of the user running clamd) @@ -98,7 +98,7 @@ # TCP port address. # Default: no -#TCPSocket 3310 +TCPSocket 3310 # TCP address. # By default we bind to INADDR_ANY, probably not wise. @@ -106,7 +106,7 @@ # from the outside world. This option can be specified multiple # times if you want to listen on multiple IPs. IPv6 is now supported. # Default: no -#TCPAddr 127.0.0.1 +TCPAddr 127.0.0.1 # Maximum length the queue of pending connections may grow to. # Default: 200</code> </pre> </div></div>  shows the difference with the original file </li></ul><br><ul><li>  We create the necessary files for work. </li></ul><br><pre> <code class="hljs swift"># touch /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/log/clamd.scan # chown clamscan. /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/log/clamd.scan</code> </pre> <br><ul><li>  Configuring anti-virus database update </li></ul><br><pre> <code class="diff hljs"># diff -u /etc/freshclam.conf.orig /etc/freshclam.conf --- /etc/freshclam.conf.orig 2016-07-19 22:47:25.195704610 +0300 +++ /etc/freshclam.conf 2016-07-19 22:47:57.103230225 +0300 @@ -5,7 +5,7 @@ # Comment or remove the line below. -Example +#Example # Path to the database directory. # WARNING: It must match clamd.conf's directive! @@ -14,7 +14,7 @@ # Path to the log file (make sure it has proper permissions) # Default: disabled -#UpdateLogFile /var/log/freshclam.log +UpdateLogFile /var/log/freshclam.log # Maximum size of the log file. # Value of 0 disables the limit. @@ -48,7 +48,7 @@ # This option allows you to save the process identifier of the daemon # Default: disabled -#PidFile /var/run/freshclam.pid +PidFile /var/run/freshclam.pid # By default when started freshclam drops privileges and switches to the # "clamav" user. This directive allows you to change the database owner.</code> </pre> <br><ul><li>  We update the database </li></ul><br><pre> <code class="hljs pgsql"># freshclam ClamAV <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> process started at Tue Jul <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">48</span></span>:<span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-number"><span class="hljs-number">2016</span></span> main.cvd <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> up <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-type"><span class="hljs-type">date</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">version</span></span>: <span class="hljs-number"><span class="hljs-number">57</span></span>, sigs: <span class="hljs-number"><span class="hljs-number">4218790</span></span>, f-<span class="hljs-keyword"><span class="hljs-keyword">level</span></span>: <span class="hljs-number"><span class="hljs-number">60</span></span>, builder: amishhammer) connect_error: getsockopt(SO_ERROR): fd=<span class="hljs-number"><span class="hljs-number">5</span></span> error=<span class="hljs-number"><span class="hljs-number">111</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Connection</span></span> refused Can<span class="hljs-string"><span class="hljs-string">'t connect to port 80 of host database.clamav.net (IP: 208.72.56.53) Trying host database.clamav.net (64.6.100.177)... WARNING: getfile: daily-21724.cdiff not found on database.clamav.net (IP: 64.6.100.177) WARNING: getpatch: Can'</span></span>t download daily<span class="hljs-number"><span class="hljs-number">-21724.</span></span>cdiff <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">database</span></span>.clamav.net <span class="hljs-built_in"><span class="hljs-built_in">WARNING</span></span>: getfile: daily<span class="hljs-number"><span class="hljs-number">-21724.</span></span>cdiff <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-built_in"><span class="hljs-built_in">found</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> <span class="hljs-keyword"><span class="hljs-keyword">database</span></span>.clamav.net (IP: <span class="hljs-number"><span class="hljs-number">64.22</span></span><span class="hljs-number"><span class="hljs-number">.33</span></span><span class="hljs-number"><span class="hljs-number">.90</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">WARNING</span></span>: getpatch: Can<span class="hljs-string"><span class="hljs-string">'t download daily-21724.cdiff from database.clamav.net Trying host database.clamav.net (150.214.142.197)... WARNING: getfile: daily-21724.cdiff not found on database.clamav.net (IP: 150.214.142.197) WARNING: getpatch: Can'</span></span>t download daily<span class="hljs-number"><span class="hljs-number">-21724.</span></span>cdiff <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">database</span></span>.clamav.net <span class="hljs-built_in"><span class="hljs-built_in">WARNING</span></span>: Incremental <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> failed, trying <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> download daily.cvd Downloading daily.cvd [<span class="hljs-number"><span class="hljs-number">100</span></span>%] daily.cvd updated (<span class="hljs-keyword"><span class="hljs-keyword">version</span></span>: <span class="hljs-number"><span class="hljs-number">21933</span></span>, sigs: <span class="hljs-number"><span class="hljs-number">441430</span></span>, f-<span class="hljs-keyword"><span class="hljs-keyword">level</span></span>: <span class="hljs-number"><span class="hljs-number">63</span></span>, builder: neo) Downloading bytecode<span class="hljs-number"><span class="hljs-number">-279.</span></span>cdiff [<span class="hljs-number"><span class="hljs-number">100</span></span>%] Downloading bytecode<span class="hljs-number"><span class="hljs-number">-280.</span></span>cdiff [<span class="hljs-number"><span class="hljs-number">100</span></span>%] Downloading bytecode<span class="hljs-number"><span class="hljs-number">-281.</span></span>cdiff [<span class="hljs-number"><span class="hljs-number">100</span></span>%] Downloading bytecode<span class="hljs-number"><span class="hljs-number">-282.</span></span>cdiff [<span class="hljs-number"><span class="hljs-number">100</span></span>%] Downloading bytecode<span class="hljs-number"><span class="hljs-number">-283.</span></span>cdiff [<span class="hljs-number"><span class="hljs-number">100</span></span>%] bytecode.cld updated (<span class="hljs-keyword"><span class="hljs-keyword">version</span></span>: <span class="hljs-number"><span class="hljs-number">283</span></span>, sigs: <span class="hljs-number"><span class="hljs-number">53</span></span>, f-<span class="hljs-keyword"><span class="hljs-keyword">level</span></span>: <span class="hljs-number"><span class="hljs-number">63</span></span>, builder: neo) <span class="hljs-keyword"><span class="hljs-keyword">Database</span></span> updated (<span class="hljs-number"><span class="hljs-number">4660273</span></span> signatures) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">database</span></span>.clamav.net (IP: <span class="hljs-number"><span class="hljs-number">69.12</span></span><span class="hljs-number"><span class="hljs-number">.162</span></span><span class="hljs-number"><span class="hljs-number">.28</span></span>)</code> </pre> <br><ul><li>  Checking what works </li></ul><br><pre> <code class="hljs 1c"><span class="hljs-meta"><span class="hljs-meta"># wget http:</span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//www.eicar.org/download/eicar.com # clamscan --infected --remove --recursive eicar.com eicar.com: Eicar-Test-Signature FOUND eicar.com: Removed. ----------- SCAN SUMMARY ----------- Known viruses: 4654877 Engine version: 0.99.2 Scanned directories: 0 Scanned files: 1 Infected files: 1 Data scanned: 0.00 MB Data read: 0.00 MB (ratio 0.00:1) Time: 8.958 sec (0 m 8 s)</span></span></span></span></code> </pre> <br><ul><li>  Run the demon </li></ul><br><pre> <code class="hljs pgsql"># systemctl <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> clamd@scan # systemctl <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> clamd@scan Created symlink <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> /etc/systemd/<span class="hljs-keyword"><span class="hljs-keyword">system</span></span>/multi-<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>.target.wants/clamd@scan.service <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> /usr/lib/systemd/<span class="hljs-keyword"><span class="hljs-keyword">system</span></span>/clamd@scan.service.</code> </pre> <br><ul><li>  We activate automatic database updates </li></ul><br><pre> <code class="hljs erlang-repl"># vi /etc/sysconfig/freshclam   ### !!!!! REMOVE ME !!!!!! ### REMOVE ME: By default, the freshclam update is disabled to avoid ### REMOVE ME: network access without prior activation FRESHCLAM_DELAY=disabled-warn # REMOVE ME</code> </pre> <br><br><h1>  <b>Build packages for CentOS 7 (on another workstation)</b> </h1><br>  I could not find the c-icap, squidclamav, and danguardian packages in the standard repositories for CentOS 7. For this reason, I had to build from src.rpm packages.  The assembly was carried out on another workstation.  Of course, it‚Äôs better not to build as root. <br><ul><li>  We collect c-icap </li></ul><br><pre> <code class="hljs dos"># wget ftp://ftp.pbone.<span class="hljs-built_in"><span class="hljs-built_in">net</span></span>/mirror/ftp5.gwdg.de/pub/opensuse/repositories/home<span class="hljs-variable"><span class="hljs-variable">%3A/Kenzy%</span></span><span class="hljs-number"><span class="hljs-number">3</span></span>A/packages/CentOS_7/src/c-icap-<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>-<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.src.rpm # rpm ‚Äìivh c-icap-<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>-<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.src.rpm # rpmbuild -bb /root/rpmbuild/SPECS/c-icap.spec</code> </pre> <br><ul><li>  Putting dansguardian </li></ul><br><pre> <code class="hljs dos"># wget ftp://ftp.pbone.<span class="hljs-built_in"><span class="hljs-built_in">net</span></span>/mirror/ftp5.gwdg.de/pub/opensuse/repositories/home<span class="hljs-variable"><span class="hljs-variable">%3A/Kenzy%</span></span><span class="hljs-number"><span class="hljs-number">3</span></span>A/packages/CentOS_7/src/dansguardian-<span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">12</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.src.rpm # rpmbuild -bb /root/rpmbuild/SPECS/dansguardian.spec</code> </pre> <br><ul><li>  Putting squidclamav </li></ul><br><pre> <code class="hljs dos"># wget ftp://ftp.pbone.<span class="hljs-built_in"><span class="hljs-built_in">net</span></span>/mirror/ftp5.gwdg.de/pub/opensuse/repositories/home<span class="hljs-variable"><span class="hljs-variable">%3A/Kenzy%</span></span><span class="hljs-number"><span class="hljs-number">3</span></span>A/packages/CentOS_7/src/squidclamav-<span class="hljs-number"><span class="hljs-number">6</span></span>.<span class="hljs-number"><span class="hljs-number">11</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.src.rpm # rpmbuild ‚Äìbb /root/rpmbuild/SPECS/squidclamav.spec</code> </pre> <br><ul><li>  Next, you need to put the packages from the folder / root / rpmbuild / RPMS / x86_64 in a public place </li></ul><br><br><h1>  <b>Configure c-icap and squidclamav</b> </h1><br><ul><li>  Install packages to work with c-icap (packages were assembled earlier) </li></ul><br><pre> <code class="hljs css"># <span class="hljs-selector-tag"><span class="hljs-selector-tag">rpm</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-ivh</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">c-icap-0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.5-3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.x86_64</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.rpm</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">libicapapi3-0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.5-3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.x86_64</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.rpm</span></span></code> </pre> <br><ul><li>  Edit the configuration file (add ‚ÄúService squidclamav squidclamav.so‚Äù and edit the performance parameters) </li></ul><br><div class="spoiler">  <b class="spoiler_title">like this</b> <div class="spoiler_text"><pre> <code class="diff hljs"># diff ‚Äìru /etc/c-icap/c-icap.conf.orig /etc/c-icap/c-icap.conf --- /etc/c-icap/c-icap.conf.orig 2016-07-19 23:29:47.764949235 +0300 +++ /etc/c-icap/c-icap.conf 2016-07-21 02:53:24.650555236 +0300 @@ -55,7 +55,7 @@ # generates a number of threads, which serve the requests. # Default: # StartServers 3 -StartServers 3 +StartServers 10 # TAG: MaxServers # Format: MaxServers number @@ -63,7 +63,7 @@ # The maximum allowed number of server processes. # Default: # MaxServers 10 -MaxServers 10 +MaxServers 70 # TAG: MinSpareThreads # Format: MinSpareThreads number @@ -72,7 +72,7 @@ # the c-icap server starts a new child. # Default: # MinSpareThreads 10 -MinSpareThreads 10 +MinSpareThreads 20 # TAG: MaxSpareThreads # Format: MaxSpareThreads number @@ -81,7 +81,7 @@ # the c-icap server kills a child. # Default: # MaxSpareThreads 20 -MaxSpareThreads 20 +MaxSpareThreads 50 # TAG: ThreadsPerChild # Format: ThreadsPerChild number @@ -89,7 +89,7 @@ # The number of threads per child process. # Default: # ThreadsPerChild 10 -ThreadsPerChild 10 +ThreadsPerChild 50 # TAG: MaxRequestsPerChild # Format: MaxRequestsPerChild number @@ -175,7 +175,7 @@ # The acceptable range of levels is between 0 and 10. # Default: # DebugLevel 1 -DebugLevel 1 +DebugLevel 0 # TAG: Pipelining # Format: Pipelining on|off @@ -466,7 +466,8 @@ # information about the c-icap server. # Default: # ServerLog /var/log/c-icap/server.log -ServerLog /var/log/c-icap/server.log +# Disabled +######ServerLog /var/log/c-icap/server.log # TAG: AccessLog # Format: AccessLog LogFile [LogFormat] [[!]acl1] [[!]acl2] [...] @@ -481,7 +482,8 @@ # AccessLog /var/log/c-icap/access.log # Example: # AccessLog /var/log/c-icap/access.log MyFormat all -AccessLog /var/log/c-icap/access.log +# Disabled +#########AccessLog /var/log/c-icap/access.log # TAG: Logger # Format: Logger LoggerName @@ -559,7 +561,7 @@ # Simple test service # Example: # Service echo srv_echo.so -Service echo srv_echo.so +Service squidclamav squidclamav.so # Module: sys_logger # Description:</code> </pre> </div></div><br><ul><li>  Editing the system to properly install the right to temporary files </li></ul><br><pre> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta"># echo </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"d /var/run/c-icap 0755 c-icap c-icap -"</span></span></span><span class="hljs-meta"> &gt;/etc/tmpfiles.d/c-icap.conf</span></span></code> </pre> <br><ul><li>  We create service for systemd </li></ul><br><pre> <code class="hljs swift">cat &lt;&lt;<span class="hljs-type"><span class="hljs-type">EOF</span></span> &gt; /usr/lib/systemd/system/<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-icap.service # create new [<span class="hljs-type"><span class="hljs-type">Unit</span></span>] <span class="hljs-type"><span class="hljs-type">Description</span></span>=<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-icap service <span class="hljs-type"><span class="hljs-type">After</span></span>=network.target [<span class="hljs-type"><span class="hljs-type">Service</span></span>] <span class="hljs-type"><span class="hljs-type">Type</span></span>=forking <span class="hljs-type"><span class="hljs-type">PIDFile</span></span>=/<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/run/<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-icap/<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-icap.pid <span class="hljs-type"><span class="hljs-type">ExecStart</span></span>=/usr/bin/<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-icap -f /etc/<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-icap/<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-icap.conf <span class="hljs-type"><span class="hljs-type">KillMode</span></span>=process [<span class="hljs-type"><span class="hljs-type">Install</span></span>] <span class="hljs-type"><span class="hljs-type">WantedBy</span></span>=multi-user.target <span class="hljs-type"><span class="hljs-type">EOF</span></span></code> </pre> <br><ul><li>  Install squidclamav through yum, as it will pull dependencies </li></ul><br><pre> <code class="hljs css"># <span class="hljs-selector-tag"><span class="hljs-selector-tag">yum</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">localinstall</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">squidclamav-6</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.11-2</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.x86_64</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.rpm</span></span></code> </pre> <br><ul><li>  Editing the configuration file.  Here it is important that squidguard is commented out. </li></ul><br><pre> <code class="diff hljs"># diff -u /etc/squidclamav.conf.orig /etc/squidclamav.conf --- /etc/squidclamav.conf.orig 2016-07-19 23:52:25.927974080 +0300 +++ /etc/squidclamav.conf 2016-07-21 02:43:17.838443019 +0300 @@ -18,14 +18,15 @@ # Path to the squiGuard binary if you want URL filtering, note that you'd better # use the squid configuration directive 'url_rewrite_program' instead. -#squidguard /usr/sbin/squidGuard +#squidguard /usr/bin/squidGuard # Path to the clamd socket, use clamd_local if you use Unix socket or if clamd # is listening on an Inet socket, comment clamd_local and set the clamd_ip and # clamd_port to the corresponding value. -clamd_local /var/run/clamav/clamd-socket -#clamd_ip 192.168.1.5,127.0.0.1 -#clamd_port 3310 +#clamd_local /var/run/clamd.scan/clamd.sock +clamd_ip 127.0.0.1 +clamd_port 3310 +trust_cache 0 # Set the timeout for clamd connection. Default is 1 second, this is a good # value but if you have slow service you can increase up to 3.</code> </pre> <br><ul><li>  ATTENTION!  When the squidguard option is activated, the squidclamav service will not be able to initialize </li><li>  We start the c-icap service </li></ul><br><pre> <code class="hljs swift"># mkdir /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/run/<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-icap # chown <span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-icap /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/run/<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-icap # systemctl enable <span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-icap # systemctl start <span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-icap</code> </pre> <br><br><h1>  <b>Setting up squid integration with c-icap</b> </h1><br><ul><li>  Add to the end of the squid configuration file </li></ul><br><pre> <code class="hljs pgsql"># cat <span class="hljs-symbol"><span class="hljs-symbol">&lt;&lt;EOF &gt;&gt;</span></span> /etc/squid/squid.conf # c-icap integration icap_enable <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> icap_send_client_ip <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> icap_send_client_username <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> icap_client_username_header X-Authenticated-<span class="hljs-keyword"><span class="hljs-keyword">User</span></span> icap_service service_req reqmod_precache bypass=<span class="hljs-number"><span class="hljs-number">1</span></span> icap://<span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>:<span class="hljs-number"><span class="hljs-number">1344</span></span>/squidclamav adaptation_access service_req allow <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> icap_service service_resp respmod_precache bypass=<span class="hljs-number"><span class="hljs-number">1</span></span> icap://<span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>:<span class="hljs-number"><span class="hljs-number">1344</span></span>/squidclamav adaptation_access service_resp allow <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> integration EOF</code> </pre> <br><ul><li>  Restart squid </li></ul><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># systemctl restart squid</span></span></code> </pre> <br><br><h1>  <b>SquidGuard setup</b> </h1><br><ul><li>  I was not able to raise this service, because with the s-specified in squidclamav, c-icap reported an initialization error squidclamav.  Perhaps in other OSs or with other compilation options this will work. </li><li>  Install squidGuard </li></ul><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># yum install squidGuard ‚Äìy</span></span></code> </pre> <br><ul><li>  Edit the /etc/squid/squidGuard.conf configuration file </li></ul><br><pre> <code class="hljs pgsql"># egrep -v "^#|^$" /etc/squid/squidGuard.conf dbhome /var/squidGuard/blacklists logdir /var/<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>/squidGuard <span class="hljs-type"><span class="hljs-type">time</span></span> workhours { weekly mtwhf <span class="hljs-number"><span class="hljs-number">08</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> - <span class="hljs-number"><span class="hljs-number">16</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-type"><span class="hljs-type">date</span></span> *-*<span class="hljs-number"><span class="hljs-number">-01</span></span> <span class="hljs-number"><span class="hljs-number">08</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> - <span class="hljs-number"><span class="hljs-number">16</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span> } rew dmz { s@://<span class="hljs-keyword"><span class="hljs-keyword">admin</span></span>/@://<span class="hljs-keyword"><span class="hljs-keyword">admin</span></span>.foo.bar.de/@i s@://foo.bar.de/@://www.foo.bar.de/@i } dest deny { domainlist deny/domains urllist deny/urls } acl { <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { pass !deny <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> redirect http://<span class="hljs-keyword"><span class="hljs-keyword">admin</span></span>.foo.bar.de/cgi/blocked?clientaddr=%a+clientname=%n+clientuser=%i+clientgroup=%s+targetgroup=%t+url=%u } }</code> </pre> <br><ul><li>  We create the necessary files for work. </li></ul><br><pre> <code class="hljs vhdl"># mkdir ‚Äìp /var/squidGuard/blacklists/deny # cat /var/squidGuard/blacklists/deny/domains yahoo.co.<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> example.com # cat /var/squidGuard/blacklists/deny/urls #write URLs you<span class="hljs-symbol"><span class="hljs-symbol">'d</span></span> like <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> prohibit <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">access</span></span> http://www.yahoo.co.<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> http://www.sathish.com</code> </pre> <br><ul><li>  We rebuild the base </li></ul><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># chown -R squid. /var/squidGuard/blacklists/deny/ # squidGuard -C all</span></span></code> </pre> <br><ul><li>  Check that data is available. </li></ul><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># ls -l /var/squidGuard/blacklists/deny/*.db -rw-r--r--. 1 root root 8192 Jul 19 22:09 /var/squidGuard/blacklists/deny/domains.db -rw-r--r--. 1 root root 8192 Jul 19 22:09 /var/squidGuard/blacklists/deny/urls.db # file /var/squidGuard/blacklists/deny/domains.db /var/squidGuard/blacklists/deny/domains.db: Berkeley DB (Btree, version 9, native byte-order)</span></span></code> </pre> <br><br><h1>  <b>Dansguarian setup</b> </h1><br><ul><li>  Install dansguardian (was compiled previously) </li></ul><br><pre> <code class="hljs css"># <span class="hljs-selector-tag"><span class="hljs-selector-tag">rpm</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-ivh</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">dansguardian-2</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.12</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3-1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.x86_64</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.rpm</span></span></code> </pre> <br><ul><li>  Rule configuration file </li></ul><br><pre> <code class="hljs scala"># vi /etc/dansguardian/dansguardian.conf ‚Ä¶ accessdeniedaddress = <span class="hljs-symbol"><span class="hljs-symbol">'http</span></span>:<span class="hljs-comment"><span class="hljs-comment">//127.0.0.1/cgi-bin/dansguardian.pl' ‚Ä¶</span></span></code> </pre> <br><ul><li>  Add to startup and run </li></ul><br><pre> <code class="hljs pgsql"># /etc/init.d/dansguardian <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> # chkconfig dansguardian <span class="hljs-keyword"><span class="hljs-keyword">on</span></span></code> </pre> <br><ul><li>  If required, we can customize categories and <div class="spoiler">  <b class="spoiler_title">filter lists</b> <div class="spoiler_text"><pre> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta"># ls -l /etc/dansguardian/lists/ total 140 drwxr-xr-x. 2 root root 21 Jul 20 01:13 authplugins -rw-r--r--. 1 root root 4950 Jul 20 01:38 bannedextensionlist -rw-r--r--. 1 root root 500 Jul 19 21:15 bannediplist -rw-r--r--. 1 root root 284 Jul 19 21:15 bannedmimetypelist -rw-r--r--. 1 root root 1958 Jul 19 21:15 bannedphraselist -rw-r--r--. 1 root root 321 Jul 19 21:15 bannedregexpheaderlist -rw-r--r--. 1 root root 5229 Jul 19 21:15 bannedregexpurllist drwxr-xr-x. 2 root root 20 Jul 20 01:13 bannedrooms -rw-r--r--. 1 root root 4985 Jul 19 21:15 bannedsitelist -rw-r--r--. 1 root root 2640 Jul 19 21:15 bannedurllist drwxr-xr-x. 3 root root 16 Jul 20 01:13 blacklists -rw-r--r--. 1 root root 4979 Jul 19 21:15 contentregexplist drwxr-xr-x. 2 root root 4096 Jul 20 01:13 contentscanners drwxr-xr-x. 2 root root 59 Jul 20 01:13 downloadmanagers -rw-r--r--. 1 root root 480 Jul 19 21:15 exceptionextensionlist -rw-r--r--. 1 root root 912 Jul 19 21:15 exceptionfilesitelist -rw-r--r--. 1 root root 834 Jul 19 21:15 exceptionfileurllist -rw-r--r--. 1 root root 708 Jul 19 21:15 exceptioniplist -rw-r--r--. 1 root root 653 Jul 19 21:15 exceptionmimetypelist -rw-r--r--. 1 root root 538 Jul 19 21:15 exceptionphraselist -rw-r--r--. 1 root root 335 Jul 19 21:15 exceptionregexpurllist -rw-r--r--. 1 root root 1275 Jul 19 21:15 exceptionsitelist -rw-r--r--. 1 root root 361 Jul 19 21:15 exceptionurllist -rw-r--r--. 1 root root 194 Jul 19 21:15 filtergroupslist -rw-r--r--. 1 root root 1910 Jul 19 21:15 greysitelist -rw-r--r--. 1 root root 902 Jul 19 21:15 greyurllist -rw-r--r--. 1 root root 616 Jul 19 21:15 headerregexplist -rw-r--r--. 1 root root 623 Jul 19 21:15 logregexpurllist -rw-r--r--. 1 root root 596 Jul 19 21:15 logsitelist -rw-r--r--. 1 root root 591 Jul 19 21:15 logurllist drwxr-xr-x. 36 root root 4096 Jul 20 01:13 phraselists -rw-r--r--. 1 root root 2743 Jul 19 21:15 pics -rw-r--r--. 1 root root 2887 Jul 19 21:15 urlregexplist -rw-r--r--. 1 root root 6524 Jul 19 21:15 weightedphraselist # cat /etc/dansguardian/lists/bannedsitelist |egrep -v </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"^#|^$"</span></span></span><span class="hljs-meta"> badboys.com .Include</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;/etc/dansguardian/lists/blacklists/ads/domains&gt;</span></span></span></span></code> </pre> </div></div></li></ul><br><h1>  <b>Apache web server setup</b> </h1><br><ul><li>  Install packages </li></ul><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># yum install httpd</span></span></code> </pre> <br><ul><li>  Run and add to autoload </li></ul><br><pre> <code class="hljs pgsql"># systemctl <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> httpd # systemctl <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> httpd</code> </pre> <br><ul><li>  Copy scripts from squidclamav to CGI directory </li></ul><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># cp /srv/www/cgi-bin/clwarn.cgi* /var/www/cgi-bin/</span></span></code> </pre> <br><br><h1>  <b>Health check</b> </h1><br><ul><li>  We register the proxy server settings in my web browser <br>  - Address: your server‚Äôs routable address <br>  - Port: 8080 (Dansguardian port) </li><li>  We try to connect to websites (should work) </li><li>  We try to download the test virus eicar.  Here you should see the following message: </li></ul><br><img src="https://habrastorage.org/files/cbe/f9f/2ce/cbef9f2ce3c94fea9aa5864553c342d6.png" alt="image"><br><ul><li>  We try to open forbidden links (http://badboys.com).  You should see the following message from Dansguardian: </li></ul><br><img src="https://habrastorage.org/files/a2e/f92/0e5/a2ef920e5c834b799b04b4f199688b3b.png" alt="image"><br><br><h1>  <b>Conclusion</b> </h1><br>  This article shows that setting up a squid proxy server with the ClamAV antivirus software is a simple task that even a novice Linux / Unix administrator can do. <br><br>  By <a href="https://habrahabr.ru/users/artemii/" class="user_link">artemii</a> </div><p>Source: <a href="https://habr.com/ru/post/307020/">https://habr.com/ru/post/307020/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../307010/index.html">Proof 2 Cases BTF</a></li>
<li><a href="../307012/index.html">Rating of programming languages ‚Äã‚Äãin 2016</a></li>
<li><a href="../307014/index.html">As one admin zoo tamed</a></li>
<li><a href="../307016/index.html">Fairy Tales Ransomwhere: Cerber on the rise</a></li>
<li><a href="../307018/index.html">Sprute.js. Another isomorphic JavaScript framework</a></li>
<li><a href="../307022/index.html">Cheburashka and torrents (fairy tale)</a></li>
<li><a href="../307024/index.html">Deep Learning - what to do, whom to beat</a></li>
<li><a href="../307026/index.html">Work with Facebook API from UWP applications</a></li>
<li><a href="../307028/index.html">Budget "data center" at Nutanix CE</a></li>
<li><a href="../307032/index.html">Installing any software using WSUS - 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
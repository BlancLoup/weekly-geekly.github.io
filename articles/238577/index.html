<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Facebook opened the veil to its technology</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The obvious fact is that distributed computing systems of particularly large scales require special, individual rules and regulatory systems. Simple s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Facebook opened the veil to its technology</h1><div class="post__text post__text-html js-mediator-article">  The obvious fact is that distributed computing systems of particularly large scales require special, individual rules and regulatory systems.  Simple scaling technology for small systems does not work here.  One of these differences is the need to use web caching.  How do Facebook engineers cope with Zookenberg's brainchild?  Let's take a closer look at the caching principles used by the network giant Facebook. <br><br><img src="https://habrastorage.org/files/c5a/71f/682/c5a71f682cad40eaa1b750fe81c61971.jpg"><br><a name="habracut"></a><br>  Known, caching boils down to the fact that the most frequently requested information by users is moved from the place of its permanent storage to the intermediate buffer, which allows performing I / O operations much faster.  The traditionally used concept of ‚Äúcache‚Äù is found in many areas of our life, and its role is extremely important.  Specifically, in the network IT industry, using data caching removes the load from the servers that store the array of highly demanded information by users.  The result of the implementation of this approach for an ordinary visitor of a social network is an instant download of any, even the most popular web page at this moment.  For the normal functioning of popular network resources, this technology has long been transferred from the category of "desirable" to "necessary."  And, of course, Facebook is not the only one of its kind.  Caching is also key for other similar Internet projects: Twitter, Instagram, Reddit and others. <br><br>  Facebook network infrastructure engineers have created a special tool for managing caching processes, giving it the name ‚ÄúMcrouter‚Äù.  At the beginning of this month a very important event took place for the further existence and development of Mcrouter.  At the seasonal conference, which was held in San Francisco, Facebook representatives opened the system code of their offspring.  In fact, it is a memcached-based router that manages all traffic between thousands of servers allocated for caching, as well as dozens of clusters located on corporate data centers.  Thus, the memcached technology is quite capable of working on the scale of a project like Facebook. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Memcached is a data caching system for servers that are part of a distributed infrastructure.  For the first time this software product was used for LiveJournal in 2003, and nowadays it has already become an integral part of many Internet companies, such as Wikipedia, Twitter, Google. <br><br><img src="https://habrastorage.org/files/84e/824/ebd/84e824ebd59e4eccbc18c6d5b8be2448.jpg"><br><br>  Instagram started using mcrouter when it was working on server infrastructure from Amazon Web Services (AWS), before it moved to the Facebook data center.  Employees of Reddit, which, by the way, also located on AWS, have already completed testing mcrouter for their project, and in the very near future they plan to fully transfer all of their resources to its use. <br><br><h4>  Open source formalization </h4><br>  Facebook to manage its data centers, creates and uses many software products with open source.  That is their principle.  At the same recently held conference in San Francisco, company representatives have mentioned a lot about the importance of maximizing the ‚Äúopenness‚Äù of the software used.  Their initiative to further work in this direction was supported by such IT giants as Google, Twitter, Box &amp; Github.  With some risks of openness, the benefits that software gets for its development are quite obvious.  Well, we just have to wait, what real actions will follow the announced initiative, and they will not make them wait for a long time. <br>  The companies participating in the forum, which supported the initiative of ‚Äúopenness‚Äù of the software, announced the creation of the organization TODO (an abbreviation of ‚ÄúWe negotiate Open, Create Open‚Äù), which will take on the role of a focal point in this process.  So far, no specific action plans have been announced, but in general, obviously, the organization will contribute to the development of new products and promote existing ones.  Also, community members are committed to adapt and unify their own software development. <br><br><img src="https://habrastorage.org/files/a4f/247/727/a4f247727f4f4c67846a82b1680e4ee9.gif"><br><br><h4>  Where the huskies live </h4><br>  Mcrouter has become indispensable for the further development of Facebook, especially for the implementation of some interesting features on the site.  According to Rajesh Nishtal, one of the programmers of the company, one of these functions was the ‚Äúsocial graph‚Äù - an application that tracks the connections between people, their tastes and the actions they do during their time on Facebook. <br><br>  The social graph contains the names of people and their connections, as well as objects: photographs, posts, likes, comments and geolocation data.  ‚ÄúAnd this is just one of the tasks for which caching is applied,‚Äù said Nishtala. <br><br><img src="https://habrastorage.org/files/57a/62a/3e7/57a62a3e7aad4554864de297b65bfc85.JPG"><br><br>  Each time the social network page loads, it accesses the cache.  In turn, the cache is able to handle more than 4 billion of such operations per second, thanks largely to mcrouter.  This tool successfully copes with the whole infrastructure. <br><br><h4>  From load balancing to overload protection </h4><br>  Mcrouter is an intermediate link between the client and the cache server, in fact, the user works through it.  It is he who receives user requests and sends the answers to the cache servers.  In addition to all of the above, Nishtala also described three main tasks of this system: the consolidation of connections to the cache, the distribution of the workload across the storage itself, and automatic protection against overloading a particular server in the network. <br><br>  Combining connections to the cache helps to maintain high productivity of the site.  If each user starts directly connecting to the cache server directly, it can easily lead to its overload.  Mcrouter works on the principle of proxy and balancer, which gives clients access to the server until the load on it becomes critical. <br><br>  At a time when many processes compete with each other in the cache memory, thereby creating a load on it, the system distributes these processes into groups, and already these groups spreads between the existing network of servers. <br><br>  If the cache server fails, mcrouter automatically connects the other, with a backup.  As soon as this happens, the system begins to monitor whether the server that has crashed has returned. <br><br>  The system also has the ability to create entire levels of merged server groups.  When one cache server pool is unavailable, mcrouter automatically shifts the load to another available group of them. <br><br><img src="https://habrastorage.org/files/b14/361/72e/b1436172e91a4ac2b8d8d5219deb7505.jpg"><br><br><h4>  Reddit also bets on mcrouter </h4><br>  Raddit has already managed to test the work of mcrouter on one of the AWS clusters provided to them.  Reddit system administrator Ricky Ramirez said about this: ‚ÄúThe use of servers by the site changed continuously for many days, the number of servers used ranged from 170 to 300 pieces.  We also had about 70 backend cache nodes with a total memory of 1TV.  According to the results we can say that in general the system has justified itself.  The weak point that mcrouter should help is the inability to switch to new types of machines that Amazon is constantly inventing.  This is quite a big problem, which takes a lot of time from the engineer-operator. ‚Äù <br><br>  After a successful test running on one of the groups of combined servers, which performed 4200 operations per second, the team plans to use mcrouter on much heavier loads.  The next group will be tested for operability already with a load of more than 200,000 operations per second. <br><br>  Next, engineers plan to use mcrouter to gain access to new cloud-based virtual machines and replace their current capacity without downtime of the Internet resource.  The unloading of the already utilized capacities will be associated with certain difficulties in managing the infrastructure, but Ramirez is confident that as a result all these efforts will bring an impressive increase in the productivity of this equipment. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/EYhcumt8YyI%3Ffeature%3Doembed&amp;xid=17259,1500004,15700019,15700043,15700186,15700190,15700253&amp;usg=ALkJrhgAAQwyggeYOy4O0hMyrec-ERHDBw" frameborder="0" allowfullscreen=""></iframe></div><p>Source: <a href="https://habr.com/ru/post/238577/">https://habr.com/ru/post/238577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../238567/index.html">Java ME: Midlet Structure</a></li>
<li><a href="../238569/index.html">How to solve user problems not in a day, but in minutes: we speed up the search in logs</a></li>
<li><a href="../238571/index.html">QJack thermometer helps turn temperature measurement into a game</a></li>
<li><a href="../238573/index.html">Sony: we will teach you to look at the world with alien eyes</a></li>
<li><a href="../238575/index.html">FTN-based messenger</a></li>
<li><a href="../238581/index.html">The structure of the code in Unity3d - personal opinion and a couple of tricks</a></li>
<li><a href="../238587/index.html">Catch - framework for unit-tests</a></li>
<li><a href="../238589/index.html">Selection of a two-factor authentication solution provider. Part 1 of 2</a></li>
<li><a href="../238591/index.html">Pebble Steel - the evolution of Pebble smart watches</a></li>
<li><a href="../238595/index.html">Adobe introduced the streaming version of Photoshop for ChromeOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
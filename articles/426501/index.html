<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Lamoda Inside: Why Online Store 300 Engineers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! My name is Valentine, I am CTO in Lamoda, where I have been working almost since the company was founded. All these years, we ran forward so...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Lamoda Inside: Why Online Store 300 Engineers</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr!  My name is Valentine, I am CTO in Lamoda, where I have been working almost since the company was founded.  All these years, we ran forward so fast with the whole team that it was not possible to stop a bit and tell about ourselves.  I think the time has come. <br><br> <a href="https://habr.com/company/lamoda/blog/426501/"><img src="https://habrastorage.org/getpro/habr/post_images/31d/f34/e5e/31df34e5e7033cc44dcd01a87a25aab0.jpg"></a> <br><br>  It may seem that Lamoda is one of the pioneers of the Russian Internet, but we are only seven years old.  Since our foundation in 2011, our company has grown from 11 employees to more than five thousand.  Every month, more than 10 million people visit our website.  In fact, we were a start-up novice in well-established Russian IT, and in the end, in such a short time, we were able to catch up and outperform many of the honored guys. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I hope that we will gradually tell you about our most useful and interesting achievements, failures, experience and what tasks our team faces every day.  We will consider this post our acquaintance. <br><a name="habracut"></a><br>  In 2011 we independently developed only the preparation of content and the purchase of stock for sale, everything else was outsourced.  Now we do everything ourselves.  We supervise the operation of our own five-level warehouse the size of a football field, three contact centers and delivery to customers.  Despite the fact that Russia has a very high IT culture, large companies are only beginning to dive into how to build such an infrastructure, and Lamoda has been successfully following this path for many years. <br><br>  So, what is the technical backstage of Lamoda?  In fact, these are five large divisions: <br><br><ul><li>  development department (business process automation department and online store development department) <br></li><li>  IT support department (infrastructure and security) <br></li><li>  ERP system implementation and support department <br></li><li>  service support department <br></li><li>  data and analytics department <br></li></ul><br><img src="https://habrastorage.org/webt/ht/99/ps/ht99ps5obq4p4ycbxeoyvzkw66o.jpeg"><br><br><h2>  All in GO </h2><br>  This story is about the guys who are developing an e-commerce platform, and in their free time they drive on mots and take excursions to craft beer bars. <br><br>  It is in the development department of e-commerce platforms that create everything that Lamoda customers use every day: the desktop and mobile version of the site and applications for iOS and Android.  The complexity of the work is not in the implementation of functionality for the user, the team needs as quickly as possible, but without loss of quality and stability, roll out new features and support projects in four countries: Russia, Kazakhstan, Ukraine and Belarus.  Today, the employees of this department are able to start the service every week, if necessary, and work under the motto: ‚ÄúEverything is in the GO‚Äù. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6Ouul0H7u68" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  The teams are mainly divided by platform (desktop, mobile site, mobile apps), there are also four commands for backend services.  Each team includes front and back developers, analysts, testers and product managers. <br><br>  In order to deliver changes as often as possible, we practice this approach to development iterations: at the beginning of the sprint we put forward a hypothesis, and releasing new features in production, test it, thus understanding whether the innovation benefits the product and whether the life of Lamoda users becomes better.  For example, not so long ago we learned how to show how much of a product viewed by a person was bought lately.  To do this, we took the product challenge, found the MVP in it and identified the fastest implementation strategy.  Before we rolled out everything in production, we determined that the criterion of success would be an increase in conversion.  According to the results of the A / B test, the conversion is higher in the group where the feature was implemented. <br><br>  Some time ago, a massive and rapid transition to microservices began in Lamoda.  What does this give us?  The first is a low entry threshold for a new developer or specialist from another team.  The second is the easy support and change of microservice systems so that the workflow is filled with interesting things, not just pain.  But a small number of monoliths (for example, a system that is responsible for the distribution of orders) still lives in our country, and it is difficult and inconvenient to get rid of them at the moment. <br><br><h2>  We collect Lamoda from scratch without SMS and registration </h2><br>  Everyone knows that there is no work without fayl.  Each time, solving the problem and running the code, we hope that here it is, happiness, and then not - again experience.  Speaking of experience, it is worth noting that employees of the e-commerce development department of the platform, like true fighters, are able to literally assemble Lamoda from scratch.  It happened that due to incorrect network settings, our cluster decided that it was no longer a cluster, and refused to exist.  We were lucky that it was at night, and in four hours we managed to breathe life into Lamoda.  We have other stories. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5f8/882/6a2/5f88826a28f173ede0d5e8f774ac88f6.png"><br><br>  <i>Timur Nurutdinov, Head of E-commerce Development Platform:</i> <br><br>  <i>Before starting work on the new functionality, we, as usual, sat down to assess what resources we needed.</i>  <i>Four teams were involved in the project.</i>  <i>We took into account the priorities of other tasks, the schedule of colleagues‚Äôs vacations and labor costs.</i>  <i>As a result, we got 32 weeks.</i> <br><br>  <i>Eight months to implement a single feature.</i>  <i>That sounds crazy.</i>  <i>With the help of simple changes, we managed to reduce time to market to 4 weeks, and this is what we did.</i> <br><br>  <i>The trick of platform teams is that they are able to do both the front and the back.</i>  <i>So work and in our department.</i>  <i>But on the back there is a need to make changes to many integrated systems, and the competencies of the platform team do not allow this.</i>  <i>We started the Sizes project concerning the provision of the client with the most detailed dimensional grids, and did not want to wait.</i>  <i>To begin with, we had to figure out which systems need to be changed, then we put together a small team with suitable competencies.</i>  <i>So we removed the block on waiting for resources from other platform commands and got a grocery command.</i>  <i>As for the tasks, we acted with our proven method - we broke the big tasks into smaller ones, made them, rolled them out and tested our hypotheses on users to understand whether we were moving in the right direction.</i>  <i>After such a successful experiment with the creation of a product team, we plan to organize teams in areas where employees form a single unit and develop a certain direction, such as delivery.</i> <br><br><h2>  Warehouse Automation and 15-Minute Delivery Intervals </h2><br>  Automation guys don't have time to be bored, and the puzzles here are not trivial.  For example, how to fill the site with millions of products with equally high quality content (photo studio automation), how to process and take into account all orders from the site, taking into account hundreds of marketplace partners and four CIS countries, how to assemble an order in a five-hour warehouse, how to implement delivery to the client the next day at the 15-minute interval chosen by him in 600 cities in Russia only.  And for dessert, here they serve the sale of this whole farm to B2B partners and the Marketplace-direction. <br><br>  The work is carried out mainly in PHP, for warehouse automation we use Java plus Docker / Kubernetes, Atlassian stack, PostgreSQL, RabbitMQ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/477/e7d/874/477e7d874eb10aedaaa2b66292bca967.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/6d1/2dd/977/6d12dd9778ee58aae90f06edb9a6c217.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/8fd/10b/58f/8fd10b58f61b9ce81bb22470dd54ed34.jpg"><br><br>  We have a baket system in our department for planning sprints: 60% is the project batch, 20% is technical debt, priority bugs are given 10% of the sprint, and 10% that something must come from the outside.  Among other things, backlog grooming, online planning poker, stand-up, retro, code review 360, collecting and analyzing basic metrics, conducting monitoring (Prometheus, Grafana, Icinga, Kibana), in general, everything is like in the best <s>houses of Paris</s> development teams. <br><br><img src="https://habrastorage.org/webt/oy/xb/ee/oyxbeegbnl_rgchcb_-yifhhqm0.jpeg" align="right">  <i>Here are a couple of funny stories from Pavel Savelyev, head of business process automation.</i> <br><br>  <i>It is impossible to test and take everything into account, because in every business process people are involved in one way or another.</i>  <i>And people, as you know, are rational beings and always try to come up with cunning pieces that will make their lives easier for them.</i>  <i>But when these very notions go against the described business process, funny stories happen.</i> <br><br>  <i>Once we noticed that the system responsible for the distribution of goods in a warehouse <b>,</b> receives a hundred times more scans in a minute than usual.</i>  <i>It turned out that the warehouse staff found the hack system and decided to facilitate their work.</i>  <i>Leaving for lunch, they clamped the button on the scanner so that they would not be thrown out of the user session.</i>  <i>And this their work hack would have worked further, but in one of the totes (a special box for goods in the warehouse) there were many small items.</i>  <i>The scanner, like Maxim's machine gun, handled goods from the ill-fated company, which led to a sharp jump in load, system glitches and the detection of an obvious bug from the developers.</i>  <i>Bug we, of course, fixed, but I think that the warehouse staff will not let us be bored and come up with something new.</i> <br><br>  <i>The second case also occurred in stock.</i>  <i>This story is called "43 funny t-shirts."</i>  <i>It is not always immediately possible to recognize the complexity of the algorithm, especially when you solve the backpack problem and you need to optimally place in a certain amount of N items (the task of three-dimensional packaging).</i>  <i>It turned out that if 43 absolutely identical T-shirts come to our warehouse, the system responsible for packing goods generates so many distribution combinations for a given case that it simply does not have enough memory.</i>  <i>We revised the algorithm and we are no longer afraid of the same T-shirts - but what if the packaging gets hundreds of socks that manufacturers decide to sell one at a time?</i>  <i>This is worth thinking about ...</i> <br><br><h2>  In any incomprehensible situation, be guided by data. </h2><br>  Changes regarding analytics at Lamoda are long overdue, and this year we started to unite disparate analytics departments with our analytical infrastructure and habits into one big department.  What for?  The main reason is that employees who are in separate teams of analysts often do the same work, but in different ways, and then it is not quite clear what data to focus on.  Different data is generally normal, because the teams come from different tasks and prerequisites, but you need to spend a lot of time to understand them. <br><br>  Department staff are true evangelists that all decisions in a company should be made on the basis of data, so every day they enthusiastically study business phenomena in data, analyze and extract value from data, assessing how they can be applied.  The main tool is SQL, as well as Spark, Hadoop, Python for data analysis, Excel, SAP BusinessObjects for reporting and Tableau for visualization. <br><br>  One of the important tasks of the team is to personalize customer experience: we create a solution where each user will be shown the most relevant list of products and offers for him, and all our services will individually adjust to each individual client, rather than to a group, as is done now. <br><br><img src="https://habrastorage.org/webt/k_/tp/fo/k_tpfo-t1ajqk7wtaiumsyxueao.jpeg" align="left">  <i>Sergey Gilev, Head of Data and Analytics:</i> <br><br>  <i>The department of analytics currently faces two major tasks: the first is to consolidate a heterogeneous economy, which we had before the merger.</i>  <i>For further effective work, we need common metrics, analytical infrastructure and processes.</i>  <i>The second goal is a project to create analytical dashboards that describe the "health" of a specific process or the entire company.</i>  <i>Thus, we strive to significantly improve the availability of data for decision makers and instill in all our approach to work: in any incomprehensible situation, be guided by data.</i> <br><br><h2>  The story of a big move: how we launched our own warehouse imperceptible to customers </h2><br>  The gradual abandonment of outsourcing led us to the fact that it was time to put into operation our own warehouse.  In addition to all the training on automating operational processes in the new warehouse, we set ourselves the goal of not reducing the range and in no way stopping the sale.  Our experts have developed a solution based on the creation of additional "virtual" warehouses.  Thus, throughout the relocation, we had three types of warehouses: old, new, and ‚Äúon the road‚Äù.  Since the transportation of goods was carried out gradually by groups of trucks, the stock, which turned out to be in the next lot, moved to a ‚Äúvirtual‚Äù warehouse.  We had a schedule of loading and unloading, so we knew exactly how long the stock would be on the way and oriented customers to the correct date of delivery of the order. <br><br>  We also invented and implemented a tricky algorithm that allowed us to balance the speed of the move and organize the receipt of all goods of the order with one delivery: when a person ordered several goods that could physically be in different warehouses, we tried to organize a complete assembly of the order in any one warehouse, and the advantage was given to the warehouse of the partner, since the assembly process there was already debugged. <br><br>  The work on launching our own warehouse was in full swing for three months, during which not a single client was hurt. <br><br><h2>  Preparing for Black Friday or how we survive shopping </h2><br>  Several years ago we were afraid of Black Friday as a scary monster.  We had no idea how our systems would react to such a flow of orders.  But the constant work on refactoring and infrastructure development has stabilized our systems and made them as predictable as possible.  The last ‚ÄúBlack Friday‚Äù was the most boring day of the year.  Specialists of key systems and DevOps just sat at the table, played video games or watched movies and watched the state of our infrastructure with only a small eye.  But the preparation for this day goes a little differently. <br><br>  We make a schedule of load tests based on business forecasts, then the developers and administrators set up systems for passing tests.  Several months of testing, crashes, fixes, and only after that we believe that we are ready for the wave of users and orders. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/efa/1dc/187/efa1dc187d50842d435cf89773db1318.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/949/2a0/251/9492a0251f54ae48b55cfbb53d1ed28b.jpg"><br>  <i>War room - our operational center on Black Friday</i> <br><br>  The decisions we make to survive on Black Friday depend on the bottlenecks we face during testing.  A few years ago, we physically replaced network switches to eliminate bandwidth problems.  Another action that we usually perform in order to reduce the load is to turn off subsystems that are not critical. <br><br><h2>  Results </h2><br>  All these years we have been trying to constantly improve and simplify our workflow, collecting feedback from the company's employees, establishing the bottom-up channels and fully supporting fresh ideas and concepts. <br><br>  Someone will say that Lamoda is an absolute zoo of technologies and systems.  We ourselves often joke about this topic and say: ‚ÄúBetter ask what we do not use.‚Äù  But in this matter, the essential fact is that we have a constant evolution of the stack and technology, and at the same time there is no thoughtless choice of them.  In this, we are helped by the Architecture review of each new service and project, a reference to the existing expertise of employees, as well as the maintenance of <a href="https%253A%252F%252Fdocs.google.com%252Fspreadsheets%252Fd%252F1tV4uowMRiCRfPQd5X_LvMu3GTMTfcg0AxLxel_Y7UWQ%252Fpubhtml%253Fgid%253D0%2526single%253Dtrue">Technology Radar</a> , the details and arguments for which we will gladly tell in the next post.  And also we are happy to talk about this. </div><p>Source: <a href="https://habr.com/ru/post/426501/">https://habr.com/ru/post/426501/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../426491/index.html">Security Week 39: on the death of Google+</a></li>
<li><a href="../426493/index.html">Permanent discounts from hosters for VPS and VPS.today Search visitors</a></li>
<li><a href="../426495/index.html">Solo designer. How to build a career when you work alone</a></li>
<li><a href="../426497/index.html">CPU cores or what SMP is and what it is eaten with</a></li>
<li><a href="../426499/index.html">Educational program for working with punch cards (or the story of how ‚Äúbig data‚Äù were processed from 1890 to 1970)</a></li>
<li><a href="../426503/index.html">SAP HANA functionality as a database for SAP HANA Data Management Suite</a></li>
<li><a href="../426505/index.html">Digital events in Moscow from October 15 to October 21</a></li>
<li><a href="../426507/index.html">Architecture creation: working with iOS Coordinator pattern</a></li>
<li><a href="../426509/index.html">What is a computer information system</a></li>
<li><a href="../426511/index.html">An example of a process approach: pre-project survey of an industrial company. BPMN Example Chart</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
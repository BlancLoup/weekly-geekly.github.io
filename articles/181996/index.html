<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We collect CarPC on Android: unfinished unfinished</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="My car suits me almost everything. There is almost everything you need. In the configuration bluetooth phone, push-button climate control, electric wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We collect CarPC on Android: unfinished unfinished</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/105/efc/a10/105efca10aa774539374520a4c7f0499.png"><br><br>  My car suits me almost everything.  There is almost everything you need.  In the configuration bluetooth phone, push-button climate control, electric windows on all doors, heated seats, heated, adjustable and folding mirrors, chip key, CD-changer for 6 discs, but without MP3 and line-in.  It was this unfortunate fact that led me to the idea of ‚Äã‚Äãstarting to assemble my CarPC on the basis of android.  Began to consider the options and rolled ... there were a lot of ideas. <br><a name="habracut"></a><br><br>  There are many different variants of CarPC based on Windows, Androids, Linux, and even Macs on the thematic forums, but like most fans of picking up pieces of iron, I wanted to build my own unique one.  For my CarPC, I put forward several requirements: <br><ul><li>  The basis of our CarPC is Android; </li><li>  must be embedded in the panel and look like a factory ... without a collective farm; </li><li>  On board should be a Bluetooth to connect the phone, speakerphone and A2DP; </li><li>  A quality screen and high graphics performance are required; </li><li>  install with minimal intervention in the wiring cars; </li><li>  large HDD or SSD for music, navigation maps, records from DVRs, etc .; </li><li>  synchronization of music when the car is close to home and catches home Wi-Fi; </li><li>  albeit slow, but constant access to the Internet. </li></ul><br>  I chose Android because there is a lot of high-quality navigation, a lot of useful software, a lot of suitable devices and firmware for them, open source and it‚Äôs easy to write your code for it.  I met ready-made solutions that satisfy certain requirements, but, to be honest, I did not really consider them, because  Immediately did not like anything, and the price is often high with poor functionality.  Therefore, I leave the problems of choice and move on to the custom version, which should be almost perfect for me. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Article review.  The system is presented in general form and for each component of the system I want to show my vision of its implementation.  Our carpc can consist of several devices.  Separate modules, I tried to portray the connections between them like this: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/905/91d/0f0/90591d0f0ed58ee7ac9ef65ce01f36c9.png"><br><br>  All blocks are divided by degree of reliability: <br><ul><li>  Blue - devices that can turn off at any time; </li><li>  Orange - devices that should work independently of blue, turn on quickly and be as reliable as possible.  Although nothing terrible will happen if the system falls entirely ... we will not leave the road, the engine should not stall); </li><li>  Black arrows - digital data transfer; </li><li>  Red arrows - analog audio transmission; </li><li>  Intermittent arrow - WiFi network. </li></ul><br><br><h4>  Controller </h4><br>  The heart of the system is the ‚Äúcontroller‚Äù.  Its tasks include obtaining data from devices and sensors, processing this data and, if possible, managing it.  If a controller and an Android tablet are connected, the controller transfers the collected data to the more ‚Äúintelligent‚Äù Android program, and then it allows you to change controller settings, control other devices via the controller. <br><br>  A little running ahead, I will give an example: <br>  Let's say the android has hung, it reboots or the control program falls on it.  At this time, an incoming call is being sent to the Bluetooth module from the phone.  There is an opportunity to answer it with a button on the steering wheel.  And it is implemented by the controller without the participation of the android.  Since  the controller is available information about the status of the steering wheel buttons and he sees that there is no connection with the android, he can implement such a primitive function as receiving a call by a short press, hang up for a long time.  If everything is in order and the management program responds to it, then it will transmit information about the incoming call to the android, the android will draw a beautiful window and it will be possible to implement a more convenient functionality by means of the android itself.  On the buttons on the steering wheel, android, too, will know accordingly.  The same goes for the radio.  Channel switching and volume control can be performed from the steering wheel without the participation of the android. <br><br>  The basis of the controller, I suggest to take the stone <a href="http://habrahabr.ru/search/%3Fq%3DSTM32"><b>STM32</b></a> .  I mess around with the <a href="http://www.st.com/web/en/catalog/tools/FM116/SC959/SS1532/PF252419"><b>STM32F4-Discovery</b></a> board, but of course it is possible to use other options.  Personally, I find it somewhat harder to write C code under STM32 and not so conveniently than, say, python or node.js under Raspberry Pi.  But the device on the STM32 is more suitable for these tasks.  The logic is relatively simple and the code must be written, roughly speaking, to connect devices and handle simple commands.  Plus, I think the STM32 based controller will be initialized much faster than the Raspberry Pi. <br><br><h4>  The tablet </h4><br>  I chose the first generation <a href="http://habrahabr.ru/post/133540/"><b>Amazon Kindle Fire</b></a> as a tablet.  I have been lying around for a long time, and its visible area of ‚Äã‚Äãthe screen fits well in size in 2DIN.  The dimensions of the case allow you to stick it without significant rework of the panel in the car.  Relatively cheap, has a high-quality screen, a fairly powerful percentage and graphics.  He has no extra buttons!  In this case, it is rather a plus!  There is a USB host, but I think you should not use it.  Since it is supported only in custom firmware and when connecting several devices various floating glitches occurred.  Stable work is not achieved ... <br>  I think everyone knows that in the old Kindle Fire there is neither 3G, nor GPS, nor bluetooth, so I use the <a href="http://habrahabr.ru/post/164399/">TP-LINK MR3020</a> for 3G and connecting external USB drives.  This option is somewhat redundant, but for now let it be so. <br><br><h4>  Firmware </h4><br>  I think it is not worth much to cut the firmware itself, otherwise it will be problematic to update it.  I would like to implement all the functionality purely by the application.  But still, if it is convenient to do, then you can remove the battery icon (or show them the level of fuel in the tank, battery charge).  The bluetooth icon is shown when connected to the bluetooth module of our CarPC phone and / or A2DP player, and also shows the level of the network of the cellphone connected via the bluetooth.  It would also be nice to pick up a standard android dialer to your bluetooth module. <br><br><h4>  Communication controller with the tablet </h4><br>  Communication with the tablet on the android can be implemented in different ways.  If there is a USB host on board, then you can use <b>USB &lt;-&gt; UART</b> , <b>Ethernet</b> .  You can also via <b>Wi-Fi</b> , but I would like to have a reliable wired connection.  I consider the use of the <a href="http://developer.android.com/tools/adk/index.html"><b>ADK to</b></a> be the best way to implement the connection, the support of which has long been implemented even in the most recent versions of the android.  In this case, fit any tablet and even a mobile phone on which you can put control software, connect the wire from the carpc to it, plug it into the holder.  In addition, for the STM32F4 there is an <a href="https://github.com/YuuichiAkagawa/STM32F4_ADK">implementation of</a> the ADK protocol.  Collected and checked.  A test case worked with a tablet and a mobile phone.  There are glitches, but you can figure it out.  On Habr√© there is already material on a similar topic: <br>  <a href="http://habrahabr.ru/post/123361/">Android + Arduino = ‚ô•</a> <br>  <a href="http://habrahabr.ru/post/133490/">An old Android radio</a> <br>  <a href="http://habrahabr.ru/post/119208/">USB devices for Android</a> <br>  <a href="http://habrahabr.ru/post/163913/">Work with COM port in Android applications</a> <br>  <a href="http://habrahabr.ru/post/154743/">COM port on Android</a> <br><br>  Just the other day I <a href="http://we.easyelectronics.ru/dcoder/android-i-mk-ft311d.html">came across</a> an <b><a href="http://www.ftdichip.com/Products/ICs/FT311D.html">FT311D</a></b> chip from <b>FTDI</b> , which implements the <b>ADK-</b> based Android &lt;-&gt; interface (GPIO, UART, PWM, I2C Master, SPI Slave, SPI Master). <br><img src="https://habrastorage.org/getpro/geektimes/post_images/4df/b23/744/4dfb237445c9ca8adc127a2f277a200b.png" alt="image"><br>  This solves a bunch of problems!  I ordered, I wait.  Allows you to use any device on the android and is quite cheap.  So I decided to use it.  As an interface, I like the good old <b>UART</b> .  <a href="http://www.ftdichip.com/Products/ICs/FT312D.html"><b>FT312D</b></a> will also be out <a href="http://www.ftdichip.com/Products/ICs/FT312D.html"><b>soon</b></a> for similar tasks. <br><br><h4>  GPS </h4><br>  I would like to have a permanently enabled GPS with the ability to record tracks to a memory card, and their periodic synchronization with dropbox ... many opportunities for creativity appear!  Tracks with good quality would be useful for the project <a href="http://www.openstreetmap.org/">OpenStreetMaps</a> .  To get accurate tracks, I would like to use a GPS module with support for Dead Reckoning technology.  Uses additional data from the gyroscope, temperature sensor and speed to clarify the position in space, is calibrated while the signal is there, calculates the position of the sensors when the GPS signal is lost. <br><br>  There is already a <a href="http://dr.unoforum.ru/">very worthy project</a> based on the <a href="http://www.u-blox.com/en/gps-modules/u-blox-6-dead-reckoning-module/lea-6r.html"><b>UBLOX LEA-6R</b></a> chip. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/791/14a/084/79114a08439e9e3d1eadfc932aa45bf0.png" alt="image"><br><br>  It gives very good results compared to conventional GPS: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/988/911/14c/98891114c265165fa965d0eb55c332a5.jpg" alt="image"><br>  <i>Comparison with conventional GPS tracks</i> <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/U_8pBOIHp9E%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253&amp;usg=ALkJrhiNbXoMejiA3NH51cBx3Bnot5JTiw" frameborder="0" allowfullscreen=""></iframe><br>  <i>Video of work with such GPS.</i> <br><br><div class="spoiler">  <b class="spoiler_title">More pictures!</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/geektimes/post_images/17c/b70/30a/17cb7030a508aac56b2d4e0d4620ecf3.jpg" alt="image"><br>  <i>TC "Bela Dacha"</i> <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/59b/dcd/3c9/59bdcd3c9be6aa8257d2d987936c26bf.jpg" alt="image"><br>  <i>Several parking floors</i> <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/f37/75e/7ec/f3775e7ec1207dbc99341b5b1d4c9abd.jpg" alt="image"><br>  <i>After 2.5km Tonel took 7.5 meters</i> <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/b99/ff5/cbf/b99ff5cbf27f32a7dec0022f5e49e810.jpg" alt="image"><br>  <i>More parking</i> <br></div></div><br>  With such accuracy on the accuracy of tracks in OSM, soon and the number of bands can be calculated) <br>  At the moment, the project seems to be podzagloh ... <br>  I'd love to find a similar open source project.  I bought the same <b>UBLOX LEA-6R</b> chip, tried to connect.  Simple GPS data is obtained simply, with a gyroscope and odometer did not understand. <br>  Noticed that on Habr√© there are fans of the <a href="http://habrahabr.ru/search/%3Fq%3D%255B%25D1%2584%25D0%25B8%25D0%25BB%25D1%258C%25D1%2582%25D1%2580%2520%25D0%25BA%25D0%25B0%25D0%25BB%25D0%25BC%25D0%25B0%25D0%25BD%25D0%25B0%255D%26target_type%3Dposts">Kalman filter</a> .  Perhaps this article will encourage those interested in realizing this on the basis of a controller and a conventional GPS chip, articles will help with the mat.  part) <br><br>  It would be nice to save the accelerometer data.  In the future, according to the array of such data, one could try to automatically map bumps, dangerous pits, etc. <br><br><h4>  Phone </h4><br>  There is no Bluetooth in the tablet, and in the presence of little sense.  When I started to address this issue, I did not find the implementation of the <a href="http://en.wikipedia.org/wiki/Bluetooth_profile"><b>HFP</b></a> profile under the android.  You can connect with the headset, but the Android device could not act as a headset.  You can use the <a href="http://www.bluegiga.com/WT32_Bluetooth_Audio_Module"><b>Bluegiga WT-32</b></a> external module for this task. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/134/1b7/553/1341b755382554969cd064c5b86f7cb0.png" alt="image"><br>  Allows you to make / receive calls, monitor network settings, get call history, address book, supports <a href="http://ru.wikipedia.org/wiki/A2DP"><b>A2DP</b> , <b>AVRCP</b></a> and much more.  Some developments are described <a href="http://pccar.ru/showthread.php%3Ft%3D16703">here</a> .  This solution completely suits me: it can be controlled by the controller using buttons from the steering wheel without using a tablet, it works with all the phones I checked <i>(modern HTC One X, HTC Desire, grandfather HTC Hero, some ancient Samsung, great-grandfather Qtek 8310, stub of the last generation)</i> <br><br><h4>  Sound </h4><br>  With the sound at the moment, some uncertainty ... <br>  Need to pick up the necessary components.  I hope for your help! <br>  There are several analog sources of stereo sound.  It is necessary to mix them into one stereo channel and control both the overall volume and the volume of each channel separately via a digital interface.  Plus, there can be a lot of speakers in the car (front / rear, etc.).  It is necessary to take this into account somehow ... I found some ready-made microcircuits for these tasks, but I could not make up my mind with the solution. <br>  The channels are approximately as follows: <br><ul><li>  tablet <i>(alerts, music, navigation, skype, hangouts, etc.);</i> </li><li>  WT32 <i>(phone, A2DP music);</i> </li><li>  AUX leave to connect external devices; </li><li>  external FM radio <i>(I don‚Äôt have it in the tablet, and it seems to me it should be an external module, since you can control it without a tablet);</i> </li><li>  plus maybe someone wants to plug in a cd changer or walkie-talkie. </li></ul><br>  Also the signal from the microphone from the car should go to the WT32 Bluetooth module and to the tablet (skype, hangouts, voice notes, etc.).  It is advisable to somehow make an echo cancellation between the sound output to the amplifier and the microphone.  Surely there is some ready-made solution. <br><br><h4>  FM Radio </h4><br>  So far I have used the primitive <b>TEA5767</b> .  There are enough examples of using the network ... instead of a boring and boring datasheet, you can start reading here <a href="http://radiokot.ru/circuit/digital/home/106/">FM STEREO Receiver on the TEA5767 module</a> <br>  As I wrote, I would like it to connect to the controller and not depend on the work of the android, but could be controlled and configured through the android. <br><br>  There is also an interesting <a href="http://pccar.ru/showthread.php%3Ft%3D18610">opportunity to use the</a> famous <b>RTL2832U</b> . <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/kOj3R8rJMq0%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253&amp;usg=ALkJrhgvdGc9nhp9oKAY0RopLty3VwzKvg" frameborder="0" allowfullscreen=""></iframe><br>  Who will be interested in this chip will discover a lot of opportunities for the implementation of many cool ideas.  There are already several topics about it: <br>  <a href="http://habrahabr.ru/post/149698/">Radio receiver 60-1700 MHz on RTL2832 for 20 bucks or SDR for beginners</a> <br>  <a href="http://habrahabr.ru/post/149702/">USB TV tuners on rtl2832 - or how to hear everything on the radio for 600 rubles</a> <br>  The truth is the question with its connection.  Since  In my version of the usb tablet port is already taken.  Then it is not entirely clear how and where to connect it.  But if a USB hub is connected to the android and the exchange with the controller goes through some <b>USB &lt;-&gt; UART</b> module, then the problem is solved.  However, I did not achieve stable operation of several devices via a usb-host on the Kindle Fire ... <br><br><h4>  Video Recording </h4><br>  Flew in from Korea <b>BlackVue DR500GW-HD</b> .  He has GPS, accelerometer, WiFi and no screen!  This is a significant advantage for me. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/9c0/8b1/7fa/9c08b17fa803faee51d8eb6effd5efd0.png" alt="image"><br>  The skilled firmware for it is actively sawed by the custom firmware <a href="http://www.taker.im/phpBB2/topic/142192-%25D0%25B2%25D0%25B8%25D0%25B4%25D0%25B5%25D0%25BE%25D1%2580%25D0%25B5%25D0%25B3%25D0%25B8%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580-blackvue-dr500gw-hd-c-wifi/">here</a> , but the policy of distributing the firmware is not very pleasant, somehow everything is quiet, mail, there are no sources ... but the guys are great!  Strongly pumped the functionality of this wonderful device. <br>  By WiFi, live video from the camera and recorded videos can be watched through the android, save them.  I think it is not very difficult to write software to automatically download GPS tracks, accelerometer data and even video from the recorder if WiFi speed allows. <br><br>  Even a webcam can be adapted for the rear view camera.  Connect via Raspberry Pi or some DIR320, MR3020 to the network.  In the simplest case, look through the browser) <br><br>  In general, it would be very nice to have a good mechanism for connecting several DVRs to your system for recording video directly to the hard disk.  Something like an industrial video recorder for video surveillance. <br>  In this regard, the <b><a href="http://habrahabr.ru/company/virt2real/blog/156491/">Virt2real</a></b> project is very encouraging to <b><a href="http://habrahabr.ru/company/virt2real/blog/156491/">me</a></b> .  It seems to me that it is not quite suitable for such a task, but once there is some groundwork, it is possible that someone will write a more specific device with the specific task of collecting video from several remote cameras (met with remote HDMI cameras in DVRs) on the HDD, accessing the archive and managing via Ethernet, its API and / or SDK for third-party applications, open firmware and at a reasonable price!  In general, there is something to work) <br><br>  Another thought was to do something like an SD card proxy, i.e.  connect the DVR instead of the SD card to the FPGA or a processor that would implement the interface of the memory card, but wrote the data over the network to a shared folder or via SATA on the HDD.  But it is not so easy and he did not dare to do it himself.  From the finished options almost nothing came across.  There is <a href="http://www.eye.fi/">www.eye.fi</a> , but in this case it will not work.  The connection is preferably wired, not the fact that it will stably hold a stream of 10-15Mb / s.  With the help of such devices it would be possible to direct the recording from several DVRs to one Vinci. <br><br>  We also have a topic <a href="http://habrahabr.ru/post/139760/">‚ÄúCar Satellite Alarm on STM32F1‚Äù</a> , there are a lot of interesting ideas.  And the idea about cameras based on the STM32F4 was very impressive. <br><br><h4>  Autostart </h4><br>  I would like to provide for the possibility of autorun.  Solutions are different for each car, but in my case the <b><a href="http://ifar.ca/en/products/evo-series/evo-all/">Fortin EVO-ALL</a></b> immobilizer <b><a href="http://ifar.ca/en/products/evo-series/evo-all/">tracker</a></b> is suitable. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/e33/146/5b4/e331465b4d2fe6ccbc2e9d381fd17aa6.png" alt="image"><br>  Small box with multiple connectors and three LEDs.  It supports a lot of auto models from different manufacturers.  It clings to several wires and allows you to start the machine without a key.  Those.  there is no need to leave one key in the car, which is required by many alarm systems with autorun and many insurance systems do not allow in the basic hull insurance contract. <br>  Although autorun is separately separated from the CarPC functionality, I don‚Äôt have an alarm with autorun and don‚Äôt want to install it.  This is not convenient, but in terms of protecting the car, I hope more for CASCO from theft.  Therefore, the controller should send a signal to start by sms with an encrypted command, or by a call from a certain number in the simplest case.  Many different options you can come up with.  For this, it would be better to screw the GSM module to the controller.  I think it is more reliable than a communication channel through the Internet.  You can store the config in the controller‚Äôs memory or on the SD card, which will determine the sequence of actions after a successful launch.  In the summer we turn on the condo, in the winter blowing the windshield, heated windows / mirrors, steering wheel, driver's seat, etc.  This config Android can change and save to the memory of the controller.  I would like to send the config to the dropbox and upload it to the controller with an automatic program on the tablet. <br><br><h4>  Tire Pressure Monitoring - TPMS </h4><br>  I haven‚Äôt followed the topic for a long time, but I remember that there were some developments that allow to get data into your device from the systems already existing on the market: <br>  <a href="http://pccar.ru/showthread.php%3Ft%3D17423">Tire Pressure Monitoring (USB TPMS)</a> <br>  <a href="http://www.mp3car.com/portal-media-car-pc-gadgets-and-accessories/110043-custom-usb-tyre-pressure-monitoring-interface.html">Custom USB tire pressure monitoring interface</a> <br>  Stumbled upon an <a href="http://www.ti.com/product/tpic82000">interesting piece</a> from <b>TI</b> . <br><img src="https://habrastorage.org/getpro/geektimes/post_images/969/f01/64b/969f0164b2727e8d17fad7bf26b2715e.png"><br>  A small specialized module for these tasks <b>TX-Module TPIC82000 Series</b> , promise <i>‚ÄúOver 10 year life with 550mAhr Li-Coin battery‚Äù</i> did not find on sale, but I would like to tinker. <br><br><h4>  Additional buttons, connectors </h4><br>  Honestly, there is a very big desire to avoid them altogether ... those regular buttons that are on the steering wheel and the console will most likely be enough, no additional homemade twists and buttons do not want to, because  they can hardly be done qualitatively.  The Kindle Fire has just one button, and that one is not always needed.  In each car there is some inconspicuous panel, there you can install ‚Äúservice‚Äù buttons and connectors.  They are extremely rarely needed.  If, nevertheless, there is a need to use hardware buttons, then in my opinion it is better to make them touch-sensitive and position them right under the plastic of the panel.  You can use specialized controllers <b>Atmel</b> <a href="http://www.rtcs.ru/article_detail.asp%3Fid%3D387"><b>QTouch</b> , <b>QMatrix</b></a> .  There are buttons, sliders, circles, and it seems to be fine through the plastic panel should work. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/b9f/806/6cc/b9f8066ccd4a1024eb8077a8b3d79d60.png" alt="image"><br>  However, this issue is solved individually in each case, perhaps in some cars there are suitable spins and a place under the display. <br><br><h4>  Voice control </h4><br>  For the most part, this task is already being solved in android, there is already some functionality there, and also saw some third-party engines for speech recognition, creating voice commands.  Honestly, if it were not for the Google voice search, I especially would not want to mess around with it.  According to my tests, he recognizes quite well even a variety of arbitrary commands.  But ideally, I would like a good offline recognizer.  I want to remind you that we have a very interesting topic <a href="http://habrahabr.ru/post/146501/">‚ÄúSpeech Recognition on STM32F4-Discovery‚Äù</a> , so you can try to do the same with the microcontroller. <br>  It is not quite clear how to catch the team itself from the whole stream of speech, music, noise and extraneous sounds.  In my opinion, the system must be given a name.  Suppose there is any Johnny :) Then next to the name that skipped over in the general flow of speech, you can search for the keywords of the command.  Write to the buffer, say, 5‚Äì10 seconds of sound, detect a given name with some effective offline algorithm, and if it is caught, then process a piece before the name and a little after.  The calculated ‚Äúfingerprint‚Äù of the phrase is sent to the Google server, we get the phrase string and look for keywords, analyze the request.  You can implement something like control wheelbarrow, navigation, etc.  phrases in the style of "Johnny, close the windows", "Johnny, open the trunk", "Johnny, let's go to work ...", "Drive home, Johnny!". <br>  If you have implemented or have plans for a smart home, then you can try to combine and process the commands, taking into account the fact that you can make a request to the house from the car and vice versa.  For example, to find out if electrical appliances are turned off at home or to immediately de-energize the circuit of all sockets, turn on heated floors before arrival, condos, etc. <br><br>  It may be necessary to implement the issuance of any messages by voice (for example, reading incoming SMS).  Unfortunately, I did not deal with this issue closely, but the readers seemed to be able to recite the text for a long time ... you can pick up something for such a system. <br><br><h4>  Nutrition </h4><br>  Regarding the issue of powering all this zoo devices, we have a great topic <a href="http://habrahabr.ru/post/159121/">"Solder an" intelligent "car BP ..."</a> .  For our devices, you also need to get 3.3V, but as it says ‚Äúby default the <b>KIS-3R33S module is</b> set to 3.3V‚Äù.  And having a stable and reliable power supply in 5V is not difficult for us to get 3.3 directly on the board, using some economical and reliable DC-DC Step-Down converter or 78L33 <b>roll</b> .  Of course, if a car battery sits down, the devices need to be turned off, system control is needed.  Perhaps it makes sense to put a small battery backup power for critical systems such as autorun. <br><br><h4>  Various buns </h4><br>  Since we have the ability to connect to the machine, we can receive data from it and partially manage it.  You can implement things that are not in every car.  For example: <br><ul><li>  automatic folding / unfolding of mirrors when locking / unlocking a car from a keychain; </li><li>  lowering mirrors slightly down when reverse gear is engaged; </li><li>  raising the glass doors when locking; </li><li>  locking doors at a set speed of over 20 km / h; </li><li>  lock trunk opening button outside when the engine is running; </li><li>  smart light control; </li><li>  display on the android screen of various engine parameters; </li><li>  ... </li></ul><br><br><h4>  Web access </h4><br>  Of course, it is desirable to pick up the system on any server.  Collect statistics, tracks, update the state of the machine, allow editing settings, watching camera images (if installed), etc.  It can even make an API for a mobile application on it.  But I will not dwell on this, because  this is a familiar topic for 99% of the habrids and in the topic <a href="http://habrahabr.ru/post/139760/">‚ÄúAutomotive satellite signaling on STM32F1‚Äù</a> this question has already been raised. <br><br><h4>  Not saying goodbye... </h4><br>  It seems that this is all I wanted to talk about.  At the moment this project exists in the form of separate demos, a handkerchief, notes with pieces of code and parts hanging on the welded wires.  For each item, it would be nice to write a small separate topic more seriously, with technical details, examples of commands, links to github, divorced printed circuit boards, etc.  So far, unfortunately, no.  Hopefully, things will move on and something similar will appear! <br><br>  <b>PS I</b> apologize for the hells of photoshop in the header of the topic ... drew as I could) <br>  Write your ideas, comments, leave useful links ... </div><p>Source: <a href="https://habr.com/ru/post/181996/">https://habr.com/ru/post/181996/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../181982/index.html">Two-color print on Replicator Dual</a></li>
<li><a href="../181984/index.html">We write iOS video player and recorder in 5 minutes</a></li>
<li><a href="../181988/index.html">Web API development</a></li>
<li><a href="../181990/index.html">Valentina Studio - a free program for working with DBMS</a></li>
<li><a href="../181992/index.html">"Workspace" and "Snippet" in Chrome Dev Tools</a></li>
<li><a href="../181998/index.html">Creating a simple interactive assistant</a></li>
<li><a href="../182000/index.html">A13AA - Miniature Number Hammer for Embedded Applications</a></li>
<li><a href="../182002/index.html">Journey through the processor's computing pipeline</a></li>
<li><a href="../182006/index.html">Mozilla and Foxconn presented the first tablet based on Firefox OS</a></li>
<li><a href="../182008/index.html">Symfony 2.3.0! First release with long term support!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
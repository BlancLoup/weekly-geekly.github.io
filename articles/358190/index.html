<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CredSSP encryption oracle remediation - error when connecting via RDP to a virtual server (VPS / VDS)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Starting from May 8, 2018, after installing updates on your personal computer, many users of virtual servers running Windows Server encountered the er...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CredSSP encryption oracle remediation - error when connecting via RDP to a virtual server (VPS / VDS)</h1><div class="post__text post__text-html js-mediator-article">  Starting from May 8, 2018, after installing updates on your personal computer, many users of <a href="https://vps.house/">virtual servers</a> running Windows Server encountered the error " <a href="https://vps.house/help/credSSP_encryption_oracle_remediation">CredSSP encryption oracle remediation</a> " when trying to connect to a remote desktop: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qq/bs/cr/qqbscrfqo0kqyqf7ol6jnemypnk.png" title="CredSSP encryption oracle remediation"></div><br><br>  In fact, this is not a mistake, but a notification about the security problem of a long-time-not-updated server. <a name="habracut"></a><br>  On March 13, 2018, <a href="https://portal.msrc.microsoft.com/en-us/security-guidance/advisory/CVE-2018-0886"><u>the CredSSP vulnerability information</u></a> and the first patches for its closure in server operating systems came out.  This vulnerability allows to bypass various commands on the server itself on behalf of the transferred accounts, including installing and deleting arbitrary software, changing and deleting data on the server, creating accounts with arbitrary rights. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This problem was not encountered by those who timely installed cumulative updates on their server.  In March, they were released for server operating systems, for desktop OS they were automatically installed with other updates in May. <br><br>  To solve a problem, you first need to connect to it.  The easiest way to do this is through the emergency mode of working with the server in your personal account - almost every provider of VPS / <a href="https://vps.house/">VDS</a> servers has this.  On <a href="https://vps.house/"><b>VPS.house,</b></a> this is done by simply clicking on the screenshot of the server screen in your account: <br><br><img src="https://habrastorage.org/webt/-x/v3/21/-xv321tvsdrdcdgelmsjya0fela.png"><br><br>  Or you can just temporarily disable the blocking notification of a security problem on the computer from which you are trying to connect: <br><br>  <b>Instructions for those who use the editors of Windows HOME:</b> <div class="spoiler">  <b class="spoiler_title">[expand]</b> <div class="spoiler_text">  <b>1.</b> Run on your computer (the volume from which you want to connect to the server) a <b>command prompt <u>as an administrator</u></b> <br><img src="https://habrastorage.org/webt/xl/vn/70/xlvn70vcu2ibol0nhickp1xl0p0.png"><br><br>  <b>2.</b> Type the following text on the command line (can be copied and pasted): <br><blockquote><code>REG ADD HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System\CredSSP\Parameters /v AllowEncryptionOracle /t REG_DWORD /d 2</code> </blockquote>  This command makes changes to the Windows registry, allowing your computer to connect with the CredSSP encryption protocol to a server that is not yet updated. <br><img src="https://habrastorage.org/webt/8o/5f/hw/8o5fhwznmgndpqtbk107lzhjvvg.png"><br>  If, as a result of the execution, you received the ‚ÄúAccess Denied‚Äù error, then you started the command line NOT as administrator (see the screenshot above how the command line runs correctly). <br></div></div><br>  <b>Instructions for those who use Windows PRO editors:</b> <div class="spoiler">  <b class="spoiler_title">[expand]</b> <div class="spoiler_text">  <b>1.</b> Open the group policy editor, to do this, type " <b>gpedit.msc</b> " in the command line or in PowerShell or search for it on your PC using the phrase " <b>Edit group policy</b> " or " <b>Change group policy</b> " if you work in the Russian-language interface. <br><img src="https://habrastorage.org/webt/ja/vk/ra/javkrag1pu9vxttaspfdfvvc9sg.png"><br>  If, after executing this command, you received an error stating that the command was not found or is not an internal or external command, then you have Windows not the PRO version, but most likely HOME and you need to look at the instructions above. <br><br>  <b>2.</b> In the tree settings folders on the left you need to open: <br><blockquote> <code>Computer Configuration -&gt; Administrative Templates -&gt; System -&gt; Credentials Delegation</code> </blockquote>  if your OS is Russified, then: <blockquote> <code>  -&gt;   -&gt;  -&gt;   </code> </blockquote> <img src="https://habrastorage.org/webt/uf/nk/gd/ufnkgdejlhn0wqmq0danm-otu7m.png"><br><br>  <b>3.</b> In the <b>Credentials Delegation</b> folder, find the <b>Encryption Oracle Remediation</b> option, open it, enable it, select <b>Enabled</b> and set the value to parameter in the drop-down list on " <b>Vulnerable</b> " ("Leave a vulnerability") <br><img src="https://habrastorage.org/webt/rz/1i/bz/rz1ibzh1wcxq9ss97lyyrvczrk8.png"><br></div></div><br>  After performing these steps on your PC, you will be able to connect to the server as before, <b><u>but this is not a solution to the security problem</u></b> . <br><br>  As soon as you are connected to the server, <b>install the updates</b> as it is done in any desktop version of Windows. <br><br><img src="https://habrastorage.org/webt/xq/bi/6n/xqbi6nr9tmjwehz2cfq4rlrfcci.png"><br><br>  If you get an error when trying to install, check if the <b>Windows Update</b> service is <b>running</b> ( <b>Windows Update</b> ).  You can open the list of services along the following path: <br><blockquote> <code>Start -&gt; Windows Administrative Tools -&gt; Services</code> </blockquote>  if your OS is Russified, then: <blockquote> <code> -&gt;   Windows -&gt; </code> </blockquote> <br>  If the service does not start, check whether its start is allowed: the status <b>should not</b> be ‚Äú <b>Disabled</b> ‚Äù. <br><br><img src="https://habrastorage.org/webt/om/ob/gf/omobgfipywx69ewxh5-bbvhxlpc.png"><br><br>  If you are using <b>Windows Server 2012 R2</b> or <b>Windows Server 2008 R2 SP1</b> , then you can install not all updates, but only one that fixes this vulnerability and thereby solve the problem of connecting to the server much faster. <br><br>  You can download it directly from the Microsoft website on <a href="https://portal.msrc.microsoft.com/en-us/security-guidance/advisory/CVE-2018-0886"><u>the vulnerability description page</u></a> : <br>  ‚Ä¢ update for <a href=""><u>Windows Server 2012 R2</u></a> <br>  ‚Ä¢ update for <a href=""><u>Windows Server 2008 R2 SP1</u></a> <br><br>  If, having read everything described above, you still could not figure out what needs to be done or if nothing happened, you can always re-create the server in your personal account - any cloud service provider also has this function.  It exists to get the server clean, as if you just ordered it, it will be empty, <b>all your data will be lost</b> !  You resort to it only when absolutely necessary and in case if nothing important or requiring a long follow-up configuration is stored and working on your server. <br><br><img src="https://habrastorage.org/webt/62/by/up/62byupff5fl1qzkcwgqe9_hjjra.png"><br><br>  All images of Windows Server operating systems on <a href="https://vps.house/"><b>VPS.house</b></a> by default contain all the latest updates and after re-creating the server there will be no problems with the error "CredSSP encryption oracle remediation" when connecting to it. </div><p>Source: <a href="https://habr.com/ru/post/358190/">https://habr.com/ru/post/358190/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../358180/index.html">Magnasanti - the largest and most terrible city of SimCity</a></li>
<li><a href="../358182/index.html">Use GPG to encrypt messages and files.</a></li>
<li><a href="../358184/index.html">Using Linux Kernel Sequence Files</a></li>
<li><a href="../358186/index.html">Arduino for beginners. Part 2</a></li>
<li><a href="../358188/index.html">Telegram is trying to get the key transfer order canceled to decrypt user messages.</a></li>
<li><a href="../358192/index.html">Marvin Minsky "The Emotion Machine": Chapter 3 "Suffering, pain, grief"</a></li>
<li><a href="../358198/index.html">Notification Center. Tame 200+ mailings</a></li>
<li><a href="../358200/index.html">Brief analysis of solutions in the field of SOC and the development of a neural network detector of anomalies in data networks</a></li>
<li><a href="../358202/index.html">Lapplanders and HTTP</a></li>
<li><a href="../358204/index.html">Managing release is simple: release management rules and steps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
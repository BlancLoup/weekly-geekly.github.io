<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Zen2. The evolution of the AM4 platform on the example of Ryzen 7 3700x</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="AMD continues to develop its long-running platform AM4. Recently, a new generation of Ryzen processors on the Zen 2 microarchitecture was released. In...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Zen2. The evolution of the AM4 platform on the example of Ryzen 7 3700x</h1><div class="post__text post__text-html js-mediator-article"><p>  AMD continues to develop its long-running platform AM4.  Recently, a new generation of Ryzen processors on the Zen 2 microarchitecture was released. In general, the AMD architecture development cycle began to somewhat resemble Intel's tick-tack, but not 1 in 1. So, the second generation Ryzen was more of a variation on the original Zen architecture with fixing the main jambs and implemented on a slightly finer manufacturing process, which was reflected even in the name of the architecture of 2xxx chips - Zen +.  Now AMD has rolled out the chipset architecture.  It turned out to be a classic development spiral - AMD in 2003 was the first to transfer components of the north bridge to the cores, starting with transferring the memory controller to the CPUs in the K8 line of processors and ending with the Ryzen thousandth and two thousandth series being full-fledged SoCs, so in 2019 they they again carried the north into a separate crystal, albeit on the same substrate as the nuclei. </p><br><p>  There are enough theoretical materials, reviews and tests in Russian (for example, <a href="https://www.overclockers.ua/cpu/amd-zen-2-ryzen-7-3700x/">Overclocking Matisse or looking for the limit. Zen 2 architecture review</a> ), and in English, but I personally wanted to compare the fresh AMD Ryzen 7 3700x with 2700x in my tests, similar to those used in the past posts ( <a href="https://habr.com/ru/post/426317/">post 1</a> , <a href="https://habr.com/ru/post/450426/">post 2</a> ). <a name="habracut"></a></p><br><h2>  Test participants </h2><br><p>  Motherboard ASUS ROG Strix X470F-Gaming (BIOS 5007, AGESA ComboAM4 1.0.0.2): </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bm/ze/2y/bmze2yuccrzmiykrot3v9e2_hjo.png"></div><br><p>  G.Skill Trident Z DDR4 DIMM 3600MHz PC4-28800 CL17 memory: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5z/rx/b_/5zrxb_a_0gim3wb4exrhft1djiy.png"></div><br><p>  Cooling system Deepcool Captain 360EX. </p><br><p>  <u>Config 1</u> : <br>  <b>CPU</b> : AMD Ryzen 7 2700X <br>  <b>RAM</b> : G.Skill Trident Z DDR4 DIMM 3600MHz PC4-28800 CL17 @ 3400CL16 </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zb/6n/8t/zb6n8t1nkbwav6ohsfqzjcmhifu.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rf/cl/-x/rfcl-xras1lx2-nt3nuh3ggkrce.png"></div><br><p>  <u>Config 2</u> : </p><br><p>  <b>CPU</b> : AMD Ryzen 7 3700X <br>  <b>RAM</b> : G.Skill Trident Z DDR4 DIMM 3600MHz PC4-28800 CL17 (DOCP Profile) </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fq/ev/yo/fqevyo0qz_njyvb9qb9bsfbpdpm.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/w3/er/ab/w3erabojrhqff43g-_z6vqnwsn8.png"></div><br><p>  <u>Config 3</u> : </p><br><p>  <b>CPU</b> : AMD Ryzen 7 3700X <br>  <b>RAM</b> : G.Skill Trident Z DDR4 DIMM 3600MHz PC4-28800 CL17 @ 16-16-16-32 </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zs/il/gc/zsilgcl1bbn8vdopytskuj-xo8q.png"></div><br><p>  Before moving on to the test results, I want to note a couple of problems that made testing difficult: </p><br><ol><li><p>  All tests of the Ryzen 7 3700x were performed under the assembly of 1903 Windows 10. At the same time, the 2700x was tested at the October assembly.  Not all 2700x tests were run under 1903, but those that were run showed that the May Windows update reduced system performance, at least on the AMD platform, so the results with previous articles are not directly comparable.  Where tests are run repeatedly, this will be explicitly stated. </p><br></li><li><p>  The Zen 2 platform, or rather its support from the BIOS of motherboards based on old-generation chipsets (for example, on the X470 chipset on my motherboard), is frankly crude, and when I tried to start the Ryzen 7 3700x processor on all the settings set to Auto, I received very strange results, namely the disgusting work of the new CPU with memory, with low bandwidth (hereinafter referred to as memory bandwidth) and huge delays: </p><br></li></ol><br><p> <a href=""><img src="https://habrastorage.org/webt/ac/lv/cw/aclvcwrtajm3ge3elhd-i5ds2q4.jpeg"></a> <br></p><br><p>  In the BIOS settings, it was shown that the frequency of the north bridge is 1600 MHz, but in fact it started at 800 (according to CPU-Z), which gave a corresponding picture.  Not only was the asynchronous memory mode activated, introducing additional delays, the controller itself, and Infinity Fabric worked at a turtle speed.  At the same time, attempts to set the frequency of the northern man's operation synchronous with the memory frequency led to a deadlock once after a POST during the memory initialization stage. </p><br><p>  As a result, the algorithm for obtaining working settings is as follows: </p><br><ul><li>  jumper reset CMOS </li><li> loading optimized default settings, saving settings </li><li>  power off (namely power off the PSU, not just soft off) </li><li>  setting the frequency of memory operation (activation of DOCP profile), saving settings </li><li>  power off (namely power off the PSU, not just soft off) </li><li>  setting the north bridge operating frequency equal to the memory operating frequency, saving settings </li><li>  power off (namely power off the PSU, not just soft off) </li></ul><br><p>  if you skip the blackout of the system at any stage, there is a chance to catch a memory training error and, as a result, the need to reset the settings with a jumper and start all over again due to the inability to boot into the BIOS.  Needless to say, at 2700x such dances with a tambourine were not required at all. </p><br><p>  From the configs, it is clear that testing took place at different memory frequencies.  AMD claims that the memory controller in the processor chipset on the Zen 2 microarchitecture has become more omnivorous and supports higher frequencies than previous versions.  Judging by my observations, this is true: on Ryzen 7 2700x, these memory slots could not be stabilized even at their default XMP timings at a frequency of 3600, while at a frequency of 3400 the timings were set quite hard.  On Ryzen 7 3700x, the memory started up right away at its native frequency and allowed to set timings by DRAM-Calculator-for-Ryzen without special dances with a tambourine. </p><br><h3 id="metodika-testirovaniya">  Testing methodology </h3><br><p>  The technique has not changed since last year. </p><br><p>  The tests of the AM4 platform were conducted under the control of the Windows 10 Pro 1903 OS (build 18362.239) </p><br><p>  Specter and Meltdown protection is deactivated on all test systems using the InSpectre utility. </p><br><p>  All tests were carried out several times (at least three or four), the result of the first run was discarded, since the result of the first run was noticeably more affected by I / O delays.  The maximum result was taken, the rest of the test runs were carried out to check for possible anomalies. </p><br><h2>  Performance </h2><br><h3>  Passmark </h3><br><p><img src="https://habrastorage.org/webt/f9/wp/l4/f9wpl4ysbvuc1fhv4gzdjvxug9w.png"><br></p><br><div class="spoiler">  <b class="spoiler_title">Passmark 9.0</b> <div class="spoiler_text"><p>  Ryzen 7 2700x <br><img src="https://habrastorage.org/webt/s_/zz/th/s_zzth6_cpftzefocj2e9kdvc7k.png"><br><br>  Ryzen 7 3700x DOCP <br><img src="https://habrastorage.org/webt/ik/jv/8o/ikjv8onxu91pikdypaa97zdt3fs.png"><br><br>  Ryzen 7 3700x manual timings <br><img src="https://habrastorage.org/webt/x7/d1/_j/x7d1_jfogrxd6g9yej7xq4_vfoy.png"><br></p></div></div><br><h3>  Memory test </h3><br><p><img src="https://habrastorage.org/webt/rs/jf/8i/rsjf8i0ljth9rwbkstz8mxf06wa.png"><br></p><br><div class="spoiler">  <b class="spoiler_title">AIDA 64 memory &amp; cache benchmark</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/yi/ex/qy/yiexqyw0szisf-6xtxspragwzam.png"><br></p><br><img src="https://habrastorage.org/webt/su/v8/oe/suv8oeiuvrkcljpmwkzufdsleus.png"><br><img src="https://habrastorage.org/webt/o3/dm/xr/o3dmxrlfmomqi0ufanxpqlp7kpm.png"></div></div><br><p>  In terms of memory performance, the progress is frankly so-so.  Removing the memory controller from the chip with the cores was not given for free - delays increased, overall performance dropped.  In addition, you can see a drawdown of the write speed twice as compared with the previous generation and the speed of reading / copying.  Apparently, the cIOD chipset is optimized for two CCX chipsets, and on one it produces such slightly crooked results (yes, Ryzen 9 doesn‚Äôt have a write speed either).  But this is on the one hand.  On the other hand, there is no such failure in terms of read speeds and combined read / write loads.  Given that, on average, read-write in the code is correlated as 3/1, the compromise seems reasonable.  And given the increased cache speeds and a hefty third-level cache, then memory ¬± comes to that. </p><br><h3>  Rendering </h3><br><p><img src="https://habrastorage.org/webt/xs/mf/fw/xsmffwv9oaiz2dkaioc94geym2s.png"><br></p><br><div class="spoiler">  <b class="spoiler_title">Cinebench r15</b> <div class="spoiler_text"><p> <a href=""><img src="https://habrastorage.org/webt/o0/yc/k_/o0yck_9kb5shpgznbpjxysdrrhm.png"></a> </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Cinebench r20</b> <div class="spoiler_text"><p> <a href=""><img src="https://habrastorage.org/webt/yq/8c/e0/yq8ce0m6hxieyj32khmvcani200.png"></a> </p></div></div><br><h3 id="proyavka-raw-snimkov">  Developing RAW Images </h3><br><p><img src="https://habrastorage.org/webt/nk/ia/ou/nkiaoul7hgwohkigbogkblfru98.png"><br></p><br><p>  But in working with 2D graphics, in which Intel processors still steadily steered, the three thousandth series made such a breakthrough.  Acceleration in Adobe Lightroom 7.5 one and a half times! </p><br><h3 id="3dmark">  3Dmark </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/pi/xf/p3/pixfp3exbzdif5lvzklug8z6cdw.png"></a> </p><br><h3 id="proizvoditelnost-v-igrah">  Gaming performance </h3><br><p><img src="https://habrastorage.org/webt/dc/td/9d/dctd9dbtzuecsy-waeantxp0djm.png"><br></p><br><div class="spoiler">  <b class="spoiler_title">Settings Screenshots</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/fu/yz/jl/fuyzjldj-jazbbicznlnde0nyws.png"><br><img src="https://habrastorage.org/webt/qe/wq/1e/qewq1egx8t5u6wtjachoudnklwc.png"><br><img src="https://habrastorage.org/webt/fz/g6/li/fzg6liryrmgnlftbavwavfjqiga.png"><br><img src="https://habrastorage.org/webt/pk/ew/u3/pkewu3-8uwj-t6q91wkkqc1u79i.png"><br><img src="https://habrastorage.org/webt/tb/ri/sa/tbrisadvd87no2y3kxdhpkaka80.png"><br><img src="https://habrastorage.org/webt/wm/na/ui/wmnaui_isjoezn_rm43xojollxm.png"><br><img src="https://habrastorage.org/webt/tb/lb/eh/tblbehpfhrdbnazjlv63-xui8mc.png"><br><img src="https://habrastorage.org/webt/pj/h6/1k/pjh61kewkhgurhxhmytn2b-xgxg.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">Screenshots of the results of the built-in benchmarks</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/lz/5y/4j/lz5y4jkmd_0qua7nw830qe220e8.png"></p><br><p><img src="https://habrastorage.org/webt/ea/n4/-p/ean4-p4sgvihe5ovan-qr_u7odo.png"></p><br><p><img src="https://habrastorage.org/webt/1i/30/j4/1i30j4jkmd4eqsk1xqaazvewud0.png"></p><br><p><img src="https://habrastorage.org/webt/xs/gy/wm/xsgywmvolccj-of2uts30kabqw0.png"></p></div></div><br><h3 id="temperatura-i-energopotreblenie">  Temperature and power consumption </h3><br><p>  Despite the claimed TDP of 65W, the Rayzen 7 3700x turned out to be rather voracious and hot.  The temperature in idle ranges from 35 to 50 degrees.  Consumption and temperature under load is highly dependent on the nature of the load (suddenly!). </p><br><p>  Under a typical game load, the frequency of CPU cores fluctuates around 4.25-4.35 GHz, the consumption in this mode is on average 95-100W. </p><br><p>  Under load from rendering, the processor starts to consume in the region of 120W: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/o8/1a/at/o81aatqc7phemoi_vlefzewilhk.png"></a> </p><br><p>  Under stress tests (Prime95 Small FFTs), consumption jumps to 170+ watts, the temperature rests at 95 degrees even under dropsy with fans at maximum speeds and frequencies drop to 4-4.05GHz: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/aj/_e/is/aj_eiswpibjyqua-tbtskjx76ye.png"></a> </p><br><h3 id="zaklyuchenie">  Conclusion </h3><br><p>  The processors of the three thousandth AMD Ryzen series came out and are really quite interesting, but the general enthusiastic information background around them personally gave me high expectations, which did not really materialize. </p><br><p>  On the one hand, the performance per cycle has really grown, but it is noticeable without a microscope only in some scenarios.  The frequency potential in general has grown on average by 50-100MHz, we are not talking about any breakthrough.  They began to work with memory even worse than the previous generation.  With a declared TDP of 65W, the processor does not hesitate to consume almost three times as much, while it warms up so that the three-section dropsy ceases to cope with cooling.  BIOS with support for these processors is frankly raw so far.  All this is flavored with errors in the microcode (RDRAND on motherboards on the x570 chipset).  Of course everything is mowed, but I have not seen such a crude product at the start for a long time. </p><br><p>  On the other hand, this is the third generation of processors on the same AM4 platform.  If we compare the 3700x with the first generation Ryzen, then in rendering we get acceleration already 1.5 times in 2.5 years.  In this generation, AMD again managed to increase the number of cores in the processors of the consumer segment - 12 cores are already conditionally available, although they are still a deficit, and the price tag for them is no different from humanity, and 16-core CPUs on the same platform loom on the horizon.  Yes, and the platform turned out to be successful - for 2.5 years it did not turn into a pumpkin, motherboards do not need to be changed, memory compatibility and frequency potential have once again been tightened, and even on the same motherboards new processors will most likely allow memory to run at higher frequencies and tighter timings. </p><br><p>  In general, the product has once again been mixed.  It‚Äôs never perfect, but it already offers good performance even without a ‚Äúfor your money‚Äù reservation, and its price / performance ratio is generally excellent.  BIOS will catch up after a couple of months and versions.  In general, AMD has everything as always. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/461665/">https://habr.com/ru/post/461665/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../461655/index.html">The digest of fresh materials from the world of the front-end for the last week No. 373 (July 22 - 28, 2019)</a></li>
<li><a href="../461657/index.html">Buying Red Hat: Will It Help The Blue Giant Fight For Hybrid Cloud Leadership</a></li>
<li><a href="../461659/index.html">Neural Networks and Deep Learning, Chapter 4: Visual Proof that Neural Networks Can Calculate Any Function</a></li>
<li><a href="../461661/index.html">Component Based Development Guide</a></li>
<li><a href="../461663/index.html">The story of how Linux brought in Windows</a></li>
<li><a href="../461669/index.html">PHP Digest No. 161 (July 15 - 29, 2019)</a></li>
<li><a href="../461673/index.html">8 tips for novice programmers or a retrospective of my career</a></li>
<li><a href="../461679/index.html">Electronic Arts Libraries of Almost Good Quality</a></li>
<li><a href="../461685/index.html">LED therapy, or ‚Äúyouthful apples‚Äù of the 21st century</a></li>
<li><a href="../461687/index.html">Docker + Laravel + RoadRunner = ‚ù§</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
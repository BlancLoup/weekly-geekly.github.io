<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sequential execution of tasks in Gulp JS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gulp JS is a project collector and task manager for front-end and web development, which is a worthy alternative for the popular Grunt JS . One of the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sequential execution of tasks in Gulp JS</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://gulpjs.com/">Gulp JS</a> is a project collector and task manager for front-end and web development, which is a worthy alternative for the popular <a href="http://gruntjs.com/">Grunt JS</a> .  One of the few things that Gulp differs from Grunt is that by default all tasks run asynchronously.  In general, it can be said that all tasks are performed simultaneously. <br><br>  Recently, studying Gulp, I was faced with the need to synchronously run several tasks ... synchronous.  The documentation for Gulp mentions this problem, but I had to tinker a bit before I figured it out. <br><a name="habracut"></a><br>  So, we have 3 ways to make the execution of tasks synchronous, but for this to work, we need to explicitly specify the dependencies of the tasks.  About dependencies a little later, for a start we will analyze these 3 ways: <br><br>  1. Using callback, callback <br><pre><code class="javascript hljs">gulp.task(<span class="hljs-string"><span class="hljs-string">'sync'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">cb</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// setTimeout     setTimeout(function () { cb(); }, 1000); });</span></span></code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      2. Through the return flow <br><pre> <code class="javascript hljs">gulp.task(<span class="hljs-string"><span class="hljs-string">'sync'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> gulp.src(<span class="hljs-string"><span class="hljs-string">'js/*.js'</span></span>) .pipe(concat(<span class="hljs-string"><span class="hljs-string">'script.min.js'</span></span>) .pipe(uglify()) .pipe(gulp.dest(<span class="hljs-string"><span class="hljs-string">'../dist/js'</span></span>); });</code> </pre><br><br>  3. Take advantage of the <a href="https://github.com/kriskowal/q">Promise</a> <br><pre> <code class="javascript hljs">gulp.task(<span class="hljs-string"><span class="hljs-string">'sync'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> deferred = Q.defer(); <span class="hljs-comment"><span class="hljs-comment">// setTimeout     setTimeout(function () { deferred.resolve(); }, 1000); return deferred.promise; });</span></span></code> </pre><br><br>  Now suppose that we have another <code>secondTask</code> task, which depends on the results of the <code>sync</code> task (which we created in one of the ways described above).  Therefore, we declare our <code>sync</code> task as a dependency for the <code>secondTask</code> task: <br><br><pre> <code class="javascript hljs">gulp.task(<span class="hljs-string"><span class="hljs-string">'secondTask'</span></span>, [<span class="hljs-string"><span class="hljs-string">'sync'</span></span>], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//       //  'sync'   ! });</span></span></code> </pre><br><br>  The main mistake that I made was on the assumption that if I declare a task list as a dependency, then the tasks will be executed in the specified sequence, when the next task in the list is executed, it will be executed only after the end of the previous task.  But this is not at all the case: <br><br><pre> <code class="javascript hljs">gulp.task(<span class="hljs-string"><span class="hljs-string">'thirdTask'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//       }); //  ,      //  'sync',    //  'thridTask'     //   'default'.    . //    'default',  // 'sync'  'thridTask   //  gulp.task('default', ['sync', 'thirdTask'], function () { // -  });</span></span></code> </pre><br><br>  In order for the <code>default</code> task to be executed in the order I wanted, the <code>thirdTask</code> task <code>thirdTask</code> be made dependent on the <code>sync</code> task. <br><br><pre> <code class="javascript hljs">gulp.task(<span class="hljs-string"><span class="hljs-string">'thirdTask'</span></span>, [<span class="hljs-string"><span class="hljs-string">'sync'</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      'sync'.   //   ,   'default'   // ,  'thirdTask'    }); gulp.task('default', ['sync', 'thirdTask'], function () { // -  });</span></span></code> </pre><br><br>  Note that every time you run a <code>thirdTask</code> , <code>sync</code> will also be run.  This may be an undesirable behavior if you have some <code>watch</code> task that runs the <code>thirdTask</code> task. <br><br>  I hope that this article will help someone to understand how with Gulp to implement the implementation of their tasks in a strictly defined order.  But it is worth noting that it is asynchronous start and asynchronous execution of tasks that make Gulp so fast and powerful, so use the ability to perform synchronous execution only where it is really necessary. </div><p>Source: <a href="https://habr.com/ru/post/240485/">https://habr.com/ru/post/240485/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../240473/index.html">Demo versions from Google Play, data on revenues from games for 2014, consolidation of market leaders from Japan - and other news of the week for a mobile developer</a></li>
<li><a href="../240475/index.html">Creating Today Extension for iOS 8</a></li>
<li><a href="../240477/index.html">Enchanting performance by Bertrand Picard</a></li>
<li><a href="../240479/index.html">Fight against memory leaks in Android. Part 1</a></li>
<li><a href="../240483/index.html">Using the beanstalkd queue server to distribute our mailing list</a></li>
<li><a href="../240489/index.html">We create notebooks for the book in automatic mode</a></li>
<li><a href="../240491/index.html">Starban. Flexible development methodology, gamification and many more buzz words</a></li>
<li><a href="../240493/index.html">We introduce work with coordinates in sonata-admin</a></li>
<li><a href="../240495/index.html">IIS as an edge web server (now haproxy)</a></li>
<li><a href="../240497/index.html">SAM: your personal "Internet of things"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
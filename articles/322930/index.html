<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ideal catalog, architecture sketch</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I turned up the task to develop a universal catalog of goods and services, part-time catalog of companies, documents and anything else. In the work, t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ideal catalog, architecture sketch</h1><div class="post__text post__text-html js-mediator-article">  I turned up the task to develop a universal catalog of goods and services, part-time catalog of companies, documents and anything else.  In the work, this ‚Äúexperience‚Äù was not useful, but the idea is good, in my opinion to my humble opinion :) I would like to share and listen to the criticism. <br><br>  The catalog implies orderliness - a hierarchy, it implies the immediate storage of information, and of course the search, probably the analyst ... something else?  Nothing else comes to mind. <br><br>  Now the points. <br><a name="habracut"></a><br><h2>  Hierarchy </h2><br>  Definitely the grouping of information will be tree-like, from the abstract ‚ÄúCatalog‚Äù to more specific, to more specific (for example, ‚Äúhammer‚Äù).  The level of detail can be any, we will not keep ourselves within the framework of "section", "subsection", "category", "subcategory", let the depth of branching be infinite. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Information will be stored in some kind of DBMS, for working with a hierarchy this DBMS must be able to hierarchical queries, there are not a few such DBMS, of the free ones, the most pop is PostgreSQL. <br>  DDL Decals Tree of Elements: <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> element_tree ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, element_tree_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span>, is_hidden <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>(), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_element_tree <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (element_tree_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> element_tree (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ix_element_tree_element_tree_id_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> element_tree (element_tree_id, <span class="hljs-keyword"><span class="hljs-keyword">id</span></span>);</code> </pre> <br><h3>  Explanation of the table structure </h3><br>  id is the row identifier of the table. <br><br>  element_tree_id - reference to the parent element of the tree. <br><br>  is_hidden is the remote record flag (0 is a valid record, 1 is a remote one), why is the flag only raised for the record, instead of being deleted?  because when you meet an identifier in the logs and you want to see what it is, it is very convenient to make selections in the current database, instead of doing this select in the backup (and it‚Äôs not a fact that this record will be found in this backup). <br><br>  insert_date - the date of adding the record, conveniently when you know - this is a 100 year old record or it was inserted five minutes ago as a result of an unsuccessful insert. <br><br>  Of course, people who are familiar with the system all this (is_hidden, insert_date) are not very necessary, but for those who look at the system like a ram on a new gate, these fields will be very useful, in my practice, usually in the role of a ram :) <br><br>  CONSTRAINT fk_element_tree - the external key to itself - a pointer to the parent element. <br>  INDEX ix_element_tree_element_tree_id_id - an index to search for child branches (nodes of descendants), if we find the parent by the primary key, then for an accelerated search of descendants we need to have a separate index. <br><br>  As someone experienced and advanced could notice, there are no columns in the table for the name of the element.  And why?  And because the hierarchy is only a hierarchy, and not the nodes of the tree are ordered, but those tables that are docked to the hierarchy, therefore the names in the tables, and in the hierarchy only the grouping of elements. <br><br><h2>  Direct storage of information </h2><br>  In the end, any directory is a list of individual headings.  A rubric is a certain group of entities with a unique set of characteristics.  That is, we have the relation of the Essence itself and the grouped entities - the Rubric, and besides the Rubric is also a grouping for the unique Characteristics of these Entities. <br><br>  That is, information is divided into three parts - Essence, Characteristic, Category, where the Rubric is the junction point of several Entities and Characteristics. <br><br>  In the language of the DBMS, it sounds like this: <br><br>  Table Rubrics <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> rubric ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, code <span class="hljs-built_in"><span class="hljs-built_in">CHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>), title <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">4000</span></span>), description <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">4000</span></span>), is_hidden <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>() ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_rubric_code <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> rubric (code);</code> </pre><br>  Table of Entities (a certain Stuck, which can turn out to be both a commodity and a service, or a company, or in general a report and anything else): <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> item ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, code <span class="hljs-built_in"><span class="hljs-built_in">CHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>), title <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">4000</span></span>), description <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">4000</span></span>), is_hidden <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>() ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_item_code <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> item (code);</code> </pre><br>  Table Characteristics (properties): <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> property ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, code <span class="hljs-built_in"><span class="hljs-built_in">CHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>), title <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">4000</span></span>), description <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">4000</span></span>), is_hidden <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>() ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_property_code <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> property (code);</code> </pre><br>  Here we see new columns: <br><br>  code - a unique code (mnemonic) for writing, registering in queries and configs identifiers are not Camille, because identifiers can be different on different machines and make sure that they are the same slightly tedious, it is much more convenient to use a write code - it and it is easier to remember than a set of identifier digits, and in the code when you see the word, and not the magic numbers, the essence of what is happening becomes a little clearer. <br>  title - name (name had to be replaced with title, because name is a keyword for PostgreSql). <br>  description - description (the name is used for selection in the list, and the description for the actual description of the destination of the entry). <br><br>  Now about how all this is connected. <br><br><h2>  Organization of information in the catalog </h2><br>  The rubrics are docked to the element tree, the docking is performed by a separate table: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> rubric_element_tree ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, rubric_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, element_tree_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>(), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_rubric_element_tree_rubric_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (rubric_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> rubric (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_rubric_element_tree_element_tree_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (element_tree_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> element_tree (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_rubric_element_tree_rubric_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> rubric_element_tree (rubric_id); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_rubric_element_tree_element_tree_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> rubric_element_tree (element_tree_id);</code> </pre><br>  The table performs the role of ‚Äúone-to-one connection‚Äù, the table has two foreign keys, for each key column there is its own index. <br><br>  Both the Rubric and the Tree Element can only be joined once, so an index with a unique character is made for each column. <br><br>  Each rubric has its own set of Characteristics (properties): <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> rubric_property ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, rubric_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, property_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>(), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_rubric_property_rubric_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (rubric_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> rubric (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_rubric_property_property_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (property_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> property (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_rubric_property_rubric_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> rubric_property (rubric_id, property_id); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ix_rubric_property_property_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> rubric_property (property_id);</code> </pre><br>  The table has two foreign keys, one-to-many relationships. <br><br>  One Rubric has one Characteristic once - provided by the index, different Rubrics can have the same Characteristic - an index according to the Characteristic without uniqueness of values. <br>  Each rubric has its own set of Entities (Pieces): <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> rubric_item ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, rubric_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, item_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>(), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_rubric_item_rubric_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (rubric_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> rubric (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_rubric_item_item_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (item_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> item (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_rubric_item_rubric_id_item_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> rubric_item (rubric_id, item_id); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_rubric_item_item_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> rubric_item (item_id);</code> </pre><br>  The table has two foreign keys, one-to-many relationships.  One Rubric has several Entities, each Entity can belong to only one Rubric. <br><br>  It was the structure of information storage, and where is the information itself? <br><br>  The information itself is kept separate. <br><br><h2>  Data storage </h2><br>  Table Values ‚Äã‚Äã(value of the information characteristics): <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">content</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">raw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">4000</span></span>), redactor_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, property_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>(), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_content_redactor_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (redactor_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> redactor (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_content_property_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (property_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> property (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ix_content_redactor_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">content</span></span> (redactor_id); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ix_content_property_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">content</span></span> (property_id);</code> </pre><br>  This label is not quite normal, in fact it is just a ‚Äúmemory‚Äù cell that stores the value (raw).  The value of a specific characteristic (property_id).  The value specified by the specific Editor (redactor_id).  From the plate it is not clear what the value of this characteristic refers to, whether to a hammer model, or to a video card model, docking with Essence is the task of a separate table, but it is still early, you need to tell Editors about: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> redactor ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, code <span class="hljs-built_in"><span class="hljs-built_in">CHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>), title <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">4000</span></span>), description <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">4000</span></span>), is_hidden <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>() ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_redactor_code <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> redactor (code);</code> </pre><br>  Why do we need an editor?  The information catalog was supposed to be something like Wikipedia, where each Editor could define his own version of the Characteristic values ‚Äã‚Äãfor each Entity.  And the System itself had to work with variations of the Editors to represent the same Entity, to consider the analytics on these variations. <br><br>  The Table of Values ‚Äã‚Äãstores only a string representation of the characteristic information.  This is actually user input.  The system works with a different view of this information, with a view depending on the type of data.  Each data type has its own table. <br><br>  Strings <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> string_matter ( content_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">4000</span></span>), insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>(), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_string_matter_content_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (content_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> <span class="hljs-keyword"><span class="hljs-keyword">content</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_string_matter_content_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> string_matter (content_id);</code> </pre><br>  * TEXT should be used to store strings in PostgreSql <br><br>  Numbers <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> digital_matter ( content_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, digital <span class="hljs-keyword"><span class="hljs-keyword">DOUBLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PRECISION</span></span>, insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>(), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_digital_matter_content_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (content_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> <span class="hljs-keyword"><span class="hljs-keyword">content</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_digital_matter_content_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> digital_matter (content_id);</code> </pre><br>  Dates (time stamps) <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> date_matter ( content_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, date_time <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>(), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_date_matter_content_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (content_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> <span class="hljs-keyword"><span class="hljs-keyword">content</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_date_matter_content_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> date_matter (content_id);</code> </pre><br>  Time intervals <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> duration_matter ( content_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">duration</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INTERVAL</span></span>, insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>(), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_duration_matter_content_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (content_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> <span class="hljs-keyword"><span class="hljs-keyword">content</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_duration_matter_content_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> duration_matter (content_id);</code> </pre><br>  The data types are specially selected "international", so that you can transfer the database structure to any platform, to any DBMS. <br><br>  The name "matter" is chosen for consonance with the words "matter" and "essence". <br><br>  And I didn‚Äôt tell about one thing, these are options: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">option</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, code <span class="hljs-built_in"><span class="hljs-built_in">CHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>), title <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">4000</span></span>), description <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">4000</span></span>), is_hidden <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>() ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_option_code <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">option</span></span> (code);</code> </pre><br>  Options are needed as tags that determine how to handle the Characteristics, how to analyze them, what search mechanism to use, with which data type to save, what rights (permissions) are required for access and all such business logic is tied to options. <br><br>  Options match with Features: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> property_option ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, property_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, option_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>(), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_property_option_property_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (property_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> property (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_property_option_option_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (option_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> <span class="hljs-keyword"><span class="hljs-keyword">option</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_property_option_property_id_option_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> property_option (property_id, option_id); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ix_property_option_option_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> property_option (option_id);</code> </pre><br>  Content connects with Entities: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> item_content ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SERIAL</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, item_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, content_id <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, insert_date <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIME</span></span> ZONE <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>(), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_item_content_item_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (item_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> item (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> fk_item_content_content_id <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (content_id) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> <span class="hljs-keyword"><span class="hljs-keyword">content</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_item_content_item_id_content_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> item_content (item_id, content_id); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> ux_item_content_content_id <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> item_content (content_id);</code> </pre><br>  Actually this is all part of the Information catalog. <br><br><h2>  Chip "architecture" </h2><br>  Now the most important question, why such a number of connecting plates, is it really impossible to connect the tables directly? <br><br>  The answer is that such an ‚Äúarchitecture‚Äù is aimed at maximum modularity.  Each table is sharpened for one function and these functions can be flexibly combined.  Flexibility is violated only by the Values ‚Äã‚Äãtable - content, of course, the connection with the Editors could be put into a separate table, but this is too much over the edge (although in the next implementation I will do so).  The relationship of content with property is hard because Value (content) cannot be interpreted outside the Characteristics (property). <br><br>  The flexibility of connections is made for the convenience of transferring subjects between other subjects of the System. <br><br>  That is, we can transfer the Entity with the same set of Values ‚Äã‚Äãbetween different Rubrics, and in each Rubric we will see and work with the Entity only with those Characteristics that are defined for this Rubric.  We can freely transfer Values ‚Äã‚Äãfrom one Entity to another, while not affecting the values ‚Äã‚Äãthemselves. <br><br>  We can use only the string representation of information and forget about the highly specialized views in the * _matter tables. <br><br>  We can use only Rubrics without rubricating Rubrics around the Element Tree.  And we can only scatter across the Tree only the Rubrics that we want to give users access, and system Rubrics should not join the tree and thus hide them from the users. <br>  We can add or delete Characteristics for the Category, and the Values ‚Äã‚Äãwill not be affected and will not be affected. <br><br>  That is, from project to project we can use only the functionality that is needed, and which is not needed, you can cut it in two accounts, simply by eliminating unnecessary classes from the assembly. <br>  In general, we can twist and wriggle with data as we please without any changes in the database structure, and accordingly without changes in the classes working with these data, if the logic changes, we would have to change only the business logic layer without changing the data access layer without changing the "primitive" classes responsible for the data editing interface. <br>  With the increased overhead of data access, we got more flexibility and greater resistance to users' careless actions, we can conduct some experiments without the need for backups, for such ‚Äúrisky‚Äù and lazy programmers like me, this is a big plus :) <br><br>  To all this "beauty" there is also a PHP code, but about it next time, and considering my ‚ÄúRecovery mode‚Äù, only in a week. <br><br>  <b>Ps.</b>  Probably, after your comments, it will be necessary to write once again about this ‚Äúarchitecture‚Äù, and then you can tell about PHP classes to work with this data storage and processing system. <br><br><h2>  ER Chart </h2><br><img src="https://habrastorage.org/files/71d/eb6/e38/71deb6e382784686a11f87292263fb14.png"><br><br><h2>  Continuation </h2><br>  <a href="https://habrahabr.ru/post/323498/">Ideal catalog, architecture sketch</a> </div><p>Source: <a href="https://habr.com/ru/post/322930/">https://habr.com/ru/post/322930/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../322908/index.html">Test article on checking vulnerabilities in habrahabr</a></li>
<li><a href="../322912/index.html">Some aspects of the use of cartographic materials or how not to get on 300 thousand rubles. for the site map</a></li>
<li><a href="../322914/index.html">Security Week 09: Cloudflare Vulnerability, IoT Bears Privacy</a></li>
<li><a href="../322916/index.html">59 ways to monetize your indie game</a></li>
<li><a href="../322924/index.html">Simple Stream implementation from Java 8 to C ++</a></li>
<li><a href="../322932/index.html">Amazon S3 about three or four hours worked intermittently, Medium, Slack, Coursera, Trello lay</a></li>
<li><a href="../322934/index.html">Competition for the best domain for CDN from King Servers (Updated)</a></li>
<li><a href="../322936/index.html">Four key Linux skills in 2017</a></li>
<li><a href="../322938/index.html">How IT professionals work. Alexander Kozlov, team leader of SimbirSoft</a></li>
<li><a href="../322940/index.html">SharePoint 2013/2016 Monitoring: Key Performance Counters</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Work with data in mobile applications. Implement offline storage and data synchronization using Microsoft Azure and SQLite</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Now the market has a huge number of applications that are not adapted for offline work, which creates inconvenience for users. 
 Some time ago, a new ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Work with data in mobile applications. Implement offline storage and data synchronization using Microsoft Azure and SQLite</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/fc1/fcb/188/fc1fcb18872d672cb10e9451ef8d6566.png" alt="image"><br><br>  Now the market has a huge number of applications that are not adapted for offline work, which creates inconvenience for users. <br>  Some time ago, a new <a href="http://www.nuget.org/packages/WindowsAzure.MobileServices.SQLiteStore/1.0.0-alpha">Microsoft Azure Mobile Services SQLiteStore SDK 1.0 alpha</a> became available for C # developers, which provides an API for building an application that works in the absence of the Internet and takes care of synchronizing data between a local database and an Azure database.  SQLite is created and used as a local database. <br><a name="habracut"></a><br>  So, we have the following popular ways to organize offline storage: <br><ul><li>  Serialization in XML, JSON or other NoSQL. </li><li>  <a href="http://www.sqlite.org/">SQLite</a> or other third-party databases. </li></ul><br>  Synchronization mechanisms: <br><ul><li>  Each time the local database copy is completely updated. </li><li>  Only changes are transmitted over the network. </li></ul><br>  Synchronization Tools: <br><ul><li>  <a href="http://code.msdn.microsoft.com/wpapps/Sync-Framework-Toolkit-4dc10f0e">Sync Framework Toolkit</a> </li><li>  <a href="http://msdn.microsoft.com/en-us/library/hh456371.aspx">Azure SQL Data Sync</a> </li><li>  Develop your own logic and libraries for synchronization. </li><li>  <a href="http://www.nuget.org/packages/WindowsAzure.MobileServices.SQLiteStore/1.0.0-alpha">Microsoft Azure Mobile Services SQLiteStore SDK 1.0 alpha</a> ( <b>! New</b> ) </li></ul><br><h4>  Azure Mobile Services SDK for syncing </h4><br>  The functionality of the new <a href="http://www.nuget.org/packages/WindowsAzure.MobileServices.SQLiteStore/1.0.0-alpha">Microsoft Azure Mobile Services SQLiteStore SDK 1.0 alpha</a> for data synchronization is not identical to the Sync Framework or Azure Data Sync. <br><br>  From the client‚Äôs point of view, while it is possible to work only with <a href="http://www.sqlite.org/">SQLite</a> , the creators promise that the opportunities will be developed and other client databases will be added later. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The server side supports the following databases: SQL Database, MongoDB and Azure Table Storage. <br><br>  <a href="http://www.nuget.org/packages/WindowsAzure.MobileServices.SQLiteStore/1.0.0-alpha">The SDK</a> supports the following operations: <b>Push</b> (send to server), <b>Pull</b> (download from server), <b>Purge</b> (clear local storage). <br><br>  Today we will focus on how to create a backend for your application using <a href="http://www.nuget.org/packages/WindowsAzure.MobileServices.SQLiteStore/1.0.0-alpha">Microsoft Azure Mobile Services SQLiteStore SDK 1.0 alpha</a> . <br><br>  To work we need: <br><ul><li>  <a href="http://azure.microsoft.com/">Azure subscription</a> - on the site you can get a trial for a month </li><li>  <a href="http://windows.microsoft.com/en-us/windows/buy">Windows 8.1</a> </li><li>  <a href="http://www.microsoft.com/en-us/download/details.aspx%3Fid%3D42666">Visual Studio 2013 Update 2</a> </li></ul><br>  Our task will consist of the following items: <br><ul><li>  Creating a mobile service and mobile database in Microsoft Azure; </li><li>  Creating an application project.  We will make a universal application in Visual Studio. </li><li>  Creating a local database application. </li><li>  Implement data synchronization. </li></ul><br>  Let's get started ... <br><br><h4>  Configure Azure Mobile Services </h4><br>  1. To create an Azure Mobile Service for your project, you must open the <a href="http://manage.windowsazure.com/">Microsoft Azure Portal</a> and go to the <b>Mobile Services</b> - <b>New</b> menu. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d14/1c8/b76/d141c8b76c95cfd6d5ec698666371850.png"><br><br>  Creating a cloud service, you can choose in what language you will write the service code.  On C # or JavaScript. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/acd/7fa/526/acd7fa5262040b941fd470d2b2ea362a.png"><br><br>  2. When the mobile service is created, on the main page of the service, you can find instructions on how to use it in applications for many popular platforms and frameworks, such as Windows, Windows Phone, IOS, Android, Xamarin. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/51a/e9c/892/51ae9c892345317f363f97c81007ed07.png"><br><br>  3. You can download a cloud service project template, modify its code, for example, by adjusting the data model as in the screenshot below. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f55/b24/fe3/f55b24fe307fef636c2f5ec69bcc8535.png"><br><br>  4. Then, post to the cloud from Visual Studio. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ed6/b76/f18/ed6b76f18d8251816b7db7c3cd7813f6.png"><br><br>  How to develop and publish a cloud service is written in sufficient detail <a href="http://azure.microsoft.com/en-us/documentation/articles/mobile-services-windows-store-get-started/">here</a> . <br><br><h4>  Create an application project </h4><br>  1. I will use the universal application project for Windows and Windows Phone. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d92/698/712/d926987122ae19fdb588163f99af2b52.png"><br><br>  2. After creating the project, we will connect the necessary libraries.  Since we have a project for both Windows and Windows Phone, it is necessary to install <b>WindowsAzure.MobileServices</b> for both projects. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1fd/fa6/ec2/1fdfa6ec2b33a41c8af24206b22054ea.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/cdc/a3a/009/cdca3a009c43b7af9cf4f2e6bce865ea.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/7b4/dba/2a1/7b4dba2a1c316278021636bf39e803ca.png"><br><br>  3. In the general project ( <b>Shared</b> ), open <b>App.xaml.cs</b> and add the mobile service announcement there: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> MobileServiceClient MobileService = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MobileServiceClient(<span class="hljs-string"><span class="hljs-string">"https://demo-backend.azure-mobile.net/"</span></span>, <span class="hljs-string"><span class="hljs-string">"ZDgibxPOCWSwOvbYJvAAipjAybMIJO51"</span></span>);</code> </pre> <br>  4. Now we can work with the data through the cloud service and save the data in the database. <br><br><h4>  Create local database and sync </h4><br>  Now we need to create a local SQLite data store. <br><br>  1. Install <a href="http://visualstudiogallery.msdn.microsoft.com/1d04f82f-2fe9-4727-a2f9-a2db127ddc9a">SQLite for Windows 8.1</a> and <a href="http://visualstudiogallery.msdn.microsoft.com/5d97faf6-39e3-4048-a0bc-adde2af75d1b">SQLite for Windows Phone 8.1</a> <br><br>  2. Add SQLite as the used library for our Windows and Windows Phone applications. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/941/139/920/9411399203cac1d2d707d9fbc31df8af.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/69b/523/135/69b523135dc363d3f4160a8ab66bc88c.png"><br><br>  3. Install and add the <b>WindowsAzure.MobileServices.SQLiteStore</b> package to <b>References</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/27b/0e4/748/27b0e474830183466b1e5ba39e2eaa53.png"><br><br>  4. Open the <b>Shared</b> project and create there a new empty class with the data model.  In my case, it turned out like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/30f/90b/f14/30f90bf14e4cf145721427034f86bcd7.png"><br><br>  5. Let's create an auxiliary class that will create a local database for us, be able to fill it with data and send data to the cloud service. <br><br><div class="spoiler">  <b class="spoiler_title">MobileServicesSync.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Linq; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Text; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Threading.Tasks; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.WindowsAzure.MobileServices.Sync; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.WindowsAzure.MobileServices.SQLiteStore; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Threading; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">DemoApp</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MobileServicesSync</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitSQLiteStore</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!App.MobileService.SyncContext.IsInitialized) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> store = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MobileServiceSQLiteStore(<span class="hljs-string"><span class="hljs-string">"DemoAppSync.db"</span></span>); store.DefineTable&lt;MyAppItem&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> App.MobileService.SyncContext.InitializeAsync(store, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MobileServiceSyncHandler()); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InsertItem</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">MyAppItem item</span></span></span><span class="hljs-function">)</span></span> { IMobileServiceSyncTable&lt;MyAppItem&gt; table = App.MobileService.GetSyncTable&lt;MyAppItem&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> table.InsertAsync(item); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Push</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> errorString = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { CancellationToken token = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CancellationToken(); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> App.MobileService.SyncContext.PushAsync(token); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (MobileServicePushFailedException ex) { errorString = <span class="hljs-string"><span class="hljs-string">"Push failed because of sync errors: "</span></span> + ex.PushResult.Errors.Count() + <span class="hljs-string"><span class="hljs-string">", message: "</span></span> + ex.Message; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { errorString = <span class="hljs-string"><span class="hljs-string">"Push failed: "</span></span> + ex.Message; } } } }</code> </pre><br></div></div><br><h4>  Application interface </h4><br>  1. Open <b>MainPage.xaml</b> and add buttons to fill the table with data and synchronization. <br><br><div class="spoiler">  <b class="spoiler_title">MainPage.xaml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Page</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DemoApp.MainPage"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:local</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"using:DemoApp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/expression/blend/2008"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:mc</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mc:Ignorable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"d"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{ThemeResource ApplicationPageBackgroundThemeBrush}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">VerticalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Center"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HorizontalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Center"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"addBtn"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Add item"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"addBtn_Click"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"syncBtn"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Sync"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"syncBtn_Click"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Page</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  2. Add to <b>MainPage.xaml.cs</b> code for event handling. <br><br><div class="spoiler">  <b class="spoiler_title">MainPage.xaml.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainPage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.InitializeComponent(); MobileServicesSync.InitSQLiteStore(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addBtn_Click</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, RoutedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { MobileServicesSync.InsertItem(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyAppItem { Text=<span class="hljs-string"><span class="hljs-string">"!"</span></span> }); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">syncBtn_Click</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, RoutedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { MobileServicesSync.Push(); }</code> </pre><br></div></div><br><h4>  Run and check </h4><br>  1. Run the application and see how it works. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/06f/9db/1bc/06f9db1bc748ff8edb2e5f773c70c98c.png"><br><br>  2. As soon as we launched the application, we already had a local SQLite database.  We can find it in the application folder and see.  For this, I will use <a href="http://sqlitebrowser.org/">SQLite Browser</a> . <br><br>  My database is here: <i>C: \ Users \ [username] \ AppData \ Local \ Packages \ [app id] \ LocalState</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/765/1da/b3c/7651dab3cf08ad09e468d01b951daf13.png"><br><br>  As you can see, it is now empty. <br><br>  3. Add an item to it by clicking on the <b>Add Item</b> button of our application. <br><br>  4. The data in the database will be updated and a record will be added there, but our cloud database is still empty. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f31/1c1/b30/f311c1b30cecadf6e94ac636a7408663.png"><br><br>  5. Now click on the <b>Sync</b> button in the database synchronization application and see the result. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e38/771/b01/e38771b01bdd181f802917db5b3d56ce.png"><br><br>  Synchronization worked and data from the local application database appeared in the cloud database. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/36d/8f0/0f9/36d8f00f9680d1bc61994d62ea07e168.png"><br><br><div class="spoiler">  <b class="spoiler_title">Note: for those who did not work</b> <div class="spoiler_text">  It may happen that the creation of a local database will fall with an error.  Then find and add the <b>SQLitePCL.Ext.dll</b> assembly to <b>References</b> .  For some reason, it itself is not always set by NuGet. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a72/f4f/1e5/a72f4f1e5c1eb8774648bddb70c4ac0d.png"><br></div></div><br><h4>  Conclusion </h4><br>  New Microsoft Azure Mobile Services and its <a href="http://www.nuget.org/packages/WindowsAzure.MobileServices.SQLiteStore/1.0.0-alpha">SDK</a> have many new useful features for application developers.  One of them is the support of offline work and data synchronization for applications.  Following this guide, you can set up data synchronization for your Phone or Windows application without spending a lot of time on complex algorithms and writing libraries. <br><br><h4>  useful links </h4><br><ul><li><h5>  <a href="http://blogs.msdn.com/b/carlosfigueira/archive/2014/04/07/deep-dive-on-the-offline-support-in-the-azure-mobile-service-managed-client-sdk.aspx">: Ure</a> </h5></li><li><h5>  <a href="http://azure.microsoft.com/en-us/documentation/articles/Mobile-services-windows-store-dotnet-get-started-offline-data/">Tutorial: Get started with offline data</a> </h5></li><li><h5>  <a href="http://azure.microsoft.com/en-us/documentation/articles/Mobile-services-windows-store-dotnet-handling-conflicts-offline-data/">Tutorial: Handle conflicts with offline data in Mobile Services</a> </h5></li></ul><br><ul><li><h5>  <a href="http://aka.ms/azure_trial_free_rus">Try Azure</a> for free for 30 days! </h5><br></li><li><h5>  <a href="http://aka.ms/getvsrus">Download</a> free or trial Visual Studio </h5><br></li><li><h5>  Take a training course at the <a href="http://aka.ms/gomvarus">Microsoft Virtual Academy</a> (MVA) </h5><br><ul><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/app-development-on-microsoft-platform-rus">Application Development on the Microsoft Platform</a> </li><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/cross-platforming-dev-for-windows-phone-windows-8-rus">Cross-platform application development for Windows Phone and Windows 8</a> </li><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/build-for-windows-8-windows-phone">Developing applications with common code for Windows 8 and Windows Phone platforms</a> </li><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/windows-phone-8-for-begginers">Complicated techniques for developing applications for Windows Phone 8</a> </li><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/advanced-possibilities-appdev-windows-phone-8-rus">Advanced Development Features for Windows Phone 8</a> </li><li>  or <a href="http://www.microsoftvirtualacademy.com/product-training/product-windows-azure-ru">Azure cloud development courses</a> </li><li>  or many other <a href="http://aka.ms/gomvarus">free MVA courses</a> ! </li></ul><br></li><li><h5>  <a href="http://aka.ms/wpstartrus">Become a</a> Windows Phone Application <a href="http://aka.ms/wpstartrus">Developer</a> </h5><br></li></ul></div><p>Source: <a href="https://habr.com/ru/post/229041/">https://habr.com/ru/post/229041/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../229029/index.html">Using LaTeX instead of HTML in Habrahabr</a></li>
<li><a href="../229031/index.html">Overview of 7 online software localization services</a></li>
<li><a href="../229035/index.html">Strongly typed incomplete data representation</a></li>
<li><a href="../229037/index.html">LG G Watch became available for purchase on Google Play</a></li>
<li><a href="../229039/index.html">Log in via Google to Android and check the token on the server</a></li>
<li><a href="../229043/index.html">Centos 7 release released</a></li>
<li><a href="../229045/index.html">Game server on Scala + Akka</a></li>
<li><a href="../229047/index.html">As we in PassportVision interface did</a></li>
<li><a href="../229049/index.html">Anyone can hack Tor for $ 3000</a></li>
<li><a href="../229051/index.html">Refactor or not refactor?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
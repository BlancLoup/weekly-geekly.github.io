<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Arduino programming with ISP programmer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Programming an Arduino Uno on a ‚Äúpure‚Äù C or Assembler is not much more difficult than using the standard programming language for Arduino. In this cas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Arduino programming with ISP programmer</h1><div class="post__text post__text-html js-mediator-article">  Programming an Arduino Uno on a ‚Äúpure‚Äù C or Assembler is not much more difficult than using the standard programming language for Arduino.  In this case, you can greatly win in performance and reduce the size of your program.  Next, we will discuss how to reflash Arduino Uno R3 using an ISP programmer and AVR Studio 6.2. <br><a name="habracut"></a><br>  So, we need the <b>Arduino Uno R3</b> , any <b>ISP</b> programmer compatible with <b>Atmel Studio 6</b> , one LED and a resistor, for example, 250 Ohms.  For programming the Arduino, I use the <b>Atmel ICE</b> universal programmer.  As I said, you can use any ISP programmer for Arduino programming.  A list of supported programmers can be viewed directly in Atmel Studio. <br><br>  Everyone knows that the Arduino Uno R3 uses an ATmega328P-PU microcontroller.  That is what we will program.  In fact, after recording our program, we will no longer have an Arduino, but simply a microcontroller with a strapping.  Since we will erase the Arduino bootloader. <br><br>  Unfortunately, the <b>ATmega328P-PU</b> microcontroller does not support ‚Äúadvanced‚Äù debugging via JTAG.  You can, of course, debug your Arduino in Arduino Micro with breakpoints and output values ‚Äã‚Äãto output (you need to explicitly ask what you want to get), but this approach is not always convenient, moreover, Atmel Studio has much more advanced debugging tools (view register states, memory monitoring, etc.).  Therefore, we will limit ourselves to simply flashing our controller via ISP. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Open Atmel Studio and select the <b>GCC C Exacutable Project</b> , as shown in the figure. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1cb/e8a/7e8/1cbe8a7e88497958b02499122799b7ce.png" alt="image"><br><br>  Ok, project is created.  Now we need to connect our programmer.  I use Atmel ICE.  This is a universal programmer that fits most Atmel AVR and ARM microcontrollers.  We connect the programmer to the computer, then in Atmel Studio select the item <b>Tools -&gt; Device Programming</b> .  Important!  If you have Russian Windows, do not create a project in my documents and in general with folders with a Russian name.  It is better to create a separate folder on the disk with a name without Cyrillic, for example D: \ myprog.  Just do not forget to run the studio with administrator rights. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a10/8a6/9e6/a108a69e646564d31ff63f041b97e07f.png" alt="image"><br><br>  In the opened window, select the following options: Tool - a device for programming / debugging in this case, Atmel ICE, Device - a microcontroller that is going to be programmed, Interface - an interface through which our programmer will flash / debug a microcontroller, in this case only ISP is available. <br><br>  Press the Read button to get the device identifier and its operating voltage.  If the Arduino is connected correctly, you should get a device number, for example 0x1E950F and a voltage of 4.9V. <br><br>  Click Apply.  After this, the settings for the programmer should appear as shown in the figure below. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d49/1ad/342/d491ad342e64da68b7f0ec86025238a5.png" alt="image"><br><br>  Next, perform the following steps.  Change the ISP Clock to 250. Then go to the Memories section and click the <b>Erase now</b> button.  Important!  After this action, you will not be able to use your Arduino with the Arduino IDE, since the bootloader will be removed. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3fa/599/c41/3fa599c41833c0d9642333c9bd5032da.png" alt="image"><br><br>  Now we have everything ready for programming.  Let's write a small program for the flashing LED. <br>  Insert the LED into the breadboard and connect it through the current-limiting resistor.  Connect the positive foot of the LED to the digital output 5 on the Arduino. <br><br>  Now you need to figure out what leg of the microcontroller corresponds to the output on the board.  For this we need a <a href="http://arduino.cc/en/uploads/Main/Arduino_Uno_Rev3-schematic.pdf">datasheet</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ee/ed8/880/2eeed8880222d02b5f37440485b1bfad.png" alt="image"><br><br>  Since we want to control the LED using the 6th pin on the Arduino, we will use the PORTD register and the 5th bit which will apply voltage to the 11th leg of our microcontroller. <br><br>  Place the following code in the project code file. <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;avr/io.h&gt; #define F_CPU 16000000UL //16MHz #include &lt;util/delay.h&gt; int main(void) { DDRD |= 1&lt;&lt;6; PORTD &amp;= ~1&lt;&lt;6; while(1) { PORTD |= 1&lt;&lt;6; _delay_ms(100); PORTD &amp;= ~1&lt;&lt;6; _delay_ms(100); } }</span></span></span></span></code> </pre> <br>  Press <i>"Ctrl + Alt + F5"</i> or select the menu item <b>Debug -&gt; Start Without Debugging</b> .  The LED will start blinking! <br><br>  That's all ... Pay attention to the speed of the firmware and the size of the program.  This example takes about 186 bytes, which is 0.6% of the controller's memory. <br><br><img src="http://storage8.static.itmages.ru/i/14/1221/h_1419175383_1950406_497a101e2b.png" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/246555/">https://habr.com/ru/post/246555/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../246537/index.html">Announcement of new services and increased performance of the Azure cloud platform</a></li>
<li><a href="../246545/index.html">Interkassa: beware of hidden fees, PayPal conversion is now more attractive than conversion rates of many banks</a></li>
<li><a href="../246547/index.html">Experience coding for equity. Results for 8 years</a></li>
<li><a href="../246551/index.html">Architectural design of mobile applications</a></li>
<li><a href="../246553/index.html">IT distribution in Europe or how we started our business - Part 1</a></li>
<li><a href="../246557/index.html">Super powers chrome devtools</a></li>
<li><a href="../246563/index.html">Why do you need to support different payment systems</a></li>
<li><a href="../246565/index.html">How to make an analysis of a landing page in 10 minutes and return 1000 buyers. Part 1</a></li>
<li><a href="../246573/index.html">The digest of interesting materials from the world of Drupal # 2</a></li>
<li><a href="../246575/index.html">The first month of the promotion of a free non-game application: rakes, cones, good luck, conclusions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using XSLT Template Engine in ASP.NET MVC</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Now during the development of a widely used pattern of MVC, implying the separation of the data model, presentation and logic of work. A fairly well-k...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using XSLT Template Engine in ASP.NET MVC</h1><div class="post__text post__text-html js-mediator-article">  Now during the development of a widely used pattern of MVC, implying the separation of the data model, presentation and logic of work.  A fairly well-known implementation of this pattern in web development is the ASP.NET MVC Framework.  Not long ago, the third version of this framework was released, in which there are two options for implementing views: ASPX and Razor.  Both engines have a fairly wide range of capabilities, but in this publication I will try to describe the use of another tool for implementing views - XSLT templates. <br><a name="habracut"></a><br>  An XSLT template is an XML document that describes the conversion of one or more input XML documents to output, which is usually also an XML or HTML document.  In our case, the input data for the template will be an XML representation of the data obtained from the corresponding models.  The data transferred to the template is used to form the page content. <br>  The main project we will serve template ASP.NET MVC 3 Application.  Selectable View Engine here does not matter. <br><br><h4>  Data models </h4><br>  For all models passed to the views, we describe the following base class: <br><br> <code><font color="black">[ <font color="#2B91AF">Serializable</font> ] <br> [XmlInclude( <font color="#0000ff">typeof</font> (UserModel))] <br> <font color="#0000ff">public</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> XmlModel { }</font> <br></code> <br>  The first attribute is needed because the objects of this class will be serialized to XML.  The reasons for using the second attribute will be discussed below. <br>  UserModel is an example of a child class that we will pass to the view: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code><font color="black">[ <font color="#2B91AF">Serializable</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> UserModel : XmlModel <br> { <br> [ <font color="#2B91AF">XmlAttribute</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> UserId { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Login { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Email { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> }</font> <br></code> <br>  Now we describe the main class that will be serialized and passed to the template: <br><br> <code><code><font color="black">[ <font color="#2B91AF">Serializable</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Result <br> { <br> [ <font color="#2B91AF">XmlAttribute</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Controller { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> [ <font color="#2B91AF">XmlAttribute</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Action { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> Data { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> } <br></font> <br> <br>       , ,       . <br>    Data     XmlModel,    ,           XmlInclude    XmlModel. <br>  XML-    : <br> <br> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">Result</font> <font color="#ff0000">Controller</font> <font color="#0000ff">="SomeController"</font> <font color="#ff0000">Action</font> <font color="#0000ff">="SomeAction"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!--     --&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Result</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>  <br>       ActionResult.       ,    .       c XML-,   : <br> <br> <code><font color="black"><font color="#0000ff">private</font> <font color="#0000ff">string</font> _data; <br> <font color="#0000ff">public</font> XmlResult( <font color="#0000ff">string</font> data) <br> { <br> _data = data; <br> }</font> <br></code> <br>  ,    - ExecuteResult.    .        : <br> <br> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> ExecuteResult(ControllerContext controllerContext) <br> { <br> <font color="#0000ff">var</font> xslTransform = <font color="#0000ff">new</font> XslCompiledTransform(); <br> <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> controller = controllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> action = controllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> templatePath = <font color="#0000ff">string</font> .Format( <font color="#A31515">"~/Views/{0}/{1}.xsl"</font> , controller, action); <br> <font color="#0000ff">var</font> virtualFile = HostingEnvironment.VirtualPathProvider.GetFile(templatePath); <br> <font color="#008000">//     :</font> <br> <font color="#008000">//var virtualFile = HostingEnvironment.VirtualPathProvider.GetFile("~/Views/default.xsl");</font> <br> <font color="#0000ff">var</font> xmlReader = XmlReader.Create(virtualFile.Open()); <br> xslTransform.Load(xmlReader); <br> xmlReader.Close(); <br> <br> <font color="#0000ff">var</font> stringReader = <font color="#0000ff">new</font> <font color="#2B91AF">StringReader</font> (_data); <br> xmlReader = XmlReader.Create(stringReader); <br> <br> <font color="#008000">// XML-       http- </font> <br> <font color="#0000ff">var</font> xmlWriter = XmlWriter.Create(controllerContext. <font color="#2B91AF">HttpContext</font> .Response.OutputStream); <br> xslTransform.Transform(xmlReader, xmlWriter); <br> <br> stringReader.Close(); <br> xmlReader.Close(); <br> xmlWriter.Close(); <br> } <br></font> <br></code> <br>     : <br> <br> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> XmlResult : ActionResult <br> { <br> <font color="#0000ff">private</font> <font color="#0000ff">string</font> _data; <br> <br> <font color="#0000ff">public</font> XmlResult( <font color="#0000ff">string</font> data) <br> { <br> _data = data; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> ExecuteResult(ControllerContext controllerContext) <br> { <br> <font color="#0000ff">var</font> xslTransform = <font color="#0000ff">new</font> XslCompiledTransform(); <br> <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> controller = controllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> action = controllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> templatePath = <font color="#0000ff">string</font> .Format( <font color="#A31515">"~/Views/{0}/{1}.xsl"</font> , controller, action); <br> <font color="#0000ff">var</font> virtualFile = HostingEnvironment.VirtualPathProvider.GetFile(templatePath); <br> <font color="#008000">//     :</font> <br> <font color="#008000">//var virtualFile = HostingEnvironment.VirtualPathProvider.GetFile("~/Views/default.xsl");</font> <br> <font color="#0000ff">var</font> xmlReader = XmlReader.Create(virtualFile.Open()); <br> xslTransform.Load(xmlReader); <br> xmlReader.Close(); <br> <br> <font color="#0000ff">var</font> stringReader = <font color="#0000ff">new</font> <font color="#2B91AF">StringReader</font> (_data); <br> xmlReader = XmlReader.Create(stringReader); <br> <br> <font color="#008000">// XML-       http- </font> <br> <font color="#0000ff">var</font> xmlWriter = XmlWriter.Create(controllerContext. <font color="#2B91AF">HttpContext</font> .Response.OutputStream); <br> xslTransform.Transform(xmlReader, xmlWriter); <br> <br> stringReader.Close(); <br> xmlReader.Close(); <br> xmlWriter.Close(); <br> } <br> } <br></font> <br></code> <br>      . <br>     ViewData,     : <br> <br> <code><code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">new</font> <font color="#2B91AF">List</font> ViewData = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> (); <br> <br>     View,     ActionResult  .             : <br> <br> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">new</font> ActionResult View() <br> { <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> result = <font color="#0000ff">new</font> Result <br> { <br> Controller = ControllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Action = ControllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Data = ViewData <br> }; <br> <font color="#0000ff">var</font> xmlSerializer = <font color="#0000ff">new</font> XmlSerializer( <font color="#0000ff">typeof</font> (Result)); <br> <font color="#0000ff">var</font> stringWriter = <font color="#0000ff">new</font> <font color="#2B91AF">StringWriter</font> (); <br> xmlSerializer.Serialize(stringWriter, result); <br> stringWriter.Close(); <br> <font color="#008000">//    ActionResult</font> <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> XmlResult(stringWriter.ToString()); <br> }</font> <br></font></code> <br>      : <br> <br> <code><code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> XsltController : Controller <br> { <br> <font color="#0000ff">public</font> <font color="#0000ff">new</font> <font color="#2B91AF">List</font> ViewData = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> (); <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">new</font> ActionResult View() <br> { <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> result = <font color="#0000ff">new</font> Result <br> { <br> Controller = ControllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Action = ControllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Data = ViewData <br> }; <br> <font color="#0000ff">var</font> xmlSerializer = <font color="#0000ff">new</font> XmlSerializer( <font color="#0000ff">typeof</font> (Result)); <br> <font color="#0000ff">var</font> stringWriter = <font color="#0000ff">new</font> <font color="#2B91AF">StringWriter</font> (); <br> xmlSerializer.Serialize(stringWriter, result); <br> stringWriter.Close(); <br> <font color="#008000">//    ActionResult</font> <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> XmlResult(stringWriter.ToString()); <br> } <br> } <br> <br>        : <br> <br> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> HomeController : XsltController <br> { <br> <font color="#0000ff">public</font> ActionResult Index() <br> { <br> <font color="#0000ff">var</font> user = <font color="#0000ff">new</font> UserModel { UserId = 1, Login = <font color="#A31515">"root"</font> , Email = <font color="#A31515">"noreply@localhost"</font> }; <br> ViewData.Add(user); <br> <font color="#0000ff">return</font> View(); <br> } <br> }</font> <br></font></code> <br>       .       XML: <br> <br> <code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-16"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Result</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#ff0000">xmlns:xsd</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema"</font> <font color="#ff0000">Controller</font> <font color="#0000ff">="Home"</font> <font color="#ff0000">Action</font> <font color="#0000ff">="Index"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">XmlModel</font> <font color="#ff0000">xsi:type</font> <font color="#0000ff">="UserModel"</font> <font color="#ff0000">UserId</font> <font color="#0000ff">="1"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Login</font> <font color="#0000ff">&gt;</font> root <font color="#0000ff">&lt;/</font> <font color="#800000">Login</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Email</font> <font color="#0000ff">&gt;</font> noreply@localhost <font color="#0000ff">&lt;/</font> <font color="#800000">Email</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">XmlModel</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Result</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>  <br>    XSLT-,       : <br> <br> <code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:stylesheet</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">xmlns:xsl</font> <font color="#0000ff">="http://www.w3.org/1999/XSL/Transform"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:output</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> <br> <font color="#ff0000">method</font> <font color="#0000ff">="xml"</font> <br> <font color="#ff0000">media-type</font> <font color="#0000ff">="application/xhtml+xml"</font> <br> <font color="#ff0000">doctype-public</font> <font color="#0000ff">="-//W3C//DTD XHTML 1.1//EN"</font> <br> <font color="#ff0000">doctype-system</font> <font color="#0000ff">="http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:template</font> <font color="#ff0000">match</font> <font color="#0000ff">="/"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://www.w3.org/1999/xhtml"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">meta</font> <font color="#ff0000">http-equiv</font> <font color="#0000ff">="Content-Type"</font> <font color="#ff0000">content</font> <font color="#0000ff">="application/xhtml+xml; charset=utf-8"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> XSLT + MVC <font color="#0000ff">&lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Controller: <font color="#0000ff">&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="/Result/@Controller"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Action: <font color="#0000ff">&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="/Result/@Action"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> User: <font color="#0000ff">&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="//XmlModel[@xsi:type = 'UserModel']/Login"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:template</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:stylesheet</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>        HTML-: <br> <br> <code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://www.w3.org/1999/xhtml"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">meta</font> <font color="#ff0000">http-equiv</font> <font color="#0000ff">="Content-Type"</font> <font color="#ff0000">content</font> <font color="#0000ff">="application/xhtml+xml; charset=utf-8"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> XSLT + MVC <font color="#0000ff">&lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Controller: Home <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Action: Index <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> User: root <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>  ,      ,     ,        .   Controller  Action  ,          . <br> <br> <font color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="gray">Source Code Highlighter</font></a> .</font></code></code></code> <h4> <code><code><font color="black">[ <font color="#2B91AF">Serializable</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Result <br> { <br> [ <font color="#2B91AF">XmlAttribute</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Controller { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> [ <font color="#2B91AF">XmlAttribute</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Action { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> Data { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> } <br></font> <br> <br>       , ,       . <br>    Data     XmlModel,    ,           XmlInclude    XmlModel. <br>  XML-    : <br> <br> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">Result</font> <font color="#ff0000">Controller</font> <font color="#0000ff">="SomeController"</font> <font color="#ff0000">Action</font> <font color="#0000ff">="SomeAction"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!--     --&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Result</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>  <br>       ActionResult.       ,    .       c XML-,   : <br> <br> <code><font color="black"><font color="#0000ff">private</font> <font color="#0000ff">string</font> _data; <br> <font color="#0000ff">public</font> XmlResult( <font color="#0000ff">string</font> data) <br> { <br> _data = data; <br> }</font> <br></code> <br>  ,    - ExecuteResult.    .        : <br> <br> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> ExecuteResult(ControllerContext controllerContext) <br> { <br> <font color="#0000ff">var</font> xslTransform = <font color="#0000ff">new</font> XslCompiledTransform(); <br> <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> controller = controllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> action = controllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> templatePath = <font color="#0000ff">string</font> .Format( <font color="#A31515">"~/Views/{0}/{1}.xsl"</font> , controller, action); <br> <font color="#0000ff">var</font> virtualFile = HostingEnvironment.VirtualPathProvider.GetFile(templatePath); <br> <font color="#008000">//     :</font> <br> <font color="#008000">//var virtualFile = HostingEnvironment.VirtualPathProvider.GetFile("~/Views/default.xsl");</font> <br> <font color="#0000ff">var</font> xmlReader = XmlReader.Create(virtualFile.Open()); <br> xslTransform.Load(xmlReader); <br> xmlReader.Close(); <br> <br> <font color="#0000ff">var</font> stringReader = <font color="#0000ff">new</font> <font color="#2B91AF">StringReader</font> (_data); <br> xmlReader = XmlReader.Create(stringReader); <br> <br> <font color="#008000">// XML-       http- </font> <br> <font color="#0000ff">var</font> xmlWriter = XmlWriter.Create(controllerContext. <font color="#2B91AF">HttpContext</font> .Response.OutputStream); <br> xslTransform.Transform(xmlReader, xmlWriter); <br> <br> stringReader.Close(); <br> xmlReader.Close(); <br> xmlWriter.Close(); <br> } <br></font> <br></code> <br>     : <br> <br> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> XmlResult : ActionResult <br> { <br> <font color="#0000ff">private</font> <font color="#0000ff">string</font> _data; <br> <br> <font color="#0000ff">public</font> XmlResult( <font color="#0000ff">string</font> data) <br> { <br> _data = data; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> ExecuteResult(ControllerContext controllerContext) <br> { <br> <font color="#0000ff">var</font> xslTransform = <font color="#0000ff">new</font> XslCompiledTransform(); <br> <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> controller = controllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> action = controllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> templatePath = <font color="#0000ff">string</font> .Format( <font color="#A31515">"~/Views/{0}/{1}.xsl"</font> , controller, action); <br> <font color="#0000ff">var</font> virtualFile = HostingEnvironment.VirtualPathProvider.GetFile(templatePath); <br> <font color="#008000">//     :</font> <br> <font color="#008000">//var virtualFile = HostingEnvironment.VirtualPathProvider.GetFile("~/Views/default.xsl");</font> <br> <font color="#0000ff">var</font> xmlReader = XmlReader.Create(virtualFile.Open()); <br> xslTransform.Load(xmlReader); <br> xmlReader.Close(); <br> <br> <font color="#0000ff">var</font> stringReader = <font color="#0000ff">new</font> <font color="#2B91AF">StringReader</font> (_data); <br> xmlReader = XmlReader.Create(stringReader); <br> <br> <font color="#008000">// XML-       http- </font> <br> <font color="#0000ff">var</font> xmlWriter = XmlWriter.Create(controllerContext. <font color="#2B91AF">HttpContext</font> .Response.OutputStream); <br> xslTransform.Transform(xmlReader, xmlWriter); <br> <br> stringReader.Close(); <br> xmlReader.Close(); <br> xmlWriter.Close(); <br> } <br> } <br></font> <br></code> <br>      . <br>     ViewData,     : <br> <br> <code><code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">new</font> <font color="#2B91AF">List</font> ViewData = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> (); <br> <br>     View,     ActionResult  .             : <br> <br> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">new</font> ActionResult View() <br> { <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> result = <font color="#0000ff">new</font> Result <br> { <br> Controller = ControllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Action = ControllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Data = ViewData <br> }; <br> <font color="#0000ff">var</font> xmlSerializer = <font color="#0000ff">new</font> XmlSerializer( <font color="#0000ff">typeof</font> (Result)); <br> <font color="#0000ff">var</font> stringWriter = <font color="#0000ff">new</font> <font color="#2B91AF">StringWriter</font> (); <br> xmlSerializer.Serialize(stringWriter, result); <br> stringWriter.Close(); <br> <font color="#008000">//    ActionResult</font> <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> XmlResult(stringWriter.ToString()); <br> }</font> <br></font></code> <br>      : <br> <br> <code><code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> XsltController : Controller <br> { <br> <font color="#0000ff">public</font> <font color="#0000ff">new</font> <font color="#2B91AF">List</font> ViewData = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> (); <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">new</font> ActionResult View() <br> { <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> result = <font color="#0000ff">new</font> Result <br> { <br> Controller = ControllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Action = ControllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Data = ViewData <br> }; <br> <font color="#0000ff">var</font> xmlSerializer = <font color="#0000ff">new</font> XmlSerializer( <font color="#0000ff">typeof</font> (Result)); <br> <font color="#0000ff">var</font> stringWriter = <font color="#0000ff">new</font> <font color="#2B91AF">StringWriter</font> (); <br> xmlSerializer.Serialize(stringWriter, result); <br> stringWriter.Close(); <br> <font color="#008000">//    ActionResult</font> <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> XmlResult(stringWriter.ToString()); <br> } <br> } <br> <br>        : <br> <br> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> HomeController : XsltController <br> { <br> <font color="#0000ff">public</font> ActionResult Index() <br> { <br> <font color="#0000ff">var</font> user = <font color="#0000ff">new</font> UserModel { UserId = 1, Login = <font color="#A31515">"root"</font> , Email = <font color="#A31515">"noreply@localhost"</font> }; <br> ViewData.Add(user); <br> <font color="#0000ff">return</font> View(); <br> } <br> }</font> <br></font></code> <br>       .       XML: <br> <br> <code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-16"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Result</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#ff0000">xmlns:xsd</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema"</font> <font color="#ff0000">Controller</font> <font color="#0000ff">="Home"</font> <font color="#ff0000">Action</font> <font color="#0000ff">="Index"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">XmlModel</font> <font color="#ff0000">xsi:type</font> <font color="#0000ff">="UserModel"</font> <font color="#ff0000">UserId</font> <font color="#0000ff">="1"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Login</font> <font color="#0000ff">&gt;</font> root <font color="#0000ff">&lt;/</font> <font color="#800000">Login</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Email</font> <font color="#0000ff">&gt;</font> noreply@localhost <font color="#0000ff">&lt;/</font> <font color="#800000">Email</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">XmlModel</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Result</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>  <br>    XSLT-,       : <br> <br> <code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:stylesheet</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">xmlns:xsl</font> <font color="#0000ff">="http://www.w3.org/1999/XSL/Transform"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:output</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> <br> <font color="#ff0000">method</font> <font color="#0000ff">="xml"</font> <br> <font color="#ff0000">media-type</font> <font color="#0000ff">="application/xhtml+xml"</font> <br> <font color="#ff0000">doctype-public</font> <font color="#0000ff">="-//W3C//DTD XHTML 1.1//EN"</font> <br> <font color="#ff0000">doctype-system</font> <font color="#0000ff">="http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:template</font> <font color="#ff0000">match</font> <font color="#0000ff">="/"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://www.w3.org/1999/xhtml"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">meta</font> <font color="#ff0000">http-equiv</font> <font color="#0000ff">="Content-Type"</font> <font color="#ff0000">content</font> <font color="#0000ff">="application/xhtml+xml; charset=utf-8"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> XSLT + MVC <font color="#0000ff">&lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Controller: <font color="#0000ff">&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="/Result/@Controller"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Action: <font color="#0000ff">&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="/Result/@Action"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> User: <font color="#0000ff">&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="//XmlModel[@xsi:type = 'UserModel']/Login"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:template</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:stylesheet</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>        HTML-: <br> <br> <code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://www.w3.org/1999/xhtml"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">meta</font> <font color="#ff0000">http-equiv</font> <font color="#0000ff">="Content-Type"</font> <font color="#ff0000">content</font> <font color="#0000ff">="application/xhtml+xml; charset=utf-8"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> XSLT + MVC <font color="#0000ff">&lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Controller: Home <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Action: Index <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> User: root <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>  ,      ,     ,        .   Controller  Action  ,          . <br> <br> <font color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="gray">Source Code Highlighter</font></a> .</font></code></code></code> </h4> <code><code><font color="black">[ <font color="#2B91AF">Serializable</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Result <br> { <br> [ <font color="#2B91AF">XmlAttribute</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Controller { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> [ <font color="#2B91AF">XmlAttribute</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Action { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> Data { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> } <br></font> <br> <br>       , ,       . <br>    Data     XmlModel,    ,           XmlInclude    XmlModel. <br>  XML-    : <br> <br> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">Result</font> <font color="#ff0000">Controller</font> <font color="#0000ff">="SomeController"</font> <font color="#ff0000">Action</font> <font color="#0000ff">="SomeAction"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!--     --&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Result</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>  <br>       ActionResult.       ,    .       c XML-,   : <br> <br> <code><font color="black"><font color="#0000ff">private</font> <font color="#0000ff">string</font> _data; <br> <font color="#0000ff">public</font> XmlResult( <font color="#0000ff">string</font> data) <br> { <br> _data = data; <br> }</font> <br></code> <br>  ,    - ExecuteResult.    .        : <br> <br> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> ExecuteResult(ControllerContext controllerContext) <br> { <br> <font color="#0000ff">var</font> xslTransform = <font color="#0000ff">new</font> XslCompiledTransform(); <br> <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> controller = controllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> action = controllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> templatePath = <font color="#0000ff">string</font> .Format( <font color="#A31515">"~/Views/{0}/{1}.xsl"</font> , controller, action); <br> <font color="#0000ff">var</font> virtualFile = HostingEnvironment.VirtualPathProvider.GetFile(templatePath); <br> <font color="#008000">//     :</font> <br> <font color="#008000">//var virtualFile = HostingEnvironment.VirtualPathProvider.GetFile("~/Views/default.xsl");</font> <br> <font color="#0000ff">var</font> xmlReader = XmlReader.Create(virtualFile.Open()); <br> xslTransform.Load(xmlReader); <br> xmlReader.Close(); <br> <br> <font color="#0000ff">var</font> stringReader = <font color="#0000ff">new</font> <font color="#2B91AF">StringReader</font> (_data); <br> xmlReader = XmlReader.Create(stringReader); <br> <br> <font color="#008000">// XML-       http- </font> <br> <font color="#0000ff">var</font> xmlWriter = XmlWriter.Create(controllerContext. <font color="#2B91AF">HttpContext</font> .Response.OutputStream); <br> xslTransform.Transform(xmlReader, xmlWriter); <br> <br> stringReader.Close(); <br> xmlReader.Close(); <br> xmlWriter.Close(); <br> } <br></font> <br></code> <br>     : <br> <br> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> XmlResult : ActionResult <br> { <br> <font color="#0000ff">private</font> <font color="#0000ff">string</font> _data; <br> <br> <font color="#0000ff">public</font> XmlResult( <font color="#0000ff">string</font> data) <br> { <br> _data = data; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> ExecuteResult(ControllerContext controllerContext) <br> { <br> <font color="#0000ff">var</font> xslTransform = <font color="#0000ff">new</font> XslCompiledTransform(); <br> <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> controller = controllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> action = controllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> templatePath = <font color="#0000ff">string</font> .Format( <font color="#A31515">"~/Views/{0}/{1}.xsl"</font> , controller, action); <br> <font color="#0000ff">var</font> virtualFile = HostingEnvironment.VirtualPathProvider.GetFile(templatePath); <br> <font color="#008000">//     :</font> <br> <font color="#008000">//var virtualFile = HostingEnvironment.VirtualPathProvider.GetFile("~/Views/default.xsl");</font> <br> <font color="#0000ff">var</font> xmlReader = XmlReader.Create(virtualFile.Open()); <br> xslTransform.Load(xmlReader); <br> xmlReader.Close(); <br> <br> <font color="#0000ff">var</font> stringReader = <font color="#0000ff">new</font> <font color="#2B91AF">StringReader</font> (_data); <br> xmlReader = XmlReader.Create(stringReader); <br> <br> <font color="#008000">// XML-       http- </font> <br> <font color="#0000ff">var</font> xmlWriter = XmlWriter.Create(controllerContext. <font color="#2B91AF">HttpContext</font> .Response.OutputStream); <br> xslTransform.Transform(xmlReader, xmlWriter); <br> <br> stringReader.Close(); <br> xmlReader.Close(); <br> xmlWriter.Close(); <br> } <br> } <br></font> <br></code> <br>      . <br>     ViewData,     : <br> <br> <code><code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">new</font> <font color="#2B91AF">List</font> ViewData = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> (); <br> <br>     View,     ActionResult  .             : <br> <br> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">new</font> ActionResult View() <br> { <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> result = <font color="#0000ff">new</font> Result <br> { <br> Controller = ControllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Action = ControllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Data = ViewData <br> }; <br> <font color="#0000ff">var</font> xmlSerializer = <font color="#0000ff">new</font> XmlSerializer( <font color="#0000ff">typeof</font> (Result)); <br> <font color="#0000ff">var</font> stringWriter = <font color="#0000ff">new</font> <font color="#2B91AF">StringWriter</font> (); <br> xmlSerializer.Serialize(stringWriter, result); <br> stringWriter.Close(); <br> <font color="#008000">//    ActionResult</font> <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> XmlResult(stringWriter.ToString()); <br> }</font> <br></font></code> <br>      : <br> <br> <code><code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> XsltController : Controller <br> { <br> <font color="#0000ff">public</font> <font color="#0000ff">new</font> <font color="#2B91AF">List</font> ViewData = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> (); <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">new</font> ActionResult View() <br> { <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> result = <font color="#0000ff">new</font> Result <br> { <br> Controller = ControllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Action = ControllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Data = ViewData <br> }; <br> <font color="#0000ff">var</font> xmlSerializer = <font color="#0000ff">new</font> XmlSerializer( <font color="#0000ff">typeof</font> (Result)); <br> <font color="#0000ff">var</font> stringWriter = <font color="#0000ff">new</font> <font color="#2B91AF">StringWriter</font> (); <br> xmlSerializer.Serialize(stringWriter, result); <br> stringWriter.Close(); <br> <font color="#008000">//    ActionResult</font> <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> XmlResult(stringWriter.ToString()); <br> } <br> } <br> <br>        : <br> <br> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> HomeController : XsltController <br> { <br> <font color="#0000ff">public</font> ActionResult Index() <br> { <br> <font color="#0000ff">var</font> user = <font color="#0000ff">new</font> UserModel { UserId = 1, Login = <font color="#A31515">"root"</font> , Email = <font color="#A31515">"noreply@localhost"</font> }; <br> ViewData.Add(user); <br> <font color="#0000ff">return</font> View(); <br> } <br> }</font> <br></font></code> <br>       .       XML: <br> <br> <code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-16"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Result</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#ff0000">xmlns:xsd</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema"</font> <font color="#ff0000">Controller</font> <font color="#0000ff">="Home"</font> <font color="#ff0000">Action</font> <font color="#0000ff">="Index"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">XmlModel</font> <font color="#ff0000">xsi:type</font> <font color="#0000ff">="UserModel"</font> <font color="#ff0000">UserId</font> <font color="#0000ff">="1"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Login</font> <font color="#0000ff">&gt;</font> root <font color="#0000ff">&lt;/</font> <font color="#800000">Login</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Email</font> <font color="#0000ff">&gt;</font> noreply@localhost <font color="#0000ff">&lt;/</font> <font color="#800000">Email</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">XmlModel</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Result</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>  <br>    XSLT-,       : <br> <br> <code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:stylesheet</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">xmlns:xsl</font> <font color="#0000ff">="http://www.w3.org/1999/XSL/Transform"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:output</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> <br> <font color="#ff0000">method</font> <font color="#0000ff">="xml"</font> <br> <font color="#ff0000">media-type</font> <font color="#0000ff">="application/xhtml+xml"</font> <br> <font color="#ff0000">doctype-public</font> <font color="#0000ff">="-//W3C//DTD XHTML 1.1//EN"</font> <br> <font color="#ff0000">doctype-system</font> <font color="#0000ff">="http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:template</font> <font color="#ff0000">match</font> <font color="#0000ff">="/"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://www.w3.org/1999/xhtml"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">meta</font> <font color="#ff0000">http-equiv</font> <font color="#0000ff">="Content-Type"</font> <font color="#ff0000">content</font> <font color="#0000ff">="application/xhtml+xml; charset=utf-8"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> XSLT + MVC <font color="#0000ff">&lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Controller: <font color="#0000ff">&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="/Result/@Controller"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Action: <font color="#0000ff">&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="/Result/@Action"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> User: <font color="#0000ff">&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="//XmlModel[@xsi:type = 'UserModel']/Login"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:template</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:stylesheet</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>        HTML-: <br> <br> <code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://www.w3.org/1999/xhtml"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">meta</font> <font color="#ff0000">http-equiv</font> <font color="#0000ff">="Content-Type"</font> <font color="#ff0000">content</font> <font color="#0000ff">="application/xhtml+xml; charset=utf-8"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> XSLT + MVC <font color="#0000ff">&lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Controller: Home <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Action: Index <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> User: root <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>  ,      ,     ,        .   Controller  Action  ,          . <br> <br> <font color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="gray">Source Code Highlighter</font></a> .</font></code></code></code> <h4> <code><code><code><code><font color="black">[ <font color="#2B91AF">Serializable</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Result <br> { <br> [ <font color="#2B91AF">XmlAttribute</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Controller { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> [ <font color="#2B91AF">XmlAttribute</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Action { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> Data { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> } <br></font> <br> <br>       , ,       . <br>    Data     XmlModel,    ,           XmlInclude    XmlModel. <br>  XML-    : <br> <br> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">Result</font> <font color="#ff0000">Controller</font> <font color="#0000ff">="SomeController"</font> <font color="#ff0000">Action</font> <font color="#0000ff">="SomeAction"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!--     --&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Result</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>  <br>       ActionResult.       ,    .       c XML-,   : <br> <br> <code><font color="black"><font color="#0000ff">private</font> <font color="#0000ff">string</font> _data; <br> <font color="#0000ff">public</font> XmlResult( <font color="#0000ff">string</font> data) <br> { <br> _data = data; <br> }</font> <br></code> <br>  ,    - ExecuteResult.    .        : <br> <br> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> ExecuteResult(ControllerContext controllerContext) <br> { <br> <font color="#0000ff">var</font> xslTransform = <font color="#0000ff">new</font> XslCompiledTransform(); <br> <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> controller = controllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> action = controllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> templatePath = <font color="#0000ff">string</font> .Format( <font color="#A31515">"~/Views/{0}/{1}.xsl"</font> , controller, action); <br> <font color="#0000ff">var</font> virtualFile = HostingEnvironment.VirtualPathProvider.GetFile(templatePath); <br> <font color="#008000">//     :</font> <br> <font color="#008000">//var virtualFile = HostingEnvironment.VirtualPathProvider.GetFile("~/Views/default.xsl");</font> <br> <font color="#0000ff">var</font> xmlReader = XmlReader.Create(virtualFile.Open()); <br> xslTransform.Load(xmlReader); <br> xmlReader.Close(); <br> <br> <font color="#0000ff">var</font> stringReader = <font color="#0000ff">new</font> <font color="#2B91AF">StringReader</font> (_data); <br> xmlReader = XmlReader.Create(stringReader); <br> <br> <font color="#008000">// XML-       http- </font> <br> <font color="#0000ff">var</font> xmlWriter = XmlWriter.Create(controllerContext. <font color="#2B91AF">HttpContext</font> .Response.OutputStream); <br> xslTransform.Transform(xmlReader, xmlWriter); <br> <br> stringReader.Close(); <br> xmlReader.Close(); <br> xmlWriter.Close(); <br> } <br></font> <br></code> <br>     : <br> <br> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> XmlResult : ActionResult <br> { <br> <font color="#0000ff">private</font> <font color="#0000ff">string</font> _data; <br> <br> <font color="#0000ff">public</font> XmlResult( <font color="#0000ff">string</font> data) <br> { <br> _data = data; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> ExecuteResult(ControllerContext controllerContext) <br> { <br> <font color="#0000ff">var</font> xslTransform = <font color="#0000ff">new</font> XslCompiledTransform(); <br> <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> controller = controllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> action = controllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> templatePath = <font color="#0000ff">string</font> .Format( <font color="#A31515">"~/Views/{0}/{1}.xsl"</font> , controller, action); <br> <font color="#0000ff">var</font> virtualFile = HostingEnvironment.VirtualPathProvider.GetFile(templatePath); <br> <font color="#008000">//     :</font> <br> <font color="#008000">//var virtualFile = HostingEnvironment.VirtualPathProvider.GetFile("~/Views/default.xsl");</font> <br> <font color="#0000ff">var</font> xmlReader = XmlReader.Create(virtualFile.Open()); <br> xslTransform.Load(xmlReader); <br> xmlReader.Close(); <br> <br> <font color="#0000ff">var</font> stringReader = <font color="#0000ff">new</font> <font color="#2B91AF">StringReader</font> (_data); <br> xmlReader = XmlReader.Create(stringReader); <br> <br> <font color="#008000">// XML-       http- </font> <br> <font color="#0000ff">var</font> xmlWriter = XmlWriter.Create(controllerContext. <font color="#2B91AF">HttpContext</font> .Response.OutputStream); <br> xslTransform.Transform(xmlReader, xmlWriter); <br> <br> stringReader.Close(); <br> xmlReader.Close(); <br> xmlWriter.Close(); <br> } <br> } <br></font> <br></code> <br>      . <br>     ViewData,     : <br> <br> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">new</font> <font color="#2B91AF">List</font> ViewData = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> (); <br> <br>     View,     ActionResult  .             : <br> <br> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">new</font> ActionResult View() <br> { <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> result = <font color="#0000ff">new</font> Result <br> { <br> Controller = ControllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Action = ControllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Data = ViewData <br> }; <br> <font color="#0000ff">var</font> xmlSerializer = <font color="#0000ff">new</font> XmlSerializer( <font color="#0000ff">typeof</font> (Result)); <br> <font color="#0000ff">var</font> stringWriter = <font color="#0000ff">new</font> <font color="#2B91AF">StringWriter</font> (); <br> xmlSerializer.Serialize(stringWriter, result); <br> stringWriter.Close(); <br> <font color="#008000">//    ActionResult</font> <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> XmlResult(stringWriter.ToString()); <br> }</font> <br></font></code> <br>      : <br> <br> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> XsltController : Controller <br> { <br> <font color="#0000ff">public</font> <font color="#0000ff">new</font> <font color="#2B91AF">List</font> ViewData = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> (); <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">new</font> ActionResult View() <br> { <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> result = <font color="#0000ff">new</font> Result <br> { <br> Controller = ControllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Action = ControllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Data = ViewData <br> }; <br> <font color="#0000ff">var</font> xmlSerializer = <font color="#0000ff">new</font> XmlSerializer( <font color="#0000ff">typeof</font> (Result)); <br> <font color="#0000ff">var</font> stringWriter = <font color="#0000ff">new</font> <font color="#2B91AF">StringWriter</font> (); <br> xmlSerializer.Serialize(stringWriter, result); <br> stringWriter.Close(); <br> <font color="#008000">//    ActionResult</font> <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> XmlResult(stringWriter.ToString()); <br> } <br> } <br> <br>        : <br> <br> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> HomeController : XsltController <br> { <br> <font color="#0000ff">public</font> ActionResult Index() <br> { <br> <font color="#0000ff">var</font> user = <font color="#0000ff">new</font> UserModel { UserId = 1, Login = <font color="#A31515">"root"</font> , Email = <font color="#A31515">"noreply@localhost"</font> }; <br> ViewData.Add(user); <br> <font color="#0000ff">return</font> View(); <br> } <br> }</font> <br></font></code> <br>       .       XML: <br> <br> <code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-16"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Result</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#ff0000">xmlns:xsd</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema"</font> <font color="#ff0000">Controller</font> <font color="#0000ff">="Home"</font> <font color="#ff0000">Action</font> <font color="#0000ff">="Index"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">XmlModel</font> <font color="#ff0000">xsi:type</font> <font color="#0000ff">="UserModel"</font> <font color="#ff0000">UserId</font> <font color="#0000ff">="1"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Login</font> <font color="#0000ff">&gt;</font> root <font color="#0000ff">&lt;/</font> <font color="#800000">Login</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Email</font> <font color="#0000ff">&gt;</font> noreply@localhost <font color="#0000ff">&lt;/</font> <font color="#800000">Email</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">XmlModel</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Result</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>  <br>    XSLT-,       : <br> <br> <code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:stylesheet</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">xmlns:xsl</font> <font color="#0000ff">="http://www.w3.org/1999/XSL/Transform"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:output</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> <br> <font color="#ff0000">method</font> <font color="#0000ff">="xml"</font> <br> <font color="#ff0000">media-type</font> <font color="#0000ff">="application/xhtml+xml"</font> <br> <font color="#ff0000">doctype-public</font> <font color="#0000ff">="-//W3C//DTD XHTML 1.1//EN"</font> <br> <font color="#ff0000">doctype-system</font> <font color="#0000ff">="http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:template</font> <font color="#ff0000">match</font> <font color="#0000ff">="/"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://www.w3.org/1999/xhtml"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">meta</font> <font color="#ff0000">http-equiv</font> <font color="#0000ff">="Content-Type"</font> <font color="#ff0000">content</font> <font color="#0000ff">="application/xhtml+xml; charset=utf-8"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> XSLT + MVC <font color="#0000ff">&lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Controller: <font color="#0000ff">&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="/Result/@Controller"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Action: <font color="#0000ff">&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="/Result/@Action"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> User: <font color="#0000ff">&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="//XmlModel[@xsi:type = 'UserModel']/Login"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:template</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:stylesheet</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>        HTML-: <br> <br> <code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://www.w3.org/1999/xhtml"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">meta</font> <font color="#ff0000">http-equiv</font> <font color="#0000ff">="Content-Type"</font> <font color="#ff0000">content</font> <font color="#0000ff">="application/xhtml+xml; charset=utf-8"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> XSLT + MVC <font color="#0000ff">&lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Controller: Home <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Action: Index <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> User: root <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>  ,      ,     ,        .   Controller  Action  ,          . <br> <br> <font color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="gray">Source Code Highlighter</font></a> .</font></code></code></code> </h4> <code><code><code><code><font color="black">[ <font color="#2B91AF">Serializable</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Result <br> { <br> [ <font color="#2B91AF">XmlAttribute</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Controller { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> [ <font color="#2B91AF">XmlAttribute</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Action { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> Data { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> } <br></font> <br> <br>       , ,       . <br>    Data     XmlModel,    ,           XmlInclude    XmlModel. <br>  XML-    : <br> <br> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">Result</font> <font color="#ff0000">Controller</font> <font color="#0000ff">="SomeController"</font> <font color="#ff0000">Action</font> <font color="#0000ff">="SomeAction"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!--     --&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Result</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>  <br>       ActionResult.       ,    .       c XML-,   : <br> <br> <code><font color="black"><font color="#0000ff">private</font> <font color="#0000ff">string</font> _data; <br> <font color="#0000ff">public</font> XmlResult( <font color="#0000ff">string</font> data) <br> { <br> _data = data; <br> }</font> <br></code> <br>  ,    - ExecuteResult.    .        : <br> <br> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> ExecuteResult(ControllerContext controllerContext) <br> { <br> <font color="#0000ff">var</font> xslTransform = <font color="#0000ff">new</font> XslCompiledTransform(); <br> <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> controller = controllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> action = controllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> templatePath = <font color="#0000ff">string</font> .Format( <font color="#A31515">"~/Views/{0}/{1}.xsl"</font> , controller, action); <br> <font color="#0000ff">var</font> virtualFile = HostingEnvironment.VirtualPathProvider.GetFile(templatePath); <br> <font color="#008000">//     :</font> <br> <font color="#008000">//var virtualFile = HostingEnvironment.VirtualPathProvider.GetFile("~/Views/default.xsl");</font> <br> <font color="#0000ff">var</font> xmlReader = XmlReader.Create(virtualFile.Open()); <br> xslTransform.Load(xmlReader); <br> xmlReader.Close(); <br> <br> <font color="#0000ff">var</font> stringReader = <font color="#0000ff">new</font> <font color="#2B91AF">StringReader</font> (_data); <br> xmlReader = XmlReader.Create(stringReader); <br> <br> <font color="#008000">// XML-       http- </font> <br> <font color="#0000ff">var</font> xmlWriter = XmlWriter.Create(controllerContext. <font color="#2B91AF">HttpContext</font> .Response.OutputStream); <br> xslTransform.Transform(xmlReader, xmlWriter); <br> <br> stringReader.Close(); <br> xmlReader.Close(); <br> xmlWriter.Close(); <br> } <br></font> <br></code> <br>     : <br> <br> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> XmlResult : ActionResult <br> { <br> <font color="#0000ff">private</font> <font color="#0000ff">string</font> _data; <br> <br> <font color="#0000ff">public</font> XmlResult( <font color="#0000ff">string</font> data) <br> { <br> _data = data; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> ExecuteResult(ControllerContext controllerContext) <br> { <br> <font color="#0000ff">var</font> xslTransform = <font color="#0000ff">new</font> XslCompiledTransform(); <br> <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> controller = controllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> action = controllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> ; <br> <font color="#0000ff">var</font> templatePath = <font color="#0000ff">string</font> .Format( <font color="#A31515">"~/Views/{0}/{1}.xsl"</font> , controller, action); <br> <font color="#0000ff">var</font> virtualFile = HostingEnvironment.VirtualPathProvider.GetFile(templatePath); <br> <font color="#008000">//     :</font> <br> <font color="#008000">//var virtualFile = HostingEnvironment.VirtualPathProvider.GetFile("~/Views/default.xsl");</font> <br> <font color="#0000ff">var</font> xmlReader = XmlReader.Create(virtualFile.Open()); <br> xslTransform.Load(xmlReader); <br> xmlReader.Close(); <br> <br> <font color="#0000ff">var</font> stringReader = <font color="#0000ff">new</font> <font color="#2B91AF">StringReader</font> (_data); <br> xmlReader = XmlReader.Create(stringReader); <br> <br> <font color="#008000">// XML-       http- </font> <br> <font color="#0000ff">var</font> xmlWriter = XmlWriter.Create(controllerContext. <font color="#2B91AF">HttpContext</font> .Response.OutputStream); <br> xslTransform.Transform(xmlReader, xmlWriter); <br> <br> stringReader.Close(); <br> xmlReader.Close(); <br> xmlWriter.Close(); <br> } <br> } <br></font> <br></code> <br>      . <br>     ViewData,     : <br> <br> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">new</font> <font color="#2B91AF">List</font> ViewData = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> (); <br> <br>     View,     ActionResult  .             : <br> <br> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">new</font> ActionResult View() <br> { <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> result = <font color="#0000ff">new</font> Result <br> { <br> Controller = ControllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Action = ControllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Data = ViewData <br> }; <br> <font color="#0000ff">var</font> xmlSerializer = <font color="#0000ff">new</font> XmlSerializer( <font color="#0000ff">typeof</font> (Result)); <br> <font color="#0000ff">var</font> stringWriter = <font color="#0000ff">new</font> <font color="#2B91AF">StringWriter</font> (); <br> xmlSerializer.Serialize(stringWriter, result); <br> stringWriter.Close(); <br> <font color="#008000">//    ActionResult</font> <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> XmlResult(stringWriter.ToString()); <br> }</font> <br></font></code> <br>      : <br> <br> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> XsltController : Controller <br> { <br> <font color="#0000ff">public</font> <font color="#0000ff">new</font> <font color="#2B91AF">List</font> ViewData = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> (); <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">new</font> ActionResult View() <br> { <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> result = <font color="#0000ff">new</font> Result <br> { <br> Controller = ControllerContext.RouteData.Values[ <font color="#A31515">"controller"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Action = ControllerContext.RouteData.Values[ <font color="#A31515">"action"</font> ] <font color="#0000ff">as</font> <font color="#0000ff">string</font> , <br> Data = ViewData <br> }; <br> <font color="#0000ff">var</font> xmlSerializer = <font color="#0000ff">new</font> XmlSerializer( <font color="#0000ff">typeof</font> (Result)); <br> <font color="#0000ff">var</font> stringWriter = <font color="#0000ff">new</font> <font color="#2B91AF">StringWriter</font> (); <br> xmlSerializer.Serialize(stringWriter, result); <br> stringWriter.Close(); <br> <font color="#008000">//    ActionResult</font> <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> XmlResult(stringWriter.ToString()); <br> } <br> } <br> <br>        : <br> <br> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> HomeController : XsltController <br> { <br> <font color="#0000ff">public</font> ActionResult Index() <br> { <br> <font color="#0000ff">var</font> user = <font color="#0000ff">new</font> UserModel { UserId = 1, Login = <font color="#A31515">"root"</font> , Email = <font color="#A31515">"noreply@localhost"</font> }; <br> ViewData.Add(user); <br> <font color="#0000ff">return</font> View(); <br> } <br> }</font> <br></font></code> <br>       .       XML: <br> <br> <code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-16"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Result</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#ff0000">xmlns:xsd</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema"</font> <font color="#ff0000">Controller</font> <font color="#0000ff">="Home"</font> <font color="#ff0000">Action</font> <font color="#0000ff">="Index"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">XmlModel</font> <font color="#ff0000">xsi:type</font> <font color="#0000ff">="UserModel"</font> <font color="#ff0000">UserId</font> <font color="#0000ff">="1"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Login</font> <font color="#0000ff">&gt;</font> root <font color="#0000ff">&lt;/</font> <font color="#800000">Login</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Email</font> <font color="#0000ff">&gt;</font> noreply@localhost <font color="#0000ff">&lt;/</font> <font color="#800000">Email</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">XmlModel</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Data</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Result</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>  <br>    XSLT-,       : <br> <br> <code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:stylesheet</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">xmlns:xsl</font> <font color="#0000ff">="http://www.w3.org/1999/XSL/Transform"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:output</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> <br> <font color="#ff0000">method</font> <font color="#0000ff">="xml"</font> <br> <font color="#ff0000">media-type</font> <font color="#0000ff">="application/xhtml+xml"</font> <br> <font color="#ff0000">doctype-public</font> <font color="#0000ff">="-//W3C//DTD XHTML 1.1//EN"</font> <br> <font color="#ff0000">doctype-system</font> <font color="#0000ff">="http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:template</font> <font color="#ff0000">match</font> <font color="#0000ff">="/"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://www.w3.org/1999/xhtml"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">meta</font> <font color="#ff0000">http-equiv</font> <font color="#0000ff">="Content-Type"</font> <font color="#ff0000">content</font> <font color="#0000ff">="application/xhtml+xml; charset=utf-8"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> XSLT + MVC <font color="#0000ff">&lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Controller: <font color="#0000ff">&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="/Result/@Controller"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Action: <font color="#0000ff">&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="/Result/@Action"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> User: <font color="#0000ff">&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="//XmlModel[@xsi:type = 'UserModel']/Login"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:template</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:stylesheet</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>        HTML-: <br> <br> <code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://www.w3.org/1999/xhtml"</font> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">meta</font> <font color="#ff0000">http-equiv</font> <font color="#0000ff">="Content-Type"</font> <font color="#ff0000">content</font> <font color="#0000ff">="application/xhtml+xml; charset=utf-8"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> XSLT + MVC <font color="#0000ff">&lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Controller: Home <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> Action: Index <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> User: root <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font></font> <br></code> <br>  ,      ,     ,        .   Controller  Action  ,          . <br> <br> <font color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="gray">Source Code Highlighter</font></a> .</font></code></code></code> </div><p>Source: <a href="https://habr.com/ru/post/113218/">https://habr.com/ru/post/113218/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113212/index.html">Wikimedia Commons began uploading Google Art Project paintings, despite the fact that Google considers copyrighted photos.</a></li>
<li><a href="../113213/index.html">Debian GNU / Linux 6.0 released</a></li>
<li><a href="../113214/index.html">Rapid creation of a prototype web application in ASP.NET MVC 3 using MvcScaffolding</a></li>
<li><a href="../113215/index.html">Brainfuck compiler in .NET</a></li>
<li><a href="../113216/index.html">Asterisk: processing registration events on the server on the example of interaction with the VoIP-service "Multifon"</a></li>
<li><a href="../113219/index.html">Some tips for young programmers who decide to write their own operating system</a></li>
<li><a href="../113220/index.html">Graphic informer Yandex.Money for the site</a></li>
<li><a href="../113221/index.html">Wishlist instead of can-do and to-do lists</a></li>
<li><a href="../113222/index.html">Google Earth helped discover nearly 2,000 archaeological sites</a></li>
<li><a href="../113223/index.html">Activate disabled VT-x</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
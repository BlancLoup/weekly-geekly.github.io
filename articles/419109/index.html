<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Clarify for bangs" in Android P. What to do with Android Cutout?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="September 2007 burned. It was September 2017, Apple returned fashion to a bang by presenting an iPhone X. Not surprisingly, our friends from China, wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Clarify for bangs" in Android P. What to do with Android Cutout?</h1><div class="post__text post__text-html js-mediator-article"> <s>September 2007 burned.</s>  It was September 2017, Apple returned fashion to a bang by presenting an iPhone X. Not surprisingly, our friends from China, without thinking twice, copied this design from Apple (although the very first mini bang was still in Essential Phone, which didn‚Äôt take off).  But what do we see now?  Huawei P20, Asus Zenfone 5, OnePlus 6, Motorola One Power, Xiaomi Redmi 6 and other more or less well-known manufacturers have already released or announced phones with bangs.  Samsung and Google remained the last strongholds in this <s>race for the HYIP</s> fight for framelessness.  Or not?  According to rumors, Google Pixel 3 XL will also be <s>with this crap</s> with an elegant neckline.  Well, we, as developers, need only optimize our applications for this cut-out, so that users can continue to use them comfortably.  For details, I ask under the cat. <br><br><img src="https://habrastorage.org/webt/vc/za/ep/vczaephxhgg4entua42pcfj4rxa.png"><br><a name="habracut"></a><br>  First we need to figure out whether the application needs optimization at all. <br>  If you have a fullscreen application or a <code>windowActionBarOverlay = true</code> in the subject, then it is most likely needed. <br><br>  Almost all applications are far from a single screen, and you can not notice how one of them will go layout.  Especially if in application volumetric legacy code.  Therefore, you should still go through all the main screens and double-check.  Let's see what you need to do. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  1. Prepare a test device / emulator </h4><br>  In order to test your app with a bang, you need (thanks, cap!) Android P. Currently, Android P Preview 5 is available for the following devices (thanks to Project Treble): <br>  Essential Phone; <br>  Google Pixel 2; <br>  Google Pixel 2 XL; <br>  Google Pixel; <br>  Google Pixel XL; <br>  Nokia 7 plus; <br>  Oneplus 6; <br>  Oppo R15 Pro; <br>  Sony Xperia XZ2; <br>  Vivo X21UD; <br>  Vivo X21; <br>  Xiaomi Mi Mix 2S. <br><br>  To install Android P on your device, just go <a href="https://developer.android.com/preview/devices/">here</a> and click ‚ÄúGet beta‚Äù for your device.  Get it through the air or roll yourself - the choice is yours.  Instructions on the site is attached. <br>  But if you can not or do not want to install Android P on the device, then no one has canceled the emulator.  Instructions for setting up <a href="https://developer.android.com/preview/get">here</a> . <br><br><h4>  2. Include the very bang software (if there is no hardware) </h4><br>  Everything is simple: go to System -&gt; Developer options -&gt; Simulate a display with a cutout. <br>  There are 3 options to choose from: <br><ul><li>  Corner </li><li>  Double </li><li>  Tall </li></ul><br><img src="https://habrastorage.org/webt/cz/oo/pw/czoopw-4xddmw5l5f9k9-obslpa.png" width="300"><br>  They look like this: <br><table><tbody><tr><th>  Corner </th><th>  Double </th><th>  Tall </th></tr><tr><td><img src="https://habrastorage.org/webt/hs/x2/4b/hsx24b9mdq9bf3i1wl50vycxpru.png"></td><td><img src="https://habrastorage.org/webt/pq/ta/hj/pqtahjumpjjnulq24ir5deudl0m.png"></td><td><img src="https://habrastorage.org/webt/i0/he/f9/i0hef98an6wlx95vlg71evri_9s.png"></td></tr></tbody></table><br><h4>  3. Go through the main screens </h4><br>  Of course, this case will all be different.  Someone simple logic, someone not very.  I will give a couple of examples of screens with a go-through layout, which I found in our application. <br><table><tbody><tr><th>  Explore </th><th>  Profile </th></tr><tr><td><img src="https://habrastorage.org/webt/br/8w/nb/br8wnbapotdaxbd9gwevvq7gqgq.png" width="300"></td><td><img src="https://habrastorage.org/webt/lq/th/bm/lqthbm55j1rexitpvdjhbwmtvla.png" width="300"></td></tr></tbody></table><br>  Now let's see what there are ways to eliminate the shortcomings of the layout. <br><br><h4>  Not raising compileSdkVersion </h4>  Starting with the 20th API, the <a href="https://developer.android.com/reference/android/view/WindowInsets">WindowInsets</a> class appeared, which is <a href="https://developer.android.com/reference/android/graphics/Rect">Rect objects</a> that describe accessible and inaccessible parts of the screen.  Together with them in the View appeared such methods, with the help of which we can process the coordinates of inaccessible parts of the screen: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">WindowInsets </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispatchApplyWindowInsets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(WindowInsets)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">WindowInsets </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onApplyWindowInsets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(WindowInsets)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">requestApplyInsets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setOnApplyWindowInsetsListener</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(OnApplyWindowInsetsListener)</span></span></span></span>;</code> </pre> <br>  Details on how to use them, <a href="https://medium.com/%40azizbekian/windowinsets-24e241d4afb9">here</a> . <br><br>  There are two ways to use these methods: <br>  a) put the <code>android:fitsSystemWindows="true"</code> tag <code>android:fitsSystemWindows="true"</code> in the layout on your layout or view; <br>  b) do it from the code: <br><br><pre> <code class="java hljs">layout.setFitsSystemWindows(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); layout.requestApplyInsets();</code> </pre> <br><table><tbody><tr><th>  It was </th><th>  It became </th></tr><tr><td><img src="https://habrastorage.org/webt/fw/8e/ne/fw8ene_z6sxphxdncb9yzcxjdu4.png" width="300"></td><td><img src="https://habrastorage.org/webt/hv/ml/jm/hvmljmblq51npqv32f7o_lcjnj8.png" width="300"></td></tr></tbody></table><br><h4>  Increase compileSdkVersion to version 28 </h4>  In the near future we will have to switch to this version, so why not prepare for it now?  But be careful, if you have unit tests in the project (and I hope you have them), the JUnit package has moved.  How to connect it, described <a href="https://developer.android.com/preview/features/legacy-testing-libs">here</a> . <br><br>  So, what options does Android P now provide us with? <br><br>  A. WindowManager.LayoutParams has 3 new flags: <br><ul><li>  <a href="https://developer.android.com/reference/android/view/WindowManager.LayoutParams">LAYOUT_IN_DISPLAY_CUTOUT_MODE_DEFAULT</a> - with this flag the bang will be on top of the application screen only in portrait mode, in the landscape there will be just a black bar; <br><img src="https://habrastorage.org/webt/lq/th/bm/lqthbm55j1rexitpvdjhbwmtvla.png" width="300"><br><img src="https://habrastorage.org/webt/6r/uc/ne/6rucneby85bjrq9wt5uc9n6rpbw.png" height="300"></li><li>  <a href="https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html">LAYOUT_IN_DISPLAY_CUTOUT_MODE_NEVER</a> - with this flag fashionable bangs will not be at all, it will merge with the black stripe; <br><img src="https://habrastorage.org/webt/qh/1s/nb/qh1snbun-pzldcfc9hotrbwfsms.png" width="300"><br><img src="https://habrastorage.org/webt/-d/at/s2/-dats2qzjrvzs-nhyxgwcngaf7q.png" height="300"></li><li>  <a href="https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html">LAYOUT_IN_DISPLAY_CUTOUT_MODE_SHORT_EDGES</a> - with this flag the bang is always and in any orientation. <br><img src="https://habrastorage.org/webt/ow/7w/my/ow7wmyne6fan2tkiu9skhw-fhqg.png" width="300"><br><img src="https://habrastorage.org/webt/--/us/i2/--usi2coxgmmtdja8wzb8lapbqe.png" height="300"></li></ul><br>  How to apply? <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">window</span></span>.attributes.layoutInDisplayCutoutMode = WindowManager.LayoutParams.LAYOUT_IN_DISPLAY_CUTOUT_MODE_SHORT_EDGES</code> </pre> <br>  B. If option A does not suit you and you need to take into account the location of the ill-fated cut-out (for example, you have something displayed directly in the status bar, as messages on the connection in the Telegram), then the new class <a href="https://developer.android.com/reference/android/view/DisplayCutout">DisplayCutout</a> will help in this case. <br>  Consider his methods: <br><ul><li>  <a href="https://developer.android.com/reference/android/view/DisplayCutout.html">getBoundingRects ()</a> returns a List of Rect objects, each of which indicates an inaccessible screen area; </li><li>  <a href="https://developer.android.com/reference/android/view/DisplayCutout.html">getSafeInsetLeft ()</a> , <a href="https://developer.android.com/reference/android/view/DisplayCutout.html">getSafeInsetRight ()</a> , <a href="https://developer.android.com/reference/android/view/DisplayCutout.html">getSafeInsetTop ()</a> , <a href="https://developer.android.com/reference/android/view/DisplayCutout.html">getSafeInsetBottom ()</a> returns the left, right, upper, and lower indent without cut in pixels, respectively. </li></ul><br>  With them you can already do everything that is enough imagination.  Want to - move the <code>margin</code> in the code for them.  Want - process in <code>OnApplyWindowInsetsListener</code> and do <code>consumeDisplayCutout()</code> .  Perhaps you need more complex manipulations.  I will give a simple example of how to denote the fringe. <br><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SampleFragment</span></span></span><span class="hljs-class">() : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Fragment</span></span></span><span class="hljs-class">() { private lateinit var root: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ViewGroup</span></span></span><span class="hljs-class"> override fun onCreateView(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">inflater</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LayoutInflater</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">container</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ViewGroup</span></span></span><span class="hljs-class">?, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">savedInstanceState</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bundle</span></span></span><span class="hljs-class">?): </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">View</span></span></span><span class="hljs-class">? { return inflater.inflate(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">R</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">layout</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sample_fragment</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">container</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">false</span></span></span><span class="hljs-class">) } override fun onViewCreated(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">view</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">View</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">savedInstanceState</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bundle</span></span></span><span class="hljs-class">?) { super.onViewCreated(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">view</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">savedInstanceState</span></span></span><span class="hljs-class">) root = view.findViewById(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">R</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">root</span></span></span><span class="hljs-class">) addArrowsToCutout() } private fun addArrowsToCutout() { // ,      attach  window,    null' val cutoutList = root.rootWindowInsets?.displayCutout?.boundingRects cutoutList?.forEach { addArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">!!.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getDrawable</span></span></span><span class="hljs-class">(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">R</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">drawable</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">left</span></span></span><span class="hljs-class">), it.left.toFloat(), it.top + (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bottom</span></span></span><span class="hljs-class"> - </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">top</span></span></span><span class="hljs-class">).toFloat() / 2, ::calculateLeftArrow) addArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">!!.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getDrawable</span></span></span><span class="hljs-class">(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">R</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">drawable</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">right</span></span></span><span class="hljs-class">), it.right.toFloat(), it.top + (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bottom</span></span></span><span class="hljs-class"> - </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">top</span></span></span><span class="hljs-class">).toFloat() / 2, ::calculateRightArrow) addArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">!!.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getDrawable</span></span></span><span class="hljs-class">(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">R</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">drawable</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">top</span></span></span><span class="hljs-class">), it.left + (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">right</span></span></span><span class="hljs-class"> - </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">left</span></span></span><span class="hljs-class">).toFloat() / 2, it.top.toFloat(), ::calculateTopArrow) addArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">!!.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getDrawable</span></span></span><span class="hljs-class">(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">R</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">drawable</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bottom</span></span></span><span class="hljs-class">), it.left + (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">right</span></span></span><span class="hljs-class"> - </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">left</span></span></span><span class="hljs-class">).toFloat() / 2, it.bottom.toFloat(), ::calculateBottomArrow) } } private fun addArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowIcon</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drawable</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">y</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">calculation</span></span></span><span class="hljs-class">: (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">View</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">) -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Unit</span></span></span><span class="hljs-class">) { val arrowView = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ImageView</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">) arrowView.setImageDrawable(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowIcon</span></span></span><span class="hljs-class">) arrowView.layoutParams = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ViewGroup</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LayoutParams</span></span></span><span class="hljs-class">(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ViewGroup</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LayoutParams</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WRAP_CONTENT</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ViewGroup</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LayoutParams</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WRAP_CONTENT</span></span></span><span class="hljs-class">) root.addView(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowView</span></span></span><span class="hljs-class">) arrowView.post { calculation(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowView</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">y</span></span></span><span class="hljs-class">) } } private fun calculateLeftArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowView</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">View</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">y</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">) { arrowView.x = x - arrowView.width arrowView.y = y - arrowView.height / 2 } private fun calculateRightArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowView</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">View</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">y</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">) { arrowView.x = x arrowView.y = y - arrowView.height / 2 } private fun calculateTopArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowView</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">View</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">y</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">) { arrowView.x = x - arrowView.width / 2 arrowView.y = y - arrowView.height } private fun calculateBottomArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowView</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">View</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">y</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">) { arrowView.x = x - arrowView.width / 2 arrowView.y = y } }</span></span></code> </pre> <br><h4>  Portrait </h4><br><table><tbody><tr><th>  Corner </th><th>  Double </th><th>  Tall </th></tr><tr><td><img src="https://habrastorage.org/webt/l2/kn/kr/l2knkrhjztwt4-gol5kv3lhl9fc.png"></td><td><img src="https://habrastorage.org/webt/ok/wd/9z/okwd9zs9neutlmyxurbsg2dggzc.png"></td><td><img src="https://habrastorage.org/webt/zy/d8/z-/zyd8z-0amk-izvnypdvyyhqbpkc.png"></td></tr></tbody></table><br><br><h4>  Landscape </h4><br><table><tbody><tr><th>  Corner </th></tr><tr><td><img src="https://habrastorage.org/webt/bw/ex/ii/bwexii25tezwsfe6zv98rai8xrw.png" height="300"></td></tr><tr><th>  Double </th></tr><tr><td><img src="https://habrastorage.org/webt/a9/dp/qo/a9dpqomfrbf7tp8tuv4oqaii8ac.png" height="300"></td></tr><tr><th>  Tall </th></tr><tr><td><img src="https://habrastorage.org/webt/tc/cp/qj/tccpqj2m8eh2kshlsu_o-q2-kda.png" height="300"></td></tr></tbody></table><br>  So, as we see, the bang will bring us some inconvenience and make us perform extra gestures / additional manipulations.  In principle, everything is solved.  The main thing is to start eliminating the shortcomings of the layout as early as possible in order to have enough time to prepare.  Good luck with the edits.  Do not break your Google Play! </div><p>Source: <a href="https://habr.com/ru/post/419109/">https://habr.com/ru/post/419109/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../419095/index.html">We write CSS better and more beautiful</a></li>
<li><a href="../419099/index.html">WebSockets in Angular. Part 2. Product Solutions</a></li>
<li><a href="../419103/index.html">Writing a simple Lisp translator - I</a></li>
<li><a href="../419105/index.html">Link to the broadcast Slurm (intense by Kubernetes)</a></li>
<li><a href="../419107/index.html">Overview of the Dell EMC Unity File Part and Configuration Examples</a></li>
<li><a href="../419111/index.html">Digest of grocery design, July 2018</a></li>
<li><a href="../419115/index.html">Boot CD and retro play in one tweet</a></li>
<li><a href="../419117/index.html">‚ÄúI find it difficult to understand the motivation of a data scientist who does not see beauty in mathematics‚Äù - Kirill Danilyuk, Data Scientist</a></li>
<li><a href="../419119/index.html">Montblanc Premium Premium Pen - The Most Expensive Smart Pen Today</a></li>
<li><a href="../419121/index.html">LEMP stack with PHP 7 on CentOS 7 + Let's Encrypt on Google Cloud for deploying the Symfony 4 application</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Examination of gzip compression and CPU usage</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article ‚ÄúHow gzip-compression affects server performance‚Äù caused an understandable, but somewhat ambiguous reaction, because it was not clear how ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Examination of gzip compression and CPU usage</h1><div class="post__text post__text-html js-mediator-article">  The article <a href="http://webo.in/articles/habrahabr/30-gzip-versus-broadband/">‚ÄúHow gzip-compression affects server performance‚Äù</a> caused an understandable, but somewhat ambiguous reaction, because it was not clear how much the cost of gzip depends on the degree of compression and how to predict it taking into account all the other parameters.  I want to say a special thank you <a href="http://alfa.habrahabr.ru/" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/comment_images/62f/90e/993/62f90e993020da8f10b24d2e0270c78c.gif" alt=" " title="view profile"></a>  <a href="http://alfa.habrahabr.ru/" rel="nofollow">alfa</a> , which, in fact, raised this question. <br><br>  So, a new series of tests was aimed at establishing a relationship between compression ratios, processor overhead, and decreasing file size in order to make an <a href="http://webo.in/tools/gzip-cpu/">analytical tool for calculating the optimal compression ratio</a> based on this data. <br><a name="habracut"></a><br><h2>  Technique </h2><br><br>  <a href="http://webo.in/articles/habrahabr/30-gzip-versus-broadband/">As before</a> , the server conducted a series of tests with 10,000 iterations each.  The gzip runtime was measured at various degrees of compression.  Then it was averaged over the series, and the costs of working with the file system were subtracted from it ( <a href="http://webo.in/articles/habrahabr/30-gzip-versus-broadband/">for more details about the costs in the previous article</a> ).  Also, the achieved reduction in file size was measured. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  results </h2><br><br>  For the dependence "processor time - compression ratio" the following graph was obtained.  The abscissa axis is the degree of compression, the ordinate is the elapsed time (average over the series): <br><br> <a href="http://chart.apis.google.com/chart%3Fchs%3D550x300%26cht%3Dlc%26chxt%3Dx,y%26chd%3Dt:3,13,23,40,53,67,77,93,100%26chxl%3D0:%7C1%7C2%7C3%7C4%7C5%7C6%7C7%7C8%7C9%7C1:%7C%7C8%25D0%25BC%25D1%2581%7C9%25D0%25BC%25D1%2581%7C10%25D0%25BC%25D1%2581%7C11%25D0%25BC%25D1%2581%7C12%25D0%25BC%25D1%2581%7C13%25D0%25BC%25D1%2581%7C14%25D0%25BC%25D1%2581%7C15%25D0%25BC%25D1%2581%7C16%25D0%25BC%25D1%2581%7C17%25D0%25BC%25D1%2581%26chco%3DD0EB55%26chg%3D12.5,10%26chf%3Dbg,s,FFFFFF%26chls%3D2%7C2%7C2"><img src="https://habrastorage.org/getpro/habr/olpictures/90e/60a/3c9/90e60a3c9a5ccc2327abbbd644f02799.png" width="450" height="245" alt="  gzip   " title="The cost of gzip on the degree of compression"></a> <br><br>  <em>Figure 1. The cost of gzip on compression ratio</em> <br><br>  Next, a graph of the effectiveness of the resulting compression (in% of the original file size) on the compression ratio: <br><br> <a href="http://chart.apis.google.com/chart%3Fchs%3D550x300%26cht%3Dlc%26chxt%3Dx,y%26chd%3Dt:5,22,40,61,81,92,93,94,94%26chxl%3D0:%7C1%7C2%7C3%7C4%7C5%7C6%7C7%7C8%7C9%7C1:%7C%7C84%25%7C85%25%7C86%25%7C87%25%7C88%25%26chco%3DD0EB55%26chg%3D12.5,20%26chf%3Dbg,s,FFFFFF%26chls%3D2%7C2%7C2"><img src="https://habrastorage.org/getpro/habr/olpictures/76b/8dc/e05/76b8dce05776c802291ab958b54a1f66.png" width="450" height="245" alt="   gzip-" title="Efficiency of various degrees of gzip compression"></a> <br><br>  <em>Figure 2. Efficiency of various degrees of gzip compression</em> <br><br><h2>  findings </h2><br><br>  The main conclusions do not differ from those obtained in the <a href="http://webo.in/articles/habrahabr/30-gzip-versus-broadband/">previous article</a> , however, we managed to clarify it somewhat (due to the fact that when specifying different degrees of compression, processor costs can vary many times).  All the findings are applied in the <a href="http://webo.in/tools/gzip-cpu/">following tool</a> to calculate the optimal degree of gzip compression for the server (and in general, the rationality of enabling gzip).  Parameters that can be varied: CPU 1 processor on the server (for gzip does not parallel), the CPU of the user machine and the characteristic speed of the channel among users.  Their various variants cover a rather wide range of possible cases, and the calculation error does not exceed 10%. <br><br>  <strong>A small note:</strong> if the size of text files on the server does not exceed 4Kb, the inclusion of gzip will not give a tangible performance gain at all. <br><br>  <em>Thanks to everyone who read the note.</em>  <em>If you have any suggestions for improving this tool, please write them.</em> </div><p>Source: <a href="https://habr.com/ru/post/24325/">https://habr.com/ru/post/24325/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../243241/index.html">From the life of the usability lab Mail.Ru Group</a></li>
<li><a href="../243243/index.html">What to read at your leisure: the gaming industry news digest for October</a></li>
<li><a href="../243245/index.html">Transactional hell</a></li>
<li><a href="../243247/index.html">9 basic principles of responsive web design</a></li>
<li><a href="../243249/index.html">xbmcswift2 - micro-framework for writing plug-ins to Kodi (XBMC)</a></li>
<li><a href="../243253/index.html">16 fun projects for your new Raspberry Pi</a></li>
<li><a href="../243255/index.html">Russian App Day - November 21 - Technopolis "Moscow"</a></li>
<li><a href="../243257/index.html">Google: recommendations for apps on Google Play</a></li>
<li><a href="../24326/index.html">‚ÄúCity Routes‚Äù: ice cream for children, and BMW for the boy!</a></li>
<li><a href="../243263/index.html">Running Lean. Retelling one of the best books about startups</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
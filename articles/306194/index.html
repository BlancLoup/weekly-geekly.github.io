<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÄúIs this your backup so tired?‚Äù *</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="* And what is your backup so stale? (Odessa) 



 Even the most expensive systems performing periodic backups (for example, every night) have one sign...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>‚ÄúIs this your backup so tired?‚Äù *</h1><div class="post__text post__text-html js-mediator-article">  * And what is your backup so stale?  (Odessa) <br><br><img src="https://habrastorage.org/files/4f9/a54/5c1/4f9a545c1be64b17882576ef440d19b7.jpg"><br><br>  Even the most expensive systems performing periodic backups (for example, every night) have one significant limitation: everything that was done on the computer since the last backup is not protected and will be irretrievably lost if the computer goes down. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Suppose, for example, yesterday the first part of ‚ÄúDead Souls‚Äù was written, and a backup copy was made at night.  And today the second part was written, and in an emotional outburst it was destroyed even before the time came for the next backup. <br><br>  To deal with such situations is called the technology of continuous backup (Continuous Data Protection, CDP).  Everything that is written to disk is simultaneously sent to the backup. <br><br>  Let's take a closer look at how this is done in the Arcserve RHA product (Replication and High Availability) using real examples in Windows and Linux environments. <br><a name="habracut"></a><br>  Content <br><br>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">Introduction</a> <br>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">1. Architecture</a> <br>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">2. Software installation</a> <br>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">2.1.</a>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">Installation of control components</a> <br>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">2.2.</a>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">Installing Managed Components on Windows</a> <br>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">2.3.</a>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">Installing Managed Components on Linux</a> <br>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">3. Data Recovery Experiments</a> <br>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">3.1.</a>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">Restore files to a specific point in time</a> <br>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">3.2.</a>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">Restore MS SQL database to a specific point in time</a> <br>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">3.3 Restoring MySQL database to Linux at a given point in time</a> <br>  <a href="https://habr.com/ru/company/arcserve/blog/306194/">4. Conclusion and advertising</a> <br><br><a name="p0"></a><br><h2>  Introduction </h2><br>  Suppose we have two servers. <br><br>  Battle server (Master) contains constantly updated data.  We follow the changes and keep a statement (journal) of changes in the form of "was -&gt; became", for example: <br><table><tbody><tr><th>  Time </th><th>  The contents of the file "wash" </th><th>  Change log </th></tr><tr><td>  10:30:51 </td><td>  MOM'S SOAP RAMA </td><td></td></tr><tr><td>  10:30:52 </td><td>  MOM SOAP PAP </td><td>  File ‚Äúwash‚Äù, offset 10, ‚ÄúRAM‚Äù -&gt; ‚ÄúPAP‚Äù </td></tr></tbody></table><br>  The change log is constantly sent to the backup server (Replica) and applied to its files.  Thus, the files of the combat and backup servers become identical. <br><br>  Some details: <br><ul><li>  Changes are tracked at the level of bytes, that is, when changing one byte, the log will contain information only about this byte, and not about the entire data block; </li><li>  The change log is sent over the usual IP network, that is, it is possible to spread the combat and standby servers over considerable distances, including to different cities; </li><li>  When the connection is broken, the data is accumulated in the buffer and, as soon as the connection is restored, will be transferred and applied to the backup server; </li><li> The change history (in a given amount, for example, the last 500 megabytes) is stored on the backup machine and can be applied in reverse order, returning the contents of the files to a state at a certain point in time. </li></ul><br><a name="p1"></a><br><h2>  1. Architecture </h2><br><img src="https://habrastorage.org/files/962/d33/341/962d33341b2343fc86d0a0d766b61514.gif"><br><br>  In order for the scheme described above to work, we will need to install on the Master and Replica machines a component called the Engine, which takes over the main job of tracking changes in files and replicating data from one machine to another. <br><br>  In order to configure the operation of these two engines, we will install the Control Service on another machine (Manager).  This machine is required only for configuration, receiving reports and running individual actions on managed machines.  It should not be permanently on. <br><br>  Finally, we will get the user interface by connecting the web browser with the management service and downloading a windows application from there. <br><br><a name="p2"></a><br><h2>  2. Software installation </h2><br>  Download Arcserve RHA ( <a href="">iso</a> or <a href="">zip</a> ) from the developer‚Äôs site (as indicated on <a href="https://arcserve.zendesk.com/hc/en-us/articles/205009209-RHA-R16-5-SP5-ARCSERVE-RHA-16-5-SP5">arcserve.zendesk.com/hc/en-us/articles/205009209-RHA-R16-5-SP5-ARCSERVE-RHA-16-5-SP5</a> ) : <br><br>  The product works for 30 days without license keys. <br><br><a name="p21"></a><br><h2>  2.1.  Installation of control components </h2><br>  Let's start with the fact that we install the Control Service on the controlling machine (Manager). <br><br>  It requires .NET Framework 3.5. <br><br><div class="spoiler">  <b class="spoiler_title">In Windows 2012R2, the .NET Framework 3.5 installs as follows.</b> <div class="spoiler_text">  In Server Manager, select Manage -&gt; Add Roles and Features.  Check the ‚Äú.NET Framework 3.5 Features‚Äù box. <br><br><img src="https://habrastorage.org/files/1b4/d1a/f28/1b4d1af28f334c719af5e48e698686aa.png"><br><br>  <b>Important!</b>  You need to explicitly indicate where the component is located on the Windows distribution.  To do this, on the next screen, click ‚ÄúSpecify an alternate source path‚Äù: <br><br><img src="https://habrastorage.org/files/0d9/012/471/0d90124715024deeaba7cb29484b353e.png"><br><br>  In my case, the path looks like this (D: - DVD with Windows distribution): <br><br><img src="https://habrastorage.org/files/9d7/ee7/c71/9d7ee7c71dc7443e9cb132aa539bca5d.png"><br></div></div><br><br>  Now, run Setup.exe from the Arcserve RHA distribution and select ‚ÄúInstall Components‚Äù: <br><br><img src="https://habrastorage.org/files/41c/edc/91b/41cedc91b211469aae2be55d79069382.png"><br><br>  On the next screen, select ‚ÄúInstall Arcserve RHA Control Service‚Äù.  (Feature: the words ‚ÄúInstall Arcserve RHA ...‚Äù cannot be clicked, but ‚Äú‚Ä¶ Control Service‚Äù is obtained): <br><br><img src="https://habrastorage.org/files/389/352/9d5/3893529d565f4ea6ad94a7d45b919167.png"><br><br>  Then click through several screens until we get to the SSL configuration.  For testing, we will not include SSL, but during work application you can add your certificate here or use a self-signed: <br><br><img src="https://habrastorage.org/files/85e/212/351/85e212351fd548b6be206f32234b452c.png"><br><br>  We will start the service on behalf of the Local System: <br><br><img src="https://habrastorage.org/files/e1a/495/c18/e1a495c18e614b9ba7dacb42cb67760b.png"><br><br>  The next screen concerns the possibility of having two control machines for increased fault tolerance.  For testing purposes, we limit ourselves to one: <br><br><img src="https://habrastorage.org/files/6a0/136/fc8/6a0136fc8c2a4010951d2c586b0981af.png"><br><br>  After the installation is completed, connect the Internet browser with the Manager machine on port 8088. You can login under a user who has local administrator rights on the Manager machine: <br><br><img src="https://habrastorage.org/files/14f/838/50e/14f83850e3f44ded879e09238b1fda1f.png"><br><br>  We will get access to the page on which statistics of work of various machines will be published.  But for real management, we need to download from this site and run the windows-based utility ‚ÄúArcserve RHA Manager‚Äù.  It can be run no longer on the server, but on a workstation (for example, Windows 7 or 10).  To download, click on the link ‚ÄúScenario Management‚Äù: <br><br><img src="https://habrastorage.org/files/c6f/5fe/ff0/c6f5feff083e43eda95af5002a71be3e.png"><br><br>  After the security warnings, the ‚ÄúArcserve RHA Manager‚Äù should start: <br><br><img src="https://habrastorage.org/files/7f4/819/dc5/7f4819dc547e42baae01386d5b829ed4.png"><br><br>  This program will continue to run only from a web page. <br><br><a name="p22"></a><br><h2>  2.2.  Installing Managed Components on Windows </h2><br>  On the machines Master and Replica install the working components - Engine. <br><br>  You can install them locally from the distribution kit, or you can remotely.  Remote installation on the server requires that the server has the ‚ÄúFile Server‚Äù role installed: <br><br><img src="https://habrastorage.org/files/97e/1a7/788/97e1a7788d0a44ccb25d3cd5e9c0ccc5.png"><br><br>  If the ‚ÄúFile Server‚Äù role is installed on the master and replica machines, then on the Manager machine we can refer to ‚Äú\\ master \ C $‚Äù and ‚Äú\\ replica \ C $‚Äù. <br><br>  From the Arcserve RHA Manager utility, which was discussed in the previous section, we start the remote installation using the ‚ÄúTools -&gt; Launch Remote Installer‚Äù menu. <br><br><img src="https://habrastorage.org/files/025/666/590/0256665908cd47db85cfb82302f2bc0d.png"><br><br>  On the next screen, click the ‚ÄúStart host discovery‚Äù button (1) and get a list of machines from the Active Directory cache. <br><br>  Select the master and replica machines and add them to the list of Engine installation candidates using the ‚ÄúAdd‚Äù button (3) <br><br><img src="https://habrastorage.org/files/f6b/1be/6fd/f6b1be6fd58b4ad5ae72ed238ee6c0ed.png"><br><br>  On the next screen, enter the user (domain administrator) under which the remote installation will be performed: <br><br><img src="https://habrastorage.org/files/b73/f9d/cad/b73f9dcade08458796aa772e38c02122.png"><br><br>  Next, we make sure that both servers (master and replica) allow you to perform a remote installation and are marked with checkmarks: <br><br><img src="https://habrastorage.org/files/680/457/b70/680457b703184f008bc197e96b9ab029.png"><br><br>  On the next screen, enter the user under which the engine service will run. <br><br>  For the purposes of continuous backup, a user with local administrator rights (Local System) is sufficient.  But if we want to use the High Availability functionality, when the backup machine will be able to pretend to be the failed primary machine, then we need to start the service under the domain administrator.  The following example from section () requires exactly such powers: <br><br><img src="https://habrastorage.org/files/aa8/c80/05f/aa8c8005f0c844e49d6300ba3a60ed0c.png"><br><br>  Click on Next -&gt; Install -&gt; Yes and wait for the installation to complete: <br><br><img src="https://habrastorage.org/files/edb/fea/f99/edbfeaf99dfe4a6db23b194b93421fcc.png"><br><br><a name="p23"></a><br><h2>  2.3.  Installing Managed Components on Linux </h2><br>  You can install the Engine component on the server by digging into the UNIX_Linux directory on the distribution and finding the agent you need in the tarball.  In particular, for installation on CentOS 6.5 I used the <b>arcserverha_rhel6.tgz</b> archive <br><br>  If 32-bit libraries are not installed on the machine, you need to install them.  For example, on CentOS 6.5, I had to run: <br><pre>  yum install glibc.i686 libstdc ++. i686 pam.i686 </pre><br>  (after updating their 64-bit versions: ‚Äúyum install glibc libstdc ++ pam‚Äù) <br><br>  then run ./install.sh and agree with all the hints. <br><br>  In the firewall, open port 25000 (TCP) <br><br><a name="p3"></a><br><h2>  3. Data Recovery Experiments </h2><br><a name="p31"></a><br><h2>  3.1.  Restore files to a specific point in time </h2><br><br>  Create the ‚ÄúC: \ Ax-left-wife \‚Äù directory on the Master machine and put the files there: <br><br>  Tanya.jpg <br><br>  Lena.jpg <br><br>  Gioconda.jpg <br><br>  Create a replication script for this directory on the Replica machine.  In the ‚ÄúArcserve RHA Manager‚Äù menu, select Scenario -&gt; New <br>  The first screen of the script creation wizard is left unchanged: <br><br><img src="https://habrastorage.org/files/4ea/ac6/78d/4eaac678d3c54bcc8a34aa06c0a88c23.png"><br><br>  On the second screen, we also do not change anything - the file replication script (File Server) should be selected there: <br><br><img src="https://habrastorage.org/files/a69/8f3/057/a698f30572134492afb89add1cd95b6b.png"><br><br>  Let's select the Master server as the main machine and Replica as the backup machine: <br><br><img src="https://habrastorage.org/files/eb8/8f8/96a/eb88f896a35b4d48be43317423d35149.png"><br><br>  On the next screen we see confirmation that the Engine service is installed on both machines.  If we have not installed it before, we can do it remotely from here. <br><br>  On the next screen, select the source directory ‚ÄúC: \ Ax-left-wife \‚Äù on the Master: <br><br><img src="https://habrastorage.org/files/625/2de/201/6252de2011a147e6b8f4bd113afa6ca9.png"><br><br>  On the next screen, we will be asked to replicate this directory to a directory with the same name on the Replica machine.  We agree: <br><br><img src="https://habrastorage.org/files/9c5/944/71f/9c594471f3534d8f91fe6153820b6734.png"><br><br>  On the next screen, do not change anything: <br><br><img src="https://habrastorage.org/files/527/d66/3ba/527d663baaa74825adaf11aa375525c1.png"><br><br>  And here we need to set the ‚ÄúData Rewind‚Äù parameter to ‚ÄúOn‚Äù in order to be able to restore data to an arbitrary point in time in the past: <br><br><img src="https://habrastorage.org/files/5eb/d40/1c3/5ebd401c391547d9b8d557c24a0726b6.png"><br><br>  Finally, we will be told that the script contains no errors: <br><br><img src="https://habrastorage.org/files/235/246/34a/23524634ac9543f0a4654fc29132b7fc.png"><br><br>  Run the script by clicking the ‚ÄúRun Now‚Äù button: <br><br><img src="https://habrastorage.org/files/c6f/0d1/d3f/c6f0d1d3fee34d71968fc74ea4d908ed.png"><br><br>  On the main screen, we‚Äôll see how the script works.  The specified directory is quickly synchronized (it will become the same on the main and backup machines), and now any change in the directory on the Master machine will lead to a similar change in its copy on the Replica machine. <br><br><img src="https://habrastorage.org/files/be3/52b/6b8/be352b6b8f374bb185ba2e8b4cd3b87d.png"><br><br>  Perform three steps on the Master machine: <br>  1. Modify the Gioconda file.jpg <br><br><img src="https://habrastorage.org/files/a3e/c2d/832/a3ec2d832135464b81de0e9525331a4b.jpg"><br><br>  2. Erase the file Tanya.jpg <br><br>  3. Add the file Masha.jpg <br><br>  Make sure that the same thing happened with the Replica machine. <br><br>  Now we would like to return to Gioconda the old look.  To do this, rewind time back on the Replica machine using the Data Recovery tool. <br><br>  First we need to stop the script (menu Tools -&gt; Stop) <br><br>  Then click the Replica machine and open the Tools -&gt; Data Recovery menu: <br><br><img src="https://habrastorage.org/files/cfe/0cf/12c/cfe0cf12ca46452bb9035272dfdca8b7.png"><br><br>  Clicking on the button ‚ÄúSelect Recovery Point‚Äù in the next window, we get into a window where you need: <br><br>  (1) Set to view all time points that can be rolled back in time. <br>  (2) Click the Apply button. <br>  (3) Select the very first point when Gioconda was not damaged yet <br>  (4) Click on the ‚ÄúOK‚Äù button <br><br><img src="https://habrastorage.org/files/eb2/465/bf2/eb2465bf28494857aa36e64ea7712fb2.png"><br><br>  Then click the ‚ÄúRun‚Äù button: <br><br><img src="https://habrastorage.org/files/57f/ffa/a65/57fffaa65803426a81550f987ea19a40.png"><br><br>  Check what happened to the files on the Replica machine. <br><br>  - Dzhokonda.jpg back to its initial state <br>  - Masha.jpg disappeared <br>  - Lena.jpg appeared <br><br>  In order not to lose Masha.jpg, we did not recover the data on both machines.  Now it is enough to rewrite the ‚ÄúGioconda.jpg‚Äù file to the Master machine, and we will again get the uncorrupted file into operation without affecting the rest. <br><br><a name="p32"></a><br><h2>  3.2.  Restore MS SQL database to a specific point in time </h2><br>  Suppose that MS SQL is installed on the Master machine.  You can not install MS SQL on a Replica machine, then it will only serve as a repository of a copy of the DATA directory: <br><br><img src="https://habrastorage.org/files/459/969/ba8/459969ba8bf0465980099055a33342c9.png"><br><br>  The MS SQL replication script is similar to the file replication script, but three things are added that make life easier for us: <br><br>  1. Select the correct method of initial synchronization - block.  Before you start replication, the system must verify that the data on the two machines are identical and synchronize what is different. <br><br>  For the ‚ÄúFile Server‚Äù type scenario, a simplified initial synchronization is applied by default, in which files are considered identical if their size and modification time coincide.  Such an assumption gives a good saving of initial synchronization time on file servers, but it is completely unacceptable for databases, so the script for MS SQL compares one after another all the data blocks that make up the files. <br><br>  2. we do not have to explicitly indicate where the database files are located; this information will automatically pull up: <br><img src="https://habrastorage.org/files/d53/66f/579/d5366f579bb64579b24bb2517ee1ee5e.png"><br><br>  2. when restoring data to the main machine (Master), MS SQL services will be automatically extinguished and transferred to manual start mode.  After recovery, everything will return to its place: <br><img src="https://habrastorage.org/files/187/3a9/449/1873a9449821440d8357ae61d26249cb.png"><br><br>  Suppose that someone forgot to write ‚Äúwhere‚Äù in the ‚Äúupdate‚Äù command: <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">transaction</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> dbo.Table_1 <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>=<span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span>;</code> </pre> <br>  (whoever did this himself will understand the depth of the fall). <br><br>  Just as in the previous case, we stop the replication script, run ‚ÄúTools-&gt; Data Recovery‚Äù, but choose recovery not only for the backup machine, but also for the main one: <br><br><img src="https://habrastorage.org/files/418/e59/067/418e590671314bd5837418e9fa751bc7.png"><br><br>  It remains only to choose a point in time preceding the moment of data corruption, and carry out the restoration: <br><br><img src="https://habrastorage.org/files/29c/2a5/ae6/29c2a5ae61c54d65ab8ca6477c53cab1.png"><br><br><a name="p33"></a><br><h2>  3.3.  Restore MySQL database to Linux at a given point in time </h2><br>  On two co-master and co-replica machines, CentOS 6.5 and MySQL are installed (in the same directories). <br><br>  Strictly speaking, you can not install MySQL on the backup machine (co-replica), but we will try to go a little further and pick up the replicated data on the backup MySQL server. <br><br>  On the co-master machine, the MySQL service is running, on the co-replica machine it is turned off. <br><br>  Create a new ‚ÄúCustom Application‚Äù script. <br><img src="https://habrastorage.org/files/042/f1f/b16/042f1fb16a5148c7aacba6df72138ad8.png"><br><br>  Unlike the ‚ÄúFile Server‚Äù script (Section 3.1), the ‚ÄúCustom Application‚Äù script has a block initial sync by default.  I repeat once again: for the ‚ÄúFile Server‚Äù type scenario, a simplified initial synchronization is applied by default, in which files are considered identical if their size and modification time coincide.  Such an assumption gives a good saving of initial synchronization time on file servers, but it is completely unacceptable for databases, therefore the ‚ÄúFile Server‚Äù type script is unacceptable for MySQL replication. <br><br><img src="https://habrastorage.org/files/215/ece/df1/215ecedf134c41e78ad5cad7e0e9cd0f.png"><br><br>  On the screen where the directories for replication are set, we set the directory with MySQL data (var / lib / mysql / in my case).  Just make sure that it does not have a <i>mysql.sock</i> socket file.  If there is, specify another place in the <i>my.cnf</i> configuration <i>file</i> . <br><br><img src="https://habrastorage.org/files/4d3/e5e/d0a/4d3e5ed0ac1942498e0751057928e99a.png"><br><br>  Do not forget, as in all previous scenarios, to allow rollback to a point in time in the past during recovery: <br><br><img src="https://habrastorage.org/files/568/705/bb6/568705bb65fa4621939b24cdd903e788.png"><br><br>  On the co-master machine, look at the Table_1 table: <br><br><pre> mysql&gt; select * from Table_1;
 + ---- + -------------- +
 |  id |  name |
 + ---- + -------------- +
 |  1 |  Ivanov |
 |  2 |  Petrov |
 + ---- + -------------- +
 2 rows in set (0.01 sec)
</pre><br><br>  And spoil it by making the last name in all notes the same: <br><br><pre> mysql&gt; update Table_1 set name = 'Sidorov';
 Query OK, 2 rows affected (0.00 sec)
 Rows matched: 2 Changed: 2 Warnings: 0
</pre><br><br>  Now let's get everything back, using the restore function for a given point in time.  As before, stop the replication script and restore the data on both machines.  But first stop the mysqld service: <br><br><pre> [root @ co-master mysql] # service mysqld stop
 Stopping mysqld: [OK]
</pre><br><br>  Choose a point in time when the base has not yet been corrupted: <br><br><img src="https://habrastorage.org/files/242/0f7/f1c/2420f7f1cf8441e48abe428e1377b488.png"><br><br>  After that, we will start the MySQL service on the master machine and make sure that the data is restored. <br><br>  <b>And now - a surprise!</b>  Let's start the MySQL service on the co-replica machine and get a working base on the backup machine.  We came close to the enhanced functionality of the Arcserve RHA when, instead of a lost system, a backup system comes in with actual data. <br><br>  Today we have raised the MySQL backup service manually.  But the Arcserve RHA product is able to independently start a backup system so that it looks like it has failed.  For example, run the necessary services, change the DNS records, IP address, even the NetBIOS name of the machine.  This can be done in scenarios like ‚ÄúHigh Availfbility‚Äù, but this is a topic for a separate article. <br><br><a name="p4"></a><br><h2>  4. Conclusion and advertising </h2><br>  In this article, we looked only at the basic capabilities of the Arcserve RHA product, aimed at recovering data at a given point in time in the past.  That is, only half of the name ‚ÄúReplication and High Availability‚Äù was decoded.  In the next article, you will see how the second part of the name is implemented - High Availability.  We will see how a failed machine (physical or virtual) will be replaced by a backup machine containing an up-to-date copy of the data. <br><br>  [Advertising] Currently, until the end of September 2016, you can get an Arcserve RHA product for free by purchasing an Arcserve UDP Premium Plus product at a price of Arcserve UDP Premium. <br>  You can learn more from Arcserve <a href="http://arcserve.su/gde.html">partners</a> . </div><p>Source: <a href="https://habr.com/ru/post/306194/">https://habr.com/ru/post/306194/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../306182/index.html">Safety of railways from open sources</a></li>
<li><a href="../306184/index.html">Top Machine Learning Packages in R, Part 2</a></li>
<li><a href="../306186/index.html">How to represent your own company</a></li>
<li><a href="../306188/index.html">Development for SailfishOS: Basics</a></li>
<li><a href="../306190/index.html">Security Week 29: Ubuntu forum leak, proxy vulnerability in PHP, Go and Python, 276 Oracle patches</a></li>
<li><a href="../306196/index.html">Asyncpg released - PostgreSQL client library for Python / asyncio</a></li>
<li><a href="../306198/index.html">MLBootCamp "Performance Evaluation". Very simple and quick solution.</a></li>
<li><a href="../306200/index.html">Novice Investor's FAQ: How money is actually protected on the exchange</a></li>
<li><a href="../306202/index.html">Industrial Management Systems - 2016: Vulnerability and Availability</a></li>
<li><a href="../306204/index.html">Compare the implementation of the languages ‚Äã‚Äãof Python and Ruby by the density of errors</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
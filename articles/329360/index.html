<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Type hinting according to all canons of polymorphism in old versions of PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="tl; dr In short, in this article I will create a treit that allows even in versions of PHP less than 5.6 (up to version 5.4) to get from the compiler ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Type hinting according to all canons of polymorphism in old versions of PHP</h1><div class="post__text post__text-html js-mediator-article">  tl; dr In short, in this article I will create a treit that allows even in versions of PHP less than 5.6 (up to version 5.4) to get from the compiler behavior similar to any static programming language.  Moreover, the trait will validate not only the input parameters, but also the output parameters, too.  So to speak, full immersion in hip-hinting. <br>  This trait you can easily connect and use in your web applications. <br><br><a name="habracut"></a><br><h3>  Type hinting in PHP version over 7.0 </h3><br>  PHP version &lt;7 allows the definition of the method to describe what data types will be supplied to the function, and the output data type of the function. <br><br>  Everything is wonderful here: what I asked, it came;  what asked, it happened. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">filterArray</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(array $arr, string $filterParameter, callable $filterCallback)</span></span></span><span class="hljs-function"> : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array</span></span></span></span></code> </pre> <br>  We need to define our own rule for filtering the array ‚Äî we took and created the lambda function, defined our own filter rule in it.  And in <i>filterArray () they</i> passed <i>$ arr</i> , knowing in advance that this is an array, and not any integer. <br><br>  If all of a <i>sudden</i> we pass not a string, but an object as <i>$ filterParameter</i> , PHP will instantly give us a parsing error.  Like, we did not order this. <br><br><h3>  Type hinting in PHP version under 5.6 </h3><br>  But PHP version &lt;5.6 does not support explicit indication of output data types: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sortArray</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($arr, $filterParam)</span></span></span><span class="hljs-function"> : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array</span></span></span><span class="hljs-function"> // &lt;-   </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre><br>  Also, PHP &lt;5.6 does not support primitives as input data types, such as <i>integer</i> , <i>string</i> , <i>float</i> . <br><br>  However, some types can even be specified in the old version of the language.  For example, you can indicate that a parameter of type <i>array</i> , <i>object</i> , or an instance of a class will be passed to the function: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Class ArrayForSorting *  ,   -    ,     . */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ArrayForSorting</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** *   . * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> array */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $arrayForSorting; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@construct</span></span></span><span class="hljs-comment"> */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($arrayForSorting)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;arrayForSorting = $arrayForSorting; } } <span class="hljs-comment"><span class="hljs-comment">/** * Class UserSortArray * ,      : , , . */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserSortArray</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** *   . * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> object */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $availableSortingMethods; <span class="hljs-comment"><span class="hljs-comment">/** *   . * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> ArrayForSorting $sortArray   ,   . * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@throws</span></span></span><span class="hljs-comment"> UserSortArrayException       . */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">insertSort</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ArrayForSorting &amp;$sortArray)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">false</span></span> === <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($availableSortMethods-&gt;insertMethod)) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserSortArrayException(<span class="hljs-string"><span class="hljs-string">'Insert method for user array sort is not available.'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> uasort($sortArray-&gt;arrayForSorting, $availableSortMethods-&gt;bubbleMethod); } }</code> </pre><br><h3>  Initial problem </h3><br>  But if you please.  What should I do if I need to pass in the function not an array, but, for example, a double? <br><br>  And a programmer can easily pass a string to a function, even an array, or an instance of any class. <br><br>  The solution in this case is simple: you just have to independently check the input and output parameters for validity each time. <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ArraySorter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sortArray</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(array &amp;$sortArray, $userCallback)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      , //        , //   false  - -1. if (false === $this-&gt;validateArray($sortArray)) { return []; } return uasort($sortArray, $userCallback); } private function validateArray($array) { if (!isset($array) || false === is_array($array)) { return false; } return true; } }</span></span></code> </pre><br>  However, it is scary to even think how many times you have to write the same code, which boils down to the following lines: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">null</span></span> !== $param &amp;&amp; <span class="hljs-string"><span class="hljs-string">''</span></span> !== $param) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  [],  '',          //  throw new Exception(__CLASS__ . __FUNCTION__ . ": Expected integer, got sting"); }</span></span></code> </pre><br>  The obvious solution to the problem is to write a validator in the trait, to which in the future to delegate all type checks of input parameters.  In case the parameter is not of the type required, the parser will immediately throw an exception. <br><br>  At the output we get the following: <br><br><ul><li>  The language becomes less dynamically typed.  But the principles of OOP are also not sent far away by the programmer; </li><li>  The duplicate code of data type checks is put into a separate ... entity, if the treit can be called that; </li><li>  New validators can be added without affecting the structure of other classes. </li></ul><br>  Traits are essentially similar to protected methods in terms of being able to be called from any class in which it is imported.  But, unlike inheritance, we can connect as many traits as necessary to a class and use all of its properties and methods. <br><br>  Traits are available for use in PHP, starting with version 5.4.0. <br><br><div class="spoiler">  <b class="spoiler_title">All source trait</b> <div class="spoiler_text">  ZY  I specifically wrote the validation of each primitive separately, so that in the future it would be possible to pass an array with my additional validation rules to the treit.  For example, for integer, you can validate <i>maxValue</i> , <i>minValue</i> , <i>isNatural</i> , for strings, you can validate <i>length</i> instead of <i>emptiness,</i> and so on. <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">traits</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Trait Validator *   . */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">trait</span></span> Validator { <span class="hljs-comment"><span class="hljs-comment">/** *  . * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> array $validationParams   . *  : '' =&gt; . *      'not_empty' --      * (.. ,   ,   ). *     : * [ * 'integer' =&gt; 123, * 'string not_empty' =&gt; 'hello world!', * 'array' =&gt; [ ... ], * ] * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> bool true    . * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@throws</span></span></span><span class="hljs-comment"> \Exception        . */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">validate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($validationParams)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   ,   . $this-&gt;validateArray($validationParams); foreach ($validationParams as $type =&gt; $value) { $methodName = 'validate' . ucfirst($type); //   validateInteger $isEmptinessValidation = false; if ('not_empty' === substr($type, -9)) { $methodName = 'validate' . ucfirst(substr($type, 0, -9)); $isEmptinessValidation = true; } if (false === method_exists($this, $methodName)) { throw new \Exception("Trait 'Validator' does not have method '{$methodName}'."); } //   true,   ,   . $this-&gt;{$methodName}($value, $isEmptinessValidation); } return true; } /** *  . * * @param string $string  . * @param bool $isValidateForEmptiness      . * * @return bool  . */ public function validateString($string, $isValidateForEmptiness) { $validationRules = is_string($string) &amp;&amp; $this-&gt;validateForSetAndEmptiness($string, $isValidateForEmptiness); if (false === $validationRules) { $this-&gt;throwError('string', gettype($string)); } return true; } /** *   . * * @param boolean $bool  . * * @return bool  . */ public function validateBoolean($boolean, $isValidateForEmptiness = false) { $validationRules = isset($boolean) &amp;&amp; is_bool($boolean); if (false === $validationRules) { $this-&gt;throwError('boolean', gettype($boolean)); } return true; } /** *  . * * @param string $array  . * @param bool $isValidateForEmptiness      . * * @return bool  . */ public function validateArray($array, $isValidateForEmptiness) { $validationRules = is_array($array) &amp;&amp; $this-&gt;validateForSetAndEmptiness($array, $isValidateForEmptiness); if (false === $validationRules) { $this-&gt;throwError('array', gettype($array)); } return true; } /** *  . * * @param string $object  . * @param bool $isValidateForEmptiness      . * * @return bool  . */ public function validateObject($object, $isValidateForEmptiness) { $validationRules = is_object($object) &amp;&amp; $this-&gt;validateForSetAndEmptiness($object, $isValidateForEmptiness); if (false === $validationRules) { $this-&gt;throwError('object', gettype($object)); } return true; } /** *   . * * @param string $integer  . * @param bool $isValidateForEmptiness      . * * @return bool  . */ public function validateInteger($integer, $isValidateForEmptiness) { $validationRules = is_int($integer) &amp;&amp; $this-&gt;validateForSetAndEmptiness($integer, false); if (false === $validationRules) { $this-&gt;throwError('integer', gettype($integer)); } return true; } /** *       ,   . * * @param string $parameter  . * @param bool $isValidateForEmptiness     (, , )  . * * @return bool  . */ private function validateForSetAndEmptiness($parameter, $isValidateForEmptiness) { $isNotEmpty = true; if (true === $isValidateForEmptiness) { $isNotEmpty = false === empty($parameter); } return isset($parameter) &amp;&amp; true === $isNotEmpty; } /** *  . * * @param string $expectedType * @param string $gotType * * @throws \Exception      . */ private function throwError($expectedType, $gotType) { $validatorMethodName = ucfirst($expectedType) . 'Validator'; // integer -&gt; IntegerValidator throw new \Exception("Parse error: {$validatorMethodName} expected type {$expectedType}, got {$gotType}"); } }</span></span></code> </pre><br></div></div><br><br>  Treit is used very simply.  As an example, we implement the Notebook class, which stores in itself the methods of generating and obtaining a unique identifier in order to show how this function can be used to check the input and output data of a function. <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">models</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">traits</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Class Notebook *    . */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Notebook</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> \<span class="hljs-title"><span class="hljs-title">traits</span></span>\<span class="hljs-title"><span class="hljs-title">Validator</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *  ID . * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $_uid; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@construct</span></span></span><span class="hljs-comment"> */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_uid = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;generateUniqueIdentifier(); } <span class="hljs-comment"><span class="hljs-comment">/** *   ID . * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNotebookUID</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  validate()        //   'primitiveName' =&gt; $primitiveValue. //          , //     . $this-&gt;validate([ 'string not_empty' =&gt; $this-&gt;_uid, ]); return $this-&gt;_uid; } /** *   ID . * * @return string */ private function generateUniqueIdentifier() { $uniqueIdentifier = bin2hex(openssl_random_pseudo_bytes(40)); //       . $this-&gt;validate([ 'string not_empty' =&gt; $uniqueIdentifier, ]); return $uniqueIdentifier; } }</span></span></code> </pre><br><br>  Another example: the Pen class (a simple ink pen initialized with some ink) that displays a message on the screen. <br><br><div class="spoiler">  <b class="spoiler_title">Pen class</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">models</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">traits</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Class Pen *   . */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> \<span class="hljs-title"><span class="hljs-title">traits</span></span>\<span class="hljs-title"><span class="hljs-title">Validator</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *    . * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> double */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $remainingAmountOfInk; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@construct</span></span></span><span class="hljs-comment"> */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;remainingAmountOfInk = <span class="hljs-number"><span class="hljs-number">100</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/** *    . * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> string $message . * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> void * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@throws</span></span></span><span class="hljs-comment"> ValidatorException      . */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($message)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;validate([ <span class="hljs-string"><span class="hljs-string">'string'</span></span> =&gt; $message, ]); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> &gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;remainingAmountOfInk) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">'Ink ended'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   } echo 'Pen writes message: ' . $message . '&lt;br&gt;' . PHP_EOL; $this-&gt;remainingAmountOfInk -= 1; } /** *    . * * @return integer */ public function getRemainingAmountOfInk() { $this-&gt;validate([ 'double' =&gt; $this-&gt;remainingAmountOfInk, ]); return $this-&gt;remainingAmountOfInk; } }</span></span></code> </pre><br></div></div><br>  Well, now let's write our pen on the table: ‚ÄúHello World‚Äù! <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// autoload.php -  . /** * Class Autoloader *      . */ class AutoLoader { /** *    . * * @param string $className   . */ public static function loadClasses($className) { $dir = dirname(__FILE__); $sep = DIRECTORY_SEPARATOR; require_once("{$dir}{$sep}{$className}.php"); } } //  . spl_autoload_register([ 'AutoLoader', 'loadClasses' ]); // ------------------------------------ // index.php include_once("autoload.php"); use models as m; $pen = new m\Pen(); $pen-&gt;drawMessage('hi habrahabr'); // Pen writes message: hi habrahabr $message = [ 'message' =&gt; 'hi im message inside array', ]; try { $pen-&gt;drawMessage($message); //    ValidatorException } catch (\Exception $e) { echo 'exception was throwed during validation of message &lt;br&gt;' . PHP_EOL; }</span></span></code> </pre><br><br>  Conclusion: <br><pre> <code class="php hljs">Pen writes message: hi habrahabr <span class="hljs-keyword"><span class="hljs-keyword">exception</span></span> was throwed during validation of message</code> </pre><br><br><h3>  Conclusion </h3><br>  With the help of such an unpretentious trait, it is possible <s>to make C-Sharp from an elephant</s> validate the input / output parameters of functions without copying and pasting methods in different classes. <br><br>  I didn‚Äôt intentionally screw special validation parameters to the <i>validate ()</i> method in the example above, such as the minimum / maximum value of doubles or string variables, custom callbacks for parameter validation, outputting my message when an exception was thrown, and so on. <br><br>  Because the main purpose of the article was to tell that the technology that allows one to get static from the language is and is easy to implement even on the old version of PHP. </div><p>Source: <a href="https://habr.com/ru/post/329360/">https://habr.com/ru/post/329360/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../329348/index.html">OpenVPN in Microsoft Azure for virtual merging of subscriptions. Experience GanttPRO - project management service</a></li>
<li><a href="../329350/index.html">How we fought Yandex‚Äôs ‚ÄúMulti-armed Bandits‚Äù and won</a></li>
<li><a href="../329352/index.html">Lectures of the Technosphere. Infopoisk. Part 2 (Spring 2017)</a></li>
<li><a href="../329356/index.html">We invite to the meeting of Unity developers in Moscow</a></li>
<li><a href="../329358/index.html">How to improve the quality of the information system using the user manual</a></li>
<li><a href="../329362/index.html">DevConf 2017: Effective WEB-project management - voting for reports ends</a></li>
<li><a href="../329366/index.html">A closer look at cyber attacks 3.0 (WannaCry video reviews)</a></li>
<li><a href="../329368/index.html">Customer scoring: what is it and why is it needed?</a></li>
<li><a href="../329370/index.html">5 reasons to attend a data visualization course</a></li>
<li><a href="../329372/index.html">Unit tests: what, how and when to test?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
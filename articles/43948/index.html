<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write an accordion plugin in 618 bytes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Very often one has to see variants of the accordion control on various sites. In this article I would like to offer my own version, which, in addition...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write an accordion plugin in 618 bytes</h1><div class="post__text post__text-html js-mediator-article"><img src="http://www.bankinform.ru/serialer/Content/images/scr.png" align="left">  Very often one has to see variants of the accordion control on various sites.  In this article I would like to offer my own version, which, in addition to having some original properties, also weighs only 618 bytes in a minified form.  At the same time, I will show you how to quickly write the simplest jQuery plugin. <br><br>  Looking ahead to say that the plugin was tested in Firefox 3.0.3, Internet Explorer 7 and 8b2, Opera 9.52 and Chrome 0.3.154.9.  In all other browsers, performance is guaranteed as far as jQuery works in them. <br><br>  For the curious, <a href="http://www.bankinform.ru/serialer">I will give an example</a> of what will happen in the end (the links and buttons in the example do not work). <br><a name="habracut"></a><br><h4>  Formulation of the problem </h4><br>  Create a plugin for jQuery, minimal in size, which would build an accordion control element on the basis of the html element ‚Äúdl‚Äù.  An obligatory condition is the conclusion of the explanation for the inactive elements of the "accordion".  The active element of the accordion is determined by the presence of the class ‚Äúactive‚Äù in the corresponding element dt.  The dt also contains the title of the ‚Äúaccordion‚Äù element.  The span element must have the class ‚Äúremark‚Äù and is in dd.  The main body of each ‚Äúaccordion‚Äù element must be contained in a div, which must also be in dd. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Decision </h4><br>  To begin with, we define a function that updates the state of the dl element and brings it to the required form: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">function</font> Update(dl) { <br> $( <font color="#A31515">"#"</font> + dl.id + <font color="#A31515">" &gt; dt:not(.active)"</font> ).each( <font color="#0000ff">function</font> () { <br> $( <font color="#0000ff">this</font> ).css( <font color="#A31515">"cursor"</font> , <font color="#A31515">"pointer"</font> ); <br> }); <br> $( <font color="#A31515">"#"</font> + dl.id + <font color="#A31515">" &gt; dt.active"</font> ).each( <font color="#0000ff">function</font> () { <br> $( <font color="#0000ff">this</font> ).css( <font color="#A31515">"cursor"</font> , <font color="#A31515">""</font> ); <br> }); <br> <br> $( <font color="#A31515">"#"</font> + dl.id + <font color="#A31515">" &gt; dd &gt; div"</font> ).hide(); <br> $( <font color="#A31515">"#"</font> + dl.id + <font color="#A31515">" &gt; dd &gt; span.remark"</font> ).show(); <br> <br> $( <font color="#A31515">"#"</font> + dl.id + <font color="#A31515">" &gt; dt.active"</font> ).next().children( <font color="#A31515">"div"</font> ).show(300); <br> $( <font color="#A31515">"#"</font> + dl.id + <font color="#A31515">" &gt; dt.active"</font> ).next().children( <font color="#A31515">"span.remark"</font> ).hide(); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  The first two operations update the mouse pointer when you hover over the active and inactive elements of the "accordion".  The second two operations hide the entire contents of the "accordion" and show all the notes.  The third two operations show with slowing down the contents of the active tab of the "accordion" and hide its note. <br><br>  Next, we will write a functional that will be executed when clicking on the tabs of the "accordion": <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">$( <font color="#A31515">"#"</font> + <font color="#0000ff">this</font> .id + <font color="#A31515">" &gt; dt"</font> ).click( <font color="#0000ff">function</font> () { <br> <font color="#0000ff">if</font> ($( <font color="#0000ff">this</font> ).hasClass( <font color="#A31515">"active"</font> )) <br> <font color="#0000ff">return</font> ; <font color="#008000">//      dt</font> <br> <br> $( <font color="#A31515">"#"</font> + dl.id + <font color="#A31515">" &gt; dt"</font> ).removeClass( <font color="#A31515">"active"</font> ); <br> $( <font color="#0000ff">this</font> ).addClass( <font color="#A31515">"active"</font> ); <br> <br> Update(dl); <br> });</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  This is a ‚Äútorn out‚Äù piece of code.  Here, $ ("#" + this.id + "&gt; dt") is a selection of all the tabs of our "accordion".  By means of jQuery, a click handler is installed on the tab, where at the very beginning there is a check where they clicked, if on the passive element, the output is made.  Further, all tabs remove the class ‚Äúacitve‚Äù, in the clicked one, on the contrary, is assigned. <br><br>  Let's put it all together and write a jQuery plugin: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">jQuery.fn.accordion = <font color="#0000ff">function</font> () { <br> <br> <font color="#0000ff">function</font> Update(dl) { <br> $( <font color="#A31515">"#"</font> + dl.id + <font color="#A31515">" &gt; dt:not(.active)"</font> ).each( <font color="#0000ff">function</font> () { <br> $( <font color="#0000ff">this</font> ).css( <font color="#A31515">"cursor"</font> , <font color="#A31515">"pointer"</font> ); <br> }); <br> $( <font color="#A31515">"#"</font> + dl.id + <font color="#A31515">" &gt; dt.active"</font> ).each( <font color="#0000ff">function</font> () { <br> $( <font color="#0000ff">this</font> ).css( <font color="#A31515">"cursor"</font> , <font color="#A31515">""</font> ); <br> }); <br> <br> $( <font color="#A31515">"#"</font> + dl.id + <font color="#A31515">" &gt; dd &gt; div"</font> ).hide(); <br> $( <font color="#A31515">"#"</font> + dl.id + <font color="#A31515">" &gt; dd &gt; span.remark"</font> ).show(); <br> <br> $( <font color="#A31515">"#"</font> + dl.id + <font color="#A31515">" &gt; dt.active"</font> ).next().children( <font color="#A31515">"div"</font> ).show(300); <br> $( <font color="#A31515">"#"</font> + dl.id + <font color="#A31515">" &gt; dt.active"</font> ).next().children( <font color="#A31515">"span.remark"</font> ).hide(); <br> } <br> <br> <font color="#0000ff">return</font> <font color="#0000ff">this</font> .each( <font color="#0000ff">function</font> () { <br> <font color="#0000ff">var</font> dl = $( <font color="#0000ff">this</font> )[0]; <br> <br> Update(dl); <br> <br> $( <font color="#A31515">"#"</font> + <font color="#0000ff">this</font> .id + <font color="#A31515">" &gt; dt"</font> ).click( <font color="#0000ff">function</font> () { <br> <font color="#0000ff">if</font> ($( <font color="#0000ff">this</font> ).hasClass( <font color="#A31515">"active"</font> )) <br> <font color="#0000ff">return</font> ; <font color="#008000">//      dt</font> <br> <br> $( <font color="#A31515">"#"</font> + dl.id + <font color="#A31515">" &gt; dt"</font> ).removeClass( <font color="#A31515">"active"</font> ); <br> $( <font color="#0000ff">this</font> ).addClass( <font color="#A31515">"active"</font> ); <br> <br> Update(dl); <br> }); <br> <br> }); <br> <br> };</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  We extend jQuery with our ‚Äúaccordion‚Äù function, in which for each given element the following steps are performed: an instance of dl is obtained, the state of the received dl is updated, mouse click handlers are set for all dt of the resulting dl. <br><br><h4>  Using </h4><br>  Using the written element is extremely simple.  To do this, simply include in the code the following block, which will make our ‚Äúaccordion‚Äù out of the transmitted dl element: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#0000ff">&gt;</font> <br> $( <font color="#0000ff">document</font> ).ready <br> ( <br> <font color="#0000ff">function</font> () { <br> $( <font color="#A31515">"#LoginList"</font> ).accordion(); <br> } <br> ); <br> <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h4>  Conclusion </h4><br>  The presented variant is the simplest one; it does not pretend to anything but an example.  It can be improved by adding parameters that would affect the display speed of the active element on the starting number of the ‚Äúaccordion‚Äù tab.  In addition, I am confident that you can improve the javascript code itself. <br><br>  I hope that this example and the control will be useful to someone or suggest interesting ideas. <br><br>  Link to <a href="">plugin</a> (1192 bytes), <a href="">minified version</a> (618 bytes). <br><br>  UPD: thanks to optimization DmitryBaranovskiy, the size of the minified version is reduced to 508 bytes, the full version to 909 bytes <br><br></div><p>Source: <a href="https://habr.com/ru/post/43948/">https://habr.com/ru/post/43948/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../43938/index.html">New features in C # 4.0. Part 3: Covariance of generalizations</a></li>
<li><a href="../43939/index.html">Boy and starfish</a></li>
<li><a href="../43941/index.html">How to call a company?</a></li>
<li><a href="../43944/index.html">About the squiggles in the heads of admins</a></li>
<li><a href="../43947/index.html">Offline Paradoxes</a></li>
<li><a href="../43950/index.html">Vista</a></li>
<li><a href="../43951/index.html">New version of LiveStreet 0.2</a></li>
<li><a href="../43952/index.html">Access.xml</a></li>
<li><a href="../43953/index.html">Komodo IDE / Komodo Edit 5.0</a></li>
<li><a href="../43955/index.html">Hierarchical (recursive) queries</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
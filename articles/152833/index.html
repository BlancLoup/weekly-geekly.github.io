<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A modular approach to developing web applications using JavaScript: AMD and RequireJS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When developing applications with a modular structure of JavaScript, two problems arise: 

- description and satisfaction of dependencies of different...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A modular approach to developing web applications using JavaScript: AMD and RequireJS</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/c84/429/419/c84429419b35b18ac65ef1df5c43c506.png" alt="RequireJS" align="right">  When developing applications with a modular structure of JavaScript, two problems arise: <ul><li>  description and satisfaction of dependencies of different parts of the application, the need to organize dependencies on the server side; </li><li>  export of variables to the global scope and their collision. </li></ul><br>  Both of these problems are solved using the <a href="https://github.com/amdjs/amdjs-api/wiki/AMD">Asynchronous Module Definition</a> approach.  It comes down to the description of modules by the function define and connecting them with require.  At the moment there are several tools that implement AMD.  I began my acquaintance with them with <a href="http://requirejs.org/">RequireJS</a> and was surprised how convenient and easy it is to describe the dependencies of the modules.  I'll tell you how it works, on a simple example. <a name="habracut"></a><br clear="all"><br><h4>  Bootloader connection </h4>  We have the following directory structure: <pre><code class="bash hljs">siteroot/ js/ app.js require.js jquery.js mymodule.js index.html</code> </pre> <br>  To begin with, we will connect the loader in index.html.  We will use RequireJS: <br> <code>&lt;script data-main="/js/app" src="/js/require.js"&gt;&lt;/script&gt;</code> <br> <br>  Great, this is the only script tag we need.  The rest of the JS connection work will be done by the bootloader.  The file specified in the data attribute (the .js extension is always omitted in RequireJS for short) will be a kind of entry point for our application.  In it, we will be able to connect the necessary modules with the help of require and perform the conceived actions. <br><br><h4>  Module Description </h4>  We describe our module in <code>/js/module.js</code> with define: <pre> <code class="javascript hljs">define( <span class="hljs-string"><span class="hljs-string">'mymodule'</span></span>, [<span class="hljs-string"><span class="hljs-string">'jquery'</span></span>], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> $ </span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">foo</span></span> : <span class="hljs-string"><span class="hljs-string">'bar'</span></span> }; } );</code> </pre><br>  The first argument is a string, the name of the module, is optional.  The second argument passes the dependencies as an array of strings, also optionally.  The third argument is a factory function that is executed only after all dependencies have been satisfied (loading the listed files).  Exported variables are passed to it as arguments.  And it should return the module itself.  In this case, it is an object with one field. <br><br><h4>  Using </h4>  In <code>/js/app.js</code> connect the necessary modules with JS and execute our code: <pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( [<span class="hljs-string"><span class="hljs-string">'mymodule'</span></span>, <span class="hljs-string"><span class="hljs-string">'jquery'</span></span>], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Module, $ </span></span></span><span class="hljs-function">)</span></span>{ $(<span class="hljs-string"><span class="hljs-string">'body'</span></span>).append( Module.foo ); } );</code> </pre><br>  Module will not be available in the global scope, as well as other variables exported by libraries from dependencies.  Despite the fact that the jQuery library from version 1.7 supports the AMD architecture, it is an exception: it exports its dollar to the global scope.  Most likely, this is done to preserve compatibility with an army of plug-ins written over many years. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Configuration </h4>  RequireJS has a number of parameters that can be passed before use.  For this is the object <code>require.config</code> . <br><br>  What if you need to connect a module that is not designed as an AMD and exports the variable to the global scope?  You can, of course, modify its source code, but this is a bad practice.  To describe such modules is the parameter <code>shim</code> .  You can manually specify its dependencies and the exported variable, and it will become part of our application along with other AMD guys: <pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>.config = { <span class="hljs-attr"><span class="hljs-attr">shim</span></span>: { <span class="hljs-string"><span class="hljs-string">'oldmodule'</span></span> : { <span class="hljs-attr"><span class="hljs-attr">deps</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">exports</span></span>: <span class="hljs-string"><span class="hljs-string">'OldModule'</span></span> } } };</code> </pre><br>  Now you can specify it as a dependency: <pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( [<span class="hljs-string"><span class="hljs-string">'mymodule'</span></span>, <span class="hljs-string"><span class="hljs-string">'jquery'</span></span>, <span class="hljs-string"><span class="hljs-string">'oldmodule'</span></span>], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{} );</code> </pre><br>  In addition to shim, there are many more parameters: the root directory for connecting the <code>baseUrl</code> files, aliases for more convenient <code>paths</code> , etc. <br><br><h4>  Conclusion </h4>  I hope the concept of AMD hooked you, as well as me.  It helps to avoid chaos when using a large number of JS-files in development, pushes to write a reuse code, removes the responsibility for connecting files from the backend.  And if you have a really large MVC application from a couple of dozen files, then such a system is simply indispensable. <br><br>  In parting, here are some links that will help continue the study of the issue: <ul><li>  article Addy Osmani <a href="http://addyosmani.com/writing-modular-js/">Writing Modular JavaScript With AMD, CommonJS &amp; ES Harmony</a> ; </li><li>  <a href="http://requirejs.org/">RequireJS official website</a> ; </li><li>  <a href="https://github.com/amdjs/amdjs-api/wiki/AMD">AMD</a> specification. </li></ul><br><br>  The source code from the article is available <a href="http://github.com/clslrns/requirejs-test">in the GitHub repository</a> . <br>  Happy hacking! </div><p>Source: <a href="https://habr.com/ru/post/152833/">https://habr.com/ru/post/152833/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../152815/index.html">Scala as enhanced java or java ++</a></li>
<li><a href="../15282/index.html">"Information" sunglasses</a></li>
<li><a href="../152825/index.html">The global conspiracy of manufacturers on the example of Asus Transformer Infinity TF700</a></li>
<li><a href="../15283/index.html">Do you know?</a></li>
<li><a href="../152831/index.html">Electronic cards for learning English words</a></li>
<li><a href="../152835/index.html">What technology stack to choose for a startup?</a></li>
<li><a href="../152837/index.html">‚ÄúGo there, I don‚Äôt know where and bring me something, I don‚Äôt know what‚Äù or ‚Äú5 Whys - like a cure for Muda‚Äù</a></li>
<li><a href="../152839/index.html">CBS: everything ingenious is simple, or How I acted in a Danish university</a></li>
<li><a href="../15284/index.html">Yandex.Direct sued for failure to comply with the contract</a></li>
<li><a href="../152841/index.html">Deploy crutches or surprise pies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
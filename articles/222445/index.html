<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Simple pseudo-random selection algorithm</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this post I want to talk about a simple suggestion algorithm based on the choices made earlier. To do this, first of all, set two tasks: 



1. Sel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Simple pseudo-random selection algorithm</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/f93/fae/bbf/f93faebbfef4dcb47d1a61b7c3c290d4.jpg" align="right"><br>  In this post I want to talk about a simple suggestion algorithm based on the choices made earlier.  To do this, first of all, set two tasks: <br><br><ol><li>  Select a random value from the array </li><li>  Select a random value from the array based on the weight of the values. </li></ol><br>  Certainly, many will notice that ready-made functions exist in many PLs for solving the first problem.  However, I will <s>invent a bicycle</s> to solve it differently, for a gradual approach to solving the second task. <br><br>  For the solution I will use pseudocode, something similar to Javascript.  Therefore, my random () method will return a value from 0 to 1. <br><a name="habracut"></a><br><h4>  So, task 1 </h4><br>  You can simply iterate through the array in each iteration, randomly receiving true / false, you can use a common Javascript solution of the form <code>Math.floor(Math.random() * maxNumber)</code> , which, by the way, is the abbreviated version of the solution that I will use. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Decision </h4><br>  We divide the interval of numbers from 0 to 1 into equal <code>n</code> segments and take the nearest previous value from <code>random</code> : <br><img src="https://habrastorage.org/getpro/habr/post_images/8d3/5eb/1f1/8d35eb1f1de90724eaf2320b3a5bc055.png"><br><br><h5>  Practical part </h5><br>  For simplicity, let's take an array of 150 elements containing only its own indices.  That is, a numerical range from 0 to 150. <br><pre> <code class="javascript hljs">maxNumber = <span class="hljs-number"><span class="hljs-number">150</span></span>; <span class="hljs-comment"><span class="hljs-comment">//      elementPart = 100 / maxNumber / 100; //     ,     0.66% randomResult = random(); cursor = 0; for (i = 0; i &lt;= maxNumber; i++) { cursor += elementPart; if (cursor &gt;= randomResult) { result = i; break; } }</span></span></code> </pre><br><br><h4>  Task 2 </h4><br>  Let's enter some initial data: <br><pre> <code class="javascript hljs">items = [ {<span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">score</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">score</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>} ]</code> </pre><br>  Where <code>score</code> is a certain value (number of points), which changes the "weight" of the value in front of other values.  Points can be awarded for choosing a value or for the similarity of this value with the value selected once.  The rules for scoring are limited only by fantasy and the specific application situation. <br>  The attentive reader has noticed that 0 points is not the default value.  This is done in order to be able to exclude the value from the sample, because the number of points by default is taken as 1. To do this, we correct the source data: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; items.length; i++) { item = items[i]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item.score === <span class="hljs-number"><span class="hljs-number">0</span></span>) { item.remove(); <span class="hljs-comment"><span class="hljs-comment">//     continue; } if (item.score === null) { item.score = 1; //  score ,    1 } }</span></span></code> </pre><br><br><h4>  Decision </h4><br>  The essence of the solution is to change the segments of values ‚Äã‚Äãin the range from 0 to 1. <br>  Example: <br><img src="//habrastorage.org/files/221/1b0/97a/2211b097ab5a4f849de6e2a782eea531.png"><br><br><h5>  Practical part </h5><br>  Add a weight calculation value: <br><pre> <code class="javascript hljs">sumScores = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; items.length; i++) { <span class="hljs-comment"><span class="hljs-comment">//     sumScores += items[i].score; } for (i = 0; i &lt; items.length; i++) { weight = items[i].score / sumScores; items[i].weight = weight; }</span></span></code> </pre><br>  Here weight is the percentage of the sum of the points of all the elements. <br>  We calculate the sum of the weights and decorate the solution to problem 1: <br><pre> <code class="javascript hljs">sumWeights = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; items.length; i++) { <span class="hljs-comment"><span class="hljs-comment">//     sumWeights += items[i].weight; } cursor = 0; for (i = 0; i &lt; items.length; i++) { cursor += items[i].weight / sumWeights; if (cursor &gt;= randomResult) { suggestedItem = items[i]; break; } }</span></span></code> </pre><br><br>  Thus, we obtain a value with id = 1 with <b>a</b> higher probability than with id = 3. However, in this case, we will sooner or later come to the fact that the same values ‚Äã‚Äãwill be offered (subject to an increase in the number of points and unless, of course, artificially exclude them from the sample). <br>  This solution is quite applicable to systems where the user needs to offer something most similar - just make a score of the desired values ‚Äã‚Äãto your liking (same color, same type, maybe the same manufacturer) without forgetting to exclude the selected value by setting the score to 0 . <br>  If you need a set, you are less likely to show such products (for example, why would a person need a second vacuum cleaner, if he just bought it?) Or offer to try something new without discarding the purchased item from the sample (for example, ordering food or consumables ( aroma of electronic cigarettes, etc.)), then you need to make small adjustments to the calculation of the scales: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; items.length; i++) { weight = <span class="hljs-number"><span class="hljs-number">1</span></span> - items[i].score / sumScore; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (items[i].score == sumScore) { weight = <span class="hljs-number"><span class="hljs-number">1</span></span>; } items[i].weight = weight; }</code> </pre><br>  Where weight is the inverted value to percentage. <br>  In case if we have only one item in the list, we have a non-zero account, check and assign 1 weight to this item. <br><br>  Now, adding to the score point every time the choice of this value is made, we move it further (without excluding from the sample), offering alternative options to the user. <br>  These two approaches can be combined: for example, we offer the user of the manufacturer, whose goods he usually buys, but at the same time we offer goods that he has not yet purchased. <br><br>  <a href="http://jsfiddle.net/extempl/wEvBL/">A demo can be tried here.</a> <br><br><h4>  On this topic </h4><br>  You can read about the multi-criteria choice of alternatives and the fuzzy choice rules <a href="http://habrahabr.ru/post/136160/">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/222445/">https://habr.com/ru/post/222445/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../222433/index.html">Sketch.app site design. Part 2.2: Final Layout</a></li>
<li><a href="../222435/index.html">Imagine Cup 2014 or the first game creation experience</a></li>
<li><a href="../222439/index.html">Autorun programs connected to network drives in the required sequence</a></li>
<li><a href="../222441/index.html">Gratitude works wonders, or how to love your work.</a></li>
<li><a href="../222443/index.html">PermGen memory leak analysis in Java</a></li>
<li><a href="../222447/index.html">Squeeze all the juice or use Raspberry pi to the fullest</a></li>
<li><a href="../222453/index.html">25 Laravel Tips and Tricks</a></li>
<li><a href="../222455/index.html">Rostelecom is introducing a new type of Internet traffic filtering. Not DPI</a></li>
<li><a href="../222463/index.html">Pip-Boy 3000: a new incarnation of the device from Fallout (without Rad-X)</a></li>
<li><a href="../222467/index.html">Toilet Guide, or Toto Smart Toilets</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
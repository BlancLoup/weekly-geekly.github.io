<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The history of creating a home cloud. Part 1. Setting up a Debian environment for everyday use.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once upon a time, in 2011, I came to Habr with the article ‚Äú Debian Server for a Newbie,‚Äù which was the systematization of various information and its...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The history of creating a home cloud. Part 1. Setting up a Debian environment for everyday use.</h1><div class="post__text post__text-html js-mediator-article">  Once upon a time, in 2011, I came to Habr with the article ‚Äú <a href="https://habrahabr.ru/post/126944/">Debian Server for a</a> Newbie,‚Äù which was the systematization of various information and its presentation in a current and workable form.  This article is also positioned as a reference material for a newbie or a regular Linux user, which is my small contribution to the popularization of Linux.  In fact, all I‚Äôm going to write about is a kind of detailed instruction for installing and configuring the Nextcloud home cloud service from scratch. <br><br><img src="https://habrastorage.org/webt/ro/rs/-g/rors-gtat35bqlmmya7tprfoy_8.jpeg"><br><br>  The created virtual machine with Nextcloud worked since March 2017 almost without failures and in the fall of 2017 I thought about the article.  I have a lot of notes and comments in terms of solving various problems and nuances, I have long had an idea to put it all in order and publish it and the New Year holidays in 2018 helped me with this.  I must say that the article was at least half a year late, but I think that installing and configuring the current versions of Debian and Nextcloud, by analogy with the information below, is not difficult, although, as you know, the devil is in the details. <br>  Below, the reader will get acquainted with the prerequisites for creating his own cloud and get working instructions on how to set up Debian, easy tuning the Gnome3 environment, compile, build and install packages for Debian, install and configure Apache, SQL and PHP services and start working with them, generating and connecting a self-signed SSL certificate for Apache virtual host, installation and configuration of Nextcloud.  I did not design this article as a technical manual or tutorial with a long string of commands, and decided to try to write an article as a story, but without prejudice to the technical component.  Experienced Linux users are unlikely to find something new here, but they may be able to read it as a thematic story in a moment of their free time. <br><a name="habracut"></a><br><hr><a name="chap0"></a><br><h3>  Table of contents </h3><br>  <a href="https://geektimes.ru/post/297093/">Part 1. Setting up a Debian environment for everyday use.</a> <br>  <a href="https://geektimes.ru/post/297601/">Part 2. Creating a server - setting LAMP in Debian</a> <br>  <a href="https://geektimes.ru/post/297969/">Part 3. Creating a personal cloud - installing and configuring Nextcloud</a> <br>  <a href="https://geektimes.ru/post/300907/">Part 4. Update 2018 - Debian 9 and Nextcloud 13</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <hr><br><h3>  Quick chapter navigation </h3><br>  <a href="https://habr.com/ru/post/371159/">Foreword</a> <br>  <a href="https://habr.com/ru/post/371159/">Formulation of the problem</a> <br>  <a href="https://habr.com/ru/post/371159/">Creation and basic setup of the virtual machine</a> <br>  <a href="https://habr.com/ru/post/371159/">Setup in the control panel</a> <br>  <a href="https://habr.com/ru/post/371159/">BASH setting</a> <br>  <a href="https://habr.com/ru/post/371159/">Setting up repositories</a> <br>  <a href="https://habr.com/ru/post/371159/">Operating system update</a> <br>  <a href="https://habr.com/ru/post/371159/">Software installation</a> <br>  <a href="https://habr.com/ru/post/371159/">Software setup</a> <br>  <a href="https://habr.com/ru/post/371159/">Gnome setup</a> <br>  <a href="https://habr.com/ru/post/371159/">Network configuration</a> <br>  <a href="https://habr.com/ru/post/371159/">Firewall setup</a> <br>  <a href="https://habr.com/ru/post/371159/">Installing vmware-tools 10.0.10 in a Debian 8.7.1 environment</a> <br>  <a href="https://habr.com/ru/post/371159/">Build, install and configure notepadqq</a> <br>  <a href="https://habr.com/ru/post/371159/">Build and install Double Commander</a> <br><br><hr><a name="chap1"></a><br><h3>  Foreword </h3><br>  Our story begins at the end of 2015, when I purchased a new smartphone.  The Motorola Droid Turbo turned out to be a powerful device, with a large memory, a QHD display with an acceptable (relatively small) diagonal, a capacious battery and a virtually clean Android on board, which in my eyes has always been a definite plus.  Finishing the back panel with a ballistic nylon gives it a peculiar style, standing out against the background of the devices of the era of "remnant".  For a long time, the usual gestures of turning on a flashlight by shaking or a camera by quickly waving the phone already seem to surprise no one, but Motorola will remain forever in history as a pioneer with a flawless implementation of such functionality - I am so used to gestures that I don‚Äôt even know where the camera icon is.  In general, you have already understood that I like the phone all right and I am delighted with it so far, except for one annoying moment - the entire memory of the phone is soldered inside it.  And in order to lose our precious 64 gigabytes (user data is actually less), you just need to stumble so that the phone falls out of your hands and ‚Äúsuccessfully‚Äù falls.  Although some day he may simply not turn on.  Or once it can be banal steal. <br><br>  All users of computer equipment are divided into two groups - those who make backups and those who still do not make them.  I moved from the second group in the first fifteen years ago.  At least on the first phone, the reservation was thought out as follows.  All applications with their settings were automatically backed up daily via Titanium Backup to an SD card.  SambaDroid was installed on the phone, which was configured to share the phone's SD card only when it was connected to a network with a specific SSID.  As you might guess, this happened only when the phone was connected to the Wi-Fi router in my home.  BitTorrent Sync was periodically launched on the computer, which, just in case, was locked through a firewall on the local network (only local addresses were allowed), and when a shared card was detected, it synchronized its contents with the folder on the computer.  In the event of a phone breakdown, you could simply pull out the SD card with the data.  In any other case - there is always a backup of the memory card on the computer.  If the computer breaks down on the same day, there is a cold backup of the data disk located in another house.  Sleep is calm, healthy, strong, so hands do not shake due to tension and, as a result, the phone never falls. <br><br>  And what to do with this new phone?  Applications are also backed up via Titanium Backup.  But the SD card is not pulled out, and SambaDroid, which worked perfectly on Android 2.x on the 4/5/6 line, behaves unstably, and after a while I refused BitTorrent Sync.  Surely it would be possible to find a similar solution, but I caught fire with a universal cloud solution.  It would seem that the conclusion is self-evident and obvious - there is Google Drive and a bunch of applications that synchronize the specified data with the cloud, providing (in theory) End-to-End encryption.  But ... with this approach, this article would never have been written!  Moreover, in 2018, the author is not even going to connect a google account to the phone, much less think about synchronizing photos of her cats with some other services.  Yes, I have paranoia, distrust of corporations, the desire to keep personal data under control, the desire for independence from the work of another service (which may close) and I do not want to pay for scanty gigabytes in the cloud. <br><br>  While I was thinking about the need to do something in terms of correcting this situation, the whole of 2016 passed by and I realized that now, we should really attend to this problem right now.  I wanted to do everything beautifully, with an eye to the future, to universality, reliability and, of course, automatism.  Since I actively do not accept too much and intrusive participation of corporations in my personal life, it was decided to try to make my personal cloud in the local network using my ownCloud. <br>  Quote from wikipedia: <br><blockquote> ownCloud is a Free and open web application for data synchronization, file sharing and remote storage of documents in the "cloud".  ownCloud is written in PHP and JavaScript programming languages.  ownCloud works with SQLite, MariaDB, MySQL, Oracle Database and PostgreSQL databases, and runs on servers running Linux, including Raspberry Pi.  Development of ownCloud was started by one of the KDE developers, Frank Carlitschek, in January 2010. He sought to create a free alternative to commercial cloud storage services.  In contrast, ownCloud can be installed on your own server at no additional cost. <br><br>  Opportunities: <br>  - File storage using conventional directory structures, or using WebDAV <br>  - Cryptography <br>  - Synchronization between clients running Windows (Windows XP, Vista, 7 and 8), Mac OS X (10.6 and later) or Linux <br>  - Calendar (also like CalDAV) <br>  - Task Manager <br>  - Address book (also like CardDAV) <br>  - Streaming media (using Ampache) <br>  - Administration of users and groups (using OpenID or LDAP) <br>  - Sharing content between groups or using public URLs <br>  - Online text editor with syntax highlighting and folding.  Announced support for online versions of LibreOffice editors. <br>  - Bookmarks <br>  - URL shortening mechanism <br>  - Photo Gallery <br>  - PDF viewer (using PDF.js) <br>  - ODF file viewer (.odt, .odp, .ods) <br>  - Logging module </blockquote><br>  In terms of functionality, we see a full-fledged cloud that can spin on ... yes, that computer!  With strong paranoia, service activity can be locked inside the local network via a firewall. <br><br>  I have already saved some links to the material on installing and configuring my ownCloud, but when I started to deal with it, I discovered that in 2016, the main developer of ownCloud (Frank Karlichek) left the company and announced the creation of a fork - Nextcloud.  Unlike ownCloud, which is paid for under certain conditions, Nextcloud is completely free.  Considering that the work on the new fork was headed by Frank Karlichek, who has a lot of experience in similar development, I decided to choose Nextcloud.  At the beginning of 2017, the current version of Nextcloud was version 11.0.2 and its installation and configuration will be described below.  As of January 2018, the current version is 12.0.4, but, I think, there should be no fundamental differences in installation and configuration. <br><br><hr><a name="chap2"></a><br><h3>  Formulation of the problem </h3><br>  At first, everything seemed simple and I could not even imagine that it would take two or two and a half interesting months to sit for a couple of days off.  He often reddened his eyes at night and asked clever and not-so-great questions on thematic forums.  My advice to beginners - if you want to do something, do not be afraid of the amount of work and do it.  The main thing is to get at least something for the first time.  The way it even works is crooked.  You can do without understanding how a monkey, to copy a long train of commands, often reaching a place where something fails and nothing happens.  Maybe a mistake was made earlier, maybe a typo in the command, maybe the author in his manual missed a line of code / command, maybe in the example the OS release is different and yours won't work, maybe the libraries are not the same - what else can it be !  But when you succeed in something you will say: ‚ÄúDamn it - it worked!‚Äù This is worth it and will be the beginning of the emergence of excitement, a stimulus to understand further and confidence in what happens: if you succeed once, it means you will succeed in the next one, you just have to figure it out. <br><br>  So, you need to decide what to do.  There are a couple of phones that need to connect to the cloud.  In addition, I would also like to connect a computer to it - the amount of disk space in the cloud now depends only on my desire and I do not need to constantly pay extra for 10/20/30 gigabyte - I can just buy a hard disk for a couple of terabytes.  The central element in the home network is the Wi-Fi router - it is connected to the phone via Wi-Fi, a computer and another computer that performs the role of an unintentional "server": the computer was originally built for the tasks of the failed <a href="https://ru.wikipedia.org/wiki/HTPC">HTPC</a> , and now it just runs the software virtualization from VMWare.  VMWare Workstation has its own virtual router, to which so far only one virtual machine with an FTP server is connected.  The decision suggests itself - to create and connect another virtual machine, through the VMWare network settings, forwarding ports 80 (HTTP) or 443 (HTTPS) to it.  The solution is modular and elegant in the sense that an absolutely hardware-independent and once-configured virtual machine can be easily deployed anywhere, on any ordinary computer. <br><br><img src="https://habrastorage.org/webt/ys/qj/j9/ysqjj9u5sxx4--oxkwrbhyyhdew.png"><br><br><hr><a name="chap3"></a><br><h3>  Creation and basic setup of the virtual machine </h3><br>  Nextcloud - quite roughly speaking, this is a website that runs on a web server.  As a web server, I chose LAMP = Linux + Apache + MySQL + PHP.  This means that all this needs to be installed and configured.  And so that it works correctly, you need to understand what to install and how to configure it. <br><br>  I only encounter Linux periodically and this is more of a hobby than a necessity.  But since I swung versatility, then this time I decided to break the whole work into three logical parts, each of which should end with a well-defined and universal result.  First you need to make yourself a comfortable environment for work, that is, not just to install the system on a virtual machine, but to customize it for yourself, bring it closer to the kind that is more convenient and familiar to me.  The second stage is bringing this machine to a functioning web server.  The third is to turn a web server into a cloud. <br><br>  Debian 8.7.1 was chosen as the operating system.  In VMWare Workstation, a virtual machine is created, which is allocated one dual-thread processor, two gigabytes of RAM, and a hard disk of 120 gigabytes.  Network card operating mode - NAT.  Download the <a href="">ISO image of the operating system for the amd64 architecture</a> .  After downloading, connect the image to the virtual drive and start the virtual machine.  The installation of the operating system is rather trivial and can be done even without the murtilators, which are abundant on the Internet.  Gnome3 was selected as the graphical environment, and the Standard system utilities and Print Server were installed.  The hard disk during the installation process is divided into two sections - a general partition (/, / home, / usr, etc.) and swap.  The newly created user was called neutral ‚Äúuser‚Äù. <br><br>  Immediately after installation, the user is shown an empty desktop.  The nautilus file manager, such as Windows Explorer, never understood why it was used.  The application menu does not shine its structuring.  NumLock after boot is always disabled.  From text editors nano or vi, the beginner Linux user generally becomes depressed.  Something needs to be fixed.  The following description of the system "by itself".  There is no argument about tastes: someone will like it, someone will not.  I note that without overcoming the difficulties of professional growth will not be and the more you dig into something - the more you understand how it works. <br><br><hr><a name="chap4"></a><br><h3>  Setup in the control panel </h3><br>  I used to switch the keyboard layout with the CTRL and SHIFT buttons.  Perhaps the driver of the keyboard is to blame since the days of MS DOS 6.22, but what to do now is a second nature habit.  In addition, I do not want the virtual machine to fall asleep or extinguish the screen and do not want to enter a password after each launch. <br><br>  An elementary initial environment setup is done in the control panel: <br><br>  - Language and region ‚Üí Add Russian to input sources. <br>  - Keyboard ‚Üí Keyboard Shortcuts ‚Üí Enter ‚Üí Key modifier switches input sources ‚Üí Assign a language switch button Ctrl + Shift (if you cannot install such a combination, skip this step, configure it in the ‚Äúgnome Setup‚Äù section below). <br>  - Keyboard ‚Üí Keyboard shortcuts ‚Üí Additional combinations ‚Üí Add a new item called ‚ÄúTerminal‚Äù and the ‚Äúx-terminal-emulator‚Äù command.  After adding, click on the label "Off" and enter the combination of two keys: Super (Win) + t. <br>  - Monitors ‚Üí Set the screen resolution to the current display, as the default setting is uncomfortable 800x600. <br>  - Power supply ‚Üí OFF Turns off the display. <br>  - Details ‚Üí Removable media ‚Üí OFF autorun when connecting media. <br>  - Users ‚Üí ON automatic access for user user. <br><br><hr><a name="chap5"></a><br><h3>  BASH setting </h3><br>  The next important step is setting up the terminal.  With the command line will have to work very much.  Moreover, some, if not many, things in Linux are easier and more convenient to do through the terminal, and that is why in the previous paragraph we made a key combination to quickly call the terminal.  Bash is a command language interpreter that executes commands from the keyboard.  Bash can highlight files, folders, network folders, files with different access rights in different colors.  With the backlight it becomes somewhat easier and more fun to navigate. <br><br>  Important note.  Lines of commands starting with the $ symbol will indicate that the command must be entered on behalf of the user - you just need to open the terminal (it is searched in the application menu or simply press the Super + T combination) and enter the command.  If the line starts with a # character, this means that input must be made on behalf of the superuser (root).  To do this, open the user terminal and enter the command: <br><br>  <b>$ su</b> <br><br>  After that, enter the superuser password that was set during the installation of the system. <br><br>  So, how do I color the terminal?  To do this, run the command: <br><br>  <b>$ nano /home/user/.bashrc</b> <br><br>  This command opens the bashrc configuration file in the nano text editor.  In this file you need to find and uncomment the line ‚Äúforce_color_prompt = yes‚Äù.  Below, we look for a line of the following form (below the condition if ["$ color_prompt" = yes]; then): <br><blockquote>  PS1 = '$ {debian_chroot: + ($ debian_chroot)} \ [\ 033 [01; 32m \] \ u @ \ h \ [\ 033 [00m \]: \ [\ 033 [01; 34m \] \ w \ [\ 033 [00m \] \ $ ' </blockquote><br>  and copy it (Shift + Ctrl + C), after which the editor can be closed (Ctrl + X) with saving the changes made. <br><br>  Next, run the following command: <br><br>  <b># nano /root/.bashrc</b> <br><br>  Again, the configuration file is opened, but for the superuser.  Below the commented out line "# PS1 = ..." you need to insert (Shift + Ctrl + V) the copied line with a slight change (with the replacement of the number 32 by 31): <br><blockquote>  PS1 = '$ {debian_chroot: + ($ debian_chroot)} \ [\ 033 [01; 31m \] \ u @ \ h \ [\ 033 [00m \]: \ [\ 033 [01; 34m \] \ w \ [\ 033 [00m \] \ $ ' </blockquote><br>  This small change will change the color of the Bash prompt: the user @ user debian user prompt will be highlighted in green and the super user root @ debian in red.  This will help from inadvertent confusion, when by mistake commands are entered from the wrong user. <br><br><hr><a name="chap6"></a><br><h3>  Setting up repositories </h3><br>  The repository is a database of packages available for installation.  It is important to keep this database up to date.  Immediately after installation, we have registered a basic repository and a link to the installation DVD, which contains a number of popular packages.  To work with repositories, you can use the synaptic program with a graphical interface.  But it is much easier to edit the list manually through a plain text editor: <br><br>  <b><b># nano /etc/apt/sources.list</b></b> <br><br>  Check the list of repositories for compliance with the list below. <br><blockquote>  # security updates <br>  deb <a href="http://security.debian.org/">security.debian.org</a> jessie / updates main contrib non-free <br>  deb-src <a href="http://security.debian.org/">security.debian.org</a> jessie / updates main contrib non-free <br>  # jessie-updates <br>  deb httpredir.debian.org/debian jessie-updates main contrib non-free <br>  deb-src httpredir.debian.org/debian jessie-updates main contrib non-free <br>  # binary and source packages <br>  deb httpredir.debian.org/debian jessie main contrib non-free <br>  deb-src httpredir.debian.org/debian jessie main contrib non-free <br>  # backports <br>  # deb httpredir.debian.org/debian jessie-backports main contrib non-free <br>  # deb-src httpredir.debian.org/debian jessie-backports main contrib non-free </blockquote><br>  The Backports repository is registered but disabled.  Strictly speaking, it is possible and not to register it, but if you register it right away, then it will be easier to disconnect or connect this repository - you just need to comment out or uncomment the required lines.  Why is he even needed?  The fact is that, along with the fact that Debian is one of the most stable distributions, as a result, software in its repositories is often decently outdated.  Connecting Backports is an easy way to get a much newer version of some kind of software (even newer than in the testing Debian branch).  But you need to be very careful, because if you install some kind of program, other packages may pull up on dependencies that may break the system due to the incompatibility of the old software with the new packages.  Backports - this is the case when you know exactly why you are doing this. <br><br>  After any changes in the contents of the sources.list file, it is necessary to synchronize with the repositories: <br><br>  <b># apt-get update</b> <br><br>  Be sure to look at the log - no errors should be.  Otherwise, you need to check the correctness of the contents of the sources.list file. <br><br><hr><a name="chap6"></a><br><h3>  Operating system update </h3><br>  To find out the current version of the system, run the command: <br><br>  <b>$ cat / etc / debian_version</b> <br><br>  If the system is installed from the image at the link above, then its number will be 8.7. <br><br>  To upgrade the system, there are two commands: apt-get upgrade and apt-get dist-upgrade.  The first command will only update installed packages, but there may be conflicts and unmet dependencies.  This is a kind of safe update, in which the old programs do not deteriorate exactly, but the new ones may not work.  The second command will remove old packages, resolve conflicts, deliver necessary dependencies, and deliver new packages, if required.  If conflicts arise, it will attempt to update the most important packages at the expense of less important ones.  That smarter update. <br><br>  Update the system: <br><br>  <b># apt-get dist-upgrade</b> <br><br>  After updating the system, we check the log for errors, check the new current version of the system and make sure that everything is as expected. <br><br><hr><a name="chap8"></a><br><h3>  Software installation </h3><br>  Install the following packages: <br><br>  <b># apt-get install mc</b> <b><br></b>  <b># apt-get install gksu</b> <b><br></b>  <b># apt-get install numlockx</b> <b><br></b>  <b># apt-get install libcanberra-gtk-module</b> <b><br></b>  <b># apt-get install libqt5webkit5 libqt5svg5 coreutils</b> <b><br></b>  <b># apt-get install doublecmd-gtk</b> <b><br></b>  <b># apt-get install galculator</b> <b><br></b>  <b># apt-get install samba smbclient cifs-utils</b> <b><br></b>  <b># apt-get install jigdo-file</b> <b><br></b>  <b># apt-get install audacious</b> <b><br></b>  <b># apt-get install smplayer</b> <b><br></b>  <b># apt-get install firefox-esr</b> <b><br></b>  <b># apt-get install gufw</b> <br><br>  <b>mc</b> is the good old Notron Commander only in Linux.  Forget about the commands ls, cd, mkdir, rm and others. <br><br>  <b>gksu</b> - allows you to run programs with a graphical interface on behalf of the superuser, as well as add a superuser terminal to the application menu, which can be launched immediately, rather than performing the sequence ‚Äúterminal ‚Üí $ su ‚Üí entering the superuser password‚Äù. <br><br>  <b>numlockx</b> - will help solve the problem with the numlock mode after booting the system, since by default it is always turned off. <br><br>  The <b>libcanberra-gtk-module packages, libqt5webkit5, libqt5svg5 coreutils</b> are needed for the operation of the two-paneled Double Commander manager and the text editor Notepadqq, which we will install later. <br><br>  <b>doublecmd-gtk</b> is an analogue of Total Commander for Linux. <br><br>  <b>galculator</b> - just a calculator that can switch to the engineering view. <br><br>  <b>samba smbclient cifs-utils</b> ‚Äî packages needed to support networking: folder sharing, access to shared folders, mounting network resources. <br><br>  <b>jigdo-file</b> is a tool for downloading and updating CD, DVD, BD images.  For example, if you ever want to create a fully autonomous and complete official repository from Blu-Ray discs of the Debian distribution, then this particular ‚Äútorrent‚Äù will be needed, since Blu-Ray discs are distributed primarily through jigdo. <br><br>  <b>audacious</b> - audio player. <br><br>  <b>smplayer</b> - video player. <br><br>  <b>firefox-esr</b> - the browser does not need to be presented. <br><br>  <b>gufw</b> is the GUI for the firewall configuration utility. <br><br>  The above programs will somewhat complement the basic software package of the installed system, which is considerable if a standard set of utilities was chosen during the installation of the system.  MS Office functions are performed by the LibreOffice software package, there is a GIMP image editor, Transmission for torrents, an Evolution mail client, a photo viewer, a simple text editor gedit, and other software.  Audio and video players in the standard set is also there, but audacious and smplayer will be more functional and convenient programs. <br><br><hr><a name="chap9"></a><br><h3>  Software setup </h3><br>  numlockx solves the problem with the numlock mode after booting the system.  After installing the package, simply execute the command: <br>  # numlockx on <br>  And now after loading the operating system NumLock will always be included. <br><br>  I brought the file manager to Double Commander to a more minimalist view by performing the following actions in its menu: <br><br>  - View ‚Üí Short (run on both panels) <br>  - Settings ‚Üí Parameters ‚Üí Tools ‚Üí Terminal ‚Üí Register ‚Äúx-terminal-emulator‚Äù in the section ‚ÄúTerminal start command‚Äù, leave the parameter field empty <br>  - Settings ‚Üí Parameters ‚Üí Fonts ‚Üí all fonts = 11, font ‚ÄúViewer (‚Äú Book ‚Äúmode)‚Äù = 14 <br>  - Settings ‚Üí Options ‚Üí View files ‚Üí Select sorting method ‚ÄúNatural sorting: alphanumeric‚Äù <br>  - Settings ‚Üí Options ‚Üí View files ‚Üí Set the option "Show system and hidden files" <br>  - Settings ‚Üí Options ‚Üí Window view ‚Üí Set trail only.  options: <br>  - Main menu <br>  - Toolbar + Flat <br>  - Disc list button <br>  - A line of free disk space + Short <br>  - Current path <br>  - Tab Headers <br>  - Status bar <br>  - Function key buttons <br>  - Flat interface <br>  - The panel of background operations <br><br>  The SMPlayer video player was also configured a bit through the menu item ‚ÄúSettings‚Äù: <br><br>  - Panels ‚Üí OFF Main panel and Language panel <br>  - Settings ‚Üí General: OFF ‚ÄúMemorize settings of all files‚Äù <br>  - Settings ‚Üí Appearance: Automatically resize - ON when it is needed <br>  - Settings ‚Üí Appearance: OFF ‚ÄúRemember position and size‚Äù <br>  - Settings ‚Üí Updates: OFF ‚ÄúCheck for updates‚Äù and OFF ‚ÄúOpen page with information after update‚Äù <br><br>  Of the minimum extensions for firefox, Ghostery is worth mentioning, with which you can block many tracking bugs and ads, and friGate, which expands the browser's ability to configure a proxy (we do not need a proxy, of course, but it is always at hand) .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I note that it is worthwhile to install friGate version 2.2.1.1 (from archives), since the 3.x branch demonstrates the complete victory of the ‚Äúeffective‚Äù management and marketing over common sense. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What should I do if I need the Flash Player in my browser? </font><font style="vertical-align: inherit;">On </font></font><a href="https://get.adobe.com/ru/flashplayer/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the Adobe Flash Player download page,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> select .tar.gz for Linux and download the proposed file. </font><font style="vertical-align: inherit;">From the archive you need to ‚Äúget‚Äù libflashplayer.so and copy it to /home/user/.mozilla/plugins. </font><font style="vertical-align: inherit;">All actions can be done through Double Commander - he knows how to enter the archives as folders. </font><font style="vertical-align: inherit;">Below I gave how to do this through commands in the terminal: </font></font><br><br> <sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ </font></font><a href="https://geektimes.ru/post/297093/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This text was</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> written specifically for the site </font></font><a href="https://geektimes.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geektimes.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> by </font></font><a href="https://geektimes.ru/users/alexanders/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AlexanderS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Reference to the source is optional, but its mention is highly desirable!</font></font></sup>  <sup>]</sup> <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ cd / home / user / </font><font style="vertical-align: inherit;">downloads </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ mkdir flash </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ tar xzf flash_player_npapi_linux.x86_64.tar.gz -C flash </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ mv flash / libflashplayer.so /home/user/.mozilla/plugins</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> After you restart firefox and allow the flash plugin to work on sites should earn. But in some cases it may not be enough or tasks require running the flash locally from some application. Then you can install the Flash Player in the system, although it seems to me that this is far from the best idea (actually, just like allowing flash in the browser). To do this, we need to convert the resulting archive into a DEB package, which we then install using the package manager. Actually it's easy. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Install the converter and compiler: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># apt-get install alien make gcc</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Convert the resulting archive:</font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># alien --to-deb flash_player_npapi_linux.x86_64.tar.gz See</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> what package we got, say flash-player-npapi-linux.x86-64_1-2_all.deb, and install it: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># dpkg --install flash-player -npapi-linux.x86-64_1-2_all.deb</font></font></b> <br><br><hr><a name="chap10"></a><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gnome setup </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is time to make changes in accordance with their own ideas about how the graphical environment should look. After all, one of the most remarkable features in Linux is that there are a lot of things you can customize without being a programmer in the full sense of this meaning. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With the installation of Double Commander, you can say: "Down with the command line!" But what if you need to wander in folders from the superuser? Every time to go to the superuser terminal and type doublecmd? It can be easier! Create a shortcut in the menu for Double Commander, which will run it in the root session: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># doublecmd / usr / share / applications</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You need to make a copy of the doublecmd.desktop file and name the new doublecmd-root.desktop file. </font><font style="vertical-align: inherit;">You can use the usual keyboard shortcut Ctrl + C and Ctrl + V. </font><font style="vertical-align: inherit;">Next, you need to open the doublecmd-root.desktop file (press the usual F4 button to launch the text editor built into the file manager) and adjust the corresponding lines to the following view:</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Name = Double Commander [root] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exec = gksu doublecmd</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Then we close all open programs and go to the "Applications" menu, in which we delete all the icons from the favorites (left vertical column with program icons). Then from the program menu we add (drag and drop) to favorites icons in the following order: Double Commander ‚Üí Nautilus ‚Üí Firefox ‚Üí Terminal ‚Üí Galculator ‚Üí Superuser Terminal ‚Üí Double Commander [root]. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After these changes, restart the graphical shell: press Alt + F2 and enter the command r. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now let's get down to fine-tuning the shell. There is a special software for this: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ gnome-tweal-tool</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I note that you need to run the command only on behalf of the user, and not the superuser. I ran it for some time from under the superuser and could not understand why I didn‚Äôt work at all. After launch, a menu appears in which I made the following changes: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Top panel ‚Üí ON display date </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Windows ‚Üí ON maximize and minimize windows </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Desktop ‚Üí ON display icons on the desktop, DISABLE system icons (Network, Trash, etc.) d.) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Extensions ‚Üí ON extensions Applications Menu, Window List </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Power supply ‚Üí turn off the computer when you press the power button (select Shutdown)</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If at the ‚ÄúSettings in the control panel‚Äù stage it was not possible to configure the keyboard layout switching by Ctrl + Shift, then make the change with the following item: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Keyboard ‚Üí in the ‚ÄúSwitch to another layout‚Äù item, select the Ctrl + Shift key combination </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the ‚ÄúExtensions‚Äù </font><font style="vertical-align: inherit;">option </font><font style="vertical-align: inherit;">below There is a link to download additional extensions, when you click on it, the browser will open a site with additions for </font></font><a href="https://extensions.gnome.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gnome</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Through the search, we find the Lock keys and Remove dropdown arrows extensions and install them. Be careful - before searching for extensions, you must enable the temporary execution of the Gnome Shell Integration plugin in your browser. When you open a page with an extension at the top there is a ON / OFF dvizhkovaya button, by clicking on which you will be prompted to add an extension. The first extension will add the indicator of the Caps Lock and Num Lock buttons (I have a wireless keyboard, on which there are no corresponding indicators). The second is to remove the drop arrows at the application menu, taskbar windows and language bar. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a result of such uncomplicated tuning, the graphics environment at us approached a more practical form. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How it was: </font></font><br><br><img src="https://habrastorage.org/webt/a0/pw/-r/a0pw-rbwv3lavh4b_a7ikfxb1ia.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As it became (the screen resolution, unfortunately, is already different):</font></font><br><br><img src="https://habrastorage.org/webt/dz/n5/pb/dzn5pbmoysw3en9pizxgjzyq2bm.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There may be some differences at first glance compared to the number of actions that have been done, but now it‚Äôs clear how and what to do and where to go if necessary. </font><font style="vertical-align: inherit;">As our lecturer in quantum physics once said: ‚ÄúYou are not required to understand quantum physics right now, you are required to understand which section of the textbook to open when this becomes necessary.‚Äù</font></font><br><br><hr><a name="chap11"></a><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Network configuration </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For networking with your virtual machine, create a folder and give everyone the rights to change it: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ mkdir / home / user / Net </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ chmod 777 / home / user / Net</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now we need to expand this folder. </font><font style="vertical-align: inherit;">In Linux, this makes it very simple: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># mcedit /etc/samba/smb.conf</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> At the end of the opened file, you need to add a new section by writing the following text:</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Net] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">path = / home / user / Net / </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comment = Net Folder </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">readonly = no </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">guest ok = yes</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After all these actions, you need to restart the service to apply the new config: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># service smbd restart</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> No operating system reboots are required - the Net folder within the guest virtual machine will immediately be available from the host operating system.</font></font><br><br><hr><a name="chap12"></a><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Firewall setup </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux has a powerful IPTables tool to configure firewall. Unfortunately, once it does not immediately plunge into it, especially for a beginner, and if you do not use it periodically, then it is quite easy to lose the experience of setting Therefore, we will use a special utility for configuring iptables rules - Uncomplicated Firewall (ufw). Rules can be created via a graphical interface, for which gufw was installed, but, as I said, initially this is easier to do through the terminal. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enable firewall logging and configure its rules - we prohibit all incoming: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># ufw logging on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># ufw default deny incoming </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># ufw default allow out out Allow</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> connections for the network environment and file access: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># ufw allow 138 / udp </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># ufw allow 139 / udp</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># ufw allow 139 / tcp </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># ufw allow 445 / tcp We</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> allow connections for the functioning of mail clients: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># ufw allow 25 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># ufw allow 465 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># ufw allow 110 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># ufw allow 143 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># ufw allow 993</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Enable protection: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># ufw enable</font></font></b> <br><br><hr><a name="chap13"></a><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Installing vmware-tools 10.0.10 in a Debian 8.7.1 environment </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In addition to drivers for virtual equipment (for example, a video card or a chipset), vmware-tools will enable you to connect any folders from the host system to the virtual machine, as well as include a shared clipboard between the host and the guest systems. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It just so happened that my history of working with vmware-tools in Linux is the history of </font></font><a href="https://habrahabr.ru/post/259749/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">periodic walking around the rake</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . At one time I even used open-vm-tools, but there were problems with mounting the hgfs folder (it is there that the connected folders appear in the Shared Folders section of the virtual machine settings). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In early 2017, I had VMWare Workstation 12.1.0, which was bundled with a set of ISO images of vmware-tools version 10.0.10. Oddly enough, everything went unexpectedly smooth, quiet and peaceful.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To install vmware-tools, we will need to install a compiler and, of course, headers, without which vmware-tools are normal, at least not before, in principle, they were not going to: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># apt-get install linux-headers - $ (uname -r) make gcc</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This time I did not place the linux.iso image into a virtual drive, but copied it to a network folder (we already have the network) and then mounted it in Linux and unpacked the required archive: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># mkdir / mnt / iso </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># chmod 777 / mnt / iso </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># mount -o loop -t iso9660 /home/user/Net/linux.iso/mnt/iso </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ tar xvzf </font><font style="vertical-align: inherit;">/mnt/iso/ </font><font style="vertical-align: inherit;">VMwareTools-10.0.10-4301679.tar.gz -C / home / user / Net</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now you can run a script that will compile and install vmware-tools: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ cd / h ome / user / Net / vmware-tools-distrib</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># ./vmware-install.pl</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The first question of the script must be answered in the affirmative, all subsequent questions must be answered with default values ‚Äã‚Äã(just press Enter everywhere). </font><font style="vertical-align: inherit;">During the compilation process, warnings may appear, but there should be no errors. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After installation, delete unnecessary files and reboot: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># umount / mnt / iso </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ rm -rf / home / user / Net / vmware-tools-distrib </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ rm </font><font style="vertical-align: inherit;">/ home / user / Net / </font><font style="vertical-align: inherit;">linux.iso </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># reboot</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> After reboot, you should go and check the presence of the folder / mnt / ngfs - if it exists, then the installation went well. </font><font style="vertical-align: inherit;">In addition, the resolution scaling inside the virtual system to the size of the VMWare window should start working normally and the joint clipboard should turn on.</font></font><br><br><hr><a name="chap14"></a><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Build, install and configure notepadqq </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I have long been accustomed to the Total Commander + Notepad ++ bundle and, naturally, I was looking for an alternative in Linux. The role of Total Commander is a good substitute for Double Commander, although there is nothing to completely replace Total. There was also an analogue of Notepad ++, which is called Notepadqq, which also does not completely replace Notepad ++, but is better than the built-in editor Double Commander or the same nano. At least syntax highlighting in Notepadqq is there and it works fine. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suddenly, there was only one problem - there was no package in the repositories. I found the compatible deb package for installation, but the version was irrelevant and the software was frankly and godlessly buggy. There were no options - you had to build the package yourself from the available sources.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After downloading the archive with the source code, the file README.md was found inside, in which the instructions for building and installing the package were found using the make utility. However, I wanted to have a full-fledged package, which I could install and remove without serious consequences, which in principle is impossible by installing it through make install. In general, on Habr√© there is a </font></font><a href="https://habrahabr.ru/post/130868/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">good article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on this topic. So I built the package via checkinstall. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First you need to install the packages needed to run: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># the apt-the get the install the git-by qmake Qt5 the checkinstall </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># the apt-the get the install libqt5webkit5 libqt5svg5 coreutils </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># the apt-libqt5webkit5 the get the install-dev-dev libqt5svg5 qttools5-dev-tools </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># the apt-the get the install libcanberra- gtk-module</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Download the source code (as of the beginning of 2017, the current version was 1.0.1) and start the fakeroot session: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ git clone </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/notepadqq/notepadqq.git</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> $ cd notepadqq </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ fakeroot</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fakeroot runs programs in a special environment that emulates a super-user session . </font><font style="vertical-align: inherit;">Elevated permissions may be required for the make utility to work. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now you need to configure the environment for the project depending on the processor architecture (in my case - the first option, x86_64): </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ ./configure --prefix / usr --qmake / usr / lib / x86_64-linux-gnu / qt5 / bin / qmake</font></font></b> <br><br>  or <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ ./configure --prefix / usr --qmake / usr / lib / i386-linux-gnu / qt5 / bin / qmake</font></font></b> <br><br>  or <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ ./configure --prefix / usr --qmake / usr / lib / arm-linux-gnueabihf / qt5 / bin / qmake</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> And compile the program, watching what is happening in the terminal: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ make</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> After successful compilation, you can build a package with information about him: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ checkinstall -D --install = no</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you run checkinstall without the ‚Äú--install = no‚Äù directive, then the assembled package will be automatically installed into the system, and the package file will be immediately deleted. It categorically did not suit me, because for the assembly I use a separate virtual machine (you should not trash the target machine with different compilers, IDE and other software that will never be used there) and as a result I needed to get a normal DEB package that I can transfer to the desired virtual machine and install there. The "--install = no" directive is needed in order to only create a package and not install it.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">During the build process, we will be asked a question about the package description. I wrote the following: "Notepadqq 1.0.1 amd64 build 20170326". After entering the description, I would recommend to fill in the Maintainer field (package builder, its attendant) - press the 0 (zero) button and enter your nickname or at least something, but do not leave it empty. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After the package is built, we exit the fakeroot session: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ exit</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> If everything went well and without errors, then we have a file in our working folder that looks like notepadqq_20170326-1_amd64.deb. Now you can install it using the normal package manager: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># dpkg ‚Äìi notepadqq_20170326-1_amd64.deb</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Launch Double Commander and connect notepadqq as the default editor:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Settings ‚Üí Editor ‚Üí Enable the option "Use external program", as a way to register: notepadqq The </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">version 1.0.1 I assembled has proven itself very well and I have worked with it for a whole year. </font><font style="vertical-align: inherit;">Now we know how to properly build packages from source - it‚Äôs not hard at all!</font></font><br><br><hr><a name="chap15"></a><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Build and install Double Commander </font></font></h3><br>  In the established Double Commander there were several troubles.  It was buggy when working with network folders and editing long file names.  In addition, sometimes it is crookedly closed from under the superuser.  Version 0.5.x was originally installed from the repository, while 0.7.8 was available on the project site, which did not hurt with these problems.  An attempt to get a DEB package brought to the resource launchpad.net/ubuntu, where it was proposed to download several assembled packages of version 0.6.x and install them in some combination.  Why a few packages?  And the version is not new at all.  An attempt to recklessly install a new version from Backports led to a system crash, it was not possible to fix it, and I simply deleted the virtual machine, pulling up the carefully saved backup image file of the hard disk. <br><br>  However, what problems can there be if there is source code?  I can now compile and build the package myself!  At first everything went as usual.  Getting the source code, the trial that there and where and attempts to somehow compile them, not understanding the logic of their actions.  Then I was still honored to read the documentation from which it followed that no make would help to compile - a full <a href="https://ru.wikipedia.org/wiki/%25D0%2598%25D0%25BD%25D1%2582%25D0%25B5%25D0%25B3%25D1%2580%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2581%25D1%2580%25D0%25B5%25D0%25B4%25D0%25B0_%25D1%2580%25D0%25B0%25D0%25B7%25D1%2580%25D0%25B0%25D0%25B1%25D0%25BE%25D1%2582%25D0%25BA%25D0%25B8">IDE</a> is needed, in which the project is being developed.  Well ... why not put an IDE?  And I quickly went over the rake, not assuming that this will take about a week. <br><br>  To work, we need to install the already familiar packages: <br><br>  <b># apt-get install make gcc checkinstall subversion</b> <br><br>  For a normal IDE (Lazarus) installation, the following packages must be delivered: <br><br>  <b># apt-get install libdbus-1-dev libglib2.0-dev libncurses5-dev libx11-dev libgtk2.0-dev libcanberra-gtk-module</b> <br><br>  A very important note: on <a href="https://doublecmd.sourceforge.io/mediawiki/index.php/Development">the wiki development page of the project there</a> is a list of necessary packages, which contains the libgtk-2.0-dev package, which actually does not exist - instead you need to install libgtk2.0-dev (without a hyphen!). <br><br>  Now we need to install the IDE itself.  Lazarus is an open source Pascal software development environment for the Free Pascal compiler.  That is, in addition to the IDE, you must also install the compiler.  First, I cheerfully found and downloaded the necessary files, of course the latest version, installed them and for a long time could not understand the reason why the project is not compiling hard.  Of course, given that I did everything for the first time on a software that I had never seen before, I made magical mistakes and illogical actions.  But the truth turned out to be bitter - in conjunction with the problem of an extra hyphen in libgtk-2.0-dev, it turned out that Double Commander 0.7.8 recommended using lazarus 1.6.2, and not 1.6.4, which I installed. <br><br>  To install the development environment, you need to open <a href="https://sourceforge.net/projects/lazarus/files/">the Lazarus project site</a> and select Lazarus Linux amd64 DEB or Lazarus Linux i386 DEB, depending on the processor architecture.  After that, select the IDE version (for Double Commander 0.7.8 - 1.6.2) and download the lazarus-project, fpc, fpc-src packages. <br><br>  Install packages <br><br>  <b># dpkg -i fpc_3.0.0-151205_amd64.deb</b> <b><br></b>  <b># dpkg -i fpc-src_3.0.0-151205_amd64.deb</b> <b><br></b>  <b># dpkg -i lazarus-project_1.6.2-1_amd64.deb</b> <br><br>  After installation, run the development environment, ignoring the warning about the inaccessibility of the debugger: <br><br>  <b>$ startlazarus</b> <br><br>  In the ‚ÄúService‚Äù settings, select rebuilding (recompiling) lazarus (according to the Normal IDE profile).  The IDE should re-arrange normally - otherwise it is impossible to continue working with it and it‚Äôs necessary to figure out why it never happened, but, it happened again.  There have been cases that it was easier to take a new virtual machine and do it all over again, because during the installation / uninstall process of lazarus, something was not installed or removed somewhere, and the system was irreversibly littered. <br><br>  After all the resolved issues with the IDE, we get the source code.  You can get the source code from svn (release 0.7): <br><br>  <b>$ svn co <a href="">svn.code.sf.net/p/doublecmd/code/branches/0.7</a> doublecmd</b> <br><br>  You can get the source code of the current project with svn: <br><br>  <b>$ svn co <a href="https://svn.code.sf.net/p/doublecmd/code/trunk">svn.code.sf.net/p/doublecmd/code/trunk</a> doublecmd</b> <br><br>  You can simply download the source code <a href="https://sourceforge.net/p/doublecmd/wiki/Download/">from the project site</a> and unzip the file: <br><br>  <b>$ tar xzf doublecmd-0.7.8-src.tar.gz</b> <br><br>  Suppose we got a folder with the source code and it is located on the path / home / user / work / doublecmd. <br><br>  Next you need to compile the project.  Run the IDE in the fakeroot session: <br><br>  <b>$ fakeroot</b> <b><br></b>  <b>$ startlazarus</b> <br><br>  In accordance with the doublecmd \ doc \ INSTALL.txt file (for the current version, specify the packages on <a href="https://doublecmd.sourceforge.io/mediawiki/index.php/Development">the project development page</a> in the ‚ÄúBuilding from source‚Äù section) you need to connect or compile the packages to lazarus, and after connecting the last package, reassemble lazarus.  This is done as follows: follow the menu Package ‚Üí Open package file (.lpk) ‚Üí Select the required file and open it ‚Üí In the new window that opens, press the ‚ÄúUse‚Äù button and then select ‚ÄúInstall‚Äù, if ‚ÄúInstall‚Äù is not available, then just click on the button "Compile".  All components are located in the components folder of the source code.  We need to connect the following components: <br><blockquote>  - chsdet / chsdet.lpk <br>  - CmdLine / cmdbox.lpk <br>  - multithreadprocs / multithreadprocslaz.lpk <br>  - dcpcrypt / dcpcrypt.lpk <br>  - doublecmd / doublecmd_common.lpk <br>  - KASToolBar / kascomp.lpk <br>  - gifanim / pkg_gifanim.lpk <br>  - viewer / viewerpackage.lpk </blockquote><br>  After connecting the last component, you need to affirmatively answer the question about rebuilding IDE or start rebuilding yourself via the ‚ÄúService‚Äù menu. <br><br>  If the rebuilding is successfully completed, you can try to compile the project by opening the doublecmd / src / doublecmd.lpi file through Lazarus and running the compilation (F9 button).  After successful compilation (warnings can be shown in the process, but nothing terrible - the main thing is that there should not be fatal errors) Double Commander should open up.  If this does not happen, then, with a high degree of probability, an error occurred during the compilation process and you need to figure out what to do with it and how to live on.  You can try to solve the problem logically, but in the absence of experience there are very few chances, of course.  Therefore, gently pick up the text of the error in the clipboard and go with it directly to the unknown distance of the Internet. <br>  After successful compilation of the project we close the IDE. <br><br>  So, we got a doublecmd binary file in the source folder that runs.  Everything is good, but ... and how to make a normal package?  Here daddy install will help us.  If you carefully watch the code of the create_packages.sh file, the very name of which is very encouraging, you can draw far-reaching conclusions about what we need in terms of the parameters that need to be written when the script is run.  There may even be some documentation on the application of this script, but I had a logical understanding of the code.  One just launching the execution of this file didn‚Äôt give me anything, as the process constantly crashed and stopped on errors, as a rule, the lack of the necessary paths.  To successfully build a package, you need to tweak the create_packages.sh script. <br><br>  We search for a line in the code and comment or delete it: <br><blockquote>  svn export ../ $ BUILD_DC_TMP_DIR </blockquote><br>  Below we write: <br><blockquote>  cp -vR / home / user / work / doublecmd / $ BUILD_DC_TMP_DIR </blockquote><br>  We search for a line in the code and comment or delete it: <br><blockquote>  linux / update-revision.sh ../ $ BUILD_DC_TMP_DIR </blockquote><br>  If the code is received from svn, then these two changes can be not made, but when downloading the code as a separate archive without these edits, the package could not be made. <br>  Next, look for the line and comment / delete again: <br><blockquote>  export MAINTAINER = "Alexander Koblov &lt;Alexx2000@mail.ru&gt;" </blockquote><br>  Instead, we prescribe ourselves: <br><blockquote>  export MAINTAINER = "Vlastelin Mira" </blockquote><br>  Next, look for the line and comment / delete again: <br><blockquote>  checkinstall -D --default --pkgname = doublecmd --pkgversion = $ DC_VER --pkgarch = $ DEB_ARCH --pkgrelease = 1. $ lcl --pkglicense = GPL --pkggroup = contrib / misc --requires = libx11-6 --nodoc --pakdir = $ PACK_DIR $ BUILD_DC_TMP_DIR / install / linux / install.sh </blockquote><br>  Below we write the same thing, but with a slight change, which will make it possible not to install it automatically into the system after the package is assembled and will save the assembled package: <br><blockquote>  checkinstall -D --install = no --default --pkgname = doublecmd --pkgversion = $ DC_VER --pkgarch = $ DEB_ARCH --pkgrelease = 1. $ lcl --pkglicense = GPL --pkggroup = contrib / misc - requires = libx11-6 --nodoc --pakdir = $ PACK_DIR $ BUILD_DC_TMP_DIR / install / linux / install.sh </blockquote><br>  We start the generation of the package for Debian in the fakeroot session from which we did not leave: <br><br>  <b>$ ./create_packages.sh -D --ws = gtk2 --cpu = x86_64</b> <br><br>  Watching magic in the console - so much is happening there!  After successfully building the package, we exit the fakeroot session: <br><br>  <b>$ exit</b> <br><br>  The resulting package, for example, doublecmd_0.7.8-1.gtk2_amd64.deb, will be in / doublecmd / install / linux / release / from where it can be installed with the usual command: <br><br>  <b># dpkg -i doublecmd_0.7.8-1.gtk2_amd64.deb</b> <br><br><hr><br>  Return <a href="https://habr.com/ru/post/371159/">to the beginning, to the table of contents</a> . <br><br><hr><br>  The history of creating a home cloud.  Part 1. Setting up a Debian environment for everyday use. <br>  Text version: 1.1.0. <br>  Date of the first publication: 10.01.2018. <br>  Last edited on: 01/10/2018. <br><br><div class="spoiler">  <b class="spoiler_title">Update log</b> <div class="spoiler_text">  1.1.0 [10-01-2018] <br>  The article title is added. <br><br>  1.0.0 [01/10/2018] <br>  First version. <br>  Describes how to set up a Debian 8.7.x environment and build from source of the packages Notepadqq 1.0.1 and Double Commander 0.7.8. <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/371159/">https://habr.com/ru/post/371159/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../371149/index.html">Astronautics 2017 on Geektimes, part 2: flights to the Moon, Mars and Venus</a></li>
<li><a href="../371151/index.html">ITER Project in 2017</a></li>
<li><a href="../371153/index.html">Christmas gifts, part one: Meltdown</a></li>
<li><a href="../371155/index.html">Thinkpad T43: About Computer Archeology, Collectibles, and Cakes</a></li>
<li><a href="../371157/index.html">One of the pioneers of cosmonautics John Young died.</a></li>
<li><a href="../371161/index.html">Overview of mobile applications for personal financial accounting</a></li>
<li><a href="../371163/index.html">Not a single IELTS: what other English exams are there?</a></li>
<li><a href="../371165/index.html">Giza device [suspended]</a></li>
<li><a href="../371167/index.html">Ask Ethan: Why do stars come in different sizes?</a></li>
<li><a href="../371169/index.html">A little-known generalization of the Pythagorean theorem</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
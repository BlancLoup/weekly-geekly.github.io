<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Continuous Integration (CI) for GitHub C / C ++ projects with CMake build</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Probably, everyone has heard about continuous integration and its healing properties - I will not repeat what was written in numerous introductory art...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Continuous Integration (CI) for GitHub C / C ++ projects with CMake build</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad2/54e/b5b/ad254eb5bc55b5223ee494ea845cbdb5.png" alt="Continuous integration"></div><br><p>  Probably, everyone has heard about continuous integration and its healing properties - I will not repeat what was written in numerous introductory articles and reviews and tell you what continuous integration is and how it simplifies the life of developers, release engineers and managers.  It is assumed that the reader himself is well aware that CI, regardless of the programming languages ‚Äã‚Äãused in the project, is <em>absolutely the right approach</em> , but ... But now, for practical reasons, it has not reached its practical implementation yet. </p><br><p>  This article is a tutorial on screwing <em>basic continuous integration</em> (build-test-deploy) to gitkhabovsky C / C ++ projects with a CMake build ‚Äî for some unknown reason, this has not yet been the case at Habr√©.  However, if my Google Fu let me down, and still slipped - it does not matter.  An extra tutorial that describes everything from a slightly different angle and warns against a unique set of cones stuffed by the author will definitely not hurt. </p><br><a name="habracut"></a><br><h2>  We select services </h2><br><p>  I had a few selection criteria (as I naively thought). </p><br><ul><li>  Support for mainstream desktop platforms: <br><ul><li>  Windows </li><li>  Linux </li><li>  Mac os x </li></ul></li><li>  Cloud hosting - so that you do not need to raise and configure your server </li><li>  Out-of-box integration with GitHub </li><li>  Free </li><li>  The size and activity of the user base </li></ul><br><p>  Contrary to my expectations, there was no service alone covering all these requirements.  Strange.  Well, that's okay - the next couple of services is enough: </p><br><p>  1) <a href="https://travis-ci.org/">Travis CI</a> - for Linux and Mac OS X <br>  2) <a href="https://appveyor.com/">AppVeyor</a> - for Windows </p><br><h2>  General plan </h2><br><p>  Both Travis CI and AppVeyor allow you to run virtual machines with pre-installed tools, which will be used for building, testing and deploying. </p><br><div class="spoiler">  <b class="spoiler_title">Docker containers in Travis</b> <div class="spoiler_text"><p> Strictly speaking, Travis is able to work from both a full-featured virtual machine and a Docker container.  In theory, this reduces the time between <code>git push</code> and the start of the build by about one minute.  Unfortunately, in practice, this acceleration will have to be paid by losing the ability to do <code>sudo</code> , and this, in turn, leads to restrictions when installing the necessary dependencies.  After a short dance with a tambourine in an attempt to put 32-bit libraries for cross-compilation into container Travis, I said to myself: just <strong>one minute to</strong> speed up the build - and only <strong>on one of the three</strong> platforms, since  Docker containers in Travis are available only for Linux!  - just not worth the difficulties. </p></div></div><br><p>  How exactly to build, test and deploy the project is described by us in a special configuration file in the <strong>YAML</strong> language.  This file should be in the root of the repository and have the name <code>.travis.yml</code> or <code>appveyor.yml</code> (allowed <code>.appveyor.yml</code> ) - for Travis CI and AppVeyor, respectively.  We want to use both services at the same time, and therefore there will be two files. </p><br><p>  A caution for those who have never used YAML before.  YAML is a syntactic structuring language using <em>indentation</em> (like, for example, Python), but <em>tabs are not allowed</em> .  Therefore, you have to either set up your text editor on <code>expand-tabs-to-spaces</code> for <code>.yml</code> files, or not use tabs in general and fill in indents with spaces. </p><br><p>  After the YAML files are added to the repository, you will need to enable continuous integration for the specified project on the Travis and AppVeyor sites.  This is done very simply.  We go to <a href="https://travis-ci.org/">https://travis-ci.org</a> under our GitHub account, agree with the access requested by Travis CI (he will need to receive notifications about new commits), synchronize the list of his projects, select the desired one and click on the switch.  Is done.  Then we repeat the same process on the site <a href="https://ci.appveyor.com/">https://ci.appveyor.com</a> </p><br><p>  From this point on, every <code>git push</code> into your repository will launch a continuous integration process: Travis and AppVeyor services will bring up a virtual machine, set up an environment, install dependencies, download your project, compile and test it, and, if desired, lay out installers, archives with source files and documentation - all according to the specification in YAML files. </p><br><p>  Actually, in the creation of YAML-files will be our main work. </p><br><h2>  Structure .travis.yml </h2><br><p>  Consider an example of a <code>.travis.yml</code> file with comments: </p><br><pre> <code class="hljs mel">dist: trusty #  Ubuntu <span class="hljs-number"><span class="hljs-number">14.04</span></span> Trusty Tahr (  <span class="hljs-number"><span class="hljs-number">12.02</span></span> Precise Pangolin) sudo: required #  Virtual Machine (  Docker <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>) language: cpp #       C++  # , , <span class="hljs-keyword"><span class="hljs-keyword">python</span></span> -- .    cpp. os: #   CI   Linux,   Mac OS X... - linux - osx compiler: # ...    GCC,  Clang - gcc - clang <span class="hljs-keyword"><span class="hljs-keyword">env</span></span>: #   ,    : - TARGET_CPU=amd64 BUILD_CONFIGURATION=Debug - TARGET_CPU=amd64 BUILD_CONFIGURATION=Release - TARGET_CPU=x86 BUILD_CONFIGURATION=Debug - TARGET_CPU=x86 BUILD_CONFIGURATION=Release <span class="hljs-keyword"><span class="hljs-keyword">matrix</span></span>: exclude: #       : - os: osx compiler: gcc - os: osx <span class="hljs-keyword"><span class="hljs-keyword">env</span></span>: TARGET_CPU=x86 BUILD_CONFIGURATION=Debug - os: osx <span class="hljs-keyword"><span class="hljs-keyword">env</span></span>: TARGET_CPU=x86 BUILD_CONFIGURATION=Release install: #      : - <span class="hljs-keyword"><span class="hljs-keyword">source</span></span> ci/travis/install-$TRAVIS_OS_NAME.sh script: #     : - mkdir build - cd build - cmake .. -DCMAKE_BUILD_TYPE=$BUILD_CONFIGURATION -DTARGET_CPU=$TARGET_CPU - cmake --build . - ctest --output-on-failure deploy: #  tagged-  GitHub Releases: provider: releases <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>: &lt;package-<span class="hljs-keyword"><span class="hljs-keyword">file</span></span>&gt; skip_cleanup: true overwrite: true api_key: secure: &lt;encrypted-github-token&gt; on: tags: true</code> </pre> <br><p>  The installation and deployment scripts require explanations - they will be given below.  First, let us dwell on one of the key concepts of continuous integration - the build matrix. </p><br><p>  We are all familiar with the situation when we made minimal changes to the project, collected, launched, checked - everything works.  Made a release, and - BAM!  He immediately fell on the target machine.  We check it again - it works, the dog!  There is a special acronym in English in this regard: </p><br><p>  <strong>IWOMM - It works on my machine!</strong> </p><br><p>  The difference that leads to the problem can lurk anywhere ‚Äî different versions of the compiler from the developer and on the build machine, a different version of the library on the target, tested on one OS, and launched on another - but what else! </p><br><p>  There can be only one way to deal with this dirty phenomenon - to assemble and test using <em>an extensive assembly matrix</em> , that is, immediately on a <em>variety of possible configurations</em> .  This, coupled with sufficient coverage of the source code with <em>automatic tests</em> , can significantly reduce the likelihood of IWOMM. </p><br><p>  A C / C ++ project on Travis CI makes sense to drive at least the following matrix: </p><br><ul><li>  OS <br><ul><li>  Linux </li><li>  Mac os x </li></ul></li><li>  Compiler <br><ul><li>  Gcc </li><li>  Clang </li></ul></li><li>  Target CPU <br><ul><li>  amd64 </li><li>  x86 </li></ul></li><li>  Configuration <br><ul><li>  Debug </li><li>  Release </li></ul></li></ul><br><p>  Unfortunately, Travis offers a choice of only two Linux distributions - <strong>Ubuntu 12.04 Precise Pangolin</strong> (default) and <strong>Ubuntu 14.04 Trusty Tahr</strong> .  Even apart from the absence of any alternatives to Ubuntu, <strong>let me</strong> remind you that the current LTS (long-term-support) version of Ubuntu is <strong>Ubuntu 16.04 Yakkety Yak</strong> , and the current non-LTS version is <strong>Ubuntu 17.04 Zesty Zapus</strong> .  In other words, in May 2017, we are offered the default version of Ubuntu, released in 2012 and lagging behind 5 major releases.  Hmm.  Well, let's play cards, which is on hand. </p><br><p>  Be that as it may, this matrix contains 16 configurations.  We throw away x86 under Mac OS X from here - the target machine will definitely be 64-bit there.  We also throw out GCC under Mac OS X - GCC under Mac is nothing more than an adapter for GCC-specific command line options, the real compiler will still be Clang.  Exclusion of elements from the assembly matrix is ‚Äã‚Äãperformed in the section </p><br><pre> <code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">matrix</span></span>: exclude:</code> </pre> <br><p>  Caution: if the excluded elements are described using environment variables (as is the case with <code>TARGET_CPU</code> ), then you have to copy the entire line entirely: </p><br><pre> <code class="hljs pgsql">env: TARGET_CPU=x86 BUILD_CONFIGURATION=<span class="hljs-keyword"><span class="hljs-keyword">Debug</span></span></code> </pre> <br><p>  The seemingly logical <code>env: TARGET_CPU=x86</code> will not be enough. </p><br><p>  So there are <strong>12 configurations</strong> left for each <code>git push</code> .  Agree, it is much better than one or two, as is usually the case when testing manually, without using continuous integration? </p><br><p>  In the terminology of Travis CI, it all sounds like this.  Each <em>commit</em> leads to the launch of a <em>build</em> (build), which consists of a set of <em>jobs</em> (jobs) - one for each configuration in the build matrix. </p><br><h2>  Structure .appveyor.yml </h2><br><p>  The YAML file in AppVeyor looks very similar, corrected for section names - everything is called a little differently: </p><br><pre> <code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">image</span></span>: Visual Studio <span class="hljs-number"><span class="hljs-number">2015</span></span> #   VM-   Visual Studio  <span class="hljs-number"><span class="hljs-number">2008</span></span>  <span class="hljs-number"><span class="hljs-number">2015</span></span> init: #  ,     #  ,    (    ), #   ,     ,    : - git config --<span class="hljs-keyword"><span class="hljs-keyword">global</span></span> core.autocrlf input clone_folder: c:\projects\my-prj #      shallow_clone: true #    ,   (git clone --depth <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">matrix</span></span>: fast_finish: false #       -   platform: #   CI  amd64  x86... - x64 - x86 configuration: # ...   ,     ... - Debug - Release environment: <span class="hljs-keyword"><span class="hljs-keyword">matrix</span></span>: # ...    (<span class="hljs-number"><span class="hljs-number">2010</span></span>, <span class="hljs-number"><span class="hljs-number">2012</span></span>, <span class="hljs-number"><span class="hljs-number">2015</span></span>) - TOOLCHAIN: msvc10 - TOOLCHAIN: msvc12 - TOOLCHAIN: msvc14 install: #      : - call ci\appveyor\set-<span class="hljs-keyword"><span class="hljs-keyword">env</span></span>.bat %TOOLCHAIN% %PLATFORM% - appveyor DownloadFile &lt;url&gt; -FileName &lt;local-<span class="hljs-keyword"><span class="hljs-keyword">file</span></span>&gt; - <span class="hljs-number"><span class="hljs-number">7</span></span>z e -y &lt;local-<span class="hljs-keyword"><span class="hljs-keyword">file</span></span>&gt; -o&lt;local-dir&gt; - ... build_script: #   : - mkdir build - cd build - cmake .. %CMAKE_CONFIGURE_FLAGS% - cmake --build . %CMAKE_BUILD_FLAGS% test_script: #   : - ctest -C %CONFIGURATION% --output-on-failure artifacts: - path: &lt;local-package-path&gt; name: package_name deploy: #  tagged-  GitHub Releases: description: <span class="hljs-string"><span class="hljs-string">'$(APPVEYOR_REPO_TAG_NAME)'</span></span> provider: GitHub auth_token: secure: &lt;encrypted-github-token&gt; artifact: package_name force_update: true on: appveyor_repo_tag: true</code> </pre> <br><p>  The concept of the matrix assembly is fully applicable here.  At a minimum, it is worth running CI for two <code>x86/amd64</code> architectures, both under <code>Debug/Release</code> .  In addition, I would also recommend adding Visual Studio to the build matrix and version - you don‚Äôt know which studio the cloner uses at random? </p><br><p>  To use Visual Studio 2017, you need to connect a separate VM image - which, alas, lacks most of the libraries and tools available on the image for Visual Studio 2015. If you need to still run CI for VS 2017, add to the assembly matrix: </p><br><pre> <code class="hljs markdown"><span class="hljs-bullet"><span class="hljs-bullet">- </span></span>TOOLCHAIN: msvc15 APPVEYOR<span class="hljs-emphasis"><span class="hljs-emphasis">_BUILD_</span></span>WORKER_IMAGE: Visual Studio 2017</code> </pre> <br><p>  I decided to limit myself to the range of VS 2010 - VS 2015. Perhaps over time, AppVeyor developers will fix the situation with VS 2017 for the better. </p><br><ul><li>  Toolchain <br><ul><li>  Visual studio 2010 </li><li>  Visual Studio 2012 </li><li>  Visual Studio 2015 </li></ul></li><li>  Target CPU <br><ul><li>  amd64 </li><li>  x86 </li></ul></li><li>  Configuration <br><ul><li>  Debug </li><li>  Release </li></ul></li></ul><br><p>  In sum, this gives us a nice matrix of <strong>12 configurations</strong> . </p><br><p>  Please note that in YAML files for both AppVeyor and Travis, the <code>install</code> scripts refer to external shell files ( <code>.sh/.bat</code> ). The question arises: is it possible to do with YAML files alone, without supporting scripts?  Unfortunately, the answer is likely to be no. </p><br><h2>  Auxiliary scripts </h2><br><p>  The problem is that the shell commands specified in the YAML files are executed <em>line by line</em> .  Need <code>if-then-else</code> or <code>for</code> ?  Be kind enough to fit everything in one line.  It is clear that in theory you can ram anything into one line.  In practice, this applies only to the simplest cases.  All nontrivial multi-line logic remains to be put into separate shell scripts and to call them from YAML already. </p><br><p>  Therefore, I organized everything for myself as follows.  The project has a <code>ci</code> (continuous integration) folder with two <code>travis</code> and <code>appveyor</code> , which <code>appveyor</code> shell scripts: </p><br><pre> <code class="hljs cmake">ci/ travis/ <span class="hljs-keyword"><span class="hljs-keyword">install</span></span>-linux.sh <span class="hljs-keyword"><span class="hljs-keyword">install</span></span>-osx.sh ... appveyor/ <span class="hljs-keyword"><span class="hljs-keyword">install</span></span>.bat <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>-env.bat ...</code> </pre> <br><p>  In YAML files, however, only single-line commands of the type are used: </p><br><pre> <code class="hljs markdown"><span class="hljs-bullet"><span class="hljs-bullet">- </span></span>source ci/travis/install.sh</code> </pre> <br><p>  Let us single out the three main stages of continuous integration on the Travis and AppVeyor services and consider them in more detail. </p><br><ul><li>  Install - setting up a virtual environment, installing tools for building, libraries and other dependencies </li><li>  Build &amp; Test - build and test a project (usually performed together) </li><li>  Deploy - laying out the collected packages / documentation in the specified locations (for the examples I will use GitHub Releases) </li></ul><br><h2>  Install </h2><br><p>  The script for installing dependencies, of course, will greatly depend on the requirements of a particular project.  The following are general guidelines only. </p><br><p>  Travis with his prehistoric Eubunta offers <strong>CMake 3.2</strong> and <strong>GCC 4.8.4</strong> out of the box - most likely, this will not be enough for modern projects.  To get GCC, which is able to digest C ++ 14, in <code>install-linux.sh</code> we write: </p><br><pre> <code class="bash hljs">sudo add-apt-repository -y ppa:ubuntu-toolchain-r/<span class="hljs-built_in"><span class="hljs-built_in">test</span></span> sudo apt-get update -qq sudo apt-get install -qq g++-5 sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-5 90</code> </pre> <br><p>  An adequate version of CMake will have to be downloaded and installed manually.  Add to the same <code>install-linux.sh</code> : </p><br><pre> <code class="bash hljs">CMAKE_VERSION=3.3.2 CMAKE_VERSION_DIR=v3.3 CMAKE_OS=Linux-x86_64 CMAKE_TAR=cmake-<span class="hljs-variable"><span class="hljs-variable">$CMAKE_VERSION</span></span>-<span class="hljs-variable"><span class="hljs-variable">$CMAKE_OS</span></span>.tar.gz CMAKE_URL=http://www.cmake.org/files/<span class="hljs-variable"><span class="hljs-variable">$CMAKE_VERSION_DIR</span></span>/<span class="hljs-variable"><span class="hljs-variable">$CMAKE_TAR</span></span> CMAKE_DIR=$(<span class="hljs-built_in"><span class="hljs-built_in">pwd</span></span>)/cmake-<span class="hljs-variable"><span class="hljs-variable">$CMAKE_VERSION</span></span> wget --quiet <span class="hljs-variable"><span class="hljs-variable">$CMAKE_URL</span></span> mkdir -p <span class="hljs-variable"><span class="hljs-variable">$CMAKE_DIR</span></span> tar --strip-components=1 -xzf <span class="hljs-variable"><span class="hljs-variable">$CMAKE_TAR</span></span> -C <span class="hljs-variable"><span class="hljs-variable">$CMAKE_DIR</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PATH=<span class="hljs-variable"><span class="hljs-variable">$CMAKE_DIR</span></span>/bin:<span class="hljs-variable"><span class="hljs-variable">$PATH</span></span></code> </pre> <br><p>  For my CMake projects, version 3.3 is enough, but there is no 3.2 available by default (in 3.3 there were several critical fixes at once).  If your projects need something fresher - change the <code>CMAKE_VERSION</code> and <code>CMAKE_VERSION_DIR</code> . </p><br><p>  To support <code>amd64-&gt;x86</code> cross-compilation <code>amd64-&gt;x86</code> you must also install <code>multilib</code> : </p><br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$TARGET_CPU</span></span></span><span class="hljs-string">"</span></span> == <span class="hljs-string"><span class="hljs-string">"x86"</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> sudo dpkg --add-architecture i386 sudo apt-get -qq update <span class="hljs-comment"><span class="hljs-comment">#  32-     sudo apt-get install -y liblua5.2-dev:i386 sudo apt-get install -y libusb-1.0:i386 # ... # g++-multilib    ,  i386-! sudo apt-get install -y g++-5-multilib fi</span></span></code> </pre> <br><p>  Both Clang and CMake under Mac are not as old as Ubuntu, so <code>install-osx.sh</code> consists only of installing project-specific dependencies.  This is done using <code>homebrew</code> .  For example, to install <code>ragel</code> , add to <code>install-osx.sh</code> : </p><br><pre> <code class="bash hljs">brew update brew install ragel</code> </pre> <br><p>  But the install script in AppVeyor will look more frightening - at a minimum, you need to properly configure the CMake generator in accordance with the version of Visual Studio and the target platform. </p><br><div class="spoiler">  <b class="spoiler_title">CMake generator setup</b> <div class="spoiler_text"><p>  We <code>ci/appveyor/set-env.bat</code> something like <code>ci/appveyor/set-env.bat</code> in the auxiliary script: </p><br><pre> <code class="hljs perl">@echo off :loop <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">"%1"</span></span> == <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :finalize <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> /i <span class="hljs-string"><span class="hljs-string">"%1"</span></span> == <span class="hljs-string"><span class="hljs-string">"msvc10"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :msvc1<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> /i <span class="hljs-string"><span class="hljs-string">"%1"</span></span> == <span class="hljs-string"><span class="hljs-string">"msvc12"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :msvc12 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> /i <span class="hljs-string"><span class="hljs-string">"%1"</span></span> == <span class="hljs-string"><span class="hljs-string">"msvc14"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :msvc14 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> /i <span class="hljs-string"><span class="hljs-string">"%1"</span></span> == <span class="hljs-string"><span class="hljs-string">"msvc15"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :msvc15 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> /i <span class="hljs-string"><span class="hljs-string">"%1"</span></span> == <span class="hljs-string"><span class="hljs-string">"x86"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :x86 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> /i <span class="hljs-string"><span class="hljs-string">"%1"</span></span> == <span class="hljs-string"><span class="hljs-string">"i386"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :x86 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> /i <span class="hljs-string"><span class="hljs-string">"%1"</span></span> == <span class="hljs-string"><span class="hljs-string">"amd64"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :amd64 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> /i <span class="hljs-string"><span class="hljs-string">"%1"</span></span> == <span class="hljs-string"><span class="hljs-string">"x86_64"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :amd64 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> /i <span class="hljs-string"><span class="hljs-string">"%1"</span></span> == <span class="hljs-string"><span class="hljs-string">"x64"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :amd64 echo Invalid argument: <span class="hljs-string"><span class="hljs-string">'%1'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> -<span class="hljs-number"><span class="hljs-number">1</span></span> :msvc1<span class="hljs-number"><span class="hljs-number">0</span></span> set TOOLCHAIN=msvc1<span class="hljs-number"><span class="hljs-number">0</span></span> set CMAKE_GENERATOR=Visual Studio <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">2010</span></span> <span class="hljs-keyword"><span class="hljs-keyword">shift</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :loop :msvc12 set TOOLCHAIN=msvc12 set CMAKE_GENERATOR=Visual Studio <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">2013</span></span> <span class="hljs-keyword"><span class="hljs-keyword">shift</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :loop :msvc14 set TOOLCHAIN=msvc14 set CMAKE_GENERATOR=Visual Studio <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">2015</span></span> <span class="hljs-keyword"><span class="hljs-keyword">shift</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :loop :msvc15 set TOOLCHAIN=msvc15 set CMAKE_GENERATOR=Visual Studio <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">2017</span></span> <span class="hljs-keyword"><span class="hljs-keyword">shift</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :loop :x86 set TARGET_CPU=x86 set CMAKE_GENERATOR_SUFFIX= set OPENSSL_DIR=C:\OpenSSL-Win32 <span class="hljs-keyword"><span class="hljs-keyword">shift</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :loop :amd64 set TARGET_CPU=amd64 set CMAKE_GENERATOR_SUFFIX= Win64 set OPENSSL_DIR=C:\OpenSSL-Win64 <span class="hljs-keyword"><span class="hljs-keyword">shift</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :loop :finalize <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">"%TOOLCHAIN%" == "</span></span><span class="hljs-string"><span class="hljs-string">" goto :msvc14 if "</span></span>%TARGET_CPU%" == <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :amd64 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">"%CONFIGURATION%" == "</span></span><span class="hljs-string"><span class="hljs-string">" (set CONFIGURATION=Release) set CMAKE_CONFIGURE_FLAGS=-G "</span></span>%CMAKE_GENERATOR%%CMAKE_GENERATOR_SUFFIX%" set CMAKE_BUILD_FLAGS= ^ --config %CONFIGURATION% ^ -- ^ <span class="hljs-regexp"><span class="hljs-regexp">/nologo ^ /verbosity</span></span>:minimal ^ <span class="hljs-regexp"><span class="hljs-regexp">/consoleloggerparameters:Summary</span></span></code> </pre> <br><p>  Then we call this script from <code>.appveyor.yml</code> : </p><br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">install</span></span>: - <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> ci\appveyor\<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>-env.bat %TOOLCHAIN% %PLATFORM%</code> </pre> </div></div><br><p>  If you need to download and install platform-specific dependencies, this is done using the <code>appveyor</code> utility, available on all AppVeyor virtual machines.  For example, to install ragel, you need to add to <code>ci/appveyor/install.bat</code> : </p><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">set</span></span> DOWNLOAD_DIR=c:\downloads <span class="hljs-built_in"><span class="hljs-built_in">mkdir</span></span> <span class="hljs-variable"><span class="hljs-variable">%DOWNLOAD_DIR%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> RAGEL_DOWNLOAD_URL=http://downloads.yorickpeterse.com/files/ragel-<span class="hljs-number"><span class="hljs-number">68</span></span>-visualstudio2012.<span class="hljs-number"><span class="hljs-number">7</span></span>z <span class="hljs-built_in"><span class="hljs-built_in">mkdir</span></span> <span class="hljs-variable"><span class="hljs-variable">%DOWNLOAD_DIR%</span></span>\ragel appveyor DownloadFile <span class="hljs-variable"><span class="hljs-variable">%RAGEL_DOWNLOAD_URL%</span></span> -FileName <span class="hljs-variable"><span class="hljs-variable">%DOWNLOAD_DIR%</span></span>\ragel\ragel.<span class="hljs-number"><span class="hljs-number">7</span></span>z <span class="hljs-number"><span class="hljs-number">7</span></span>z e -y <span class="hljs-variable"><span class="hljs-variable">%DOWNLOAD_DIR%</span></span>\ragel\ragel.<span class="hljs-number"><span class="hljs-number">7</span></span>z -o<span class="hljs-variable"><span class="hljs-variable">%DOWNLOAD_DIR%</span></span>\ragel <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> <span class="hljs-built_in"><span class="hljs-built_in">PATH</span></span>=<span class="hljs-variable"><span class="hljs-variable">%DOWNLOAD_DIR%</span></span>\ragel;<span class="hljs-variable"><span class="hljs-variable">%PATH%</span></span></code> </pre> <br><p>  I also recommend deleting the following files - they are not needed for C ++ projects, but they lead to a lot of garbage messages in the build logs: </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">del</span></span> "<span class="hljs-selector-tag"><span class="hljs-selector-tag">c</span></span>:\<span class="hljs-selector-tag"><span class="hljs-selector-tag">Program</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Files</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x86</span></span>)\<span class="hljs-selector-tag"><span class="hljs-selector-tag">MSBuild</span></span>\14<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>\<span class="hljs-selector-tag"><span class="hljs-selector-tag">Microsoft</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Common</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.targets</span></span>\<span class="hljs-selector-tag"><span class="hljs-selector-tag">ImportAfter</span></span>\<span class="hljs-selector-tag"><span class="hljs-selector-tag">Xamarin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Common</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.targets</span></span>" <span class="hljs-selector-tag"><span class="hljs-selector-tag">del</span></span> "<span class="hljs-selector-tag"><span class="hljs-selector-tag">c</span></span>:\<span class="hljs-selector-tag"><span class="hljs-selector-tag">Program</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Files</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x86</span></span>)\<span class="hljs-selector-tag"><span class="hljs-selector-tag">MSBuild</span></span>\4<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span>\<span class="hljs-selector-tag"><span class="hljs-selector-tag">Microsoft</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Common</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.targets</span></span>\<span class="hljs-selector-tag"><span class="hljs-selector-tag">ImportAfter</span></span>\<span class="hljs-selector-tag"><span class="hljs-selector-tag">Xamarin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Common</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.targets</span></span>"</code> </pre> <br><h2>  Build &amp; test </h2><br><p>  This stage is much simpler than the previous one - for it, most likely, it does not even need a dedicated shell script.  Perhaps the only trick is to configure cross-compilation for Linux on Travis CI.  To support <code>amd64-&gt;x86</code> cross-compiling <code>amd64-&gt;x86</code> add the following to the root <code>CMakeLists.txt</code> : </p><br><pre> <code class="cmake hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"${TARGET_CPU}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">STREQUAL</span></span> <span class="hljs-string"><span class="hljs-string">"amd64"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> (CMAKE_SIZEOF_VOID_P <span class="hljs-number"><span class="hljs-number">8</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">set_property</span></span> (GLOBAL PROPERTY FIND_LIBRARY_USE_LIB64_PATHS <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">set_property</span></span> (GLOBAL PROPERTY FIND_LIBRARY_USE_LIB32_PATHS <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> (<span class="hljs-string"><span class="hljs-string">"${TARGET_CPU}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">STREQUAL</span></span> <span class="hljs-string"><span class="hljs-string">"x86"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> (CMAKE_SIZEOF_VOID_P <span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">set_property</span></span> (GLOBAL PROPERTY FIND_LIBRARY_USE_LIB64_PATHS <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">set_property</span></span> (GLOBAL PROPERTY FIND_LIBRARY_USE_LIB32_PATHS <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (GCC) <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> (CMAKE_CXX_FLAGS <span class="hljs-string"><span class="hljs-string">"${CMAKE_CXX_FLAGS} -m32"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> (CMAKE_C_FLAGS <span class="hljs-string"><span class="hljs-string">"${CMAKE_C_FLAGS} -m32"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> () <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> () <span class="hljs-keyword"><span class="hljs-keyword">message</span></span> (FATAL_ERROR <span class="hljs-string"><span class="hljs-string">"Unsupported CPU: ${TARGET_CPU}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> ()</code> </pre> <br><p>  Next, we act as usual.  CMake projects are built in a dedicated <code>build</code> folder in two stages: <em>Configure</em> and <em>Build</em> .  Inside <code>travis.yml</code> it will look like this: </p><br><pre> <code class="hljs perl">script: - <span class="hljs-keyword"><span class="hljs-keyword">mkdir</span></span> build - cd build - cmake .. -DCMAKE_BUILD_TYPE=$BUILD_CONFIGURATION -DTARGET_CPU=$TARGET_CPU - cmake --build .</code> </pre> <br><p>  We test the project using <strong>CTest</strong> right after the end of the build - of course, this step makes sense only if your project contains tests added using the CMake-commands <code>enable_testing ()</code> and <code>add_test (...)</code> : </p><br><pre> <code class="hljs cs"> - ctest --output-<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>-failure</code> </pre> <br><p>  I recommend running <code>ctest</code> with the <code>--output-on-failure</code> flag - in this case, if the test fails, the exhaust of the test program will be visible in the build log. </p><br><p>  Under AppVeyor, everything is similar, with the following minor differences.  First, the cross-compilation is not done using the C ++ compiler flags, but by selecting the correct CMake generator (we process this in <code>set-env.bat</code> ).  Secondly, Visual Studio generators, unlike Unix Makefiles, are so-called.  multi-configuration generators, which means that the <code>Debug/Release</code> configuration is not specified at the CMake-configure stage, but at the Build stage.  However, everything still fits into the same laconic 4 lines: </p><br><pre> <code class="hljs perl">build_script: - <span class="hljs-keyword"><span class="hljs-keyword">mkdir</span></span> build - cd build - cmake .. %CMAKE_CONFIGURE_FLAGS% <span class="hljs-comment"><span class="hljs-comment">#   CMake- - cmake --build . %CMAKE_BUILD_FLAGS% #   Debug/Release #     msbuild.exe</span></span></code> </pre> <br><p>  For testing, add the <code>test_script</code> section: </p><br><pre> <code class="hljs pgsql">test_script: - ctest -C %<span class="hljs-keyword"><span class="hljs-keyword">CONFIGURATION</span></span>% <span class="hljs-comment"><span class="hljs-comment">--output-on-failure</span></span></code> </pre> <br><p>  Please note that you need to explicitly specify the <code>Debug/Release</code> configuration using the <code>-C</code> switch. </p><br><p>  Hooray!  The project is assembled and tested under <strong>24 configurations</strong> for each <code>git-push</code> .  Rather, we are going to add status badges to the README file! </p><br><p>  Go to the project page on the Travis CI website at: </p><br><pre> <code class="hljs pgsql">https://travis-ci.org/&lt;<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>-<span class="hljs-type"><span class="hljs-type">name</span></span>&gt;/&lt;project-<span class="hljs-type"><span class="hljs-type">name</span></span>&gt;</code> </pre> <br><p>  Click on the <code>build|passing</code> badge on the <code>build|passing</code> logs page - a window opens with a link to the dynamic image.  Copy the link and paste it into the <code>README.rst</code> : </p><br><pre> <code class="hljs pgsql">.. image:: https://travis-ci.org/&lt;<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>-<span class="hljs-type"><span class="hljs-type">name</span></span>&gt;/&lt;project-<span class="hljs-type"><span class="hljs-type">name</span></span>&gt;.svg?branch=master :target: https://travis-ci.org/&lt;<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>-<span class="hljs-type"><span class="hljs-type">name</span></span>&gt;/&lt;project-<span class="hljs-type"><span class="hljs-type">name</span></span>&gt;</code> </pre> <br><p>  I heard, or someone said <code>README.md</code> ?  Never!  <strong>reStructuredText</strong> FTW! </p><br><p>  We do the same with the AppVeyor badge.  Badge links are available at: </p><br><pre> <code class="hljs pgsql">https://ci.appveyor.com/project/&lt;<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>-<span class="hljs-type"><span class="hljs-type">name</span></span>&gt;/&lt;project-<span class="hljs-type"><span class="hljs-type">name</span></span>&gt;/settings/badges</code> </pre> <br><p>  Copy the desired line and paste it side by side: </p><br><pre> <code class="hljs ruby">.. image:: <span class="hljs-symbol"><span class="hljs-symbol">https:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/ci.appveyor.com/api</span></span><span class="hljs-regexp"><span class="hljs-regexp">/projects/status</span></span><span class="hljs-regexp"><span class="hljs-regexp">/&lt;gibberish-code&gt;?svg=true :target: https:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ci.appveyor.com/project</span></span><span class="hljs-regexp"><span class="hljs-regexp">/&lt;user-name&gt;/</span></span>&lt;project-name&gt;</code> </pre> <br><p>  Make a commit for the updated <code>README.rst</code> and enjoy the result: </p><br><p><img src="http://tibbo.com/downloads/archive/.internal/image/readme-badges.png" alt="image"></p><br><h2>  Deploy </h2><br><p>  Let's show how to use deployment mechanisms using the example of <a href="https://help.github.com/articles/creating-releases">GitHub Releases</a> . </p><br><p>  First of all, you need to authorize the services of Travis and AppVeyor so that they can create releases in your GitHub projects.  Login to GitHub, go to <code>Profile-&gt;Settings-&gt;Developer settings-&gt;Personal access tokens</code> .  Click on <code>Generate new token</code> , call the token, for example, <code>CI Deploy Token</code> and set the only flag <code>public_repo</code> (allow the token carrier to access the public repositories).  Copy the generated token to some temporary location (it can be deleted soon). </p><br><p>  Using this token, you can both create releases and push to <em>all of your public repositories</em> .  Captain Obvious hints that it is undesirable to spread such a token to public access in open form.  It is necessary to encrypt it so that <em>only the Travis CI and AppVeyor services have the decryption key</em> . </p><br><p>  To encrypt the token for Travis, you need to install the Ruby utility <code>travis</code> : </p><br><pre> <code class="bash hljs">gem install travis</code> </pre> <br><p>  After this, run in the project folder: </p><br><pre> <code class="bash hljs">travis encrypt &lt;github-token&gt;</code> </pre> <br><p>  The utility encrypts the token using asymmetric encryption, so the private key for decryption ‚Äî created at the time of connecting the project to the Travis CI service ‚Äî will be available only to Travis CI itself.  The utility output can be safely inserted into <code>.travis.yml</code> . </p><br><p>  Similarly, the token is asymmetrically encrypted for AppVeyor.  Here, however, you do not need to install any auxiliary utilities - everything can be done directly from the site <a href="https://ci.appveyor.com/">https://ci.appveyor.com</a> via <code>Account-&gt;Tools-&gt;Encrypt Data</code> . </p><br><p>  Next, you need to decide which files will be laid out for universal access.  In terms of GitHub Releases, these files are called release artifacts.  These can be installers, archives or just executable files.  The most logical approach to generating archives or installers for a project with a CMake build is using <strong>CPack</strong> , but obviously, the set of release artifacts and the way they are generated may differ from project to project. </p><br><p>  Anyway, for example, during the build process, we generated output files <code>file1.pkg</code> , <code>file2.pkg</code> , etc.  and we want to attach them as release artifcats to the releases of our GitHub project. </p><br><p>  In <code>.travis.yml</code> create the <code>deploy</code> section: </p><br><pre> <code class="hljs 1c">deploy: provider: releases <span class="hljs-meta"><span class="hljs-meta">#   GitHub Releases api_key: secure: encrypted-github-token # ,    `travis encrypt` file: #   - file1.pkg - file2.pkg - ... skip_cleanup: true # </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta">       </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta">  on: tags: true #  deploy  </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta"> tagged-commit</span></span></code> </pre> <br><p>  In <code>.appveyor.yml</code> similar functionality is achieved by: </p><br><pre> <code class="hljs lua">artifacts: # -        #   AppVeyor   <span class="hljs-string"><span class="hljs-string">"push artifacts"</span></span> - <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>: file1.pkg - <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>: file2.pkg - ... deploy: provider: GitHub #   GitHub Releases description: <span class="hljs-string"><span class="hljs-string">'$(APPVEYOR_REPO_TAG_NAME)'</span></span> # tag    ( Travis   ) auth_token: secure: &lt;secret-github-token&gt; # ,    appveyor.ci artifact: /.*\.pkg/ #  ,      force_update: <span class="hljs-literal"><span class="hljs-literal">true</span></span> #  ,        on: appveyor_repo_tag: <span class="hljs-literal"><span class="hljs-literal">true</span></span> #  deploy   tagged-commit</code> </pre> <br><p>    tagged-commit      : </p><br><pre> <code class="bash hljs">git add --all git commit --message <span class="hljs-string"><span class="hljs-string">"release 1.0.0"</span></span> git tag project-name-1.0.0 git push git push origin project-name-1.0.0</code> </pre> <br><p>  ,     ,      GitHub         : </p><br><p><img src="http://tibbo.com/downloads/archive/.internal/image/github-release.png" alt="image"></p><br><h2>  Conclusion </h2><br><p>           C++/CMake   GitHub. ,           ,            Travis CI &amp; AppVeyor: </p><br><p> <a href="https://docs.travis-ci.com/">https://docs.travis-ci.com</a> <br> <a href="https://www.appveyor.com/docs">https://www.appveyor.com/docs</a> </p><br><p>      ,      ,   , ,       : </p><br><p> <a href="https://github.com/vovkos/jancy">https://github.com/vovkos/jancy</a> <br> <a href="https://github.com/vovkos/doxyrest">https://github.com/vovkos/doxyrest</a> <br> <a href="https://github.com/vovkos/llvm-package-travis">https://github.com/vovkos/llvm-package-travis</a> <br> <a href="https://github.com/vovkos/llvm-package-windows">https://github.com/vovkos/llvm-package-windows</a> </p><br><p>        . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/329264/">https://habr.com/ru/post/329264/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../329254/index.html">Passing type map to function</a></li>
<li><a href="../329256/index.html">Selenium under Windows: everything from the beginning</a></li>
<li><a href="../329258/index.html">Backend I / O Performance: Node vs. PHP vs. Java vs. Go</a></li>
<li><a href="../329260/index.html">And let the tests themselves and support</a></li>
<li><a href="../329262/index.html">How to create a modern CI / CD chain using free cloud services</a></li>
<li><a href="../329266/index.html">‚ÄúI clicked something and everything disappeared‚Äù: how does technical support in retail work</a></li>
<li><a href="../329268/index.html">Microsoft will open data center in Johannesburg and Cape Town</a></li>
<li><a href="../329270/index.html">More simple bugs [Hell language]</a></li>
<li><a href="../329272/index.html">OKR: How to set goals and fulfill them at 70%</a></li>
<li><a href="../329274/index.html">Forum of Certification Authorities and Browser Developers Approved the Obligation of the DNS CAA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
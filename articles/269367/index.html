<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experiment: Is it possible to create an effective trading strategy using machine learning and historical data</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In our blog, we write a lot about the creation of trading robots and algorithmic trading technologies. Today, it will be discussed whether it is possi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experiment: Is it possible to create an effective trading strategy using machine learning and historical data</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://habrahabr.ru/company/itinvest/blog/269367/"><img src="https://habrastorage.org/files/f68/c03/66d/f68c0366d0474f9ba4190197cba8ce9f.jpg"></a> <br><br>  In our blog, we write a lot about the creation of <a href="http://www.itinvest.ru/software/spo/stocksharp/">trading robots</a> and algorithmic trading technologies.  Today, it will be discussed whether it is possible to create a successful trading strategy using only historical data on tenders and machine learning algorithms. <br><br>  David Montaque, a graduate of Stanford University and an employee of Palantir Technologies, wrote <a href="http://cs229.stanford.edu/proj2014/David%2520Montague,%2520Algorithmic%2520Trading%2520of%2520Futures%2520via%2520Machine%2520Learning.pdf">an article</a> that described the creation of algorithmic strategies for trading futures based on historical data.  Montag used machine learning techniques to predict future price and volatility.  We present to your attention the description of the experiment and the conclusions reached by the researcher. <a name="habracut"></a><br><h4>  Beginning of work </h4><br>  The goal of the experiment was to develop highly efficient algorithmic trading strategies for presenting them at the <a href="https://quantiacs.com/Contest/FuturesContestRules.aspx">Quantiacs futures</a> competition.  During this competition, trading systems operate on historical data and on real trading on the Quantiacs platform (as close as possible to how it happens on the stock exchange), and the results of each of these tests compile a ranking of the best systems.  The goal of the competition is to obtain a strategy with optimal performance, as measured by the Sharpe ratio (the ratio of average profit to average volatility).  The winner receives an investment of $ 1 million, the participant who takes the second place - $ 500 thousand, the third - $ 250 thousand. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/4b7/7d5/3e4/4b77d53e492a4e2ab28eb1850a201781.png"><br><br>  <i>Sharpe ratio - the ratio of annual profit to annual volatility</i> <br><br>  Historical data for the competition includes approximately 3,800 trading days (data on price and trading volume) from January 1, 2001 to the present.  The information is presented for 27 different futures contracts, including currency, precious metals, agricultural products, etc.  The data includes the values ‚Äã‚Äãof the maximum, minimum price of the day, as well as the opening, closing and trading volumes for the period. <br><br>  On each trading day, the rules of the competition allow the strategy to use as input data information about the previous 504 trading periods (which gives a vector of 2520 elements). <br><br>  Montag suggested that it would be more effective to predict the future price and volatility of each futures contract independently of each other, using only data on their past behavior. <br><br><h4>  Algorithms </h4><br>  To predict the volatility and performance of trades, Montag used four regression algorithms: <br><br><ul><li>  Linear and regularized regression (proprietary); </li><li>  Neural networks (using the MATLAB Neural Networks tool); </li><li>  <a href="https://ru.wikipedia.org/wiki/Random_forest">Random forest</a> (using the MATLAB Tree-Bagger function); </li><li>  Gradient booster of decision tree (GBM package for R). </li></ul><br>  The problem of predicting volatility was much simpler than the prediction of profit. <br><br>  For each of the tasks, two data sets were used - a training set consisting of 9424 examples (80% of the available data) and a test set of 2356 examples (20% of the data).  The distribution of training and test sets was chronological - training examples contained 80% of the initial data, and test examples consisted of 20% of the latest data. <br><br><h4>  results </h4><br>  Before starting to compare the performance of different machine learning algorithms, the researcher made a sample using linear regression: <br><br><table><tbody><tr><th>  Algorithm </th><th>  Training r <sup>2</sup> </th><th>  CV r <sup>2</sup> </th><th>  Test r <sup>2</sup> </th></tr><tr><td>  PCA (82) </td><td>  0.631 </td><td>  0.490 </td><td>  0.473 </td></tr><tr><td>  TI (18) </td><td>  0.710 </td><td>  0.645 </td><td>  0.637 </td></tr><tr><td>  TI (7) </td><td>  0.713 </td><td>  0.647 </td><td>  0.639 </td></tr></tbody></table><br>  Here PCA is <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B5%25D1%2582%25D0%25BE%25D0%25B4_%25D0%25B3%25D0%25BB%25D0%25B0%25D0%25B2%25D0%25BD%25D1%258B%25D1%2585_%25D0%25BA%25D0%25BE%25D0%25BC%25D0%25BF%25D0%25BE%25D0%25BD%25D0%25B5%25D0%25BD%25D1%2582">the principal component method</a> , and TI is the technical indicators.  The numbers in parentheses represent the dimensions of the feature vector. <br><br>  After analyzing the main components reduced to 250 elements and the normalized vector, the optimal number of main components was obtained - 82. However, the use of linear regression, which uses the vector of all technical indicators of 18 elements, made it possible to achieve better results, and as a result, Montagu found seven technical parameters indicators, the use of which allows to further improve the results. <br><br>  The table below provides information on the performance of the four algorithms in the field of volatility prediction using 7 indicators. <br><br><table><tbody><tr><th>  Algorithm </th><th>  Training r <sup>2</sup> </th><th>  CV r <sup>2</sup> </th><th>  Test r <sup>2</sup> </th></tr><tr><td>  Lr </td><td>  0.713 </td><td>  0.647 </td><td>  0.639 </td></tr><tr><td>  Nn </td><td>  0.734 </td><td>  0.660 </td><td>  0.632 </td></tr><tr><td>  RF </td><td>  0.731 </td><td>  0.664 </td><td>  0.649 </td></tr><tr><td>  GBM </td><td>  0.701 </td><td>  0.666 </td><td>  0.638 </td></tr></tbody></table><br>  Here LR is linear regression, NN is neural networks, RF is a random forest, GBM is a gradient boost of the decision tree.  The best results were achieved using the random forest algorithm. <br><br>  Below are the results of the effectiveness of the prediction of profit: <br><br><table><tbody><tr><th>  Algorithm </th><th>  Training r <sup>2</sup> </th><th>  CV r <sup>2</sup> </th><th>  Test r <sup>2</sup> </th></tr><tr><td>  RR </td><td>  0.169 </td><td>  0.142 </td><td>  0.138 </td></tr><tr><td>  Nn </td><td>  0.088 </td><td>  0.013 </td><td>  -0.088 </td></tr><tr><td>  RF </td><td>  0.236 </td><td>  0.069 </td><td>  -0.102 </td></tr><tr><td>  GBM </td><td>  0.328 </td><td>  0.154 </td><td>  0.028 </td></tr></tbody></table><br>  Here, RR is a regularized regression (which turned out to be the most effective), and the other abbreviations are identical to those used above.  Negative values ‚Äã‚Äãcorrespond to the ‚Äúshort sale‚Äù. <br><br>  To use the predictions of volatility and profit, Montag created a three-parameter trading algorithm that compares the expected profit with the predicted volatility, and uses the resulting value as the desired distribution of the portfolio. <br><br>  The graph below shows the performance of this strategy - it managed to achieve an annual profit of 6.63%, with an annual volatility of 5.58% and a Sharpe ratio of 1.18. <br><br><img src="https://habrastorage.org/files/dcd/c49/974/dcdc499742f94cb69976e56c5a14b67f.png"><br><br>  However, using only the first half of the available historical data, the strategy showed a Sharpe ratio of 1.33, while with a sample that included only the second part of the data, this number was much lower - 0.73.  This fact indicates that you should not expect the same good performance strategy, both in the past and in the future, but you can count on a certain productivity. <br><br>  According to <a href="http://www.investopedia.com/articles/07/sharpe_ratio.asp">Investopedia</a> , a Sharpe ratio of 1 or higher is considered a good indicator, 2 or higher is very good, and 3 or higher is excellent.  The strategies obtained using the above methods could show the maximum Sharpe ratio of 1.2 ‚Äî on historical data, and much less for future data. <br><br>  Despite the fact that these strategies have shown a profit, the likelihood that in real trading their Sharpe ratio will rise above one is not very large. </div><p>Source: <a href="https://habr.com/ru/post/269367/">https://habr.com/ru/post/269367/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269349/index.html">New animation tabs in the assembly Vivaldi 1.0.303.23</a></li>
<li><a href="../269351/index.html">Swipe banner with navigation buttons and progress bar: use the jQuery Cycle2 plugin</a></li>
<li><a href="../269355/index.html">How to start a newbie in Go</a></li>
<li><a href="../269359/index.html">What is wrong with this code?</a></li>
<li><a href="../269361/index.html">The digest of interesting materials from the world of Drupal # 14</a></li>
<li><a href="../269369/index.html">Gyro and accelerometer in web design</a></li>
<li><a href="../269371/index.html">The introduction of AspectJ in the Android application</a></li>
<li><a href="../269373/index.html">Zombie code Code that lives its own life</a></li>
<li><a href="../269375/index.html">My cat is about "perfect code"</a></li>
<li><a href="../269377/index.html">Api-platform</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
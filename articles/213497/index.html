<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Powerful laboratory power supply</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Not so long ago bought a soldering station. It has long been engaged in amateur electronics, and then came the moment when he realized that it was tim...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Powerful laboratory power supply</h1><div class="post__text post__text-html js-mediator-article"> Not so long ago bought a soldering station.  It has long been engaged in amateur electronics, and then came the moment when he realized that it was time.  Prior to that, he used a batin self-made unit that combined a laboratory power supply and a low-voltage soldering iron power supply.  And now the problem arose before me: I put the soldering station, and keep the old unit for the sake of the frail and inaccurate 0-30v 3A power supply unit or did I buy something modern, with current protection and digital indicators?  Crawling on ebay, I realized that the maximum that shines for me is for 7-10 thousand to buy a Chinese unit with a current maximum of 5A.  Toad said her weighty "kva", her arms itched and ... <br><a name="habracut"></a><br>  Now to the point.  Formed the requirements for the unit: at least 0-30V, with currents of at least 10A, with adjustable current protection, and with the accuracy of adjustment for voltage 0.1V.  And what would become even more interesting - 2 channels, even from the common ground.  The voltage setting must be digital, i.e.  no variable resistors, only encoders.  Fixed voltage settings and memorization are optional. <br><br>  To indicate the output status, Chinese digital combination indicators were selected on the LCD, with a range of up to 199V with an accuracy of 0.1V and up to 20A with an accuracy of 0.01A.  What suits me completely.  But what I forgot is to buy shunts for them, because  naively thought that they would be included. <br><br>  For the primary voltage conversion, I thought of using a conventional transformer with taps every 6V, switched by relays from the controller, and a simple emitter follower to adjust the output.  And everything would be fine, but when I learned the cost and dimensions of such a transformer (30V * 10A = 300W), I realized that I need to be more modern and use pulsed power supplies. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Having run through the sentences I realized that there is nothing sensible about my currents, and if there is, then the toad is categorically against.  In this regard, the thought came to try to use computer power supply units, of which there is always plenty of any IT user.  350W blocks were dug out, which promised 22A for + 5V branch and 16A for 12V.  Having run through the Internet, I found a lot of controversial opinions about the sequential connection of blocks, and found a clever article on Radiokot how to do it correctly.  But before that, I decided to take a chance and still take it and fuck up the blocks together in succession, giving the load. <br><br>  ... And it turned out! <br>  In the photo, 3 blocks are connected in series.  De facto at the output of 35V, 10.6A. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7c6/bb9/74b/7c6bb974bb62e45ed0dd9a5bd6d2a64a.jpg" alt="image"><br><br>  Then the question arose: which controller to control.  The idea behind ATMega328 here is for the eyes, but DACs ... Considering how much it would cost at least 2 DACs for 12 bits and looking at the characteristics of the Arduino DUE with them on board, as well as comparing the number of required PINs, I realized that it would be easier and cheaper and faster put this arduin into the block entirely, along with the board. <br><br>  Gradually, the layout was born on the breadboard.  I will give it in general, only for one channel: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a0f/093/17a/a0f09317ae5a6e58481c2c81499012e0.jpg" alt="image"><br><br>  The circuit beats on several functional blocks: ATX power supply kit, PSU switching unit, Arduino D / A voltage amplifier unit, current shunt voltage amplifier unit, and set voltage limiting unit. <br><br>  BP switching unit: Depending on the voltage set by the user, Arduino chooses which branch to use.  Selects the minimum voltage branch, at a minimum of + 3V large specified.  3V remain on the inaccuracy of the voltage setting in the power supply units + ~ 1.2V of the voltage drop at the transitions of the transistor + not a large margin.  Simultaneously involved branch key activates this or that power supply.  For example, setting 24V, you need to activate all 3 power supplies and connect the output to + 5V of the 3rd in the chain, which will give the output transistor VT1 + 29V on the collector, thereby minimizing the heat output of the transistor. <br><br>  Voltage Amplifier Unit: Implemented on OP1 operational amplifier.  OA is used Rail-to-Rail, unipolar, with a large supply voltage, in my case - AD823.  Moreover, the output of the Arduino DAC has a zero point offset = 0.54V.  Those.  if you set the output voltage = 0, the output will actually be 0.54V.  But it does not suit us, because  OA amplifies from 0, and the voltage also wants to be adjusted from 0. Therefore, a trimming resistor R1 is applied, which subtracts the voltage.  A separate stabilizer on -5V, instead of using -5V branch of the power supply, is used due to the instability of the voltage generated by the power supply, which varies under load.  The output of the op-amp is covered by feedback from the output of the VT1; this is done so that the op-amp would compensate for voltage changes depending on the output load. <br><br>  By the way, about AD823 from China on Ebeyu: I was tormented by the day, I could not understand why the scheme does not work from 0 at the input.  If more than 1.5V, then everything becomes normal, otherwise the entire supply voltage.  Already thinking that he was a fool, he ran into the story of how a person instead of AD823 received a fake from China.  Immediately I went to a nearby store, bought it there, set it up and ... lo and behold, everything worked right away.  The game, find the differences (fake in the crib, on the right is the original. It's funny that fake looks better): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/29d/390/9f3/29d3909f3e3687bcf8dd7395fec99227.jpg" alt="image"><br><br>  Next, the voltage amplifier current shunt.  Since the current shunt is powerful enough, the voltage drop across it is small, especially at low currents.  Therefore, OP2 has been added, which serves to amplify the voltage of the drop in the shunt.  Moreover, the speed of the fuse depends on the speed of this opamp. <br><br>  The fuse itself, or rather the current limiting unit, is implemented on the comparator OP2.  The amplified voltage corresponding to the current flow is compared with the voltage set by the electronic potentiometer and if it is higher, the VT2 opens with a comparator, and the voltage drops at the base of the output transistor, essentially turning off the output.  In operation, it looks like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/24c/473/0ad/24c4730ad1a122b978ce6491cbd047ef.jpg" alt="image"><br><br>  Now to why I have a choke as a shunt.  It's simple: as I wrote before - I just forgot to order shunts.  And when I had already assembled a block and it became clear, it seemed to wait a long time from China, but it was expensive in the store.  Therefore, without hesitation, rummaged in the wiring of old computer power supplies and found chokes, almost exactly fit the resistance.  Slightly picked up and set.  In addition, it gives protection: In the event of a sudden change in load, the choke smoothes the current for a time sufficient for the current limiter to work.  This gives excellent short-circuit protection, but there is also a minus - impulse loads ‚Äúdrive the unit crazy‚Äù.  However, for me it was not critical. <br><br>  In the end, I got this power supply: <br><img src="https://habrastorage.org/getpro/habr/post_images/f9c/da1/14d/f9cda114daaddf789b32b62707afe122.jpg" alt="image"><br>  The inscriptions on the front of the made with LUT.  The power supply operation indicators are displayed on a 2-color LED.  Where the red is powered from the duty + 5v and show that the unit is ready for operation.  A green from Power_Good, and shows that the unit is involved and in good condition.  In turn, the transistor decoupling ensures the quenching of the red LED, and if the block has a problem, both the red and the green will go out: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e21/3d8/bb6/e213d8bb6867533f117192210c8b371a.jpg" alt="image"><br><br>  Small screens show the set parameters; large screens show the de facto exit status.  Encoder rotation sets the voltage, short press - on / off load, long - select the mode of setting the voltage / maximum current.  The current is limited to 12.5A per channel.  Really in the amount of 15 is removed.  However - on the same element base, with the replacement of power supplies with something 500-watt watt, you can shoot at 20. I don‚Äôt know if the sketch code should be given here, the sheet is large and rather dumb, + tails stick out everywhere under the unfinished functionality like correction output voltage on the ADC feedback and adjust the fan speed. <br><br>  Finally, a couple of words.  It turned out that the Arduino DUE when turned on after a long idle may not start to run the program.  Those.  We turn on the board, we think that our program will now start to run, and in response, silence until you press reset.  And all would be nothing, but inside the case reset click a little difficult. <br>  I searched the forum, several people faced the same problem, but they did not find a solution.  Wait when the developers fix the problem.  I was lazy to wait, so I had to solve the problem myself.  And the solution was found to be a primitive disgrace, to solder the electrolytic capacitor at 22¬µF in parallel to the button.  As a result, at the time of launch, while the capacitor is charging, pressing the reset button is simulated.  It works fine, it does not interfere with the firmware: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4f3/605/76a/4f360576a6acfc6081b4ffd09ee4da34.jpg" alt="image"><br><br>  Finally: <br>  In an amicable way, it is necessary to hang temperature sensors on all radiators and adjust the fan speed depending on the temperature, but so far I have been satisfied with the scarf of the fan speed regulator from some FSP power supply unit. <br><br>  I would also like through the ADC feedback with the switching unit in case of sticky relyushki, as well as feedback on the output, in order to compensate for the temperature drift of the trimming resistors (within 0.1V at high voltages there are deviations). <br><br>  But the memory buttons and fixed settings from the experience of use seem to be something not necessary. </div><p>Source: <a href="https://habr.com/ru/post/213497/">https://habr.com/ru/post/213497/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../213485/index.html">Nitecore SENS AA - when flashlights get smart</a></li>
<li><a href="../213487/index.html">What video tutorials do you watch?</a></li>
<li><a href="../213489/index.html">Vsonic VSD1 and VSD1S - the new leaders of the budget segment?</a></li>
<li><a href="../213491/index.html">CUBE Talk 9X - Review of a 9.7-inch tablet with 3G / GPS</a></li>
<li><a href="../213493/index.html">Multum Lingua - bilingual reading on Android devices</a></li>
<li><a href="../213503/index.html">We teach recruiters to hire programmers</a></li>
<li><a href="../213507/index.html">Olympiad web development. Volgograd and 60 more cities</a></li>
<li><a href="../213513/index.html">We connect to the PSP gamepad from Xbox 360 using Raspberry Pi</a></li>
<li><a href="../213515/index.html">Cooking IndexedDB</a></li>
<li><a href="../213517/index.html">Neovim: a modern clone of the Vim text editor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
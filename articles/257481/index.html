<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reference Code</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Only a fool learns from his mistakes, an intelligent prefers to learn from others 
 My active correspondent, Charles Manning, sent me a link to a ques...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reference Code</h1><div class="post__text post__text-html js-mediator-article"><h1>  Only a fool learns from his mistakes, an intelligent prefers to learn from others </h1><br>  My active correspondent, Charles Manning, sent me a link to a question from the Nordic Semiconductor website.  Here is the question, literally: ‚ÄúWhich BLE profile will satisfy the ECG signals best and is there an example of code for the ADC from this profile?  I was looking for some time and I can not find it. ‚Äù <br><br>  Charles and I were stunned with him.  Someone creates a critical part of medical equipment with, we believe, limited knowledge of the communication protocol that he will use. He also plans to build this part at the reference (if anyone offers a good translation of this term, I will be grateful - ‚Äúexemplary and reference‚Äù are not very suitable - in Russian, these two terms contain a slightly different meaning, and the ‚Äúapproximate‚Äù one does not sound ‚Äî the translator's note) (I was told in the comments by the demo code ‚Äîpp) from the supplier‚Äôs code. <br><a name="habracut"></a><br>  It is probably unfair to draw such conclusions from just one question, despite perhaps chilling consequences for users.  And I'm not going to ban forums ‚Äî they are a great way to share knowledge.  In the pre-Internet era, we all pretty much had to figure out the questions we were interested in from our own experience, which was terribly inefficient.  I remember a trip to the arms of vendors to talk with chip developers in order to get inside information about some poorly documented or non-working functionality. <br><br>  And believe me, I‚Äôm totally reusing it, and I think that this is really our only hope of salvation, as the systems get bigger and more complex. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But the reference code is replete with errors and is far from complete.  It is usually intended to show the developer how to use the functions of the chip.  Most experienced developers have scars on their bodies from the episodes when they figured out why some parts of this code do not work.  Some of them are just awful (and some are even worse -).  Charles uses Nordic and claims that their code is a cut above the rest, but it is nonetheless a reference code. <br><br>  The person who asked such a question can be an extremely competent developer who will analyze the code before using it.  But this is a symptom indicating two problems in our industry today. <br><br>  The first one is often <s>lousy</s> unimportant code quality from a supplier.  In some cases, everything is so bad that a semiconductor company must keep a large team of its engineers at the customer‚Äôs site to help bring the product to market.  Of course, this only happens for those who buy a huge number of chips, and small consumers, or even those who buy hundreds of thousands, fly past. <br><br>  In some cases, as I know, the results of the work of these engineers are not returned back and are not reflected in the reference code provided to everyone else.  They never have time to look for answers to any questions, except for an immediate crisis, thus the updates remain out of attention. <br><br>  Nevertheless, it is necessary to show leniency to suppliers - after all, their mission is to sell chips.  The reference code is free and therefore perceived as free.  That is, it must exist to push the chip through the sales door, but it will never receive the required attention to the user's needs.  Modern microcontrollers are really complicated.  Even the tire can fall apart, the periphery works in countless modes.  Hundreds or even thousands of registers must be set correctly.  The initialization list today can be 500, 1000 or more pages.  The reference code really cannot handle each mode and possible configuration.  The cost of developing such a code is huge, and the price is zero. <br><br>  The second problem is the constant lack of time in the market.  Clients simply do not have the time to figure out the nuances of processing all of these peripherals as well as they need to create reliable code if they want to stay on the crest of a wave.  The solution is to reuse the reference code.  If this were a perfect world, reuse would be at the level of the object code, all reusable code would be qualified, and all customers would have complete confidence in the code. <br><br>  Delightful wonders will accompany the IoT explosion in the coming years if the situation remains so bad. <br><br>  Unfortunately, there is a subtle meta-reflection on what is good.  Suppose that a chip manufacturer creates a reference code that is absolutely perfect.  There are no mistakes, brilliant documentation and confirmation of the wonderfulness of this code by engineering practice.  Who will believe him?  Decades of problems created an atmosphere of general distrust.  How would the salesperson convince the skeptical that now, of course, he produced what we really want (that‚Äôs why they don‚Äôt do such a wonderful code - aha. Of course-well)? <br><br>  When it comes to reuse, we need to think about pyramids.  They were built on an incredibly solid foundation.  In the world of firmware, too often, this pyramid is upside down. <br><br>  What is your experience with the reference code? <br><br>  Further from the translator, the answer to Jack's question. <br>  About two weeks ago I saw in a blog a question about the failures of servo machines under the Arduino.  I found the code of the library used, I looked, I was horrified - they form software PWM, tugging the legs with their hands in interrupting the timer, so naturally (or as they say, of course) when loading the processor with another interrupt (and in that case it was about the wireless protocol support stack, I did not find the source codes, but which, most likely, following the modern fashion, is executed in the interrupt mode), the duration of the PWM pulses is able to expand by an indefinite amount. <br><br>  The solution is obvious - it is necessary to use hardware PWM in such cases, but how do you think somewhere in the documentation this was said?  And all downloaded from the official website of Arduino.  There is an alternative solution, but there are cockroaches and almost bigger ones.  In the words of Comrade Stalin - "Both are worse." <br>  Well, then figs with them with Arduino (although with a fright, the guys consider themselves to be fully grown-up and should be asked accordingly), but just yesterday a bug was found in the reference library (port lwIP) on STM, which manifests itself under certain conditions non-simultaneous power supply to different hardware parts of the device. <br><br>  Somewhere from six months ago, familiar young engineers did not work with USB reference library from STM on certain modes, and a month later a new version of the library appeared, which earned, for which STM sincere thanks (that these engineers, of course, do not justify in such uncritical use third-party code). <br><br>  As, in many respects rightly, my colleague pointed out about the same Arduino libraries, their use strongly resembles a cargo cult, that is, do it and you will be happy.  And everything is great, as long as everything really works, but if not ... this is where knowledge is required, which, in principle, cannot be given in advance.  I would like to understand me correctly - I am not against Arduino, moreover, it is a wonderful ecosystem that tremendously lowered the threshold of entry and attracted a huge number of people to the firmware, but we must clearly understand that it is not a silver bullet, and even when implementing not extremely complex functions can create certain problems that it does not solve.  That is, start with Arduino, but then go on - there the most interesting begins. <br><br>  Ps.  I can‚Äôt understand why the same Jack reads his course on the firmware ‚ÄúMore Firmware, Faster‚Äù every year in 5-6 countries, and we don‚Äôt have anything like that.  We do not need strong engineers?  I can not believe it.  Or is it the reluctance to learn?  Or unwillingness to pay for studies (for your own or your employees)?  I do not have an answer to these questions, there is only a statement of fact. </div><p>Source: <a href="https://habr.com/ru/post/257481/">https://habr.com/ru/post/257481/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../257469/index.html">Issue with SCVMM Admin Console after installing Update Rollup 6</a></li>
<li><a href="../257471/index.html">Post Hawk switched to https</a></li>
<li><a href="../257475/index.html">Top 3 among the reasons for the refusal to use the callback widget</a></li>
<li><a href="../257477/index.html">Jet Messenger, or CQRS and ES with Akka and Scala</a></li>
<li><a href="../257479/index.html">Infrastructure of the Radio Access Network as an investment</a></li>
<li><a href="../257483/index.html">And again about the ears</a></li>
<li><a href="../257487/index.html">What is Junos Fusion?</a></li>
<li><a href="../257489/index.html">Intel Enterprise Edition - ‚ÄúShade‚Äù for Luster</a></li>
<li><a href="../257491/index.html">REST server for a simple Haskell blog</a></li>
<li><a href="../257493/index.html">How to quickly build mailer for call center</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>I can not write a binary search</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently (literally two years ago) an article ran through here. Only 10% of programmers are able to write a binary search . Binary search is a classic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">🔎</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">📜</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">⬆️</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">⬇️</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>I can not write a binary search</h1><div class="post__text post__text-html js-mediator-article">  Recently (literally two years ago) an article ran through here. <a href="http://habrahabr.ru/post/91605/">Only 10% of programmers are able to write a binary search</a> .  Binary search is a <b>classic</b> search algorithm.  Moreover, it is still an extremely <b>simple</b> algorithm that can be very easily described: take a sorted array, look in the middle, if you do not find a number there, depending on what is in the middle - we are looking for this number using the same method either on the left side or on the right, tilting the middle element.  For functions also, we simply take not an array, but a function.  Everything is very, very simple, the algorithm is described almost everywhere, all the bugs are recorded and described. <br><br>  So, I can not implement a binary search.  For me, he is not a bit trivial.  I guess I'm not a real programmer.  But it is, I am only a student, but this is no excuse?  More specifically, I cannot implement a good, correct, beautiful binary search.  All the time, the problem comes to me either with correctness, or with prettiness, or with both.  So, yes, the title is a little yellowish. <br>  Before reading this topic, write your version of the binary search - for a sorted array.  Moreover, depending on the parameter, the search should produce either the first element or any of the duplicates.  For comparison, write a binary search for functions <br><br><a name="habracut"></a>  For starters, I will write C # code.  I hope fans of other languages ​​will easily understand my code.  I will represent the boundaries of the search in the form of a half-interval [left;  right) i.e.  the left point is turned on, and the right point is turned off.  For me, the intervals are more convenient, I’m already used to their behavior, and besides, the use of half-intervals has some advantages when programming various algorithms (which we will talk about later).  In general, it is more correct to use half-intervals in terms of supporting the “common programming style”, as I write loops like this: <pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; array.Length; i++)</code></pre>  :<pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt;= array.Length - <span class="hljs-number"><span class="hljs-number">1</span></span>; i++)</code></pre><br>
       ,    ,    .          :<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinarySearch_Rec_Wrapper</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] array, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> element</span></span></span><span class="hljs-function">)</span></span>
{
    BinarySearch_Rec(array, element, <span class="hljs-number"><span class="hljs-number">0</span></span>, array.Length);
}</code></pre><br>
<br>
<h2> </h2><br>
,        .  ,       . ,       ,    <pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mid = (left + right) / <span class="hljs-number"><span class="hljs-number">2</span></span> </code></pre>     ,        (.    ): <pre><code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mid = left + (right - left) / <span class="hljs-number"><span class="hljs-number">2</span></span></code></pre><br>
          ,    .       <a href="http://en.wikipedia.org/wiki/Off-by-one_error">off-by-one</a>.  ,       : <br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d2d/945/84a/d2d94584aca1710195b7608b8eaa58fa.png" title="  "></div><br>
   ,        [0, 3)   [4, 7), ..  [left, mid)   [mid + 1, right).  ,     «»  ( ),       , , ,    .  ,       ,     ,     ,      .<br>
<br>
,         :      [left, right],       [left, mid — 1]  [mid + 1; right] ( ,    ,   ).<br>
      1 ( ,   ),    — 2 —  ,   .<br>
<br>
     ,        (   [left, mid)  [mid, right)),       1 (     [left, mid]  [mid + 1, right],  [left, mid — 1]  [mid, right]).<br>
<br>
,  ,       ,    ,     (array[mid]),   (key).     —      , ,   ,    ,   :-). -       .   ,   ,  «». <h6>:</h6><pre><code class="cs hljs">
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinarySearch_Rec</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] array, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> right</span></span></span><span class="hljs-function">)</span></span>
{
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mid = left + (right - left) / <span class="hljs-number"><span class="hljs-number">2</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array[mid] == key)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mid;

    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array[mid] &gt; key)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Rec(array, key, left, mid);
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Rec(array, key, mid + <span class="hljs-number"><span class="hljs-number">1</span></span>, right);
}
</code></pre><h6>:</h6><pre><code class="cs hljs">
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinarySearch_Iter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] array, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key</span></span></span><span class="hljs-function">)</span></span>
{
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> left = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> right = array.Length;

    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>)
    {
        <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mid = left + (right - left) / <span class="hljs-number"><span class="hljs-number">2</span></span>;

        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array[mid] == key)
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mid;

        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array[mid] &gt; key)
            right = mid;
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
            left = mid + <span class="hljs-number"><span class="hljs-number">1</span></span>;
    }
}
</code></pre><br>
<br>
<h6> :</h6>      ,    ,    ,     .      while(true),     ,  .        ,       ,    .       ,   . <br>
<br>
<h2> </h2><br>
,    ,        .     - , ?  -  .  ?     ( , -1)?   int  int?   null? (int?  c# —  ,    null).        ,  -  ,   ?  -  ? …    ,      «   ?».  ,     ,         :  ,   . ,  ,  ,     null,   null. <br>
<br>
        -(1 + left),  ,      ,    ,     . ,      —     ,    .       DRY,      -   ,     .       ,   . <br>
<br>
,       left == right, ..,     — [left, right).    ,  right — left &lt; 1  right — left &lt;= 0. , , ,     -     (  ,    ). <br>
<br>
<h6>:</h6><pre><code class="cs hljs">
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinarySearch_Rec</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] array, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> right</span></span></span><span class="hljs-function">)</span></span>
{
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mid = left + (right - left) / <span class="hljs-number"><span class="hljs-number">2</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (left &gt;= right)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -(<span class="hljs-number"><span class="hljs-number">1</span></span> + left);

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array[mid] == key)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mid;

    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array[mid] &gt; key)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Rec(array, key, left, mid);
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Rec(array, key, mid + <span class="hljs-number"><span class="hljs-number">1</span></span>, right);
}
</code></pre><h6>:</h6><pre><code class="cs hljs">
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinarySearch_Iter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] array, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key</span></span></span><span class="hljs-function">)</span></span>
{
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> left = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> right = array.Length;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mid = <span class="hljs-number"><span class="hljs-number">0</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!(left &gt;= right))
    {
        mid = left + (right - left) / <span class="hljs-number"><span class="hljs-number">2</span></span>;

        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array[mid] == key)
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mid;

        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array[mid] &gt; key)
            right = mid;
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
            left = mid + <span class="hljs-number"><span class="hljs-number">1</span></span>;
    }

    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -(<span class="hljs-number"><span class="hljs-number">1</span></span> + left);
}
</code></pre><br>
<br>
<h6> :</h6>   ,     .    ,       ,           . ,   - ,         .<br>
<br>
<h2> №3</h2><br>
 ,      .       ||,  &amp;&amp;,     ,       <a href="http://ru.wikipedia.org/wiki/XOR">XOR</a>': <br>
<table>
<tbody><tr>
<td> descendingOrder </td>
<td> array[mid] &gt; key </td>
<td> XOR </td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
</tbody></table><br>
..   descendingOrder  ,     ,  ,    .   «»,  ,    - .   ,     .<h6>:</h6><pre><code class="cs hljs">
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinarySearch_Rec</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] array, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> descendingOrder, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> right</span></span></span><span class="hljs-function">)</span></span>
{
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mid = left + (right - left) / <span class="hljs-number"><span class="hljs-number">2</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (left &gt;= right)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -(<span class="hljs-number"><span class="hljs-number">1</span></span> + left);

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array[mid] == key)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mid;

    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((array[mid] &gt; key) ^ descendingOrder)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Rec(array, descendingOrder, key, left, mid);
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Rec(array, descendingOrder, key, mid + <span class="hljs-number"><span class="hljs-number">1</span></span>, right);
}

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinarySearch_Rec_Wrapper</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] array, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key</span></span></span><span class="hljs-function">)</span></span>
{
	<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> descendingOrder = array[<span class="hljs-number"><span class="hljs-number">0</span></span>] &gt; array[array.Length - <span class="hljs-number"><span class="hljs-number">1</span></span>];
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Rec(array, descendingOrder, key, <span class="hljs-number"><span class="hljs-number">0</span></span>, array.Length);
}
</code></pre><h6>:</h6><pre><code class="cs hljs">
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinarySearch_Iter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] array, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> descendingOrder, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key</span></span></span><span class="hljs-function">)</span></span>
{
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> left = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> right = array.Length;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mid = <span class="hljs-number"><span class="hljs-number">0</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!(left &gt;= right))
    {
        mid = left + (right - left) / <span class="hljs-number"><span class="hljs-number">2</span></span>;

        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array[mid] == key)
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mid;

        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((array[mid] &gt; key) ^ descendingOrder)
            right = mid;
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
            left = mid + <span class="hljs-number"><span class="hljs-number">1</span></span>;
    }

    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -(<span class="hljs-number"><span class="hljs-number">1</span></span> + left);
}

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinarySearch_Iter_Wrapper</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] array, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key</span></span></span><span class="hljs-function">)</span></span>
{
	<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>)
    	<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> descendingOrder = array[<span class="hljs-number"><span class="hljs-number">0</span></span>] &gt; array[array.Length - <span class="hljs-number"><span class="hljs-number">1</span></span>];
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Iter(array, descendingOrder, key);
}
</code></pre><br>
<br>
<h6> :</h6>  :        ,     .         .<br>
<br>
<h3> №4</h3><br>
   ,       .         «»  —        ,      .  ,    ,       …      .<br>
 ,      ,           :<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bc4/800/12a/bc480012a0644eb05f3dfc9afc9e95ec.png" title="  "></div><br>
       ,  ,         ,        .    ,   ,          .          ,     ,     .      (.  )<br>
<br>
<h6>:</h6><pre><code class="cs hljs">
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinarySearch_Rec</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] array, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> descendingOrder, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> right</span></span></span><span class="hljs-function">)</span></span>
{
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mid = left + (right - left) / <span class="hljs-number"><span class="hljs-number">2</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (left &gt;= right)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -(<span class="hljs-number"><span class="hljs-number">1</span></span> + left);

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array[left] == key)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> left;

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array[mid] == key)
    {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mid == left + <span class="hljs-number"><span class="hljs-number">1</span></span>)
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mid;
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Rec(array, descendingOrder, key, left, mid + <span class="hljs-number"><span class="hljs-number">1</span></span>);
    }

    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((array[mid] &gt; key) ^ descendingOrder)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Rec(array, descendingOrder, key, left, mid);
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Rec(array, descendingOrder, key, mid + <span class="hljs-number"><span class="hljs-number">1</span></span>, right);
}

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinarySearch_Rec_Wrapper</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] array, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key</span></span></span><span class="hljs-function">)</span></span>
{
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> descendingOrder = array[<span class="hljs-number"><span class="hljs-number">0</span></span>] &gt; array[array.Length - <span class="hljs-number"><span class="hljs-number">1</span></span>];
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Rec(array, descendingOrder, key, <span class="hljs-number"><span class="hljs-number">0</span></span>, array.Length);
}
</code></pre><h6>:</h6><pre><code class="cs hljs">
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinarySearch_Iter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] array, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> descendingOrder, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key</span></span></span><span class="hljs-function">)</span></span>
{
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> left = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> right = array.Length;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mid = <span class="hljs-number"><span class="hljs-number">0</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!(left &gt;= right))
    {
        mid = left + (right - left) / <span class="hljs-number"><span class="hljs-number">2</span></span>;

        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array[left] == key)
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> left;

        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array[mid] == key)
        {
            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mid == left + <span class="hljs-number"><span class="hljs-number">1</span></span>)
                <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mid;
            <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
                right = mid + <span class="hljs-number"><span class="hljs-number">1</span></span>;
        }

        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((array[mid] &gt; key) ^ descendingOrder)
            right = mid;
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
            left = mid + <span class="hljs-number"><span class="hljs-number">1</span></span>;
    }

    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -(<span class="hljs-number"><span class="hljs-number">1</span></span> + left);
}

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinarySearch_Iter_Wrapper</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] array, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key</span></span></span><span class="hljs-function">)</span></span>
{
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> descendingOrder = array[<span class="hljs-number"><span class="hljs-number">0</span></span>] &gt; array[array.Length - <span class="hljs-number"><span class="hljs-number">1</span></span>];
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Iter(array, descendingOrder, key);
}
</code></pre><br>
<br>
<h3> №5</h3><br>
     ,      ,     ,  ,     .      ,    ,     :<br>
<div class="spoiler"><b class="spoiler_title">    ?</b><div class="spoiler_text"><div class="spoiler"><b class="spoiler_title">  ?</b><div class="spoiler_text"><div class="spoiler"><b class="spoiler_title">  </b><div class="spoiler_text"><pre><code class="cs hljs">
<span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> ElementToChoose
{
	First,
	Last,
	NoCare
}

<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span></span>
<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> Finds element equal to value in sorted array in range [low, high)</span></span>
<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">binarySearch</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] array, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ascendingOrder, ElementToChoose elementToChoose, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> low, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> high</span></span></span><span class="hljs-function">)</span></span> {
	<span class="hljs-comment"><span class="hljs-comment">// return valid invalid position</span></span>
	<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (low &gt;= high)
		<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -(low + <span class="hljs-number"><span class="hljs-number">1</span></span>);

	<span class="hljs-comment"><span class="hljs-comment">// return first or last found element</span></span>
	<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (elementToChoose == ElementToChoose.First)
		<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> == array[low])
			<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> low;

	<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> last = high - <span class="hljs-number"><span class="hljs-number">1</span></span>;

	<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (elementToChoose == ElementToChoose.Last)
		<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> == array[last])
			<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> last;

	<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mid = low + (high - low) / <span class="hljs-number"><span class="hljs-number">2</span></span>;

	<span class="hljs-comment"><span class="hljs-comment">// we have found some element</span></span>
	<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> == array[mid]) {
		<span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (elementToChoose) {
			<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ElementToChoose.NoCare:
				<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mid;

			<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ElementToChoose.First:
				<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mid - low &lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>)
					<span class="hljs-comment"><span class="hljs-comment">// array[mid] is the earliest element in array, return it</span></span>
					<span class="hljs-comment"><span class="hljs-comment">// because array[low] != value &amp;&amp; array[low+1] == value, where mid == low + 1</span></span>
					<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mid;
				<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
					<span class="hljs-comment"><span class="hljs-comment">// try to find first element</span></span>
					<span class="hljs-comment"><span class="hljs-comment">// don't forget to capture current element {|0, 0|, 1} -&gt; {0, 0}</span></span>
					<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> binarySearch(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, array, ascendingOrder, elementToChoose, low, mid + <span class="hljs-number"><span class="hljs-number">1</span></span>);
			<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ElementToChoose.Last:
				<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (last - mid &lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>)
					<span class="hljs-comment"><span class="hljs-comment">// array[mid] is the last element in array, return it</span></span>
					<span class="hljs-comment"><span class="hljs-comment">// because array[last] != value &amp;&amp; array[last - 1] == value, where mid == last - 1</span></span>
					<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mid;
				<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
					<span class="hljs-comment"><span class="hljs-comment">// try to find last element</span></span>
					<span class="hljs-comment"><span class="hljs-comment">// don't forget to capture current element {0, |0, 1|} -&gt; {0, 1}</span></span>
					<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> binarySearch(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, array, ascendingOrder, elementToChoose, mid, high);
		}
	}

	<span class="hljs-comment"><span class="hljs-comment">// choose left or right half, depending on sorting order &amp; comparing value and mid</span></span>
	<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &lt; array[mid]) ^ !ascendingOrder)
		<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> binarySearch(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, array, ascendingOrder, elementToChoose, low, mid);
	<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
		<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> binarySearch(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, array, ascendingOrder, elementToChoose, mid + <span class="hljs-number"><span class="hljs-number">1</span></span>, high);
}
</code></pre></div></div></div></div></div></div><br>
    ,           ?    ,      3  ,     ? ,  ,   ,    (     ). <br>
<br>
,   ,           / getFirstHalf, getSecondHalf (     ), getStartPoint/getLastPoint ( /  ), increaseLength/decreaseLength (  ), moveStartPoint.    -   .       ,     .<br>
<br>
<h5>    </h5> ,   ,        .  …       ,    « »,      .   : <br>
<br>
<pre><code class="cs hljs">
<span class="hljs-comment"><span class="hljs-comment">//   - Func&lt;float, float&gt; ,  float   float</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinarySearch_Func</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Func&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; func, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> descendingOrder, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> right</span></span></span><span class="hljs-function">)</span></span>
{
    <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> mid = (left + right) / <span class="hljs-number"><span class="hljs-number">2</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (left == mid || mid == right)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mid;

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((func(mid) &gt; key) ^ descendingOrder)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Func(func, descendingOrder, key, left, mid);
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Func(func, descendingOrder, key, mid, right);
}

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BinarySearch_Func_Wrapper</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Func&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; func, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> right</span></span></span><span class="hljs-function">)</span></span>
{
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (left &gt; right)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>.NaN;

    <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> descendingOrder = func(left) &gt; func(right);
    <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> isOk = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!descendingOrder)
        isOk = func(left) &lt;= key &amp;&amp; key &lt;= func(right);
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
        isOk = func(right) &lt;= key &amp;&amp; key &lt;= func(left);

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isOk)
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BinarySearch_Func(func, descendingOrder, key, left, right);
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>.NaN;
}
</code></pre><br>
   .   ?   ?       float'? (       ,    <a href="http://habrahabr.ru/post/112953/">       ?</a>, ,  - ).<br>
    ?    left; right?  [left, right],  [left, right),  (left, right],  (left, right)?  .        :<br>
<pre><code class="cs hljs">
<span class="hljs-comment"><span class="hljs-comment">//   x =&gt; x - -  f(x) = x</span></span>
Console.WriteLine(BinarySearch_Func_Wrapper(x =&gt; x, <span class="hljs-number"><span class="hljs-number">0.7f</span></span>, <span class="hljs-number"><span class="hljs-number">0.7f</span></span>, <span class="hljs-number"><span class="hljs-number">100.0f</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// : 0.7</span></span>
Console.WriteLine(BinarySearch_Func_Wrapper(x =&gt; x, <span class="hljs-number"><span class="hljs-number">0.8f</span></span>, <span class="hljs-number"><span class="hljs-number">0.8f</span></span>, <span class="hljs-number"><span class="hljs-number">100.0f</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// : 0,8000001</span></span>
Console.WriteLine(BinarySearch_Func_Wrapper(x =&gt; x, <span class="hljs-number"><span class="hljs-number">0.9f</span></span>, <span class="hljs-number"><span class="hljs-number">0.9f</span></span>, <span class="hljs-number"><span class="hljs-number">100.0f</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// : 0,9</span></span>

Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"{0:0.00000000}"</span></span>,<span class="hljs-number"><span class="hljs-number">0.8f</span></span>); <span class="hljs-comment"><span class="hljs-comment">// : 0,80000000</span></span>
</code></pre><br>
,  left           .   right        (). ..     a  b,        a,  b,  -  .  .<br>
  ,       ,  ,  mid    /.       .<br>
<br>
   - ,       func(left) == key  func(right) == key,         .<br>
<br>
  ,   :         ,   .<br>
,    ,   -    . ,     - .<br>
,  - ,    :     ,    — ,       a/b.     :  a  b . -:    O(lgn).<br>
<br>
,  :   -  —   ,    //     ,  ,    ?<br>
<br>
<b>P.S</b>:  ,      .  ,    <br>
<b>P.P.S</b>:        ?<br>
<br>
<b>UPD1</b>:   <a href="http://habrahabr.ru/users/fox_anthony/" class="user_link">fox_anthony</a>   -(1 + left)  ~left. : <a href="http://msdn.microsoft.com/ru-ru/library/d2bd4x66"> ~, msdn, c#</a></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/146228/">https://habr.com/ru/post/146228/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146220/index.html">Mini-computers: MK802, CuBox, Raspberry PI</a></li>
<li><a href="../146222/index.html">Educational startup is looking for development partners (iOS and Android)</a></li>
<li><a href="../146223/index.html">We integrate Amazon S3 into .Net application</a></li>
<li><a href="../146224/index.html">Evolution of analytical infrastructure</a></li>
<li><a href="../146227/index.html">What part of the code is written for the project for nothing?</a></li>
<li><a href="../146229/index.html">Google again sells popular applications and games for $ 0.99</a></li>
<li><a href="../146230/index.html">Larry Ellison acquires the island in Hawaii</a></li>
<li><a href="../146231/index.html">Agreement within the team</a></li>
<li><a href="../146232/index.html">Skolkovo Foundation is looking for startups in Ukraine and Belarus</a></li>
<li><a href="../146234/index.html">GWT Grid</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
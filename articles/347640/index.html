<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ZFS: Testing reliability on bad disks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ZFS is renowned for its reliability, and here I have several hand-cracked disks on my hands. Let's try on raidz1 to throw a certain amount of data, an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ZFS: Testing reliability on bad disks</h1><div class="post__text post__text-html js-mediator-article">  ZFS is renowned for its reliability, and here I have several hand-cracked disks on my hands.  Let's try on raidz1 to throw a certain amount of data, and then check their integrity, and zfs for resistance to this situation. <br><a name="habracut"></a><br><br>  The drives are connected to Adaptec RAID 2805 as ‚ÄúSimple Volume‚Äù, raidz1 is deployed on top with default settings (for the FreeBSD 11-1 installer). <br><div class="spoiler">  <b class="spoiler_title">ZFS configuration</b> <div class="spoiler_text"><pre><code class="bash hljs">zfs get all zroot NAME PROPERTY VALUE SOURCE zroot <span class="hljs-built_in"><span class="hljs-built_in">type</span></span> filesystem - zroot creation  . 26 15:40 2018 - zroot used 75,5G - zroot available 10,1T - zroot referenced 128K - zroot compressratio 1.01x - zroot mounted yes - zroot quota none default zroot reservation none default zroot recordsize 128K default zroot mountpoint /zroot <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> zroot sharenfs off default zroot checksum on default zroot compression lz4 <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> zroot atime off <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> zroot devices on default zroot <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> on default zroot setuid on default zroot <span class="hljs-built_in"><span class="hljs-built_in">readonly</span></span> off default zroot jailed off default zroot snapdir hidden default zroot aclmode discard default zroot aclinherit restricted default zroot canmount on default zroot xattr off temporary zroot copies 1 default zroot version 5 - zroot utf8only off - zroot normalization none - zroot casesensitivity sensitive - zroot vscan off default zroot nbmand off default zroot sharesmb off default zroot refquota none default zroot refreservation none default zroot primarycache all default zroot secondarycache all default zroot usedbysnapshots 0 - zroot usedbydataset 128K - zroot usedbychildren 75,5G - zroot usedbyrefreservation 0 - zroot logbias latency default zroot dedup off default zroot mlslabel - zroot sync standard default zroot refcompressratio 1.00x - zroot written 128K - zroot logicalused 75,8G - zroot logicalreferenced 11,5K - zroot volmode default default zroot filesystem_limit none default zroot snapshot_limit none default zroot filesystem_count none default zroot snapshot_count none default zroot redundant_metadata all default</code> </pre> <br></div></div><br><h2>  SMART drives </h2><br><div class="spoiler">  <b class="spoiler_title">aacd0p4</b> <div class="spoiler_text"><pre> <code class="bash hljs">=== START OF INFORMATION SECTION === Model Family: Western Digital Red Device Model: WDC WD40EFRX-68WT0N0 Serial Number: WD-WCC4E6PN673U LU WWN Device Id: 5 0014ee 20d6399e3 Firmware Version: 82.00A82 User Capacity: 4 000 787 030 016 bytes [4,00 TB] Sector Sizes: 512 bytes logical, 4096 bytes physical Rotation Rate: 5400 rpm Device is: In smartctl database [<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> details use: -P show] ATA Version is: ACS-2 (minor revision not indicated) SATA Version is: SATA 3.0, 6.0 Gb/s (current: 3.0 Gb/s) Local Time is: Fri Jan 26 15:25:30 2018 MSK SMART support is: Available - device has SMART capability. SMART support is: Enabled === START OF READ SMART DATA SECTION === SMART Status <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> failed: Input/output error SMART overall-health self-assessment <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> result: PASSED Warning: This result is based on an Attribute check. SMART Attributes Data Structure revision number: 16 Vendor Specific SMART Attributes with Thresholds: ID<span class="hljs-comment"><span class="hljs-comment"># ATTRIBUTE_NAME FLAG VALUE WORST THRESH TYPE UPDATED WHEN_FAILED RAW_VALUE 1 Raw_Read_Error_Rate 0x002f 200 200 051 Pre-fail Always - 296 3 Spin_Up_Time 0x0027 210 208 021 Pre-fail Always - 6483 4 Start_Stop_Count 0x0032 100 100 000 Old_age Always - 14 5 Reallocated_Sector_Ct 0x0033 200 200 140 Pre-fail Always - 0 7 Seek_Error_Rate 0x002e 100 253 000 Old_age Always - 0 9 Power_On_Hours 0x0032 090 090 000 Old_age Always - 7986 10 Spin_Retry_Count 0x0032 100 253 000 Old_age Always - 0 11 Calibration_Retry_Count 0x0032 100 253 000 Old_age Always - 0 12 Power_Cycle_Count 0x0032 100 100 000 Old_age Always - 14 192 Power-Off_Retract_Count 0x0032 200 200 000 Old_age Always - 10 193 Load_Cycle_Count 0x0032 200 200 000 Old_age Always - 186 194 Temperature_Celsius 0x0022 112 111 000 Old_age Always - 40 196 Reallocated_Event_Count 0x0032 200 200 000 Old_age Always - 0 197 Current_Pending_Sector 0x0032 200 200 000 Old_age Always - 0 198 Offline_Uncorrectable 0x0030 200 200 000 Old_age Offline - 17 199 UDMA_CRC_Error_Count 0x0032 200 200 000 Old_age Always - 0 200 Multi_Zone_Error_Rate 0x0008 200 200 000 Old_age Offline - 55</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">aacd1p4</b> <div class="spoiler_text"><pre> <code class="bash hljs">=== START OF INFORMATION SECTION === Model Family: Western Digital Red Device Model: WDC WD40EFRX-68WT0N0 Serial Number: WD-WCC4E7LPL4AH LU WWN Device Id: 5 0014ee 2b8213774 Firmware Version: 82.00A82 User Capacity: 4 000 787 030 016 bytes [4,00 TB] Sector Sizes: 512 bytes logical, 4096 bytes physical Rotation Rate: 5400 rpm Device is: In smartctl database [<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> details use: -P show] ATA Version is: ACS-2 (minor revision not indicated) SATA Version is: SATA 3.0, 6.0 Gb/s (current: 3.0 Gb/s) Local Time is: Fri Jan 26 15:26:19 2018 MSK SMART support is: Available - device has SMART capability. SMART support is: Enabled === START OF READ SMART DATA SECTION === SMART Status <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> failed: Input/output error SMART overall-health self-assessment <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> result: PASSED Warning: This result is based on an Attribute check. SMART Attributes Data Structure revision number: 16 Vendor Specific SMART Attributes with Thresholds: ID<span class="hljs-comment"><span class="hljs-comment"># ATTRIBUTE_NAME FLAG VALUE WORST THRESH TYPE UPDATED WHEN_FAILED RAW_VALUE 1 Raw_Read_Error_Rate 0x002f 200 200 051 Pre-fail Always - 6043 3 Spin_Up_Time 0x0027 207 190 021 Pre-fail Always - 6616 4 Start_Stop_Count 0x0032 100 100 000 Old_age Always - 10 5 Reallocated_Sector_Ct 0x0033 173 173 140 Pre-fail Always - 803 7 Seek_Error_Rate 0x002e 200 200 000 Old_age Always - 0 9 Power_On_Hours 0x0032 090 090 000 Old_age Always - 7964 10 Spin_Retry_Count 0x0032 100 253 000 Old_age Always - 0 11 Calibration_Retry_Count 0x0032 100 253 000 Old_age Always - 0 12 Power_Cycle_Count 0x0032 100 100 000 Old_age Always - 10 192 Power-Off_Retract_Count 0x0032 200 200 000 Old_age Always - 7 193 Load_Cycle_Count 0x0032 200 200 000 Old_age Always - 212 194 Temperature_Celsius 0x0022 108 108 000 Old_age Always - 44 196 Reallocated_Event_Count 0x0032 049 049 000 Old_age Always - 151 197 Current_Pending_Sector 0x0032 200 200 000 Old_age Always - 6 198 Offline_Uncorrectable 0x0030 200 200 000 Old_age Offline - 101 199 UDMA_CRC_Error_Count 0x0032 200 200 000 Old_age Always - 0 200 Multi_Zone_Error_Rate 0x0008 200 200 000 Old_age Offline - 232</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">aacd2p4</b> <div class="spoiler_text"><pre> <code class="bash hljs">=== START OF INFORMATION SECTION === Model Family: Western Digital Green Device Model: WDC WD40EZRX-22SPEB0 Serial Number: WD-WCC4E4KAK52T LU WWN Device Id: 5 0014ee 2b6900646 Firmware Version: 80.00A80 User Capacity: 4 000 787 030 016 bytes [4,00 TB] Sector Sizes: 512 bytes logical, 4096 bytes physical Rotation Rate: 5400 rpm Device is: In smartctl database [<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> details use: -P show] ATA Version is: ACS-2 (minor revision not indicated) SATA Version is: SATA 3.0, 6.0 Gb/s (current: 3.0 Gb/s) Local Time is: Fri Jan 26 15:26:43 2018 MSK SMART support is: Available - device has SMART capability. SMART support is: Enabled === START OF READ SMART DATA SECTION === SMART Status <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> failed: Input/output error SMART overall-health self-assessment <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> result: PASSED Warning: This result is based on an Attribute check. SMART Attributes Data Structure revision number: 16 Vendor Specific SMART Attributes with Thresholds: ID<span class="hljs-comment"><span class="hljs-comment"># ATTRIBUTE_NAME FLAG VALUE WORST THRESH TYPE UPDATED WHEN_FAILED RAW_VALUE 1 Raw_Read_Error_Rate 0x002f 200 200 051 Pre-fail Always - 0 3 Spin_Up_Time 0x0027 180 173 021 Pre-fail Always - 7983 4 Start_Stop_Count 0x0032 100 100 000 Old_age Always - 11 5 Reallocated_Sector_Ct 0x0033 200 200 140 Pre-fail Always - 0 7 Seek_Error_Rate 0x002e 200 200 000 Old_age Always - 0 9 Power_On_Hours 0x0032 087 087 000 Old_age Always - 9777 10 Spin_Retry_Count 0x0032 100 253 000 Old_age Always - 0 11 Calibration_Retry_Count 0x0032 100 253 000 Old_age Always - 0 12 Power_Cycle_Count 0x0032 100 100 000 Old_age Always - 11 192 Power-Off_Retract_Count 0x0032 200 200 000 Old_age Always - 6 193 Load_Cycle_Count 0x0032 138 138 000 Old_age Always - 186920 194 Temperature_Celsius 0x0022 110 109 000 Old_age Always - 42 196 Reallocated_Event_Count 0x0032 200 200 000 Old_age Always - 0 197 Current_Pending_Sector 0x0032 200 200 000 Old_age Always - 0 198 Offline_Uncorrectable 0x0030 200 200 000 Old_age Offline - 0 199 UDMA_CRC_Error_Count 0x0032 200 200 000 Old_age Always - 0 200 Multi_Zone_Error_Rate 0x0008 200 200 000 Old_age Offline - 0</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">aacd3p4</b> <div class="spoiler_text"><pre> <code class="bash hljs">=== START OF INFORMATION SECTION === Model Family: Western Digital Green Device Model: WDC WD40EZRX-00SPEB0 Serial Number: WD-WCC4E5ALXUHC LU WWN Device Id: 5 0014ee 20c16eacf Firmware Version: 80.00A80 User Capacity: 4 000 787 030 016 bytes [4,00 TB] Sector Sizes: 512 bytes logical, 4096 bytes physical Rotation Rate: 5400 rpm Device is: In smartctl database [<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> details use: -P show] ATA Version is: ACS-2 (minor revision not indicated) SATA Version is: SATA 3.0, 6.0 Gb/s (current: 3.0 Gb/s) Local Time is: Fri Jan 26 15:27:03 2018 MSK SMART support is: Available - device has SMART capability. SMART support is: Enabled === START OF READ SMART DATA SECTION === SMART Status <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> failed: Input/output error SMART overall-health self-assessment <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> result: PASSED Warning: This result is based on an Attribute check. SMART Attributes Data Structure revision number: 16 Vendor Specific SMART Attributes with Thresholds: ID<span class="hljs-comment"><span class="hljs-comment"># ATTRIBUTE_NAME FLAG VALUE WORST THRESH TYPE UPDATED WHEN_FAILED RAW_VALUE 1 Raw_Read_Error_Rate 0x002f 200 200 051 Pre-fail Always - 394 3 Spin_Up_Time 0x0027 194 179 021 Pre-fail Always - 7258 4 Start_Stop_Count 0x0032 100 100 000 Old_age Always - 16 5 Reallocated_Sector_Ct 0x0033 195 195 140 Pre-fail Always - 160 7 Seek_Error_Rate 0x002e 200 200 000 Old_age Always - 0 9 Power_On_Hours 0x0032 090 090 000 Old_age Always - 7584 10 Spin_Retry_Count 0x0032 100 253 000 Old_age Always - 0 11 Calibration_Retry_Count 0x0032 100 253 000 Old_age Always - 0 12 Power_Cycle_Count 0x0032 100 100 000 Old_age Always - 16 192 Power-Off_Retract_Count 0x0032 200 200 000 Old_age Always - 11 193 Load_Cycle_Count 0x0032 001 001 000 Old_age Always - 678600 194 Temperature_Celsius 0x0022 114 112 000 Old_age Always - 38 196 Reallocated_Event_Count 0x0032 121 121 000 Old_age Always - 79 197 Current_Pending_Sector 0x0032 200 200 000 Old_age Always - 44 198 Offline_Uncorrectable 0x0030 200 200 000 Old_age Offline - 319 199 UDMA_CRC_Error_Count 0x0032 200 200 000 Old_age Always - 1 200 Multi_Zone_Error_Rate 0x0008 199 199 000 Old_age Offline - 530</span></span></code> </pre> <br></div></div><br><h3>  Start the torment </h3><br>  As a test data, I threw about 71 GB of any multimedia, <br><br><div class="spoiler">  <b class="spoiler_title">A bunch of reading errors</b> <div class="spoiler_text"><pre> <code class="bash hljs">aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40789032-40789207 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40789032-40789207 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40790712-40790967 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40789560-40789735 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40794064-40794319 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40795208-40795287 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40795824-40796079 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40796088-40796343 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40797240-40797423 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 21743840-21744015 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 28502624-28502799 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 28597680-28597855 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 28635368-28635623 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37340776-37340951 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37342712-37342887 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37347808-37348063 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37348072-37348327 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37352168-37352343 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37359472-37359647 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37365576-37365831 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37372960-37373215 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37373488-37373743 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37380608-37380863 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37381136-37381391 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37382984-37383239 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 57577976-57577999 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 4606480-4606495 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 7811867664-7811867679 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 7811868176-7811868191 aac0: COMMAND 0xfffffe0000e97690 (TYPE 502) TIMEOUT AFTER 137 SECONDS aac0: COMMAND 0xfffffe0000e91650 (TYPE 502) TIMEOUT AFTER 137 SECONDS aac0: COMMAND 0xfffffe0000e92d10 (TYPE 502) TIMEOUT AFTER 137 SECONDS aac0: WARNING! Controller is no longer running! code= 0xbcc90100 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40785088-40785343 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40785352-40785607 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40785616-40785871 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40788240-40788495 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40783592-40783847 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40784648-40784903 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40785176-40785431 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40785440-40785695 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 21743928-21744103 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 25407280-25407535 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 28507712-28507967 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37322056-37322311 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37344208-37344383 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37348160-37348415 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37373488-37373743 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37380696-37380951 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37383072-37383327 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37383776-37384031 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37395312-37395487 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 37426368-37426623 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40682424-40682679 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40702816-40703071 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40725472-40725647 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40760224-40760479 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40761280-40761535 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40764536-40764711 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40772144-40772399 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40774520-40774775 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40778304-40778559 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40783592-40783847 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40784648-40784903 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40785176-40785431 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40785440-40785695 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40785792-40785879 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40785792-40785871 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40785792-40785879 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40790624-40790879 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40790000-40790175 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 40799280-40799535 aacd3: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 41121032-41121287 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 44290824-44290999 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 44301408-44301583 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 44315680-44315935 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 44330184-44330359 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 44337224-44337399 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 44344472-44344727 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 51561672-51561927 aacd1: hard error cmd=<span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 51571528-51571783</code> </pre><br></div></div><br>  During the test, there were a lot of problems with the Adaptec RAID 2805 controller, which fell with a panic on the problem disks, which is why the check ran 6 times. However, the check was completed, and even the data could not be lost. <br><div class="spoiler">  <b class="spoiler_title">Pool status</b> <div class="spoiler_text"><pre> <code class="bash hljs"> pool: zroot state: DEGRADED status: One or more devices are faulted <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> response to persistent errors. Sufficient replicas exist <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the pool to <span class="hljs-built_in"><span class="hljs-built_in">continue</span></span> functioning <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> a degraded state. action: Replace the faulted device, or use <span class="hljs-string"><span class="hljs-string">'zpool clear'</span></span> to mark the device repaired. scan: scrub <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> progress since Fri Jan 26 16:05:37 2018 67,0G scanned out of 101G at 71,3M/s, 0h8m to go 2,63M repaired, 66,05% <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> config: NAME STATE READ WRITE CKSUM zroot DEGRADED 0 0 0 raidz1-0 DEGRADED 0 0 0 aacd0p4 ONLINE 0 0 0 aacd1p4 FAULTED 40 93 7 too many errors (repairing) aacd2p4 ONLINE 0 0 0 aacd3p4 ONLINE 0 0 0 pool: zroot state: ONLINE status: One or more devices has experienced an unrecoverable error. An attempt was made to correct the error. Applications are unaffected. action: Determine <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> the device needs to be replaced, and clear the errors using <span class="hljs-string"><span class="hljs-string">'zpool clear'</span></span> or replace the device with <span class="hljs-string"><span class="hljs-string">'zpool replace'</span></span>. see: http://illumos.org/msg/ZFS-8000-9P scan: scrub repaired 4,54M <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> 0h18m with 0 errors on Fri Jan 26 16:45:35 2018 config: NAME STATE READ WRITE CKSUM zroot ONLINE 0 0 0 raidz1-0 ONLINE 0 0 0 aacd0p4 ONLINE 0 0 0 aacd1p4 ONLINE 1 0 11 aacd2p4 ONLINE 0 0 0 aacd3p4 ONLINE 0 0 2 errors: No known data errors</code> </pre> <br></div></div><br>  For the secondary confirmation of the integrity used torrent, which did not find errors in the test set. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Results </h3><br>  ZFS performed well, even in obviously bad conditions.  ZFS worked against the disks and the controller, the firmware of which fell due to problems on the disks.  Remarkably, the writing to the disks went very quickly (downloaded the entire gigabit of the network card), but the reading and with errors took a lot of time.  What to do with it, decide for yourself;) </div><p>Source: <a href="https://habr.com/ru/post/347640/">https://habr.com/ru/post/347640/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../347628/index.html">Free conference broadcast on the Internet of Things InoThings ++</a></li>
<li><a href="../347632/index.html">What is in the name? Analysis of the names of 5820 games on Steam</a></li>
<li><a href="../347634/index.html">How to improve site performance by 8 times: our experience in integrating AWS services</a></li>
<li><a href="../347636/index.html">Issue # 8: IT training - current issues and challenges from leading companies</a></li>
<li><a href="../347638/index.html">We expand bottlenecks Xamarin.Forms</a></li>
<li><a href="../347642/index.html">ArcSight Forwarder Connector. Send wherever we want</a></li>
<li><a href="../347644/index.html">Facebook breaks into blockchain and cryptocurrency: forecast</a></li>
<li><a href="../347646/index.html">Leave all doubts: how to avoid the impostor syndrome</a></li>
<li><a href="../347648/index.html">Outside the office. We automate specialized processes in a medical manufacturing company.</a></li>
<li><a href="../347650/index.html">How the principles of the game "Playing Lean" help in the creation of products</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We expand bottlenecks Xamarin.Forms</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When creating mobile applications, there are many different applications in the spirit of "as it would be nice if ..." And you can substitute items th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We expand bottlenecks Xamarin.Forms</h1><div class="post__text post__text-html js-mediator-article">  When creating mobile applications, there are many different applications in the spirit of "as it would be nice if ..." And you can substitute items that need improvement.  For novice developers, the item ‚Äúif it worked faster ...‚Äù will be included in this list with high probability. This article will collect recommendations that will help novice developers of Xamarin.Forms to bypass the bottlenecks of the framework and build tools.  And we begin with iron. <br><br><img src="https://habrastorage.org/webt/cg/9h/ou/cg9hourtlmzdlzok6fwfbp0uzko.jpeg"><br><a name="habracut"></a><br>  <i>I give the word to the author.</i> <br><br><h1>  1. Setting up the environment </h1><br>  The first thing that Xamarin.Forms developers face is a long build of projects, much longer than a comfortable level.  This is due to the fact that a large number of files are created and updated during assembly. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/_d/x-/4l/_dx-4lyweyaj4isbffaiklg7smi.png"><br><br><p>  To speed up the build, it‚Äôs enough to transfer the source folder to the RAM disk.  This is when part of the RAM is used as a local disk or folder in the Mac file system.  So that nothing is lost, the data from the RAM disk is saved on the SSD by timer.  If you still have a regular hard disk (HDD), then you should definitely upgrade to SSD.  RAM disk 4 GB + good SSD significantly speed up the build.  Approximately an order of magnitude. </p><br>  On the net you can <a href="https://www.bing.com/search%3Fq%3DRAM%2Bdisk">find</a> various utilities for working with RAM disks, as well as instructions for working with them. <br><br><h1>  2. Bottlenecks Xamarin </h1><br><p>  As with any other tool, you should understand the features of Xamarin.Forms when creating applications.  If the task of the application is to surprise the user with a large number of animations and a non-standard interface, cross-platform frameworks are not the best choice.  But for relatively static business applications, they fit much better. </p><br>  Since Xamarin.Forms is an add-on to the classic Xamarin.iOS and Xamarin.Android, you should understand their bottlenecks.  Below is the application architecture on Xamarin.iOS and Xamarin.Android. <br><br><img src="https://habrastorage.org/webt/xh/vq/c2/xhvqc22jdav2kramcjgxaqwle5k.png"><br><br><p>  Xamarin-application consists of two parts: native and cross-platform (Mono environment).  These parts communicate with each other through a special bridge (bridge).  A wrapper is created around each native class and type for the Mono environment.  When transferring data and calling methods in the ‚Äúnative‚Äù - ‚Äúcross-platform‚Äù transition, there is a slight drop in performance, so you should definitely take this into account. </p><br><p>  For example, when computing and working with data, use types and classes from the Mono environment (C # /. NET), and not native (nfloat).  We also follow to minimize the control of the UI from the C # code.  For example, do not animate or intensively update the UI in a loop from the cross-platform part.  Not that there were any brakes, but with large calculations and massive UI controls (a large number of elements with asynchronous data and various animations) there may be noticeable to the user and unnecessary delays. </p><br><p>  This fully applies to Xamarin.Forms, which solves the difficult task of simultaneously providing a flexible and high-performance user interface layer and platform functionality for iOS, Android (as well as Windows UWP, mac OS, GTK # and Tizen), but do not take into account).  And despite the fact that most of the ‚Äúchildhood‚Äù diseases have already been overcome, there are still bottlenecks in it, which should be taken into account when developing. </p><br><h1>  3. XAML </h1><br><p>  In the first versions of Xamarin.Forms there were obvious performance problems with XAML pages.  It was possible to describe the same user interface in a C # code - this reduced the creation time (constructor call!) Page or View by more than 300 ms on devices of average performance.  For complex components this time was even longer.  App.xaml contributed to the increase in the cold start time of the application.  If it had a lot of styles and other resources, then the launch of the application could increase by noticeable seconds.  Again from scratch.  This problem was especially relevant for Android, where a simple departure from using App.xaml and Starting Page (for example, MainPage.xaml and MenuPage.xaml) in favor of the C # code shortened the application launch time sometimes by half. </p><br><p>  Adding a XAML compilation noticeably reduced this time.  In <b>Xamarin.Forms 2.5.0, we</b> got the <b>following</b> figures for the Hello World page: </p><br><ul><li>  XAML without compilation 441 ms </li><li>  XAML with 188 ms compilation </li><li>  C # 182 ms code. </li></ul><br><img src="https://habrastorage.org/webt/na/8b/kf/na8bkfqfhe_k-azblumiiboewha.png"><br><br><p> As you can see, in some rare cases, for example, for ListView cells where maximum performance is important, you can use the C # interface description.  And for all other scenarios, you can significantly speed up the work of the UI by adding the string <code>[assembly: XamlCompilation(XamlCompilationOptions.Compile)]</code> to the code of your project. </p><br><br><img src="https://habrastorage.org/webt/ra/bd/qk/rabdqkwqfvfr4tvegcgfhgkczfe.png"><br><br><p>  It is also worth considering that for nested XAMLs (the XAML page uses external View, also described for XAML) with a complex layout and a large number of elements, the initialization time will be higher than the Hello World example.  Compiling XAML can significantly speed up the creation of Page and View, and we move on to the next item. </p><br><h1>  4. Layout </h1><br><p>  In order to provide cross-platform UI layout for iOS, Android (and other platforms), Xamarin.Forms has implemented its own layout elements for interface elements.  The native iOS and Android have their own Layout mechanisms, but they are not suitable for cross-platform applications, as they have logic specific for each platform. </p><br><br><img src="https://habrastorage.org/webt/gp/hc/3_/gphc3_asmh0k10jwimvdvks52uy.png"><br><br><p>  In order to properly build the pages, the framework must know the dimensions of the elements nested on the page, and this starts a traversal of the entire tree of child controls.  In future releases, Xamarin.Forms promise many optimizations including Layout mechanisms.  But now it is worth remembering about a simple rule - <b>the more accurate digits will be specified for UI-elements and the lower the level of nesting will be, the faster the layout will work.</b>  For example, you can specify <code>AbsoluteLayout.LayoutBounds="0.1,0.1,0.3,0.3"  WidthRequest=‚Äù300‚Äù</code> in the properties of the UI element. </p><br><p>  Also sometimes there is a need for the implementation of its Layout.  You can calculate exact dimensions for each UI element in them, for example, relative to the size of the parent View.  This will remove the long coordinate recalculation and help, again, speed up the heavy cells in the ListView. </p><br><br><p>  <a href="https://developer.xamarin.com/guides/xamarin-forms/deployment-testing/performance/">More on Layout Optimization</a> </p><br><p>  <a href="https://developer.xamarin.com/guides/xamarin-forms/creating-mobile-apps-xamarin-forms/summaries/chapter26/">Learn more about creating your own layouts.</a> </p><br><br><h1>  5. Updating UI and correct ViewModel </h1><br><p>  Another pain of all UI subsystems, including Xamarin.Forms, is recalculating the sizes when updating data.  This is the notorious problem of updating the tree of visual objects, for which ReactJS with its analogs appeared in web development.  In mobile, this problem is, although not so acute. </p><br><p>  In Xamarin.Forms, the MVVM architecture is used, in which, when updating the ViewModel property, a PropertyChanged event is raised, new data comes to the UI, and the View can request a recalculation of dimensions and coordinates from the entire page. </p><br><br><img src="https://habrastorage.org/webt/rk/co/as/rkcoasbf1zvgl9r1_cfuve8gura.png"><br><br><p>  If you update 10 different fields, then there will be 10 building cycles throughout the tree of elements on the page, and these <i>are 10 cycles</i> that are <i>noticeable to the user's eye</i> .  In order to run 1 instead of 10 cycles, you should use 1 model with the required 10 fields.  Now the model and View will be updated entirely - one PropertyChanged event instead of 10. </p><br><br><img src="https://habrastorage.org/webt/sp/0x/md/sp0xmdwpmpj92ujjxnbozedfcsc.png"><br><br><p>  So, in our today's article, we looked at the main bottlenecks of Xamarin.Forms and the approaches that negate their effect.  And that's not all for today! </p><br><h1>  Invitation to Xamarin Day </h1><br><p>  If you have questions about Xamarin, and you are interested in developing cross-platform applications, I‚Äôm reminding you of the upcoming Xamarin Day, which will be held <b>on January 31 in Moscow</b> .  Here you can not only learn about the best practices, but also get a <b>live consultation on your code</b> !  Show pieces of your code for which you have questions (problems, bugs, architecture, poor performance, etc.) and get a free consultation from the experts on the spot.  To apply for individual consultation on your project - write a brief information about it and the problem at <a href="">events-techdays@microsoft.com</a> . </p><br>  Read more about the event <a href="https://events.techdays.ru/Xamarin-Day/2018-01/">here</a> . <br><br><p>  Join our cozy chat <a href="https://t.me/xamarin_russia">Xamarin Developers in Telegram</a> . </p><br><br><p>  Stay in touch and <b>be sure to come to Xamarin Day!</b> </p><br><br><h2>  about the author </h2><br><img src="https://habrastorage.org/files/f70/e9c/e7a/f70e9ce7a2bd45a98e19652a08b15e26.JPG" align="left" width="120">  <b>Vyacheslav Chernikov</b> - head of development at <a href="http://www.binwell.com/">Binwell</a> , Microsoft MVP and Xamarin Certified Developer.  In the past, he was one of the Nokia Champion and Qt Certified Specialists, currently he is the Xamarin and Azure platform specialist.  He came to the sphere of mobile in 2005, since 2008 he has been developing mobile applications: he started with Symbian, Maemo, Meego, Windows Mobile, then switched to iOS, Android and Windows Phone.  Articles Vyacheslav you can also read the <a href="https://medium.com/binwell/public/home">blog on Medium</a> . <br><br>  Other articles of the author can be found in our column <a href="https://habrahabr.ru/search/%3Ftarget_type%3Dposts%26q%3D%255Bxamarincolumn%255D%26order_by%3Ddate">#xamarincolumn</a> . </div><p>Source: <a href="https://habr.com/ru/post/347638/">https://habr.com/ru/post/347638/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../347626/index.html">Object modeling</a></li>
<li><a href="../347628/index.html">Free conference broadcast on the Internet of Things InoThings ++</a></li>
<li><a href="../347632/index.html">What is in the name? Analysis of the names of 5820 games on Steam</a></li>
<li><a href="../347634/index.html">How to improve site performance by 8 times: our experience in integrating AWS services</a></li>
<li><a href="../347636/index.html">Issue # 8: IT training - current issues and challenges from leading companies</a></li>
<li><a href="../347640/index.html">ZFS: Testing reliability on bad disks</a></li>
<li><a href="../347642/index.html">ArcSight Forwarder Connector. Send wherever we want</a></li>
<li><a href="../347644/index.html">Facebook breaks into blockchain and cryptocurrency: forecast</a></li>
<li><a href="../347646/index.html">Leave all doubts: how to avoid the impostor syndrome</a></li>
<li><a href="../347648/index.html">Outside the office. We automate specialized processes in a medical manufacturing company.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
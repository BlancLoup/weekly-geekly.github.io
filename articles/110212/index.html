<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>AA-Tree or simple binary tree</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The theme of binary trees has already been discussed in Habr√© ( here and here ). 

 About the AA-tree, it was said that "due to the additional restric...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>AA-Tree or simple binary tree</h1><div class="post__text post__text-html js-mediator-article">  The theme of binary trees has already been discussed in Habr√© ( <a href="http://habrahabr.ru/blogs/algorithm/65617/">here</a> and <a href="http://habrahabr.ru/blogs/algorithm/101818/">here</a> ). <br><br>  About the AA-tree, it was said that "due to the additional restriction, operations are implemented easier than that of a red-ebony tree (due to a decrease in the number of cases to be analyzed)". <br><br>  However, it seems to me that the AA-tree deserves a separate article. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>  Why? <br><br>  Because in fact it is the fastest (or one of the fastest) binary tree with a <b>simple</b> implementation. <br><br>  I will leave outside the scope of this article the consideration of the insertion and deletion algorithms in AVL and red-ebony, but their implementation is usually not trivial.  Why? <br><br>  As it is known, the main problem of a binary tree is its balancing, that is, opposition to degeneration into a regular linked list.  Usually when balancing a tree, there are many options for the relative position of the vertices, each of which must be taken into account separately in the algorithm. <br><br>  <a href="http://en.wikipedia.org/wiki/AA_tree">The AA-tree</a> was invented by Arne Andersson, who decided that to simplify the balancing of the tree, it was necessary to introduce the concept of <b>level</b> (vertex).  If we imagine a tree growing <i>from top to bottom</i> from the root (that is, ‚Äústanding on the leaves‚Äù), then the level of any leaf vertex will be equal to 1. In his <a href="http://user.it.uu.se/~arnea/ps/simp.pdf">work,</a> Arne Andersson gives a simple rule that the AA-tree must satisfy: <br><br>  <i>To one vertex you can attach another vertex of <u>the same level</u> but <b>only one</b> and <b>only to the right</b> .</i> <br><br>  (In his article, the author of the AA-tree uses a slightly different terminology associated with 2-3 trees, but the essence does not change). <br><br>  Thus, the introduced notion of the <i>level of the top</i> does not always coincide with the real <i>height of the top</i> (distance from the ground), but the tree remains balanced when following the rule ‚Äúone right connection at the same level‚Äù. <br><br>  Balancing an AA tree requires only <b>2</b> ( <b>two</b> ) operations. <br><br>  It is easy to understand them from the rule ‚Äúone right one-level connection‚Äù: this is the elimination of the left connection on the same level and the elimination of two right connections on the same level. <br><br>  These operations are named in the original work of <i><a href="">skew</a></i> and <i><a href="">split</a></i> , respectively.  In the above figures, the horizontal arrow indicates the connection between the vertices of one level, and the inclined (vertical) - between the vertices of different levels. <br><br>  skew, eliminating the left link on the same level <br><img src="https://habrastorage.org/getpro/habr/post_images/2ea/3eb/f69/2ea3ebf6926fa2e326e14365ee2aaa97.png" alt="image"><br><br>  split, eliminating the two right links at the same level <br><img src="https://habrastorage.org/getpro/habr/post_images/9e0/210/993/9e0210993472d6f951563cb032030607.png" alt="image"><br><br>  Let's see what insertion and deletion look like in an AA tree.  To simplify the implementation, we introduce the notion of a <i>bottom</i> (" <b>ground</b> ").  Her level is always 0 and her left and right link point to her.  All leaf vertices refer to bottom instead of storing 0 in the link. <br><br>  Within the Delphi weeks on Habr√©, the source code will be in the form of pseudo-code similar to Delphi (for lovers of C ++ <s>coffee</s> : the <i>P ^ .x</i> operation in Delphi is equivalent to <i>P-&gt; x</i> , <i>var</i> means that the variable is passed by reference, and not by value i.e. when changing the external variable changes). <br><br>  Define the top of an AA-tree. <br><br><blockquote>  PNode <font color="#000066">=</font> <font color="#000066">^</font> TNode <font color="#000066">;</font> <br>  TNode <font color="#000066">=</font> <font color="#000000">packed</font> <font color="#000000">record</font> <br>  left <font color="#000066">,</font> right <font color="#000066">:</font> PNode <font color="#000066">;</font> <br>  level <font color="#000066">:</font> <font color="#000066">integer</font> <font color="#000066">;</font>  <font color="#808080">// level;</font>  <font color="#808080">1 at the leaves</font> <br>  key <font color="#000066">:</font> <font color="#000066">pointer</font> <font color="#000066">;</font>  <font color="#808080">// key, vertex related data</font> <br>  <font color="#000000">end</font> <font color="#000066">;</font> <br></blockquote><br><br>  Inserting the newkey element is easiest to look at in a recursive implementation. <br><br><blockquote>  <font color="#000000">procedure</font> NodeInsert <font color="#000066">(</font> <font color="#000000">var</font> P <font color="#000066">:</font> PNode <font color="#000066">;</font> newkey <font color="#000066">:</font> <font color="#000066">pointer</font> <font color="#000066">)</font> <font color="#000066">;</font> <br>  <font color="#000000">begin</font> <br>  <font color="#000000">if</font> P <font color="#000066">=</font> bottom <font color="#000000">then</font> <font color="#000000">begin</font> <font color="#808080">// reach the "bottom" - create a new vertex</font> <br>  <font color="#000066">new</font> <font color="#000066">(</font> P <font color="#000066">)</font> <font color="#000066">;</font> <br>  P <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">left</font> <font color="#000066">:</font> <font color="#000066">=</font> bottom <font color="#000066">;</font> <br>  P <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">right</font> <font color="#000066">:</font> <font color="#000066">=</font> bottom <font color="#000066">;</font> <br>  P <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">level</font> <font color="#000066">:</font> <font color="#000066">=</font> <font color="#0000ff">1</font> <font color="#000066">;</font> <br>  P <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">key</font> <font color="#000066">:</font> <font color="#000066">=</font> newkey <font color="#000066">;</font> <br>  <font color="#000000">end</font> <font color="#000000">else</font> <font color="#000000">begin</font> <br>  <font color="#000000">if</font> newkey &lt;P <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">key</font> <font color="#000000">then</font> <br>  NodeInsert <font color="#000066">(</font> P <font color="#000066">^</font> <font color="#000066">.</font> <font color="#006600">Left</font> <font color="#000066">,</font> newkey <font color="#000066">)</font> <br>  <font color="#000000">else</font> <font color="#000000">if</font> newkey&gt; P <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">key</font> <font color="#000000">then</font> <br>  NodeInsert <font color="#000066">(</font> P <font color="#000066">^</font> <font color="#000066">.</font> <font color="#006600">Right</font> <font color="#000066">,</font> newkey <font color="#000066">)</font> <br>  <font color="#000000">else</font> <font color="#000000">begin</font> <br>  P <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">key</font> <font color="#000066">:</font> <font color="#000066">=</font> newkey <font color="#000066">;</font> <br>  <font color="#000066">exit</font> <font color="#000066">;</font> <br>  <font color="#000000">end</font> <font color="#000066">;</font> <br>  Skew <font color="#000066">(</font> P <font color="#000066">)</font> <font color="#000066">;</font> <br>  Split <font color="#000066">(</font> P <font color="#000066">)</font> <font color="#000066">;</font> <br>  <font color="#000000">end</font> <font color="#000066">;</font> <br>  <font color="#000000">end</font> <font color="#000066">;</font> <br></blockquote><br><br>  To insert the newkey key into the tree, call <i>NodeInsert (root, newkey)</i> .  We go down from the root down the tree, comparing the keys;  paste;  go up and perform balancing: skew and split for each vertex. <br><br>  Deleting is a bit trickier. <br><br><blockquote>  <font color="#000000">procedure</font> NodeDelete <font color="#000066">(</font> <font color="#000000">var</font> P <font color="#000066">:</font> PNode <font color="#000066">;</font> newkey <font color="#000066">:</font> <font color="#000066">pointer</font> <font color="#000066">)</font> <font color="#000066">;</font> <br>  <font color="#000000">begin</font> <br><br>  <font color="#000000">if</font> P &lt;&gt; bottom <font color="#000000">then</font> <font color="#000000">begin</font> <br><br>  <font color="#808080">// 1. go down and remember last and deleted</font> <br>  last <font color="#000066">:</font> <font color="#000066">=</font> P <font color="#000066">;</font> <br>  <font color="#000000">if</font> Compare <font color="#000066">(</font> newkey <font color="#000066">,</font> P <font color="#000066">)</font> &lt; <font color="#0000ff">0</font> <font color="#000000">then</font> <font color="#808080">// newkey &lt;key</font> <br>  NodeDelete <font color="#000066">(</font> P <font color="#000066">^</font> <font color="#000066">.</font> <font color="#006600">Left</font> <font color="#000066">,</font> newkey <font color="#000066">)</font> <br>  <font color="#000000">else</font> <font color="#000000">begin</font> <br>  deleted <font color="#000066">:</font> <font color="#000066">=</font> P <font color="#000066">;</font> <br>  NodeDelete <font color="#000066">(</font> P <font color="#000066">^</font> <font color="#000066">.</font> <font color="#006600">Right</font> <font color="#000066">,</font> newkey <font color="#000066">)</font> <font color="#000066">;</font> <br>  <font color="#000000">end</font> <font color="#000066">;</font> <br><br>  <font color="#808080">// 2. delete the item if found</font> <br>  <font color="#000000">if</font> <font color="#000066">(</font> P <font color="#000066">=</font> last <font color="#000066">)</font> <font color="#000000">and</font> <font color="#000066">(</font> deleted &lt;&gt; bottom <font color="#000066">)</font> <font color="#000000">and</font> <font color="#000066">(</font> newkey <font color="#000066">==</font> deleted <font color="#000066">^</font> <font color="#000066">.</font> <font color="#006600">key</font> <font color="#000066">)</font> <font color="#000000">then</font> <font color="#000000">begin</font> <br>  deleted <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">key</font> <font color="#000066">:</font> <font color="#000066">=</font> P <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">key</font> <font color="#000066">;</font> <br>  deleted <font color="#000066">:</font> <font color="#000066">=</font> bottom <font color="#000066">;</font> <br>  P <font color="#000066">:</font> <font color="#000066">=</font> P <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">right</font> <font color="#000066">;</font> <br>  <font color="#000066">delete</font> last <font color="#000066">;</font> <br>  <font color="#000000">end</font> <font color="#000000">else</font> <font color="#000000">if</font> <font color="#000066">(</font> P <font color="#000066">^</font> <font color="#000066">.</font> <font color="#006600">left</font> <font color="#000066">.</font> <font color="#006600">level</font> &lt;P <font color="#000066">^</font> <font color="#000066">.</font> <font color="#006600">level</font> <font color="#000066">-</font> <font color="#0000ff">1</font> <font color="#000066">)</font> <font color="#000000">or</font> <font color="#000066">(</font> P <font color="#000066">^</font> <font color="#000066">.</font> <font color="#006600">right</font> <font color="#000066">.</font> <font color="#006600">level</font> &lt;P <font color="#000066">^</font> <font color="#000066">.</font> <font color="#006600">level</font> <font color="#000066">-</font> <font color="#0000ff">1</font> <font color="#000066">)</font> <font color="#000000">then</font> <font color="#000000">begin</font> <br>  <font color="#808080">// 3. perform balancing when moving up</font> <br>  <font color="#000066">Dec</font> <font color="#000066">(</font> P <font color="#000066">^</font> <font color="#000066">.</font> <font color="#006600">Level</font> <font color="#000066">)</font> <font color="#000066">;</font> <br>  <font color="#000000">if</font> P <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">right</font> <font color="#000066">.</font>  <font color="#006600">level</font> &gt; P <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">level</font> <font color="#000000">then</font> P <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">right</font> <font color="#000066">.</font>  <font color="#006600">level</font> <font color="#000066">:</font> <font color="#000066">=</font> P <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">level</font> <font color="#000066">;</font> <br>  Skew <font color="#000066">(</font> P <font color="#000066">)</font> <font color="#000066">;</font> <br>  Skew <font color="#000066">(</font> P <font color="#000066">^</font> <font color="#000066">.</font> <font color="#006600">Right</font> <font color="#000066">)</font> <font color="#000066">;</font> <br>  Skew <font color="#000066">(</font> P <font color="#000066">^</font> <font color="#000066">.</font> <font color="#006600">Right</font> <font color="#000066">^</font> <font color="#000066">.</font> <font color="#006600">Right</font> <font color="#000066">)</font> <font color="#000066">;</font> <br>  Split <font color="#000066">(</font> P <font color="#000066">)</font> <font color="#000066">;</font> <br>  Split <font color="#000066">(</font> P <font color="#000066">^</font> <font color="#000066">.</font> <font color="#006600">Right</font> <font color="#000066">)</font> <font color="#000066">;</font> <br>  <font color="#000000">end</font> <font color="#000066">;</font> <br>  <font color="#000000">end</font> <font color="#000066">;</font> <br><br>  <font color="#000000">end</font> <font color="#000066">;</font> <br></blockquote><br>  Two auxiliary variables are used - deleted and last.  When going down the tree (as when inserting), the vertex keys are compared with the key to be deleted.  If the vertex key is less than the deleted one, then go to the left link, otherwise, go to the right one (that is, go to the right one even if the keys match).  Each passable vertex is entered into the last, and only the one where it was ‚Äúturned right‚Äù is entered into the deleted one. <br><br>  When the ‚Äúbottom‚Äù of the tree is reached, deleted points to the top where the key to be deleted is (if it is in the tree), and last points to the top to be deleted (it can be the same top).  The key is transferred from last to deleted and the vertex of last is deleted. <br><br>  Next is balancing - you need to perform 3 skew and 2 split. <br><br>  The implementation of skew and split is trivial. <br><br><blockquote>  <font color="#808080">// swap content of records with vertices (not pointers)</font> <br>  <font color="#000000">procedure</font> <font color="#000066">Swap</font> <font color="#000066">(</font> P1 <font color="#000066">,</font> P2 <font color="#000066">:</font> PNode <font color="#000066">)</font> <font color="#000066">;</font> <br>  <font color="#000000">var</font> <br>  tmp <font color="#000066">:</font> TNode <font color="#000066">;</font> <br>  <font color="#000000">begin</font> <br>  tmp <font color="#000066">:</font> <font color="#000066">=</font> P1 <font color="#000066">^</font> <font color="#000066">;</font> <br>  P1 <font color="#000066">^</font> <font color="#000066">:</font> <font color="#000066">=</font> P2 <font color="#000066">^</font> <font color="#000066">;</font> <br>  P2 <font color="#000066">^</font> <font color="#000066">:</font> <font color="#000066">=</font> tmp <font color="#000066">;</font> <br>  <font color="#000000">end</font> <font color="#000066">;</font> <br><br>  <font color="#000000">procedure</font> Skew <font color="#000066">(</font> T <font color="#000066">:</font> PNode <font color="#000066">)</font> <font color="#000066">;</font> <br>  <font color="#000000">var</font> <br>  L <font color="#000066">:</font> PNode <font color="#000066">;</font> <br>  <font color="#000000">begin</font> <br>  L <font color="#000066">:</font> <font color="#000066">=</font> T <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">left</font> <font color="#000066">;</font> <br>  <font color="#000000">if</font> T <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">level</font> <font color="#000066">=</font> L <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">level</font> <font color="#000000">then</font> <font color="#000000">begin</font> <br>  <font color="#000066">Swap</font> <font color="#000066">(</font> T <font color="#000066">,</font> L <font color="#000066">)</font> <font color="#000066">;</font>  <font color="#808080">// now T ==&gt; L, L ==&gt; T</font> <br>  L <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">left</font> <font color="#000066">:</font> <font color="#000066">=</font> T <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">right</font> <font color="#000066">;</font>  <font color="#808080">// i.e.</font>  <font color="#808080">T.left = L.right</font> <br>  T <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">right</font> <font color="#000066">:</font> <font color="#000066">=</font> L <font color="#000066">;</font>  <font color="#808080">// i.e.</font>  <font color="#808080">L.right = T</font> <br>  <font color="#000000">end</font> <font color="#000066">;</font> <br>  <font color="#000000">end</font> <font color="#000066">;</font> <br><br>  <font color="#000000">procedure</font> Split <font color="#000066">(</font> T <font color="#000066">:</font> PNode <font color="#000066">)</font> <font color="#000066">;</font> <br>  <font color="#000000">var</font> <br>  R <font color="#000066">:</font> PNode <font color="#000066">;</font> <br>  <font color="#000000">begin</font> <br>  R <font color="#000066">:</font> <font color="#000066">=</font> T <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">right</font> <font color="#000066">;</font> <br>  <font color="#000000">if</font> T <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">level</font> <font color="#000066">=</font> R <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">right</font> <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">level</font> <font color="#000000">then</font> <font color="#000000">begin</font> <br>  <font color="#000066">Swap</font> <font color="#000066">(</font> T <font color="#000066">,</font> R <font color="#000066">)</font> <font color="#000066">;</font>  <font color="#808080">// now T ==&gt; R, R ==&gt; T</font> <br>  R <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">right</font> <font color="#000066">:</font> <font color="#000066">=</font> T <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">left</font> <font color="#000066">;</font> <br>  T <font color="#000066">^</font> <font color="#000066">.</font>  <font color="#006600">left</font> <font color="#000066">:</font> <font color="#000066">=</font> R <font color="#000066">;</font> <br>  <font color="#000066">Inc</font> <font color="#000066">(</font> T <font color="#000066">^</font> <font color="#000066">.</font> <font color="#006600">Level</font> <font color="#000066">)</font> <font color="#000066">;</font> <br>  <font color="#000000">end</font> <font color="#000066">;</font> <br>  <font color="#000000">end</font> <font color="#000066">;</font> <br></blockquote><br><br>  In fact, the above pseudo-code is sufficient to create an implementation of an AA-tree (add only ‚Äútrifles‚Äù such as modifying the root of a tree (root), etc.). <br><br>  Some useful links. <br><br>  <a href="">Implement an</a> AA tree on C. <br><br>  Wonderful <a href="http://people.ksp.sk/~kuko/bak/index.html">applet</a> where you can play with different types of trees (including AA-trees). <br><br>  <a href="http://www.softpedia.com/get/Others/Home-Education/AA-Visual-2007.shtml">Delphi project</a> with AA-tree visualization and source code. <br><br>  Wikipedia <a href="http://en.wikipedia.org/wiki/AA_tree">article</a> . </div><p>Source: <a href="https://habr.com/ru/post/110212/">https://habr.com/ru/post/110212/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../110204/index.html">The first acquaintance with 3Par</a></li>
<li><a href="../110205/index.html">Third-level domains in NET.RU, ORG.RU, PP.RU, COM.RU zones are moving to RU-CENTER; registration and renewal become paid</a></li>
<li><a href="../110206/index.html">Oversan-Luna - the second data center Oversana</a></li>
<li><a href="../110209/index.html">Pixar's Most Important Myth</a></li>
<li><a href="../110211/index.html">Xmarks continues to work as before.</a></li>
<li><a href="../110214/index.html">Who hit the big red button?</a></li>
<li><a href="../110215/index.html">Payment with Alfa-Bank cards is 3 times cheaper</a></li>
<li><a href="../110218/index.html">Sales of goods and services through applications for Iphone</a></li>
<li><a href="../110219/index.html">MasterCard refuses to serve "pirates"</a></li>
<li><a href="../110220/index.html">SSH2 in php5 + Mikrotik RouterOS, pitfalls</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
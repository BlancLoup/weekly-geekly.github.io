<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Work with VPC using the package ansible-selvpc-modules</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As we have already written, the Selectel Virtual Private Cloud service is based on the OpenStack platform, you can read more about this in our previou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Work with VPC using the package ansible-selvpc-modules</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/ab9/c36/e12/ab9c36e128ff4e54940890ebffdaafb9.png"><br><br>  As we have already written, the Selectel Virtual Private Cloud service is based on the OpenStack platform, you can read more about this in <a href="https://blog.selectel.ru/novaya-usluga-virtualnoe-privatnoe-oblako/">our previous article</a> . <br><br>  Many of our clients are used to using <a href="https://www.ansible.com/">Ansible</a> configuration management system in their projects, which allows you to automate routine tasks and make life easier for the system administrator.  Also, the advantages of Ansible include many ready-made modules, including for automation of work with components of the OpenStack platform (a <a href="http://docs.ansible.com/ansible/list_of_cloud_modules.html">list of ready-made modules</a> ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Working with a virtual private cloud begins with creating a project and reserving resources for it.  These operations can be performed through the control panel or using our API. <br><a name="habracut"></a><br>  Often, when working with a VPC service, it may be necessary to create several identical virtual machines, add, allocate a certain amount of resources, create new users, and so on. <br><br>  To bring the initial configuration of the project and work with the OpenStack API to a common denominator, we developed the ansible-selvpc-modules package, which includes several ansible-modules designed specifically for our service.  It will be useful in work for any kind of professionals who interact with our API. <br><br>  The modules cover the whole range of functions that our service provides.  Now there is no need to manually install resources for the project or use third-party utilities: all this can be done immediately in one playbook using ansible-selvpc-modules. <br><br>  The ansible-selvpc-modules package includes: <br><br><ul><li>  selvpc_projects - for managing VPC projects; </li><li>  selvpc_quotas - to manage project resources; </li><li>  selvpc_limits - to get information about available resources; </li><li>  selvpc_users - to work with users; </li><li>  selvpc_floatingips - to work with floating ip addresses; </li><li>  selvpc_subnets - for working with subnets; </li><li>  selvpc_roles - to work with roles in the project; </li><li>  selvpc_tokens - to create keys; </li><li>  selvpc_licenses - to work with licenses. </li></ul><br>  Below I will describe the process of installing the package, and also give an example of use, in which we will step by step from the creation of the project to the launch of virtual machines. <br><br><h3>  Installation </h3><br>  Create an isolated virtual environment, activate and install ansible-selvpc-modules: <br><br><pre><code class="bash hljs">$ virtualenv --no-site-packages env $ <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> env/bin/activate $ pip install ansible-selvpc-modules</code> </pre> <br>  We will also need additional packages for work: shade as a dependency for os_ * ansible-modules and jmespath for convenient parsing of json-a ( <a href="http://docs.ansible.com/ansible/playbooks_filters.html">more</a> ).  We put from PyPi: <br><br><pre> <code class="bash hljs">$ pip install shade jmespath</code> </pre><br>  Keys are required to work with the Resell API.  Registered Selectel users can get them <a href="https://my.selectel.ru/profile/apikeys">here</a> . <br><br>  Now add the SEL_URL and SEL_TOKEN environment variables: <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> SEL_URL=https://api.selectel.ru/vpc/resell/ //       API  2 $ <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> SEL_TOKEN=&lt; API-    &gt;</code> </pre><br>  As in the example I will use the OpenStack modules for Ansible, in addition I will need the following variables: <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> OS_PROJECT_DOMAIN_NAME=&lt;   my.selectel.ru&gt; $ <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> OS_USER_DOMAIN_NAME=&lt; &gt;</code> </pre><br>  To make life and walking on hosts through Ansible <a href="http://docs.ansible.com/ansible/intro_getting_started.html">easier, set the ANSIBLE_HOST_KEY_CHECKING</a> environment <a href="http://docs.ansible.com/ansible/intro_getting_started.html">variable</a> to False: <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> ANSIBLE_HOST_KEY_CHECKING=False</code> </pre><br>  All necessary packages are installed, variables are added, let's start writing a playbook. <br><br><h3>  Example </h3><br><ol><li>  Create an example_vars.yaml file, where we define the image, username, password, and project_name variables, as well as two lists with the names of our disks and virtual machines.  (image is the image of the OS that will run our virtual machines, flavor is the configuration of the machine, in our case it is 512 RAM and 1 VCPU, <a href="https://docs.openstack.org/admin-guide/compute-flavors.html">more</a> ): <br><br><pre> <code class="hljs delphi">--- username: TestUser password: <span class="hljs-number"><span class="hljs-number">123456</span></span> project_name: TestProject image: Ubuntu <span class="hljs-number"><span class="hljs-number">16.04</span></span> LTS <span class="hljs-number"><span class="hljs-number">32</span></span>-bit volumes: - display_name: volume1 - display_name: volume2 - display_name: volume3 servers: - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: vm1 - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: vm2 - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: vm3</code> </pre><br></li><li>  Create an example.yaml file in which we will describe our tasks.  Add the necessary parameters hosts and vars_files. <br><br>  The hosts variable defines the machine / machines with which we will be executing tasks, and vars_files indicates where to load the necessary variables (here is the example_vars.yaml file): <br><br><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">--- - hosts: localhost vars_files: - example_vars.yaml</span></span></code> </pre><br></li><li>  Let's start writing Tasks.  First, let's add project creation using selvpc_projects and allocating quotas for a project using the selvpc_quotas module.  For 3 machines, 3 processor cores, 1536 RAM and 15 GB SSD disk will be enough: <br><br><pre> <code class="hljs sql">... tasks: - name: <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">project</span></span> selvpc_projects: project_name: <span class="hljs-string"><span class="hljs-string">"{{ project_name }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">register</span></span>: project_out - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> quotas <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> created <span class="hljs-keyword"><span class="hljs-keyword">project</span></span> selvpc_quotas: project_id: <span class="hljs-string"><span class="hljs-string">"{{ project_out.project.id }}"</span></span> quotas: compute_cores: - region: ru<span class="hljs-number"><span class="hljs-number">-1</span></span> zone: ru<span class="hljs-number"><span class="hljs-number">-1</span></span>a <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> compute_ram: - region: ru<span class="hljs-number"><span class="hljs-number">-1</span></span> zone: ru<span class="hljs-number"><span class="hljs-number">-1</span></span>a <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: <span class="hljs-number"><span class="hljs-number">1536</span></span> volume_gigabytes_fast: - region: ru<span class="hljs-number"><span class="hljs-number">-1</span></span> zone: ru<span class="hljs-number"><span class="hljs-number">-1</span></span>a <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-keyword"><span class="hljs-keyword">register</span></span>: quotas_out</code> </pre><br></li><li>  Create and add a user to the project: <br><br><pre> <code class="hljs sql">tasks: ... - name: <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> selvpc_users: username: <span class="hljs-string"><span class="hljs-string">"{{ username }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: <span class="hljs-string"><span class="hljs-string">"{{ password }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">register</span></span>: user_out - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> created <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">project</span></span> selvpc_roles: project_id: <span class="hljs-string"><span class="hljs-string">"{{ project_out.project.id }}"</span></span> user_id: <span class="hljs-string"><span class="hljs-string">"{{ user_out.user.id }}"</span></span></code> </pre><br></li><li>  Create a network: <br><br><pre> <code class="hljs sql">tasks: ... - name: <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> net selvpc_subnets: project_id: <span class="hljs-string"><span class="hljs-string">"{{ project_out.project.id }}"</span></span> subnets: - region: ru<span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: ipv4 quantity: <span class="hljs-number"><span class="hljs-number">1</span></span> prefix_length: <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-keyword"><span class="hljs-keyword">register</span></span>: public_net - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Get</span></span> info about network selvpc_subnets: subnet_id: <span class="hljs-string"><span class="hljs-string">"{{ public_net|json_query(subnets[0].id') }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">register</span></span>: network_out</code> </pre><br></li><li>  After creating a network to create virtual machines, we will need disks that can be created using the ready-made Ansible module <a href="http://docs.ansible.com/ansible/os_volume_module.html">os_volume</a> : <br><br><pre> <code class="hljs sql">tasks: ... - name: <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> volumes os_volume: state: <span class="hljs-keyword"><span class="hljs-keyword">present</span></span> auth: auth_url: https://api.selvpc.ru/<span class="hljs-keyword"><span class="hljs-keyword">identity</span></span>/v3 username: <span class="hljs-string"><span class="hljs-string">"{{ username }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: <span class="hljs-string"><span class="hljs-string">"{{ password }}"</span></span> project_name: <span class="hljs-string"><span class="hljs-string">"{{ project_name }}"</span></span> display_name: <span class="hljs-string"><span class="hljs-string">"{{ item.display_name }}"</span></span> image: <span class="hljs-string"><span class="hljs-string">"{{ image }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span> region_name: ru<span class="hljs-number"><span class="hljs-number">-1</span></span> with_items: <span class="hljs-string"><span class="hljs-string">"{{ volumes }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">register</span></span>: volume</code> </pre><br></li><li>  To access our machines, we will need SSH keys.  We will create one key for all machines.  This will help us <a href="http://docs.ansible.com/ansible/os_keypair_module.html">os_keypair</a> : <br><br><pre> <code class="hljs sql">tasks: ... - name: <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">key</span></span> os_keypair: state: <span class="hljs-keyword"><span class="hljs-keyword">present</span></span> auth: auth_url: https://api.selvpc.ru/<span class="hljs-keyword"><span class="hljs-keyword">identity</span></span>/v3 username: <span class="hljs-string"><span class="hljs-string">"{{ username }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: <span class="hljs-string"><span class="hljs-string">"{{ password }}"</span></span> project_name: <span class="hljs-string"><span class="hljs-string">"{{ project_name }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: ansible_key region_name: ru<span class="hljs-number"><span class="hljs-number">-1</span></span> public_key_file: <span class="hljs-string"><span class="hljs-string">"{{ '~' | expanduser }}/.ssh/id_rsa.pub"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">register</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">key</span></span></code> </pre><br></li><li>  Using <a href="http://docs.ansible.com/ansible/os_nova_flavor_module.html">os_nova_flavor,</a> we will create a configuration (flavor) for our machines, in our case, this is 512 RAM and 1 VCPU and we will call it ‚Äúselectel_test_flavor‚Äù (any other can be given): <br><br><pre> <code class="hljs sql">tasks: ... - name: <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> flavor os_nova_flavor: state: <span class="hljs-keyword"><span class="hljs-keyword">present</span></span> auth: auth_url: https://api.selvpc.ru/<span class="hljs-keyword"><span class="hljs-keyword">identity</span></span>/v3 username: <span class="hljs-string"><span class="hljs-string">"{{ username }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: <span class="hljs-string"><span class="hljs-string">"{{ password }}"</span></span> project_name: <span class="hljs-string"><span class="hljs-string">"{{ project_name }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: selectel_test_flavor ram: <span class="hljs-number"><span class="hljs-number">512</span></span> vcpus: <span class="hljs-number"><span class="hljs-number">1</span></span> disk: <span class="hljs-number"><span class="hljs-number">0</span></span> region_name: ru<span class="hljs-number"><span class="hljs-number">-1</span></span> is_public: <span class="hljs-literal"><span class="hljs-literal">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">register</span></span>: flavor</code> </pre><br></li><li>  We will describe the task to create them and additionally task to add them to the <a href="http://docs.catalystcloud.io/tutorials/ansible-create-x-servers-using-in-memory-inventory.html">in-memory inventory</a> for further work with the already created hosts, at the end a short pause for the virtual machines to turn on before using: <br><br><pre> <code class="hljs sql">tasks: ... - name: <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> servers os_server: state: <span class="hljs-keyword"><span class="hljs-keyword">present</span></span> auth: auth_url: https://api.selvpc.ru/<span class="hljs-keyword"><span class="hljs-keyword">identity</span></span>/v3 username: <span class="hljs-string"><span class="hljs-string">"{{ username }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: <span class="hljs-string"><span class="hljs-string">"{{ password }}"</span></span> project_name: <span class="hljs-string"><span class="hljs-string">"{{ project_name }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: <span class="hljs-string"><span class="hljs-string">"{{ item.1.name }}"</span></span> flavor: <span class="hljs-string"><span class="hljs-string">"{{ flavor }}"</span></span> boot_volume: <span class="hljs-string"><span class="hljs-string">"{{ item.0 }}"</span></span> nics: <span class="hljs-string"><span class="hljs-string">"net-id={{ network_out.subnet.network_id }}"</span></span> key_name: ansible_key region_name: ru<span class="hljs-number"><span class="hljs-number">-1</span></span> with_together: - <span class="hljs-string"><span class="hljs-string">"{{ volume|json_query('results[*].id') }}"</span></span> - <span class="hljs-string"><span class="hljs-string">"{{ servers }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">register</span></span>: created_servers - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">hosts</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> inventory add_host: <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: <span class="hljs-string"><span class="hljs-string">"{{ item }}"</span></span> ansible_host: <span class="hljs-string"><span class="hljs-string">"{{ item }}"</span></span> ansible_ssh_user: root <span class="hljs-keyword"><span class="hljs-keyword">groups</span></span>: just_created with_items: <span class="hljs-string"><span class="hljs-string">"{{ created_servers|json_query('results[*].openstack.accessIPv4') }}"</span></span> - pause: seconds: <span class="hljs-number"><span class="hljs-number">60</span></span></code> </pre><br></li><li>  At the end, add a task to check our hosts for availability: <br><br><pre> <code class="hljs delphi">tasks: ... - hosts: just_created tasks: - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: Ping all instances ping: <span class="hljs-keyword"><span class="hljs-keyword">register</span></span>: results debug: msg=<span class="hljs-comment"><span class="hljs-comment">{{ results }</span></span>}</code> </pre><br>  I also added <a href="http://docs.ansible.com/ansible/debug_module.html">debug</a> and <a href="http://docs.ansible.com/ansible/playbooks_error_handling.html">ignore_errors</a> in this task for clarity, this is not mandatory (debug will allow us to output a more detailed result of performing tasks, and ignore_errors will not terminate the playbook in the event of any errors). <br><br>  Additionally, at the end of the playbook, I added a configuration removal (flavor), a user, and a project to clean everything that was created earlier: <br><br><pre> <code class="hljs sql">- hosts: localhost gather_facts: False vars_files: - example_vars.yaml tasks: - name: <span class="hljs-keyword"><span class="hljs-keyword">Delete</span></span> flavor os_nova_flavor: state: absent auth: auth_url: https://api.selvpc.ru/<span class="hljs-keyword"><span class="hljs-keyword">identity</span></span>/v3 username: <span class="hljs-string"><span class="hljs-string">"{{ username }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: <span class="hljs-string"><span class="hljs-string">"{{ password }}"</span></span> project_name: <span class="hljs-string"><span class="hljs-string">"{{ project_name }}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: <span class="hljs-string"><span class="hljs-string">"{{ flavor.flavor.name }}"</span></span> region_name: ru<span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">register</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Delete</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> selvpc_users: user_id: <span class="hljs-string"><span class="hljs-string">"{{ user_out.user.id }}"</span></span> state: absent <span class="hljs-keyword"><span class="hljs-keyword">register</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Delete</span></span> <span class="hljs-keyword"><span class="hljs-keyword">project</span></span> selvpc_projects: project_id: <span class="hljs-string"><span class="hljs-string">"{{ project_out.project.id }}"</span></span> state: absent <span class="hljs-keyword"><span class="hljs-keyword">register</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">out</span></span></code> </pre><br>  The complete playbook file can be found <a href="">here</a> . <br><br></li><li>  Launch our playbook: <br><br><pre> <code class="bash hljs">$ ansible-playbook example.yaml</code> </pre><br>  During the pause, which we added earlier at the end of paragraph 9, you can go to <a href="https://my.selectel.ru/vpc/servers/">the</a> project <a href="https://my.selectel.ru/vpc/servers/">control panel</a> and look at the created servers: <br><br><img src="https://habrastorage.org/web/e9b/164/244/e9b164244b88456a8395ba8c2a319b0e.png"><br><br>  The results of the playlist in the console: <br><br><pre> <code class="bash hljs">TASK [Ping all instances] ************************************************************************* ok: [95.213.234.211] ok: [95.213.234.212] ok: [95.213.234.210] TASK [debug] ************************************************************************* ok: [95.213.234.210] =&gt; { <span class="hljs-string"><span class="hljs-string">"msg"</span></span>: { <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"ping"</span></span>: <span class="hljs-string"><span class="hljs-string">"pong"</span></span> } } ok: [95.213.234.211] =&gt; { <span class="hljs-string"><span class="hljs-string">"msg"</span></span>: { <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"ping"</span></span>: <span class="hljs-string"><span class="hljs-string">"pong"</span></span> } } ok: [95.213.234.212] =&gt; { <span class="hljs-string"><span class="hljs-string">"msg"</span></span>: { <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"ping"</span></span>: <span class="hljs-string"><span class="hljs-string">"pong"</span></span> } } PLAY [localhost] ************************************************************************* TASK [Delete flavor] ************************************************************************* changed: [localhost] TASK [Delete user] ************************************************************************* changed: [localhost] TASK [Delete project] ************************************************************************* changed: [localhost] PLAY RECAP ************************************************************************* 95.213.234.210 : ok=3 changed=0 unreachable=0 failed=0 95.213.234.211 : ok=3 changed=0 unreachable=0 failed=0 95.213.234.212 : ok=3 changed=0 unreachable=0 failed=0 localhost : ok=25 changed=13 unreachable=0 failed=0</code> </pre><br>  In the output, we see that all the tasks have been successfully completed and our hosts are available.  We also see that the created user and the project, and with it the virtual machines were successfully deleted. <br></li></ol><br>  Ansible modules cover the entire set of functions that our service provides and are useful in the work of specialists interacting with our API. <br><br>  I invite everyone interested to try out the modules and make comments, suggestions and suggestions. <br><br>  ‚Üí <a href="https://github.com/selectel/ansible-selvpc-modules">Documentation and source codes</a> </div><p>Source: <a href="https://habr.com/ru/post/332260/">https://habr.com/ru/post/332260/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../332202/index.html">About analytics and silver bullets or ‚ÄúWhat does Rambler / Top 100 have to do with it?‚Äù</a></li>
<li><a href="../332204/index.html">GitLab 9.3 released: Code Quality and inter-project pipeline schedules</a></li>
<li><a href="../332206/index.html">How to repeat anyroom.io service in several JS lines and without a backend</a></li>
<li><a href="../332208/index.html">Solving the traveling salesman problem with the Little algorithm with visualization on the plane</a></li>
<li><a href="../332214/index.html">IBM Watson and cybersecurity: how a cognitive system protects valuable data</a></li>
<li><a href="../332264/index.html">Conducting a retrospective of the method of six hats</a></li>
<li><a href="../332292/index.html">Translation of Redmine plug-ins from TelegramCLI to Webogram</a></li>
<li><a href="../332294/index.html">The complete guide to moving from HTTP to HTTPS</a></li>
<li><a href="../332296/index.html">How to wind a rating on Habr√© and leave unnoticed</a></li>
<li><a href="../332298/index.html">LibGDX + Scene2d (we program on Kotlin). Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
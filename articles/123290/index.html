<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Open source internet cartography</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. I continue a series of articles about mapping on the Internet using the open-source software set MapBox, from Development Seed. 

 Previous par...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Open source internet cartography</h1><div class="post__text post__text-html js-mediator-article">  Hello.  I continue a series of articles about mapping on the Internet using the open-source software set MapBox, from Development Seed. <br><br>  Previous parts: <br><ol><li>  <a href="http://habrahabr.ru/blogs/open_source/120676/">Studio Review</a> </li><li>  <a href="http://habrahabr.ru/blogs/open_source/121126/">Introduction to TileMill</a> </li><li>  <a href="http://habrahabr.ru/blogs/open_source/122376/">Extended capabilities</a> </li></ol><br>  Today I will review: <br><ul><li>  TileStream High Performance Tile Server </li><li>  Lightweight cartographic libraries Modest Maps and LeafLet </li><li>  Using TileStream with the OpenLayers Map Library </li><li>  Using the advanced features of TileMill using the Wax library </li></ul><br><br>  Interesting?  I invite under the cat. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In order to explain what a cached map service is, I will quote a quote from the article by Samsonov TE.  <a href="http://www.dataplus.ru/ARCREV/Number_48/7_Design.html">‚ÄúInternet-oriented cartographic design: design and layout of maps for web services‚Äù</a> : <br><br><blockquote>  Cartographic web services can be divided into two large groups: dynamic and cached.  In the first case, each time when scaling or moving, the data is accessed and the image is redrawn, taking into account the new coverage.  At the same time, the client receives only ready-made raster images - they are rendered by the server. <br><br>  In the case of a cached service, a mosaic of raster images (tiles) for each scale is ready in advance, so the work is done an order of magnitude faster.  Of course, the complexity of the design and the data itself does not affect the display speed - this is a big plus.  But there are also obvious limitations: when changing data, it is necessary to recalculate the cache, you cannot edit objects and control the display of layers, the list of scales is fixed.  It is also worth remembering that the cache recalculation can take several days and even weeks (!) Depending on how complex the card is based on. <br><br>  Therefore, the choice between dynamic and cached service is not as obvious as it might seem at first glance.  As a rule, it makes sense to make a cached service with rarely or fragmentarily updated data, to create maps-substrates for dynamic services, or if the project itself is small - the cache can be quickly recalculated.  There is another version of the multilayer cache, where each layer is a separate raster mosaic.  However, the performance of the service in this case leaves much to be desired - because the web server has to dynamically overlay the rasters of layers on each other. <br></blockquote><br><br><h4>  TileStream </h4><br>  TileStream is a high-performance tile server with the ability to view <a href="http://mbtiles.org/">MBTiles</a> files via the web. <br>  Opportunities: <br><ul><li>  Gallery of your maps with the ability to view </li><li>  Supporting MBTiles legend and interactivity using the Wax library </li></ul><br>  Requirements: <br><ul><li>  TileStream client <br><ul><li>  Checked: Chrome 6+, Firefox 3+, IE8 + </li><li>  Should work under Opera 11 </li></ul><br></li><li>  TileStream server <br><ul><li>  Checked: Mac OS X 10.6, Ubuntu 10.10, Gentoo </li><li>  Checked: node 0.4.9 </li><li>  Checked: npm v1.0.3 </li><li>  At least 613MB of RAM </li><li>  Should work on older versions and other POSIX-compatible systems. </li></ul><br></li></ul><br><h5>  Installing dependencies </h5><br>  Install the necessary packages.  For example, for Ubuntu: <br><pre><code class="bash hljs">sudo apt-get install curl build-essential libssl-dev libsqlite3-0 libsqlite3-dev</code> </pre> <br><br>  Install node.js and npm.  You can use the <a href="https://github.com/creationix/nvm">nvm</a> utility to select a specific node.js version.  <a href="https://github.com/joyent/node/wiki/Installation">Installation from source code</a> : <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> --depth 1 git://github.com/joyent/node.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> node git checkout v0.4.9 <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> JOBS=2 <span class="hljs-comment"><span class="hljs-comment"># optional, sets number of parallel commands. mkdir ~/local ./configure --prefix=$HOME/local/node make make install echo 'export PATH=$HOME/local/node/bin:$PATH' &gt;&gt; ~/.profile source ~/.profile</span></span></code> </pre><br>  Install npm: <br><pre> <code class="bash hljs">curl http://npmjs.org/install.sh | sh</code> </pre> <br><br><h6>  TileStream installation </h6><br><br>  Download the source code from the <a href="https://github.com/mapbox/tilestream">repository</a> .  And start the installation process using npm. <br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> git://github.com/mapbox/tilestream.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> tilestream npm install -g tilestream</code> </pre><br><br>  The <code>-g</code> switch tells npm that the tilestream needs to be installed globally.  This will require superuser rights.  To install locally (in the current directory), simply omit this key. <br><br>  Launch TileStream. <br><pre> <code class="bash hljs">tilestream</code> </pre> <br><br>  You can check TIleStream using the test suite that developers provide.  For testing, they use <a href="http://visionmedia.github.com/expresso">expresso</a> .  You can install the library and run tests like this: <br><pre> <code class="bash hljs">npm install -g expresso <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> tilestream npm <span class="hljs-built_in"><span class="hljs-built_in">test</span></span></code> </pre><br><br>  <b>Important.</b>  If you want to use TileStream as a server not on the local machine, you must specify the hostname at startup. <br><pre> <code class="bash hljs">tilestream --host 127.0.0.1 tilestream --host yourhost.com</code> </pre><br><br>  You can get detailed help on all TileStream startup parameters like this: <br><pre> <code class="bash hljs">tilestream start --<span class="hljs-built_in"><span class="hljs-built_in">help</span></span></code> </pre> <br><br><h6>  Using </h6><br><br>  In order to start using TileStream, you need to copy MBTiles to the tiles directory.  I remind you that on the <a href="http://mapbox.com/">MapBox</a> website you can find a set of free tiles from developers. <br><br>  Each set of tiles can be viewed at <code><a href="http://localhost/"></a> localhost:8888/map/[filename]</code>  <code><a href="http://localhost/"></a> localhost:8888/map/[filename]</code> , where <code>[filename]</code> name of the tile set, without the .mbtiles extension. <br><br>  Tile set names: <br><br><ul><li>  Can contain letters (lower and upper case), numbers, underscores and dashes <br><pre> <code class="bash hljs">world-light.mbtiles control_room.mbtiles PartyLikeIts1999.mbtiles</code> </pre> <br></li><li>  Cannot contain spaces, non-ASCII characters or other punctuation <br><pre> <code class="bash hljs">World Light.mbtiles BlueWorld-1.0.mbtiles</code> </pre> <br></li></ul><br><h5>  Wax </h5><br><br>  Wax is a set of extensions and tools to facilitate the use of maps on the site.  Wax supports the API of several different libraries, such as Modest Maps, LeafLet and Google Maps. <br><br><h6>  Using </h6><br><br>  Loading <br><ul><li>  <a href="">Wax (3.0.4)</a> </li><li>  <a href="https://github.com/mapbox/wax/downloads">Previous releases</a> </li><li>  <a href="https://github.com/mapbox/wax">Source</a> </li></ul><br><br>  Wax API uses <a href="https://github.com/mapbox/tilejson">TileJSON</a> .  TileJSON is a format that contains metadata and information necessary to use a set of tiles. <br><br>  In order to get started, you need to know the URL of the set of tiles that you want to use.  In most cases, the following convention is used: <br><pre> <code class="bash hljs">/{z}/{x}/{y}.[image format]</code> </pre> <br>  Where <code>{z}</code> is the presentation level (zoom), <code>{x}</code> and <code>{y}</code> coordinates.  TileJSON represents the URL of a set of tiles replacing these tags (placeholders) so that you can get any tile from the set. <br><br>  For example, such a URL <br><pre> <code class="bash hljs">https://habrastorage.org/getpro/habr/post_images/e09/b8b/605/e09b8b60541e60473a21c777c75bcff9.png</code> </pre> <br>  Tile returns <br><img src="https://habrastorage.org/getpro/habr/post_images/e09/b8b/605/e09b8b60541e60473a21c777c75bcff9.png" alt="image"><br><br>  The TileJSON describing this tile set is as follows: <br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"scheme"</span></span>: <span class="hljs-string"><span class="hljs-string">"tms"</span></span>, <span class="hljs-string"><span class="hljs-string">"tiles"</span></span> [<span class="hljs-string"><span class="hljs-string">"http://a.tile.mapbox.com/1.0.0/world-light/{z}/{x}/{y}.png"</span></span>] }</code> </pre><br><br><ul><li>  The <code>version</code> key specifies that the 1.0.0 version of the TileJSON specification is used. </li><li>  The <code>scheme</code> key describes the tile coordinate system used (MapBox tile sets use TMS) </li><li>  The <code>tiles</code> key contains an array of URLs from which tiles are requested. </li></ul><br><br>  There are quite a few different libraries used in conjunction with cached map services, but they all do about the same thing ‚Äî add tiles to a page and manage them so that the map looks in a holistic way of the world, rather than a set of small square pieces. <br><br>  So let's start by using Modest Maps ‚Äî easy and fast JavaScript mapping library. <br><br><h5>  Modest Maps JS </h5><br><br>  Modest Maps JS is a JavaScript library for displaying and interacting with tile maps.  Distributed under <a href="http://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B8%25D1%2586%25D0%25B5%25D0%25BD%25D0%25B7%25D0%25B8%25D1%258F_BSD">BSD license</a> . <br><br>  Developers position Modest Maps JS as a free, lightweight, expandable and customizable library for discerning designers and programmers who want to use interactive maps in their projects.  The library provides a kernel with a set of features, in the form of compressed and clean code that can be extended using the built-in hook system. <br><br>  Modest Maps was originally written in Python and ActionScript.  Example of use - <a href="http://walkingpapers.org/">walkingpapers.org</a> <br><br>  First, you need to download the necessary <a href="https://github.com/mapbox/wax">source code</a> . <br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> git://github.com/mapbox/wax.git</code> </pre> <br><br>  Included with Wax is a set of supported libraries, including Modest Maps.  We connect JavaScript and CSS. <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'wax/ext/modestmaps.min.js'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'text/javascript'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'wax/dist/wax.mm.js'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'text/javascript'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'wax/theme/controls.css'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'stylesheet'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'text/css'</span></span></span><span class="hljs-tag"> /&gt;</span></span> ...</code> </pre><br><br><ul><li>  <code>wax/ext/modestmaps.min.js</code> - contains the Modest Maps library </li><li>  <code>wax/dist/wax.mm.js</code> - contains code integrating Wax and Modest Maps </li><li>  <code>wax/theme/controls.css</code> - contains styles for controls </li></ul><br><br>  Wax contains a Modest Maps provider that displays tile sets described by the TileJSON format in <code>wax.mm.connector</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tilejson = { <span class="hljs-attr"><span class="hljs-attr">tilejson</span></span>: <span class="hljs-string"><span class="hljs-string">'1.0.0'</span></span>, <span class="hljs-attr"><span class="hljs-attr">scheme</span></span>: <span class="hljs-string"><span class="hljs-string">'tms'</span></span>, <span class="hljs-attr"><span class="hljs-attr">tiles</span></span>: [<span class="hljs-string"><span class="hljs-string">'http://a.tiles.mapbox.com/mapbox/1.0.0/world-light/{z}/{x}/{y}.png'</span></span>] }; <span class="hljs-comment"><span class="hljs-comment">// Alias com.modestmaps to mm. This isn't necessary - // just nice for shorter code. var mm = com.modestmaps; // Set up a map in a div with the id 'modestmaps-setup' var m = new mm.Map('modestmaps-setup', // Use Wax's connector to add a new custom layer new wax.mm.connector(tilejson), // And it'll be 240px by 120px new mm.Point(240,120)); // Center it on the United States, at zoom level 2. m.setCenterZoom(new mm.Location(39, -98), 2);</span></span></code> </pre><br><br>  The map will be displayed in a div with the identifier <code>modestmaps-setup</code> . <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modestmaps-setup"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  <a href="http://mapbox.github.com/wax/manual/">An example</a> . <br><br><h5>  LeafLet </h5><br><br>  LeafLet is another modern and lightweight JavaScript library for creating interactive tile-based maps developed by CloudMade. <br><br>  This library is designed from scratch to work efficiently and smoothly on both desktop and mobile platforms using the advanced technologies included in HTML5.  The main priorities in development are usability, performance, small size, support for advanced browsers, flexibility, and an easy-to-use API.  The code is written in OOP style and is designed to be modular, extensible and easy to understand. <br><br>  In order to use LeafLet, in your project, we include the necessary code. <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'wax/ext/leaflet.js'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'text/javascript'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'wax/dist/wax.leaf.js'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'text/javascript'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'wax/ext/leaflet.css'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'stylesheet'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'text/css'</span></span></span><span class="hljs-tag"> /&gt;</span></span> ...</code> </pre><br><br><ul><li>  <code>wax/ext/leaflet.js</code> - contains the LeafLet library </li><li>  <code>wax/dist/wax.leaf.js</code> - contains code integrating Wax and LeafLet </li><li>  <code>wax/ext/leaflet.css</code> - contains design styles for controls </li></ul><br><br>  Wax also contains a LeafLet provider that displays tile sets described by the TileJSON format in <code>wax.leaf.connector</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tilejson = { <span class="hljs-attr"><span class="hljs-attr">tilejson</span></span>: <span class="hljs-string"><span class="hljs-string">'1.0.0'</span></span>, <span class="hljs-attr"><span class="hljs-attr">scheme</span></span>: <span class="hljs-string"><span class="hljs-string">'tms'</span></span>, <span class="hljs-attr"><span class="hljs-attr">tiles</span></span>: [<span class="hljs-string"><span class="hljs-string">'http://a.tiles.mapbox.com/mapbox/1.0.0/geography-class/{z}/{x}/{y}.png'</span></span>], <span class="hljs-attr"><span class="hljs-attr">grids</span></span>: [<span class="hljs-string"><span class="hljs-string">'http://a.tiles.mapbox.com/mapbox/1.0.0/geography-class/{z}/{x}/{y}.grid.json'</span></span>], <span class="hljs-attr"><span class="hljs-attr">formatter</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options, data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data.NAME } }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> map = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> L.Map(<span class="hljs-string"><span class="hljs-string">'leaflet-simple'</span></span>) .addLayer(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> wax.leaf.connector(tilejson)) .setView(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> L.LatLng(<span class="hljs-number"><span class="hljs-number">51.505</span></span>, <span class="hljs-number"><span class="hljs-number">-0.09</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span>); wax.leaf.interaction(map, tilejson);</code> </pre><br><br><h5>  Conclusion </h5><br><br>  In this topic, we looked at creating a simplest caching map service using the TileStream tile server, together with the libraries of Modest Maps and LeafLet. <br><br>  Thanks for attention. <br><br><h5>  useful links </h5><br><ul><li>  <a href="https://github.com/mapbox/tilestream">TileStream</a> </li><li>  <a href="http://mapbox.github.com/wax/manual/">Wax</a> </li><li>  <a href="https://github.com/stamen/modestmaps-js">Modest Maps JS</a> </li><li>  <a href="http://leaflet.cloudmade.com/">LeafLet</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/123290/">https://habr.com/ru/post/123290/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../123272/index.html">SpyCloud: Intelligence is going to keep its secrets in the clouds</a></li>
<li><a href="../123278/index.html">Userscript to remove red messages from Google+</a></li>
<li><a href="../123282/index.html">Revolution group is blocked through social networks VKontakte</a></li>
<li><a href="../123283/index.html">Tightrope walker</a></li>
<li><a href="../123287/index.html">FAS obliged RU-CENTER to return illegally received 239360212 rubles</a></li>
<li><a href="../123293/index.html">So is ORM needed in a large and complex Enterprise project?</a></li>
<li><a href="../123295/index.html">GoDaddy sold for $ 2.25 billion</a></li>
<li><a href="../123296/index.html">In South Korea are going to replace all paper books with electronic ones by 2015</a></li>
<li><a href="../123297/index.html">Suicide analysis of usability "Habrahabra"</a></li>
<li><a href="../123299/index.html">Playing torrents in your browser with Magic Player</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
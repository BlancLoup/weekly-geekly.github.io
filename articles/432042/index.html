<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Yandex opens the Cloud. New Platform Architecture</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today, Yandex.Oblako became available to everyone. Now, any user can go to Cloud and deploy the resources he needs, by gaining access to Yandex techno...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Yandex opens the Cloud. New Platform Architecture</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/jm/oa/sm/jmoasmhkjjnokwj4vjwf6qjk_ac.png" alt="image"><br><br>  Today, Yandex.Oblako <a href="https://ya.cc/4bG-N">became available to</a> everyone.  Now, any user can go to Cloud and deploy the resources he needs, by gaining access to Yandex technologies.  For example, to machine translation and speech recognition and synthesis. <br><br>  Today I want to introduce you to Yandex. Cloud and tell you how it works inside.  Under the cut you will learn a little about the history, team and architecture of our platform. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><h4>  A bit of history </h4><br>  Despite the fact that the Yandex cloud platform was first publicly shown not so long ago, the project has been developing within the company for a long time and has survived several phases, and many of the technologies that formed its basis have passed the test of time in the internal infrastructure of Yandex.  Development began last year, and the first external users began testing the platform in April 2018.  It was a closed mode in which about 100 companies participated - web services of various sizes, SaaS developers and corporations.  In September, we opened a public site, but it was possible to get to the Cloud itself only through a waiting list, and now, in December, access has become open to everyone. <br><br>  At the very beginning, when a product development plan was being developed, several strategic decisions needed to be made about what characteristics the cloud should have and what technologies it should be based on: what open-ended decisions would be appropriate to use, what can be taken from the internal stack of Yandex technologies, and what will have to be developed specifically for the public platform.  One of the most important issues was related to OpenStack. <br><br><img src="https://habrastorage.org/webt/ia/mn/_x/iamn_x7pjh8ubt65owxccdee6y0.png"><br><br>  By this time, a cluster of several thousand hosts on OpenStack has been successfully operating in Yandex for several years.  One possible solution would be to use this technology to create the Cloud, especially since it would significantly accelerate the platform‚Äôs entry into the market.  However, after many discussions and heated debates, it was decided in favor of its own design.  Pros and cons argued, but the following arguments were decisive. <br><br>  First of all, OpenStack is a solution for private single-tenant clouds.  It has not historically been designed to build scalable <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D1%2583%25D0%25BB%25D1%258C%25D1%2582%25D0%25B8%25D0%25B0%25D1%2580%25D0%25B5%25D0%25BD%25D0%25B4%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C">multi-tenant</a> platforms.  The second point: this technology is poorly compatible with <a href="https://ru.bmstu.wiki/%25D0%2593%25D0%25B8%25D0%25BF%25D0%25B5%25D1%2580%25D0%25BA%25D0%25BE%25D0%25BD%25D0%25B2%25D0%25B5%25D1%2580%25D0%25B3%25D0%25B5%25D0%25BD%25D1%2582%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C">hyperconvergent</a> architecture (when all the hardware resources form one large pool, and a virtual infrastructure is built on the basis of it).  And thirdly, we have experienced all the difficulties with the support and modification of OpenStack, revealed during the operation of the cluster, and did not want to risk the customer experience of our future users.  Of course, there were no unequivocal answers to the questions raised by us, but it was required to make an informed decision.  The choice was made, and the platform went its own way. <br><br>  Here it is worth noting the associated architectural approaches, which were also laid at the very beginning.  Using a single pool of unified hardware resources is one of the principal decisions.  This approach allows you to easily scale the platform and painlessly increase the number of available resources.  In addition, we have determined that the platform will be built on the principle of self-hosting.  That is, all cloud services, including service ones, should ‚Äúlive‚Äù over a single hyperconvergent infrastructure.  This means that there are no dedicated management servers in Yandex. Oblak.  All platform services are deployed on the same virtual machines as external users. <br><br><img src="https://habrastorage.org/webt/c6/ow/lh/c6owlhdze5wr1k1rinyzhntkzxq.png"><br><br>  Self-hosting allows you to manage your cloud structure very flexibly and automatically connect additional infrastructure ‚Äî from a single server to a data center with thousands of machines ‚Äî at minimal cost.  In addition, we work in the same conditions as our users, which means we can experience all client experience. <br><br>  And the third principle underlying the platform: the presence of a single repository of metadata and system information for all services.  For this, internal development is used - Yandex Database (YDB, not to be confused with ClickHouse), which allows you to place data very reliably, efficiently and elastic.  Thus, the metadata repository has become the basic internal service for all other services of Yandex. Oblak. <br><br>  You probably noticed that the basic principles of the organization of the platform are closely related to each other and in many respects define the architecture and many subsequent technological solutions.  This is what gave us the opportunity to create a scalable platform that will allow us to plan the development of all existing and future Cloud services in the long term. <br><br><h4>  Architecture </h4><br>  In general, the architecture looks like this: <br><br><img src="https://habrastorage.org/webt/t-/nt/_y/t-nt_yinmrqsburnhbr8jed_5u0.png"><br><br>  The basis of the cloud is the already mentioned shared storage metadata (storage layer).  YDB using a special replication mechanism covers all the hardware storage available to the Cloud.  A similar mechanism applies to network block storage (NBS).  Together with YDB, they form a common data storage system, which is used by all other services in the Cloud. <br><br><img src="https://habrastorage.org/webt/ua/aa/ec/uaaaecwk-nkbgzxgstvgtniy7g8.png"><br><br>  Above the repository is built <a href="https://cloud.yandex.ru/services/compute">Yandex Compute Cloud service</a> .  It provides the ability to manage virtual machines that are used by both external users and internal components of the platform.  The hypervisor is <a href="https://ru.wikipedia.org/wiki/KVM">KVM</a> , and the emulator is <a href="https://ru.wikipedia.org/wiki/QEMU">QEMU</a> .  As a result, <a href="https://www.linux-kvm.org/page/Virtio">VirtIO drivers</a> were chosen for device virtualization.  An important part of the bundle of virtual machines and hardware infrastructure is the Scheduler.  It is he who determines on which physical server the next virtual machine will be deployed. <br><br><img src="https://habrastorage.org/webt/f0/aw/xt/f0awxthvujxitsqgfzudktscfno.png"><br><br>  Together, these components are the IaaS-part of the platform, which also includes the <a href="https://cloud.yandex.ru/docs/vpc/">Yandex Virtual Private Cloud service</a> .  At the core of the network service is the open source project <a href="http://www.opencontrail.org/">OpenContrail</a> . <br><br>  Another important component of this level is the snapshot mechanism.  It allows you to take <a href="https://cloud.yandex.ru/docs/compute/concepts/snapshot">pictures</a> and <a href="https://cloud.yandex.ru/docs/compute/concepts/images">images of</a> disks. <br><br><img src="https://habrastorage.org/webt/qk/31/jm/qk31jm9znbzvm6htux-f8a0fqba.png"><br><br>  A level above - platform services, most of which are available to all users of Yandex. Cloud.  These are services for managing databases in the Cloud, clusters of which are deployed in virtual machines (ClickHouse, Managed Databases for MongoDB and PostgreSQL);  S3 compatible <a href="https://cloud.yandex.ru/docs/storage/">object storage</a> ;  as well as <a href="https://cloud.yandex.ru/docs/translate/">translation</a> services <a href="https://cloud.yandex.ru/docs/speechkit/">and speech synthesis and recognition</a> . <br><br>  There are two more important services that cover all layers of the cloud.  These are <a href="https://cloud.yandex.ru/docs/billing/">Billing</a> and <a href="https://cloud.yandex.ru/docs/iam/">Identity and Access Management</a> (IAM).  The first is responsible for all transactions with billing and payment of consumed resources.  The second implements <a href="https://ru.wikipedia.org/wiki/%25D0%25A3%25D0%25BF%25D1%2580%25D0%25B0%25D0%25B2%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25B4%25D0%25BE%25D1%2581%25D1%2582%25D1%2583%25D0%25BF%25D0%25BE%25D0%25BC_%25D0%25BD%25D0%25B0_%25D0%25BE%25D1%2581%25D0%25BD%25D0%25BE%25D0%25B2%25D0%25B5_%25D1%2580%25D0%25BE%25D0%25BB%25D0%25B5%25D0%25B9">control of access to resources based on roles</a> (role based access control): each user can be assigned certain roles that describe the allowed operations.  For example, the editor role allows you to create, delete, and edit resources, but does not allow you to control access to them. <br><br>  This is a fairly general description of the device Yandex. Oblaka, but it allows you to understand how the different parts of a large platform interact with each other.  If you want to understand the structure of the platform in more detail, I advise you to look at <a href="https://youtu.be/Kr6WIYPts8I">the</a> conference <a href="https://youtu.be/Kr6WIYPts8I">recording</a> <a href="https://events.yandex.ru/events/meetings/18-November-2018/">about: cloud</a> .  Special attention at this event was paid to networks and Yandex Database. <br><br><h4>  Team </h4><br>  Finally - a couple of words about the team.  Over the past year, it has increased significantly and <a href="https://yandex.ru/jobs/vacancies/dev%3Futm_source%3Dhabr%26utm_content%3Dpost071218">continues to grow</a> .  Now it consists of more than 150 people, not counting the large number of groups that are not directly part of Yandex. Cloud, but which developments are also used in the platform.  A significant part of the experts - of course, the developers.  They are divided into units that are engaged in one direction or another: virtual machines, cloud databases, billing, networks, etc. There is a separate group specializing in cloud security issues and everything that is stored in it.  And, of course, support, ready to quickly answer questions raised by users. <br><br>  I have it all.  In the near future we will publish several articles on the details of working with different services of our platform.  In the meantime, you can <a href="https://ya.cc/4bG-N">get acquainted</a> with Yandex. Cloud.  Each new user will receive 4000 rubles to get acquainted with the platform.  This amount is quite enough to place a medium-sized web project in the Cloud based on the standard LAMP bundle with the object storage of files per 1 terabyte;  or in order to translate an array of data in excess of 9 million characters by connecting the machine translation to your mobile application or website. </div><p>Source: <a href="https://habr.com/ru/post/432042/">https://habr.com/ru/post/432042/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../432032/index.html">We finish the nailed Google search box</a></li>
<li><a href="../432034/index.html">The book "Electricity step by step" by Rudolph Svoren</a></li>
<li><a href="../432036/index.html">Live: Frontend Infrastructure</a></li>
<li><a href="../432038/index.html">On-click fame, or how to excite the robot and ... the rest</a></li>
<li><a href="../432040/index.html">Validators + Aspects: customize validation</a></li>
<li><a href="../432046/index.html">Graali competition Telecom Data Cup. The hottest to come</a></li>
<li><a href="../432050/index.html">Welcome to the Waves Blockchain Hackathon</a></li>
<li><a href="../432052/index.html">‚ÄúYou are a cool developer, go and ask for more money‚Äù - we will tell managers how the world works</a></li>
<li><a href="../432054/index.html">What is unique about BeOS and HaikuOS</a></li>
<li><a href="../432056/index.html">Verification of photos in retail using Computer vision</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
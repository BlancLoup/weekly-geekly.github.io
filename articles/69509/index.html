<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Nginx: just in time</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to write about a little trick with SSI, which recently came in handy for me. 

 Suppose you need to roll out a slightly modified version of a c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Nginx: just in time</h1><div class="post__text post__text-html js-mediator-article"> I want to write about a little trick with SSI, which recently came in handy for me. <br><br>  Suppose you need to roll out a slightly modified version of a certain page at exactly midnight, or at any other very inconvenient time, when all normal people are sleeping for a long time.  Also, suppose you do not want to mess around with crown, and in general, you have tested everything a thousand times, so nothing can happen.  :) <br><br>  For this purpose, we can use nginx-sovy SSI.  You will not have to make any changes to the nginx config, and the page itself may look something like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>&lt;!--# config timefmt="%d%m%Y" --&gt; <br> &lt;!--    ,   $date_local    --&gt; <br> &lt;!--# if expr="$date_local = 01012010" --&gt; <br> &lt;!--# include virtual="/path/to/new_year_congratulations/" stub="Oops!" --&gt; <br> &lt;!--# else --&gt; <br> &lt;!--# include virtual="/path/to/usual/version/of/block/" stub="Oops2!" --&gt; <br> &lt;!--# endif--&gt; <br> &lt;!--   $date_local  $date_gmt  - ,       ,    --&gt; <br></code> <br><br>  And now, exactly at midnight, January 1, 2010, your users will see a happy new year greetings on the site of some ordinary block.  Moreover, at this time you can sleep peacefully (or, get drunk with friends).  :) Moreover, exactly at midnight, the second of January, the greeting will disappear without your participation. <br><br>  This method, of course, can be expanded and improved, achieving the most unusual results.  For example, it is possible, automatically, every Friday, to congratulate users on the end of the work week. <br><br>  Naturally, he has drawbacks: <br>  - your if will be executed with each page return - it can be critical on servers with a very slow processor, or on a VPS; <br>  - some periods of time in such a way to determine all the same will not work, or it will require more than one operator ‚Äúif‚Äù; <br>  - something else‚Ä¶ :) <br><br>  But, in general - a good, convenient, and most importantly, quick solution. </div><p>Source: <a href="https://habr.com/ru/post/69509/">https://habr.com/ru/post/69509/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../69488/index.html">History of one navigator</a></li>
<li><a href="../69489/index.html">Twitter microblogging service changed terms of user agreement</a></li>
<li><a href="../69490/index.html">Based on the news about the domestic browser</a></li>
<li><a href="../69502/index.html">Manufacturing Wi-Fi antenna</a></li>
<li><a href="../69505/index.html">Reception of citizens: the experience of implementing the "electronic queue" in a state organization</a></li>
<li><a href="../69515/index.html">Bug Driven Development</a></li>
<li><a href="../69518/index.html">Scope of discussion topics on Habr√©</a></li>
<li><a href="../69519/index.html">How would you recommend saying ‚Äúserver‚Äù if you recorded ‚Äúserver‚Äù and met it in Russian?</a></li>
<li><a href="../69520/index.html">Call price</a></li>
<li><a href="../69521/index.html">released boost 1.40.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Frequently asked questions about the WatchKit framework</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For developers, Apple Watch is not just a sensational gadget. Now they have to learn the Watch Kit in order to create and adapt their applications for...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Frequently asked questions about the WatchKit framework</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/company/alconost/blog/257023/"><img align="right" src="https://habrastorage.org/files/8a6/717/bac/8a6717bace8545a88396dc30b6e9104a.jpg"></a>  For developers, Apple Watch is not just a sensational gadget.  Now they have to learn the Watch Kit in order to create and adapt their applications for smart watches.  As you explore this technology, of course, many questions arise. <br><br>  We at <a href="http://alconost.com/%3Futm_source%3Dhabrahabr%26utm_medium%3Darticle%26utm_campaign%3Dtranslation%26utm_content%3Dwatchkit">Alconost have</a> translated the extensive <a href="http://alconost.com/%3Futm_source%3Dhabrahabr%26utm_medium%3Darticle%26utm_campaign%3Dtranslation%26utm_content%3Dwatchkit">WatchKit</a> FAQ.  We will be glad if the work of our technical translators will be useful for you.  For some questions, there are no clear solutions yet: in such cases, you should rely on common sense, expert advice and reasonable assumptions.  This technology is still largely under development, and therefore subject to change.  However, the answers to many burning questions have already been found.  We invite you under the cat! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/8f5/a1f/24a/8f5a1f24a1fe49bab5379908c60f0ca7.png"></div><br><a name="habracut"></a><br><h2>  <font color="#0096d6"><b>Main questions</b></font> </h2><br><h3>  <font color="#0096d6"><b>What is WatchKit and how does it work?</b></font> </h3><br>  WatchKit is Apple's framework for creating hybrid applications for Apple Watch watches, which includes Xcode 6.2. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      WatchKit divides the app into two parts: <br><ul><li>  The <b>Apple Watch</b> contains only user interface resources, such as a storyboard and an asset catalog.  Even processing the information entered by the user, Apple Watch does not independently execute the code.  In other words, the watch works like a <a href="http://en.wikipedia.org/wiki/Thin_client">thin</a> client; </li><li>  <b>The iPhone</b> contains all the code and executes it as a software extension ‚Äî for example, extensions of the Today or Action applications. </li></ul><br><img src="https://habrastorage.org/files/b18/378/259/b183782599db48eea275e85caebd10e3.jpg"><br><br>  It is noteworthy that such an exchange of information between the Apple Watch and the iPhone takes place automatically and imperceptibly. <br><br>  You work as usual, and WatchKit handles all data communication wirelessly.  As for the code you write, your view and outlet are connected locally, even though they are located on a separate device.  Very comfortably! <br><br><br><h3>  <font color="#0096d6"><b>Can I develop applications for Apple Watch in Swift?</b></font> </h3><br>  Yes, Apple Watch applications can be developed both in Objective-C and Swift languages ‚Äã‚Äã( <i>translator's note: by the way, we</i> <i>translated</i> <a href="http://habrahabr.ru/company/alconost/blog/243515/"><i>part of the documentation</i></a> <i>on this language</i> <i>in</i> <a href="http://alconost.com/services/technical-translation%3Futm_source%3Dhabrahabr%26utm_medium%3Darticle%26utm_campaign%3Dtranslation%26utm_content%3Dwatchkit"><i>Alconost</i></a> ), and you can use two languages ‚Äã‚Äãat once.  As an example, Apple has published two projects for the WatchKit environment: <br><ul><li>  <a href="https://developer.apple.com/library/prerelease/iOS/samplecode/WKInterfaceCatalog/Introduction/Intro.html">WatchKit catalog: using WatchKit interface elements</a> written entirely in Objective-C. </li><li>  <a href="https://developer.apple.com/library/prerelease/iOS/samplecode/Lister/Introduction/Intro.html">Lister helper application</a> - in two versions: in Objective-C and Swift languages. </li></ul><br>  In addition, the <a href="http://www.raywenderlich.com/89562/WatchKit-tutorial-with-swift-getting-started">WatchKit Handbook, the WatchKit Video</a> <a href="http://www.raywenderlich.com/89685/video-tutorial-WatchKit-part-0-introduction">Practice Series and the WatchKit</a> <a href="http://www.raywenderlich.com/store/watchkit-by-tutorials">Training Materials</a> book are written exclusively in Swift. <br><br>  Apple provides the <a href="https://developer.apple.com/library/prerelease/iOS/documentation/WatchKit/Reference/WatchKit_framework/index.html">WatchKit framework documentation</a> in Objective-C and Swift. <br><br><br><h3>  <font color="#0096d6"><b>Can I create my own dials for watches?</b></font> </h3><br>  No, custom dials for watches are not yet supported. <br><img src="https://habrastorage.org/files/1c8/228/df5/1c8228df538a4c4a93d7183abb0be413.png"><br>  <i>Changing the dials for hours is not yet supported!</i> <br><br><h3>  <font color="#0096d6"><b>How many hours of Apple Watch can I connect to one iPhone?</b></font> </h3><br>  The connection is exclusive, so only one Apple Watch can be connected to one iPhone at a time. <br><br><h3>  <font color="#0096d6"><b>Can I connect an Apple Watch to an iPad?</b></font> </h3><br>  Not.  Now Apple Watch can only be connected to the iPhone. <br><br><h3>  <font color="#0096d6"><b>Can an app on an iPhone smartphone ‚Äúwake up‚Äù its WatchKit extension and app in hours?</b></font> </h3><br>  Not.  The WatchKit extension can only request the system to launch a companion application for the iPhone, and it will do so in the background.  Now work in the opposite direction is not supported. <br><br><h3>  <font color="#0096d6"><b>Can third-party apps make phone calls from a clock app?</b></font> </h3><br>  Not.  There is no open API that allows you to initiate a phone call directly from the WatchKit extension.  Since the companion iPhone application also cannot be put on a priority level, the system ignores all phone calls or <i>openURL</i> requests <i>:</i> from the companion smartphone application. <br><br><h3>  <font color="#0096d6"><b>Can I access the pulse sensor and other clocks from a clock application?</b></font> </h3><br>  Not.  There is no software interface for accessing hardware sensors on the Apple Watch. <br><br><h3>  <font color="#0096d6"><b>What is the difference between short, long, static and dynamic notifications?</b></font> </h3><br><ul><li>  <b>Short notice</b> (Short-Look) served by the system.  As with the notice banner on the iPhone, you cannot control brief notifications.  The short notification shows the icon, the application name and the notification header line.  The incoming notification is displayed in a ‚Äúbrief‚Äù form.  If the user lifts his wrist, then after a short pause, a short notice is replaced by a long notice. </li><li>  <b>Long notice</b> (Long-Look) can be either static or dynamic: </li></ul><br>  - <b>static notification</b> contains a single text string, which is automatically filled in using the notification content.  You can create a scene for a static notification in the application storyboard for hours, but in terms of customization, you can only change the color of the dividing line and title; <br>  - <b>dynamic notification</b> requires subclassing <b>WKUserNotificationInterfaceController</b> .  It is instantiated from the storyboard and allows you to define your own interface.  Keep in mind that the dynamic notification interface is not always displayed.  For example, if the battery of the watch dies, to save battery power, the system may decide to show a static notification interface instead of a dynamic one, since static notifications consume less energy. <br><br><h2>  <font color="#0096d6"><b>Under the hood</b></font> </h2><br><img src="https://habrastorage.org/files/5f6/322/359/5f6322359d474bcb9d151d3d2494eb81.png"><br>  <i>Select the appropriate scheme</i> <br><br><h3>  <font color="#0096d6"><b>How to check the ‚Äúquick view‚Äù view or notification using a simulator?</b></font> </h3><br>  To run in the simulator for each "quick view" and notifications you need your own assembly scheme.  Simply choose the appropriate scheme, collect and run. <br><br><h3>  <font color="#0096d6"><b>Can the interface elements be placed one on top of another?</b></font> </h3><br>  Not.  By default, interface elements cannot be placed one on top of another.  However, this restriction can be circumvented.  For example, you can use the <b>WKInterfaceGroup</b> group and set a background image for what is a control, on top of which you want to add another.  Then inside this group, you can add the necessary text lines, buttons, etc. <br><br><h3>  <font color="#0096d6"><b>Can I customize the CALayer property of the interface elements?</b></font> </h3><br>  Not.  The Apple Watch interface elements do not have the <b>CALayer</b> property, since they do not originate from either the <b>UIView</b> class or the <b>CALayer</b> class. <br><br><h3>  <font color="#0096d6"><b>Is it possible to subclass those classes that are in the WatchKit framework?</b></font> </h3><br>  Nothing prevents subclassing any class in the WatchKit framework, but it may happen that you cannot use this feature.  You <i>can</i> subclass some classes, such as <b>WKInterfaceController</b> and <b>WKUserNotificationInterfaceController</b> , and use them in the storyboard. <br><br>  However, the storyboard clock application does not allow to change the class of interface elements.  You cannot dynamically create interface elements and insert or delete them as displayed sub-elements;  you can only hide or show those interface elements that already exist in the storyboard. <br><br><h3>  <font color="#0096d6"><b>Is it possible to combine the interface controllers based on the page and based on the movement?</b></font> </h3><br>  It is possible, but with some restrictions. <br><br>  If you have a <b>hierarchical interface</b> , then the page-based interface can be represented using modules.  If any of the pages is a hierarchical interface, then its root directory is displayed, and nothing will be added to its stack. <br><br>  If you have <b>a page-</b> based interface, a hierarchical interface can be represented using modules, but only the root interface controller will be displayed, and adding to its stack will not work. <br><br><h3>  <font color="#0096d6"><b>Does Apple Watch have equivalents for the UIActivityIndicator and UIAlertController classes?</b></font> </h3><br>  No, but instead of the <b>UIAlertController</b> class, <b>you</b> can modally display a custom <b>WKInterfaceController</b> . <br><br>  The action indicator can be bypassed by adding a sequence of images to create the necessary animation, or simply display a text string with the corresponding text.  How this is done can be seen in the <a href="https://developer.apple.com/library/prerelease/iOS/samplecode/Lister/Introduction/Intro.html">example of the Lister application</a> provided by Apple: in the ‚Äúquick glance‚Äù mode, one circular animation of the clock application represents 360 images! <br><img src="https://habrastorage.org/files/72f/ff7/d77/72fff7d77f4248deae5964606d016e28.png"><br><br><h3>  <font color="#0096d6"><b>Can I use Core Graphics to create images dynamically, and then use them in a clock application?</b></font>  <font color="#0096d6"><b>Can they be cached on the clock?</b></font> </h3><br>  Yes, it is possible, but any images using Core Graphics should be compiled on the iPhone as part of the expansion.  Once the Core Graphics graphics context has been transferred to an instance of the <b>UIImage</b> class, it can be placed on the clock using the <b>addCachedImage (_: name :)</b> method from the <b>WKInterfaceDevice</b> class. <br><br><h3>  <font color="#0096d6"><b>Can I use custom views in Apple Watch watches and customize interface elements outside of the open clock API?</b></font> </h3><br>  Not.  Custom views cannot be used.  WatchKit supports only some of its own interface elements.  These elements cannot be subclassed or customized outside their open API.  There are the following interface elements: <b>WKInterfaceLabel</b> , <b>WKInterfaceButton</b> , <b>WKInterfaceImage</b> , <b>WKInterfaceGroup</b> , <b>WKInterfaceSeparator</b> , <b>WKInterfaceTable</b> , <b>WKInterfaceSwitch</b> , <b>WKInterfaceMap</b> , <b>WKInterfaceSlider</b> and <b>WKInterfaceTimer</b> . <br><br><h3>  <font color="#0096d6"><b>How does an Apple Watch exchange information with an iPhone?</b></font> </h3><br>  The Apple Watch is best used by Bluetooth LE and Wi-Fi to share information with a connected iPhone.  The implementation of such information exchange is not transparent to either users or developers. <br><br><br><h3>  <font color="#0096d6"><b>Can Apple Watch be used offline?</b></font> </h3><br>  Yes.  After activating the offline mode, you can turn on Bluetooth and Wi-Fi to share data and use the clock. <br><br><img src="https://habrastorage.org/files/8a9/839/a09/8a9839a097184bb0a20b92cc446a356f.png"><br>  <i>Turn on Wi-Fi and Bluetooth after activating offline mode</i> <br><br><h3>  <font color="#0096d6"><b>What happens to the app when the Apple Watch cannot communicate with the associated iPhone?</b></font> </h3><br>  Simply put, the application will not work, and if it already works, then the work will be suspended. <br><br>  In the WatchKit extension, the didDeactivate <b>()</b> method will be called on the current interface controller, and the necessary cleanup can be done.  The red icon of the iPhone device will be displayed in the status line of the watch, indicating a loss of communication, and the interface will remain on the screen, but will not be interactive.  Users can either reconnect or exit the application. <br><br><h3>  <font color="#0096d6"><b>How does a clock app communicate with a companion app on an iPhone?</b></font> </h3><br>  This is done in different ways.  The most common way is when a watch app writes or updates data in a shared container, and then notifies the app on a smartphone.  After that, the application on the smartphone can retrieve the changes from the shared container. <br><br>  Another way is to transfer the data to the iPhone's application through the dictionary, but this method can only be initiated by the clock application.  To do this, there is a separate API in the WatchKit extension: the <b>openParentApplication</b> method <b>(userInfo: reply :)</b> of the <b>WKInterfaceController</b> class is <b>called</b> , as shown in the following example: <br><table><tbody><tr><td><pre><code class="hljs haskell">// <span class="hljs-type"><span class="hljs-type">Notify</span></span> companion iPhone app <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> some changes <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the shared container. <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> kSharedContainerDidUpdate = <span class="hljs-string"><span class="hljs-string">"com.rayWenderlich.shared-container.didUpdate"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> requestInfo: [<span class="hljs-type"><span class="hljs-type">NSObject</span></span>: <span class="hljs-type"><span class="hljs-type">AnyObject</span></span>] = [kSharedContainerDidUpdate: true] <span class="hljs-type"><span class="hljs-type">WKInterfaceController</span></span>.openParentApplication(requestInfo) { (replyInfo: [<span class="hljs-type"><span class="hljs-type">NSObject</span></span> : <span class="hljs-type"><span class="hljs-type">AnyObject</span></span>]!, error: <span class="hljs-type"><span class="hljs-type">NSError</span></span>!) -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> // <span class="hljs-type"><span class="hljs-type">Handle</span></span> the reply from the companion iPhone app... }</code> </pre> </td></tr></tbody></table><br>  In the <b>userInfo</b> dictionary <b>,</b> you simply transfer the label or some data for the accompanying iPhone application with which you want to perform actions.  To receive such a message, the accompanying iPhone <b>application</b> must execute the <b>application (_: handleWatchKitExtensionRequest: reply :)</b> in its application delegate: <br><table><tbody><tr><td><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(application: UIApplication!, handleWatchKitExtensionRequest userInfo: [NSObject : AnyObject]!, reply: </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">([NSObject : AnyObject]!)</span></span></span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span>)!) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> kSharedContainerDidUpdate = <span class="hljs-string"><span class="hljs-string">"com.rayWenderlich.shared-container.didUpdate"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> isUpdate = userInfo[kSharedContainerDidUpdate] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">Bool</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Process request, then call reply block reply(...) } }</span></span></code> </pre> </td></tr></tbody></table><br>  If the associated smartphone application is paused or stopped, the system will launch it in the background.  Depending on the purpose of the message, the accompanying iPhone application may output something in the response block, which the clock application can then process accordingly. <br><br><h3>  <font color="#0096d6"><b>How does the iPhone app communicate with the watch app?</b></font> </h3><br>  An application on an iPhone device cannot initiate the exchange of information with its extension.  In addition to recording to a shared container or responding to requests from a watch app, an application on a smartphone can use the <a href="https://developer.apple.com/library/mac/documentation/Darwin/Conceptual/MacOSXNotifcationOv/DarwinNotificationConcepts/DarwinNotificationConcepts.html">Darwin Notification Center notification center</a> to notify the WatchKit extension about a specific event.  The Darwin Notification Center Notification Center is the Core Foundation API. <br><br>  When using the Darwin Notification Center, you need to remember some very important points: <br><ul><li>  the application has only one Darwin Notification Center; </li><li>  all Darwin notifications are system-wide; </li><li>  for delivering notifications, the main thread's execution loop must be in one of the common modes, such as <b>kCFRunLoopDefaultMode</b> ; </li><li>  to handle sending and receiving Darwin notifications, the app on the clock and the app on the smartphone must work in the foreground; </li><li>  Notifications cannot be transmitted through Darwin notifications, since such notifications only contain the <b>userInfo</b> name and dictionary; </li><li>  Darwin notifications are not ‚Äúpushy‚Äù and are delivered immediately.  Therefore, if the observation tool is suspended, terminated, or moved to the background, the notification will be lost. </li></ul><br><br><h3>  <font color="#0096d6"><b>What happens if you do not use static or dynamic notification interfaces?</b></font> </h3><br>  Even if there is no associated watch application for the application on the iPhone, the system will display a notification on the watch for that application.  However, the interface for notifications by default does not have a custom design.  If the application has interactive notifications, the system will hide these actions on the clock. <br><br><h3>  <font color="#0096d6"><b>What is the difference between setImage (_ :) and setImageNamed (_ :)?</b></font> </h3><br>  The <b>setImageNamed (_ :)</b> method is used when the image to be displayed is either stored in the clock cache, or is in the asset directory of the watch application kit, and <b>setImage (_ :)</b> should be used when the image is not stored in the cache ‚Äî so the image data will be transmitted to the Apple Watch wirelessly. <br><br>  The image is stored in the clock cache if it meets <i>one</i> of the following criteria: <br><ol><li>  In the project, the image is related to the purpose of the application for the clock, that is, the image is located in the assets catalog related to the purpose of the watch application in the project. </li><li>  The image was directly cached in advance using one of the following <b>WKInterfaceDevice APIs</b> : <b>addCachedImage (_: name :)</b> or <b>addCachedImageWithData (_: name :)</b> . </li></ol><br><br><h3>  <font color="#0096d6"><b>Can iCloud be used in an app for a watch?</b></font> </h3><br>  Yes, you can use iCloud in the Apple Watch app.  How to do this, you can see the example of the <a href="https://developer.apple.com/library/prerelease/iOS/samplecode/Lister/Introduction/Intro.html">application-assistant Lister</a> - one of the simple projects published by Apple. <br><br><h2>  <font color="#0096d6"><b>Animation</b></font> </h2><br><h3>  <font color="#0096d6"><b>How to add animation to the application for hours?</b></font> </h3><br>  The only way to display an animation on an Apple Watch is <b>image sequence</b> .  To create an animation, you must create a series of images in advance, and then loop through them, as in a cartoon drawn in a notebook.  Times of animated gifs are back!  ;] <br><div style="text-align:center;"><img src="https://habrastorage.org/files/196/1a0/cd1/1961a0cd14784281a19b56f1ba43e152.gif"></div><br>  To create your own animation, you can display a sequence of static images in a <b>WKInterfaceImage</b> object. <br><table><tbody><tr><td><pre> <code class="hljs swift"><span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> image: <span class="hljs-type"><span class="hljs-type">WKInterfaceImage?</span></span> ... image?.setImageNamed(image1) <span class="hljs-comment"><span class="hljs-comment">// Load the initial image using the required &lt;name&gt;&lt;number&gt; format image?.startAnimating() // Starts animating ... image?.stopAnimating() // Optional. Stops animating.</span></span></code> </pre> </td></tr></tbody></table><br>  You can also animate only a portion of the collection of images, as shown in the following code snippet: <br><table><tbody><tr><td><pre> <code class="hljs pgsql">image?.startAnimatingWithImagesInRange(range, duration: <span class="hljs-number"><span class="hljs-number">2</span></span>, repeatCount: <span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre> </td></tr></tbody></table><br><h3>  <font color="#0096d6"><b>Can I create animations for Apple Watch as a code?</b></font> </h3><br>  Yes - but perhaps not in the way you think.  As stated above, there is no Core Animation framework or equivalent.  You can use Core Graphics to provide each frame with an offscreen context animation, assign it to a <b>UIImage</b> instance, and in the end, you will get a series of images that can be animated on an Apple Watch. <br><br>  The following code snippets show how to create an animation for a moving circle using the Core Graphics framework by generating a sequence of images for each frame (code courtesy of Jack Wu, one of the authors of the <a href="http://www.raywenderlich.com/store/watchkit-by-tutorials">WatchKit Tutorial</a> ): <br><table><tbody><tr><td><pre> <code class="hljs sql">// <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> an offscreen <span class="hljs-keyword"><span class="hljs-keyword">context</span></span> UIGraphicsBeginImageContextWithOptions(<span class="hljs-keyword"><span class="hljs-keyword">size</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">opaque</span></span>, scale) let <span class="hljs-keyword"><span class="hljs-keyword">context</span></span> = UIGraphicsGetCurrentContext() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> centerX <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span> { // Draw a circle <span class="hljs-keyword"><span class="hljs-keyword">at</span></span> centerX. // <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> a snapshot. let image = UIGraphicsGetImageFromCurrentImageContext() // Write the image <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> let <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> = UIImagePNGRepresentation(image) let <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> = <span class="hljs-string"><span class="hljs-string">"path\\image_\(centerX).png"</span></span> data.writeToFile(<span class="hljs-keyword"><span class="hljs-keyword">file</span></span>, atomically: <span class="hljs-literal"><span class="hljs-literal">true</span></span>) } // <span class="hljs-keyword"><span class="hljs-keyword">End</span></span> the context. UIGraphicsEndImageContext()</code> </pre> </td></tr></tbody></table><br><img src="https://habrastorage.org/files/d7b/9b3/b1f/d7b9b3b1f2f24ce3904ecc81b828398e.gif"><br><br><h3>  <font color="#0096d6"><b>What is the maximum frame rate on an Apple Watch?</b></font> </h3><br>  You cannot set the frame rate on an Apple Watch.  However, you can set the duration of the animation, and the system will automatically determine the frame rate. <br><br>  If a sequence of images is sent over the wireless channel ‚Äî for example, when images are not cached ‚Äî they will run at up to 10 frames per second.  If the images are already cached on the Apple Watch through the image cache or the asset catalog in the WatchKit application bundle, they will run at up to 30 frames per second. <br><br><h2>  <font color="#0096d6"><b>Debugging and unit testing</b></font> </h2><br><h3>  <font color="#0096d6"><b>How to launch and debug an iPhone app at the same time as an Apple Watch app using simulators?</b></font> </h3><br><ol><li>  Build and run the clock application - the Apple Watch simulator will start and the clock application will bind to the debugger. </li><li>  Then, in the iOS simulator, launch the application for the smartphone by tapping its icon. </li><li>  Now go back to Xcode and in the top menu, click <b>Debug \ Attach To Process</b> , then select the appropriate application for the iPhone ‚Äî this will add a new process to the Xcode debugging browser, and attach the smartphone application to the debugger. </li></ol><br><br><h3>  <font color="#0096d6"><b>How to conduct unit testing extension WatchKit?</b></font> </h3><br>  The unit tests for the clock application are created in the same way as the unit tests of the applications for the iPhone and iPad: it is enough to add a new unit test goal to the project to extend WatchKit.  However, specifying the application for the clock as a host application will fail. <br><br><img src="https://habrastorage.org/files/c5d/0a9/a1a/c5d0a9a1a40645d89d50795508aaaed6.png"><br>  <i>For the purpose of the iPhone application, the smartphone application itself is displayed as a host application.</i> <br><br><img src="https://habrastorage.org/files/236/99c/d8f/23699cd8f99d4ec6a62a219e5799a021.png"><br>  <i>And for the WatchKit extension, there is no host application</i> <br><br>  The goal of the unit testing of the WatchKit extension is to separately add each file that needs to be tested. <br><br><img src="https://habrastorage.org/files/11f/b18/c95/11fb18c95da74e288a7828ec949e5bab.png"><br>  <i>From the WatchKit extension to the unit test target, add the files you want to test.</i> <br><br><h2>  <font color="#0096d6"><b>Data sharing</b></font> </h2><br><h3>  <font color="#0096d6"><b>How to organize data sharing between the WatchKit extension and the corresponding iOS application?</b></font> </h3><br>  To do this, you need to activate the <b>App Groups</b> application group - a container in the local file system that can be accessed by the extension and its application for the iPhone device.  You can define several groups of applications and activate them for different extensions. <br><br>  After activating application groups, you can use any suitable method from the following: <br><ul><li>  Read and write directly to a shared container.  The URL of the shared container can be obtained by referring to the <b>NSFileManager</b> object.  To do this, use the following API: </li></ul><br><table><tbody><tr><td><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> kMyAppGroupName = <span class="hljs-string"><span class="hljs-string">"com.raywenderlich.mywatchapp.container"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sharedContainerURL: <span class="hljs-type"><span class="hljs-type">NSURL?</span></span> = <span class="hljs-type"><span class="hljs-type">NSFileManager</span></span>.defaultManager(). containerURLForSecurityApplicationGroupIdentifier(kMyAppGroupName)</code> </pre> </td></tr></tbody></table><br><ul><li>  Using the shared object <b>NSUserDefaults</b> .  To create a default repository in a shared container, you must initialize a new instance of <b>NSUserDefaults</b> using the <b>NSUserDefaults (suiteName :)</b> instruction and pass a unique application group identifier, for example: </li></ul><br><table><tbody><tr><td><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> kMyAppGroupName = <span class="hljs-string"><span class="hljs-string">"com.raywenderlich.mywatchapp.container"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sharedUserDefaults = <span class="hljs-type"><span class="hljs-type">NSUserDefaults</span></span>(suiteName: kMyAppGroupName)</code> </pre> </td></tr></tbody></table><br>  <b>Note.</b>  In order to avoid data corruption, it is necessary to read and write data in a shared container consistently, since different processes can simultaneously access a shared container.  <b>NSFilePresenter</b> and <b>NSFileCoordinator are</b> recommended for consistency between reading and writing.  It is not recommended to use the file reconciliation API in the extension of the application, as this may cause a hang. <br><br>  The reason for this behavior is the life cycle of the application extensions.  Application extensions have only 3 states: a) executed, b) suspended and c) completed.  If the work of the extension of the application that uses the file matching API is suspended while writing, such a process will not have the opportunity to free the resource, and other processes will be blocked. <br><br>  When an application for an iPhone or iPad device is moved to the background, it receives a notification through its application delegate, and then must remove the presenter objects.  When the application is brought back to the fore, these presenters can be added again. <br><br>  Instead, you can use an atomic safe save operation, for example, <b>writeToURL (_: atomically :)</b> in the <b>NSData</b> class.  SQLite and Core Data also allow you to safely exchange data in a shared container between different processes, even if one of them is suspended at the time of the operation. <br><br>  For more information, see <a href="https://developer.apple.com/library/prerelease/iOS/technotes/tn2408/_index.html">Technical Note TN2408.</a>  <a href="https://developer.apple.com/library/prerelease/iOS/technotes/tn2408/_index.html">Access to shared data from the extension and the application containing it.</a> " <br><br><h3>  <font color="#0096d6"><b>How to share a Core Data database between a clock app and an iPhone app?</b></font> </h3><br>  To share a file from Core Data persistent storage, you need the same mechanism as shown in the data sharing example.  Below is a snippet of code that demonstrates how the mechanism works: <br><table><tbody><tr><td><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> kMyAppGroupName = <span class="hljs-string"><span class="hljs-string">"com.raywenderlich.mywatchapp.container"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sharedContainerURL: <span class="hljs-type"><span class="hljs-type">NSURL?</span></span> = <span class="hljs-type"><span class="hljs-type">NSFileManager</span></span>.defaultManager(). containerURLForSecurityApplicationGroupIdentifier(kMyAppGroupName) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sharedContainerURL = sharedContainerURL { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> storeURL = sharedContainerURL.<span class="hljs-type"><span class="hljs-type">URLByAppendingPathComponent</span></span>(<span class="hljs-string"><span class="hljs-string">"MyCoreData.sqlite"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> coordinator: <span class="hljs-type"><span class="hljs-type">NSPersistentStoreCoordinator?</span></span> = <span class="hljs-type"><span class="hljs-type">NSPersistentStoreCoordinator</span></span>(managedObjectModel: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectModel) coordinator?.addPersistentStoreWithType(<span class="hljs-type"><span class="hljs-type">NSSQLiteStoreType</span></span>, configuration: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, <span class="hljs-type"><span class="hljs-type">URL</span></span>: storeURL, options: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, error: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) }</code> </pre> </td></tr></tbody></table><br><br><h2>  <font color="#0096d6"><b>Getting down to business</b></font> </h2><br><h3>  <font color="#0096d6"><b>Can I make games for Apple Watch?</b></font>  <font color="#0096d6"><b>What games are suitable?</b></font> </h3><br>  Although it is too early to talk about what kinds of games will be successful and whether users will want to play games on the clock, but almost with full confidence we can say that the Apple Watch should be viewed in a different light. <br><br>  Developing games on iPhones and iPads required a completely different way of thinking than playing games on a desktop computer.  The Apple Watch also needs a special approach. <br><br>  We already know about the limitations of the platform: Apple Watch has no API for hardware access, they do not support gesture recognition and do not allow drawing on the screen.  Remember: you can only use your own interface elements. <br><br>  But do not allow these restrictions to stop the flight of creative thought - consider them to be fundamental principles.  :] <br><br><h3>  <font color="#0096d6"><b>How to make money with Apple Watch apps?</b></font> </h3><br>  It's too early to talk about it.  One thing to be borne in mind: the iAd platform is not supported, and given the small screen size and time during which the user will interact with the application for the clock, on-screen advertising will likely annoy users and in any case will not be so effective as to justify financial costs of it. <br><br>  In addition, if the WatchKit extension is included in the application bundle, it cannot be deactivated or otherwise prevented the user from installing it.  Therefore, it can not be made a paid addition, which can be purchased from the application. <br><br>  However, there are still ways to monetize WatchKit extensions: <br><ul><li>  If the App Store has a free and paid version of the application, you can simply implement the WatchKit extension exclusively in the paid version of the application; </li><li>  in an application with ‚Äúinternal‚Äù purchases, you can simply display limited information in the extension and allow the user to unlock additional functions through purchases from the application. </li></ul><br>  This, of course, is not an exhaustive list of the monetization capabilities of WatchKit applications, but one thing is clear: the monetization should be approached as creatively as the watch applications themselves. <br><br><h3>  <font color="#0096d6"><b>Is there any reason to believe that apps for watches are a new way to make a living through developing apps for the App Store?</b></font> </h3><br>  Any conclusions do prematurely.  And although the Apple Watch is really a completely new platform, full of interesting features, with its appearance the ‚Äúgold rush‚Äù that could be observed when opening the App Store will not start. <br><br>  It must be borne in mind that the Apple Watch has a different purpose.  Given their appearance and price, they are closer to the decoration that communicates with the iPhone, than to an independent device. <br><br>  However, the WatchKit extension can help a particular application stand out from the crowd.  As applications developed specifically for tablets iPad enjoyed greater success than applications for smartphones iPhone, just fit for iPad, and a well-designed application for watches Apple Watch, which complements any application for iPhone, can increase sales. <br><br>  <b>And what are your predictions about the Watch Kit?</b> <br><br><br>  <b>About the translator</b> <br><br>  The article is translated in Alconost. <br><br>  Alconost is engaged in the <a href="https://alconost.com/services/software-localization%3Futm_source%3Dhabrahabr%26utm_medium%3Darticle%26utm_campaign%3Dtranslation%26utm_content%3Dwatchkit">localization of applications, games and websites</a> in 60 languages.  Language translators, linguistic testing, cloud platform with API, continuous localization, 24/7 project managers, any formats of string resources. <br><br>  We also make <a href="https://alconost.com/services/video-production%3Futm_source%3Dhabrahabr%26utm_medium%3Darticle%26utm_campaign%3Dtranslation%26utm_content%3Dwatchkit">advertising and training videos</a> - for websites selling, image, advertising, training, teasers, expliners, trailers for Google Play and the App Store. <br><br>  Read more: <a href="https://alconost.com/%3Futm_source%3Dhabrahabr%26utm_medium%3Darticle%26utm_campaign%3Dtranslation%26utm_content%3Dwatchkit">https://alconost.com</a> <br><br></div><p>Source: <a href="https://habr.com/ru/post/257023/">https://habr.com/ru/post/257023/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../257011/index.html">Microsoft announced a cross-platform editor for Windows, OS X and Linux</a></li>
<li><a href="../257015/index.html">Introduction to the Ethernet Fast Path software on the P1020RDB debug board</a></li>
<li><a href="../257017/index.html">HL7 CDA R2 Development Tools Testing</a></li>
<li><a href="../257019/index.html">Ten of the best engines to create your own games</a></li>
<li><a href="../257021/index.html">Transliteration in Perl6</a></li>
<li><a href="../257025/index.html">Search a page with jQuery</a></li>
<li><a href="../257027/index.html">Vulnerability in proftpd CVE-2015-3306</a></li>
<li><a href="../257029/index.html">Build 2015: Visual Studio for OS X and Linux, Windows 10, cloud services and other new items from Microsoft</a></li>
<li><a href="../257037/index.html">The Assistant Robot Ashmanov on the Russian-language Turing test. Technology Infa</a></li>
<li><a href="../257039/index.html">What the designer needs to know about SVG: Pros and Cons</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
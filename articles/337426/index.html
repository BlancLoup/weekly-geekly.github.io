<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We go to the Internet outside the Russian Federation: (MikroTik <-> Ubuntu) * GRE / IPsec</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I will allow myself to publish my experience in using network technologies to the best of my perversity for going online from outside the Russian Fede...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We go to the Internet outside the Russian Federation: (MikroTik <-> Ubuntu) * GRE / IPsec</h1><div class="post__text post__text-html js-mediator-article">  I will allow myself to publish my experience in using network technologies to the best of my perversity for going online from outside the Russian Federation.  Let's not talk about why it is needed.  I hope that everything is clear to everyone. <br><br>  So, we have a static public IP address that comes with an Ethernet <a href="https://mikrotik.com/product/RB750Gr3">cable</a> in the MikroTik <a href="https://mikrotik.com/product/RB750Gr3">RouterBOARD 750G r3 (hEX)</a> .  We try to assemble such a construction. <br><br><img src="https://habrastorage.org/web/e99/ec4/601/e99ec46016d6403299b05d35cbadb71f.png"><br>  <i>I do not describe the L2tp link setting in this article, but it is drawn on the diagram only because it is mentioned in it.</i> <br><a name="habracut"></a><br><h1>  1. Raise the VPS </h1><br>  As you already guessed, we need a system that is included on the Internet outside the Russian Federation.  I didn‚Äôt want to spend big money on it, and I stopped at <a href="https://www.arubacloud.com/">Aruba Cloud</a> .  Here, for just 1 euro per month, VM is given in the locations Italy, Czech Republic, Germany, France and the United Kingdom.  I stopped my choice on the Czech Republic, because ping to our resources was 20ms less than from Italian (50ms vs. 70ms).  Ubuntu 16.04 LTS rose very quickly.  It was possible to enter it earlier than the ‚Äúgreen‚Äù status in the ‚Äúcloud‚Äù interface. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/web/1bf/a07/731/1bfa0773195142f59e2784c1d8129070.png"><br><br>  The server is installed in the minimum configuration.  It does not hurt to install traceroute utility. <br><br><pre><code class="bash hljs">$ sudo apt install traceroute</code> </pre> <br><h1>  2. Configure GRE between MikroTik and Ubuntu </h1><br>  The choice in favor of the GRE was made for several reasons: <br><br><ul><li>  simple and understandable customizable; </li><li>  easy to break; </li><li>  routing is nowhere easier; </li><li>  elementary draws a graph of the interface load in MikroTik. </li></ul><br>  <b>So, on the Ubuntu side, we describe the tun1 interface in / etc / network / interfaces</b> <br><br><pre> <code class="bash hljs">$ sudo cat &lt;&lt; EOF &gt;&gt; /etc/network/interfaces iface tun1 inet static address 192.168.10.1 netmask 255.255.255.0 pre-up iptunnel add tun1 mode gre <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> 80.211.xx remote 188.xxx ttl 255 up ifconfig tun1 multicast pointopoint 192.168.10.2 post-down iptunnel del tun1 EOF</code> </pre><br>  Everything is simple here: <br><br><ul><li>  80.211.xx - VM address with Ubuntu in the Czech Republic; </li><li>  188.xxx - MikroTik external address; </li><li>  192.168.10.1 - address on the tun1 tuni interface on the Ubuntu side; </li><li>  192.168.10.2 - the address of the tunnel interface on MikroTik; </li></ul><br>  In the old way I activate this part of the configuration like this: <br><br><pre> <code class="bash hljs">$ sudo service networking restart</code> </pre> <br><blockquote>  <i>Received constructive <a href="https://codeghar.wordpress.com/2011/07/18/debian-running-etcinit-dnetworking-restart-is-deprecated-because-it-may-not-enable-again-some-interfaces/">criticism of</a> this method of activating network settings.</i> <br></blockquote><br>  We have such an interface: <br><br><pre> <code class="bash hljs">$ ifconfig tun1 tun1 Link encap:UNSPEC HWaddr 10-D3-29-B2-00-00-B0-8A-00-00-00-00-00-00-00-00 inet addr:192.168.10.1 PtP:192.168.10.2 Mask:255.255.255.255 inet6 addr: fe80::200:5ffa:50d3:c9c2/64 Scope:Link UP POINTOPOINT RUNNING NOARP MULTICAST MTU:1476 Metric:1 RX packets:379 errors:0 dropped:0 overruns:0 frame:0 TX packets:322 errors:4 dropped:7 overruns:0 carrier:0 collisions:0 txqueuelen:1 RX bytes:103387 (103.3 KB) TX bytes:159422 (159.4 KB)</code> </pre><br>  <b>On the MikroTik side, the setup is also simple.</b>  <b>I did this from the web interface.</b> <br><br><img src="https://habrastorage.org/web/44d/556/43e/44d55643e6904d10be6acf5972f64661.png"><br><br>  <i>I draw attention to the fact that keepalive is not configured.</i>  <i>I never managed to enable the mate on Ubuntu.</i>  <i>If there is no traffic, then the interface on MikroTik will ‚Äúgo away‚Äù from <b>running</b> and rise only if traffic comes from Ubuntu.</i> <br><br>  Set the IP address on the tunnel interface on the side of MikroTik 192.168.10.2 <br><br><img src="https://habrastorage.org/webt/hj/xu/_t/hjxu_tw5c7df62uwfx3z_ndrgbu.png" alt="image"><br><br>  At this stage, we must climb the tunnel interfaces on both sides.  Check it out is easy.  It is enough to run ping c Ubuntu in the direction of MikroTik. <br><br><pre> <code class="bash hljs">$ ping 192.168.10.2 PING 192.168.10.2 (192.168.10.2) 56(84) bytes of data. 64 bytes from 192.168.10.2: icmp_seq=1 ttl=64 time=56.0 ms 64 bytes from 192.168.10.2: icmp_seq=2 ttl=64 time=59.9 ms 64 bytes from 192.168.10.2: icmp_seq=3 ttl=64 time=56.3 ms 64 bytes from 192.168.10.2: icmp_seq=4 ttl=64 time=56.1 ms --- 192.168.10.2 ping statistics --- 4 packets transmitted, 4 received, 0% packet loss, time 3004ms rtt min/avg/max/mdev = 56.091/57.137/59.936/1.618 ms user@vps:~$</code> </pre> <br>  <b>We configure routing in the direction of subscriber networks to the tunnel interface</b> <br><br>  Private IP addresses of the local network from which Internet access is provided - 192.168.1.0/24.  The network 192.168.6.0/24 is a network dedicated to connecting to MikroTik via L2TP from the ‚Äúoutside world‚Äù.  In order for local network computers and remote devices to work, we add routes to both networks at the end of the / etc / network / interfaces file <br><br><pre> <code class="bash hljs">$ sudo cat &lt;&lt; EOF &gt;&gt; /etc/network/interfaces <span class="hljs-comment"><span class="hljs-comment">#static route" up ip ro add 192.168.1.0/24 via 192.168.10.2 up ip ro add 192.168.6.0/24 via 192.168.10.2 EOF</span></span></code> </pre><br>  Once again we ask the system to update the network settings. <br><br><pre> <code class="bash hljs">$ sudo service networking restart</code> </pre> <br>  <b>Enable ip_forward</b> <br><br><pre> <code class="bash hljs">$ sudo <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"net.ipv4.ip_forward = 1"</span></span> &gt;&gt; /etc/sysctl.conf $ sudo sysctl -p</code> </pre> <br>  <b>We register SNAT.</b> <br>  For a static external IP, it should work faster than MASQUERADE due to the fact that you do not need to find out the interface IP address each time. <br><br><pre> <code class="bash hljs">$ sudo iptables -t nat -A POSTROUTING -j SNAT --to-source 80.211.xx -o eth0</code> </pre> <br>  <b>We insist routing on MikroTik</b> <br><br>  Since I do not have the task to ‚Äúdeploy‚Äù all traffic to the Internet through another country, I will only route resources that interest me to the tunnel interface.  I chose <a href="https://www.linkedin.com/">Linkedin</a> as such a resource. <br><br>  So, we add routes to MikroTik (via terminalku): <br><br><pre> <code class="dos hljs">/ip route add comment=linkedin distance=<span class="hljs-number"><span class="hljs-number">1</span></span> dst-address=<span class="hljs-number"><span class="hljs-number">91</span></span>.<span class="hljs-number"><span class="hljs-number">225</span></span>.<span class="hljs-number"><span class="hljs-number">248</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">22</span></span> gateway=gre-tunnel1 add comment=linkedin distance=<span class="hljs-number"><span class="hljs-number">1</span></span> dst-address=<span class="hljs-number"><span class="hljs-number">108</span></span>.<span class="hljs-number"><span class="hljs-number">174</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span> gateway=gre-tunnel1 add comment=linkedin distance=<span class="hljs-number"><span class="hljs-number">1</span></span> dst-address=<span class="hljs-number"><span class="hljs-number">185</span></span>.<span class="hljs-number"><span class="hljs-number">63</span></span>.<span class="hljs-number"><span class="hljs-number">144</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">22</span></span> gateway=gre-tunnel1</code> </pre><br>  At this point, the coveted resource began to open up at me, and this could be the end, because, despite the fact that GRE traffic is not encrypted and can be clearly seen in <a href="https://www.wireshark.org/">Wireshark</a> , not all providers have DPI traffic (and even DPI) Yat, then they don‚Äôt exactly look inside the tunnels to track the traffic from the forbidden resources), and the AIC ‚ÄúRevizor‚Äù is not interested in what traffic the subscribers actually consume. <br><br>  For further experiments, I was prompted by the fact that in the GRE settings of the MikroTik interface there is the <b>IPsec Secret</b> option.  Is it really that simple? <br><br><h1>  3. Encrypt the tunnel </h1><br>  As a coder on the Ubuntu side, I chose <a href="https://www.strongswan.org/">strongSwan</a> .  I took the configuration example from the <a href="http://blogv2-zombig.rhcloud.com/configure-gre-over-ipsec/">Configure GRE over IPSec secured private channel</a> material, but it did not work right away and I had to make some edits. <br><br>  <b>Install</b> <br><br><pre> <code class="bash hljs">$ apt install strongswan</code> </pre> <br>  <b>We enter this into the main strongSwan configuration file:</b> <br><br><pre> <code class="bash hljs">$ cat &lt;&lt; EOF &gt; /etc/ipsec.conf <span class="hljs-comment"><span class="hljs-comment"># ipsec.conf - strongSwan IPsec configuration file config setup charondebug="ike 2, knl 2, cfg 2, net 2, esp 2, dmn 2, mgr 2" conn %default # keyexchange=ikev2 conn mikrotik # Try connect on daemon start auto=start # Authentication by PSK (see ipsec.secret) authby=secret # Disable compression compress=no # Re-dial setings closeaction=clear dpddelay=30s dpdtimeout=150s dpdaction=restart # ESP Authentication settings (Phase 2) esp=aes128-sha1-modp2048,aes256-sha1-modp2048 # UDP redirects forceencaps=no # IKE Authentication and keyring settings (Phase 1) ike=aes128-sha1-modp2048,aes256-sha1-modp2048 ikelifetime=86400s keyingtries=%forever lifetime=3600s # Internet Key Exchange (IKE) version # Default: Charon - ikev2, Pluto: ikev1 keyexchange=ikev1 # connection type type=transport # Peers left=188.xxx right=80.211.xx # Protocol type. May not work in numeric then need set 'gre' leftprotoport=47 rightprotoport=47 EOF</span></span></code> </pre><br>  <b>Writing a pre-shared-key (PSK) in /etc/ipsec.secrets</b> <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"80.211.xx 188.xxx : PSK VeryBigSecret"</span></span> &gt;&gt; /etc/ipsec.secrets</code> </pre> <br>  <b>Restart strongSwan</b> <br><br><pre> <code class="bash hljs">$ ipsec restart</code> </pre> <br>  This completes the Ubuntu setup.  Getting down to setting up MikroTik. <br><br>  <b>I set up the following default proposal settings</b> <br><br><img src="https://habrastorage.org/web/ae9/fdd/776/ae9fdd776b2041d3aa4691db811a2d58.png"><br><br>  It is time to enter the same PSK in the <b>IPsec Secret</b> field that was specified in /etc/ipsec.secrets on the server (VeryBigSecret). <br><br>  If everything worked out, then we perform diagnostics at both ends of the tunnel. <br><br>  MikroTik <br><br><img src="https://habrastorage.org/web/2e2/2c3/c16/2e22c3c1650b401ca9f6e7aca8d9bf27.png"><br><br>  If you "fall through" deeper, it should be like this: <br><br><img src="https://habrastorage.org/web/74e/f23/6ba/74ef236ba2d946ddbb6643440ce27916.png"><br><br>  Ubuntu <br><br><pre> <code class="bash hljs">$ ipsec status Security Associations (1 up, 0 connecting): mikrotik[2]: ESTABLISHED 60 minutes ago, 80.211.xx[80.211.xx]...188.xxx[188.xxx] mikrotik{2}: INSTALLED, TRANSPORT, reqid 1, ESP SPIs: cc075de3_i 07620dfa_o mikrotik{2}: 80.211.xx/32[gre] === 188.xxx/32[gre]</code> </pre><br>  Now GRE (protocol 47) between MikroTik and Ubuntu is encrypted with IPsec (ESP).  An analysis of the pcap file taken by tcpdump confirmed this. <br><br><img src="https://habrastorage.org/web/5b7/5b8/df4/5b75b8df4df9490591e5534babed2bb0.png"><br><br>  It seems that everything works and the coveted resource opens.  However, after I sent several more resources to the tunnel, it turned out that not everything is as good as it seemed initially.  It was possible to find out that packets of large size ceased to pass (or rather, they ceased to be properly fragmented). <br><br>  The solution was found quickly.  It turned out that it is enough to reduce the MTU to 1435 at both ends of the tunnel. <br><br>  MikroTik <br><br><img src="https://habrastorage.org/web/742/e60/ba6/742e60ba62dc4d26be624535e86fb2e5.png"><br><br>  Ubuntu - add mtu 1435 to the interface description. <br><br><pre> <code class="bash hljs">auto tun1 iface tun1 inet static address 192.168.10.1 netmask 255.255.255.0 pre-up iptunnel add tun1 mode gre <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> 80.211.xx remote 188.xxx ttl 255 up ifconfig tun1 multicast pointopoint 192.168.10.2 mtu 1435 post-down iptunnel del tun1</code> </pre><br>  Diagnosing an IPsec connection is not trivial.  Logs are much easier to read on Ubuntu than on MikroTik.  By default, IPsec logging is disabled on MikroTik.  It turns on simply, but it is easier to analyze through terminalku. <br><br>  I managed to achieve a download speed of 25 Mbps and a return of 50 Mbps.  In my opinion, this is quite enough for comfortable work with the resource.  Why does not accelerate more - this is still a mystery.  CPU utilization at both ends of the tunnel is not high.  The basic version is the speed limit on the cloud side.  Somehow at leisure I chase files between servers without encryption. <br><br>  <b>UPD 1: iptables settings</b> <br><br>  Install the netfilter-persistent package <br><br><pre> <code class="bash hljs">$ sudo apt install netfilter-persistent</code> </pre> <br>  I wrote the rules with commands, and then wrote them down in /etc/iptables/rules.v4 with the command iptables-save&gt; /etc/iptables/rules.v4 <br><br>  In the end, I got this set: <br><br><pre> <code class="bash hljs">$ cat /etc/iptables/rules.v4 <span class="hljs-comment"><span class="hljs-comment"># Generated by iptables-save v1.6.0 on Thu Sep 14 20:36:19 2017 *nat :PREROUTING ACCEPT [17:3042] :INPUT ACCEPT [2:92] :OUTPUT ACCEPT [0:0] :POSTROUTING ACCEPT [0:0] -A POSTROUTING -o eth0 -j SNAT --to-source 80.211.xx COMMIT # Completed on Thu Sep 14 20:36:19 2017 # Generated by iptables-save v1.6.0 on Thu Sep 14 20:36:19 2017 *filter :INPUT DROP [29:4527] :FORWARD DROP [0:0] :OUTPUT ACCEPT [0:0] -A INPUT -i lo -j ACCEPT -A INPUT -p icmp -j ACCEPT # TCP/4022 -     ssh (   ,    port-scan-) # !!!  ssh   ,       -A INPUT -p tcp -m tcp --dport 4022 -j ACCEPT -A INPUT -p udp -m udp --dport 500 -j ACCEPT -A INPUT -p gre -j ACCEPT -A INPUT -p esp -j ACCEPT # Forwarding -A FORWARD -j ACCEPT COMMIT # Completed on Thu Sep 14 20:36:19 2017</span></span></code> </pre><br>  In /etc/rc.local, I added activation of the rules at the start of the machine (I haven‚Äôt yet succeeded in doing this in another way). <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"iptables-restore &lt; /etc/iptables/rules.v4"</span></span> &gt;&gt; /etc/rc.local</code> </pre> <br>  After rebooting the server, we check that all the rules are in place. <br><br><pre> <code class="bash hljs">$ iptables -L -n -v Chain INPUT (policy DROP 185 packets, 28847 bytes) pkts bytes target prot opt <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> out <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> destination 4 344 ACCEPT all -- lo * 0.0.0.0/0 0.0.0.0/0 32 896 ACCEPT icmp -- * * 0.0.0.0/0 0.0.0.0/0 948 66063 ACCEPT tcp -- * * 0.0.0.0/0 0.0.0.0/0 tcp dpt:3022 172 21504 ACCEPT udp -- * * 0.0.0.0/0 0.0.0.0/0 udp dpt:500 2864 454K ACCEPT 47 -- * * 0.0.0.0/0 0.0.0.0/0 2864 582K ACCEPT esp -- * * 0.0.0.0/0 0.0.0.0/0 Chain FORWARD (policy DROP 0 packets, 0 bytes) pkts bytes target prot opt <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> out <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> destination 4572 3303K ACCEPT all -- * * 0.0.0.0/0 0.0.0.0/0 Chain OUTPUT (policy ACCEPT 1820 packets, 2974K bytes) pkts bytes target prot opt <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> out <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> destination 4797 6544K ACCEPT all -- * * 0.0.0.0/0 0.0.0.0/0 state RELATED,ESTABLISHED</code> </pre><br><br>  <b>UPD 2: I recommend disabling MikroTik Neighbor discovery</b> on the gre-tunnel1 interface. <br>  If this is not done, then with the above iptables settings, packets on UDP / 5678 will be dropped. <br><br><pre> <code class="bash hljs">Sep 15 19:25:33 vps kernel: [42049.805599] IN=tun1 OUT= MAC= SRC=192.168.10.2 DST=255.255.255.255 LEN=133 TOS=0x00 PREC=0x00 TTL=64 ID=0 DF PROTO=UDP SPT=36233 DPT=5678 LEN=113</code> </pre> <br>  <i>PS: Plans to configure IKEv2 tunnel from my devices (I use Apple technology) directly to the server using certificates.</i>  <i>So far I have not managed to do it.</i>  <i>Apple devices for some reason do not respond to requests to establish a secure connection from the server.</i>  <i>You can, of course, make L2tp, but this is no longer interesting: I already had that experience.</i> </div><p>Source: <a href="https://habr.com/ru/post/337426/">https://habr.com/ru/post/337426/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../337412/index.html">Do you need SMS marketing?</a></li>
<li><a href="../337416/index.html">The economics of tokens: why are ICOs so popular?</a></li>
<li><a href="../337418/index.html">Machine learning in RapidMiner</a></li>
<li><a href="../337420/index.html">AsyncIO for practicing python developer</a></li>
<li><a href="../337424/index.html">VK by design</a></li>
<li><a href="../337428/index.html">"Siege affairs": How companies build a solid fortress to protect the clouds</a></li>
<li><a href="../337430/index.html">Multitasking Arduin: pain-free timers</a></li>
<li><a href="../337436/index.html">Bitcoin farm and android miner app</a></li>
<li><a href="../337438/index.html">‚ÄúAs per the notes!‚Äù Or Machine Learning (Data science) in C # using Accord.NET Framework</a></li>
<li><a href="../337440/index.html">Boat in the anthill</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Python Sockets for Beginners</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 Back in 2010, I wrote an article for beginners about sockets in Python. Now this blog has sunk into oblivion, but the article seemed to me ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Python Sockets for Beginners</h1><div class="post__text post__text-html js-mediator-article"><h4>  Foreword </h4><br>  Back in 2010, I wrote an article for beginners about sockets in Python.  Now this blog has sunk into oblivion, but the article seemed to me quite useful.  I found the article on a flash drive in a librovsk document, so this is not a cross-post, not a copy-paste - it is nowhere on the Internet. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/812/cc5/493/812cc5493ecb5b91c0f59c317a48d6cd.jpg"><br><br><h4>  What is it </h4><br>  First you need to figure out what are all sockets, and why we need them.  As the wiki says, a socket is a software interface for providing information exchange between processes.  But it is much more important not to memorize the definition, but to understand the essence.  Therefore, I will try here to tell everything as much as possible and easier. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There are client and server sockets.  It is quite easy to guess what's what.  The server socket listens on a specific port, and the client socket connects to the server.  After the connection has been established, data exchange begins. <br><br><a name="habracut"></a><br>  Consider this with a simple example.  Imagine a large room with many small windows, behind which are the girls.  There are also empty windows, behind which there is no one.  Those windows are ports.  Where the girl stands is an open port, behind which stands some kind of application that listens to it.  That is, if you go to the window with the number 9090, then you will be greeted and asked how they can help.  So it is with sockets.  An application is created that listens on its port.  When a client establishes a connection with a server on this port, this particular application will be responsible for the operation of this client.  You do not go to one window, and you will scream from the next :) <br><br>  After a successful connection, the server and the client begin to exchange information.  For example, the server sends a greeting and a suggestion to enter a command.  The client, in turn, enters the command, the server analyzes it, performs the necessary operations and gives the result to the client. <br><br><h4>  Server </h4><br>  Now create two files - one for the server and the other for the client. <br><br>  In Python, the socket module is used to work with sockets: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> socket</code> </pre> <br><br>  First of all, we need to create a socket: <br><br><pre> <code class="python hljs">sock = socket.socket()</code> </pre><br><br>  There is nothing special here and this part is common for both client and server sockets.  Next we will write the code for the server.  This is quite logical - why do we need to write a client application, if there is no place to connect :) <br><br>  Now we need to determine the host and port for our server.  As for the host, we will leave the line empty so that our server is accessible to all interfaces.  And we will take any port from zero to 65535. It should be noted that in most operating systems, listening to ports with numbers 0-1023 requires special privileges.  I chose port 9090. Now, we associate our socket with the given host and port using the bind method, to which the tuple is transmitted, the first element (or zero if you count from zero) of which is the host, and the second is the port: <br><br><pre> <code class="python hljs">sock.bind((<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">9090</span></span>))</code> </pre><br><br>  Now we have everything ready to accept connections.  Using the listen method, we will launch a listening mode for this socket.  The method takes one argument - the maximum number of connections in the queue.  Stress our violent fantasy and remember about the hall with windows.  So this parameter determines the size of the queue.  If it is installed in the unit, and someone, obviously superfluous, is still trying to adjust to it from behind, then it will be sent :) Install it in the unit: <br><br><pre> <code class="python hljs">sock.listen(<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br><br>  Well, finally, we can accept the connection using the accept method, which returns a tuple with two elements: a new socket and the client's address.  It is this socket that will be used to receive and send data to the client. <br><br><pre> <code class="python hljs">conn, addr = sock.accept()</code> </pre><br><br>  That's all.  Now we have established a connection with the client and can ‚Äúcommunicate‚Äù with it.  Because  we can‚Äôt know exactly what the client will send us and in what amounts, then we will receive data from him in small portions.  To get the data you need to use the recv method, which takes as the argument the number of bytes to read.  We will read portions of 1024 bytes (or 1 KB): <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: data = conn.recv(<span class="hljs-number"><span class="hljs-number">1024</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> data: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> conn.send(data.upper())</code> </pre><br><br>  As we said to communicate with the client, we use the socket that we received as a result of the accept method.  In an infinite loop, we receive 1024 bytes of data using the recv method.  If there is no more data, then this method returns nothing.  Thus, we can receive any amount of data from the client. <br><br>  Further in our example, for clarity, we will do something with the received data and send them back to the client.  For example, using the upper method on strings, we return a string to the client in uppercase. <br><br>  Now you can close the connection: <br><br><pre> <code class="python hljs">conn.close()</code> </pre><br><br>  Actually the server is ready.  It accepts the connection, accepts data from the client, returns it as a string in upper case, and closes the connection.  It's simple :) In the end, you should have the following: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env python # -*- coding: utf-8 -*- import socket sock = socket.socket() sock.bind(('', 9090)) sock.listen(1) conn, addr = sock.accept() print 'connected:', addr while True: data = conn.recv(1024) if not data: break conn.send(data.upper()) conn.close()</span></span></code> </pre><br><br><h4>  Customer </h4><br>  I think it will be easier now.  And the client application itself is simpler - we need to create a socket, connect to the server, send data to it, accept data and close the connection.  All this is done like this: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env python # -*- coding: utf-8 -*- import socket sock = socket.socket() sock.connect(('localhost', 9090)) sock.send('hello, world!') data = sock.recv(1024) sock.close() print data</span></span></code> </pre><br><br>  I think that everything is clear, because  everything has already been analyzed before.  The only new thing here is the connect method, with which we connect to the server.  Next we read 1024 bytes of data and close the socket. </div><p>Source: <a href="https://habr.com/ru/post/149077/">https://habr.com/ru/post/149077/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149068/index.html">Siemens SGold: Hacking Through Java</a></li>
<li><a href="../149071/index.html">Create a game on SFML</a></li>
<li><a href="../149074/index.html">How it's made for programmers. Series number 2</a></li>
<li><a href="../149075/index.html">We type in LilyPond using midi-keyboard</a></li>
<li><a href="../149076/index.html">Parse the consequences of hacking MS-CHAPv2 for Wi-Fi (WPA / WPA2-Enterprise)</a></li>
<li><a href="../149080/index.html">Facebook admitted that 83 million user accounts are fake</a></li>
<li><a href="../149081/index.html">Unusual XSS vulnerabilities</a></li>
<li><a href="../149082/index.html">Free JavaScript Books</a></li>
<li><a href="../149085/index.html">One of the methods of working with configuration files in C ++ (Qt)</a></li>
<li><a href="../149086/index.html">Pure and deterministic functions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
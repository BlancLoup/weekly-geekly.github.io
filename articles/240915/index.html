<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We are preparing Debian to transfer the clock October 26, 2014</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is approaching October 26, 2014 - the day when at 2 am in most regions of Russia, the next time (and as promised again last), the watch will be set...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We are preparing Debian to transfer the clock October 26, 2014</h1><div class="post__text post__text-html js-mediator-article"> It is approaching October 26, 2014 - the day when at 2 am in most regions of Russia, the next time (and as promised again last), the watch will be set back one hour.  In addition, in some regions there is a change of time zone.  You can get acquainted in detail where and what changes are possible in the <a href="http://pravo.gov.ru:8080/page.aspx%3F111660">Federal Law of 21.07.2014 No. 248- ‚ÄúOn Amendments to the Federal Law‚Äú On the Calculation of Time ‚Äù</a> . <br><br>  In this post I want to focus on the issue of bringing up to date the data on time zones in Debian. <br><a name="habracut"></a><br>  Debian uses the <a href="https://ru.wikipedia.org/wiki/Tz_database">timezone database</a> (short name tzdata) to store information about all time zones in the world.  This database contains complete data on all changes in time zones that occurred in the world for one reason or another, which allows you to conduct accurate local time calculations at any time starting from January 1, 1970.  In particular, the current version of tzdata allows you to get the exact local time both in the period before the entry into force of Federal Law No. 248-, and after (starting from 2 am on October 26, 2014).  In Debian, the tzdata database is distributed as a package of the same name. <br><br>  The changes introduced by Federal Law No. 248- are reflected in the tzdata database starting from version 2014f.  As of October 18, 2014 in the official Debian repositories for <s>Wheezy (stable)</s> and Squeeze (oldstable), the tzdata package has an earlier version 2014e, which does not yet have hours on October 26, 2014 in Russia.  At the same time, for Jessi (testing) <i>(Update1: from 10/19/2014 and for Wheezy (Stable)</i> , the current version 2014h has already been posted. Thus, in <s>Wheezy</s> and Squueze, to calculate the time after October 26, you will need to install the package yourself simply: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code><a href=""></a> wget ftp.ru.debian.org/debian/pool/main/t/tzdata/tzdata_2014h-2_all.deb <br></code> <br> <code>dpkg -i tzdata_2014h-2_all.deb <br></code> <br><br>  After that, an updated version of tzdata will be installed on the system, however, in order to start using services already running on the system (in particular, syslog), you will need to restart them. <br><br>  I will also give an example of a simple script that will allow you to verify that the correct time zone database is used on your system.  The <code>tzdata.sh</code> script performs a check for the Moscow time zone: <br><br> <code>tzcheck.sh:</code> <br> <pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh T1=$(LC_ALL=C TZ=Europe/Moscow date -d @1409067890) if [ "$T1" != 'Tue Aug 26 19:44:50 MSK 2014' ] ; then echo FAIL! Wrong TZ BEFORE 26 Oct 2014! exit 1 fi T2=$(LC_ALL=C TZ=Europe/Moscow date -d @1416667890) if [ "$T2" != 'Sat Nov 22 17:51:30 MSK 2014' ] ; then echo FAIL! Wrong TZ AFTER 26 Oct 2014! exit 2 fi echo OK</span></span></code> </pre><br><br>  If everything is OK, <code>OK</code> will be displayed. <br><br>  If Java is installed on your system, then updating the tzdata package will not work.  Both OpenJDK and Sun / Oracle Java use their own, separate from system-wide, time zone databases.  They also need to be updated. <br><br>  In the case of OpenJDK, the base is the tzdata-java package, which has the same version numbers as the tzdata package.  Update it just by analogy: <br><br> <code><a href=""></a> wget ftp.ru.debian.org/debian/pool/main/t/tzdata/tzdata-java_2014h-2_all.deb</code> <br> <code>dpkg -i tzdata-java_2014h-2_all.deb</code> <br> <br>  In the case of Java, Sun / Oracle will need to use the special <a href="http://www.oracle.com/us/technologies/java/tzupdater-readme-136440.html">Java Time Zone Updater Tool</a> , <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">downloading</a> it from the Oracle website.  To update the time zone database, you will need to run it with the -u key <br><br> <code>java -jar tzupdater.jar -u</code> <br> <br>  Please note that if you have ever downloaded this utility before, you cannot use this old version - it will not update anything.  With each update of the time zone database, Oracle releases a new version of this utility, to get the most current database, you need to use the current version. <br><br>  As with regular services, already running Java applications may require a restart in order for them to start using the updated version of the time zone database. <br><br>  Below is a sample Java code that will allow you to check for the Moscow time zone, that you are fine with Java time calculus: <br><br> <code>tzcheck.java:</code> <br> <pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.text.DateFormat; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tzcheck</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ Calendar cal = Calendar.getInstance(TimeZone.getTimeZone(<span class="hljs-string"><span class="hljs-string">"Europe/Moscow"</span></span>)); DateFormat df = DateFormat.getDateTimeInstance(DateFormat.FULL, DateFormat.FULL, Locale.US); df.setCalendar(cal); cal.setTimeInMillis(<span class="hljs-number"><span class="hljs-number">1409067890L</span></span> * <span class="hljs-number"><span class="hljs-number">1000L</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!df.format(cal.getTime()).equals(<span class="hljs-string"><span class="hljs-string">"Tuesday, August 26, 2014 7:44:50 PM MSK"</span></span>)) { System.out.println(<span class="hljs-string"><span class="hljs-string">"FAIL! Wrong TZ BEFORE 26 Oct 2014!"</span></span>); System.exit(<span class="hljs-number"><span class="hljs-number">1</span></span>); } cal.setTimeInMillis(<span class="hljs-number"><span class="hljs-number">1416667890L</span></span> * <span class="hljs-number"><span class="hljs-number">1000L</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!df.format(cal.getTime()).equals(<span class="hljs-string"><span class="hljs-string">"Saturday, November 22, 2014 5:51:30 PM MSK"</span></span>)) { System.out.println(<span class="hljs-string"><span class="hljs-string">"FAIL! Wrong TZ AFTER 26 Oct 2014!"</span></span>); System.exit(<span class="hljs-number"><span class="hljs-number">2</span></span>); } System.out.println(<span class="hljs-string"><span class="hljs-string">"OK"</span></span>); System.exit(<span class="hljs-number"><span class="hljs-number">0</span></span>); } }</code> </pre><br>  Compile and run: <br><br> <code>javac tzcheck.java</code> <br> <code>java tzcheck</code> <br> <br>  If everything is OK, <code>OK</code> will be displayed. <br><br>  <b>Update1: At the weekend, while the post was moderated for Wheezy, a regular package was released with the current tzdata + version 2014h-2 released, the links changed in the text.</b> </div><p>Source: <a href="https://habr.com/ru/post/240915/">https://habr.com/ru/post/240915/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../240903/index.html">From idea to business - or go with the flow</a></li>
<li><a href="../240907/index.html">Blend4Web, an open platform for creating three-dimensional web applications</a></li>
<li><a href="../240909/index.html">Symfony2 Step Form with SyliusFlowBundle</a></li>
<li><a href="../240911/index.html">Missing maps: as a human genome decoding project, only for cities</a></li>
<li><a href="../240913/index.html">Virtual networks: VXLAN and VMware NSX</a></li>
<li><a href="../240917/index.html">Go language: rehabilitation of imperative programming</a></li>
<li><a href="../240919/index.html">Project management tools and methodology on the example of a startup pivot</a></li>
<li><a href="../240921/index.html">Verve 2: an electronic designer of smart devices for beginners + the opportunity to learn the basics of electronics</a></li>
<li><a href="../240923/index.html">Features of the reflection of DDoS attacks and the history of attacks on one large bank</a></li>
<li><a href="../240927/index.html">Update 3! A series of 24 laboratory work on the development, testing and lifecycle management software for Visual Studio 2013</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
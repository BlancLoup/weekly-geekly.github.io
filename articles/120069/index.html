<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Scaling the map, labeling and displaying the route without using javascript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once, I got excited about the idea of ‚Äã‚Äãcreating a tool for viewing a route on a map of my city without using javascript. There were even arguments in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Scaling the map, labeling and displaying the route without using javascript</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="http://hostingkartinok.com/image/01201105/44111f33e6949a5dbbe380453bd833aa.jpg" alt="image">  Once, I got excited about the idea of ‚Äã‚Äãcreating a tool for viewing a route on a map of my city without using javascript.  There were even arguments in favor of this.  For example, the use of their image maps. <br>  <b>UPD:</b> There are analogues in popular services with their maps (at the time of creation I did not yet know about them): <br><ul><li>  Google - <a href="http://code.google.com/apis/maps/documentation/staticmaps/">code.google.com/apis/maps/documentation/staticmaps</a> </li><li>  OSM - <a href="http://tah.openstreetmap.org/Browse/tile/5/16/8/">tah.openstreetmap.org/Browse/tile/5/16/8</a> is a mobile version.  You can view and scale, but you can‚Äôt set your markers. </li><li>  Yandex.Maps - <a href="http://api.yandex.ru/maps/staticapi/examples/">api.yandex.ru/maps/staticapi/examples</a> </li></ul><br>  <i>Thanks for the links to commenting.</i> <br>  But we make our own. <br><a name="habracut"></a><br><br>  It turned out a tool that allows you to choose any image as a map on which markers will be applied.  It is only necessary to specify in the settings the geographical coordinates of its corner points.  I used the OSM data, namely the loader: <br><img src="http://hostingkartinok.com/image/01201105/b42879c6b267fb4a2e0edfe451299f7b.jpg" alt="image"><br>  These coordinates are specified in the config.php variable, starting with the left counterclockwise <br><pre><code class="php hljs">$box_str = <span class="hljs-number"><span class="hljs-number">86.05627</span></span>,<span class="hljs-number"><span class="hljs-number">55.33832</span></span>,<span class="hljs-number"><span class="hljs-number">86.1076</span></span>,<span class="hljs-number"><span class="hljs-number">55.36035</span></span>; <span class="hljs-comment"><span class="hljs-comment">//ldru (    )</span></span></code> </pre> <br>  The exported image in png format is placed to the root and its name is specified in the settings. <br><pre> <code class="php hljs">$source_file = <span class="hljs-string"><span class="hljs-string">"bigmap.png"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//,   </span></span></code> </pre> <br>  We will cut the received big map into parts.  The number of parts in each direction is set in the same settings <br><pre> <code class="php hljs">$x_count_parts = <span class="hljs-number"><span class="hljs-number">20</span></span>; $y_count_parts = <span class="hljs-number"><span class="hljs-number">16</span></span>;</code> </pre><br>  I didn‚Äôt want to experiment with speed with a different number of points to display and a different size of the original map. <br><br><h5>  Label overlay </h5><br>  Show.php is connected with index.php, the result of which is the display of a drawn map made up of several parts.  The parts that have a marker on themselves are drawn using the file picture.php, the rest are simple output <br>  The coordinates of all labels for output are transmitted by a GET request, for example: <br> <code>points=86.0735,55.3529;86.0765,55.3519;86.0963,55.3519</code> <br>  Here, a marker is separated by a dot with each marker, and a comma is separated by two coordinates of each marker.  If the variable is not set, then for the demonstration, (86.0995, 55.3619), (86.0765, 55.3629), (86.0765, 55.3529) are drawn. <br>  By default, the scale is adjusted in such a way that a square containing all received coordinates of markers falls on the output. <br><img src="http://hostingkartinok.com/image/01201105/9a8198bcb296c4404eaf11cc08406904.jpg" alt="image"><br>  Optionally, you can connect draw_area.php, the purpose of which is to increase the display area by a certain radius from the previously defined square.  Zoom factors are customizable. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Management tools </h5><br><img align="left" src="http://hostingkartinok.com/image/01201105/1b170f81d6f5a05afb361e06be9cdd48.jpg" alt="image"><br>  Optionally connects controls.php.  Upon completion of its operation, the $ controls variable contains an html-tex that draws tools with links.  Actions are a shift to the left, right, up and down on the map. <br>  Scale management: <br><ul><li>  o - reset scale </li><li>  - - move away (increase the plot area) </li><li>  + - bring closer.  Here it was planned to replace the pictures using parts from a more detailed image.  But my fervor here was interrupted by something and I did not do that. </li></ul><br>  You can blame me for not separating the presentation from the main code here, but I thought that for this tiny fragmentary it is irrational to connect a separate template. <br><br><h5>  Drawing a fragment containing a marker </h5><br><img align="left" src="http://hostingkartinok.com/image/01201105/9074edfa0acfe87e25df3bfde6395eec.png" alt="image"><br>  This action takes place in picture.php.  The marker itself looks like a red square, the width and color of which is configured in config.php. <br>  The following variables are passed to the script by a GET request: <br><ul><li>  points - the same coordinates of the points that fell into this fragment. </li><li>  curxp - coordinate in width, showing the fragment number from left to right </li><li>  curyp - coordinate in height, showing the fragment number from top to bottom </li><li>  order is the tag number.  Increased by one is drawn next to the marker.  It can be used for color management.  For example, to distinguish the beginning of the movement from the end, without numbers </li></ul><br>  This is where the flaw immediately manifests itself: when the marker is located at the boundary of the fragment, it does not appear.  But this can be avoided by providing small indents. <br><br><h5>  Purpose </h5><br>  It was planned to receive from the mobile phone an image of the route in the last 30-60 minutes.  The server for accepting data from the GPS tracker has been configured and tested.  Data was successfully transferred and displayed in the build tool.  The same data could easily be selected from mysql tables by any criteria.  The need to track this route was no longer faster than expected, and the project was still interesting to me.  Brought him to some degree of readiness and abandoned, switching to other things. <br><br>  <a href="http://rnix.dyndns.org/nojsmap/">In action</a> <br>  <a href="http://rghost.ru/8073291">http://rghost.ru/8073291 - source</a> <br>  <i>Forgive me for free hosting.</i> </div><p>Source: <a href="https://habr.com/ru/post/120069/">https://habr.com/ru/post/120069/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../120059/index.html">Linux Mint 11 Katya released</a></li>
<li><a href="../120063/index.html">Branches in svn</a></li>
<li><a href="../120064/index.html">Non-standard ways to increase sales in the online store</a></li>
<li><a href="../120066/index.html">Scientists hypothesize that time does not exist</a></li>
<li><a href="../120067/index.html">How to predict the outcome of events using the Internet or who will win the Champions League final</a></li>
<li><a href="../120070/index.html">Post-industrial society: values, family, morality and law</a></li>
<li><a href="../120071/index.html">Interesting visualization of people's livelihoods</a></li>
<li><a href="../120072/index.html">The myth of high power android-communicator</a></li>
<li><a href="../120073/index.html">The contribution of the Internet to the global economy (McKinsey Report)</a></li>
<li><a href="../120074/index.html">jQuery UI as plugin framework</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
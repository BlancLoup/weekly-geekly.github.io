<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Auto watering colors with remote control</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we will talk about home automation, it's nice because relaxing somewhere in a warm and beautiful place to watch how your flowers are watered. Th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Auto watering colors with remote control</h1><div class="post__text post__text-html js-mediator-article">  Today we will talk about home automation, it's nice because relaxing somewhere in a warm and beautiful place to watch how your flowers are watered.  This is the second system in my apartment, the first watering pets, and in this one I have already corrected all the shortcomings of the <a href="https://www.youtube.com/watch%3Fv%3DgaQLi_xCj6U%26t">first iteration</a> . <br><br><img src="https://habrastorage.org/webt/i2/ck/zp/i2ckzpkmhikydm8m9zbryjhimti.jpeg" alt="image"><br><br><h3>  Concept </h3><br>  When designing the system, I was repelled by the following principles: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  Cheap and angry - I do not want to spend a lot of money on a system that waters 15 inexpensive flowers.  I do not have a greenhouse. </li><li>  Autonomy - it should work on its own schedule, but this does not exclude the presence of manual control. </li><li>  Convenience - setting watering occurs using a smartphone.  Sockets is convenient, but not in this case. </li><li>  Flexibility - the flowers are mostly all different with different pots, so they need to be watered with different frequency and different amounts of water. </li><li>  Remoteness - you can control from anywhere in the world where there is Internet and a smartphone. </li></ol><a name="habracut"></a><br><h3>  Implementation </h3><br>  As enclosures I used my own models printed on a 3D printer.  Since the WiFi module is powered by 5 volts, and the valve and the pump are from 12, I took the PSU from the Chinese LED backlight driver (they sell without a case, used) for 12V and 2.5A.  I used this solution in many of my products: I buy the cheapest plug, pull out knives from there and put them in my printed case. <br><br><img src="https://habrastorage.org/webt/eu/6z/is/eu6zis6hnw57vqxtihzi15xtxge.jpeg" alt="image"><br><br>  PVC canister is used as a container, in my case it is orange, because it had fire protection.  The level in the tank is controlled only by the minimum; this is realized with the help of a neodymium magnet and a reed switch.  The reed switch is glued to the bottom of the canister, and the magnet glued to the float is moved along a plastic segment tube. <br><br><img src="https://habrastorage.org/webt/jo/r_/gm/jor_gmn-bjukt-ze-ht4xh1qq5y.jpeg" alt="image"><br><br><img src="https://habrastorage.org/webt/nt/p1/7k/ntp17kty57cfton6irsnarecd64.jpeg" alt="image"><br><br>  I use diaphragm pumps, they are convenient because there is no need to fill the circuit with water.  The only inconvenience in these pumps are flanges, they are too large in diameter relative to those irrigation systems that can be purchased in China.  Still have questions about the resource of these pumps, but they work 1-2 minutes a week.  In the photo below, I used a silicone hose, but later I had to give it up, because I had to change the valve as well.  The pump consumes about 120mA. <br><br><img src="https://habrastorage.org/webt/ru/ws/rv/ruwsrvwkj4ondfzxmzsvrgbzot8.jpeg" alt="image"><br><br>  The valve initially wanted to use such, but as it turned out, each consumes about 3.5A, so they had to be abandoned. <br><br><img src="https://habrastorage.org/webt/pj/s6/5f/pjs65fdjbkcdqjzobdzgae0p4xy.jpeg" alt="image"><br><br>  As a result, the valves were taken the same as in the past project.  They are smaller and have proven themselves, the consumption of the order of 80mA. <br><br><img src="https://habrastorage.org/webt/th/ac/jl/thacjl43djhauzac6hulowv4kmi.jpeg" alt="image"><br><br>  As the governing body was to take the Chinese Wemos D1 mini.  The scheme is trivial, so I did not even draw it, immediately in the sprint and textolite.  I didn‚Äôt immediately grow together with breadboard boards, so I try to do everything with boards, it's more aesthetic and easier to debug. <br><br><img src="https://habrastorage.org/webt/ia/uh/2k/iauh2k2vkxo40pvqlborqtudize.jpeg" alt="image"><br><br>  The level presses one of the legs of the controller to + power, the pump and valves are controlled by assembling darlingtons ULN2003.  To power the controller, I used the LM317 stabilizer - this was a so-so solution, the stabilizer heats up, glued the radiator on hot melt glue. <br><br><img src="https://habrastorage.org/webt/t1/kq/we/t1kqwexqn9kowzhyx1r7rv08azg.jpeg" alt="image"><br><br>  As a result, it turned out that all of this is in the corner of the kitchen, so there is neither red buildings nor orange canisters visible there. <br><br><img src="https://habrastorage.org/webt/db/ec/d5/dbecd5gdwgkgbf3ybu3x-eg_rkw.jpeg" alt="image"><br><br>  PVC hoses, although they stand out against the background of white plastic windows, I like more than transparent silicone. <br><br><img src="https://habrastorage.org/webt/qt/3h/r2/qt3hr2p5orm_cynmyzbki_pwl1o.jpeg" alt="image"><br><br><h3>  Customization </h3><br>  At the first stage it is necessary to divide the flowers into several groups, in my case 3. This allows you to more flexibly adjust the watering.  Next, you need using the drip nozzle to adjust the required water level, the difficulty is that all the nozzles are connected by bus, and setting one sometimes significantly affects the others.  The amount of water supplied to the hose is governed by the pump operation time in seconds. <br><br><h3>  Soft </h3><br>  In order for everything to work, I used the NTP Client + MQTT combination, the first one allows, when it is turned on, to get the exact time from the server and then synchronize it once a week, and the second to manage the irrigation process, set up and get the controller status.  If there is a VPN server in the apartment, you can connect to your home network from anywhere and see the state of the system.  All irrigation parameters are saved in the EEPROM. <br><br>  A small overview video: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/uGQc96aXwl4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <a href="https://drive.google.com/drive/folders/1eCeLjEZIc2l1JaY2gKRl6ZEohA25hdmq%3Fusp%3Dsharing">Link to resources</a> </div><p>Source: <a href="https://habr.com/ru/post/455826/">https://habr.com/ru/post/455826/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../455808/index.html">Submission of auto-requests on the FTS website in USR on python</a></li>
<li><a href="../455812/index.html">Building a microservice architecture on Golang and gRPC, part 2 (docker)</a></li>
<li><a href="../455816/index.html">How to create a cool action for Google Assistant. Just AI's life hacking</a></li>
<li><a href="../45582/index.html">Another testing of 5 browsers from extremetech.com</a></li>
<li><a href="../455820/index.html">VM performance analysis in VMware vSphere. Part 2: Memory</a></li>
<li><a href="../455828/index.html">Scientists have discovered new exotic forms of synchronization</a></li>
<li><a href="../45583/index.html">O'Reilly about keeping tempting profits in the Clouds with a translator afterword</a></li>
<li><a href="../455830/index.html">A look at Go through the eyes of a .NET developer. Week # 1</a></li>
<li><a href="../455832/index.html">The story of a single SQL investigation</a></li>
<li><a href="../455834/index.html">Benchmarks for Linux servers: 5 open tools</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
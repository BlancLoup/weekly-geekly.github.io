<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to fix a ‚Äúbroken‚Äù VDS server on Windows</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Our contest "Admin 80 level" has ended. The task of the participants was to fix the "broken" VDS server. Congratulations to our winners. The main priz...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to fix a ‚Äúbroken‚Äù VDS server on Windows</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/f45/a41/36e/f45a4136e47946c0b7c7c67b6ab78873.png"><br><br>  Our <a href="https://habrahabr.ru/company/ruvds/blog/281487/">contest</a> "Admin 80 level" has ended.  The task of the participants was to fix the "broken" VDS server.  Congratulations to our winners.  The main prize goes to Saratov, Mikhail Goch.  The winner coped with the task in less than 2 hours, an excellent result. <br>  All contestants who do not win prizes will receive a 10% discount for using <a href="https://ruvds.com/">VDS</a> servers from <a href="https://ruvds.com/">RUVDS</a> for life.  You will be sent a personal notice to the e-mail specified during registration in the competition. <br><br>  We spread the solution. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, let's begin! <br>  We try to connect to the server in the standard way via RDP-client.  Does not exceed.  Perhaps this is one of the ideas of the competition? <br>  Connect through emergency mode in your account.  Connect! <br><br>  We notice that the administrator's avatar is not loaded, so, most likely, non-gui mode is used. <br>  Enter your credentials.  Before us is a dark screen.  Usually, in non-gui mode, cmd.exe is immediately opened, but at the moment the utility is for some reason not running. <br>  Probably, the current user does not have permission to run it or the executable file itself is missing. <a name="habracut"></a><br><br>  Send the command ctrl + alt + del by clicking on the button and open the Task manager.  We need to somehow run the command line interpreter. <br>  File&gt; New Task ... just suitable for this purpose.  We try to give the necessary rights for the cmd.exe file, for this we execute the command: <br>  cacls "c: \ windows \ system32 \ cmd.exe" / G Administrator: R (use cacls, since launching icacls under the current user is prohibited) <br><br>  Now we try to run cmd.exe through the New task ... It turned out! <br>  Next, we need to install the system components that are required to run the operating system in GUI mode. <br>  We carry out: <br>  cacls "C: \ Windows \ System32 \ WindowsPowerShell \ v1.0 \ powershell.exe" / G Administrator: R <br><br>  Then run powershell and execute the command: <br>  Add-WindowsFeature Server-Gui-Shell, Server-Gui-Mgmt-Infra <br><br>  We are waiting for the installation to complete, rebooting.  Now we are in the usual GUI mode, so much more convenient! <br>  We notice that the rule allowing incoming connections to port 3389 is disabled. This is what prevented us from connecting to our server via RDP.  Turn on and connect through RDP. <br>  Install the IIS Manager and open it. <br><br>  Go to the Application Pools section and see that the ruvds contest pool is disabled.  Turn on ... <br>  Next, go to the root directory of the site and open the file web.config. <br><br>  It contains the following: <br><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">system.webServer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">security</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">requestFiltering</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbs</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">allowUnlisted</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">verb</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">allowed</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verbs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">requestFiltering</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">security</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">staticContent</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">remove</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".png"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">staticContent</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">defaultDocument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">enabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">system.webServer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">verb</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">allowed</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--        http GET- --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">remove</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".png"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--        *.png --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">defaultDocument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">enabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- -       --&gt;</span></span></code> </pre> <br>  We conclude that we should get rid of this file as soon as possible. <br>  Delete ... <br><br>  It seems that everything is ready ... We try to open the address <a href="https://your_vps_ip/">YOUR_VPS_IP</a> .  Unable to establish connection.  It looks like you need to look into the firewall settings. <br>  We find the rule World Wide Web Services (HTTP Traffic-In) and notice that for the public profile, this rule does not apply. <br>  Activate the rule. <br><br>  We try to load the page - the download has started, but it happens very slowly ... Perhaps it is worth looking into the site settings. <br>  Go to the Limits settings for our site. <br>  Note the check mark near Limit bandwidth usage and the value 1024. With such settings, fast loading of the page is impossible.  We remove ... <br><br>  Trying to load the page ... <br><img src="https://habrastorage.org/files/ded/e09/18e/dede0918eeb4458daab33bcf6f5f15dc.png"><br><br>  You are the owner of a free <a href="https://ruvds.com/">VPS</a> for a year! <br><br>  The list of winners, since we did not ask for names, we indicate only the initial characters of the e-mail: <br><ol><li>  place: mgot </li><li>  Place: a.svyat </li><li>  place: nightw </li><li>  place: wolf_k </li></ol><br><br>  Hope it was exciting.  See you again! <br>  Write in the comments what you didn‚Äôt like or what you would like to change next time.  Thank. </div><p>Source: <a href="https://habr.com/ru/post/281663/">https://habr.com/ru/post/281663/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281653/index.html">About search video say a word</a></li>
<li><a href="../281655/index.html">Posted by Blackhole exploit kit set for seven years</a></li>
<li><a href="../281657/index.html">Break me completely ... is it about Scrum?</a></li>
<li><a href="../281659/index.html">9 secrets of online payments. Part 4: the correct payment form - the key to successful payment</a></li>
<li><a href="../281661/index.html">VolgaCTF: summing up the first round</a></li>
<li><a href="../281665/index.html">Programming and debugging ARM Cortex-M4 microcontrollers by Atmel in the environment of the Linux operating system. Part 1</a></li>
<li><a href="../281667/index.html">The first version of Visual Studio Code 1.0 - the path from a simple editor to a powerful tool</a></li>
<li><a href="../281669/index.html">Separate scanned photos together (Python 3 + OpenCV3)</a></li>
<li><a href="../281671/index.html">Details of the completion of the Stack Overflow beta period in Russian</a></li>
<li><a href="../281673/index.html">Site Reliability Engineering: Google's wisdom anthology or new word in DevOps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
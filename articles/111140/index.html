<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Linux Virtual Lab to Prepare for Cisco Certification</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 

 Many, when preparing for the Cisco exams or simply exploring the networks for practical exercises, prefer to assemble and use a real-i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Linux Virtual Lab to Prepare for Cisco Certification</h1><div class="post__text post__text-html js-mediator-article"><h2>  Introduction </h2><br><img src="https://habrastorage.org/storage/habraeffect/24/91/2491e9582af72c0e62afa949b70199b8.png" hspace="20" vspace="15" align="right" alt="Cisco Logo"><br>  Many, when preparing for the Cisco exams or simply exploring the networks for practical exercises, prefer to assemble and use a real-iron laboratory.  In this case, one of the ways out is to buy second-hand ciskovski iron on Ebay, but this will cost you not one hundred dollars. <br>  Others are content to use the network simulator - Cisco Packet Tracer.  To prepare for CCNA, I used it.  It is easy to use, convenient, does not require strong iron and is ideal for beginners.  But due to limitations in the functions for a more serious study, it is unsuitable. <br>  If you do not want to spend your hard-earned $$ and get devices with real IOS, then you need to look towards using the GNMS3 emulator based on Dynamips.  An introduction to its use is already on Habr√©. <br><br>  I will tell you how it can be connected to the Linux host OS (on which it is running) and servers in VirtualBox.  This greatly expands our ability to create complex topologies using Cisco routers, servers with various services in VirtualBox and Internet access through the Linux host OS. <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Topology description </h2><br><br><img src="https://habrastorage.org/storage/habraeffect/f5/47/f547abe8ca2edc09cc514b610f992b7a.png" alt="GNS3 Topology"><br>  In this example, I used a network of three interconnected routers R1, R2 and R3, the router models are Cisco 2651XM.  R1 is connected through the C1 cloud to the Gentoo Linux native host (on which GNS3 is running).  Let his name be gbox.  Through this host, time synchronization via ntp, downloading additional files via tftp to the routers and accessing the Internet is carried out.  Through cloud C2, the network is connected to a virtual machine in VirtualBox.  In this case, it is Debian with FreeRADIUS installed for authentication and authorization on routers and Syslog server for logs.  You can still test ACLs and firewall settings by scanning Debian nmap from host Linux and vice versa.  By the way, Debian-a packages are perfectly installed from repositories on the Internet through this entire thread. <br><br><h2>  Configuring Linux with GNS3 </h2><br>  In order for this agriculture to work, we need to take the following steps.  I use Gentoo Linux, where the command for installing packages is emerge.  Users of other distributions should have the same package names. <br><br>  Install the tunctl utility to create and manage TUN / TAP virtual network interfaces: <br><blockquote>  gbox $ sudo emerge usermode-utilities </blockquote><br>  Install the brctl utility to create and configure network bridges: <br><blockquote>  gbox $ sudo emerge bridge-utils </blockquote><br>  We create and configure virtual network interfaces: <br><blockquote>  gbox $ sudo tunctl -t tap0 -u username <br>  gbox $ sudo tunctl -t tap1 -u username <br>  gbox $ sudo ifconfig tap0 192.168.1.3 netmask 255.255.255.0 up </blockquote><br>  tap0 - to communicate with Linux, on which GNS3 is running. <br>  tap1 - for communication over the bridge with VirtualBox guest machines. <br>  Bind them to the cloud: <br><img src="https://habrastorage.org/storage/habraeffect/c3/8d/c38d0ecbacc26af7f850566f16723269.png" alt="Adding tap1 to cloud C2"><br><br>  Communication with VirtualBox is carried out through the br0 bridge, which consists of the virtual Host-only interface vboxnet0 and the already created tap1. <br><blockquote>  gbox $ sudo ifconfig tap1 0.0.0.0 <br>  gbox $ sudo ifconfig vboxnet0 0.0.0.0 <br>  gbox $ sudo brctl addbr br0 <br>  gbox $ sudo brctl addif br0 tap1 <br>  gbox $ sudo brctl addif br0 vboxnet0 <br>  gbox $ sudo ifconfig br0 192.168.3.4 netmask 255.255.255.0 up </blockquote><br>  To connect this whole economy with the Linux host, it is necessary to prescribe the routing to the used subnets on it: <br><blockquote>  gbox $ sudo route add-net 10.1.1.0/24 gw 192.168.1.1 <br>  gbox $ sudo route add-net 10.2.2.0/24 gw 192.168.1.1 <br>  gbox $ sudo route add-net 192.168.3.0/24 gw 192.168.1.1 </blockquote><br><br><h2>  Configuring routers </h2><br>  All routers also need to register routing on a subnet, well, or use dynamic routing protocols.  I used the proprietary tsiskovsky protocol of dynamic routing EIGRP.  Here is the setting. <br><blockquote>  R1 # conf t <br>  R1 (config) # router eigrp 1 <br>  R1 (config-router) # passive-interface FastEthernet0 / 0 <br>  R1 (config-router) # network 10.1.1.0 0.0.0.3 <br>  R1 (config-router) # network 192.168.1.0 <br>  R1 (config-router) # no auto-summary <br>  R1 (config-router) # exit <br>  R1 (config) # ip route 0.0.0.0 0.0.0.0 FastEthernet0 / 0 </blockquote><br><blockquote>  R2 # conf t <br>  R2 (config) # router eigrp 1 <br>  R2 (config-router) # network 10.1.1.0 0.0.0.3 <br>  R2 (config-router) # network 10.2.2.0 0.0.0.3 <br>  R2 (config-router) # no auto-summary <br>  R2 (config-router) # exit <br>  R2 (config) # ip route 0.0.0.0 0.0.0.0 Serial0 / 0 </blockquote><br><blockquote>  R3 # conf t <br>  R3 (config) # router eigrp 1 <br>  R3 (config-router) # passive-interface FastEthernet0 / 0 <br>  R3 (config-router) # network 10.2.2.0 0.0.0.3 <br>  R3 (config-router) # network 192.168.3.0 <br>  R3 (config-router) # no auto-summary <br>  R3 (config-router) # exit <br>  R3 (config) # ip route 0.0.0.0 0.0.0.0 Serial0 / 0 </blockquote><br><br><h2>  Configuring Debian in VirtualBox </h2><br>  On Debian, the network address and default gateway are set: <br><blockquote>  debianbox $ ifconfig eth0 192.168.3.3 netmask 255.255.255.0 up <br>  debianbox $ route add default gw 192.168.3.1 </blockquote><br><br><h2>  The final </h2><br>  It seems to have forgotten nothing.  Now everything should work fine and communicate with each other.  Based on this example, you can build network topologies even more and more difficult.  GNS3 allows you to emulate ASA, PIX, IPS, JunOS;  simple Ethernet, ATM and Frame Relay switches;  allows you to intercept packets using Wireshark.  Using this software, you can even prepare for CCIE without any extra costs, you can study network technologies in real conditions, run in configs before use in production and a lot more.  I used this configuration for self-preparation for CCNA Security, which was successfully handed over.  The requirements for the humane hardware, for example, the considered topology works fine on my laptop with Core2Duo and 2GB of memory. <br><br><h2>  Bonus </h2><br>  In order to work the Internet through the host Linux (wlan0 - external interface). <br><blockquote>  echo 1&gt; / proc / sys / net / ipv4 / ip_forward <br>  gbox $ sudo / sbin / iptables -t nat -A POSTROUTING -o wlan0 -j MASQUERADE <br>  gbox $ sudo / sbin / iptables -t nat -A POSTROUTING -o wlan0 -j LOG <br>  gbox $ sudo / sbin / iptables -A FORWARD -i wlan0 -o tap0 -m state --state RELATED, ESTABLISHED -j ACCEPT <br>  gbox $ sudo / sbin / iptables -A FORWARD -i tap0 -o wlan0 -j ACCEPT </blockquote><br>  And yet, during the experiments it was found that the startup-config in the Cisco 3745 routers is not saved.  This is a known issue, so be careful. </div><p>Source: <a href="https://habr.com/ru/post/111140/">https://habr.com/ru/post/111140/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../111130/index.html">Aspect-oriented programming. Postsharp</a></li>
<li><a href="../111131/index.html">CGI programming in assembler?!? - Easy!</a></li>
<li><a href="../111134/index.html">An example of using DSL (Domain Specific Languages) in a real project</a></li>
<li><a href="../111136/index.html">AMD has released new hybrid processors Fusion</a></li>
<li><a href="../111139/index.html">Google Chrome extension to send SMS</a></li>
<li><a href="../111141/index.html">Videos and slides with MageConf + ZfConf UA</a></li>
<li><a href="../111142/index.html">Which social networks to look for customers</a></li>
<li><a href="../111143/index.html">Polish reverse record in assembly language with syntax AT & T</a></li>
<li><a href="../111146/index.html">Amateur astronomer discovered four exoplanets using two home PCs</a></li>
<li><a href="../111147/index.html">Apple accused of passing user information to third parties</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
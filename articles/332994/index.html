<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Testing in Openshift: An Introduction</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello dear members of the IT community. My name is Oleg, I work in a software development company. I do manual and automated testing of Linux and Unix...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Testing in Openshift: An Introduction</h1><div class="post__text post__text-html js-mediator-article"><p>  Hello dear members of the IT community.  My name is Oleg, I work in a software development company.  I do manual and automated testing of Linux and Unix products and I would like to share the positive experience of automated testing in <a href="https://www.openshift.org/">Openshift Origin</a> . </p><br><p>  <strong>The goals that I pursue are</strong> : </p><br><ol><li>  To inform the Russian-speaking community about the features of working with Openshift Origin in the context of testing. </li><li>  Tell about the advantages and disadvantages of testing in containers. </li><li>  Aggregate and update your knowledge about <a href="https://kubernetes.io/">Kubernetes</a> / Openshift. </li></ol><br><p>  <strong>All material is presented in three articles</strong> : </p><br><ol><li>  <a href="https://habrahabr.ru/post/332994/">Testing in Openshift: An Introduction</a> </li><li>  <a href="https://habrahabr.ru/post/333012/">Testing in Openshift: Internal cluster structure</a> </li><li>  <a href="https://habrahabr.ru/post/333014/">Testing in Openshift: Automated Testing</a> </li></ol><br><p>  <em>Note: I would like to immediately note that the material presented concerns Openshift v3, and not Openshift v2 (when Red Hat has not yet begun to use Kubernetes as the core for its products and services).</em> </p><a name="habracut"></a><br><p>  <strong>Why Openshift Origin was chosen</strong> : </p><br><p>  It so happened that after being employed at the current place of work, it turned out that there was no automated testing.  After working for several months in manual mode, it came to understand the need for two things: a tool for deploying and maintaining test environments, a framework for writing tests. </p><br><p>  At the initial stage, an automatically updated <a href="https://en.wikipedia.org/wiki/Vagrant_(software)">Vagrant</a> repository ( <a href="https://www.virtualbox.org/">VirtualBox</a> ) was organized for deployment and support of environments, which automatically updates and packages various operating systems.  This was an aid not only for testing, but also for development, because: the virtual machines were configured according to the developed requirements;  virtual machines have been updated, the necessary tools have been preinstalled;  there were Vagrant scripts for deploying complex environments.  It is worth noting that all Vagrant environments are deployed on the local machines of the development participants, and not in the dedicated <a href="https://en.wikipedia.org/wiki/Cloud_computing">IaaS</a> , which was expected to cause performance problems for the workstations. </p><br><p>  Time was gained, it became more convenient to work, some standard and predictability appeared, but the main problem remained - long deployment of the tested environments (full virtualization, various Linux distributions, additional services (which participate in testing)).  Deployment of the tested media could take tens of minutes, while the test itself took place in a matter of seconds.  At the same time, the number of automated tests grew and it took longer to expect results. </p><br><p>  The question of organizing a separate IaaS, in which all the testing tasks would occur, became natural, but this approach was not perfect: full virtualization would still be used, building investments in the purchase of hardware would be required to build IaaS (a small fleet of weak workstations was present) . </p><br><p>  The next stage was the development of a fast (in the context of the environment performance) <a href="https://en.wikipedia.org/wiki/Continuous_integration">CI</a> / <a href="https://en.wikipedia.org/wiki/Continuous_delivery">CD</a> with new requirements, namely (basic, according to priorities): </p><br><ol><li>  Open Source solution at no cost to purchase software. </li><li>  Rapid deployment speed of test environments.  Connectivity and awareness of the existence of services between environments.  Built-in support and control of test runs inside the environment.  High density accommodation to meet point 4. </li><li>  An active community, a popular project with a predictable future, owner's reputation, documentation. </li><li>  No additional investment in the hardware component. </li></ol><br><p>  I will not bother readers with a detailed retelling of the thorny path of finding suitable products, but I want to acquaint you with the list of reviewed software (February 2016): </p><br><ol><li>  Replacing full virtualization: <a href="https://www.docker.com/">Docker</a> , <a href="https://linuxcontainers.org/">LXC</a> , <a href="https://openvz.org/">OpenVZ</a> , <a href="https://github.com/penberg/linux-kvm/tree/master/tools/kvm">kvmtool</a> . </li><li>  Orchestration and cluster management: <a href="https://kubernetes.io/">Kubernetes</a> , <a href="https://www.nomadproject.io/">Nomad</a> , <a href="https://www.openshift.org/">Openshift</a> , <a href="https://www.openstack.org/">Openstack</a> , <a href="https://docs.docker.com/engine/swarm/">Swarm</a> . </li><li>  <a href="https://jenkins.io/">Jenkins</a> support: <a href="https://plugins.jenkins.io/docker-plugin">Docker plugin</a> , <a href="https://plugins.jenkins.io/kubernetes">Kubernetes plugin</a> , <a href="https://github.com/openshift/jenkins-plugin">Openshift plugin</a> </li></ol><br><p>  Some tools were poorly managed or required too much support and maintenance, others were poorly integrated with Jenkins and did not provide the necessary functionality, others were just beginning their way.  The clear leader was Kubernetes and its derivatives (of which there are not few), but in its pure form the platform from Google was difficult to learn and deploy (the developers make great efforts to simplify the use of this platform). </p><br><p>  <strong>In your own words about Openshift Origin:</strong> </p><br><p>  Openshift Origin is primarily an Open Source platform for developing and publishing software, which is based on the Kubernetes container orchestration platform.  The platform extends the capabilities of Kubernetes with the help of special objects and mechanisms. </p><br><p>  Cluster: </p><br><p>  A cluster can be deployed or updated using <a href="https://github.com/openshift/openshift-ansible">Ansible</a> scripts.  Inside the cluster can be used as a built-in and external Docker register.  Cluster nodes can be assigned on the basis of special labels for individual projects.  There is <a href="https://docs.openshift.org/latest/admin_guide/garbage_collection.html">a garbage collector</a> and a <a href="https://docs.openshift.org/latest/admin_guide/scheduler.html">custom scheduler</a> .  A cluster can be deployed inside Openstack and integrated with it in order to automatically scale and provide data storage.  Environments can be aware of published services and other nodes using environment variables and DNS names.  It is possible to check the availability of services through an HTTP / TCP request and / or through the execution of a command inside the container.  Cluster resources can be <a href="https://docs.openshift.org/latest/dev_guide/compute_resources.html">quotated</a> at the project level (processor, memory, number of objects, etc.).  There is an opportunity to monitor the cluster at the level of containers and working nodes. </p><br><p>  Data: </p><br><p>  Temporary or permanent volumes, which are mounted directly in containers, can be used as data storage methods.  Backend for these volumes can be: <a href="https://docs.openshift.org/latest/install_config/persistent_storage/index.html">NFS, GlusterFS, OpenStack Cinder, Ceph RBD, AWS Elastic Block Store (EBS), GCE Persistent Disk, etc.</a>  There is a possibility (hostPath) of mounting the local directory of the work node on which the container is running. </p><br><p>  Network: </p><br><p>  By default, all communications are carried out using <a href="http://openvswitch.org/">Open vSwitch</a> , but there is support for other network solutions through the Kubernetes plugin system.  By default, all environments can communicate with each other, but isolation at the project level is possible.  DNS resolution of service names is supported using the built-in <a href="https://github.com/skynetservices/skydns">SkyDNS</a> service.  Services published within the cluster can be accessed externally.  <a href="https://en.wikipedia.org/wiki/Iptables">Iptables</a> assumes all the functionality of isolation and NAT functions. </p><br><p>  Security: </p><br><p>  Differentiation of user rights based on roles.  Isolating containers with <a href="https://en.wikipedia.org/wiki/Security-Enhanced_Linux">SELinux</a> (and not only).  Support for secrets that are used to access various resources.  All communications between the working nodes of the cluster and the master are carried out through encrypted connections (CA is created, client certificates are issued). </p><br><p>  Control: </p><br><p>  APIs are available for both Openshift itself and Kubernetes.  A cross-platform <a href="https://docs.openshift.org/latest/cli_reference/get_started_cli.html">console client is available</a> .  A web-based interface is available, with the help of which users can: work in isolated projects according to their authority, interact with containers running in a cluster, view created objects, track events, etc. </p><br><p>  <strong>Conclusion:</strong> </p><br><p>  Despite the abundance of technologies and products that are on the market, finding the right tool is quite difficult.  Balancing between the unification and integration of CI / CD processes, given the complexity of maintenance, tracking the chains of the technologies involved, Kubernetes and Openshift Origin were found.  Unlike the base platform of the orchestration with Kubernetes containers, Openshift introduces the necessary elements for convenient and efficient work. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/332994/">https://habr.com/ru/post/332994/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../332982/index.html">Preparation of IT infrastructure of a foreign bank for moving information systems to Russia</a></li>
<li><a href="../332984/index.html">Post mortem Super Meat Boy</a></li>
<li><a href="../332988/index.html">Yandex.Taxi and Uber will go together</a></li>
<li><a href="../332990/index.html">Linux Foundation Unveils Free Kubernetes Introductory Online Course</a></li>
<li><a href="../332992/index.html">7 ways to improve the design of the site</a></li>
<li><a href="../332998/index.html">ES8: major innovations</a></li>
<li><a href="../333000/index.html">IBM has created a new generation of carbon nanotube transistors</a></li>
<li><a href="../333002/index.html">Creating Shaders</a></li>
<li><a href="../333006/index.html">Noty.js V3 is a smart javascript library for creating notifications. And also a ready plugin for vuejs</a></li>
<li><a href="../333008/index.html">Doctor Web: gosuslugi.ru portal has been compromised and may begin to infect visitors or steal information</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
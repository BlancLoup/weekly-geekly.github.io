<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Captcha 3d</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After reading the topic "RapidShare - new captcha" , I remembered listening to the report of the creator of the captcha on UaWeb. 



 Having visited ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Captcha 3d</h1><div class="post__text post__text-html js-mediator-article"> After reading the topic <a href="http://habrahabr.ru/blog/humour/45005.html">"RapidShare - new captcha"</a> , I remembered listening to the report of the creator of the captcha on UaWeb. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7bd/8ea/492/7bd8ea49285fd0eb3ea43ee9126bb498.png" width="450" height="225" hspace="10" vspace="10" align="right"><br><br>  Having visited the site, wanting to see the code, I saw: <br>  Q: Is it opensource? <br>  A: No, sorry.  Maybe later. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I was <strong>surprised</strong> !  It seemed to me that any <s>poorly educated</s> good programmer would make such a captcha. <br>  Googling and found a couple of interesting links: <a href="">1</a> , <a href="http://spamfizzle.com/CAPTCHA.aspx">2</a> and did not receive the code, I decided to write myself. <br><a name="habracut"></a><br>  <strong>: 00</strong> How to start?  Recalling the times of the university, linear analysis (I was led by a very good <a href="http://www.rpd.univ.kiev.ua/downloads/rff.live/rff.live-6.pdf">teacher</a> ) and thinking what to do gently with 3D -&gt; 2D, and this, as I remember, is called ‚Äúprojection‚Äù, I typed this word in the <a href="http://www.google.com.ua/search%3Fq%3D%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2586%25D0%25B8%25D1%258F%26ie%3Dutf-8%26oe%3Dutf-8%26aq%3Dt%26rls%3Dorg.mozilla:ru:official%26client%3Dfirefox-a">search</a> bar <br>  <strong>: 03</strong> After following the chain of links in Wikipedia and reading a suitable <a href="http://en.wikipedia.org/wiki/Graphical_projection">article,</a> I decided that <a href="http://en.wikipedia.org/wiki/Isometric_projection">an isometric projection</a> would suit me <br>  <strong>: 05</strong> Well, the main formula is <br><img src="https://habrastorage.org/getpro/habr/post_images/8df/ace/ef9/8dfaceef976b624d9fe5a53c1df205c4.png" alt="isometric view"><br>  <strong>: 15 a</strong> couple of lines of code and here is the first 3D image <br><img src="https://habrastorage.org/getpro/habr/post_images/d62/70d/936/d6270d936aa6dfc39f83e807fdc0cd05.jpg" alt="Piccy.info - Free Image Hosting"><br>  <strong>: 16</strong> two cycles and <br><img src="https://habrastorage.org/getpro/habr/post_images/d7b/088/977/d7b088977013e5526641a5c0c999c458.jpg" alt="Piccy.info - Free Image Hosting"><br>  <strong>: 20</strong> I will display the text and using it as a pattern for the z axis we get <br><img src="https://habrastorage.org/getpro/habr/post_images/312/7a1/ff6/3127a1ff6aa26e6afdfe0a504ca50ab9.jpg" alt="Piccy.info - Free Image Hosting"><br>  <strong>: 30</strong> add noise and sine waves get <br><img src="https://habrastorage.org/getpro/habr/post_images/0d9/cae/b2b/0d9caeb2b8b9a995762f4ddb664efb52.jpg" alt="Piccy.info - Free Image Hosting"><br><br>  <s>Speed</s> draw rate 31.42 [# / sec] on Intel Core 2 Duo 2.2 GGz php 5.2.6 Apache 2.2.4 on Win Vista Sp1 <br><br> <code><font color="#000000"><font color="#FEFEFE">/** <br> * <br> * @author Andrii Kasian &lt;to.kandy@gmail.com&gt; <br> */ <br></font> <br> <font color="#0000BB">&lt;?php <br> <br> <br> $capthca</font> <font color="#007700">= new</font> <font color="#0000BB">Capthca3d</font> <font color="#007700">(); <br> <br></font> <font color="#0000BB">$capthca</font> <font color="#007700">-&gt;</font> <font color="#0000BB">render</font> <font color="#007700">(); <br> <br> <br> <br> class</font> <font color="#0000BB">Capthca3d</font> <font color="#007700">{ <br> <br> <br> const</font> <font color="#0000BB">CHARS</font> <font color="#007700">=</font> <font color="#DD0000">'WEafRTYIPAGHJKXBNM3479j'</font> <font color="#007700">; <br> <br></font> <font color="#0000BB">protected $hypot</font> <font color="#007700">=</font> <font color="#0000BB">8</font> <font color="#007700">; <br> <br></font> <font color="#0000BB">protected $image</font> <font color="#007700">=</font> <font color="#0000BB">null</font> <font color="#007700">; <br> <br> <br> <br></font> <font color="#0000BB">protected $text</font> <font color="#007700">=</font> <font color="#DD0000">''</font> <font color="#007700">; <br> <br> <br> <br> <br></font> <font color="#0000BB">public</font> <font color="#007700">function</font> <font color="#0000BB">__construct</font> <font color="#007700">() <br> <br> { <br> <br></font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">time</font> <font color="#007700">=</font> <font color="#0000BB">microtime</font> <font color="#007700">(</font> <font color="#0000BB">true</font> <font color="#007700">); <br> <br></font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">generateCode</font> <font color="#007700">(); <br> <br> <br> <br> <br> } <br> <br></font> <font color="#0000BB">protected</font> <font color="#007700">function</font> <font color="#0000BB">generateCode</font> <font color="#007700">() <br> <br> { <br> <br></font> <font color="#0000BB">$chars</font> <font color="#007700">=</font> <font color="#0000BB">self</font> <font color="#007700">::</font> <font color="#0000BB">CHARS</font> <font color="#007700">; <br> <br> for(</font> <font color="#0000BB">$i</font> <font color="#007700">=</font> <font color="#0000BB">0</font> <font color="#007700">;</font> <font color="#0000BB">$i</font> <font color="#007700">&lt;</font> <font color="#0000BB">3</font> <font color="#007700">;</font> <font color="#0000BB">$i</font> <font color="#007700">++){ <br> <br> <br></font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">text</font> <font color="#007700">.=</font> <font color="#0000BB">$chars</font> <font color="#007700">{</font> <font color="#0000BB">mt_rand</font> <font color="#007700">(</font> <font color="#0000BB">0</font> <font color="#007700">,</font> <font color="#0000BB">22</font> <font color="#007700">)}; <br> <br> } <br> <br> } <br> <br> <br> <br></font> <font color="#0000BB">public</font> <font color="#007700">function</font> <font color="#0000BB">getText</font> <font color="#007700">() <br> <br> <br> { <br> <br> return</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">text</font> <font color="#007700">; <br> <br> } <br> <br></font> <font color="#0000BB">protected</font> <font color="#007700">function</font> <font color="#0000BB">getProection</font> <font color="#007700">(</font> <font color="#0000BB">$x1</font> <font color="#007700">,</font> <font color="#0000BB">$y1</font> <font color="#007700">,</font> <font color="#0000BB">$z1</font> <font color="#007700">) <br> <br> <br> { <br> <br></font> <font color="#0000BB">$x</font> <font color="#007700">=</font> <font color="#0000BB">$x1</font> <font color="#007700">*</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">hypot</font> <font color="#007700">; <br> <br></font> <font color="#0000BB">$y</font> <font color="#007700">=</font> <font color="#0000BB">$z1</font> <font color="#007700">*</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">hypot</font> <font color="#007700">; <br> <br> <br></font> <font color="#0000BB">$z</font> <font color="#007700">= -</font> <font color="#0000BB">$y1</font> <font color="#007700">*</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">hypot</font> <font color="#007700">; <br> <br> <br> <br></font> <font color="#0000BB">$xx</font> <font color="#007700">=</font> <font color="#0000BB">0.707106781187</font> <font color="#007700">; <br> <br></font> <font color="#0000BB">$xy</font> <font color="#007700">=</font> <font color="#0000BB">0</font> <font color="#007700">; <br> <br> <br></font> <font color="#0000BB">$xz</font> <font color="#007700">= -</font> <font color="#0000BB">0.707106781187</font> <font color="#007700">; <br> <br> <br> <br></font> <font color="#0000BB">$yx</font> <font color="#007700">=</font> <font color="#0000BB">0.408248290464</font> <font color="#007700">; <br> <br></font> <font color="#0000BB">$yy</font> <font color="#007700">=</font> <font color="#0000BB">0.816496580928</font> <font color="#007700">; <br> <br> <br></font> <font color="#0000BB">$yz</font> <font color="#007700">=</font> <font color="#0000BB">0.408248290464</font> <font color="#007700">; <br> <br> <br> <br></font> <font color="#0000BB">$cx</font> <font color="#007700">=</font> <font color="#0000BB">$xx</font> <font color="#007700">*</font> <font color="#0000BB">$x</font> <font color="#007700">+</font> <font color="#0000BB">$xy</font> <font color="#007700">*</font> <font color="#0000BB">$y</font> <font color="#007700">+</font> <font color="#0000BB">$xz</font> <font color="#007700">*</font> <font color="#0000BB">$z</font> <font color="#007700">; <br> <br> <br></font> <font color="#0000BB">$cy</font> <font color="#007700">=</font> <font color="#0000BB">$yx</font> <font color="#007700">*</font> <font color="#0000BB">$x</font> <font color="#007700">+</font> <font color="#0000BB">$yy</font> <font color="#007700">*</font> <font color="#0000BB">$y</font> <font color="#007700">+</font> <font color="#0000BB">$yz</font> <font color="#007700">*</font> <font color="#0000BB">$z</font> <font color="#007700">+</font> <font color="#0000BB">20</font> <font color="#007700">*</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">hypot</font> <font color="#007700">; <br> <br> <br> return array( <br> <br></font> <font color="#DD0000">'x'</font> <font color="#007700">=&gt;</font> <font color="#0000BB">$cx</font> <font color="#007700">, <br> <br></font> <font color="#DD0000">'y'</font> <font color="#007700">=&gt;</font> <font color="#0000BB">$cy <br> <br></font> <font color="#007700">); <br> <br> } <br> <br> <br> <br> function</font> <font color="#0000BB">zFunction</font> <font color="#007700">(</font> <font color="#0000BB">$x</font> <font color="#007700">,</font> <font color="#0000BB">$y</font> <font color="#007700">){ <br> <br> <br></font> <font color="#0000BB">$z</font> <font color="#007700">=</font> <font color="#0000BB">imagecolorat</font> <font color="#007700">(</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">image</font> <font color="#007700">,</font> <font color="#0000BB">$y</font> <font color="#007700">/</font> <font color="#0000BB">2</font> <font color="#007700">,</font> <font color="#0000BB">$x</font> <font color="#007700">/</font> <font color="#0000BB">2</font> <font color="#007700">)&gt;</font> <font color="#0000BB">0</font> <font color="#007700">?</font> <font color="#0000BB">2.6</font> <font color="#007700">:</font> <font color="#0000BB">0</font> <font color="#007700">; <br> <br> <br> if(</font> <font color="#0000BB">$z</font> <font color="#007700">!=</font> <font color="#0000BB">0</font> <font color="#007700">){ <br> <br></font> <font color="#0000BB">$z</font> <font color="#007700">+=</font> <font color="#0000BB">mt_rand</font> <font color="#007700">(</font> <font color="#0000BB">0</font> <font color="#007700">,</font> <font color="#0000BB">60</font> <font color="#007700">)/</font> <font color="#0000BB">100</font> <font color="#007700">; <br> <br> } <br> <br></font> <font color="#0000BB">$z</font> <font color="#007700">+=</font> <font color="#0000BB">1.4</font> <font color="#007700">*</font> <font color="#0000BB">sin</font> <font color="#007700">((</font> <font color="#0000BB">$x</font> <font color="#007700">+</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">startX</font> <font color="#007700">)*</font> <font color="#0000BB">3.141592654</font> <font color="#007700">/</font> <font color="#0000BB">15</font> <font color="#007700">)*</font> <font color="#0000BB">sin</font> <font color="#007700">((</font> <font color="#0000BB">$y</font> <font color="#007700">+</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">startY</font> <font color="#007700">)*</font> <font color="#0000BB">3.141592654</font> <font color="#007700">/</font> <font color="#0000BB">15</font> <font color="#007700">); <br> <br> <br> return</font> <font color="#0000BB">$z</font> <font color="#007700">; <br> <br> } <br> <br></font> <font color="#0000BB">public</font> <font color="#007700">function</font> <font color="#0000BB">render</font> <font color="#007700">() <br> <br> { <br> <br></font> <font color="#0000BB">$xx</font> <font color="#007700">=</font> <font color="#0000BB">30</font> <font color="#007700">; <br> <br></font> <font color="#0000BB">$yy</font> <font color="#007700">=</font> <font color="#0000BB">60</font> <font color="#007700">; <br> <br> <br> <br> <br></font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">image</font> <font color="#007700">=</font> <font color="#0000BB">imageCreateTrueColor</font> <font color="#007700">(</font> <font color="#0000BB">$yy</font> <font color="#007700">*</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">hypot</font> <font color="#007700">,</font> <font color="#0000BB">$xx</font> <font color="#007700">*</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">hypot</font> <font color="#007700">); <br> <br> <br> <br> <br></font> <font color="#0000BB">$whiteColor</font> <font color="#007700">=</font> <font color="#0000BB">imageColorAllocate</font> <font color="#007700">(</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">image</font> <font color="#007700">,</font> <font color="#0000BB">255</font> <font color="#007700">,</font> <font color="#0000BB">255</font> <font color="#007700">,</font> <font color="#0000BB">255</font> <font color="#007700">); <br> <br></font> <font color="#0000BB">imageFilledRectangle</font> <font color="#007700">(</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">image</font> <font color="#007700">,</font> <font color="#0000BB">0</font> <font color="#007700">,</font> <font color="#0000BB">0</font> <font color="#007700">,</font> <font color="#0000BB">$yy</font> <font color="#007700">*</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">hypot</font> <font color="#007700">,</font> <font color="#0000BB">$xx</font> <font color="#007700">*</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">hypot</font> <font color="#007700">,</font> <font color="#0000BB">$whiteColor</font> <font color="#007700">); <br> <br> <br> <br> <br></font> <font color="#0000BB">$textColor</font> <font color="#007700">=</font> <font color="#0000BB">imageColorAllocate</font> <font color="#007700">(</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">image</font> <font color="#007700">,</font> <font color="#0000BB">0</font> <font color="#007700">,</font> <font color="#0000BB">0</font> <font color="#007700">,</font> <font color="#0000BB">0</font> <font color="#007700">); <br> <br></font> <font color="#0000BB">imageString</font> <font color="#007700">(</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">image</font> <font color="#007700">,</font> <font color="#0000BB">5</font> <font color="#007700">,</font> <font color="#0000BB">3</font> <font color="#007700">,</font> <font color="#0000BB">0</font> <font color="#007700">,</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">text</font> <font color="#007700">,</font> <font color="#0000BB">$textColor</font> <font color="#007700">); <br> <br> <br> <br> <br> <br> <br></font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">startX</font> <font color="#007700">=</font> <font color="#0000BB">mt_rand</font> <font color="#007700">(</font> <font color="#0000BB">0</font> <font color="#007700">,</font> <font color="#0000BB">$xx</font> <font color="#007700">); <br> <br></font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">startY</font> <font color="#007700">=</font> <font color="#0000BB">mt_rand</font> <font color="#007700">(</font> <font color="#0000BB">0</font> <font color="#007700">,</font> <font color="#0000BB">$yy</font> <font color="#007700">); <br> <br> <br> <br> <br></font> <font color="#0000BB">$coordinates</font> <font color="#007700">= array(); <br> <br> <br> <br> for(</font> <font color="#0000BB">$x</font> <font color="#007700">=</font> <font color="#0000BB">0</font> <font color="#007700">;</font> <font color="#0000BB">$x</font> <font color="#007700">&lt;</font> <font color="#0000BB">$xx</font> <font color="#007700">+</font> <font color="#0000BB">1</font> <font color="#007700">;</font> <font color="#0000BB">$x</font> <font color="#007700">++){ <br> <br> <br> for(</font> <font color="#0000BB">$y</font> <font color="#007700">=</font> <font color="#0000BB">0</font> <font color="#007700">;</font> <font color="#0000BB">$y</font> <font color="#007700">&lt;</font> <font color="#0000BB">$yy</font> <font color="#007700">+</font> <font color="#0000BB">1</font> <font color="#007700">;</font> <font color="#0000BB">$y</font> <font color="#007700">++){ <br> <br></font> <font color="#0000BB">$coordinates</font> <font color="#007700">[</font> <font color="#0000BB">$x</font> <font color="#007700">][</font> <font color="#0000BB">$y</font> <font color="#007700">] =</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">getProection</font> <font color="#007700">(</font> <font color="#0000BB">$x</font> <font color="#007700">,</font> <font color="#0000BB">$y</font> <font color="#007700">,</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">zFunction</font> <font color="#007700">(</font> <font color="#0000BB">$x</font> <font color="#007700">,</font> <font color="#0000BB">$y</font> <font color="#007700">)); <br> <br> <br> } <br> <br> } <br> <br> <br> <br> for(</font> <font color="#0000BB">$x</font> <font color="#007700">=</font> <font color="#0000BB">0</font> <font color="#007700">;</font> <font color="#0000BB">$x</font> <font color="#007700">&lt;</font> <font color="#0000BB">$xx</font> <font color="#007700">;</font> <font color="#0000BB">$x</font> <font color="#007700">++){ <br> <br> for(</font> <font color="#0000BB">$y</font> <font color="#007700">=</font> <font color="#0000BB">0</font> <font color="#007700">;</font> <font color="#0000BB">$y</font> <font color="#007700">&lt;</font> <font color="#0000BB">$yy</font> <font color="#007700">;</font> <font color="#0000BB">$y</font> <font color="#007700">++){ <br> <br> <br></font> <font color="#0000BB">$coord</font> <font color="#007700">= array(); <br> <br></font> <font color="#0000BB">$coord</font> <font color="#007700">[] =</font> <font color="#0000BB">$coordinates</font> <font color="#007700">[</font> <font color="#0000BB">$x</font> <font color="#007700">][</font> <font color="#0000BB">$y</font> <font color="#007700">][</font> <font color="#DD0000">'x'</font> <font color="#007700">]; <br> <br></font> <font color="#0000BB">$coord</font> <font color="#007700">[] =</font> <font color="#0000BB">$coordinates</font> <font color="#007700">[</font> <font color="#0000BB">$x</font> <font color="#007700">][</font> <font color="#0000BB">$y</font> <font color="#007700">][</font> <font color="#DD0000">'y'</font> <font color="#007700">]; <br> <br> <br> <br> <br></font> <font color="#0000BB">$coord</font> <font color="#007700">[] =</font> <font color="#0000BB">$coordinates</font> <font color="#007700">[</font> <font color="#0000BB">$x</font> <font color="#007700">+</font> <font color="#0000BB">1</font> <font color="#007700">][</font> <font color="#0000BB">$y</font> <font color="#007700">][</font> <font color="#DD0000">'x'</font> <font color="#007700">]; <br> <br></font> <font color="#0000BB">$coord</font> <font color="#007700">[] =</font> <font color="#0000BB">$coordinates</font> <font color="#007700">[</font> <font color="#0000BB">$x</font> <font color="#007700">+</font> <font color="#0000BB">1</font> <font color="#007700">][</font> <font color="#0000BB">$y</font> <font color="#007700">][</font> <font color="#DD0000">'y'</font> <font color="#007700">]; <br> <br> <br> <br> <br></font> <font color="#0000BB">$coord</font> <font color="#007700">[] =</font> <font color="#0000BB">$coordinates</font> <font color="#007700">[</font> <font color="#0000BB">$x</font> <font color="#007700">+</font> <font color="#0000BB">1</font> <font color="#007700">][</font> <font color="#0000BB">$y</font> <font color="#007700">+</font> <font color="#0000BB">1</font> <font color="#007700">][</font> <font color="#DD0000">'x'</font> <font color="#007700">]; <br> <br></font> <font color="#0000BB">$coord</font> <font color="#007700">[] =</font> <font color="#0000BB">$coordinates</font> <font color="#007700">[</font> <font color="#0000BB">$x</font> <font color="#007700">+</font> <font color="#0000BB">1</font> <font color="#007700">][</font> <font color="#0000BB">$y</font> <font color="#007700">+</font> <font color="#0000BB">1</font> <font color="#007700">][</font> <font color="#DD0000">'y'</font> <font color="#007700">]; <br> <br> <br> <br> <br></font> <font color="#0000BB">$coord</font> <font color="#007700">[] =</font> <font color="#0000BB">$coordinates</font> <font color="#007700">[</font> <font color="#0000BB">$x</font> <font color="#007700">][</font> <font color="#0000BB">$y</font> <font color="#007700">+</font> <font color="#0000BB">1</font> <font color="#007700">][</font> <font color="#DD0000">'x'</font> <font color="#007700">]; <br> <br></font> <font color="#0000BB">$coord</font> <font color="#007700">[] =</font> <font color="#0000BB">$coordinates</font> <font color="#007700">[</font> <font color="#0000BB">$x</font> <font color="#007700">][</font> <font color="#0000BB">$y</font> <font color="#007700">+</font> <font color="#0000BB">1</font> <font color="#007700">][</font> <font color="#DD0000">'y'</font> <font color="#007700">]; <br> <br> <br> <br> <br></font> <font color="#0000BB">$c</font> <font color="#007700">= (int) (</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">zFunction</font> <font color="#007700">(</font> <font color="#0000BB">$x</font> <font color="#007700">,</font> <font color="#0000BB">$y</font> <font color="#007700">)*</font> <font color="#0000BB">32</font> <font color="#007700">); <br> <br></font> <font color="#0000BB">$linesColor</font> <font color="#007700">=</font> <font color="#0000BB">imageColorAllocate</font> <font color="#007700">(</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">image</font> <font color="#007700">,</font> <font color="#0000BB">$c</font> <font color="#007700">,</font> <font color="#0000BB">$c</font> <font color="#007700">,</font> <font color="#0000BB">$c</font> <font color="#007700">); <br> <br> <br></font> <font color="#0000BB">imageFilledPolygon</font> <font color="#007700">(</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">image</font> <font color="#007700">,</font> <font color="#0000BB">$coord</font> <font color="#007700">,</font> <font color="#0000BB">4</font> <font color="#007700">,</font> <font color="#0000BB">$whiteColor</font> <font color="#007700">); <br> <br></font> <font color="#0000BB">imagePolygon</font> <font color="#007700">(</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">image</font> <font color="#007700">,</font> <font color="#0000BB">$coord</font> <font color="#007700">,</font> <font color="#0000BB">4</font> <font color="#007700">,</font> <font color="#0000BB">$linesColor</font> <font color="#007700">); <br> <br> <br> } <br> <br> } <br> <br> <br> <br></font> <font color="#0000BB">$textColor</font> <font color="#007700">=</font> <font color="#0000BB">imageColorAllocate</font> <font color="#007700">(</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">image</font> <font color="#007700">,</font> <font color="#0000BB">0</font> <font color="#007700">,</font> <font color="#0000BB">0</font> <font color="#007700">,</font> <font color="#0000BB">0</font> <font color="#007700">); <br> <br> <br></font> <font color="#0000BB">imageString</font> <font color="#007700">(</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">image</font> <font color="#007700">,</font> <font color="#0000BB">5</font> <font color="#007700">,</font> <font color="#0000BB">3</font> <font color="#007700">,</font> <font color="#0000BB">0</font> <font color="#007700">,</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">text</font> <font color="#007700">,</font> <font color="#0000BB">$whiteColor</font> <font color="#007700">); <br> <br> <br></font> <font color="#0000BB">imageString</font> <font color="#007700">(</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">image</font> <font color="#007700">,</font> <font color="#0000BB">1</font> <font color="#007700">,</font> <font color="#0000BB">3</font> <font color="#007700">,</font> <font color="#0000BB">0</font> <font color="#007700">, (</font> <font color="#0000BB">microtime</font> <font color="#007700">(</font> <font color="#0000BB">true</font> <font color="#007700">)-</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">time</font> <font color="#007700">),</font> <font color="#0000BB">$textColor</font> <font color="#007700">); <br> <br> <br></font> <font color="#0000BB">header</font> <font color="#007700">(</font> <font color="#DD0000">'Content-Type: image/png'</font> <font color="#007700">); <br> <br> <br> <br></font> <font color="#0000BB">imagepng</font> <font color="#007700">(</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">image</font> <font color="#007700">); <br> <br></font> <font color="#0000BB">imagedestroy</font> <font color="#007700">(</font> <font color="#0000BB">$this</font> <font color="#007700">-&gt;</font> <font color="#0000BB">image</font> <font color="#007700">); <br> <br> <br> } <br> <br> } <br> <br></font> <br></font> <br></code> <br><br>  PS: GPL </div><p>Source: <a href="https://habr.com/ru/post/28151/">https://habr.com/ru/post/28151/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281499/index.html">Macros in Emacs: form teams for processing</a></li>
<li><a href="../281501/index.html">Project Tofino - the new Mozilla browser</a></li>
<li><a href="../281503/index.html">Interfaces: How not to do the option of unsubscribing from the email-list</a></li>
<li><a href="../281505/index.html">How we implemented DevOps: infrastructure-as-code using Microsoft Azure and Azure Resource Manager</a></li>
<li><a href="../281509/index.html">5G core networks: flexibility opens up new business opportunities</a></li>
<li><a href="../281511/index.html">// BUILD / 2016: how it was</a></li>
<li><a href="../281513/index.html">What we lack in java</a></li>
<li><a href="../281515/index.html">How to determine the best time for a transaction in the stock market: Trend following algorithms</a></li>
<li><a href="../281517/index.html">How to write a bloom filter in C ++</a></li>
<li><a href="../281519/index.html">More than 80 Linux system monitoring tools</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
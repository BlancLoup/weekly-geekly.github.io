<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Analog to digital conversion for beginners</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article discusses the main issues related to the principle of operation of various types of ADCs. At the same time, some important theoretical ca...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Analog to digital conversion for beginners</h1><div class="post__text post__text-html js-mediator-article">  This article discusses the main issues related to the principle of operation of various types of ADCs.  At the same time, some important theoretical calculations concerning the mathematical description of the analog-to-digital conversion remained outside the scope of the article, but there are references that interested readers can find a more in-depth look at the theoretical aspects of the ADC.  Thus, the article deals with a greater degree of understanding of the general principles of functioning of the ADC, than a theoretical analysis of their work. <br><br><img src="https://habrastorage.org/storage1/360efa72/4b09f00a/16ff91b4/2c166541.jpg">  " <br><br>  <b>Introduction</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As a starting point we give the definition of analog-to-digital conversion.  Analog-to-digital conversion is the process of converting an input physical quantity into its numerical representation.  An analog-to-digital converter is a device that performs this conversion.  Formally, the input value of an ADC can be any physical quantity ‚Äî voltage, current, resistance, capacitance, pulse repetition rate, shaft angle of rotation, etc.  However, for definiteness, in the future, under ADC, we will understand only voltage-code converters. <br><br><a name="habracut"></a><br>  The concept of analog-digital conversion is closely related to the concept of measurement.  Under the measurement refers to the process of comparing the measured value with a certain standard, when analog-to-digital conversion is the comparison of the input value with a certain reference value (as a rule, with the reference voltage).  Thus, analog-to-digital conversion can be considered as a measurement of the input signal value, and all metrology concepts, such as measurement errors, are applicable to it. <br><br>  <b>The main characteristics of the ADC</b> <br><br>  The ADC has many characteristics, of which the main ones are the conversion frequency and bit depth.  The frequency of conversion is usually expressed in samples per second (samples per second, SPS), bit depth - in bits.  Modern ADCs can be up to 24-bit wide and can be converted to GSPS units (of course, not simultaneously).  The higher the speed and bitness, the harder it is to obtain the required characteristics, the more expensive and more complex the converter.  The conversion speed and bit depth are related to each other in a certain way, and we can increase the effective conversion digit capacity by sacrificing speed. <br><br>  <b>Types of ADC</b> <br><br>  There are many types of ADCs, but in this article we will limit ourselves to considering only the following types: <br><br><ul><li>  ADC parallel conversion (direct conversion, flash ADC) </li><li>  ADC sequential approximation (SAR ADC) </li><li>  Delta-Sigma ADC (charge balancing ADC) </li></ul><br>  There are also other types of ADCs, including conveyor and combined types, consisting of several ADCs with (in general) different architectures.  However, the above ADC architectures are most indicative of the fact that each architecture occupies a certain niche in the general range of speed-digit capacity. <br><br>  ADC direct (parallel) conversion has the highest speed and the lowest bit depth.  For example, Texas Instruments' TLC5540 parallel conversion ADC has a speed of 40MSPS with a bit capacity of only 8 bits.  This type of ADC can have a conversion rate of up to 1 GSPS.  It can be noted here that pipelined ADCs have even greater speed, however they are a combination of several ADCs with lower speed and their consideration is beyond the scope of this article. <br><br>  The average niche in the range of digit-speed occupy the ADC successive approximation.  Typical values ‚Äã‚Äãare 12‚Äì18 bits at a conversion frequency of 100KSPS-1MSPS. <br><br>  The highest accuracy is achieved by a sigma-delta A / D converter, having a bit width up to and including 24 bits and speed from SPS units to KSPS units. <br><br>  Another type of ADC that has found application in the recent past is an integrating ADC.  Integrating ADCs are now almost completely superseded by other types of ADCs, but can be found in older measuring devices. <br><br>  <b>ADC direct conversion</b> <br><br>  Direct conversion ADCs were widely used in the years 1960-1970, and were made in the form of integrated circuits in the 1980s.  They are often used as part of "pipelined" ADCs (not considered in this article), and have a bit depth of 6-8 bits at speeds up to 1 GSPS. <br><br>  The architecture of the direct conversion ADC is depicted in Fig.  one <br><br><img src="https://habrastorage.org/storage1/9464a67a/27194656/18f81b68/ae7a6f8d.jpg"><br><br>  Fig.  1. Block diagram of the ADC direct conversion <br><br>  The principle of operation of the ADC is extremely simple: the input signal is fed simultaneously to all the ‚Äúplus‚Äù inputs of the comparators, and to the ‚Äúminus‚Äù inputs are supplied a series of voltages obtained from the reference by dividing by resistors R. For the circuit in fig.  1 this row will be like this: (1/16, 3/16, 5/16, 7/16, 9/16, 11/16, 13/16) Uref, where Uref is the reference voltage of the ADC. <br><br>  Let a voltage equal to 1/2 Uref be applied to the ADC input.  Then the first 4 comparators will work (if we count from below), and logical units will appear at their outputs.  The priority encoder will generate a binary code from the ‚Äúcolumn‚Äù of the units, which is fixed by the output register. <br><br>  Now become clear advantages and disadvantages of such a converter.  All comparators work in parallel, the delay time of the circuit is equal to the delay time in one comparator plus the delay time in the encoder.  The comparator and the encoder can be made very fast, as a result, the whole circuit has a very high speed. <br><br>  But to get N digits, you need 2 ^ N comparators (and the complexity of the encoder also grows as 2 ^ N).  The diagram in fig.  1. contains 8 comparators and has 3 bits, to get 8 bits, 256 comparators are needed, for 10 bits - 1024 comparators, for a 24-bit ADC they would need more than 16 million. However, the equipment has not yet reached such heights. <br><br>  <b>ADC sequential approximation</b> <br><br>  The ADC sequential approximation implements the "weighting" algorithm, which goes back to Fibonacci.  In his book Liber Abaci (1202), Fibonacci considered the ‚Äúproblem of choosing the best weights system‚Äù, that is, finding such a number of weights weights that would require to find the weight of the object the minimum number of weighings on the lever weights.  The solution to this problem is a ‚Äúbinary‚Äù set of weights.  More information about the Fibonacci problem can be found, for example, here: <a href="http://www.goldenmuseum.com/2015AMT_rus.html">http://www.goldenmuseum.com/2015AMT_rus.html</a> . <br><br>  A successive approximation analog-to-digital converter (SAR, Successive Approximation Register) measures the magnitude of the input signal by performing a series of ‚Äúweightings,‚Äù that is, comparing the magnitude of the input voltage with a number of values ‚Äã‚Äãgenerated as follows: <br><br>  1. at the first step, the output of the built-in digital-to-analog converter is set to 1 / 2Uref (hereinafter we assume that the signal is in the interval (0 - Uref). <br><br>  2. if the signal is greater than this value, then it is compared with the voltage lying in the middle of the remaining interval, that is, in this case, 3 / 4Uref.  If the signal is less than the set level, the next comparison will be made with a smaller half of the remaining interval (ie, with a level of 1 / 4Uref). <br><br>  3. Step 2 is repeated N times.  Thus, N comparisons (‚Äúweightings‚Äù) produce N bits of the result. <br><br><img src="https://habrastorage.org/storage1/493c0a63/a7d53313/7baf95d4/c368df8c.gif"><br><br>  Fig.  2. Block diagram of the ADC sequential approximation. <br><br>  Thus, the ADC sequential approximation consists of the following nodes: <br><br>  1. The comparator.  It compares the input value and the current value of the "weight" voltage (in Fig. 2. indicated by a triangle). <br><br>  2. Digital-to-analog converter (Digital to Analog Converter, DAC).  It generates a ‚Äúweight‚Äù voltage value based on the input digital code. <br><br>  3. Register successive approximation (Successive Approximation Register, SAR).  It implements a sequential approximation algorithm, generating the current code value applied to the input of the DAC.  By its name is named all the architecture of the ADC. <br><br>  4. Sampling-storage scheme (Sample / Hold, S / H).  For the operation of this ADC, it is of fundamental importance that the input voltage maintains a constant value throughout the entire conversion cycle.  However, ‚Äúreal‚Äù signals tend to change over time.  The sampling-storage scheme ‚Äúremembers‚Äù the current value of the analog signal, and keeps it unchanged throughout the entire operation cycle of the device. <br><br>  The advantage of the device is a relatively high conversion speed: the conversion time of the N-bit ADC is N clock cycles.  The accuracy of the conversion is limited by the accuracy of the internal DAC and can be 16-18 bits (24-bit SAR ADCs, for example, AD7766 and AD7767, are now appearing). <br><br>  <b>Delta-Sigma ADC</b> <br><br>  And finally, the most interesting type of ADC is the sigma-delta ADC, sometimes referred to as charge-balancing ADC in literature.  The structure of the sigma-delta ADC is shown in Fig.  3 <br><br><img src="https://habrastorage.org/storage1/7534de12/db2d871b/24f44ced/8790d695.gif"><br><br>  Fig.3.  Block diagram of sigma-delta ADC. <br><br>  The principle of operation of this ADC is somewhat more complicated than that of other types of ADCs.  Its essence is that the input voltage is compared with the voltage value accumulated by the integrator.  Pulses of positive or negative polarity are applied to the integrator input, depending on the result of the comparison.  Thus, this ADC is a simple tracking system: the voltage at the integrator output "monitors" the input voltage (Fig. 4).  The result of this scheme is a stream of zeros and ones at the output of the comparator, which is then passed through a digital low-pass filter, resulting in an N-bit result.  LPF in fig.  3. Combined with a ‚Äúdecimator‚Äù, a device that reduces the frequency of following samples by ‚Äúthinning‚Äù. <br><br><img src="https://habrastorage.org/storage1/2563aca6/f6b60639/b3c40a39/8a069b35.gif"><br><br>  Fig.  4. Sigma-delta ADC as a tracking system <br><br>  For the sake of rigor, it must be said that in fig.  3 shows a block diagram of a sigma-delta first-order ADC.  A second-order sigma-delta ADC has two integrators and two feedback loops, but will not be considered here.  Those interested in this topic may refer to [3]. <br><br>  In fig.  5 shows the signals in the ADC at the zero level at the input (top) and at the level Vref / 2 (bottom). <br><br><img src="https://habrastorage.org/storage1/6afd2871/5210c27c/83bd84ae/7cd62908.gif"><br><br>  Fig.  5. Signals in the ADC at different signal levels at the input. <br><br>  More clearly the work of the sigma-delta ADC is demonstrated by a small program located here: <a href="http://designtools.analog.com/dt/sdtutorial/sdtutorial.html">http://designtools.analog.com/dt/sdtutorial/sdtutorial.html.</a> <br><br>  Now, without going into complex mathematical analysis, let us try to understand why sigma-delta ADCs have a very low level of intrinsic noise. <br><br>  Consider the block diagram of a sigma-delta modulator, shown in Fig.  3, and present it in this form (Fig. 6): <br><br><img src="https://habrastorage.org/storage1/9f041a7b/27da7c16/c16e9419/5f08bec3.gif"><br><br>  Fig.  6. Block diagram of sigma-delta modulator <br><br>  Here the comparator is represented as an adder, which summarizes the continuous wanted signal and quantization noise. <br><br>  Let the integrator have a transfer function of 1 / s.  Then, by representing the useful signal as X (s), the output of the sigma-delta modulator as Y (s), and the quantization noise as E (s), we obtain the transfer function of the ADC: <br><br>  Y (s) = X (s) / (s + 1) + E (s) s / (s + 1) <br><br>  That is, in fact, the sigma-delta modulator is a low-pass filter (1 / (s + 1)) for the wanted signal, and a high-pass filter (s / (s + 1)) for noise, and both filters have the same cut-off frequency.  Noise, concentrated in the high-frequency region of the spectrum, is easily removed by a digital low-pass filter that stands after the modulator. <br><br><img src="https://habrastorage.org/storage1/b3e85dd6/06bab4b7/eafede3f/2c448f8d.gif"><br><br>  Fig.  7. The phenomenon of "crowding out" of noise in the high-frequency part of the spectrum <br><br>  However, it should be understood that this is an extremely simplified explanation of the phenomenon of noise shaping in a sigma-delta ADC. <br><br>  So, the main advantage of the sigma-delta ADC is high accuracy, due to the extremely low level of intrinsic noise.  However, to achieve high accuracy, it is necessary that the cutoff frequency of the digital filter is as low as possible, many times smaller than the frequency of operation of the sigma-delta modulator.  Therefore, sigma-delta ADC have a low conversion rate. <br><br>  They can be used in audio equipment, but they are mainly used in industrial automation for converting sensor signals, in measuring instruments, and in other applications where high accuracy is required.  but not required high speed. <br><br>  <b>A bit of history</b> <br><br>  The oldest ADC reference in history is probably the Paul M. Rainey patent, ‚ÄúFacsimile Telegraph System,‚Äù US Patent 1,608,527, Filed July 20, 1921, Issued November 30, 1926. The device depicted in the patent is actually a 5-bit direct conversion ADC . <br><br><img src="https://habrastorage.org/storage1/7f3750fd/d059fc3c/e0367a79/ce81d72a.jpg"><br><br>  Fig.  8. The first patent for ADC <br><br><img src="https://habrastorage.org/storage1/85e12231/3ad9713f/2134720c/3ff95363.jpg"><br><br>  Fig.  9. Direct Conversion ADC (1975) <br><br>  The device shown in the figure is a MOD-4100 direct conversion ADC manufactured by Computer Labs, manufactured in 1975, assembled on the basis of discrete comparators.  There are 16 comparators (they are located in a semicircle, in order to equalize the signal propagation delay to each comparator), therefore, the ADC has a bit depth of 4 bits.  The conversion rate is 100 MSPS, the power consumption is 14 watts. <br><br>  The following figure shows an advanced version of the direct conversion ADC. <br><br><img src="https://habrastorage.org/storage1/25363971/f01fc7ab/31c64e56/ea7f7a47.jpg"><br><br>  Fig.  10. ADC direct conversion (1970) <br><br>  The 1970 VHS-630 device manufactured by Computer Labs contained 64 comparators, had a bit width of 6 bits, a speed of 30MSPS and consumed 100 watts (the 1975 version of the VHS-675 had a speed of 75 MSPS and a consumption of 130 watts). <br><br>  <b>Literature</b> <br><br>  W. Kester.  ADC Architectures I: The Flash Converter.  Analog Devices, MT-020 Tutorial.  <a href="http://www.analog.com/static/imported-files/tutorials/MT-020.pdf">www.analog.com/static/imported-files/tutorials/MT-020.pdf</a> <br>  W. Kester.  ADC Architectures II: Successive Approximation ADC.  Analog Devices, MT-021 Tutorial.  <a href="http://www.analog.com/static/imported-files/tutorials/MT-021.pdf">www.analog.com/static/imported-files/tutorials/MT-021.pdf</a> <br>  W. Kester.  ADC Architectures III: Sigma-Delta ADC Basics.  Analog Devices, MT-022 Tutorial.  <a href="http://www.analog.com/static/imported-files/tutorials/MT-022.pdf">www.analog.com/static/imported-files/tutorials/MT-022.pdf</a> <br>  W. Kester.  ADC Architectures IV: Sigma-Delta ADC Advanced Concepts and Applications.  Analog Devices, MT-023 Tutorial.  <a href="http://www.analog.com/static/imported-files/tutorials/MT-023.pdf">www.analog.com/static/imported-files/tutorials/MT-023.pdf</a> </div><p>Source: <a href="https://habr.com/ru/post/125029/">https://habr.com/ru/post/125029/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../125022/index.html">Leaks and laws. Who is guilty?</a></li>
<li><a href="../125023/index.html">Evernote Competition Finalists</a></li>
<li><a href="../125025/index.html">Manage WebSphere Application Server Scheduler Tables from Java</a></li>
<li><a href="../125026/index.html">Application Dress (Useful links)</a></li>
<li><a href="../125027/index.html">‚ÄúKosher Facebook‚Äù or another ‚Äúnot for all‚Äù network</a></li>
<li><a href="../125030/index.html">Mango has moved to the status of RTM and it presents the first smartphone</a></li>
<li><a href="../125031/index.html">Evernote Developer Contest Finalists Revealed!</a></li>
<li><a href="../125033/index.html">Magento FAQ or answers to all your questions</a></li>
<li><a href="../125035/index.html">Does Habrahabr help you in your work?</a></li>
<li><a href="../125036/index.html">Sysadmin Day is coming!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
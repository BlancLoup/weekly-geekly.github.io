<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Temperature control in server cabinets with Arduino</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In a previous post I talked about projects created by FLProg users. And today I want to talk about the system created by me. 

 Server at the station ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Temperature control in server cabinets with Arduino</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/dc8/693/d0b/dc8693d0b51846b3a579e701c0d5a42e.jpg" align="left">  In <a href="http://habrahabr.ru/company/flprog/blog/240651/">a</a> previous post I talked about projects created by FLProg users.  And today I want to talk about the system created by me. <br><br>  Server at the station where I work, as it should be in a separate room.  For cooling servers there are two air conditioners.  Unfortunately, these are ordinary household models, so regularly one or the other is under repair.  The management of the department, knowing about my work on the FLProg project, proposed to create a system for monitoring the temperature in the server cabinets, and controlling the operation of their fans.  Information on the current temperature should be displayed on the board in the room of engineers on duty, and in the case of a temperature rise above a certain threshold, issue an audible alarm.  I took this job, and that's what happened ... <br><a name="habracut"></a><br>  The situation was complicated by the fact that we are somewhere 200 kilometers from the nearest civilization, and I had to collect the system from the reserves that I had with me, plus something from the old rubbish from the storerooms.  In stock I had: <br><br>  1. Arduino Nano <br>  2. DS18B20 temperature sensor <br>  3. Two temperature and humidity sensors DHT-22 <br>  4. Four-line display for 20 characters per line with I2C board 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The scheme of the device was developed: <a href="http://yadi.sk/i/_iHfF8Jwcusjp/">Schematic diagram</a> <br><br>  Then printed circuit boards are developed: <br><br><img src="https://habrastorage.org/files/32e/a3a/7c9/32ea3a7c9adf46e79244e6196aceb8bb.PNG"><br>  <a href="https://yadi.sk/d/bS0kuRpycusk5">Sprint-Layout_6 main board</a> <br><br><img src="https://habrastorage.org/files/9cf/006/a76/9cf006a7664243dba456798e085e7059.PNG"><br>  <a href="https://yadi.sk/d/cf16HGWwcusjJ">Push-button board in the program Sprint-Layout_6</a> <br><br>  There was no iron and special paper for the LUT technology, so I had to remember my childhood and paint the boards with pens with varnish ejected from the cleaning woman. <br><br><img src="https://habrastorage.org/files/98c/de1/ffa/98cde1ffa3dd42a5a50dde4c597ddfd5.jpg"><br><img src="https://habrastorage.org/files/393/d31/103/393d31103f7649528b344d4f015e52e3.jpg"><br><img src="https://habrastorage.org/files/b2c/680/ca3/b2c680ca3c514608a512824d9ec376c5.png"><br><img src="https://habrastorage.org/files/c7b/684/33a/c7b68433a29f4374b1ff9b14fde882ec.png"><br><br>  After the initial assembly and casting of the test sketch, the first problems arose.  First, the relays refused to work, although 5 volts came to the coils.  Before installing on the board, I naturally checked the resistance of the coils and applied power to them with a test of the drawdown.  It turned out that the relay is very tricky.  Although there are no diodes inside (the coils are called the same way in both directions), the polarity of the power supply on the coils plays a role for them.  Most likely, they have a magnetized armature to reduce the response current.  Because of this, relyushki moved to the other side of the board.  After moving relyushek everything worked fine. <br><br><img src="https://habrastorage.org/files/cad/788/a6d/cad788a6d1774d539629fe48f8f51184.png"><br><img src="https://habrastorage.org/files/c7d/174/d97/c7d174d979c54f4b8160fae956eb4492.png"><br><br>  Then the final firmware was developed for the board. <br><br>  <a href="https://yadi.sk/d/XX-vOXFEcusjL">Project in FLProg</a> . <br><br><div class="spoiler">  <b class="spoiler_title">To sketch</b> <div class="spoiler_text"><pre><code class="hljs go">#include &lt;Wire.h&gt; #include &lt;OneWire.h&gt; #include &lt;LiquidCrystal_I2C.h&gt; #include &lt;EEPROM.h&gt; #include <span class="hljs-string"><span class="hljs-string">"DHT.h"</span></span> LiquidCrystal_I2C _lcd1(<span class="hljs-number"><span class="hljs-number">0x3F</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _dispTempLength1=<span class="hljs-number"><span class="hljs-number">0</span></span>; boolean _isNeedClearDisp1; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> _d18x2x1Addr[<span class="hljs-number"><span class="hljs-number">8</span></span>]={<span class="hljs-number"><span class="hljs-number">0x28</span></span>, <span class="hljs-number"><span class="hljs-number">0xFF</span></span>, <span class="hljs-number"><span class="hljs-number">0x11</span></span>, <span class="hljs-number"><span class="hljs-number">0x94</span></span>, <span class="hljs-number"><span class="hljs-number">0x3C</span></span>, <span class="hljs-number"><span class="hljs-number">0x4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>, <span class="hljs-number"><span class="hljs-number">0x48</span></span>}; DHT _dht1(<span class="hljs-number"><span class="hljs-number">11</span></span>, DHT22); OneWire _ow10(<span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv3 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv4 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv5 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _gtv2 = <span class="hljs-number"><span class="hljs-number">23</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _gtv6 = <span class="hljs-number"><span class="hljs-number">27</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _gtv7 = <span class="hljs-number"><span class="hljs-number">30</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _gtv8 = <span class="hljs-number"><span class="hljs-number">35</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _gtv9 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv10 = <span class="hljs-number"><span class="hljs-number">0</span></span>; String _gtv11 = <span class="hljs-string"><span class="hljs-string">"_C"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv12 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv13 = <span class="hljs-number"><span class="hljs-number">0</span></span>; float _gtv14 = <span class="hljs-number"><span class="hljs-number">0</span></span>; float _gtv15 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv16 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _gtv17 = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv18 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv19 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv20 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv21 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv22 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv23 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv24 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv25 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv26 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv27 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gtv28 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt9 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt9I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _bounse1S = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _bounse1O = <span class="hljs-number"><span class="hljs-number">0</span></span>; unsigned long _bounse1P = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt4 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt4I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _bounse2S = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _bounse2O = <span class="hljs-number"><span class="hljs-number">0</span></span>; unsigned long _bounse2P = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt5 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt5I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _bounse3S = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _bounse3O = <span class="hljs-number"><span class="hljs-number">0</span></span>; unsigned long _bounse3P = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt8 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt8I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _count1I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _count1P = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _tim1I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _tim1O = <span class="hljs-number"><span class="hljs-number">0</span></span>; unsigned long _tim1P = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt1I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt2I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt3 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt3I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _disp1oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; String _mux1; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _disp3oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _disp4oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _disp5oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _disp6oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _disp7oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; String _swi2; String _swi3; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _disp2oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; String _mux2; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _disp8oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _disp9oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _disp10oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _disp11oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _disp12oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; String _swi4; String _swi5; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt10 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt10I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt11 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt11I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt12 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt12I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt13 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt13I = <span class="hljs-number"><span class="hljs-number">0</span></span>; unsigned long _d18x2x1Tti = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; float _d18x2x1O = <span class="hljs-number"><span class="hljs-number">0.00</span></span>; unsigned long _dht1Tti = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; float _dht1t = <span class="hljs-number"><span class="hljs-number">0.00</span></span>; float _dht1h = <span class="hljs-number"><span class="hljs-number">0.00</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgr1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgr2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt6 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt6I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgr3 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgr4 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt7 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgrt7I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _trgr5 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _pzs1OES = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _pzs1OFS = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gen1I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gen1O = <span class="hljs-number"><span class="hljs-number">0</span></span>; unsigned long _gen1P = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _swi1; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _D1B1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gen2I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _gen2O = <span class="hljs-number"><span class="hljs-number">0</span></span>; unsigned long _gen2P = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; String _swi6; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _disp13oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _SEEPR1OSN = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _SEEPR2OSN = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _SEEPR3OSN = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _SEEPR4OSN = <span class="hljs-number"><span class="hljs-number">0</span></span>; void setup() { Wire.begin(); pinMode(<span class="hljs-number"><span class="hljs-number">12</span></span>, OUTPUT); pinMode(<span class="hljs-number"><span class="hljs-number">4</span></span>, OUTPUT); pinMode(<span class="hljs-number"><span class="hljs-number">3</span></span>, OUTPUT); pinMode(<span class="hljs-number"><span class="hljs-number">2</span></span>, OUTPUT); _lcd1.init(); _lcd1.noBacklight(); _dht1.begin(); } void loop() {<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_isTimer(_dht1Tti, <span class="hljs-number"><span class="hljs-number">6000</span></span>)) { _dht1Tti = millis(); float tempDht11; tempDht11 = _dht1.readTemperature(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(isnan(tempDht11))){_dht1t=tempDht11; } }<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_isNeedClearDisp1) {_lcd1.clear(); _isNeedClearDisp1= <span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt9I) { _trgrt9 = <span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt9 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt9I = <span class="hljs-number"><span class="hljs-number">1</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt9 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt9I = <span class="hljs-number"><span class="hljs-number">0</span></span>;}; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt9) { _gtv6 = (EEPROMReadInt(<span class="hljs-number"><span class="hljs-number">0</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt9) { _gtv7 = (EEPROMReadInt(<span class="hljs-number"><span class="hljs-number">2</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt9) { _gtv2 = (EEPROMReadInt(<span class="hljs-number"><span class="hljs-number">4</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt9) { _gtv8 = (EEPROMReadInt(<span class="hljs-number"><span class="hljs-number">6</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _bounceTmp1 = ! (( (analogRead (<span class="hljs-number"><span class="hljs-number">3</span></span>))) &gt; (<span class="hljs-number"><span class="hljs-number">500</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_bounse1S) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (millis() &gt;= (_bounse1P + <span class="hljs-number"><span class="hljs-number">40</span></span>)) {_bounse1O= _bounceTmp1; _bounse1S=<span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_bounceTmp1 != _bounse1O ) {_bounse1S=<span class="hljs-number"><span class="hljs-number">1</span></span>; _bounse1P = millis();} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_bounse1O) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt4I) { _trgrt4 = <span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt4 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt4I = <span class="hljs-number"><span class="hljs-number">1</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt4 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt4I = <span class="hljs-number"><span class="hljs-number">0</span></span>;}; _gtv3 = _bounse1O; _gtv12 = (_trgrt4) &amp;&amp; (!(_gtv20)) ; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _bounceTmp2 = ! (( (analogRead (<span class="hljs-number"><span class="hljs-number">2</span></span>))) &gt; (<span class="hljs-number"><span class="hljs-number">500</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_bounse2S) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (millis() &gt;= (_bounse2P + <span class="hljs-number"><span class="hljs-number">40</span></span>)) {_bounse2O= _bounceTmp2; _bounse2S=<span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_bounceTmp2 != _bounse2O ) {_bounse2S=<span class="hljs-number"><span class="hljs-number">1</span></span>; _bounse2P = millis();} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_bounse2O) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt5I) { _trgrt5 = <span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt5 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt5I = <span class="hljs-number"><span class="hljs-number">1</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt5 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt5I = <span class="hljs-number"><span class="hljs-number">0</span></span>;}; _gtv4 = _bounse2O; _gtv13 = (_trgrt5) &amp;&amp; (!(_gtv20)) ; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _bounceTmp3 = ! (( (analogRead (<span class="hljs-number"><span class="hljs-number">1</span></span>))) &gt; (<span class="hljs-number"><span class="hljs-number">500</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_bounse3S) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (millis() &gt;= (_bounse3P + <span class="hljs-number"><span class="hljs-number">40</span></span>)) {_bounse3O= _bounceTmp3; _bounse3S=<span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_bounceTmp3 != _bounse3O ) {_bounse3S=<span class="hljs-number"><span class="hljs-number">1</span></span>; _bounse3P = millis();} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_bounse3O) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt8I) { _trgrt8 = <span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt8 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt8I = <span class="hljs-number"><span class="hljs-number">1</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt8 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt8I = <span class="hljs-number"><span class="hljs-number">0</span></span>;}; _gtv5 = _bounse3O; _gtv19 = (_trgrt8) &amp;&amp; (!(_gtv20)) ; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_gtv19) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (! _count1I) { _count1P = _count1P+<span class="hljs-number"><span class="hljs-number">1</span></span>; _count1I = <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _count1I=<span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_count1P &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> ) _count1P = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (_gtv1) || (_gtv10) ) _count1P = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_gtv5) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt1I) { _trgrt1 = <span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt1I = <span class="hljs-number"><span class="hljs-number">1</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt1I = <span class="hljs-number"><span class="hljs-number">0</span></span>;}; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_gtv3) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt2I) { _trgrt2 = <span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt2 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt2I = <span class="hljs-number"><span class="hljs-number">1</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt2I = <span class="hljs-number"><span class="hljs-number">0</span></span>;}; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_gtv4) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt3I) { _trgrt3 = <span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt3 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt3I = <span class="hljs-number"><span class="hljs-number">1</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt3 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt3I = <span class="hljs-number"><span class="hljs-number">0</span></span>;}; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ((_count1P) &gt; (<span class="hljs-number"><span class="hljs-number">0</span></span>)) &amp;&amp; ((! (_trgrt1) || (_trgrt2) || (_trgrt3) )) ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_tim1I) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( _isTimer(_tim1P, <span class="hljs-number"><span class="hljs-number">60000</span></span>)) _tim1O = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _tim1I = <span class="hljs-number"><span class="hljs-number">1</span></span>; _tim1P = millis(); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _tim1O = <span class="hljs-number"><span class="hljs-number">0</span></span>; _tim1I = <span class="hljs-number"><span class="hljs-number">0</span></span>; } _gtv9 = _count1P; _gtv1 = _count1P &gt;= <span class="hljs-number"><span class="hljs-number">5</span></span>; _gtv10 = _tim1O; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((_gtv9) == <span class="hljs-number"><span class="hljs-number">0</span></span>) {_mux1 = String(<span class="hljs-string"><span class="hljs-string">"Terst"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((_gtv9) == <span class="hljs-number"><span class="hljs-number">1</span></span>) {_mux1 = String(<span class="hljs-string"><span class="hljs-string">"Value Off"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((_gtv9) == <span class="hljs-number"><span class="hljs-number">2</span></span>) {_mux1 = String(<span class="hljs-string"><span class="hljs-string">"Value 1 On"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((_gtv9) == <span class="hljs-number"><span class="hljs-number">3</span></span>) {_mux1 = String(<span class="hljs-string"><span class="hljs-string">"Value 2 On"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((_gtv9) == <span class="hljs-number"><span class="hljs-number">4</span></span>) {_mux1 = String(<span class="hljs-string"><span class="hljs-string">"Value Alarm"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((_gtv9) &gt; (<span class="hljs-number"><span class="hljs-number">0</span></span>)) { _dispTempLength1 = ((_mux1)).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp1oldLength &gt; _dispTempLength1) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>;} _disp1oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>((<span class="hljs-number"><span class="hljs-number">20</span></span> - _dispTempLength1)/<span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>); _lcd1.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>((_mux1)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp1oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp1oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-number"><span class="hljs-number">0</span></span>) == (_gtv9)) { _dispTempLength1 = (String(<span class="hljs-string"><span class="hljs-string">"SU T:"</span></span>)).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp3oldLength &gt; _dispTempLength1) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>;} _disp3oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); _lcd1.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(String(<span class="hljs-string"><span class="hljs-string">"SU T:"</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp3oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp3oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-number"><span class="hljs-number">0</span></span>) == (_gtv9)) { _dispTempLength1 = ((( _floatToStringWitRaz(_gtv14,<span class="hljs-number"><span class="hljs-number">1</span></span>)))).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp4oldLength &gt; _dispTempLength1) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>;} _disp4oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); _lcd1.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>((( _floatToStringWitRaz(_gtv14,<span class="hljs-number"><span class="hljs-number">1</span></span>)))); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp4oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp4oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-number"><span class="hljs-number">0</span></span>) == (_gtv9)) { _dispTempLength1 = (String(<span class="hljs-string"><span class="hljs-string">"C"</span></span>)).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp5oldLength &gt; _dispTempLength1) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>;} _disp5oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); _lcd1.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(String(<span class="hljs-string"><span class="hljs-string">"C"</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp5oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp5oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_gtv21) {_swi2=String(<span class="hljs-string"><span class="hljs-string">"*"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_swi2=String(<span class="hljs-string"><span class="hljs-string">"-"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-number"><span class="hljs-number">0</span></span>) == (_gtv9)) { _dispTempLength1 = ((_swi2)).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp6oldLength &gt; _dispTempLength1) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>;} _disp6oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); _lcd1.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>((_swi2)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp6oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp6oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_gtv22) {_swi3=String(<span class="hljs-string"><span class="hljs-string">"*"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_swi3=String(<span class="hljs-string"><span class="hljs-string">"-"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-number"><span class="hljs-number">0</span></span>) == (_gtv9)) { _dispTempLength1 = ((_swi3)).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp7oldLength &gt; _dispTempLength1) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>;} _disp7oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); _lcd1.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>((_swi3)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp7oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp7oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((_gtv9) == <span class="hljs-number"><span class="hljs-number">0</span></span>) {_mux2 = String(<span class="hljs-string"><span class="hljs-string">"test"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((_gtv9) == <span class="hljs-number"><span class="hljs-number">1</span></span>) {_mux2 = (((String(_gtv2))) + (_gtv11));} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((_gtv9) == <span class="hljs-number"><span class="hljs-number">2</span></span>) {_mux2 = (((String(_gtv6))) + (_gtv11));} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((_gtv9) == <span class="hljs-number"><span class="hljs-number">3</span></span>) {_mux2 = (((String(_gtv7))) + (_gtv11));} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((_gtv9) == <span class="hljs-number"><span class="hljs-number">4</span></span>) {_mux2 = (((String(_gtv8))) + (_gtv11));} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((_gtv9) &gt; (<span class="hljs-number"><span class="hljs-number">0</span></span>)) { _dispTempLength1 = ((_mux2)).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp2oldLength &gt; _dispTempLength1) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>;} _disp2oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>((<span class="hljs-number"><span class="hljs-number">20</span></span> - _dispTempLength1)/<span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span>); _lcd1.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>((_mux2)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp2oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp2oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-number"><span class="hljs-number">0</span></span>) == (_gtv9)) { _dispTempLength1 = (String(<span class="hljs-string"><span class="hljs-string">"CU T:"</span></span>)).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp8oldLength &gt; _dispTempLength1) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>;} _disp8oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); _lcd1.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(String(<span class="hljs-string"><span class="hljs-string">"CU T:"</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp8oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp8oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-number"><span class="hljs-number">0</span></span>) == (_gtv9)) { _dispTempLength1 = ((( _floatToStringWitRaz(_gtv15,<span class="hljs-number"><span class="hljs-number">1</span></span>)))).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp9oldLength &gt; _dispTempLength1) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>;} _disp9oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); _lcd1.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>((( _floatToStringWitRaz(_gtv15,<span class="hljs-number"><span class="hljs-number">1</span></span>)))); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp9oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp9oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-number"><span class="hljs-number">0</span></span>) == (_gtv9)) { _dispTempLength1 = (String(<span class="hljs-string"><span class="hljs-string">"C"</span></span>)).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp10oldLength &gt; _dispTempLength1) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>;} _disp10oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); _lcd1.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(String(<span class="hljs-string"><span class="hljs-string">"C"</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp10oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp10oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_gtv23) {_swi4=String(<span class="hljs-string"><span class="hljs-string">"*"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_swi4=String(<span class="hljs-string"><span class="hljs-string">"-"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-number"><span class="hljs-number">0</span></span>) == (_gtv9)) { _dispTempLength1 = ((_swi4)).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp11oldLength &gt; _dispTempLength1) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>;} _disp11oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); _lcd1.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>((_swi4)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp11oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp11oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_gtv24) {_swi5=String(<span class="hljs-string"><span class="hljs-string">"*"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_swi5=String(<span class="hljs-string"><span class="hljs-string">"-"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-number"><span class="hljs-number">0</span></span>) == (_gtv9)) { _dispTempLength1 = ((_swi5)).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp12oldLength &gt; _dispTempLength1) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>;} _disp12oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); _lcd1.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>((_swi5)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp12oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp12oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (_gtv5) &amp;&amp; (_gtv3) &amp;&amp; (_gtv4) ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt10I) { _trgrt10 = <span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt10 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt10I = <span class="hljs-number"><span class="hljs-number">1</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt10 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt10I = <span class="hljs-number"><span class="hljs-number">0</span></span>;}; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (_gtv12) &amp;&amp; ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">1</span></span>)) ) { _gtv2 = (_gtv2)+(<span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">1</span></span>)) &amp;&amp; (_gtv13) ) { _gtv2 = (_gtv2)-(<span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt10) { _gtv2 = <span class="hljs-number"><span class="hljs-number">25</span></span>; } _gtv25 = ( (_gtv12) &amp;&amp; ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">1</span></span>)) ) || ( ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">1</span></span>)) &amp;&amp; (_gtv13) ) || (_trgrt10) ; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (_gtv5) &amp;&amp; (_gtv3) &amp;&amp; (_gtv4) ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt11I) { _trgrt11 = <span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt11 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt11I = <span class="hljs-number"><span class="hljs-number">1</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt11 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt11I = <span class="hljs-number"><span class="hljs-number">0</span></span>;}; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (_gtv12) &amp;&amp; ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">2</span></span>)) ) { _gtv6 = (_gtv6)+(<span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">2</span></span>)) &amp;&amp; (_gtv13) ) { _gtv6 = (_gtv6)-(<span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt11) { _gtv6 = <span class="hljs-number"><span class="hljs-number">27</span></span>; } _gtv26 = ( (_gtv12) &amp;&amp; ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">2</span></span>)) ) || ( ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">2</span></span>)) &amp;&amp; (_gtv13) ) || (_trgrt11) ; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (_gtv5) &amp;&amp; (_gtv3) &amp;&amp; (_gtv4) ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt12I) { _trgrt12 = <span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt12 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt12I = <span class="hljs-number"><span class="hljs-number">1</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt12 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt12I = <span class="hljs-number"><span class="hljs-number">0</span></span>;}; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (_gtv12) &amp;&amp; ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">3</span></span>)) ) { _gtv7 = (_gtv7)+(<span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">3</span></span>)) &amp;&amp; (_gtv13) ) { _gtv7 = (_gtv7)-(<span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt12) { _gtv7 = <span class="hljs-number"><span class="hljs-number">30</span></span>; } _gtv27 = ( (_gtv12) &amp;&amp; ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">3</span></span>)) ) || ( ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">3</span></span>)) &amp;&amp; (_gtv13) ) || (_trgrt12) ; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (_gtv5) &amp;&amp; (_gtv3) &amp;&amp; (_gtv4) ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt13I) { _trgrt13 = <span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt13 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt13I = <span class="hljs-number"><span class="hljs-number">1</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt13 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt13I = <span class="hljs-number"><span class="hljs-number">0</span></span>;}; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (_gtv12) &amp;&amp; ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">4</span></span>)) ) { _gtv8 = (_gtv8)+(<span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">4</span></span>)) &amp;&amp; (_gtv13) ) { _gtv8 = (_gtv8)-(<span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt13) { _gtv8 = <span class="hljs-number"><span class="hljs-number">35</span></span>; } _gtv28 = ( (_gtv12) &amp;&amp; ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">4</span></span>)) ) || ( ((_gtv9) == (<span class="hljs-number"><span class="hljs-number">4</span></span>)) &amp;&amp; (_gtv13) ) || (_trgrt13) ; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_isTimer(_d18x2x1Tti, <span class="hljs-number"><span class="hljs-number">5000</span></span>)) { _d18x2x1Tti = millis(); _d18x2x1O= _readDS18_ow10(_d18x2x1Addr, <span class="hljs-number"><span class="hljs-number">0</span></span>);} _gtv14 = (_d18x2x1O); _gtv15 = _dht1t; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>((_gtv14)*(_gtv17)))) &lt; ((_gtv2)*(_gtv17))) _trgr1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>((_gtv14)*(_gtv17)))) &gt; ((_gtv6)*(_gtv17))) _trgr1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>((_gtv14)*(_gtv17)))) &lt; ((_gtv2)*(_gtv17))) _trgr2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>((_gtv14)*(_gtv17)))) &gt; ((_gtv7)*(_gtv17))) _trgr2 = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>((_gtv14)*(_gtv17)))) &gt; ((_gtv17)*(_gtv8))) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt6I) { _trgrt6 = <span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt6 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt6I = <span class="hljs-number"><span class="hljs-number">1</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt6 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt6I = <span class="hljs-number"><span class="hljs-number">0</span></span>;}; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>((_gtv17)*(_gtv15)))) &lt; ((_gtv2)*(_gtv17))) _trgr3 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>((_gtv17)*(_gtv15)))) &gt; ((_gtv6)*(_gtv17))) _trgr3 = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>((_gtv17)*(_gtv15)))) &lt; ((_gtv2)*(_gtv17))) _trgr4 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>((_gtv17)*(_gtv15)))) &gt; ((_gtv7)*(_gtv17))) _trgr4 = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>((_gtv17)*(_gtv15)))) &gt; ((_gtv17)*(_gtv8))) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgrt7I) { _trgrt7 = <span class="hljs-number"><span class="hljs-number">0</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt7 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _trgrt7I = <span class="hljs-number"><span class="hljs-number">1</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_trgrt7 = <span class="hljs-number"><span class="hljs-number">0</span></span>; _trgrt7I = <span class="hljs-number"><span class="hljs-number">0</span></span>;}; _gtv16 = _trgrt6; _gtv21 = _trgr1; digitalWrite(<span class="hljs-number"><span class="hljs-number">12</span></span>, _trgr1); digitalWrite(<span class="hljs-number"><span class="hljs-number">3</span></span>, _trgr3); _gtv18 = _trgrt7; _gtv23 = _trgr3; _gtv22 = _trgr2; digitalWrite(<span class="hljs-number"><span class="hljs-number">4</span></span>, _trgr2); digitalWrite(<span class="hljs-number"><span class="hljs-number">2</span></span>, _trgr4); _gtv24 = _trgr4; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( (_gtv5) || (_gtv3) || (_gtv4) ) _trgr5 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( (_gtv16) || (_gtv18) ) _trgr5 = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgr5) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (! _gen1I) { _gen1I = <span class="hljs-number"><span class="hljs-number">1</span></span>; _gen1O = <span class="hljs-number"><span class="hljs-number">1</span></span>; _gen1P = millis(); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _gen1I = <span class="hljs-number"><span class="hljs-number">0</span></span> ; _gen1O= <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_gen1I ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( _isTimer ( _gen1P , <span class="hljs-number"><span class="hljs-number">500</span></span> )) { _gen1P = millis(); _gen1O = ! _gen1O; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( (!(_trgr5)) || (_gen1O) ) {<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(! _D1B1){_lcd1.backlight(); _D1B1=<span class="hljs-number"><span class="hljs-number">1</span></span>; }} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_D1B1){_lcd1.noBacklight(); _D1B1=<span class="hljs-number"><span class="hljs-number">0</span></span>; }} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_gen1O) {_swi1=<span class="hljs-number"><span class="hljs-number">3000</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_swi1=<span class="hljs-number"><span class="hljs-number">2500</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_trgr5) {<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((!_pzs1OES) || (_swi1 != _pzs1OFS)){ tone(<span class="hljs-number"><span class="hljs-number">13</span></span>, (_swi1)); _pzs1OES =<span class="hljs-number"><span class="hljs-number">1</span></span>;_pzs1OFS = _swi1;}} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_pzs1OES){noTone(<span class="hljs-number"><span class="hljs-number">13</span></span>); _pzs1OES =<span class="hljs-number"><span class="hljs-number">0</span></span>; }} _gtv20 = _trgr5; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (! _gen2I) { _gen2I = <span class="hljs-number"><span class="hljs-number">1</span></span>; _gen2O = <span class="hljs-number"><span class="hljs-number">1</span></span>; _gen2P = millis(); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _gen2I = <span class="hljs-number"><span class="hljs-number">0</span></span> ; _gen2O= <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_gen2I ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( _isTimer ( _gen2P , <span class="hljs-number"><span class="hljs-number">1000</span></span> )) { _gen2P = millis(); _gen2O = ! _gen2O; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_gen2O) {_swi6=String(<span class="hljs-string"><span class="hljs-string">"----"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {_swi6=String(<span class="hljs-string"><span class="hljs-string">"****"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { _dispTempLength1 = ((_swi6)).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp13oldLength &gt; _dispTempLength1) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>;} _disp13oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>((<span class="hljs-number"><span class="hljs-number">20</span></span> - _dispTempLength1)/<span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-number"><span class="hljs-number">2</span></span>); _lcd1.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>((_swi6)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp13oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {_isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp13oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_gtv26){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!_SEEPR1OSN){ EEPROMWriteInt(<span class="hljs-number"><span class="hljs-number">0</span></span>, _gtv6); _SEEPR1OSN=<span class="hljs-number"><span class="hljs-number">1</span></span>;} }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_SEEPR1OSN){_SEEPR1OSN=<span class="hljs-number"><span class="hljs-number">0</span></span>;}} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_gtv27){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!_SEEPR2OSN){ EEPROMWriteInt(<span class="hljs-number"><span class="hljs-number">2</span></span>, _gtv7); _SEEPR2OSN=<span class="hljs-number"><span class="hljs-number">1</span></span>;} }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_SEEPR2OSN){_SEEPR2OSN=<span class="hljs-number"><span class="hljs-number">0</span></span>;}} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_gtv25){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!_SEEPR3OSN){ EEPROMWriteInt(<span class="hljs-number"><span class="hljs-number">4</span></span>, _gtv2); _SEEPR3OSN=<span class="hljs-number"><span class="hljs-number">1</span></span>;} }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_SEEPR3OSN){_SEEPR3OSN=<span class="hljs-number"><span class="hljs-number">0</span></span>;}} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_gtv28){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!_SEEPR4OSN){ EEPROMWriteInt(<span class="hljs-number"><span class="hljs-number">6</span></span>, _gtv8); _SEEPR4OSN=<span class="hljs-number"><span class="hljs-number">1</span></span>;} }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_SEEPR4OSN){_SEEPR4OSN=<span class="hljs-number"><span class="hljs-number">0</span></span>;}} } <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _isTimer(unsigned long startTime, unsigned long period ) { unsigned long endTime; endTime = startTime+period; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (millis() &gt;= endTime); } String _floatToStringWitRaz(float value, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> raz) { float tv; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ti = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(value); String ts = String(ti); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (raz == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ts; } ts += <span class="hljs-string"><span class="hljs-string">"."</span></span>; float tf = abs(value - ti); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt;= raz; i++ ) { tv = tf * <span class="hljs-number"><span class="hljs-number">10</span></span>; ti = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(tv); ts += String(ti); tf = (tv - ti); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ts; } float _convertDS18x2xData(<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> type_s, <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> data[<span class="hljs-number"><span class="hljs-number">12</span></span>]) { int16_t raw = (data[<span class="hljs-number"><span class="hljs-number">1</span></span>] &lt;&lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) | data[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (type_s) { raw = raw &lt;&lt; <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data[<span class="hljs-number"><span class="hljs-number">7</span></span>] == <span class="hljs-number"><span class="hljs-number">0x10</span></span>) { raw = (raw &amp; <span class="hljs-number"><span class="hljs-number">0xFFF0</span></span>) + <span class="hljs-number"><span class="hljs-number">12</span></span> - data[<span class="hljs-number"><span class="hljs-number">6</span></span>]; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> cfg = (data[<span class="hljs-number"><span class="hljs-number">4</span></span>] &amp; <span class="hljs-number"><span class="hljs-number">0x60</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg == <span class="hljs-number"><span class="hljs-number">0x00</span></span>) raw = raw &amp; ~<span class="hljs-number"><span class="hljs-number">7</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg == <span class="hljs-number"><span class="hljs-number">0x20</span></span>) raw = raw &amp; ~<span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg == <span class="hljs-number"><span class="hljs-number">0x40</span></span>) raw = raw &amp; ~<span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (float)raw / <span class="hljs-number"><span class="hljs-number">16.0</span></span>; } float _readDS18_ow10(<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> addr[<span class="hljs-number"><span class="hljs-number">8</span></span>], <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> type_s) { <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> data[<span class="hljs-number"><span class="hljs-number">12</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> i; _ow10.reset(); _ow10.<span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(addr); _ow10.write(<span class="hljs-number"><span class="hljs-number">0xBE</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">9</span></span>; i++) { data[i] = _ow10.read();} _ow10.reset(); _ow10.<span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(addr); _ow10.write(<span class="hljs-number"><span class="hljs-number">0x44</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _convertDS18x2xData(type_s, data);}<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> EEPROMReadInt(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> p_address) { <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> lowByte = EEPROM.read(p_address); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> highByte = EEPROM.read(p_address + <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ((lowByte &lt;&lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span>) + ((highByte &lt;&lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF00</span></span>); } void EEPROMWriteInt(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> p_address, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> p_value) { <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> lowByte = ((p_value &gt;&gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> highByte = ((p_value &gt;&gt; <span class="hljs-number"><span class="hljs-number">8</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span>); EEPROM.write(p_address, lowByte); EEPROM.write(p_address + <span class="hljs-number"><span class="hljs-number">1</span></span>, highByte); }</code> </pre> <br></div></div><br><br>  How the system works. <br>  When power is supplied to the controller, the settings of thresholds for switching on the steps of cabinet fans and alarm signal are read from the EEPROM. <br>  Every 5 seconds data from the sensors is read and displayed on the display.  When the temperature in the cabinet of the first threshold is exceeded, the first fan turns on, the second threshold turns on the second, and when the emergency temperature threshold is exceeded, a two-tone audible alarm turns on and the display backlight blinks.  Accident is acknowledged by pressing any of the buttons.  When the temperature drops below the set point for switching off the fans, both fans stop. <br>  Each time the ‚ÄúMenu‚Äù button is pressed, all settings are displayed in succession on the display screen.  Each setting can be changed with the ‚ÄúAdd‚Äù and ‚ÄúSubtract‚Äù buttons.  In this case, the new setpoint value is immediately recorded in the EEPROM. <br>  If within 1 minute no action is taken with the buttons, a transition to the main temperature indication screen occurs. <br>  When pressing three buttons at once, all settings are reset to the initial values ‚Äã‚Äãrecorded in the program.  This is necessary when the controller is first started, when there are unpredictable values ‚Äã‚Äãin the EEPROM.  I, for example, had an emergency temperature of 387 degrees, and I would be very tired of dumping it to 35 degrees by pressing the ‚ÄúTurn off‚Äù button. <br>  Starting the system on the table and warming up the sensors with a hair dryer showed the program's working capacity. <br><br><img src="https://habrastorage.org/files/01d/b4f/318/01db4f3181f946f58f15ab79e28559a0.png"><br><br>  Sensors were installed and cable runs to the cabinets. <br><br><img src="https://habrastorage.org/files/65f/be2/9a4/65fbe29a4c754b06b6fe987efcdda402.png"><br><img src="https://habrastorage.org/files/b50/b1d/792/b50b1d7929fc496e87d1eda115f798d0.png"><br><img src="https://habrastorage.org/files/e29/927/39e/e2992739e2464a6393017649ed2a2437.png"><br><img src="https://habrastorage.org/files/b74/918/1bb/b749181bb33a4ffdb6941e9f8d9e4af9.png"><br><br>  During trial operation, the following subtleties were discovered. <br>  First of all, in no case should cables be laid to the sensors along with cables to the fans.  I made this mistake, hoping for small currents of fans.  As a result, from time to time when the fan stopped, the controller hung.  After the cables were separated from each other, these hangs stopped.  Perhaps it would also help - the use of shielded wires to the sensors, but those were not available. <br><br><img src="https://habrastorage.org/files/050/0d0/b53/0500d0b535dc4cc3bcdae72e42524bc6.png"><br><br>  Please do not pay attention to the original display mount, but I found it too bold to put the four-line display on a permanent basis, and on the next watch I will replace it with a two-line one. <br>  Currently, the system works for the third week without freezing and failures 24/7. <br>  Now a little geek porn.  I could not resist and gutted the burned-down DHT-22 sensor.  Inside he was very smart. <br><br><img src="https://habrastorage.org/files/c88/b1c/535/c88b1c5359f746c38be1254aa2803972.png"><br><img src="https://habrastorage.org/files/00a/e25/9a8/00ae259a82904d7cb016b468e88b9454.png"></div><p>Source: <a href="https://habr.com/ru/post/244083/">https://habr.com/ru/post/244083/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../244069/index.html">PHPixie Illusion - a simple mock HTTP server for your tests.</a></li>
<li><a href="../244071/index.html">Multitasking in the Linux kernel: interrupts and tasklets</a></li>
<li><a href="../244073/index.html">Regin Trojan: Who is spying on GSM via Windows?</a></li>
<li><a href="../244075/index.html">Fear of criticism - an excuse for wimps or a real problem for designers</a></li>
<li><a href="../244079/index.html">GPS monitoring for personal use (part 1)</a></li>
<li><a href="../244085/index.html">How we implement Open source in state-owned companies and large-scale commerce in Russia</a></li>
<li><a href="../244087/index.html">NaviGuild your own navigator</a></li>
<li><a href="../244089/index.html">.NEXT 2014 Moscow: we break up the hall reports together</a></li>
<li><a href="../244091/index.html">Testing components in the Unity Engine</a></li>
<li><a href="../244093/index.html">LinkMeUp. Issue number 21. Network monitoring and management systems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
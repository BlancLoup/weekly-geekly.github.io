<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>You need to grow up to microservices, and not start with them</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I propose to talk about when microservices are needed, and when not. Spoiler: it depends on the project. 

 We, software developers, have a rather int...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>You need to grow up to microservices, and not start with them</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/2b4/f29/b7a/2b4f29b7a60997e7a39db714be0fe87e.jpg"><br><br>  <b>I propose to talk about when microservices are needed, and when not.</b>  <b>Spoiler: it depends on the project.</b> <br><br>  We, software developers, have a rather interesting profession.  We can calmly encode it all day long, and then read the article about something ‚Äî and it questions all of our work, because some Netflix said XYZ. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Just because of the opinion of one person or company, you begin to doubt everything that you have been doing for many years, even if everything worked perfectly. <br><a name="habracut"></a><br><h1>  You are not Google (unless you are Google) </h1><br>  When we read HackerNews and other news sites, we often see technical messages from Google, Netflix, Amazon and Facebook, and they like to talk about how many hundreds or thousands of services they launch.  They talk about the benefits of doing everything in their own way.  This is the trend of the past few years. <br><br>  But let's face it.  It is unlikely that you have 1000 developers who are working on a massive project with more than 10 years of history. <br><br>  <b>Just because Google does this does not mean that you should do it too.</b> <br><br>  We work in a completely different galaxy.  Google faces challenges that we‚Äôll probably never encounter, but at the same time we can do things that Google cannot. <br><br><h1>  How do most software projects start? </h1><br>  Many projects start with one person who does all the work.  There are a million examples, but let's look at Shopify.  Initially, the service was coded by Tobias Lutke (it was based on Ruby on Rails and still, by the way, works on "rails"). <br><br>  Do you think Tobias sat indecisively, painstakingly thinking through the ideal architecture on microservices, before writing the first line of code? <br><br>  Damn, no.  I was not present when developing the first version of Shopify, which initially was just an online store for snowboarding, but if Tobias looks like me (typical developer), then the process looked like this: <br><br><ol><li>  Learn new technology in the process of writing the original product. </li><li>  Write a rather non-standard (filthy), but fully working code. </li><li>  See how everything works together and get aroused. </li><li>  Reconstruct the type of ‚Äúfire burning‚Äù and improve the code when a problem occurs. </li><li>  Repeat this cycle when adding new features and running in a production environment. </li></ol><br>  This may seem like a very simple cycle, but it took me about 20 years of programming to understand how deep it was. <br><br>  You do not become better as a programmer, theoretically thinking out the optimal settings before writing the first line of code.  <b>You become better by writing a lot of code with the absolute and explicit intention to replace almost everything you write with the best code as soon as you begin to experience real problems.</b> <br><br>  The original code that you replaced is not wasted time or effort.  Over time, he largely helps you improve your level.  This is the secret ingredient. <br><br><h1>  Let's talk about code abstractions. </h1><br>  As developers, we have all heard the phrase <i>‚ÄúDRY: don't repeat yourself‚Äù</i> , and in general it is a sensible advice not to do the work again.  But often it is worth doing. <br><br>  It is worth repeating when you are trying to abstract something without full understanding and create something called a leaky abstraction. <br><br>  I usually do the work three times before THINKING at all about refactoring some code and removing duplicates.  Often, only after the 4th or 5th time do I take any measures. <br><br>  You really need to see several times how you duplicate code in different situations before it becomes clear what to translate into variables and delete from the places where this code is originally registered. <br><br>  <b>Levels of abstraction, from embedded code to external libraries:</b> <br><br><ol><li>  Write embedded code. </li><li>  Duplicate code in several different places. </li><li>  Extract duplicate code in function, etc. </li><li>  Some time to use these abstractions. </li><li>  See how this code interacts with other code. </li><li>  Extract general functionality to the internal library. </li><li>  For a long time use the internal library. </li><li>  Really understand how all the pieces come together. </li><li>  Create an external library (open source, etc.), if that makes sense. </li></ol><br>  The point is that you cannot "invent" a good library or framework.  Almost all the very successful tools that we use today come from real projects.  There our favorite tool is extracted from real cases of internal use. <br><br>  Rails is a great example.  DHH (author of Rails) did not wake up once and said: "Oh!  It's time to create directories models /, controllers / and views /! ‚Äù. <br><br>  Not.  He developed Basecamp (the real product), then certain templates appeared, and these templates were generalized and then extracted from Basecamp into Rails.  This process is still ongoing today, and, in my opinion, this is the only reason why Rails remains so successful. <br><br>  This is a perfect storm of very well-run (read: not theoretically developed) abstractions in combination with a programming language that allows you to write attractive code.  This also explains why almost all frameworks like ‚ÄúRails, only in XYZ‚Äù do not work.  They skip the key components of the chain of abstractions and think that they can simply duplicate Rails. <br><br><h1>  From abstractions to microservices </h1><br>  For me, microservices are just another level of abstraction.  This is not necessarily step 10 in the list above, because not all libraries are designed for microservices, but at the conceptual level it is similar to that. <br><br>  Microservices is not something you start with, just as you wouldn‚Äôt have tried to create the perfect open source external library right before writing at least a line of code.  At this moment you do not even know what exactly you are developing. <br><br>  <b>Microservice based architecture is what a project can turn into with time when you run into real problems.</b> <br><br>  You may never encounter these problems, and many of them can be solved otherwise.  Take a look at Basecamp and Shopify.  They both work well as monolithic applications. <br><br>  I don‚Äôt think anyone will call them small, although they don‚Äôt work on Google‚Äôs scale. <br><br><h3>  Shopify earns $ 17 million a month on a monolith </h3><br>  As of mid-2018, Shopify has publicly announced that <a href="https://stackshare.io/shopify/e-commerce-at-scale-inside-shopifys-tech-stack">over 600,000 online stores are</a> running on their platform. <br><br>  Shopify is a SaaS application that has the cheapest rate of $ 29 per month, and I have the feeling that many companies choose the $ 79 rate per month.  In any case, even if 600,000 customers used the cheapest plan for $ 29, this is $ 17.4 million in revenue per month only from the SaaS line of their business. <br><br>  Basecamp is another great monolithic application.  What is interesting about Basecamp is that they only have about 50 employees, and only some of them are software developers working on the main product. <br><br>  I want to say that you can go VERY far without going down the rabbit hole of microservices.  Do not create microservices just like that. <br><br><h1>  When should I use microservices? </h1><br>  It all depends on your decision.  This is just one of those things where you won‚Äôt google ‚Äúmicroservices against monolith‚Äù.  If you really need microservices, you will already know about it. <br><br>  But it may be a situation that you have a bunch of developers who are best suited to work on individual parts of the application.  Having dozens of teams working on different components of a product in isolation is <i>one</i> of the reasonable reasons for using microservices. <br><br>  Keep in mind that if you have a small team that grows slowly over time, then you can start with one or two microservices.  In such a situation, you probably should not break the monolith at once into 100 microservices, starting right off the bat. <br><br><h3>  Is the game worth the candle? </h3><br>  It is also worth mentioning that the transition to microservices is accompanied by its own set of problems.  You change one problem to another, so you need to weigh the pros and cons, whether the game is worth the candle specifically for your project. <br><br>  One of the main problems is monitoring.  Suddenly you have a lot of services that can be written on different technological stacks, work on several machines - and you need a way to track them in detail. <br><br>  This is a difficult task, because ideally we would like all microservices to use a single monitoring service. <br><br>  You probably do not want to develop your own tools, because this in itself can turn into a full-fledged work.  That's the reason for the success of companies like <a href="https://lightstep.com/">LightStep</a> .  This is one of the most interesting monitoring services that I came across. <br><br>  Their product is more focused on large-scale applications (understand why), but also works for small projects.  I recently heard about them because they were presented at <a href="https://nickjanetakis.com/blog/coming-back-to-cloud-field-day-for-the-second-time">Cloud Field Day 4</a> . <br><br>  In any case, monitoring is only one of many difficulties, but I decided to mention it because it is one of the most painful problems. <br><br>
<h1>  Final thoughts </h1><br>  Basically, I wrote this article for two reasons: <br><br>  <b>First</b> , two weeks ago, I visited <a href="https://nickjanetakis.com/blog/coming-back-to-cloud-field-day-for-the-second-time">Cloud Field Day 4</a> and accidentally participated in a group podcast on a related topic.  It should come out in a few months, but here I wanted to elaborate on some points. <br><br>  <b>Secondly</b> , as the author of online courses, I get a lot of questions about how to create my own applications. <br><br>  Many developers "hang out" trying to break their applications into isolated services even before they wrote the first line of code.  It comes to the fact that from the very beginning they are trying to use several databases for application components. <br><br>  This moment prevents them from moving forward, and as a fellow developer, I know how hard it is to get stuck in indecision (I had it!). <br><br>  By the way, I am currently working on a fairly large SaaS application - a platform for hosting user courses.  Right now I am working on a project alone, and you can be sure that I just opened the editor and started writing code on the very first day. <br><br>  I'm going to save the project as a completely monolithic application, until it makes sense to implement microservices, but the sense suggests that such a moment never comes. <br><br>  <b>What do you think about it?</b>  <b>Let me know in the comments.</b> </div><p>Source: <a href="https://habr.com/ru/post/427215/">https://habr.com/ru/post/427215/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../427203/index.html">Lumiere: talk about four unusual electronic instruments with photocells</a></li>
<li><a href="../427205/index.html">Habrakvest in honor of the 20th anniversary of the Mail.Ru Group: winners and answers</a></li>
<li><a href="../427207/index.html">Rockstar employees defended the company after criticizing 100-hour work weeks.</a></li>
<li><a href="../427209/index.html">GeoPuzzle - collect the world in pieces</a></li>
<li><a href="../427211/index.html">Electron is a flash for desktop</a></li>
<li><a href="../427217/index.html">Performance Analysis of WSGI Servers: Part Two</a></li>
<li><a href="../427219/index.html">Useless deferred non-blocking messaging in MPI: light analytics and tutorial for those who are a little "in the subject"</a></li>
<li><a href="../427221/index.html">What I realized on the way to my dream of artificial intelligence</a></li>
<li><a href="../427223/index.html">What are the responsibilities of the lead developer</a></li>
<li><a href="../427225/index.html">Oracle Database 18c XE Released</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using JMeter for distributed load organization</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Author: Roman Denisenko, Senior DataArt Testing Engineer. 

 Introduction 
 Quite often, when testing performance, the problem arises of loading a ver...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using JMeter for distributed load organization</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/5b9/7fa/49f/5b97fa49f7f4431595cffc81922163a8.png"><br><br>  Author: Roman Denisenko, Senior DataArt Testing Engineer. <br><br><h5>  <b>Introduction</b> </h5><br>  Quite often, when testing performance, the problem arises of loading a very high-performance system capable of digesting a huge number of simultaneous requests without problems.  Or it is possible that the experimental system is very sensitive to the source of the load, balancing its computing power depending on the geographical location of customers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To generate such a load, the capabilities of a single test machine are no longer enough.  And then the classic question arises - how can you reproduce such a load with a minimum of costs and maximum results. <br><br>  Fortunately, most modern software tools used for load testing allow the use of additional remote agents needed to emulate distributed load.  In this article, I would like to consider the possibility of creating a load cluster using, for example, one of the most common programs used by testers, the great and terrible Apache JMeter. <br><a name="habracut"></a><br><h5>  <b>Theory</b> </h5><br>  I think many people are familiar with the JMeter capabilities (if this is not the case, I highly advise reading some basic articles on the main functionality of this program to begin with), so I would like to focus more on the applicability of JMeter for distributed load. <br><br>  First, let's turn to the terminology adopted by the creators of JMeter.  And the terminology they have, to be honest, is rather strange.  In terms of JMeter, the server that manages the load is called the ‚Äúclient‚Äù.  Agents that receive commands from the main server and carry out the workload are called ‚Äúserver‚Äù.  Personally, my opinion, this terminology is a little inverse, but we will leave it on the conscience of the creators.  In the article I will use these terms.  A typical distributed load infrastructure created with JMeter can easily be represented in the image below. <br><br><img src="https://habrastorage.org/files/5d2/77e/8c0/5d277e8c07364ea3a4fc68605d499622.png"><br><br>  The logic of the distributed load is quite simple: the <i>client</i> sends the specified set of tests to each of the <i>servers</i> , and the <i>servers</i> , in turn, run these tests and send the collected results back to the <i>client</i> , which summarizes the information received and outputs it to the end user.  Thus, the difference in how many agents we use for the load is not particularly visible, and we can work in the same way as before with one machine. <br><br><h5>  <b>The working process:</b> </h5><br>  In order to make JMeter see remote agents and be able to contact them, you must perform the following steps: <br>  <b>1. Download</b> .  You need to download the latest version of JMeter <a href="https://jmeter.apache.org/download_jmeter.cgi">from the official site</a> .  The archive contains both versions - both client and server.  The dependency of how JMeter starts, as a server or as a client, is determined using the keys that are passed when the main executable file of the program is started.  It is worth considering the most important point - the <u>version of the server and clients must match!</u> <br><br>  <b>2. Installation</b> .  After that, you should unzip the downloaded archive on the machines on which we want to start the client and servers of the distributed load.  One of the positive aspects - JMeter allows you to use an unlimited number of servers connected to one client.  But there is an important limitation - <u>all machines must lie within the same subnet</u> .  For cloud solutions, this is quite easily solved using VPN connections: <br><img src="https://habrastorage.org/files/fb4/18a/dee/fb418adeed6847d8a68e23f37f2f5503.png"><br><br>  <b>3. Servers</b> .  Now you should start the distributed load server.  This is done quite easily.  To do this, you must run the script <code>bin/jmeter-server</code> (.bat in the case of Windows), located in the root of the program folder. <br>  <u>Note</u> : Sometimes Java incorrectly identifies the IP address of the server - in this case, you will see an exception in the jmeter-server log, which will indicate that the IP address is different from the one you want to use.  Then you can assign him another IP.  To do this, start the server with the following parameter: <b>-Djava.rmi.server.hostname = [IP].</b> <br><br>  <b>4. The client</b> .  After starting all the servers, you need to configure the client itself, which will manage the load.  To force the client to find all running servers, you need to add the IP addresses of these servers to the <code>remote_hosts</code> property in the file bin / jmeter.properties: <br> <code>remote_hosts=192.168.0.1:1099, 192.168.0.2:1098</code> <br>  <u>Note</u> : port number is an optional parameter.  By default, the server uses port 1099 - however you can manually assign it. <br><img src="https://habrastorage.org/files/e39/1d1/af8/e391d1af88984beca23f584231d3718b.png"><br><br>  <b>5. Execution</b> .  The last step is pretty simple.  You need to run JMeter and check that all servers are working correctly.  To do this, you can try to run a distributed load using the menu item: <i>Run -&gt; Remote Start All</i> .  This item allows you to start the load using all the previously mentioned servers.  If you need to use only a specific server, select <i>Run -&gt; Remote Start -&gt; [SERVER], where [SERVER]</i> is the address of the server that was added to the property file at step 4 and started on the client machine at step 3 . <br><br>  <b>6</b> <br><img src="https://habrastorage.org/files/92e/8ec/e60/92e8ece6093b4e199c018b5ec029abea.png"><br><br><h5>  <b>Conclusion</b> </h5><br>  Having done all these rather simple steps, you will be able to emulate any large load, using the power of remote servers.  The desired load will be limited only by the number of free servers at your disposal and your own imagination. <br><br><h5>  <b>useful links</b> </h5><br>  <a href="http://jmeter.apache.org/usermanual/remote-test.htm">jmeter.apache.org/usermanual/remote-test.htm</a> <br>  <a href="http://jmeter.apache.org/usermanual/jmeter_distributed_testing_step_by_step.pdf">jmeter.apache.org/usermanual/jmeter_distributed_testing_step_by_step.pdf</a> <br>  <a href="http://gerardnico.com/wiki/jmeter/remote">gerardnico.com/wiki/jmeter/remote</a> <br>  <a href="http://www.guru99.com/jmeter-distributed-testing.html">www.guru99.com/jmeter-distributed-testing.html</a> </div><p>Source: <a href="https://habr.com/ru/post/273967/">https://habr.com/ru/post/273967/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../273955/index.html">We become professional PHP developers. Part 3: Teamwork</a></li>
<li><a href="../273957/index.html">Compile C \ C ++ code in WebAssembly</a></li>
<li><a href="../273959/index.html">Entirely Russian, convergent and ... hyperconvergent. Why we made the platform "SCALA-R"</a></li>
<li><a href="../273961/index.html">Basic Zen</a></li>
<li><a href="../273965/index.html">FactRuEval - a competition to select named entities and extract facts</a></li>
<li><a href="../273971/index.html">Configuring Grandstream UCM 61xx series and its integration with 1C</a></li>
<li><a href="../273973/index.html">Overview of the office DECT-phone Unify OpenStage wl3 plus</a></li>
<li><a href="../273977/index.html">Lost art proof security. Part 2 of 2</a></li>
<li><a href="../273979/index.html">Erlang for web development (1) -> Introduction;</a></li>
<li><a href="../273981/index.html">9 Tips for Localizing Audio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
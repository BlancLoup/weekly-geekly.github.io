<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write multilingual application on React Native</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Localization of products is very important for international companies developing new countries and regions for themselves. Similarly, localization is...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write multilingual application on React Native</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/d65/2b6/19e/d652b619e61aaf2d1216f0f94ab533b2.jpg"><br><br>  Localization of products is very important for international companies developing new countries and regions for themselves.  Similarly, localization is needed and mobile applications.  If a developer starts an international expansion, it is important to allow users from another country to work with the interface in their native language.  In this article we will create a React Native application using the <a href="https://github.com/react-native-community/react-native-localize">react-native-localize</a> package. <br><a name="habracut"></a><br><blockquote>  <b>Skillbox recommends:</b> Online <a href="https://skillbox.ru/java/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DJAVDEV%26utm_content%3Darticles%26utm_term%3Dreactnative">Profession Java Developer</a> Educational Course. <br>  <b>We remind:</b> <i>for all readers of "Habr" - a discount of 10,000 rubles when writing to any Skillbox course on the promotional code "Habr".</i> </blockquote><br><h3>  Tools and skills </h3><br>  To understand this article, you need basic skills for working with React Native.  To get acquainted with the settings of the working machine, you can <a href="https://facebook.github.io/react-native/docs/0.59/getting-started">use the official instructions</a> . <br><br>  We need these versions of software tools: <br><ul><li>  Node v10.15.0 </li><li>  npm 6.4.1 </li><li>  yarn 1.16.0 </li><li>  react-native 0.59.9 </li><li>  react-native-localize 1.1.3 </li><li>  i18n-js 3.3.0 </li></ul><br><h3>  Getting started </h3><br>  We will create an application that will support English, French and Arabic.  First, create a new project using react-native-cli.  To do this, in the terminal you need to type this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>$ react-native init multiLanguage</i> <i><br></i>  <i>$ cd multiLanguage</i> <br><br>  <b>Add the necessary libraries</b> <br><br>  First you need to install react-native-localize by typing the following: <br>  $ yarn add react-native-localize <br><br>  If the installation process has problems, you <a href="https://github.com/react-native-community/react-native-localize">should study the installation manual</a> . <br><br>  The react-native-localize library gives the developer access to multilingual functions.  But she needs another library - i18n. <br><br>  This article describes the use of <a href="https://github.com/fnando/i18n-js">I18n.js</a> in order to provide a translation in JavaScript. <br><br>  <i>$ yarn add i18n-js</i> <br><br>  Well, since i18n-js does not provide caching or memoization, I suggest using lodash.memoize for this: <br><br>  <i>$ yarn add lodash.memoize</i> <br><br>  <b>Work with translations</b> <br><br>  In order for the application to work skillfully with other languages, you first need to create a directory of translations within src, then three JSON files, for each of the languages. <br><br>  1. en.json for English; <br><br>  2. fr.json for french; <br><br>  3. ar.json for Arabic. <br><br>  These files contain JSON objects with keys and values.  The key will be the same for each language.  It is used by the application to display textual information. <br><br>  The value is the text to be shown to the user. <br><br>  English: <br><br>  <i>{"Hello": "Hello World!"}</i> <br><br>  French <br><br>  <i>{"Hello": "Salut le Monde!"}</i> <br><br>  Arab <br><br>  <i>{"Hello": "ÿ£ŸáŸÑÿßŸã ÿ®ÿßŸÑÿπÿßŸÑŸÖ"}</i> <br><br>  Other languages ‚Äã‚Äãcan be added in the same way. <br><br><h3>  Main code </h3><br>  At this stage, you need to open the App.js file and add import to it: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> RNLocalize <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-native-localize"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> i18n <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"i18n-js"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> memoize <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"lodash.memoize"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Use for caching/memoize for better performance import { I18nManager, SafeAreaView, ScrollView, StyleSheet, Text, View } from "react-native";</span></span></code> </pre> <br>  After that, auxiliary functions and constants are added, which will be useful later. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> translationGetters = { <span class="hljs-comment"><span class="hljs-comment">// lazy requires (metro bundler does not support symlinks) ar: () =&gt; require("./src/translations/ar.json"), en: () =&gt; require("./src/translations/en.json"), fr: () =&gt; require("./src/translations/fr.json") }; const translate = memoize( (key, config) =&gt; i18n.t(key, config), (key, config) =&gt; (config ? key + JSON.stringify(config) : key) ); const setI18nConfig = () =&gt; { // fallback if no available language fits const fallback = { languageTag: "en", isRTL: false }; const { languageTag, isRTL } = RNLocalize.findBestAvailableLanguage(Object.keys(translationGetters)) || fallback; // clear translation cache translate.cache.clear(); // update layout direction I18nManager.forceRTL(isRTL); // set i18n-js config i18n.translations = { [languageTag]: translationGetters[languageTag]() }; i18n.locale = languageTag; };</span></span></code> </pre> <br>  And now let's create the App class component: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(props) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(props); setI18nConfig(); <span class="hljs-comment"><span class="hljs-comment">// set initial config } componentDidMount() { RNLocalize.addEventListener("change", this.handleLocalizationChange); } componentWillUnmount() { RNLocalize.removeEventListener("change", this.handleLocalizationChange); } handleLocalizationChange = () =&gt; { setI18nConfig(); this.forceUpdate(); }; render() { return ( &lt;SafeAreaView style={styles.safeArea}&gt; &lt;Text style={styles.value}&gt;{translate("hello")}&lt;/Text&gt; &lt;/SafeAreaView&gt; ); } } const styles = StyleSheet.create({ safeArea: { backgroundColor: "white", flex: 1, alignItems: "center", justifyContent: "center" }, value: { fontSize: 18 } });</span></span></code> </pre> <br>  The first element, setI18nConfig (), sets the initial configuration. <br><br>  Then in the componentDidMount () you need to add listening to events, this element will track the updates and call handleLocalizationChange () when they occur. <br><br>  The handleLocalizationChange () method activates setI18nConfig () and forceUpdate ().  This is necessary for Android devices, since the component must be rendered so that the changes become noticeable. <br><br>  Then you need to remove the audition from the componentWillUnmount () method. <br><br>  Finally, hello is returned in render () by using translate () and adding the key parameter to it.  After these actions, the application will be able to "understand" what language is needed, and show messages on it. <br><br><h3>  Application launch </h3><br>  Now it's time to check how the translation works. <br><br>  First, run the application in a simulator or emulator, typing <br><br>  <i>$ react-native run-ios</i> <i><br></i>  <i>$ react-native run-android</i> <i><br></i> <br>  It will look something like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/93c/bdd/af4/93cbddaf4e8c5d7858ee28226eae2a3b.png"><br><br>  Now you can try to change the language to French by running the application then. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/65d/c0b/059/65dc0b0595cbfda55b1c0e9613025a92.png"><br><br>  With the Arabic language doing the same thing, there is no difference. <br><br>  So far, so good. <br><br>  But what happens if you choose a random language that is not translated in the application? <br><br>  It turns out that the task of findBestLanguage is to provide the optimal translation from all available.  As a result, the default language will be displayed. <br><br>  It's about phone settings.  For example, in the iOS emulator, you can see the order of languages. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c41/949/da6/c41949da6517781477d3d6fb96cab82c.png"><br><br>  If the selected language is not preferred, findBestAvailableLanguage returns undefined, so the default language is displayed. <br><br><h3>  Bonus </h3><br>  React-native-localize has an API that provides access to a large number of language elements.  Before you get started, you <a href="https://github.com/react-native-community/react-native-localize">should read the documentation</a> . <br><br><h3>  findings </h3><br>  The application can be made multilanguage without any problems.  React-native-localize is a great option that allows you to expand the circle of users of the application. <br><br>  The source code of the project <a href="https://github.com/vikrantnegi/react-native-multi-language-app">is here</a> . <br><br><blockquote>  <b>Skillbox recommends:</b> <br><br><ul><li>  Two-year practical course <a href="https://iamwebdev.skillbox.ru/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DWEBDEVPRO%26utm_content%3Darticles%26utm_term%3Dreactnative">"I am a web developer PRO"</a> . </li><li>  Online course <a href="https://skillbox.ru/c-sharp/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DCSHDEV%26utm_content%3Darticles%26utm_term%3Dreactnative">"From # developer from scratch</a> . <a href="https://skillbox.ru/c-sharp/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DCSHDEV%26utm_content%3Darticles%26utm_term%3Dreactnative">"</a> </li><li>  Practical annual course <a href="https://skillbox.ru/php/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DPHPDEV%26utm_content%3Darticles%26utm_term%3Dreactnative">"PHP developer from 0 to PRO"</a> . <br></li></ul></blockquote></div><p>Source: <a href="https://habr.com/ru/post/459741/">https://habr.com/ru/post/459741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../459728/index.html">Smart phone with a breeze: a review of ZTE Red Magic 3</a></li>
<li><a href="../459730/index.html">Porting Qt to STM32</a></li>
<li><a href="../459732/index.html">How to choose an open source license for a RAD framework on GitHub</a></li>
<li><a href="../459734/index.html">Smok-test release candidate autotests for 15 minutes</a></li>
<li><a href="../459739/index.html">Why is Mozilla called the ‚Äúmain villain of the Internet‚Äù?</a></li>
<li><a href="../459743/index.html">Mastermind groups for entrepreneurs instead of conferences and trainings: my experience</a></li>
<li><a href="../459747/index.html">British Airways airline will be fined a record $ 230 million for leaking customer data</a></li>
<li><a href="../45975/index.html">The art of investing</a></li>
<li><a href="../459751/index.html">Psychoanalysis of the effect of an undervalued specialist. Part 1. Who and why</a></li>
<li><a href="../459757/index.html">Functional approach to error handling in Dart</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
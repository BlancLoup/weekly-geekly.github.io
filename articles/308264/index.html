<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Symmetric difference in Swift and Objective-C capabilities</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, I‚Äôll talk about the difference in capabilities offered by iOS developers to Swift and Objective-C. Of course, developers who were int...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Symmetric difference in Swift and Objective-C capabilities</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/8fa/799/a0b/8fa799a0b8734c6b917d5fcda72c0170.jpeg" alt="image"></p><br><p>  In this article, I‚Äôll talk about the difference in capabilities offered by iOS developers to Swift and Objective-C.  Of course, developers who were interested in Apple's new language have already seen quite a few such articles, so I decided to focus on the differences that really affect the development process and the architecture of the application.  That is, the differences that you should know to use the language as efficiently as possible.  I tried to make the most complete list that meets these criteria. </p><br><p>  In addition, talking about the new features that Swift brought to the development, I tried not to forget to mention what he had lost compared to Objective-C. </p><br><p>  For each item, I tried to briefly outline the essence of the differences, without going into details, and make code examples on the contrary detailed.  In them, I commented on all the nuances, even those that are not directly related to the difference under consideration. </p><br><p>  <em>At the time of this writing, the current version of Swift is 3.0.1.</em> </p><br><a name="habracut"></a><br><h2>  1. Classes, structures and enumerations </h2><br><p>  Classes in Swift do not have one common ancestor, like NSObject in Objective-C.  Moreover, classes may not have an ancestor at all. </p><br><p>  Structures in Swift are almost as functional as classes.  Like classes, they can have static and ordinary properties and methods, initializers, subscripts, extensions, and can implement protocols.  They differ from classes in that they are passed by value and have no inheritance. </p><br><pre><code class="hljs haskell">//  ,   . /*    .  ,      struct  <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>,    . */ struct <span class="hljs-type"><span class="hljs-type">Rocket</span></span> { //      <span class="hljs-type"><span class="hljs-type">Stage</span></span>. //   var  ,  <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> - . var stages: [<span class="hljs-type"><span class="hljs-type">Stage</span></span>] /*    <span class="hljs-type"><span class="hljs-type">Int</span></span>.     . */ static <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> maxAllowedStages = <span class="hljs-number"><span class="hljs-number">4</span></span> /* ,        .     launch() -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span>  launch() -&gt; ()  <span class="hljs-type"><span class="hljs-type">Void</span></span>    typealias  ()  ()   .          . */ func launch() { // ... } //    ([<span class="hljs-type"><span class="hljs-type">Stage</span></span>]) -&gt; <span class="hljs-type"><span class="hljs-type">Double</span></span> static func calculateHeight(for stages: [<span class="hljs-type"><span class="hljs-type">Stage</span></span>]) -&gt; <span class="hljs-type"><span class="hljs-type">Double</span></span> { /*  reduce     <span class="hljs-type"><span class="hljs-type">Swift</span></span>.      .        ,      .  ,        ,    . */ return stages.reduce(<span class="hljs-number"><span class="hljs-number">0</span></span>) { (accumulator, stage) -&gt; <span class="hljs-type"><span class="hljs-type">Double</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> return accumulator + stage.height } } /* <span class="hljs-type"><span class="hljs-type">Failable</span></span> ,   ,      nil.         init. */ init?(stages: [<span class="hljs-type"><span class="hljs-type">Stage</span></span>]) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> stages.count &gt; <span class="hljs-type"><span class="hljs-type">Rocket</span></span>.maxAllowedStages { return nil } self.stages = stages } /*  (subscript)             . rocket[<span class="hljs-number"><span class="hljs-number">1</span></span>] = stage */ /*       ,     . */ /*      ,      . */ subscript (index: <span class="hljs-type"><span class="hljs-type">Int</span></span>) -&gt; <span class="hljs-type"><span class="hljs-type">Stage</span></span> { get { return stages[index] } set(newValue) { stages[index] = newValue } } } /*  ,        :        . */ protocol <span class="hljs-type"><span class="hljs-type">TransportableByTrain</span></span> { func placeOnTrain() -&gt; [<span class="hljs-type"><span class="hljs-type">Carriage</span></span>] init(train: [<span class="hljs-type"><span class="hljs-type">Carriage</span></span>]) } /*      ,    , , , ,     . */ extension <span class="hljs-type"><span class="hljs-type">Rocket</span></span>: <span class="hljs-type"><span class="hljs-type">TransportableByTrain</span></span> { func placeOnTrain() -&gt; [<span class="hljs-type"><span class="hljs-type">Carriage</span></span>] { return stages.map { stage <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> return <span class="hljs-type"><span class="hljs-type">Carriage</span></span>(content: stage) } } init(train: [<span class="hljs-type"><span class="hljs-type">Carriage</span></span>]){ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> stages = train.map { $<span class="hljs-number"><span class="hljs-number">0.</span></span>content <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>! <span class="hljs-type"><span class="hljs-type">Stage</span></span> } self.init(stages: stages)! } }</code> </pre> <br><p>  Enumerations in Swift may not have values. </p><br><pre> <code class="hljs objectivec"><span class="hljs-comment"><span class="hljs-comment">//   rawValue. enum LaunchState { case preparing, ready, launching, failed, succeeded }</span></span></code> </pre> <br><p>  But, if there are values, they can be not only integers, but also real numbers, and strings, and symbols.  Instances of enumerations are not automatically <code>rawValue</code> to the types of internal values, so you should use the <code>rawValue</code> property to access them. </p><br><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">/   rawValue. enum LaunchEvent: Int { case poweredOn = 1, fuelLoaded, oxidizerLoaded, countAutoSequenceStarted, goForlaunchVerification, preLaunchChecks, pressurizePropellantTanks, ignitionSequenceStart, liftoff } let lastEvent = LaunchEvent.liftoff lastEvent.rawValue /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ 9 /</span></span>*   <span class="hljs-string"><span class="hljs-string">`rawValue`</span></span>   failable    . *<span class="hljs-regexp"><span class="hljs-regexp">/ let firstEvent = LaunchEvent(rawValue: 1) /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/LaunchSequence.poweredOn let nonexistentEvent = LaunchEvent(rawValue: 0) /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/nil</span></span></code> </pre> <br><p>  If the enumeration does not have <code>rawValue</code> , then each case enumeration may have its own associated values.  There may be several of them, and they can be of any type. </p><br><pre> <code class="hljs pgsql">//    . enum LaunchError { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> compromisedHullIntegrity(stage: Stage) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> engineMalfunction(engine: Engine, malfunction: Malfunction) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> unrecognizedError }</code> </pre> <br><p>  Enumerations, as well as structures, are passed by value.  And they have the same possibilities given above, except for the stored properties.  Properties of enumerations can only be computed (computed properties). </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//     . extension LaunchEvent { static var sequence: [LaunchEvent] { return Array(1...9).map { LaunchEvent(rawValue: $0)! } } }</span></span></code> </pre> <br><p>  Read more about listings: <a href="https://appventure.me/2015/10/17/advanced-practical-enum-examples/">[1]</a> </p><br><p>  This rich functionality of structures and enumerations allows us to use them instead of classes where values ‚Äã‚Äãare more appropriate than objects.  The purpose of this separation is to simplify the architecture of the application.  More on complexity management: <a href="https://realm.io/news/andy-matuschak-controlling-complexity/">[2]</a> </p><br><h2>  2. Types of function, methods and closures </h2><br><p>  In Swift, functions, methods, and closures are first class citizens, that is, they have types and can be stored in variables and passed as a parameter to a function.  The types of functions, methods, and closures are determined only by the returned and accepted values.  That is, if a variable of a certain type is declared, then it can save both a function and a method or a closure.  Instances of these types are passed by reference. </p><br><p>  This unification of entities has led to a simplification of their use.  In Objective-C, the transfer of an object and a selector or the transfer of a block solved, in principle, the same problem.  In Swift, such an API will require something with a certain received and returned values, and what exactly will be passed there: a function, a method or a closure;  irrelevant. </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">/*  reduce,     calculateHeight   . (Result, (Result, Element) throws -&gt; Result) rethrows -&gt; Result       ,    : throw  rethrows;  generic  Result    Element     Double  Stage.     ,   reduce   . (Double, (Double, Stage) -&gt; Double) -&gt; Double    :   Double,   - ,  Double  Stage,   Double.   ,   ,   Double. */</span></span> <span class="hljs-comment"><span class="hljs-comment">//          : let totalHeight = stages.reduce(0, { (accumulator: Double, stage: Stage) -&gt; Double in return accumulator + stage.height }) /*      . -,    reduce        -,     . -,   -    ,      . */ let totalHeight = stages.reduce(0) { accumulator, stage in return accumulator + stage.height } /*    .       .        .         $0, $1     .      ,      return. */ let totalHeight = stages.reduce(0) { $0 + $1.height } /*  ,   swift     ,   ,   .     +     Double  Stage,        [Stage]     [Double],       reduce,       (Double, Double) -&gt; Double.   Double  + ,          . */ let totalHeight = stages.map{ $0.height }.reduce(0, +)</span></span></code> </pre> <br><h2>  3. Default parameters </h2><br><p>  Parameters of functions and methods can have default values. <br>  Using default parameters instead of several functions / methods reduces the amount of code, and less code reduces fewer bugs. </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Destination</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> lowEarthOrbit, geostationaryEarthOrbit, transLunarInjection } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RocketFactory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*  -         '='. */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeRocket</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(destination: Destination = Destination.lowEarthOrbit, payloadMass: Double = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">6450</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Rocket</span></span> { <span class="hljs-comment"><span class="hljs-comment">//... } } let rocketFactory = RocketFactory() //    -    . let soyuz = rocketFactory.makeRocket() let protonM = rocketFactory.makeRocket(destination: Destination.geostationaryEarthOrbit) let saturnV = rocketFactory.makeRocket(destination: Destination.transLunarInjection, payloadMass: 48600)</span></span></code> </pre> <br><h2>  4. Optionals </h2><br><p>  No type variable can be <code>nil</code> .  Swift uses a special type of <code>Optional</code> , into which other types are ‚Äúwrapped‚Äù if there is a need to represent the absence of a value. </p><br><p>  <code>Optional</code> are enumerations with two cases: <code>none</code> and <code>some</code> .  <code>Optional.some(Wrapped)</code> contains the value of the wrapped type as an associated value. <br>  <code>Optional.none</code> equivalent to the literal <code>nil</code> . <br>  In <code>Optional</code> , both the reference type and the passed by value can be wrapped. </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Launchpad</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    optional . var rocket: Rocket? /*        : var rocket: Optional&lt;Rocket&gt; */ }</span></span></code> </pre> <br><p>  In order to access the properties and methods of optional values, you first need to expand these optional values, that is, make sure that they are not <code>nil</code> .  Of course, this can be achieved by working with optional values ‚Äã‚Äãas with ordinary enumerations, for example using a switch, but Swift has more convenient constructions for this: <code>if let</code> , <code>guard let else</code> ;  operators <code>?</code>  <code>!</code>  <code>??</code>  . </p><br><pre> <code class="hljs ruby">/*  ,     optional  -   <span class="hljs-string"><span class="hljs-string">'!'</span></span>.    optional    ,   runtime error   ,   <span class="hljs-literal"><span class="hljs-literal">nil</span></span>. *<span class="hljs-regexp"><span class="hljs-regexp">/ launchpad.rocket!.launch() func start() { /</span></span>*    optional     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> let. *<span class="hljs-regexp"><span class="hljs-regexp">/ if let rocket = launchpad.rocket { /</span></span>*  ,         optional . *<span class="hljs-regexp"><span class="hljs-regexp">/ rocket.launch() } else { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    else      optional . abortStart() } } /</span></span>*  ,      ,  optional   <span class="hljs-literal"><span class="hljs-literal">nil</span></span>,   optional     guard let <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>. *<span class="hljs-regexp"><span class="hljs-regexp">/ func start2() { /</span></span>*    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> let       optional    ,   <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>      <span class="hljs-literal"><span class="hljs-literal">nil</span></span>    . *<span class="hljs-regexp"><span class="hljs-regexp">/ guard let rocket = launchpad.rocket else { abortStart() return } rocket.launch() } /</span></span>*        optional ,   .   <span class="hljs-string"><span class="hljs-string">'?'</span></span>.              .       optional. *<span class="hljs-regexp"><span class="hljs-regexp">/ launchpad.rocket?.launch() var possibleLaunchpad: Launchpad? /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/      optional . possibleLaunchpad?.rocket?.launch() possibleLaunchpad?.rocket?.stages /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/Return type: [Stages]? /</span></span>*     optional    <span class="hljs-string"><span class="hljs-string">'??'</span></span>.    .  - optional ,   -  optional   .     <span class="hljs-literal"><span class="hljs-literal">nil</span></span>,     ,    . *<span class="hljs-regexp"><span class="hljs-regexp">/ let certainRocket = possibleLaunchpad?.rocket ?? rocketFactory.makeRocket()</span></span></code> </pre> <br><p>  Such restrictions make it difficult to hit an unexpected nil value, which makes Swift code more reliable. </p><br><h2>  5. Nested types </h2><br><p>  In Swift, you can declare nested types, that is, classes, structures, and enumerations can be declared within each other. </p><br><pre> <code class="hljs swift"><span class="hljs-comment"><span class="hljs-comment">/*         ,     - . */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Launch</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">State</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> preparing, ready, launching, failed, succeeded } <span class="hljs-comment"><span class="hljs-comment">//          . var state: State = .preparing } /*    ,   ,      . */ let launchState: Launch.State</span></span></code> </pre> <br><p>  Functions can also be declared inside other functions.  But in fact, internal functions are closures, and they can capture the context of an external function. </p><br><h2>  6. Tuples </h2><br><p>  More new types in Swift are tuples.  Tuples allow you to combine multiple values ‚Äã‚Äãof any type into one composite value.  Tuples are passed by value. </p><br><pre> <code class="hljs pgsql"><span class="hljs-comment"><span class="hljs-comment">/*   ,    ,      ,    . */</span></span> var launchEventMark: (event: LaunchEvent, timeMark: <span class="hljs-type"><span class="hljs-type">Int</span></span>) = (.ignitionSequenceStart, <span class="hljs-number"><span class="hljs-number">6600</span></span>) launchEventMark.event launchEventMark.timeMark // ,        . launchEventMark<span class="hljs-number"><span class="hljs-number">.0</span></span> launchEventMark<span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-comment"><span class="hljs-comment">/*  ,          ,   ,             . */</span></span> var anotherMark: (LaunchEvent, <span class="hljs-type"><span class="hljs-type">Int</span></span>) = launchEventMark anotherMark<span class="hljs-number"><span class="hljs-number">.0</span></span> anotherMark.event // error: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> has <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> member <span class="hljs-string"><span class="hljs-string">'event'</span></span></code> </pre> <br><h2>  7. Getters, setters and property observers </h2><br><p>  Unlike Objective-C, Swift getter and setter can only be defined for calculated properties.  Of course, you can use methods or a calculated property for stored properties like getter and setter. </p><br><pre> <code class="hljs bash">//  getter<span class="hljs-string"><span class="hljs-string">'  setter'</span></span>    . class ThrustController { init(minThrust: Double, maxThrust: Double, currentThrust: Double) { self.minThrust = minThrust self.maxThrust = maxThrust thrust = currentThrust } var minThrust: Double var maxThrust: Double private var _thrust = 0.0 var thrust: Double { get { <span class="hljs-built_in"><span class="hljs-built_in">return</span></span> _thrust } <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> newValue &gt; maxThrust { _thrust = maxThrust } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> newValue &lt; minThrust { // _thrust = maxThrust } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _thrust = newValue } } /* -,    setter<span class="hljs-string"><span class="hljs-string">'    newValue,       : */ // set(thrustInput) { ... } } } /* , ,      ,         ,     . */</span></span></code> </pre> <br><p>  For tasks whose solution requires tracking a change in the value of a property, a new mechanism has appeared - property observers.  They can be defined for any stored property.  They are of two types: <code>willSet</code> (called before changing the value of the property) and <code>didSet</code> (called immediately after setting the new value). </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ThrustObserver</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">thrustWillChange</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(from oldValue: Double, to newValue: Double)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">thrustDidChange</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(from oldValue: Double, to newValue: Double)</span></span></span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ThrustMeter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> observer: <span class="hljs-type"><span class="hljs-type">ThrustObserver?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> thrust: <span class="hljs-type"><span class="hljs-type">Double</span></span> = <span class="hljs-number"><span class="hljs-number">0.0</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">willSet</span></span> { observer?.thrustWillChange(from: thrust, to: newValue) } <span class="hljs-keyword"><span class="hljs-keyword">didSet</span></span> { observer?.thrustDidChange(from: oldValue, to: thrust) } <span class="hljs-comment"><span class="hljs-comment">//      set,  newValue  oldValue    . // willSet(newThrust) { ... } // didSet(oldThrust) { ... } } }</span></span></code> </pre> <br><p>  It should be noted that for property observers structures are called not only to directly change the value of the property for which they are declared, but also to change the nested properties of any depth. </p><br><p>  For lazy initialization, which in Objective-C can be implemented through getter, Swift has a <code>lazy</code> property modifier. </p><br><h2>  8. Variability of properties and collections </h2><br><p>  In Swift, type properties can be constants.  Moreover, if the type of the property declared as a constant is a class, that is, the type passed by reference, then only the link itself will be immutable.  That is, it will not be possible to assign a new object to this property, and it is possible to change the properties of this object.  For types that are passed by value, any change will be unacceptable. </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ThrustMeterClass</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> thrust: <span class="hljs-type"><span class="hljs-type">Double</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(thrust: <span class="hljs-type"><span class="hljs-type">Double</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.thrust = thrust } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ThrustMeterStruct</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> thrust = <span class="hljs-number"><span class="hljs-number">0.0</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> thrustMeterClass = <span class="hljs-type"><span class="hljs-type">ThrustMeterClass</span></span>(thrust: <span class="hljs-number"><span class="hljs-number">0</span></span>) thrustMeterClass = <span class="hljs-type"><span class="hljs-type">ThrustMeterClass</span></span>(thrust: <span class="hljs-number"><span class="hljs-number">50</span></span>) <span class="hljs-comment"><span class="hljs-comment">//Error thrustMeterClass.thrust = 50 //OK let thrustMeterStruct = ThrustMeterStruct(thrust: 0) thrustMeterStruct = ThrustMeterStruct(thrust: 50) //Error thrustMeterStruct.thrust = 50 //Error</span></span></code> </pre> <br><p>  Since all collections in Swift are structures, their variability is not determined by the type, as in Objective-C, but the way of the declaration is a constant or a variable.  There are three collections in the standard library: an array, a set, and a dictionary. </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> immutableArray = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mutableArray = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]</code> </pre> <br><h2>  9. Protocols with associated types </h2><br><p>  While conventional protocols are virtually indistinguishable from analogs from Objective-C, protocols with associated types are a completely new design in Swift.  Protocols can declare associated types and use them as placeholder in their requirements for methods and properties.  And that which implements this protocol should already indicate which real type will be used. </p><br><pre> <code class="hljs pgsql">//        . protocol Fuel {} protocol Oxidizer {} //   ,   . struct Hydrazine: Fuel {} struct ChlorineTrifluoride: Oxidizer {} struct Kerosene: Fuel {} struct Oxygen: Oxidizer {} //    . protocol Bipropellant { <span class="hljs-comment"><span class="hljs-comment">/*           . */</span></span> associatedtype TFuel: Fuel associatedtype TOxidizer: Oxidizer func burn(_ fuel: TFuel, <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> oxidizer: TOxidizer) } //      . struct KoxPropellant: Bipropellant { <span class="hljs-comment"><span class="hljs-comment">/*  ,          ,    typealias.                  burn. */</span></span> typealias TOxidizer = Oxygen typealias TFuel = Kerosene func burn(_ fuel: Kerosene, <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> oxidizer: Oxygen) { print("Burn of kerosene with oxygen.") } } <span class="hljs-comment"><span class="hljs-comment">/*             Objective-C. */</span></span> protocol Hypergolic: Bipropellant {} struct HctPropellant: Bipropellant, Hypergolic { typealias TOxidizer = ChlorineTrifluoride typealias TFuel = Hydrazine func burn(_ fuel: Hydrazine, <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> oxidizer: ChlorineTrifluoride) { print("Burn of hydrazine with chlorine trifluoride.") } }</code> </pre> <br><p>  While conventional protocols can be used as a specific type: </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnyFuelTank</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*        ,   Fuel. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> content: <span class="hljs-type"><span class="hljs-type">Fuel</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fuelTank = <span class="hljs-type"><span class="hljs-type">AnyFuelTank</span></span>(content: kerosene) fuelTank.content = hydrazine</code> </pre> <br><p>  Protocols with associated types cannot be used this way. </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RocketEngine</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    . var propellant: Bipropellant /* Error: Protocol 'Bipropellant' can only be used as a generic constraint because it has Self or associated type requirements */ }</span></span></code> </pre> <br><p>  As can be seen from the error message, protocols with associated values ‚Äã‚Äãcan only be used as a restriction on the generic type. </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RocketEngine</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TBipropellant</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bipropellant</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> propellant: <span class="hljs-type"><span class="hljs-type">TBipropellant</span></span> }</code> </pre> <br><p>  Some thoughts on why this is so and how to live with it can be found here: <a href="https://youtu.be/XWoNjiSPqI8">[3]</a> . </p><br><p>  In general, about protocols with associated values ‚Äã‚Äãare well described in this series of articles: <a href="http://www.russbishop.net/swift-associated-types">[4]</a> . </p><br><h2>  10. Protocol extensions </h2><br><p>  Extensions (extensions) of classes, structures and enumerations in Swift are basically similar to categories and extensions from Objective-C, that is, they allow you to add behavior to a type, even if you do not have access to its source code.  Type extensions allow you to add calculated properties, methods, initializers, subscripts, nested types and implement protocols. </p><br><p>  Protocol extensions are a new feature in Swift.  They allow the types that implement this protocol to provide the default implementation of properties and methods.  That is, the protocol extension does not describe the requirements, but the specific implementation that the types that implement this protocol will receive.  Of course, types can override this implementation.  Such a default implementation allows replacing optional protocol requirements that exist in Swift only within the framework of compatibility with Objective-C. </p><br><pre> <code class="hljs pgsql">//  ,   ,    . <span class="hljs-keyword"><span class="hljs-keyword">extension</span></span> Bipropellant { func burn(_ fuel: TFuel, <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> oxidizer: TOxidizer) { print("Common burn.") } }</code> </pre> <br><p>  In addition, in the extension of the protocol, you can implement methods that are not in the requirements of the protocol, and these methods will also receive types that implement the protocol.  But you should use protocol extensions in this way with caution due to static binding.  Read more here: <a href="https://nomothetis.svbtle.com/the-ghost-of-swift-bugs-future">[5]</a> . </p><br><p>  Moreover, it is possible to specify protocol extensions so that not all types implementing the protocol receive a default implementation.  Conditions may require that the type be inherited from a particular class or implement certain protocols.  Conditions can be imposed on the type that implements the protocol and on the associated types.  If different extensions provide an implementation of the same method, and the type satisfies the conditions of several extensions, then it will receive the implementation whose extension condition was more specific.  If not, then the type will not receive any implementation. </p><br><pre> <code class="hljs swift"><span class="hljs-comment"><span class="hljs-comment">/*      ,  ,        . */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bipropellant</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Self</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TOxidizer</span></span></span><span class="hljs-class"> == </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Oxygen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">burn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fuel: TFuel, with oxidizer: TOxidizer)</span></span></span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Burn with oxygen as oxidizer."</span></span>) } } <span class="hljs-comment"><span class="hljs-comment">/*      .    . */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bipropellant</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Self</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hypergolic</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Self</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TFuel</span></span></span><span class="hljs-class"> == </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hydrazine</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">burn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fuel: TFuel, with oxidizer: TOxidizer)</span></span></span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Self-ignited burn of hydrazine."</span></span>) } }</code> </pre> <br><pre> <code class="hljs sql"><span class="hljs-comment"><span class="hljs-comment">/*      KoxPropellant  HctPropellant     burn,         Bipropellant. */</span></span> let koxPropellant = KoxPropellant() koxPropellant.burn(kerosene, <span class="hljs-keyword"><span class="hljs-keyword">with</span></span>: oxygen) // Burn <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> kerosene <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> oxygen. let hctPropelant = HctPropellant() hctPropelant.burn(hydrazine, <span class="hljs-keyword"><span class="hljs-keyword">with</span></span>: chlorineTrifluoride) // Burn <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> hydrazine <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> chlorine trifluoride. //        burn,      . koxPropellant.burn(kerosene, <span class="hljs-keyword"><span class="hljs-keyword">with</span></span>: oxygen) // Burn <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> oxygen <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> oxidizer. hctPropelant.burn(hydrazine, <span class="hljs-keyword"><span class="hljs-keyword">with</span></span>: chlorineTrifluoride) // <span class="hljs-keyword"><span class="hljs-keyword">Self</span></span>-ignited burn <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> hydrazine.</code> </pre> <br><p>  In general, protocol extensions can be found in WWDC15 ‚ÄúProtocol-Oriented Programming in Swift‚Äù by Dave Abrahams <a href="https://developer.apple.com/videos/play/wwdc2015/408/">[6]</a> </p><br><h2>  11. Generics </h2><br><p>  Unlike Objective-C, Swift generic can include not only classes, but also structures, enumerations, and functions. </p><br><p>  In Swift, the conditions on a generic type can be imposed on the same conditions as in Objective-C, that is, inherit from a particular class or implement certain protocols.  In addition to them, if in the conditions there is a requirement to implement a protocol with associated types, then similar conditions can be imposed on them. </p><br><pre> <code class="hljs xml">//   Tank      . struct Tank<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TContent</span></span></span><span class="hljs-tag">&gt;</span></span> { var content: TContent } //    . struct FuelTank<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TFuel:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Fuel</span></span></span><span class="hljs-tag">&gt;</span></span> { var content: TFuel } //       . struct OxygenEngine<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TBipropellant:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Bipropellant</span></span></span><span class="hljs-tag">&gt;</span></span> where TBipropellant.TOxidizer == Oxygen { var fuel: TBipropellant.TFuel var oxidizer: Oxygen }</code> </pre> <br><h2>  12. Namespace </h2><br><p>  In Objective-C, to avoid name conflicts, you have to use prefixes in class names and protocols. </p><br><p>  In Swift, each module has its own namespace, and in the case of intersection of type names, you can refer to the necessary one through the name of its module.  There is no opportunity to declare your namespace to separate types within a single module. </p><br><h2>  13. Access control </h2><br><p>  Objective-C        .         ,    ‚Äî   . </p><br><p>  Swift       ,        . </p><br><p> Swift 3: </p><br><ul><li> <code>open</code> ‚Äî          . </li><li> <code>public</code> ‚Äî     ,              . </li><li> <code>internal</code> ‚Äî     . </li><li> <code>fileprivate</code> ‚Äî     . </li><li> <code>private</code> ‚Äî       . </li></ul><br><h2> 14.   </h2><br><p>  Objective-C      : <code>NSException</code>  <code>NSError</code> .    <code>NSException</code>       <code>@try</code> , <code>@catch</code> , <code>@finally</code> ;    <code>NSError</code>     <code>NSError*</code>     .   Cocoa    <code>NSException</code> ,   <code>NSException</code>     ,   ,  ,  <code>NSError</code> . </p><br><p>  Swift      <code>do-try-catch</code> ,   <code>NSError</code> .         <code>finally</code> .      <code>defer</code> ,       scope,  ,  ,            . </p><br><p>   <code>NSException</code> , , -   Objective-C,  ,     Swift . </p><br><pre> <code class="hljs bash">protocol Technology {} /*       ,    Error.     ,       throw  catch. */ //     . enum ConstructingError: Error { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> notEnoughFunding(shortage: Double) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> neccessaryTehcnologyIsNotAvailable(technology: Technology) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> impossibleWithModernTechnology } class ThrowingRocketFactory { var funds: Double = 0.0 func estimateCosts() -&gt; Double { <span class="hljs-built_in"><span class="hljs-built_in">return</span></span> 0.0 } /* ,    ,      throws  . */ func makeRocket(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> destination: Destination, withPayloadMass payloadMass: Double) throws -&gt; Rocket { //... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> funds &lt;= 0 { throw ConstructingError.notEnoughFunding(shortage: estimateCosts()) } //... } //... } <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> factory = ThrowingRocketFactory() <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> destination = Destination.lowEarthOrbit <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> payloadMass = 0.0 //          try. //   ,         . /* 1)    .   ,     ,    throws. */ func getRocket(forDestination destination: Destination, payloadMass: Double) throws -&gt; Rocket { <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> rocketFactory = ThrowingRocketFactory() <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> rocket = try rocketFactory.makeRocket(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: destination, withPayloadMass: payloadMass) <span class="hljs-built_in"><span class="hljs-built_in">return</span></span> rocket } /* 2)   .          <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>,    catch     . */ <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> rocket = try factory.makeRocket(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: destination, withPayloadMass: payloadMass) } catch ConstructingError.notEnoughFunding(<span class="hljs-built_in"><span class="hljs-built_in">let</span></span> shortage) { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Find money: \(shortage)"</span></span>) } catch ConstructingError.neccessaryTehcnologyIsNotAvailable(<span class="hljs-built_in"><span class="hljs-built_in">let</span></span> technology) { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Find alternatives for: \(technology)"</span></span>) } catch { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Impossible to create such rocket."</span></span>) } /* 3)       optional,     . */ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> rocket = try? factory.makeRocket(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: destination, withPayloadMass: payloadMass) { //... } /* 4)    .      ,        runtime. */ <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> rocket = try! factory.makeRocket(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: destination, withPayloadMass: payloadMass)</code> </pre> <br><pre> <code class="hljs swift"><span class="hljs-comment"><span class="hljs-comment">/*    defer ,          ,       . */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ThrowingRocketFactory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">openCommunications</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> {<span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">closeCommunications</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> {<span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>} } <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { factory.openCommunications() <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> { <span class="hljs-comment"><span class="hljs-comment">/*    defer       scope,   ,  do.        -        . */</span></span> factory.closeCommunications() } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rocket = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> factory.makeRocket(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: destination, withPayloadMass: payloadMass) } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><h2> 15.   </h2><br><p>  Swift,    Objective-C,   ,      .       API       <code>Unmanaged</code> .          : <code>retain()</code> , <code>release()</code> , <code>autorelease()</code> ; ,         ,     Swift'.     : <code>takeRetainedValue()</code> ‚Äî     ,  <code>takeUnretainedValue()</code> ‚Äî   . </p><br><p>   <code>Unmanaged</code> : <a href="http://nshipster.com/unmanaged/">[7]</a> </p><br><h2> 16.  </h2><br><p>  Swift       .    <code>atomic</code>  <code>nonatomic</code>  Objective-C. ,        ,   Grand Central Dispatch  <code>NSOperation</code>  Cocoa. </p><br><h2> 17.  </h2><br><p>    Objective-C   Swift .  Swift           (build configurations).        ( <code>-D &lt;#flag#&gt;</code> )    ,     ‚Äî <code>os()</code>    : <code>OSX</code> , <code>iOS</code> , <code>watchOS</code> , <code>tvOS</code> , <code>Linux</code> ;  ‚Äî <code>arch()</code> : <code>x86_64</code> , <code>arm</code> , <code>arm64</code> , <code>i386</code> ;   ‚Äî <code>swift()</code> : &gt;=   .    : <code>#if</code> , <code>#elseif</code> , <code>#else</code> , <code>#endif</code> . <br> <a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/BuildingCocoaApps/InteractingWithCAPIs.html">Apple docs.</a> </p><br><h2> 18.    </h2><br><p> <em>   Objective-C     Swift ?</em> ,          runtime    Swift . , OCMock    Swift ,    <code>NSObject</code> . </p><br><p> <em>   Swift     Objective-C ?</em>      ,   Objective-C.  Swift     Objective-C,     <code>NSObject</code> .   Swift    . <br> <a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/BuildingCocoaApps/MixandMatch.html">Apple docs.</a> </p><br><h1>  Objective-C </h1><br><p>      Objective-C        <a href="http://inessential.com/2016/05/26/a_definition_of_dynamic_programming_in_t">[8]</a> : </p><br><ol><li>       runtime. ,            ,     . </li><li>   -    ,      . ,   ,       ,      ,       . </li><li>     . ,  runtime       . </li></ol><br><p>   ,  Cocoa     .  Swift   ,      iOS,       Cocoa     ,    . </p><br><p>   Swift  open source ,      Apple ,   Cocoa.       .  ,    ,  , Cocoa   ,  ,  -   Apple    Cocoa - ,    Swift.      ,   Objective-C   ?   ,   , ,     Swift + Cocoa,       Swift. </p><br><h2> 19. ‚ÄúTarget/action‚Äù messaging </h2><br><p> ‚ÄúTarget/action‚Äù messaging        .        responder chain       UI   Interface Builder  1988          ,       . </p><br><p> Swift + Cocoa.  responder    <code>UIResponder</code>  UIKit,   , , . </p><br><p>   Swift       .         responder chain    runtime    . <a href="http://blog.wilshipley.com/2016/05/pimp-my-code-book-2-swift-and-dynamism.html">[9]</a> </p><br><h2> 20. Key-Value Coding </h2><br><p>     ,    . </p><br><p> Swift + Cocoa.  Swift KVC    ,    <code>NSObject</code> . </p><br><p>    Swift? <br>  read-only,   (reflection)   <code>Mirror</code> . <a href="https://appventure.me/2015/10/24/swift-reflection-api-what-you-can-do/">[10]</a> </p><br><h2> 21. Key-Value Observing </h2><br><p>  ‚Äú‚Äù   - . </p><br><p> Swift + Cocoa. KVO     ,      <code>NSObject</code> ,      <code>dynamic</code> ,    . </p><br><p>    Swift , ,  , , ,   property observers.  :     ,  <a href="https://github.com/slazyk/Observable-Swift">Observable-Swift</a> ,     ,   Cocoa KVO    . </p><br><h2> 22. NotificationCenter </h2><br><p>      ,     . </p><br><p> Swift + Cocoa.  API     .      (    )  ,         Objective-C (   <code>NSObject</code>    <code>@objc</code> ).     ,  API  ,      -  <code>NSObjectProtocol</code> ,       .     Cocoa  . </p><br><p>  Swift.    ‚Äú‚Äù   ,      Swift   .  ,   NS     ,   ,  <code>NotificationCenter</code>    Swift Foundation,    Cocoa . </p><br><h2> 23. UndoManager </h2><br><p>     ,         . </p><br><p> Swift + Cocoa.  3   :   ,  <code>NSInvocation</code>   .        .       :  ,      <code>NotificationCenter</code> :      Objective-C.   <code>NSInvocation</code>     , ,  ,   ,       <code>NSObject</code> .         iOS 9. </p><br><p>  Swift.     <code>UndoManager</code>    , ,    <code>NotificationCente</code> r,       Swift,      <code>UndoManager</code>  Swift Foundation. </p><br><br><p> ,  API  ,     ,        ,      Swift API,    . </p><br><p>   , ,     Objective-C,    Swift  .  Swift      .      ,  ‚Äî  -.  ,      ,   Objective-C      KVC, CoreData, bindings, HOM, UndoManager  ..          /.  ,  Swift     ,          . <a href="http://blog.metaobject.com/2016/05/what-missing-in-discussion-about.html">[11]</a> </p><br><h1>    Swift </h1><br><p>          Swift?     ? </p><br><p> 1. .     Swift ,   Objective-C.      ,     .        .      : <a href="https://realm.io/news/swift-summit-johannes-weiss-the-type-system-is-your-friend/">[12]</a>  <a href="https://alisoftware.github.io/swift/enum/constants/2015/07/19/enums-as-constants/">[13]</a> . </p><br><p> 2.  ? ,        ,   Swift  ,  Objective-C. ,  ,  iOS       ,       Cocoa. </p><br><p>    ,   .  Swift       <code>Bool</code> ,      . </p><br><h1>  Conclusion </h1><br><p>   Swift  Objective-C    . </p><br><p> -, source stability.         ,     3.0,  ,     ,  Swift     ,    . ,            . ,                   Availability API. <a href="">[14]</a> </p><br><p> -, Swift   ABI .  ,           . </p><br><p>   ,           ,      Swift   ,   ,      . </p><br><p>    Swift 3   ABI     Swift 4,     2017 . <a href="https://lists.swift.org/pipermail/swift-evolution/Week-of-Mon-20160725/025676.html">[15]</a> </p><br><p>   ,  ,    Swift  Objective-C, ,   ,    ,      . </p><br><ul><li>      . </li><li>  <code>switch-case</code> . </li><li>   . </li><li>  (subscripts). </li><li> Availability API. </li><li> Playgrounds. </li><li> Swift ‚Äî open source. </li><li>  . </li><li>  Intervals </li><li> Option sets. </li><li> Labeled loops. </li><li> Autoclosures. </li><li>  . </li></ul><br><h1>  Links </h1><br><p> <a href="https://appventure.me/2015/10/17/advanced-practical-enum-examples/">1. Advanced &amp; Practical Enum usage in Swift</a> <br> <a href="https://realm.io/news/andy-matuschak-controlling-complexity/">2. Controlling Complexity in Swift ‚Äî or ‚Äî Making Friends with Value Types</a> <br> <a href="https://youtu.be/XWoNjiSPqI8">3. Protocols with Associated Types</a> <br> <a href="http://www.russbishop.net/swift-associated-types">4. Swift: Associated Types</a> <br> <a href="https://nomothetis.svbtle.com/the-ghost-of-swift-bugs-future">5. The Ghost of Swift Bugs Future</a> <br> <a href="https://developer.apple.com/videos/play/wwdc2015/408/">6. Protocol-Oriented Programming in Swift</a> <br> <a href="http://nshipster.com/unmanaged/">7. Unmanaged</a> <br> <a href="http://inessential.com/2016/05/26/a_definition_of_dynamic_programming_in_t">8. A Definition of Dynamic Programming in the Cocoa World</a> <br> <a href="http://blog.wilshipley.com/2016/05/pimp-my-code-book-2-swift-and-dynamism.html">9. Pimp My Code, Book 2: Swift and Dynamism</a> <br> <a href="https://appventure.me/2015/10/24/swift-reflection-api-what-you-can-do/">10. The Swift Reflection API and what you can do with it</a> <br> <a href="http://blog.metaobject.com/2016/05/what-missing-in-discussion-about.html">11. What's Missing in the Discussion about Dynamic Swift</a> <br> <a href="https://realm.io/news/swift-summit-johannes-weiss-the-type-system-is-your-friend/">12. The Type System is Your Friend</a> <br> <a href="https://alisoftware.github.io/swift/enum/constants/2015/07/19/enums-as-constants/">13. Enums as constants</a> <br> <a href="">14. Availability by Swift version</a> <br> <a href="https://lists.swift.org/pipermail/swift-evolution/Week-of-Mon-20160725/025676.html">15. Looking back on Swift 3 and ahead to Swift 4</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/308264/">https://habr.com/ru/post/308264/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../308248/index.html">Trello Clone on Phoenix and React. Parts 6-7</a></li>
<li><a href="../308254/index.html">Choosing an html-parser for Apache.JMeter</a></li>
<li><a href="../308256/index.html">The creation of the game "Words from the Word"</a></li>
<li><a href="../308258/index.html">Why do you need SSL security certificates in 3CX Phone System</a></li>
<li><a href="../308260/index.html">Data backup in virtualization systems for small and medium-sized companies</a></li>
<li><a href="../308266/index.html">What are the clouds and myths about them in the heads of ITshnikov: opinions, stereotypes and life in the "clouds"</a></li>
<li><a href="../308268/index.html">The logic of consciousness. Introduction</a></li>
<li><a href="../308270/index.html">On the development of the upcoming CTF with offline quest for the all-Ukrainian battle of hackers</a></li>
<li><a href="../308272/index.html">List of the most popular devices in the US and the EU on which you need to test mobile applications (translation of the article)</a></li>
<li><a href="../308274/index.html">Will FAS wait for its ‚Äúhigh point‚Äù in a lawsuit against Google</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
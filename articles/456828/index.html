<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tuning vias of printed circuit boards</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let's talk about the design of vias - for serious electronics, their quality is very important. At the beginning of the article I highlighted the fact...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tuning vias of printed circuit boards</h1><div class="post__text post__text-html js-mediator-article">  Let's talk about the design of vias - for serious electronics, their quality is very important.  At the beginning of the article I highlighted the factors affecting the integrity of the signal, and then showed examples of calculating and tuning the impedance of single and differential vias. <br><br><img src="https://habrastorage.org/webt/xc/ih/0f/xcih0fro4vjpjcyln-a6iyextmy.jpeg"><br><a name="habracut"></a><br>  Hello everyone, my name is Vyacheslav.  I have been working on the development of printed circuit boards for 5 years, and during this time I have not only read many rules and recommendations for tracing, but I also found primary sources and worked with them. <br><br>  In complex computing systems <a href="https://habr.com/ru/company/yadro/blog/327458/">developed</a> by YADRO, high-speed signals on the way from the transmitter to the receiver travel considerable distances, passing through several boards and making a dozen interlayer transitions.  In such conditions, each carelessly designed vias will make a small contribution to signal degradation, and as a result, the interface may not work. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Signal integrity </h2><br>  The vias (hereinafter referred to as p / o, eng. Via) represent irregularities in the transmission line.  Like other discontinuities, they spoil the signal.  This effect is poorly pronounced at low frequencies, but it increases significantly with increasing frequency.  Often, developers undeservedly pay little attention to the structure of vias: they can be copied from a ‚Äúneighboring‚Äù project, taken from a datasheet, or not specified in the CAD system (default setting). <br><br>  Before using the calculated structure, it is necessary to understand why it was made exactly like this?  Blind repetition can only harm. <br><br>  The integrity of the signal in the channel as it passes through the vias is mainly influenced by the following factors: <br><br><ul><li>  signal reflection due to changes in wave resistance; </li><li>  signal degradation due to parasitic capacitance and inductance; </li><li>  reflections from an unused piece of p / o during the transition to the inner layer (hereinafter, the stub from the English via stub); </li><li>  crosstalk (English Cross talks); </li><li>  interference in power tires. </li></ul><br>  Let us consider in more detail the causes of these effects and methods for their elimination. <br><br><h2>  Factor 1. Wave resistance p / o </h2><br>  In a perfectly designed board, the characteristic impedance does not change throughout the course, including when moving to another layer.  In reality, it usually looks like this: <br><br><img src="https://habrastorage.org/webt/eq/wp/r-/eqwpr-z1xmtq6kl0oreoxtlqlms.png"><br>  <i>Figure 1. The change in wave resistance when moving to another layer.</i> <br><br>  The better the wave impedances are matched, the less signal will be reflected.  How to affect this? <br><br>  Consider the structure n / o on the board [1]. <br><br><img src="https://habrastorage.org/webt/ux/7y/gq/ux7ygquwotonhvorijx7wg-ftna.png"><br>  <i>Figure 2. The structure of the p / o on the board.</i> <br><br><div class="scrollable-table"><table><tbody><tr><th>  Layer </th><th width="130">  Element </th><th>  Property </th></tr><tr><td>  TOP </td><td>  Playground </td><td>  Parasitic capacitance between the platform and the L2 power ground </td></tr><tr><td>  TOP-L2 </td><td>  segment p / o </td><td>  Inductance </td></tr><tr><td>  L2 (food landfill) </td><td>  Antipad </td><td>  The anti-drop forms the edge capacity - the capacity between the walls of the p / o and the power range. </td></tr><tr><td>  L2-L3 </td><td>  Cut p / o </td><td>  Inductance </td></tr><tr><td>  L3 (food ground) </td><td>  Antipad </td><td>  The anti-drop forms the edge capacity - the capacity between the walls of the p / o and the power range. </td></tr><tr><td>  L3-L4 </td><td>  Cut p / o </td><td>  Inductance </td></tr><tr><td>  L4 (signal) </td><td>  Playground </td><td>  Parasitic capacitance between the p / o site and the L3 power supply ground </td></tr><tr><td>  L4-L5 </td><td>  Stub </td><td>  Noise source </td></tr></tbody></table></div><br>  By changing the elements of the n / a, we change the wave impedance of the transition.  Our goal is to match the impedance of the transition structure with the impedance of the conductors to minimize reflections.  Consider how the impedance changes when the elements of the p / o structure change. <br><br><div class="scrollable-table"><table><tbody><tr><th>  Element </th><th>  Act </th><th>  Electrical property </th><th>  Impedance (result) </th></tr><tr><td>  Playground </td><td>  ‚Üì </td><td>  C ‚Üì </td><td>  ‚Üë </td></tr><tr><td>  Diameter n / a </td><td>  ‚Üì </td><td>  L ‚Üë </td><td>  ‚Üë </td></tr><tr><td>  Antipad </td><td>  ‚Üë </td><td>  C ‚Üì </td><td>  ‚Üë </td></tr><tr><td>  P / o length </td><td>  ‚Üë </td><td>  L ‚Üë </td><td>  ‚Üë </td></tr><tr><td>  The number of food polygons on the way p / o </td><td>  ‚Üì </td><td>  C ‚Üì </td><td>  ‚Üë </td></tr><tr><td>  Step p / o </td><td>  ‚Üë </td><td>  C ‚Üì </td><td>  ‚Üë </td></tr><tr><td>  Distance to return p / o </td><td>  ‚Üë </td><td>  L ‚Üë </td><td>  ‚Üë </td></tr><tr><td>  Number of return p / o </td><td>  ‚Üë </td><td>  L ‚Üì </td><td>  ‚Üì </td></tr><tr><td>  Filling holes </td><td>  Fill with resin (Dk ‚Üë) </td><td>  With ‚Üë </td><td>  ‚Üì </td></tr></tbody></table></div><br><h2>  Factor 2. Parasitic inductance and capacitance </h2><br>  Conductors on a printed circuit board can be made with a characteristic impedance that lies in a wide range, but most often it is 50 ohms.  On the one hand, this is due to historical continuity: the impedance of 50 ohms has been standardized for coaxial cables as a compromise between the load level of the driver and the loss of signal energy.  On the other hand, a 50-ohm conductor is easy to manufacture on a sample board. <br><br>  For the developer, it is not so much the specific value of the wave resistance that is important as its constancy throughout the transmission line. <br><br>  In order to make a transmission line with a fixed value of wave resistance, the developer selects the width of the track and the distance to the support layer, i.e.  changes the linear capacitance and inductance of the transmission line to a <b>certain</b> value. <br><br>  In p / o the inductive component is quite significant.  In the first approximation, we must, within reason, minimize the parasitic inductance as much as possible, and then change the p / o parameters to achieve a <b>given</b> capacitance, and, accordingly, impedance. <br><br>  An excessive decrease in the capacitance of the s / o will cause a local increase in the impedance and, as a result, signal reflections. <br><br><h2>  Factor 3. Via stub </h2><br>  What happens when a signal passes through a vias with a stub? <br><br><img src="https://habrastorage.org/webt/po/oq/qo/pooqqoh6of20mye9ubzbe2rynhc.png"><br>  <i>Figure 3. A transition hole with a stub, resonance at ¬º wavelength.</i> <br><br>  In our example, the signal propagates downwards from the Top layer.  Reaching the inner signal layer, the signal separates: the part moves along the route on the inner layer, and the part continues to move down the vias, then is reflected from the Bottom layer.  After the reflected signal has reached the inner layer, it is again divided, a part moves along the path, and a part returns to the source. <br><br>  The reflected signal will be summed up with the original one and distort it, which will be expressed in narrowing the window in the eye diagram and increasing the level of insertion loss (eng. Insertion Loss). <br><br>  In the worst case, the TD segment will be equal to ¬º of the wavelength of the signal, then the reflected signal will reach the path on the inner layer with a delay of half the period, superimposed on the original signal in antiphase. <br><br>  When analyzing integrity, it is recommended to consider the bandwidth of 5 Nyquist frequencies.  A good approximation would be considered acceptable stab, which gives resonance at 7 harmonics and above [2]. <br><br><img src="https://habrastorage.org/webt/yc/2k/yv/yc2kyv7bzo25qgbxzi5q0mdvrly.png"><br>  <i>Figure 4. Graph of the level of insertion loss for p / o with stubs 0, 0.65, 1.2 mm.</i> <br><br>  Figure 4 shows a huge resonance at frequencies around 24 GHz.  We can conclude that if our signal operates at a frequency of 2-3 GHz, we can afford not to eliminate the stub, because within 7 harmonics ‚Äúeverything is calm‚Äù. <br><br>  A quick assessment of the stub criticality can be made in <a href="https://www.polarinstruments.com/support/si/AP8166.html">the Polar calculator</a> : <br><img src="https://habrastorage.org/webt/fc/1r/xa/fc1rxazqgfxfskl1vkh9753o5r4.jpeg"><br><img src="https://habrastorage.org/webt/vc/fk/do/vcfkdoprfj6bdwmp6e10riynofq.jpeg"><br>  <i>Figure 5. Image from <a href="https://www.polarinstruments.com/support/si/AP8166.html">polarinstruments.com</a> .</i>  <i>A stub length of 2.5 mm is permissible for signals with a rise time of more than 500 ps.</i> <br><br>  A slightly more accurate result is given by the formulas given in the article [2].  They take into account the p / o geometry and allow us to calculate the correction for the dielectric constant of the dielectric along the Z axis. <br><br>  Eliminate the stub by using the operation "reverse drilling" (eng. Backdrilling), or using microtransitions (eng. Blind and buried vias).  The choice depends on the features of the project.  Reverse drilling is easier and cheaper.  After the board is manufactured, a stub drill of larger diameter is drilled to a predetermined depth.  The developer is required to set additional indentations of the topology in the drilling zone, and it is also available for the manufacturer to indicate the drilling requirements in the design documentation.  Modern CAD systems support this functionality. <br><br>  Microtransitions are primarily intended for high density boards (HDI), but in some cases they can be used by leveling out the high cost of failure by reverse drilling and reducing the number of layers on the board.  When developing HDI boards, you should remember some features: <br><br><ul><li>  each new type of payment order increases the cost of the board; </li><li>  for laser drilling, special optimized prepregs are used, whose properties may differ; </li><li>  metallization of blind holes increases the thickness of the copper on the inner layers. </li></ul><br>  It is highly recommended to agree on the board structure with the manufacturer in advance. <br><br><h2>  Factor 4. Cross-talk </h2><br>  Cross-talk - unwanted signal transmission from one line to the next.  This transmission occurs because two closely spaced conductors have capacitive and inductive coupling. <br><br>  The nature of the crosstalk signal wires and p / o is slightly different. <br>  In the s / c signal has no support layer, the return currents flow along the adjacent s / v, forming a large loop.  Cross-interference signals in the p / o due to the inductive component. <br><br>  The greatest effect on minimizing crosstalk can be achieved by increasing the distance between the n / a.  However, the topologist often does not have much space. <br><br>  The convergence of the p / o in a differential pair not only reduces the occupied area, but also has a positive effect on noise immunity [3]. <br><br>  The generally accepted way to minimize crosstalk between adjacent signal p / o - put a screening p / o between them.  With this method, you will need to drive signals with a pitch of about 2 mm (Figure 6).  If there is not enough space, you can use a smaller step with a shift (eng. Staggered pattern), as in Figure 7. Using simulation, you can choose the ideal angle of shift [4]. <br><br><img src="https://habrastorage.org/webt/st/0k/vr/st0kvryh8vsqeyemalyvpvqodia.png"><br>  <i>Figure 6. Minimizing cross-talk with shielding p / o.</i> <br><br><img src="https://habrastorage.org/webt/s0/yb/ko/s0ybko8xfyx5rvuvjwv8ompnpze.png"><br>  <i>Figure 7. Minimizing crosstalk using a diagonal ‚Äúchess‚Äù shift.</i> <br><br>  Cross-talk can also be reduced by exotic methods, for example, a long stub (due to the shift of the inductive-capacitive balance of the n / a) [5].  Also, noise can be reduced at the design stage of the microcircuit case [6]. <br><br><h2>  Factor 5. Tire Power Disturbance </h2><br>  In addition to adjacent signal circuits, signal quality can be interfered with by the inner layers. <br><br>  On the polygons of power can flow large currents.  Due to the increase in inductance at the edges of the polygons, the flowing currents form the marginal fields (Fringing fields) along all the boundaries of the polygon, including the cutouts.  Edge fields are a source of electromagnetic radiation (English Edge-fired emission) in space.  To reduce the emission of electromagnetic radiation, rule 20H is applied (Figure 8), which consists in narrowing the power range to the land range. <br><br><img src="https://habrastorage.org/webt/r2/ek/1b/r2ek1bw7c_u36bhrge5yfvpdtnm.png"><br>  <i>Figure 8. Edge margins and rule 20H.</i> <br><br>  To protect the p / o from interference, if possible, it is necessary to increase the anti-drop on the power supply grounds.  The 20H rule for semiconductor is difficult to provide, and indeed, it is usually recommended to have an anti-drop about 2 mm in diameter (Figure 9). <br><br><img src="https://habrastorage.org/webt/z3/rp/hg/z3rphgjvj_kereociag3azwuwnu.png"><br>  <i>Figure 9. Increased anti-drop on power layers</i> <br><br><h2>  Single impedance impedance calculation </h2><br>  Based on knowledge of the effect of p / o elements on impedance, we can design our ideal p / o.  An excellent start will be the calculation of the impedance in the calculator. <br><br>  Calculators such as <a href="http://www.saturnpcb.com/pcb_toolkit/">Saturn PCB Design Toolkit</a> and <a href="https://www.polarinstruments.com/products/si/Si9000.html">Polar Instruments Si9000e are</a> popular with PCB development <a href="https://www.polarinstruments.com/products/si/Si9000.html">engineers</a> .  Both of them allow you to quickly calculate the impedance of a single p / o. <br><br>  The result obtained in these calculators is very different from each other.  This is due to the fact that these tools have a different approach. <br><br>  Polar counts impedance in a two-dimensional plane, where n / o crosses the power range.  The calculation formula is not given.  It was established experimentally that the calculation is made according to the impedance formula of a coaxial cable: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>z</mi><mn>0</mn></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>138</mn><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>A</mi><mi>P</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>V</mi><mi>P</mi></mrow></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>E</mi><mi>r</mi><mn>1</mn></mrow></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="34.647ex" height="2.419ex" viewBox="0 -780.1 14917.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-7A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMAIN-30" x="658" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMAIN-3D" x="1197" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-66" x="2503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-72" x="3053" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-61" x="3505" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-63" x="4034" y="0"></use><g transform="translate(4468,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMAIN-33" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMAIN-38" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-66" x="1751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-72" x="2302" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-61" x="2753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-63" x="3283" y="0"></use><g transform="translate(3716,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-41" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-50" x="750" y="0"></use></g><g transform="translate(5218,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-56" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-50" x="769" y="0"></use></g></g><g transform="translate(11207,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-71" x="719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-72" x="1180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-74" x="1631" y="0"></use><g transform="translate(1993,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-45" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-72" x="764" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMAIN-31" x="1216" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>z</mi><mn>0</mn></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>138</mn><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>A</mi><mi>P</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>V</mi><mi>P</mi></mrow></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>E</mi><mi>r</mi><mn>1</mn></mrow></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> z_0 = \ frac {138 \ frac {AP} {VP}} {\ sqrt {Er1}} </script></p><br><img src="https://habrastorage.org/webt/u5/8t/ci/u58tcijt_zdm9pavx_hevru6qji.jpeg"><br><br><img src="https://habrastorage.org/webt/1g/nh/kz/1gnhkzeauzljy7pcahci9-3ubv8.jpeg"><br>  <i>Figure 10. Image from <a href="https://www.polarinstruments.com/support/si/AP8178.html">polarinstruments.com</a></i> <br><br>  The illustration shows a rather low value of the dielectric constant Er1, compared with the standard.  This is due to the heterogeneity of the structure of the dielectric: it consists of resin (Er 3.2) and fiberglass filaments (Er 6.1), therefore it has an average dielectric constant of about 4.1.  This value can vary quite locally.  So, near p / o resin predominates, therefore, the value of dielectric constant is recalculated in the direction of decreasing [7]. <br><br>  Saturn PCB considers impedance using the formula: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>z</mi><mn>0</mn></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>V</mi><mi>i</mi><mi>a</mi><mi>I</mi><mi>n</mi><mi>d</mi><mi>u</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>V</mi><mi>i</mi><mi>a</mi><mi>C</mi><mi>a</mi><mi>p</mi><mi>a</mi><mi>c</mi><mi>i</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo>&amp;#x2217;</mo><mn>0.001</mn></mrow></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="54.57ex" height="2.419ex" viewBox="0 -780.1 23495.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-7A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMAIN-30" x="658" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMAIN-3D" x="1197" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-73" x="2503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-71" x="2972" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-72" x="3433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-74" x="3884" y="0"></use><g transform="translate(4246,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-72" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-61" x="1252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-63" x="1781" y="0"></use><g transform="translate(2215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-56" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-69" x="769" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-61" x="1115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-49" x="1644" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-6E" x="2149" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-64" x="2749" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-75" x="3273" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-63" x="3845" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-74" x="4279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-61" x="4640" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-6E" x="5170" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-63" x="5770" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-65" x="6204" y="0"></use></g><g transform="translate(8885,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-56" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-69" x="769" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-61" x="1115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-43" x="1644" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-61" x="2405" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-70" x="2934" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-61" x="3438" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-63" x="3967" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-69" x="4401" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-74" x="4746" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-61" x="5108" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-6E" x="5637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-63" x="6238" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMATHI-65" x="6671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMAIN-2217" x="7360" y="0"></use><g transform="translate(8082,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMAIN-30" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMAIN-30" x="1279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yadro/blog/456828/&amp;xid=17259,1500003,15700022,15700186,15700191,15700256,15700259&amp;usg=ALkJrhhdbVpJIWTfRUCY_XnGsY1CndTCEw#MJMAIN-31" x="1780" y="0"></use></g></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>z</mi><mn>0</mn></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>V</mi><mi>i</mi><mi>a</mi><mi>I</mi><mi>n</mi><mi>d</mi><mi>u</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>V</mi><mi>i</mi><mi>a</mi><mi>C</mi><mi>a</mi><mi>p</mi><mi>a</mi><mi>c</mi><mi>i</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo>‚àó</mo><mn>0.001</mn></mrow></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> z_0 = \ sqrt {\ frac {ViaInductance} {ViaCapacitance * 0.001}} </script></p><br><br>  When changing the length p / o, the values ‚Äã‚Äãof inductance and capacitance change disproportionately, the impedance changes.  The impedance of exactly the same p / o long 1.6 mm, Saturn PCB counts as 128 Ohms!  (Figure 11) <br><br><img src="https://habrastorage.org/webt/dw/9v/1_/dw9v1_zbchoaos1jqnnopleibd4.png"><br>  <i>Figure 11. The calculation of the p / o in the Saturn PCB Design Toolkit.</i> <br><br>  Immediately the question arises: who to believe? <br><br>  We will model in a three-dimensional electromagnetic field solver (the 3D Solver), as it will look on a real 8-layer board with a thickness of 1.6 mm (Figure 12) <br><br><img src="https://habrastorage.org/webt/-r/c_/oq/-rc_oqxitxeqijyprsv7mye15uk.png"><br>  <i>Figure 12. Structure of the transition between layers with a hole for the return current.</i> <br><br>  In our case, the impedance was about 70 ohms.  By bringing the return p / o closer, you can reduce it by another 5 ohms.  By ‚Äúplaying‚Äù with the size of the anti-attack, you can quite accurately adjust the impedance to the target value (Figure 13). <br><br><img src="https://habrastorage.org/webt/pc/kp/nq/pckpnq0llymrxa9eiiakww15mqm.png"><br>  <i>Figure 13. The impedance of the circuit with p / o on the timing diagram.</i> <br><br>  In the frequency domain, the ‚Äúbest‚Äù parameters are expressed in a smaller value of the reflection coefficient from the input (Figure 14). <br><br><img src="https://habrastorage.org/webt/qh/kg/ye/qhkgyejl0_szo6ejeepo-uayhhk.png"><br>  <i>Figure 14. Parameters of single p / o in the frequency domain.</i> <br><br>  Polar calculation was closer to the result.  It is possible that in order to get an adequate result in Saturn PCB, corrections are required.  If someone has a positive experience with impedance calculation in Saturn, share in the comments! <br><br><h2>  Impedance calculation of differential vias </h2><br>  The calculation of differential p / o is similar to single, except that now we do not have a calculator: the above tools do not consider differential p / o.  Also, now we can additionally change the p / o step in the diff.  a pair. <br><br>  We take the same structure: an 8-layer board with a thickness of 1.6 mm.  Consider the 9 p / o configurations (Figure 15). <br><br>  The first 3 p / o have gaps of 0.125 mm and differ only in the location of the holes for the return current.  All n / a c 4 and further have a pitch of 1 mm.  P / o c 6 and further have an increased anti-drop (0.250 mm) and are distinguished by the indentation of the holes for the return current. <br><br><img src="https://habrastorage.org/webt/wx/cq/mo/wxcqmoeaewvwr8mg0fjx0snhfcw.png"><br>  <i>Figure 15. Bores.</i> <br><br>  Consider the impedance plot (Figure 16). <br><br><img src="https://habrastorage.org/webt/yn/do/oi/yndooiwwlavvjf1kkznshbo2-vc.png"><br>  <i>Figure 16. Impedance p / o in the time domain.</i> <br><br>  The ‚Äúhump‚Äù is clearly visible on the chart, which corresponds to the vertical segment of the p / o - ‚Äúglass‚Äù (eng. Via barrel). <br><br>  Considering the frequency dependence of the reflection coefficient VIA1-3 (Figure 17), we see that despite the good performance at the target frequency of 6 GHz, there is a resonance at lower frequencies.  It is preferable to improve via7-9, and if it does not work out, then via4-5, to reduce the "hump" due to the shift of the graphs to the right. <br><br><img src="https://habrastorage.org/webt/ro/ts/w0/rotsw0xfl70sdofv77nla1wixl0.png"><br>  <i>Figure 17. Reflection coefficient from the input p / o.</i> <br><br>  Reduce the anti-drop in VIA9 to get gaps of 0.125 mm.  For VIA4, reduce the p / o step to 0.75 mm and consider the result obtained (Figure 18). <br><br><img src="https://habrastorage.org/webt/mj/hb/e7/mjhbe7lnbnv-4w3gnoel7rmq3kc.png"><br>  <i>Figure 18. Comparison of impedance modified p / o.</i> <br><br>  In the frequency domain, the shift of the reflection coefficient graph from the input to the right is seen (Figure 19). <br><br><img src="https://habrastorage.org/webt/w6/pk/wq/w6pkwqqmevdfjj2z0v7wewoxsru.png"><br>  <i>Figure 19. Comparison of reflection coefficient of modified p / o.</i> <br><br><h2>  Final Recommendations </h2><br>  Vents in PCBs are complex and non-uniform structures.  To correctly calculate the parameters, expensive 3D solvers, competencies and time consuming are required. <br><br>  If it is not possible to avoid the use of transitions of critical signals to other layers, it is necessary first of all to assess the degree of influence of inhomogeneities on the integrity of signals.  If the inhomogeneity is electrically short (the delay time is less than 1/6 of the front), the stub resonates at frequencies outside the passband - it makes no sense to spend time and money on optimization. <br><br>  In the first approximation, it is convenient to use ready-made structures from datasheets or previous boards, but remember the features of the current project. <br><br>  Calculators allow you to quickly assess the parameters of the p / o, however, they use strongly simplified models that adversely affect the result. <br><br><div class="spoiler">  <b class="spoiler_title">Bibliography</b> <div class="spoiler_text"><ol><li>  Chin, T. Differential pairs: four things you need to know about vias.  Retrieved from TI E2E Community: <a href="https://e2e.ti.com/blogs_/b/analogwire/archive/2015/06/10/differential-pairs-four-things-you-need-to-know-about-vias">https://e2e.ti.com/blogs_/b/analogwire/archive/2015/06/10/differential-pairs-four-things-you-need-to-know-about-vias#</a> </li><li>  Simonovich, B. Via Stubs Demystified.  Retrieved from Bert Simonovich's Design Notes: <a href="https://blog.lamsimenterprises.com/2017/03/08/via-stubs-demystified/">https://blog.lamsimenterprises.com/2017/03/08/via-stubs-demystified/</a> </li><li>  Demystifying Vias in High-Speed ‚Äã‚ÄãPCB Design.  Retrieved from Keysight Technology: <a href="https://www.keysight.com/">https://www.keysight.com</a> </li><li>  K. Aihara, J. Buan, A. Nagao, T. Takada and CC Huang, ‚ÄúMinimizing differential transmissions,‚Äù in Proc.  14th Elect.  Perform.  Electron.  Packages and Systems, Portland, OR, Oct.  2014 </li><li>  CM Nieh and J. Park, ‚ÄúFar-End Crosstalk Cancellation using the DDR4 Memory Channel,‚Äù in Proc.  63rd Electronics Components and Technology Conference, Las Vegas, NV, May 2013, pp.  2035-2040. </li><li>  H. Kanno, H. Ogura, and K. Takahashi, ‚ÄúSurface Transition Compensating Wireline V-band, Included with V-band,‚Äù in IEEE MTT-S Int.  Microwave Symp.  Dig., Philadelphia, PA, June 2003, pp.  1159-1162. </li><li>  Via Pad / Anti-Pad Impedance Calculation.  Retrieved from Polar instruments <a href="https://www.polarinstruments.com/support/si/AP8178.html">https://www.polarinstruments.com/support/si/AP8178.html</a> </li></ol></div></div></div><p>Source: <a href="https://habr.com/ru/post/456828/">https://habr.com/ru/post/456828/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../456812/index.html">What is there at ITMO University - IT-festivals, hackathons, conferences and open seminars</a></li>
<li><a href="../456818/index.html">Sysadmin in neaytishnoy company. The unbearable burden of being?</a></li>
<li><a href="../45682/index.html">cry of the soul and manifest</a></li>
<li><a href="../456820/index.html">Clay ‚Üí Brick ‚Üí Furnace</a></li>
<li><a href="../456826/index.html">Do-it-yourself autoscaling using AWX, Ansible, haproxy and KROK Clouds</a></li>
<li><a href="../45683/index.html">ExtJS and Hosting Base Files in CDN</a></li>
<li><a href="../456830/index.html">Vivaldi 2.6 - Summer Joys</a></li>
<li><a href="../456836/index.html">Selection: 5 non-obvious competitive analysis tools that you might not know about</a></li>
<li><a href="../456840/index.html">SDL 2 Tutorial: Lesson 6 - Primitives</a></li>
<li><a href="../456844/index.html">Disguise strategy: parsing the game about closed information</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
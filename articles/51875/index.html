<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create your SVN server: $ 3 and 30 minutes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many harabrachiteli sometimes care about the issue of hosting SVN. The Internet is full of options for hosting the SVN repository, with a price of abo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create your SVN server: $ 3 and 30 minutes</h1><div class="post__text post__text-html js-mediator-article">  Many harabrachiteli sometimes care about the issue of hosting SVN.  The Internet is full of options for hosting the SVN repository, with a price of about 10-15 days a month, but one thing is confusing: hosting a repository is a much more important matter than hosting a site.  In the code - your ‚Äúovervalued ideas‚Äù, the uptime of the server and the reliability of backups directly affect the work of your business.  Some people choose to host SVN in serious companies.  A good comparison of the parameters here: <a href="http://www.svnhostingcomparison.com/">http://www.svnhostingcomparison.com/</a> , open-source, by the way, can be done in a good place with the letter G ;-). <br><br>  Others, like me, decide to host SVN on their VDS / Dedicated server.  I will stop on this question, having told at the same time a little about options for starting / configuring svn server (including relatively new ones - encryption / authentication SASL and storage in FS).  All this will come to you at $ 3-4 / month, in full control over backups and access to the server.  Donate 30 minutes of precious time to set up. <br><br>  Target audience: initial - the average level of experience with Linux. <br>  Ps.  I am aware that FreeBSD is not Linux ;-) <br><a name="habracut"></a><br><h1>  SVN server options </h1>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>By server:</b> <br><ul><li>  Apache + SVN.  While the most popular. </li><li>  svnserve  The fastest, but you need a minimum VPS server. </li></ul><br><br>  <b>By encryption:</b> <br><ul><li>  No encryption.  Only in corporate networks. </li><li>  SSL: Encryption is already ‚Äúthe old fashioned way‚Äù - only in conjunction with Apache. </li><li>  SASL: A new way included in svnserve.  To work, you need a client version 1.5.3 and higher.  The last phrase is 4 hours of despair :-) </li></ul><br><br>  <b>By authentication:</b> <br><ul><li>  A list of users with open passwords in passwd (the easiest way). </li><li>  Secure verification via SASL: DIGEST-MD5 (passwords are not open). </li><li>  Tunnel svn + ssh: users login under their Linux accounts. </li><li>  You can fasten any other methods, including the usual database. </li></ul><br><br>  <b>Data storage:</b> <br><ul><li>  Berkley DB is an old (time-tested) and reliable way. </li><li>  FileSystem - new, you can do backups "on the fly" </li></ul><br><br>  For my server, I chose the option <br><ul><li>  svnserve (for low memory consumption and speed) </li><li>  SASL (symmetric encryption that works at least somehow, from shit-certificate (self-signed) SSL sense 0, and people tend to accept any certificates). </li><li>  Checking passwords through SASL </li><li>  Storage on FileSystem </li><li>  It‚Äôs decided on <a href="https://habrahabr.ru/users/freebsd/" class="user_link">FreeBSD</a> firstvds.ru, 1 gigabyte of space, easy to expand, full control over backups and access, 64 meters of memory (looking ahead, I‚Äôll say that only 6.5 are used, so it wouldn't work ;-)).  This happiness costs 4u.e (3 with a 25% discount ;-)) per month).  Wordlessly, you can choose any VDS here. </li></ul><br><br><h1>  Configure the system </h1><br><ul><li>  We collect / set svnserve.  You need to enable SASL support, everything else is not needed. <br><blockquote>  cd / usr / ports / devel / subversion <br>  make install clean </blockquote><br></li><li>  We create the user svn, and under it we continue to do everything.  We cut down a remote login from him, well, or in extreme cases, we set a very complex password. </li><li>  Create a repository: svnadmin create ~ / name </li><li>  Go to ~ / name / conf, and write to svnserve.conf <br><blockquote><code>[general] <br> anon-access = none <br> auth-access = write <br> realm your_server_realm <br> [sasl] <br> use-sasl = true <br> min-encryption = 128 <br> max-encryption = 256 <br></code> </blockquote><br><br>  Pay attention to the end of the file - enabled encrypted password check (min-encryption&gt; 0) and mandatory encryption of at least 128 bits.  Above 128, my client (for now) does not hold :-) </li><li>  Next, add users to the SASL database: <br><blockquote>  saslpasswd2 -c -f sasldb -u your_server_realm new_user_name </blockquote><br>  We observe the created file sasldb.db and remember the path to it. </li><li>  Further the most difficult, the SASL setup.  You need to know where the SASLs are.  For example using locate libsasldb <br>  In the case of firstvds with FreeBSD, this is / usr / local / lib / sasl2 </li><li>  Here we create the svn.conf file of the following type: <br><blockquote>  pwcheck_method: auxprop <br>  auxprop_plugin: sasldb <br>  sasldb_path: / your_path_to / sasldb <br>  mech_list: DIGEST-MD5 <br></blockquote><br>  Please note that the .db extensions do not need to be written here. </li><li>  Modify startup script: (/ usr / local / etc / rc.d / svnserve) <br><blockquote>  svnserve_flags = $ {svnserve_flags: - " <strong>-T -d --listen-port = 3690 --listen-host 0.0.0.0</strong> "} <br>  svnserve_data = $ {svnserve_data: - "/ your_path_to_repository"} <br></blockquote>  --listen-host 0.0.0.0 is needed because  in FreeBsd, svnserve starts listening on the default IP6 and not the ancient IP4 :-) <br>  -T - use threads.  -d - start by the daemon. <br>  Now we do svnserve start and you can see whether it worked or not :-) <br>  If svnserve is already running, launching an Apache can throw out the warnings, but everything works anyway :-) </li><li>  Configuring the script to autostart in ISPManager: <br>  Add a new service <br><blockquote>  Name: SVN <br>  Mode: Standalone <br>  Process name: svnserve.bin <br>  Start command: /usr/local/etc/rc.d/svnserve start <br>  Stop command: /usr/local/etc/rc.d/svnserve start <br>  System name: svn <br>  Type: Unknown service <br>  Autostart: Yes <br>  Minotoring: No </blockquote></li><li>  We remove all other services from autorun (you will arrive in Apache - ISPManager will become unavailable, you can start it again from the apachectl start or apache2ctl start console).  <s>At the same time, Apache and svnserve do not work.</s> </li><li>  We restart VDS through VDSManager and if you did everything right, you can start working with your own SVN server.  With active work, the load is almost not noticeable, everything is very fast. </li></ul><br><br>  Server load looks like this: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c1d/bd7/b40/c1dbd7b403e2edf89b040abf750c060f.gif" alt="image"></div><br><h1>  Backups </h1><br>  It makes sense either to order the ‚ÄúDaily Backups‚Äù service or to do it yourself in Crown and upload the backup repository to your other hosting or to your computer. <br><br><h1>  Conclusion </h1><br>  I hope my 8 hours spent on breaking the forehead about all the subtle pebbles along the way will help the habra people to gain valuable experience in administering the SVN server :-).  Successful to you backups and commits without conflicts :-) <br><br>  Ps.  Any comments, mistakes?  - I will be glad to hear :-) </div><p>Source: <a href="https://habr.com/ru/post/51875/">https://habr.com/ru/post/51875/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../51868/index.html">Cute little bear with a surprise</a></li>
<li><a href="../51871/index.html">Bespin is a web-based editor from Mozilla.</a></li>
<li><a href="../51872/index.html">Clones</a></li>
<li><a href="../51873/index.html">8 success factors</a></li>
<li><a href="../51874/index.html">Amazon.com Delivery</a></li>
<li><a href="../51876/index.html">AJAX + XML + XSLT or a new lookup on AJAX</a></li>
<li><a href="../51877/index.html">Javafx mobile</a></li>
<li><a href="../51878/index.html">Optimization of vector graphics for LaTeX'a.</a></li>
<li><a href="../51879/index.html">Times New Roman - ban</a></li>
<li><a href="../51881/index.html">A little more about text optimization. How to prepare military documents.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
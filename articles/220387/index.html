<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Self-Documented JAX-WS with XSD Restrictions Support</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I will talk about creating a self-documenting web service (jax-ws) that uses elements of XSD Restrictions. 

 Task Description 
 In th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Self-Documented JAX-WS with XSD Restrictions Support</h1><div class="post__text post__text-html js-mediator-article">  In this article I will talk about creating a self-documenting web service (jax-ws) that uses elements of XSD Restrictions. <br><a name="habracut"></a><br><h4>  Task Description </h4><br>  In the book The Programmer Pragmatist there is a chapter on documentation.  It says that there should be one source of information, and on the basis of it, derived forms of this information should be generated.  for example, all information about the structure of tables is stored in one format (it can be a file of any suitable or own format), and on the basis of it, the tables themselves, documentation on these tables, DAO objects for working with tables are generated.  The advantages of this approach are that there will be no desynchronization between the derived forms of information, because the only place where the information will be edited is the original source. <br>  The downsides are that all interested people should be able to edit this file and there should be converters into the necessary formats. <br>  In web services, these concepts are called contract first and contract last.  Contract first - when wsdl is first created, and Java code is generated from it.  Contract last - on the contrary, first Java code, and wsdl on it. <br>  You can read about the pros and cons of the links: <a href="http://docs.spring.io/spring-ws/sites/1.5/reference/html/why-contract-first.html">docs.spring.io/spring-ws/sites/1.5/reference/html/why-contract-first.html</a> <a href="http://stackoverflow.com/questions/763827/which-is-the-better-approach-to-web-services-contract-first-or-contract-last">stackoverflow.com/questions/763827/which-is-the-better- approach-to-web-services-contract-first-or-contract-last</a> <br><br>  In this article I will discuss the creation of the SOAP Web Service with self-documentation, in order to get a similar solution - all the information about web services will be contained in it.  It turns out a sort of ‚Äúcontract last‚Äù - first, the code is written, and then it produces documentation in the form of wsdl, which contains as much information as possible about this web service - comments to all methods and types with which the service works and most of the data validation logic.  What can this solution be useful for?  In that case when all development is concentrated on writing of the code and wsdl is generated on the basis of it, and not vice versa.  Or when it is difficult to keep the documentation originally in wsdl.  But if web methods are written by analytics, then it is better to store this analytics in wsdl.  Those.  At first wsdl, and on it methods, classes and readable documentation are generated.  Otherwise, there will be problems verifying the compliance of an already written service with those.  assignment. <br>  It is also better to check the validity of the input data on the xsd side, so that you can verify the request without connecting to the web service and that this logic would be visible (in xsd) and not protected somewhere in the service. <br><br><h4>  Solution options </h4><br>  Currently, you can get wsdl from any jax-ws application.  But standard jax-ws / jaxb annotations do not support documentation for web services ‚Äî to do this, you need to take advantage of the capabilities provided by third-party frameworks.  Specifically, apache CXF (jax-ws) provides the WSDLDocumentation annotation, which is applied to web methods and which specifies the description of the web method, which will later be included in wsdl.  To document the xml entities that will be used in web methods, use the jaxb-facets library ( <a href="http://dsg.tuwien.ac.at/staff/hummer/tools/jaxb-facets.html">dsg.tuwien.ac.at/staff/hummer/tools/jaxb-facets.html</a> , <a href="https://github.com/whummer/jaxb-facets">github.com/whummer/jaxb-facets</a> ).  It allows, as well as CXF for web methods, to document classes and xml bean fields.  Besides, it adds support for XSD Restrictions - additional restrictions on the values ‚Äã‚Äãof xml fields.  (A description of XSD Restrictions can be found here <a href="http://www.w3schools.com/schema/schema_facets.asp">www.w3schools.com/schema/schema_facets.asp</a> ) This will be useful when you need the logic to check the correctness of values ‚Äã‚Äãmore complicated than mandatory / not mandatory - because  jaxb does not fully support the validation capabilities of xsd.  Specifically, it will be possible to specify restrictions on the minimum, maximum values, use regular expressions, use different ways of processing strings for empty values, set limits on the length of the value. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Implementation </h4><br>  As an example, create a simple web service with several methods. <br>  In the article I will describe specific examples with pieces of code.  The whole service can be downloaded from the link <a href="">dl.dropboxusercontent.com/u/7519092/jax-ws-example.zip</a> This is an IDEA maven project.  In IDEA, you can open either by importing an IDEA project or by importing a maven project.  In pom.xml, the wsdl file is configured to transform it into html using xslt, but unfortunately, this wsdl does not contain the documentation tag from jaxb-facets, although in the generated wsdl (accessible by link &lt;application path&gt; / web_service / WebService? wsdl) this tag is there.  Also in the project, the application of annotations is different - there annotations are applied to get methods, and in these examples to class fields.  This is done to shorten the article.  To apply annotations to class fields, you must either not get method or specify @XmlAccessorType (XmlAccessType.FIELD). <br><br><h4>  Examples </h4><br>  As an example, consider several specific tasks. <br><br><h5>  Restriction on the maximum and minimum value of the date and time. </h5><br>  For date: <br><pre><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@XmlSchemaType</span></span>(name = <span class="hljs-string"><span class="hljs-string">"date"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Facets</span></span>(minInclusive = <span class="hljs-string"><span class="hljs-string">"1900-01-01"</span></span>, maxInclusive = <span class="hljs-string"><span class="hljs-string">"9999-12-31Z"</span></span>) Date date;</code> </pre> <br><br>  Generated xsd scheme: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:element</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">minOccurs</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"date"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:simpleType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:restriction</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">base</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xs:date"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:maxInclusive</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"9999-12-31Z"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:minInclusive</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1900-01-01"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:restriction</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:simpleType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:element</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@XmlSchemaType</span></span>(name = <span class="hljs-string"><span class="hljs-string">"dateTime"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Facets</span></span>(minInclusive = <span class="hljs-string"><span class="hljs-string">"1900-01-01T00:00:00"</span></span>, maxInclusive = <span class="hljs-string"><span class="hljs-string">"9999-12-31T23:59:59"</span></span>) Date dateTime;</code> </pre><br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:element</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">minOccurs</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dateTime"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:simpleType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:restriction</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">base</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xs:dateTime"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:maxInclusive</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"9999-12-31T23:59:59"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:minInclusive</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1900-01-01T00:00:00"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:restriction</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:simpleType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:element</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  (Abstract Facets from jaxb-facets library) <br><br>  We had to use because  The DBMS did not support the entire range of dates available in Java.  Those.  You can send dates to the web service, for example, 1000-01-01 and in Java it will parse correctly, but there will be an error when writing to the DBMS, since  It does not support such a date range.  And to limit the values ‚Äã‚Äãtaken, this restriction is introduced. <br>  For the date, the maximum date is based on the time zone.  It is necessary that the weekend 9999-12-31 with the time zone be supported (for example, 9999-12-31 + 04: 00).  If you do not do this, then when you serialize this value (when returned to the client) there will be an xsd validation error. <br><br><h5>  Restriction on a specific field length </h5><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Facets</span></span>(length = <span class="hljs-number"><span class="hljs-number">16</span></span>) String id;</code> </pre><br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:element</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">minOccurs</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"id"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:simpleType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:restriction</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">base</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xs:string"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:length</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"16"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:restriction</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:simpleType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:element</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  It is necessary, for example, when a field is a unique identifier of a certain length or some other identifier of a specific length - the number of a passport or card. <br><br>  Although in the case of id, you can select a separate type of Id: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Id</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Facets</span></span>(length = <span class="hljs-number"><span class="hljs-number">16</span></span>) <span class="hljs-meta"><span class="hljs-meta">@XmlAttribute</span></span> String attr; }</code> </pre><br><br>  And use it like this: <br><pre> <code class="java hljs">Id id;</code> </pre><br><br>  So we will clearly state that this is a variable - a unique identifier, while all restrictions will work. <br><br><h5>  Zeroing fields </h5><br>  Some optional fields need to be reset.  For strings, this is done very simply - an empty tag is sent (eg &lt;name /&gt;) and with unmarshalling (converting the xml of the query to java objects) we get just an empty string (String.isEmpty () == true).  And it can be quite interpreted as a string to be set to null. <br><br>  But if you need to reset the numbers or dates, then when you pass an empty tag there will be an error: <br>  Unmarshalling Error: cvc-datatype-valid.1.2.1: '' is not a valid value for 'integer' <br><br>  This is understandable - the empty tag can not be represented as a number (null is not considered - null is the absence of a tag). <br><br>  This can be solved using the default values ‚Äã‚Äãfor the field. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@XmlElement</span></span>(defaultValue = <span class="hljs-string"><span class="hljs-string">"-2147483648"</span></span>) Integer id;</code> </pre><br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:element</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">default</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"-2147483648"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">minOccurs</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"id"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xs:int"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br><br>  Moreover, if you pass an empty tag (&lt;id /&gt;) to Java, the id variable will take the value -2147483648 (this is Integer.MIN_VALUE).  This solution is a bit like the Null Object Pattern - when you need to specify that a null value is explicitly passed (and not just did not specify a value), then we pass a special null object. <br>  <a href="http://en.wikipedia.org/wiki/Null_Object_pattern">en.wikipedia.org/wiki/Null_Object_pattern</a> <br><br>  For dates, the same approach would look like this: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@XmlSchemaType</span></span>(name = <span class="hljs-string"><span class="hljs-string">"date"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@XmlElement</span></span>(defaultValue = <span class="hljs-string"><span class="hljs-string">"1900-01-01"</span></span>) Date date;</code> </pre><br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:element</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">default</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1900-01-01"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">minOccurs</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"date"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xs:date"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@XmlSchemaType</span></span>(name = <span class="hljs-string"><span class="hljs-string">"dateTime"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@XmlElement</span></span>(defaultValue = <span class="hljs-string"><span class="hljs-string">"1900-01-01T00:00:00"</span></span>) Date dateTime;</code> </pre><br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:element</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">default</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1900-01-01T00:00:00"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">minOccurs</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dateTime"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xs:dateTime"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br><br><h5>  Documenting </h5><br>  Documentation of fields is done using Documentation annotation (from the jaxb-facets library). <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@XmlSchemaType</span></span>(name = <span class="hljs-string"><span class="hljs-string">"date"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Documentation</span></span>(<span class="hljs-string"><span class="hljs-string">"  "</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Facets</span></span>(minInclusive = <span class="hljs-string"><span class="hljs-string">"1900-01-01"</span></span>, maxInclusive = <span class="hljs-string"><span class="hljs-string">"9999-12-31Z"</span></span>) Date date;</code> </pre><br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:element</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">minOccurs</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"date"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:annotation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:documentation</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:documentation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:annotation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:simpleType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:restriction</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">base</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xs:date"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:maxInclusive</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"9999-12-31Z"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:minInclusive</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1900-01-01"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:restriction</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:simpleType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:element</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Documenting web service methods is done using the WSDLDocumentation annotation from CXF. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@WSDLDocumentation</span></span>(<span class="hljs-string"><span class="hljs-string">"   .     XML Schema Restrictions"</span></span>) <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">facetsExampleMethod</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(FacetsExample request)</span></span></span></span>;</code> </pre><br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wsdl:operation</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"facetsExampleMethod"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wsdl:documentation</span></span></span><span class="hljs-tag">&gt;</span></span>    .     XML Schema Restrictions <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wsdl:documentation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wsdl:input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">message</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tns:facetsExampleMethod"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"facetsExampleMethod"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wsdl:output</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">message</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tns:facetsExampleMethodResponse"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"facetsExampleMethodResponse"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wsdl:operation</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Further description of these fields and methods can be found in wsdl. <br><br><h5>  Generating service documentation (wsdl to html) </h5><br>  To convert the generated wsdl into a readable form, use the xslt <a href="http://tomi.vanek.sk/index.php%3Fpage%3Dwsdl-viewer">tomi.vanek.sk/index.php?page=wsdl-viewer</a> file. SoapUI can also generate readable html.  All this is described on StackOverflow: <br>  <a href="http://stackoverflow.com/questions/686103/generating-html-documentation-from-wsdl">stackoverflow.com/questions/686103/generating-html-documentation-from-wsdl</a> Converting to html at the build stage is implemented in pom.xml Next this page will be available at &lt;application path&gt; /WebService.html <br>  A few comments on the html generation: <br>  Parameters of web methods are correctly displayed only if @SOAPBinding (style = SOAPBinding.Style.RPC) is specified. <br>  Abstract Documentation gets into wsdl and, accordingly, into the documentation in html only when runtime generating wsdl from a running service.  When building wsdl does not contain documentation.  Why so - I do not know.  Most likely the wsdl generator error. <br><br><h5>  Other jaxb-facets features </h5><br>  Briefly tell about the remaining features of jaxb-facets that I used: <br>  Checking the value with a regular expression - Facets.pattern. <br>  Setting the logic for processing whitespace characters - Facets.whiteSpace.  Whitespace characters can be taken into account, removed, replaced with spaces (for tabs and line breaks).  It works only when checking in xsd, i.e.  Java code will get the value as is, with whitespace.  It will be useful to check the mandatory filling of a string field, when the field is filled with spaces, should also be interpreted as empty. <br><br>  In general, jaxb-facets supports all xsd restrinction.  You can read them at the end of the page <a href="http://www.w3schools.com/schema/schema_facets.asp">www.w3schools.com/schema/schema_facets.asp</a> Also in the latest version (2.2.6) there is support for xs: assert.  Example xs: assert from the IBM website ( <a href="http://www.ibm.com/developerworks/ru/library/x-xml11pt2/">www.ibm.com/developerworks/ru/library/x-xml11pt2</a> ): <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:element</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dimension"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:complexType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:attribute</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"height"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xs:int"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:attribute</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xs:int"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:assert</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">test</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@height &lt; @width"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:complexType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xs:element</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><h4>  Remarks </h4><br>  I repeat, in general, if a service is written ‚Äúfrom scratch‚Äù, it is better to make a correct wsdl, and then generate Java code and documentation from it.  But if there is already a written web service, then adding XSD Restrictions into it will make it more transparent by the client - he will see the logic of checking the input values ‚Äã‚Äã(although, of course, not all - in some cases it is impossible to verify the correctness of requests without accessing the DBMS or related resources).  Plus, the generation of documentation will allow you to conveniently compare the compliance of real web methods with their parameters, those.  assignment.  Without this, one would have to check either the ‚Äúspear‚Äù method - depending on the requests and responses of the web methods, or to understand the intricacies of the generated wsdl. </div><p>Source: <a href="https://habr.com/ru/post/220387/">https://habr.com/ru/post/220387/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../220371/index.html">History of torrent rendering for 3ds max</a></li>
<li><a href="../220373/index.html">Personal Finance - Save and Grow</a></li>
<li><a href="../220377/index.html">A new online course on sales in the studio / agency and a little humor about the life of the agency in verse</a></li>
<li><a href="../220379/index.html">Zabbix + Pushbullet: a simple way to push alerts</a></li>
<li><a href="../220381/index.html">Handling touch input in Windows 8 applications</a></li>
<li><a href="../220389/index.html">Deploy the application to Heroku using Gradle</a></li>
<li><a href="../220391/index.html">New monitors Samsung SD390 and SD590 already in Russia</a></li>
<li><a href="../220393/index.html">Accelerate PHP (with ReactPHP)</a></li>
<li><a href="../220395/index.html">Calvin Klein was unable to select an abusive domain</a></li>
<li><a href="../220397/index.html">Overview of Startup Founder Conferences</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
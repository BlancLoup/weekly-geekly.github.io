<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What's new in Windows Server 2012 R2?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this post I would like to give a brief overview of the most interesting new features of Windows Server 2012 R2 , based, of course, on the prelimina...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What's new in Windows Server 2012 R2?</h1><div class="post__text post__text-html js-mediator-article">  In this post I would like to give a brief overview of the most interesting new features of <a href="http://technet.microsoft.com/ru-RU/evalcenter/dn205286">Windows Server 2012 R2</a> , based, of course, on the preliminary version now available.  For each opportunity I will try to spend literally a few sentences in order to clarify its meaning, leaving the implementation details for subsequent publications.  Thus, the main goal is to give you a general idea of ‚Äã‚Äãwhat the new server will bring, and then you will decide which of these is most applicable to your specific tasks.  In general, there will be a lot of text, there will be no pictures at all. <a name="habracut"></a><br><br>  Despite the fact that R2 is a minor OS update, there are a lot of new features.  In order to somehow organize the presentation, I distributed these capabilities into three groups: changes in Hyper-V, in the network stack and in the storage management subsystem.  By analogy with the way it was done at one time in the Windows Server 2012 <a href="http://www.microsoftvirtualacademy.com/training-courses/windows-server-2012-part1-rus">review course</a> . Although this classification is very conditional, since many possibilities can be equally attributed to several categories at once.  Let's start with Hyper-V. <br><br><br><h1>  What's new in Hyper-V? </h1><br><h4>  The second generation of virtual machines (Generation 2) </h4><br>  In addition to the usual virtual machines (first generation), you can create virtual machines of the new (second) generation.  Many old emulated devices have been removed from these VMs, while maintaining: <br><ul><li>  UEFI secure boot; </li><li>  boot from SCSI virtual hard disks and virtual SCSI-DVDs; </li><li>  network boot using synthetic network adapters. </li></ul><br>  The performance of the VM of the second generation is higher, especially the difference is noticeable when loading and installing the OS in the VM.  Windows Server 2012, Windows Server 2012 R2 and 64-bit versions of Windows 8 and Windows 8.1 are supported as guest operating systems for second-generation VMs. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Remote connection via VMBus (Remote Desktop over VMBus) </h4><br>  If the guest operating systems are Windows Server 2012 R2 or Windows 8.1, and Remote Desktop Services (RDS) is running on these operating systems, then you can connect to the RDS services of the guest operating systems not only via the network, but also directly via the VMBus bus.  Such a connection occurs when you simply open the VM in the Hyper-V console.  In this case, you get all the benefits of RDP-session, such as: the choice of display resolution, audio support, support for the clipboard (clipboard), redirection of printers, smart cards and USB-devices.  I emphasize that the VM may not be connected to the network at all. <br><br><h4>  Automatic activation </h4><br>  If the virtualization host is Windows Server 2012 R2 Datacenter, and the guest OS is any edition of Windows Server 2012 R2, then that guest OS is activated automatically, provided that the host OS is already activated.  Moreover, the activation of the guest OS does not require a connection to the network (neither to the Internet, nor to KMS, nor anywhere else). <br><br><h4>  Live Migration </h4><br><ul><li>  First, the possible migration of VMs from Windows Server 2012 to Windows Server 2012 R2.  It is about all possible types of live migration, including shared nothing.  This migration option simplifies the transfer of the infrastructure to Windows Server 2012 R2, since it allows not to stop running VMs.  But we must remember that the migration to the previous version, that is, from Windows Server 2012 R2 to Windows Server 2012, is not supported. </li><li>  Secondly, dynamic migration between Windows Server 2012 R2 servers is performed by default with compression (can be disabled) of data, which reduces network load and migration time. </li><li>  Thirdly, if network adapters with RDMA support are installed at the source and receiver, then dynamic migration can be performed using the capabilities of these adapters, that is, using SMB Direct technology, which, in turn, more than compression speeds up the migration process. </li></ul><br><h4>  Resizing VHDX disks online (VHDX resizing) </h4><br>  In Windows Server 2012 R2, you can increase and decrease the size of virtual hard disks without stopping the VM.  Online resizing is supported only for VHDX disks, including the OS disk, and only those connected to the SCSI controller.  The feature is available in both the Hyper-V console and PowerShell. <br><br><h4>  Export / clone VM online (Live VM export / clone) </h4><br>  In Windows Server 2012 R2, you can, without turning off the VM, perform its full export, that is, actually create a clone, or export the required snapshot of the running VM. <br><br><h4>  Quality of Service for Storage (QoS) </h4><br>  For each virtual hard disk VM on the fly, you can set the maximum and minimum values ‚Äã‚Äãof I / O operations per second (IOPS).  Hyper-V will limit disk throughput at the top and generate alerts if disk activity is below a specified minimum threshold.  In addition, the resource metering function has been updated to collect statistics on a given VM or VM group.  IOPS indicators are now included in the measurement results. <br><br><h4>  Shared VHDX File (Shared VHDX) </h4><br>  Two or more virtual machines can share one VHDX shared virtual hard disk.  This feature allows you to build guest clusters, that is, clusters whose nodes are VMs.  The shared VHDX inside the VM is represented as a Shared SAS disk.  In principle, it was possible to create guest clusters before.  But for this, we had to explicitly connect the VM to the SAN using, for example, iSCSI or Fiber Channel.  However, this option is not quite optimal for hosters, who ideally would like to completely abstract their storage systems from the VM level, that is, hide the features of the storage implementation from the VM.  Now such a script is easy to implement.  There is no need to allocate a separate LUN or <a href="http://habrahabr.ru/company/microsoft/blog/161683/">CSV volume</a> for the next guest cluster.  The guest cluster is built on the basis of a common VHDX file, which can be placed on a CSV volume of a physical failover cluster, or in a shared folder (on the ball) of the Scale-Out File Server.  It should be borne in mind that the nodes of a failover cluster or Scale-Out File Server must be running Windows Server 2012 R2.  Both the Windows Server 2012 R2 and Windows Server 2012 can act as the OS of the virtual machines that make up the guest cluster. In the latter case, you need to update the integration components of the VM. <br><br><h4>  Hyper-V Replica </h4><br>  Two useful innovations in the mechanism of VM replication. <br><ol><li>  The replica VM can, in turn, be replicated.  For example, you do not have a second data center to which you could replicate business-critical VMs.  Therefore, you decide to replicate the VM in the data center provider.  The provider also has additional sites, and to increase the resiliency of your VM, the replica of this VM replicates to its second site. </li><li>  Now, in addition to the five-minute replication interval supported in Windows Server 2012, you can set the interval to 30 seconds, or 15 minutes. </li></ol><br>  In addition, it must be recalled that you can configure replication for an arbitrary number of VMs and in different data centers-ah.  In Windows Azure, a special service has appeared that allows you to centrally manage (orchestrate) replicas of your VMs. <br><br><br><h1>  What's new in networking opportunities? </h1><br><h4>  Virtual RSS (vRSS) </h4><br>  RSS, provided it is supported by a host network adapter, allows incoming host network traffic to be processed by several cores of available physical processors.  However, the traffic inside the VM is still processed by a single virtual processor.  In Windows Server 2012 R2, thanks to vRSS, it became possible to distribute the processing of network traffic across different virtual VM processors.  This is especially important in scenarios when a host has a little or even one VM, but it is very intensively processing network flows.  This situation is typical, for example, for various gateways, specialized devices based on Windows Server.  To enable vrss, a host must have a VMQ-enabled network adapter on the host. <br><br><h4>  Dynamic traffic balancing mode in NIC Teaming (NIC Teaming Dynamic Mode) </h4><br>  <a href="http://habrahabr.ru/company/microsoft/blog/162509/">NIC Teaming</a> technology built into Windows Server 2012 allows you to aggregate several network adapters into a group, providing fault tolerance and balancing network traffic.  Balancing is possible in two modes: Hyper-V Port, when a virtual VM that is actually running on a host is assigned to a network adapter of a timing group;  Address Hash, when essentially the traffic to a specific TCP or UDP port (or IP address) is sent through a specific group adapter.  In Windows Server 2012 R2, another balancing mode has appeared - dynamic.  In this case, the outgoing traffic is broken into so-called flowlets and distributed across all the adapters of the group.  This mode allows you to achieve a more uniform distribution of traffic across existing network adapters.  For example, suppose that four network adapters are combined in the host in the timing, and three VMs are running.  In the case of the Hyper-V Port balancing mode, outgoing traffic from the VM will be transmitted using only three adapters of the group (each VM will be ‚Äútied‚Äù to one network card), in the case of a dynamic mode, using all four. <br><br><h4>  Extended Access Control Lists (Extended ACLs) </h4><br>  In Windows Server 2012, you can set <a href="http://habrahabr.ru/company/microsoft/blog/159391/">ACLs</a> for each Hyper-V Extensible Switch port, thereby allowing or denying traffic to a specific MAC address or IP address, to one or both sides.  In Windows Server 2012 R2, in the ACL settings, you can now optionally specify the protocol, port, and also set the stateful attribute for, for example, advanced traffic analysis. <br><br><h4>  Remote monitoring of network traffic (Remote Live Monitoring) </h4><br>  Thanks to new features in WMI and ETW, it is possible to remotely monitor network traffic online, or to collect information for subsequent offline analysis.  To do this, you install the Microsoft Message Analyzer (the next version of Network Monitor, is currently in beta) on your workstation and indicate the traffic of which host or even a specific VM on this host you are interested in.  It is clear that Windows Server 2012 R2 is assumed on the host; the mentioned WMI and ETW extensions are available only in this OS. <br><br><h4>  Changes in Network Virtualization </h4><br>  I will mention the four most important changes in <a href="http://habrahabr.ru/company/microsoft/blog/173159/">network virtualization</a> technology (Network Virtualization, NV). <br><ol><li>  Integration with NIC Teaming.  Now on the hosts where network virtualization is used, it is possible to use the timing of network adapters together with NV for both failover and for balancing traffic. </li><li>  NVGRE Task Offload.  Network adapters with support for NVGRE are starting to appear on the market, allowing to transfer some of the tasks related to processing NV traffic to the hardware level of the adapter.  Naturally, this is primarily intended to improve the performance of network operations. </li><li>  In Windows Server 2012, Hyper-V Extensible Switch ‚Äúsees‚Äù only CA addresses when using NV.  On the contrary, in Windows Server 2012 R2, the switch also works at the level of PA addresses, which allows you to configure forwarding, filtering, and packet inspection rules with respect to NV. </li><li>  Built-in software gateways.  Now, Windows Server 2012 R2 can act as a ready gateway for NV, providing communication between VMs using network virtualization and the outside world.  At the same time, both the traffic routing option and Site-to-Site tunneling are supported. </li></ol><br><h4>  Switch Management (Standards Based Switch Management) </h4><br>  Switches that support Open Management Infrastructure (OMI) can be managed through PowerShell.  In Windows Server 2012 R2, a set of cmdlets has been added that allow you to set the necessary settings for switches: configure VLANs, specific ports, etc. <br><br><h4>  IP Address Management (IPAM) </h4><br>  The module for interacting with System Center Virtual Machine Manager now allows you to configure two-way communication between VMM and the IPAM service and accumulate both physical and virtual address space into IPAM. <br><br><br><h1>  What's new in storage management? </h1><br><h4>  VHDX support in iSCSI Target </h4><br>  The iSCSI Target Server, which, I recall, is a built-in component of the server operating system, now supports the VHDX format with all the ensuing consequences: support for files up to 64 TB, increasing / decreasing VHDX sizes online, etc. VHDX is now the default format for iSCSI Target implemented full SMI-S support for managing iSCSI Target using VMM.  Dodging the topic a bit, I note here that from the System Center 2012 R2 Virtual Machine Manager console you can not only configure iSCSI storage with SMI-S support, but also create and configure the Scale-Out File Server, both from hosts with Windows already installed Server 2012 R2, and bare metal. <br><br><h4>  File cluster enhancements </h4> <br>  A file cluster in Windows Server 2012 can be configured in active-active mode, when all cluster nodes can handle SMB client connections to shared folders (clustered balls).  This is the <a href="http://habrahabr.ru/company/microsoft/blog/161683/">Scale-Out File Server</a> .  This mode implies the presence of CSV-volumes (Cluster Shared Volume), since read / write requests to the same file stored on shared cluster storage can come from different (active) cluster nodes.  CSV just realizes this opportunity.  But for each CSV-volume, the owner (owner) is still assigned, who is responsible for operations on metadata (creating, renaming, deleting files, etc.).  Imagine that another SMB client connects to the cluster and tries to create a file.  An SMB connection from a client handles a specific cluster node, say, Node3.  But the owner of the volume where the file should be created is the Node2 node.  In this case, a redirect (SMB Redirect) of the request over the network from Node3 to Node2 occurs, and the last one, as the owner of the volume, performs the file creation operation.  So in Windows Server 2012, all connections of a specific SMB client were processed by the same cluster node, in the example shown, by the Node3 node, which could generate a large number of redirections.  In Windows Server 2012 R2, connections are tracked not per server, but per share.  If the same SMB client connects to a different cluster ball, then the other node of the cluster can handle this connection.  This approach provides a more optimal load balancing between cluster nodes.  Moreover, the ownership of various CSV-volumes belonging to the cluster is now automatically distributed among the cluster nodes, and this distribution changes when the cluster configuration changes (adding a node, failing a node, etc.). <br><br><h4>  Bandwidth Management for SMB Traffic (SMB Bandwidth Management) </h4><br>  In Windows Server 2012 R2, you can set a limit, expressed in bytes per second, for a specific type of SMB traffic.  There are three such predefined types so far: VirtualMachine (traffic between the virtual machine and the VHDX file located on the SMB file server), LiveMigration (dynamic migration traffic if using SMB), Default (all other traffic).  Limits are set using the Set-SMBBandwidthLimit cmdlet. <br><br><h4>  Deduplication enhancements </h4><br>  The deduplication first introduced in Windows Server 2012 is now supported, including for open VHD / VHDX files, for CSV volumes connected to the Scale-Out File Server. <br><br><h4>  Multi-tier storage support in Storage Spaces (Storage Spaces - Storage Tiering) </h4><br>  When creating Storage Spaces pools in Windows Server 2012 R2, you can combine SSDs and HDDs into separate layers.  To improve performance, the OS automatically places the most requested data on the SSD level, plus the administrator can explicitly specify which files should be located at this level. <br><br>  This is not all.  As already said, I selected the most interesting opportunities from my subjective point of view.  In the future, some of them, as well as those that are not included in the review, we will talk in more detail.  If you have any suggestions, what to tell first of all, write. </div><p>Source: <a href="https://habr.com/ru/post/186922/">https://habr.com/ru/post/186922/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../186892/index.html">Reports from past hacker tournaments C ^ 2</a></li>
<li><a href="../186900/index.html">Office PBX - The Devil in the details</a></li>
<li><a href="../186902/index.html">Illegal video content detected on seized Ukrainian Vkontakte servers</a></li>
<li><a href="../186912/index.html">Communigate - mobile office for VPS hosting</a></li>
<li><a href="../186920/index.html">Competition of mobile applications for the city of Moscow App Contest'13</a></li>
<li><a href="../186924/index.html">Pope Francis will hand out indulgences via Twitter</a></li>
<li><a href="../186926/index.html">Nokia Lumia 1020. Shock! A photo!</a></li>
<li><a href="../186930/index.html">Part 2. How to connect a smartphone to the car - begin to practice</a></li>
<li><a href="../186932/index.html">Using BLF on Escene Phones</a></li>
<li><a href="../186934/index.html">BitTorrent Sync goes into beta</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
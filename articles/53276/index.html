<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to install Linux from a network</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Just yesterday, the habrayuser Arceny told us about installing a debian with USB-flash . In the article, he mentioned the possibility of installing "W...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to install Linux from a network</h1><div class="post__text post__text-html js-mediator-article">  Just yesterday, the habrayuser <a href="https://habrahabr.ru/users/arceny/" class="user_link">Arceny</a> told us about <a href="http://habrahabr.ru/blogs/linux/53219/">installing a debian with USB-flash</a> .  In the article, he mentioned the possibility of installing "With the help of network boot ( <abbr title="Preboot Execution Environment">PXE</abbr> boot)", so I finally decided to write material on the creation of the pxe boot server. <br><a name="habracut"></a><br>  The narration will be conducted on the example of the same OS - Debian (so your paths and commands may differ). <br>  For a start, we will <abbr title="Trivial File Transfer Protocol">install a tftp</abbr> server.  See available options ( <i>apt-cache search tftp | fgrep server</i> ): <br><ul><li>  atftpd </li><li>  dnsmasq </li><li>  tftpd </li><li>  tftpd-hpa </li></ul>  At first I put tftpd-hpa, because  I was told about it in the <a href="http://www.debian-administration.org/articles/478">manual</a> with which I started creating the server.  Then I switched to atftpd, because  I needed logging.  Consider both options: <br><ul><li> tftpd-hpa: <br>  Install the package, edit the file <i>/ etc / default / tftpd-hpa</i> , so that the demon knows that he should live: <br><br> <code>#Defaults for tftpd-hpa <br> RUN_DAEMON="yes" <br> OPTIONS="-l -s /var/lib/tftpboot"</code> <br> <br>  Create the necessary directory: <i>mkdir / var / lib / tftpboot</i> , and start the service <i>invoke-rc.d tftpd-hpa start</i> <br><br></li><li>  atftpd: <br>  After installation we find out that by default this service works through inetd.  For some reason, I am not a fan of this method, so first of all I commented out the corresponding line in <i>/etc/inetd.conf</i> .  Then edit <i>/ etc / default / atftpd</i> : 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>USE_INETD=false <br> OPTIONS="--daemon --tftpd-timeout 1500 --no-multicast --retry-timeout 20 --logfile /var/log/atftpd.log --maxthread 100 --verbose=5 /var/lib/tftpboot"</code> <br> <br>  <i>- tftpd-timeout</i> - the lifetime of the stream, in the absence of requests <br>  <i>--retry-timeout</i> - file upload timeout <br>  I have big timeouts, because  the service is broadcast to the city local network, which periodically bends from the abundance of subscribers, and does not cope with the flow of requests. <br>  Well, as in the previous paragraph, we create the necessary directory: <i>mkdir / var / lib / tftpboot</i> , and start the service <i>invoke-rc.d atftpd start</i> <br></li></ul>  Now we have a tftp server.  One step we did :) <br>  Next - configure dhcp: <br><ul><li>  dhcp3: <br>  Add the <i>boot</i> information to the <i>/etc/dhcp3/dhcpd.conf</i> configuration file: <br><br> <code>filename "pxelinux.0"; <br> next-server &lt;tftp-server-ip&gt;;</code> <br> <br>  If tftpd is installed on the same server as dhcpd, the next-server directive can be omitted.  And restart dhcp3-server: <i>invoke-rc.d dhcp3-server restart</i> <br><br></li><li>  dnsmasq: <br>  In the config <i>/etc/dnsmasq.conf we</i> add: <br><br> <code>dhcp-boot=pxelinux.0,&lt;tftp-server-hostname&gt;,&lt;tftp-server-ip&gt;</code> <br> <br>  Again, if the tftp and dhcp servers match, the last 2 attributes can be left blank.  Restart: <i>invoke-rc.d dnsmasq restart</i> <br></li></ul>  Step two is completed.  Further - directly setup pxe-boot. <br>  Go to <a href="">ftp.debian.org</a> , select the <i>installer- *</i> directory corresponding to the required architecture.  Then go to the directory <i>current / images / netboot</i> inside we find the files <i>netboot.tar.gz</i> and <i>gtk / netboot.tar.gz</i> - these are text and graphic installation files, respectively.  Choose the one you like, download it and unpack it in <i>/ var / lib / tftpboot</i> . <br>  It remains to make sure that access to the 69 UDP port is forbidden, and you can use the charms of a network installation. <br><br>  As a bonus, I am attaching a menu that came out of me as a result of several days of bullying: <br>  In the current configuration, it is possible to install multiple OSes (Debian installation is possible both in text and in graphical mode), boot xUbuntu (via nfs), SystemRescueCD (via http-boot), memtest86 (via tftp).  Installation of all operating systems is possible for 2 architectures - x86 and x64.  Because  I have an intranet mirror of the repositories Ubuntu 8.10 and Debian 5.0, then the installers do not offer a choice of repository, but automatically merge everything from it. <br>  Screenshots: <br>  <a href="http://www.picamatic.com/view/2531731_test-2009-03-02-14-02-45/">the start screen</a> , <a href="http://www.picamatic.com/view/2531732_test-2009-03-02-14-02-52/">after clicking the button</a> , the <a href="http://www.picamatic.com/view/2531735_test-2009-03-02-14-03-04/">distribution selection menu</a> , the <a href="http://www.picamatic.com/view/2531733_test-2009-03-02-14-03-14/">second part of the distribution selection menu</a> , <a href="http://www.picamatic.com/view/2531736_test-2009-03-02-14-03-20/">the installation of Ubuntu</a> , <a href="http://www.picamatic.com/view/2531737_test-2009-03-02-14-03-25/">Debian</a> , <a href="http://www.picamatic.com/view/2531745_test-2009-03-02-14-05-23/">Fedora</a> , <a href="http://www.picamatic.com/view/2531746_test-2009-03-02-14-05-28/">SuSE is</a> <a href="http://www.picamatic.com/view/2531736_test-2009-03-02-14-03-20/">selected</a> . <br>  <a href="https://docs.google.com/file/d/0BxaH7RICY3lbbndQZDFSZkY4dFk/edit%3Fusp%3Dsharing">The</a> <i>/ var / lib / tftpboot</i> <a href="https://docs.google.com/file/d/0BxaH7RICY3lbbndQZDFSZkY4dFk/edit%3Fusp%3Dsharing">archive</a> (almost 200 MB), as well as the <a href="http://narod.ru/disk/6231489000/preseed.tbz.html">configuration files</a> for the Ubuntu and Debian installers: they contain repositories + Ubuntu is split into Ubuntu, kUbuntu, xUbuntu, edUbuntu. <br>  In this configuration, there is one big drawback, which I am too lazy to fix: when you open the menu, about 70 files are loaded, most of which are not needed by the user.  To get rid of this - the display of the submenu needs to be transferred from the connection of the menu by inclusions to their call through the kernel <i>vesamenu.c32</i> , which comes with pxeboot.  Also, it doesn‚Äôt hurt to clear duplicates of menu directories - most configs for the x64 and x86 menus are the same. <br></div><p>Source: <a href="https://habr.com/ru/post/53276/">https://habr.com/ru/post/53276/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../53267/index.html">Kind with healthy. PR, as part of a parody.</a></li>
<li><a href="../5327/index.html">Additional RSS feeds</a></li>
<li><a href="../53270/index.html">How to use the online stopwatch to increase performance</a></li>
<li><a href="../53274/index.html">LUPE - futuristic camera</a></li>
<li><a href="../53275/index.html">timeAgoInWords in Russian</a></li>
<li><a href="../53277/index.html">Severe bathroom stopper</a></li>
<li><a href="../53279/index.html">LDAP for internet project. Part 4</a></li>
<li><a href="../5328/index.html">10 karmic commandments that live cool</a></li>
<li><a href="../53283/index.html">Touch reader BeBook</a></li>
<li><a href="../53285/index.html">Opium for the people</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>DigitalOcean launches metadata server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The news is too simple to make complex liner - now DigitalOcean has Metadata, its own metadata server . What for? For anything, but first of all for m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>DigitalOcean launches metadata server</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/374/48a/6e2/37448a6e202f50b4650ef3cae4bf2657.jpg" alt="Metadata" align="right">  The news is too simple to make complex liner - <b>now DigitalOcean <a href="https://www.digitalocean.com/community/tutorials/an-introduction-to-droplet-metadata">has</a> Metadata, its own metadata server</b> .  What for?  For anything, but first of all for managing droplets (virtual servers, in DO terminology). <br><br>  Metadata is a service provided for DigitalOcean droplets, allowing each server to get information about itself (the so-called metadata).  As an example of such data, you can cite data about users, droplet ID, data center region, and IP address data.  In addition to simply receiving droplet metadata, Metadata allows users to transfer certain data to droplets when they are created, which can be used by CloudInit to facilitate the configuration of cloud servers. <br><br><a name="habracut"></a><br>  Metadata is currently available for new droplets in the following regions: SGP1, SFO1, LON1, AMS2, AMS3, and NYC3.  If the droplet is in one of these regions, and the metadata is not available, it is recommended to turn off and turn on the droplet. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Full documentation on Metadata is available on the <a href="https://developers.digitalocean.com/metadata/">DigitalOcean Developer Portal</a> . <br><br>  When creating a droplet, metadata is set in the droplet control panel, in the ‚ÄúAvailable Settings‚Äù section, in the ‚Äúuser data‚Äù field: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/99c/41c/446/99c41c446c556f9f16b86c70e3c027bf.png" alt="image"><br><br>  If you create droplets using the DigitalOcean API, you can pass the metadata as a user_data parameter in a POST request to create a server: <br><br><pre><code class="bash hljs">curl -X POST <span class="hljs-string"><span class="hljs-string">"https://api.digitalocean.com/v2/droplets"</span></span> \ -d<span class="hljs-string"><span class="hljs-string">'{"name":"metadata.example.com","region":"nyc3","size":"512mb","private_networking":true,"image":"ubuntu-14-04-x64","user_data": "'</span></span><span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(cat ~/user-data.yaml)</span></span></span><span class="hljs-string">"</span></span><span class="hljs-string"><span class="hljs-string">'", "ssh_keys":[ &lt;SSH KEY IDs&gt; ]}'</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Authorization: Bearer </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$TOKEN</span></span></span><span class="hljs-string">"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Content-Type: application/json"</span></span></code> </pre> <br><br>  Receiving metadata also looks simple: just make an HTTP GET request for a special URL. <pre>  http://169.254.169.254/metadata/v1/ </pre>  .  The answer will contain the data: <br><br><pre> <code class="bash hljs">id hostname user-data vendor-data public-keys region interfaces/ dns/</code> </pre> <br><br>  Information is stored hierarchically, so more detailed queries such as <code><a href="http://169.254.169.254/metadata/v1/user-data"></a> 169.254.169.254/metadata/v1/user-data</code>  <code><a href="http://169.254.169.254/metadata/v1/user-data"></a> 169.254.169.254/metadata/v1/user-data</code> or <code><a href="http://169.254.169.254/metadata/v1/interfaces/public/0/ipv4/address"></a> 169.254.169.254/metadata/v1/interfaces/public/0/ipv4/address</code>  <code><a href="http://169.254.169.254/metadata/v1/interfaces/public/0/ipv4/address"></a> 169.254.169.254/metadata/v1/interfaces/public/0/ipv4/address</code> , will allow you to get the data specified in the ‚Äúuser data‚Äù field, or, respectively, the public IPv4 address of the droplet. </div><p>Source: <a href="https://habr.com/ru/post/240555/">https://habr.com/ru/post/240555/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../240539/index.html">Duo.js is a new generation of frontend package manager.</a></li>
<li><a href="../240541/index.html">PcDuino3 Nano, a serious competitor to the Raspberry Pi B +, for $ 39</a></li>
<li><a href="../240543/index.html">RESTful API for Android: pattern B</a></li>
<li><a href="../240545/index.html">rawdog - RSS aggregator without excessive requests</a></li>
<li><a href="../240549/index.html">Barcelona tried to seize the domain in the .email zone</a></li>
<li><a href="../240557/index.html">Using the proxy pattern to organize caching in PHP</a></li>
<li><a href="../240559/index.html">Pricing model for SaaS: more money - more problems</a></li>
<li><a href="../240561/index.html">Methods in primitive types of PHP</a></li>
<li><a href="../240565/index.html">Semi-automatic registration of unit tests on pure C</a></li>
<li><a href="../240571/index.html">Device for laying additional air lines</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
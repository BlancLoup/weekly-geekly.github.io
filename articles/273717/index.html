<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What's new in Hyper-V for Windows Server 2016</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the version of Hyper-V on Windows Server 2012 R2, a sufficient amount of functionality has already been implemented, so this review may seem to som...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What's new in Hyper-V for Windows Server 2016</h1><div class="post__text post__text-html js-mediator-article">  In the version of Hyper-V on Windows Server 2012 R2, a sufficient amount of functionality has already been implemented, so this review may seem to someone as an ‚Äúold song in a new way‚Äù - but for those who, for example, work with another platform of the hypervisor and are thinking about transition to Hyper-V, it's time to look at the new product. <br>  So, let's see what was presented to the general public today (do not forget that Technical Preview # 4 is being considered in this post, and there may be changes and additions to the release). <br><br><img src="https://habrastorage.org/files/2e5/ff4/68f/2e5ff468fbb7415583a42668ece76f97.png"><br><br><a name="habracut"></a><br><h1>  Powershell direct </h1><br>  Among the variety of new features I want to highlight PowerShell Direct.  To connect to a virtual machine for remote management, you do not need access to the guest OS over the network.  To connect to the machine on the host, you need to run the cmdlet <br>  <i>Enter-PSSession -VMName VMName</i> <br>  and provide data for authorization in the guest OS. <br>  To run the various commands that will be executed on the virtual machine, use the cmdlet <br>  <i>Invoke-Command -VMName VMName -ScriptBlock {commands}</i> <br>  To use PowerShell Direct, you'll need: <br><ul><li>  Host installed with Windows 10 or Windows Server 2016 running virtual machines running Windows 10 or Windows Server 2016; </li><li>  administrator privileges on the host; </li><li>  data for authorization in the guest OS as an administrator. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/7a0/c84/cad/7a0c84cad76c4c3fab45b9cebedaa768.png"><br><br><h1>  Version and format of the virtual machine configuration </h1><br>  With the new hypervisor, you should expect a new version of the configuration.  In Windows Server 2012 R2, configuration version 5 is used, but already in Windows Server 2016 Technical Preview # 3 was version 6.2, and in Technical Preview # 4 - version 7. <br>  Compared to previous versions, there was a change that will be interesting first of all to the experts who are designing migration scenarios: if you move or import a virtual machine from a host from Windows Server 2012 R2 to a host from Windows Server 2016, the configuration version will not change (version 5 will remain ).  This means the following: <br><ul><li>  You will not be able to use the new features of Windows Server 2016; </li><li>  you can move the machine back to the host with Windows Server 2012 R2. </li></ul><br>  To switch to a new version of the configuration, you can use the cmdlet <br>  <i>Update-VmConfigurationVersion vmname</i> <br>  or <br>  <i>Update-VmConfigurationVersion vmobject</i> <br>  The new version of the OS has changed the format of the configuration file.  If earlier you could open it and read it without using special tools, now it is a binary file with the VMCX extension.  Changing the format of the configuration file is done to improve performance and avoid the risk of data loss. <br><br><img src="https://habrastorage.org/files/afa/2a4/8bc/afa2a48bc0e4403db6de159d35f872ec.png"><br><br><h1>  Phased transition to the new version of the cluster Hyper-V </h1><br>  To implement a gradual transition to a new platform, you can use the Rolling Hyper-V Cluster Upgrade feature, which involves adding nodes running Windows Server 2016 to a cluster of nodes running Windows Server 2012 R2.  The virtual machine configuration version for such a cluster will not change (version 5 will remain).  To upgrade to the new version of the configuration, you need to upgrade all the nodes of the cluster to Windows Server 2016. <br><br><h1>  Integration services </h1><br>  The developers have taken care to simplify the process of finding and installing OS updates of virtual machines.  In Windows Server 2016, the update will be implemented using Windows Update, which will reduce the number of virtual machines with obsolete components.  This will also provide the ability to further control the upgrade process. <br><br><h1>  New Hyper-V Controller </h1><br>  Now, Hyper-V Manager is not popular among system administrators, since it was originally designed to manage individual Hyper-V hosts. <br>  Now you can manage earlier versions of Hyper-V (starting with versions of Windows Server 2012 and Windows 8) from the new Hyper-V console and use alternate credentials.  The updated WS-MAN protocol will allow the use of authentication using the CredSSP, Kerberos or NTLM protocols and simplify the configuration of the host for remote management, since the connection will be made via port 80, which is usually open by default. <br>  You may still need additional controls, such as SCVMM or 5nine, but the improvements made for the Hyper-V controller are good news. <br><br><h1>  Linux secure boot </h1><br>  In Windows Server 2016, UEFI Secure Boot (Secure Boot) with Linux Ubuntu 14.04 and Suse Linux Enterprise Server 12 for second-generation virtual machines will be possible.  We hope this list will be replenished with other versions of Linux. <br><br><h1>  Hot add memory and network adapters </h1><br>  With regard to the possibilities of working with memory and network adapters, then in the new version without the need to turn off the machines you can do the following: <br><ul><li>  increase and decrease the amount of memory for machines of the first and second generation, regardless of what memory (dynamic or static) the machine uses; </li><li>  add and remove network adapters for second-generation virtual machines. </li></ul><br><br><img src="https://habrastorage.org/files/0dc/04a/80c/0dc04a80c24948b898317c0b2dfa14ac.png"><br><br><h1>  New technology to create snapshots </h1><br>  Microsoft has significantly reworked the backup mechanisms available in Hyper-V 2016. In Windows Server 2016, there will be two approaches to creating virtual machine snapshots: <br><ul><li>  by saving the state of the virtual machine (as in previous versions of Hyper-V); </li><li>  by creating consistent snapshots of disks using VSS technology (or ‚Äúsnapshots‚Äù, as they are called in the VMware world) - for virtual machines with Windows, or by flushing file buffers in memory to disk (file system buffer flush) - for virtual machines with Linux </li></ul><br>  The second approach will be the ‚Äúdefault‚Äù approach and will be designed for use in productive networks, while the first approach is recommended for use in debugging and testing, including testing of OS updates before installing them. <br><br><img src="https://habrastorage.org/files/1ce/9cb/161/1ce9cb161ee54a2aad8e3f364e2543be.png"><br><br><h1>  Nano server </h1><br>  Although the Nano Server is not technically part of Hyper-V, I can't ignore it.  Nano Server is a server component with no GUI and no local logon capability ‚Äî for access, you need to use PowerShell, WMI, or other tools to manage a remote server (Windows Remote Management, Emergency Management Services).  We can say that it turned out a very small (Nano) edition of the server, with a small set of essential components, which is very quickly installed and loaded, requiring a minimum of patches and reboots.  The main purpose of this product, <a href="http://blogs.technet.com/b/windowsserver/archive/2015/04/08/microsoft-announces-nano-server-for-modern-apps-and-cloud.aspx%3FWT.mc_id%3DBlog_ServerCloud_Announce_TTD">according to the manufacturer</a> , will be support for computing clusters from Hyper-V systems, as well as DevOps tasks. <br>  You can deploy such a server on both physical and virtual machines.  You can install a specially designed package for the Hyper-V role (supporting clustering, among other things) on the Nano Server, so using it to create a Hyper-V infrastructure is realistic. <br>  Perhaps, at first, working with the Nano Server will seem unusual to someone, but later you will undoubtedly discover its advantages.  I hope that Server Manager and PowerShell, as well as MMC consoles (Cluster Manager, Hyper-V Manager, etc.) and 5nine Manager will help you with this. <br>  In addition to the mentioned package for the Hyper-V and Clustering role, Technical Preview # 4 includes other packages that implement server roles: DNS, IIS and MPIO.  I think that by the release of them will be even more, and perhaps in the future someone's dream of deploying the entire infrastructure (including the file server, AD, DNS, DHCP and Hyper-V) based on the Nano Server will come true. <br><br><img src="https://habrastorage.org/files/4a3/b5e/b94/4a3b5eb9425d4b158a6148845ade66ba.png"><br><br>  I can also recommend: <br><ul><li>  video review of Nano Server from our colleagues (in English) - <a href="https://channel9.msdn.com/Blogs/Interview-with-an-MVP/Episode-21-What-the-heck-is-Nano-Server">Episode 21 - What the heck is Nano Server</a> </li><li>  description of the installation of Nano Server (in the version of Technical Preview # 2) in the article of the blog of the company Microsoft on Habr√© - <a href="http://habrahabr.ru/company/microsoft/blog/261701/">http://habrahabr.ru/company/microsoft/blog/261701/</a> </li><li>  an introduction to working with the Nano Server from the manufacturer (in English) - <a href="https://technet.microsoft.com/en-us/library/mt126167.aspx">https://technet.microsoft.com/en-us/library/mt126167.aspx</a> </li></ul><br><h1>  Nested Virtualization </h1><br>  Many of us dreamed about this for quite a long time - and today, finally, we can implement this idea using Windows 10 and Hyper-V.  Microsoft is actively working to ensure that ‚Äúnested virtualization‚Äù consumes the minimum possible amount of resources and, thus, could be used not only in a test or demo environment, but also, if necessary, in production. <br><br><img src="https://habrastorage.org/files/9da/d8f/065/9dad8f065c934c64853fbb3e56805d19.png"><br><br><h1>  Shielded virtual machines </h1><br>  This feature will please those who would like the system or Hyper-V administrator to leave his machines and the data on them alone.  This feature is implemented for the second generation VM and provides for the inclusion of encryption of VM disks.  It is assumed that the protected virtual machines will also be in demand when working with a public cloud. <br><br><h1>  ReFS file system enhancements </h1><br>  It is expected that using ReFS as a file system will significantly reduce the time it takes to create virtual machines (compared to creating a VHD / VHDX disk).  And if you use virtual machine disk snapshots when backing up (as most manufacturers do when backing up the entire machine), then you will surely appreciate that: <br><ul><li>  the time required for final operations with the snapshot, i.e. making changes from the delta disk, closing and deleting the snapshot, has been significantly reduced; </li><li>  read-write performance in these operations is now virtually unaffected (or minimally affected), allowing the working infrastructure to function normally. </li></ul><br><h1>  Discrete Device Assignment </h1><br>  This feature appeared in Technical Preview # 4.  It allows you to "prokinut" some devices that are connected to hosts via PCI Express, in the guest OS of the virtual machine.  To some extent, this resembles ‚Äútransparent‚Äù (pass-through) disks.  A brief overview of this feature can be found in <a href="http://blogs.technet.com/b/virtualization/archive/2015/11/19/discrete-device-assignment.aspx">a blog article on TechNet</a> .  In particular, support was announced for Non-Volatile Memory Express (NVMe) devices and graphics processors (GPUs) (together with their manufacturers, the list of which has not yet been officially announced).  However, those who expected the support of transparent USB devices to be implemented will have to wait. <br><br><h1>  Hyper-V containers </h1><br>  As you know, Microsoft is working to realize the use of containers on its platform - so, in Technical Preview # 4, Windows Server Containers and Hyper-V Containers containers are supported.  Therefore, if you have a need to work with them, you can start testing.  More information about containerization from Microsoft can be found, for example, in <br>  <a href="http://habrahabr.ru/company/microsoft/blog/255453/">this Microsoft blog article on Habr√©</a> . <br><br><h1>  Instead of conclusion </h1><br>  In this post, I stopped at only a small part of the list of new Windows Server 2016 related to Hyper-V.  But there is also a lot of new developments in terms of data storage systems and network infrastructure, which will be a great help in creating a virtual environment: storage resiliency (Storage Resiliency), replica storage (Storage Replica), quality of service for storage (Storage QoS), fault tolerance cluster virtual machines (VM Cluster Resiliency), enhanced deduplication (Enhanced Deduplication), improved RDMA, and much more. <br><br>  In addition to the links to resources already provided, I can also recommend: <br><ul><li>  Windows Server 2016 Technical Preview # 4 Link: <a href="https://www.microsoft.com/en-us/evalcenter/evaluate-windows-server-technical-preview">https://www.microsoft.com/en-us/evalcenter/evaluate-windows-server-technical-preview</a> </li><li>  Veeam Software's Hyper-V blog (currently available in English): <a href="https://hyperv.veeam.com/blog/">https://hyperv.veeam.com/blog/</a> </li><li>  overview of second-generation virtual machines: <a href="https://technet.microsoft.com/ru-ru/library/dn282285.aspx">https://technet.microsoft.com/ru-ru/library/dn282285.aspx</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/273717/">https://habr.com/ru/post/273717/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../273703/index.html">Google stops supporting SHA-1 certificates after Mozilla and Microsoft</a></li>
<li><a href="../273705/index.html">Opinions: Swift became Open Source</a></li>
<li><a href="../273707/index.html">How to design a workplace that employees enjoy and why? BYOD means love</a></li>
<li><a href="../273711/index.html">Interview at UX Designer</a></li>
<li><a href="../273713/index.html">Internet Magnets 3 - P2P Website and Forum</a></li>
<li><a href="../273719/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 23. "Anglerphish"</a></li>
<li><a href="../273721/index.html">Fixed opening links with a wheel and other fixes in Vivaldi 1.0.357.5 assembly</a></li>
<li><a href="../273723/index.html">Script for quick assessment of the status of Linux systems</a></li>
<li><a href="../273725/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 24. "Exposure"</a></li>
<li><a href="../273727/index.html">Swift. Functional programming</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
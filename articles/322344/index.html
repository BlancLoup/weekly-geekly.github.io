<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Salyut-EL24D1: debug board on the Russian processor 1892BM14Ya for harsh operating conditions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A new Russian experiment board appeared in our engineering laboratory - the Salyut-EL24D1 debugging module on a multi-core system on a 1892BM14I chip ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Salyut-EL24D1: debug board on the Russian processor 1892BM14Ya for harsh operating conditions</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/5e7/f88/de1/5e7f88de1c5f4308a7233007d12a277b.jpg"><br>  A new Russian experiment board appeared in our engineering laboratory - the Salyut-EL24D1 debugging module on a multi-core system on a 1892BM14I chip for the Arctic and space.  Let's see what she is capable of. <br><a name="habracut"></a><br>  The Salyut-EL24D1 module, like all debug boards, is designed for exploring the capabilities of the processor, developing and debugging software.  Its developer, NPC ELVIS, began deliveries of Salyut at the end of 2015. <br><br>  One of the main areas of application for the 1892BM14I processor is machine vision systems, video and audio processing, designed for harsh environments, production or space.  So the processor is focused on industrial rather than civilian use - the operating temperature range is from ‚Äì60 ¬∞ C to + 85 ¬∞ C. <br><br>  <a href="http://multicore.ru/index.php%3Fid%3D1335">Chip 1892VM14Ya</a> developed by the system-on-chip (SoC) technology and includes two ARM Cortex-A9 cores, a Mali-300 GPU unit, two Elcore-03M DSP cores, a VELcore-01 hardware video processing unit and various I / O ports. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/dfe/c84/3b0/dfec843b0277489fa70414e5bf7a8e86.png"><br><br><img src="https://habrastorage.org/files/884/d71/4b7/884d714b7d63477d9622f04bf24b9028.png"><br><br><h2>  Contents of delivery </h2><br>  In addition to the Salyut-EL24D1 debugging card itself, the box contains a 12V power supply, a CSI-camera with a cable, a 32 GB micro-SD memory card, a USB ‚Üí UART adapter, a battery for the RTC, a WiFi module antenna, and a radiator for the processor, without which it is weakly heated. <br><br>  The debug board comes pre-installed with the Arch Linux distribution.  Buildroot sources are available, from which you can build the necessary packages yourself or the entire system. <br><br>  The most delicious thing about Arch Linux is the demo utilities for capturing video stream from a CSI camera, utilities for working with the H264 video codec and Gstreamer with installed RTSP plug-ins. <br><br><h2>  Board interfaces </h2><br>  The board has USB, Ethernet, Wifi ports and connectors for connecting ZigBee / GPS antennas. <br><br>  Video / audio interfaces include HDMI video output, DSI video output, CSI connector for camera, standard audio input / output 3.5 mm. <br><br><img src="https://habrastorage.org/files/431/feb/e4a/431febe4a467449981bcc2befb90477d.jpg"><br><br>  Also available are RS-232, RS-485, CAN bus, UART, I2C, I2S, SPI. <br><br>  At the top of the board, debug ports and a RaspberryPI-compatible PLS-pins block with GPIO and corresponding interfaces are displayed. <br><br><div class="spoiler">  <b class="spoiler_title">Full list of characteristics Salyut-EL24D1</b> <div class="spoiler_text"><ul><li><p>  1892BM14Y processor: <br></p><ul><li><p>  2-core CPU Cortex-A9, up to 912 MHz; </p></li><li><p>  2-core DSP ELcore-30M, up to 720 MHz; </p></li><li><p>  VELcore-01 video codec: providing H.264 CBP Encode and Decode functions, Full HD (1920x1080) stereo stream with a repetition rate of at least 30 frames / s; </p></li><li><p>  hardware accelerator for JPEG image compression; </p></li><li><p>  Mali-300 graphics processor, 250 million pixels / s. </p></li></ul><br></li><li><p>  DDR3-1066, 32 bits, 1 GB. </p></li><li><p>  Non-volatile memory: <br></p><ul><li><p>  NAND Flash x 8 bit @ 100 MHz, 4 GB; </p></li><li><p>  microSD card, 10 MB / s, 32 GB. </p></li></ul><br></li><li><p>  Wireless interfaces: <br></p><ul><li><p>  WiFi (IEEE 802.11); </p></li><li><p>  Bluetooth (IEEE 802.15.1); </p></li><li><p>  ZigBee (IEEE 802.15.4). </p></li></ul><br></li><li><p>  Navigation: GLONASS / GPS (optional). </p></li><li><p>  High-speed interfaces: <br></p><ul><li><p>  4 USB 2.0 Host ports; </p></li><li><p>  Ethernet 10/100. </p></li></ul><br></li><li><p>  Video input: <br></p><ul><li><p>  MIPI CSI2 4 lanes, 1.5 Gbps, I2C. </p></li></ul><br></li><li><p>  Video output: <br></p><ul><li><p>  MIPI DSI, 2 lanes, 1.5 Gbps; </p></li><li><p>  HDMI 1.3a Tx, 1080 p / 60 Hz, audio. </p></li></ul><br></li><li><p>  Audio input: <br></p><ul><li><p>  Analog jack, Stereo PCM, 16 bit, 192 kHz. </p></li></ul><br></li><li><p>  Audio output: <br></p><ul><li><p>  Analog jack, Stereo PCM, 16 bit, 192 kHz. </p></li></ul><br></li><li><p>  Other interfaces: <br></p><ul><li><p>  UART;  RS485;  RS232; </p></li><li><p>  I2C;  I2S; </p></li><li><p>  SPI;  MFBSP; </p></li><li><p>  CAN ISO 11898. </p></li></ul><br></li><li><p>  Debug Interfaces: <br></p><ul><li><p>  JTAG OnCD; </p></li><li><p>  Trace Debug Port. </p></li></ul><br></li><li><p>  Boot modes: SPI Flash, UART, SD, NAND. </p></li><li><p>  Nutrition: <br></p><ul><li><p>  DC JACK 2.5mm 10-30 V; </p></li><li><p>  MicroUSB 5 V, 3 A. </p></li></ul><br></li><li><p>  Size: 130x105 mm. </p></li></ul><br></div></div><br><h2>  Video processing on the processor </h2><br>  The main area in which we experimented with the 1892BM14Y processor is video signal processing - one of its main features. <br><br>  To begin with, we conducted trial tests of H264 software coding using GStreamer.  With a video resolution of 1280x720px, H264 software coding with the libx264 plugin in GStreamer yields only 2‚Äì3 fps.  Decoding works a little faster - about 8 fps.  The speed is quite low, which is not surprising, since  The processor is not designed to perform complex computational tasks. <br><br>  The target application area of ‚Äã‚Äã1892BM14Y is video / audio processing, IP cameras, etc. Therefore, we were most interested in the VELcore-01 video processing unit with the possibility of H264 encoding / decoding hardware. <br><br><h2>  Hardware codec H264 </h2><br>  The main characteristics of the video processing core VELcore-01: <br><br><ol><li>  The maximum size of processed images is 4096 x 4096 pixels. </li><li>  The minimum size of processed images is 16 x 16 pixels. </li><li>  The image format is YCbCr (4: 2: 0). </li><li>  Presentation accuracy is 8 bits per pixel. </li><li>  The number of simultaneously processed video data streams is up to two compression streams and up to two decompression streams. </li><li>  Maximum performance - up to two streams of compression and up to two streams of video decompression in Full HD format (1920 x 1080 pixels) with a frequency of 60 frames per second according to any of these standards. </li></ol><br>  One of the features of the H264 hardware coding block is that it uses the non-standard M420 pixel format for the input video.  M420 is a YUV (4: 2: 0) format with a recording density of 12 bits per pixel.  The Y-component is recorded for each pixel (1 byte per pixel), and the CbCr-components - by one pair of values ‚Äã‚Äãper block of 4 pixels (2 bytes by 4 pixels).  This format is similar to NV12, with the difference that the CbCr data block does not come at the end, but is "mixed" line by line with the Y block: 2 Y lines - one CbCr line, etc. <br><br>  The structure of the M420 format looks like this, judging by the description on linuxtv.org: <br><br><pre><code class="hljs scala">start + <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'00</span></span> <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'01</span></span> <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'02</span></span> <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'03</span></span> start + <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'10</span></span> <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'11</span></span> <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'12</span></span> <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'13</span></span> start + <span class="hljs-number"><span class="hljs-number">8</span></span>: <span class="hljs-type"><span class="hljs-type">Cb00</span></span> <span class="hljs-type"><span class="hljs-type">Cr00</span></span> <span class="hljs-type"><span class="hljs-type">Cb01</span></span> <span class="hljs-type"><span class="hljs-type">Cr01</span></span> start + <span class="hljs-number"><span class="hljs-number">16</span></span>: <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'20</span></span> <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'21</span></span> <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'22</span></span> <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'23</span></span> start + <span class="hljs-number"><span class="hljs-number">20</span></span>: <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'30</span></span> <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'31</span></span> <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'32</span></span> <span class="hljs-type"><span class="hljs-type">Y</span></span><span class="hljs-symbol"><span class="hljs-symbol">'33</span></span> start + <span class="hljs-number"><span class="hljs-number">24</span></span>: <span class="hljs-type"><span class="hljs-type">Cb10</span></span> <span class="hljs-type"><span class="hljs-type">Cr10</span></span> <span class="hljs-type"><span class="hljs-type">Cb11</span></span> <span class="hljs-type"><span class="hljs-type">Cr11</span></span></code> </pre> <br><h2>  Video stream from the bundled camera </h2><br>  The CSI camcorder driver also provides video in M420 format, so you can use it with the H264 hardware codec driver directly. <br><br>  Run the command ... <br><br><pre> <code class="hljs pgsql">cap-enc -s <span class="hljs-number"><span class="hljs-number">1920</span></span>x1072 -r30 -f1 /dev/v4l/<span class="hljs-keyword"><span class="hljs-keyword">by</span></span>-<span class="hljs-type"><span class="hljs-type">name</span></span>/vinc0 /dev/v4l/<span class="hljs-keyword"><span class="hljs-keyword">by</span></span>-<span class="hljs-type"><span class="hljs-type">name</span></span>/avico0 | gst-rtsp-launch <span class="hljs-string"><span class="hljs-string">'fdsrc ! h264parse ! rtph264pay name=pay0'</span></span></code> </pre> <br>  ... and we get a working out-of-the-box RTSP stream with H264 video compression from a connected camera. <br><br><h2>  Video stream from file </h2><br>  With the compression of the video from the file, not everything was so simple.  In the utility designed for this purpose, it is possible to convert video to M420 format on the fly.  But this operation heavily loads the processor, as a result, the software part does not have time to issue the driver frames for compression, which leads to a noticeable decrease in fps.  To solve this problem, I had to write a script that converts the video file to the M420 format in advance. <br><br>  The second problem is that the video processing core is able to compress only frames whose size is a multiple of 16 pixels.  With a resolution of 1280 x 720, everything converges - both sides of the frame are multiples of 16, but in Full HD (1920 x 1080) the height is not divided by 16.  Thus, for video compression of 1920 x 1080, before transferring a frame, the driver needs to draw a strip of 8 pixels in order to get a height multiple of 16. The M420 format in this regard turned out to be very convenient due to the fact that the Y and Cb / Cr channels are in it together, and not one by one - just insert 1920 * 8 * 1.5 empty bytes into the end of the buffer. <br><br>  As a result, H264 coding was achieved with a resolution of 1280 x 720 and with a resolution of 1920 x 1080, but with a ‚Äúcrutch‚Äù in the form of a strip of additional pixels.  Both permissions consistently give a frame rate of 30 fps. <br><br>  The video processing core VELcore-01 also supports H264 decoding at the hardware level, but at the driver level support for this function has not yet been implemented, so the experiment could not be carried out in this direction. <br><br><img src="https://habrastorage.org/files/617/b6c/b76/617b6cb767b34ceeb36c5b0c09f77b66.jpg"><br>  In general, the acquaintance turned out to be positive: 1892BM14Ya proved to be an excellent processor for industry and specials.  applications where HDMI, graphics and multimedia are required.  I liked responsive technical support. </div><p>Source: <a href="https://habr.com/ru/post/322344/">https://habr.com/ru/post/322344/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../322328/index.html">Report with Game Design meetup February 4</a></li>
<li><a href="../322332/index.html">Why it is not necessary to learn python in the first language</a></li>
<li><a href="../322334/index.html">Captain Slopek reports: ReactOS 0.4.4 has been released</a></li>
<li><a href="../322336/index.html">Hi, SaaS | Russian SaaS 2016 - results</a></li>
<li><a href="../322340/index.html">Determine the best place to live in the United States with your own application on IBM Bluemix</a></li>
<li><a href="../322346/index.html">Heuristic network - analogue of the recurrent neural network for chat bot program</a></li>
<li><a href="../322348/index.html">Escape analysis and scalarization: let GC rest</a></li>
<li><a href="../322350/index.html">Personal experience: TeamCity and character server integration</a></li>
<li><a href="../322352/index.html">As I made the fastest resize of images. Part 1, general optimizations</a></li>
<li><a href="../322354/index.html">Manage application state with Vuex</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
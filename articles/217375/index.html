<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quine in assembler? It's simple</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is known that quine (quine) is a program whose result is the output of the text of the program itself. It is assumed that access to the file contai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Quine in assembler? It's simple</h1><div class="post__text post__text-html js-mediator-article">  It is known that quine (quine) is a program whose result is the output of the text of the program itself.  It is assumed that access to the file containing the program does not occur. <br><br>  Quinees can be compiled in almost all programming languages ‚Äã‚Äãwith the possible exception of some exotic ones.  Consider the task of compiling a quine in assembly language, assuming that the program should be a Win32 application and should display its text in the window. <br><br><a name="habracut"></a>  The same machine code can be represented in assembly language in different ways.  Suppose you want to push the number 48 onto the stack. The corresponding two-byte instruction can be written as mnemonic 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      push 48 (or push 30h), <br><br>  so with the use of the db data definition directive <br><br>  db 06Ah, 030h (or db 106.48). <br><br>  It is also possible option db 'j0'.  In all the cases listed above, compiling produces the same machine code.  It is difficult to write an assembler quine containing a mnemonic representation of instructions - apparently, thousands of lines of the program are required.  Therefore, the main idea that will guide us is getting a quine with db directives in the form <br><br>  <b>Source 1</b> <br><br><pre><code class="hljs css"><span class="hljs-selector-class"><span class="hljs-selector-class">.386</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.model</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">flat</span></span>,<span class="hljs-selector-tag"><span class="hljs-selector-tag">stdcall</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.code</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">q</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">db</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>     .... <span class="hljs-selector-tag"><span class="hljs-selector-tag">db</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>     <span class="hljs-selector-tag"><span class="hljs-selector-tag">end</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">q</span></span></code> </pre> <br><br>  (MASM assembler is used).  The difficulty is that it is almost impossible to write such a quine directly - this is actually programming in machine codes.  However, you can start by writing the program using the usual assembler mnemonics - see source 2 below. It is important that when compiling source codes 1 and 2 you get the same machine code. <br><br>  <b>Source 2</b> <br><br><pre> <code class="hljs perl">; @echo off ; ml /c /coff quine.cmd ; pause ; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> errorlevel <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">link</span></span> /subsystem:windows /section:.text,RW quine.obj ; pause ; del quine.obj ; <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> .<span class="hljs-number"><span class="hljs-number">386</span></span> .model flat,stdcall option casemap:none include \masm32\include\windows.inc bStr = <span class="hljs-number"><span class="hljs-number">25</span></span> ; - ,      qLen = len * <span class="hljs-number"><span class="hljs-number">5</span></span> + (len / bStr + <span class="hljs-number"><span class="hljs-number">1</span></span>) * <span class="hljs-number"><span class="hljs-number">4</span></span> + len1 + <span class="hljs-number"><span class="hljs-number">10</span></span> ;    stLen = (qLen / <span class="hljs-number"><span class="hljs-number">1000</span></span>h + <span class="hljs-number"><span class="hljs-number">1</span></span>) * <span class="hljs-number"><span class="hljs-number">1000</span></span>h ;       .code ; ***  <span class="hljs-number"><span class="hljs-number">1</span></span> -      *** start: cld mov edx,[esp] ;   kernel32.dll -   <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">esp</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stLen</span></span></span><span class="hljs-function"> </span></span>;     mov edi,esp mov stAddr,edi lea esi,text <span class="hljs-keyword"><span class="hljs-keyword">xor</span></span> ecx,ecx mov cl,len1 rep movsb ;   <span class="hljs-string"><span class="hljs-string">'.386 .model flat ...'</span></span> lea esi,start mov bl,bStr cycl: mov eax,ecx ;  .  ? div bl <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> ah,ah jnz comma mov ax,0A0Dh ;  -      db stosw mov eax,<span class="hljs-string"><span class="hljs-string">' bd'</span></span> stosd dec edi jmp j1 comma: mov al,<span class="hljs-string"><span class="hljs-string">','</span></span> ;  -  ,   stosb j1: mov al,<span class="hljs-string"><span class="hljs-string">'h'</span></span> ;  <span class="hljs-number"><span class="hljs-number">16</span></span>-   -  h shl eax,<span class="hljs-number"><span class="hljs-number">16</span></span> lodsb mov ah,al <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> al,0Fh cmp al,<span class="hljs-number"><span class="hljs-number">10</span></span> sbb al,<span class="hljs-number"><span class="hljs-number">69</span></span>h das ;    xchg al,ah shr al,<span class="hljs-number"><span class="hljs-number">4</span></span> cmp al,<span class="hljs-number"><span class="hljs-number">10</span></span> sbb al,<span class="hljs-number"><span class="hljs-number">69</span></span>h das ;   shl eax,<span class="hljs-number"><span class="hljs-number">8</span></span> mov al,<span class="hljs-string"><span class="hljs-string">'0'</span></span> ;  <span class="hljs-number"><span class="hljs-number">0</span></span> stosd inc ecx cmp ecx,len jb cycl mov ax,0A0Dh ;   <span class="hljs-string"><span class="hljs-string">'end q'</span></span> stosw mov eax,<span class="hljs-string"><span class="hljs-string">' dne'</span></span> stosd mov eax,<span class="hljs-string"><span class="hljs-string">'q'</span></span> stosd ; ***  <span class="hljs-number"><span class="hljs-number">2</span></span> -   API  *** <span class="hljs-keyword"><span class="hljs-keyword">xor</span></span> dx,dx c2: cmp word ptr [edx],<span class="hljs-string"><span class="hljs-string">'ZM'</span></span> ; MZ-  kernel32? je c1 c3: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">edx</span></span></span><span class="hljs-function">,10000</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">h</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">jmp</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c2</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c1</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ecx</span></span></span><span class="hljs-function">,[</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">edx</span></span></span><span class="hljs-function">+3</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Ch</span></span></span><span class="hljs-function">] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cmp</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dword</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ptr</span></span></span><span class="hljs-function"> [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">edx</span></span></span><span class="hljs-function">+</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ecx</span></span></span><span class="hljs-function">],'</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EP</span></span></span><span class="hljs-function">' </span></span>; PE-? jne c3 mov ecx,[edx+ecx+<span class="hljs-number"><span class="hljs-number">78</span></span>h] add ecx,edx ;    kernel32 <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ecx mov eax,[ecx+<span class="hljs-number"><span class="hljs-number">20</span></span>h] add eax,edx ;      <span class="hljs-keyword"><span class="hljs-keyword">xor</span></span> ebx,ebx <span class="hljs-keyword"><span class="hljs-keyword">xor</span></span> ecx,ecx cycl2: mov esi,[eax+<span class="hljs-number"><span class="hljs-number">4</span></span>*ebx] add esi,edx lea edi,GPAname mov cl,len2 repe cmpsb ;   GetProcAddress je found inc ebx jmp cycl2 found: <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> ecx mov eax,[ecx+<span class="hljs-number"><span class="hljs-number">24</span></span>h] add eax,edx mov bx,[eax+<span class="hljs-number"><span class="hljs-number">2</span></span>*ebx] ;   GetProcAddress mov eax,[ecx+<span class="hljs-number"><span class="hljs-number">1</span></span>ch] add eax,edx mov ebx,[eax+<span class="hljs-number"><span class="hljs-number">4</span></span>*ebx] add ebx,edx mov edi,edx ; EBX -  GetProcAddress ; EDI -   kernel32 (  - user32) <span class="hljs-keyword"><span class="hljs-keyword">xor</span></span> ecx,ecx ;     mov cl,tlen lea esi,tbl cycl3: cmp cl,tlen-tlen2 jne j2 <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ecx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> offset DLLname call eax ;  user32.dll    LoadLibrary <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> ecx mov edi,eax j2: dec cl <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ecx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> [esi+<span class="hljs-number"><span class="hljs-number">4</span></span>*ecx] <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> edi call ebx ;      GetProcAddress <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> ecx mov [esi+<span class="hljs-number"><span class="hljs-number">4</span></span>*ecx],eax <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> cl,cl jnz cycl3 ; ***  <span class="hljs-number"><span class="hljs-number">3</span></span> -     MessageBox *** <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> NULL call dword ptr _GetModuleHandle mov hInst,eax call dword ptr _GetCurrentThreadId <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> eax <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> NULL <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> offset hProc <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> WH_CBT ;      call dword ptr _SetWindowsHookEx mov hook,eax <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> MB_OK <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> offset capt <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> stAddr <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> call dword ptr _MessageBox ;     <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> call dword ptr _ExitProcess ; *** hProc proc code:dword,wParam:dword,lParam:dword ;   <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> coord:RECT pusha cmp code,HCBT_ACTIVATE ;  ? jne <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> 0FFFFh <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> wParam call dword ptr _GetDlgItem mov ebx,eax ;    lea eax,coord <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> eax <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ebx call dword ptr _GetClientRect ;    add coord.right,<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> NULL <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> NULL <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> WM_GETFONT <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ebx mov edi,_SendMessage call edi ;    mov esi,eax <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> SW_HIDE <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ebx call dword ptr _ShowWindow ;   <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> NULL <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> hInst <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> 0FFFFh <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> wParam <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> coord.bottom <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> coord.right <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> coord.top <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> coord.left <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> WS_CHILD+WS_VISIBLE+ES_MULTILINE+ES_READONLY <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> stAddr <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> offset cname <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> WS_EX_WINDOWEDGE call dword ptr _CreateWindowEx ;  EDIT  STATIC ;  ,       <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> NULL <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> esi <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> WM_SETFONT <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> eax call edi ;   <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> hook call dword ptr _UnhookWindowsHookEx ;   popa <span class="hljs-keyword"><span class="hljs-keyword">xor</span></span> eax,eax ret <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>: popa <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> lParam <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> wParam <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> code <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> hook call dword ptr _CallNextHookEx ;    ret hProc endp ; ***   capt db <span class="hljs-string"><span class="hljs-string">'Quine'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> ;   GPAname db <span class="hljs-string"><span class="hljs-string">'GetProcAddress'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> len2 equ $ - GPAname GDIname db <span class="hljs-string"><span class="hljs-string">'GetDlgItem'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> ;    GCRname db <span class="hljs-string"><span class="hljs-string">'GetClientRect'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> SMname db <span class="hljs-string"><span class="hljs-string">'SendMessageA'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> SWname db <span class="hljs-string"><span class="hljs-string">'ShowWindow'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> CWEname db <span class="hljs-string"><span class="hljs-string">'CreateWindowExA'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> UWHEname db <span class="hljs-string"><span class="hljs-string">'UnhookWindowsHookEx'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> CNHEname db <span class="hljs-string"><span class="hljs-string">'CallNextHookEx'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> SWHEname db <span class="hljs-string"><span class="hljs-string">'SetWindowsHookExA'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> MBname db <span class="hljs-string"><span class="hljs-string">'MessageBoxA'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> LLname db <span class="hljs-string"><span class="hljs-string">'LoadLibraryA'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> GMHname db <span class="hljs-string"><span class="hljs-string">'GetModuleHandleA'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> GCTIname db <span class="hljs-string"><span class="hljs-string">'GetCurrentThreadId'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> EPname db <span class="hljs-string"><span class="hljs-string">'ExitProcess'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> DLLname db <span class="hljs-string"><span class="hljs-string">'user32.dll'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> cname db <span class="hljs-string"><span class="hljs-string">'EDIT'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span> ;   text db <span class="hljs-string"><span class="hljs-string">'.386'</span></span>,<span class="hljs-number"><span class="hljs-number">13</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-string"><span class="hljs-string">'.model flat,stdcall'</span></span>,<span class="hljs-number"><span class="hljs-number">13</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-string"><span class="hljs-string">'.code'</span></span>,<span class="hljs-number"><span class="hljs-number">13</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-string"><span class="hljs-string">'q:'</span></span> ;   len1 equ $ - text tbl label dword ;    ,     _GetDlgItem dd offset GDIname ;   user32.dll _GetClientRect dd offset GCRname _SendMessage dd offset SMname _ShowWindow dd offset SWname _CreateWindowEx dd offset CWEname _UnhookWindowsHookEx dd offset UWHEname _CallNextHookEx dd offset CNHEname _SetWindowsHookEx dd offset SWHEname _MessageBox dd offset MBname tbl2 label dword _LoadLibrary dd offset LLname ;   kernel32.dll _GetModuleHandle dd offset GMHname _GetCurrentThreadId dd offset GCTIname _ExitProcess dd offset EPname tlen2 equ ($-tbl2) / <span class="hljs-number"><span class="hljs-number">4</span></span> tlen equ ($-tbl) / <span class="hljs-number"><span class="hljs-number">4</span></span> ;   len equ $ - start ;   ; ***  ,     hInst dd ? ;   hook dd ? ;   stAddr dd ? ;      end start :<span class="hljs-keyword"><span class="hljs-keyword">exit</span></span></code> </pre><br><br>  The principle of operation is clear from the comments given in the text.  We only note that the program consists of three parts.  In the first part, the Quine text (i.e., source code 1) is formed on the stack.  The number of bytes defined by a single db directive (and therefore the width of the quine rows) is given by the constant bStr - it is set to 25.  Since during compilation no API functions are imported, in the second part the addresses of a number of functions are dynamically determined.  First, this is the address of the GetProcAddress function, obtained by tracing the export table of the kernel32.dll module.  Then the addresses of the remaining functions obtained using GetProcAddress.  Finally, in the third part, Quine is output to the MessageBox window.  Since the default output text is static and cannot be copied anywhere, a hook is installed that allows you to copy text from the window.  Other variants of the third part of the quine are possible - for example, by creating a message queue and writing a window function. <br><br>  So, source code 2 (which is not quine) needs to be saved in the batch file quine.cmd and run it - the executable file quine.exe is obtained.  Next, quine.exe is launched, and from the window that appears, select the text with the mouse and copy the text into the quine.asm file.  The executable file can be deleted.  Thus, in quine.asm, a full-fledged quine (see source 1).  It is broadcast using <br><br>  ml / c / coff quine.asm <br><br>  and linked with <br><br>  link / subsystem: windows /section:.text,RW quine.obj <br><br>  (in the code section should be allowed to write).  The size of the len code section was 820 bytes. <br><br>  I debugged the program I did turbo debugger, but at the same time I also included the line <br><br>  invoke ExitProcess, 0 <br><br>  before the start entry point (you can take any other function), and the lines <br><br>  include \ masm32 \ include \ kernel32.inc <br>  includelib \ masm32 \ lib \ kernel32.lib <br><br>  Otherwise, the debugger hangs - apparently due to the lack of an import table in the executable file. </div><p>Source: <a href="https://habr.com/ru/post/217375/">https://habr.com/ru/post/217375/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../217361/index.html">US Republicans have issued a bill to maintain control over the domain name system</a></li>
<li><a href="../217363/index.html">Spatial parameters of the average habrauser</a></li>
<li><a href="../217365/index.html">No block! Nowhere to retreat - behind offline</a></li>
<li><a href="../217369/index.html">Weekday automation or ‚ÄúI need a program for 3D packaging‚Äù</a></li>
<li><a href="../217371/index.html">Own company - a year long race</a></li>
<li><a href="../217377/index.html">Find people in photos on Android using OpenCV</a></li>
<li><a href="../217379/index.html">Create a ‚ÄúDelightful‚Äù Product (Minimum Delightful Product)</a></li>
<li><a href="../217381/index.html">We are friends with a regular Volvo speakerphone with Russian letters</a></li>
<li><a href="../217385/index.html">Remote installation of programs on Windows (XP SP3 and newer) without using third-party utilities</a></li>
<li><a href="../217387/index.html">Cocos2D-X and so easy on all devices</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
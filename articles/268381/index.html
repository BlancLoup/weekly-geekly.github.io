<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Productive unit testing of web applications using the example of yii2 and codeception</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The goal of this article is to show the most productive way to write tests in the context of developing web applications. 
 Here and below, the term t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Productive unit testing of web applications using the example of yii2 and codeception</h1><div class="post__text post__text-html js-mediator-article">  The goal of this article is to show the most productive way to write tests in the context of developing web applications. <br><blockquote>  Here and below, the term tests will be unit tests. </blockquote><br>  Web application development is accompanied by constant use in the code database.  If the code of work with the database and the code of work with the result of interaction with the database is not divided, we will need a database in the vast majority of project tests.  Also, if the code uses framework methods, we will need to connect the framework for tests.  While there are few tests, everything is fine.  When there are more tests, the problem is noticed: the speed of the tests is a bit annoying.  When the execution time of all unit tests becomes more than a minute, it becomes impossible to constantly run all tests.  The developer starts to run only part of the tests, trying to reduce the negative impact of a long test run time, but the problem of reducing the effectiveness of testing will only increase with time. <br><br>  The source of the problem lies in the absence of a clear separation of the database work code, code that needs a framework, and code for which neither the database nor the framework is needed. <br><br>  Our goal will be to figure out how to write tests and code to ensure maximum speed of test execution. <br><a name="habracut"></a><br>  The code, first of all, should aim to conform as simple as possible, and therefore better, to the architecture.  In the context of this article, the best architecture will be: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Code containing tests that cover all the uses of public methods that may not work. </li><li>  Code that is being tested as fast as possible. </li></ul><br>  Thus, if we set ourselves the goal to write tests that will test the code as quickly as possible, then we are approaching the best architecture of the project. <br><br>  Consider this sample code: <br><br><pre><code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> bool */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;validate()) { $user = User::findByUsername(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;username); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Yii::$app-&gt;user-&gt;login($user); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } }</code> </pre> <br><br>  And test: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::setUp(); Yii::configure(Yii::$app, [ <span class="hljs-string"><span class="hljs-string">'components'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'user'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'yii\web\User'</span></span>, <span class="hljs-string"><span class="hljs-string">'identityClass'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'common\models\User'</span></span>, ], ], ]); } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tearDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Yii::$app-&gt;user-&gt;logout(); <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::tearDown(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testLoginCorrect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $model = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoginForm([ <span class="hljs-string"><span class="hljs-string">'username'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'User'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'CorrectPassword'</span></span>, ]); expect(<span class="hljs-string"><span class="hljs-string">'Model should login user'</span></span>, $model-&gt;login())-&gt;true(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fixtures</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-string"><span class="hljs-string">'user'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; UserFixture::className(), <span class="hljs-string"><span class="hljs-string">'dataFile'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'@tests/codeception/common/unit/fixtures/data/models/user.php'</span></span> ], ]; }</code> </pre><br>  Result: <br><br><pre> <code class="bash hljs">$ codecept run Codeception PHP Testing Framework v2.1.2 Powered by PHPUnit 4.8.10-5-g4ecd63c by Sebastian Bergmann and contributors. Tests\codeception\common.unit Tests (1) ------------------------------- Test login correct (unit\models\LoginFormTest::testLoginCorrect) Ok ----------------------------------------------------------------------- Time: 1.41 seconds, Memory: 9.75Mb OK (1 <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>, 1 assertion)</code> </pre><br>  The <i>login</i> method uses the framework and database.  He has two responsibilities: validation and entry into the site.  But in general, everything is fine.  The code is small, it is understandable and easy to maintain.  However, in this case, we do not have a unit test, but an integration test.  We depend on the framework and database.  In the database, we must put the user <i>User</i> with the password <i>CorrectPassword</i> before starting the test.  If we consider this code as acceptable, the majority of our tests will become integration tests, which will affect their speed.  Let's try to decouple the testing of the <i>login</i> method from using the database and framework: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \yii\web\User $webUserComponent * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> array $config */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(\yii\web\User $webUserComponent, $config = [])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;setWebUserComponent($webUserComponent); <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__construct($config); } <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \yii\web\User $model */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setWebUserComponent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($model)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;webUserComponent = $model; } <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> \yii\web\User */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getWebUserComponent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;webUserComponent; } <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> bool */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;validate()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getWebUserComponent()-&gt;login(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getUser()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } } <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> \common\models\User * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@throws</span></span></span><span class="hljs-comment"> \yii\base\Exception */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $user = User::findByUsername(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;username); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$user) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span>(<span class="hljs-string"><span class="hljs-string">'     '</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $user; }</code> </pre><br>  The test has also changed: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testLoginCorrect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $webUserComponentMock = \Mockery::mock(\yii\web\User::className()) -&gt;shouldReceive(<span class="hljs-string"><span class="hljs-string">'login'</span></span>)-&gt;once()-&gt;andReturn(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)-&gt;getMock(); $userModelMock = \Mockery::mock(\common\models\User::className()); $loginFormPartialMock = \Mockery::mock(LoginForm::className()) -&gt;shouldAllowMockingProtectedMethods() -&gt;makePartial() -&gt;shouldReceive(<span class="hljs-string"><span class="hljs-string">'getWebUserComponent'</span></span>)-&gt;once()-&gt;andReturn($webUserComponentMock)-&gt;getMock() -&gt;shouldReceive(<span class="hljs-string"><span class="hljs-string">'validate'</span></span>)-&gt;once()-&gt;andReturn(<span class="hljs-string"><span class="hljs-string">'true'</span></span>)-&gt;getMock() -&gt;shouldReceive(<span class="hljs-string"><span class="hljs-string">'getUser'</span></span>)-&gt;once()-&gt;andReturn($userModelMock)-&gt;getMock(); <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> LoginForm $loginFormPartialMock */</span></span> expect(<span class="hljs-string"><span class="hljs-string">'Model should login user'</span></span>, $loginFormPartialMock-&gt;login())-&gt;true(); }</code> </pre><br>  Result: <br><br><pre> <code class="bash hljs">$ codecept run Codeception PHP Testing Framework v2.1.2 Powered by PHPUnit 4.8.10-5-g4ecd63c by Sebastian Bergmann and contributors. Tests\codeception\common.unit Tests (1) ------------------------------- Test login correct (unit\models\LoginFormTest::testLoginCorrect) Ok ----------------------------------------------------------------------- Time: 895 ms, Memory: 8.25Mb OK (1 <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>, 1 assertion)</code> </pre><br>  We managed to get rid of the database dependency and the testing framework, and we got the advantage of <i>895 ms</i> instead of <i>1.41 seconds</i> .  However, this is not an entirely correct comparison.  We ran only one test, and most of the time was spent on <i>Codeception</i> initialization.  What will happen if you run them 10 times in a row? <br><br><pre> <code class="bash hljs">$ codecept run Codeception PHP Testing Framework v2.1.2 Powered by PHPUnit 4.8.10-5-g4ecd63c by Sebastian Bergmann and contributors. Tests\codeception\common.unit Tests (10) ------------------------------------------------------------------------- Test login correct (unit\models\LoginFormTest::testLoginCorrect) Ok Test login correct2 (unit\models\LoginFormTest::testLoginCorrect2) Ok Test login correct3 (unit\models\LoginFormTest::testLoginCorrect3) Ok Test login correct4 (unit\models\LoginFormTest::testLoginCorrect4) Ok Test login correct5 (unit\models\LoginFormTest::testLoginCorrect5) Ok Test login correct6 (unit\models\LoginFormTest::testLoginCorrect6) Ok Test login correct7 (unit\models\LoginFormTest::testLoginCorrect7) Ok Test login correct8 (unit\models\LoginFormTest::testLoginCorrect8) Ok Test login correct9 (unit\models\LoginFormTest::testLoginCorrect9) Ok Test login correct10 (unit\models\LoginFormTest::testLoginCorrect10) Ok ------------------------------------------------------------------------- Time: 6.09 seconds, Memory: 15.00Mb OK (10 tests, 10 assertions)</code> </pre><br><pre> <code class="bash hljs">$ codecept run Codeception PHP Testing Framework v2.1.2 Powered by PHPUnit 4.8.10-5-g4ecd63c by Sebastian Bergmann and contributors. Tests\codeception\common.unit Tests (10) ------------------------------------------------------------------------- Test login correct (unit\models\LoginFormTest::testLoginCorrect) Ok Test login correct2 (unit\models\LoginFormTest::testLoginCorrect2) Ok Test login correct3 (unit\models\LoginFormTest::testLoginCorrect3) Ok Test login correct4 (unit\models\LoginFormTest::testLoginCorrect4) Ok Test login correct5 (unit\models\LoginFormTest::testLoginCorrect5) Ok Test login correct6 (unit\models\LoginFormTest::testLoginCorrect6) Ok Test login correct7 (unit\models\LoginFormTest::testLoginCorrect7) Ok Test login correct8 (unit\models\LoginFormTest::testLoginCorrect8) Ok Test login correct9 (unit\models\LoginFormTest::testLoginCorrect9) Ok Test login correct10 (unit\models\LoginFormTest::testLoginCorrect10) Ok ------------------------------------------------------------------------- Time: 1.05 seconds, Memory: 8.50Mb OK (10 tests, 10 assertions)</code> </pre><br>  From <i>895 ms</i> to <i>1.05 seconds</i> against <i>1.41 seconds</i> to <i>6.09 seconds</i> .  Using moki we achieved that the tests began to take place almost instantly.  This will allow you to write a lot of tests.  <b>A lot of</b> tests.  And run them whenever we want, after a few seconds getting the result. <br><br>  In the case of tests that use the framework and database, we can not run them all the time, it is a long time.  And if we write a lot of tests we will have to play mortal combat, in the process of their implementation.  Of course, this will affect the effectiveness of development.  We cannot optimize the process of filling the database only once at the start of tests - the tests must be independent of each other. <br><br>  However, we have another problem.  Tests are performed quickly, but what happened to the code?  Simplicity and readability is clearly not increased, especially in the test.  The test does not cover all use cases, you need to write a few more tests in the same verbose style.  And there is one very dangerous factor to which attention should be paid first of all: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span></code> </pre><br>  In order to be able to dunk <i>getUser</i> and <i>getWebUserComponent,</i> we had to use <i>protected</i> scope.  We went to a violation of encapsulation. <br><br><img src="https://habrastorage.org/files/245/637/1eb/2456371eb092490182c948ab7c982079.jpg"><br><br>  We wanted to show that fast tests lead to a good architecture, but it turned out that we broke encapsulation, reduced the readability of the code and thus made it harder.  Why did we come to this result?  We wrote tests after writing the code, and we believed that tests should have nothing to do with what happens inside <i>LoginForm</i> . <br><br>  If we want to have quick tests along with excellent readability of the code, we must be guided by the principle: <b>tests are important</b> .  Let's try to start again, using this principle. <br><br>  First of all, let's throw out all the code and write a test.  My task: to authorize a user, if the login or password entered by him is correct.  I think for a start I need a test validating data. <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testSuccessValidation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $loginForm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoginForm([ <span class="hljs-string"><span class="hljs-string">'username'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'User'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'CorrectPassword'</span></span> ]); expect(<span class="hljs-string"><span class="hljs-string">'Validation should be success'</span></span>, $loginForm-&gt;validate())-&gt;true(); }</code> </pre><br>  There is no password verification code, validation simply returns <i>true</i> .  Now I need a test that will determine that the password is incorrect. <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testFailedValidation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $loginForm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoginForm([ <span class="hljs-string"><span class="hljs-string">'username'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'User'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'INCORRECT-Password'</span></span> ]); expect(<span class="hljs-string"><span class="hljs-string">'Validation should be failed'</span></span>, $loginForm-&gt;validate())-&gt;false(); }</code> </pre><br>  The last test falls, time to implement a password check.  To do this, I need to get the user by <i>username</i> from the database and compare the password. <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testGetUserByUsername</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $userMock = \Mockery::mock(User::className()) -&gt;shouldReceive(<span class="hljs-string"><span class="hljs-string">'findByUsername'</span></span>)-&gt;once()-&gt;andReturn(\Mockery::self())-&gt;getMock(); $userName = <span class="hljs-string"><span class="hljs-string">'User'</span></span>; $loginForm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoginForm($userMock, [ <span class="hljs-string"><span class="hljs-string">'username'</span></span> =&gt; $userName ]); expect(<span class="hljs-string"><span class="hljs-string">'getUser method should return User'</span></span>, $loginForm-&gt;getUser() <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> User)-&gt;true(); $userMock-&gt;shouldHaveReceived(<span class="hljs-string"><span class="hljs-string">'findByUsername'</span></span>, [$userName]); }</code> </pre><br>  The logic already appears in the model: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \common\models\User $user * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> array $config */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(User $user, $config = [])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user = $user; <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__construct($config); } <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> \common\models\User * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@throws</span></span></span><span class="hljs-comment"> \yii\base\Exception */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $user = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;findByUsername(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;username); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$user) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span>(<span class="hljs-string"><span class="hljs-string">'    '</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $user; }</code> </pre><br>  Now we can pay attention to three points: <br><br><ul><li>  <i>getUser</i> public. </li><li>  <i>getUser</i> does not call the static method of the <i>User</i> class, but uses the object obtained as a dependency. </li><li>  We do not get the user from the database, we only check that the method <i>findByUsername</i> with the argument <i>$ this-&gt; username</i> was called and the result of executing this method was returned. </li></ul><br>  Why <i>does getUser</i> have public scope?  Because tests are important.  Maybe it's better to hide the receipt of the user in the <i>LoginForm</i> ?  If, as in the first example, we leave only one public <i>login</i> method, we will test the correctness of the <i>getUser</i> method through this method.  Only here we get the same complex test code as in the first example with mocks.  Why in one case the expansion of the scope is a violation of encapsulation, but not in the other?  Now we are testing this particular public method, we immediately made it public, since we need it for the test.  A violation of encapsulation occurred when we gave the test knowledge, which the interface did not initially intended for it, in an attempt to speed it up.  Such a problem does not arise if you write tests before implementation. <br><br>  Encapsulation is important, but readability of tests and code is more important.  You may get the impression that for the sake of tests, you must open all the methods so that they can be conveniently tested, but you will fail.  There will always be places in the code whose enhanced visibility is not needed for testing.  Tests should be considered as full client code.  Also, as if the controller needs access to the method and you open it, you must also open visibility for the test.  Tests are a complete part of your application, they are subject to the same quality standards and the right requirements of the necessary methods for their work. <br><br>  Why do we create and pass a <i>User</i> object to the constructor, although we only need a static class method?  In order to be able to soak it.  Is it bold for <i>LoginForm</i> ?  Not.  Tests are important.  Plus, we have the Depency Injection pattern at our disposal. <br><br>  Why we do not check that we really got the user from the <i>findByUsername</i> method, but only the fact of his calling  The correctness of the <i>findByUsername</i> operation has <i>been</i> tested by another integration test, which requires a database.  We now need to be sure that the required parameter was passed to <i>findByUsername</i> , and the <i>getUser</i> function will return the result of executing this method. <br><br>  Add a password verification test, and change other tests of compliance with the new code: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testSuccessValidation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $userMock = \Mockery::mock(User::className()) -&gt;shouldReceive(<span class="hljs-string"><span class="hljs-string">'validatePassword'</span></span>)-&gt;once()-&gt;andReturn(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)-&gt;getMock() -&gt;shouldReceive(<span class="hljs-string"><span class="hljs-string">'findByUsername'</span></span>)-&gt;once()-&gt;andReturn(\Mockery::self())-&gt;getMock(); $loginForm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoginForm($userMock, [ <span class="hljs-string"><span class="hljs-string">'username'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'User'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'CorrectPassword'</span></span> ]); expect(<span class="hljs-string"><span class="hljs-string">'Validation should be success'</span></span>, $loginForm-&gt;validate())-&gt;true(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testFailedValidation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $userMock = \Mockery::mock(User::className()) -&gt;shouldReceive(<span class="hljs-string"><span class="hljs-string">'validatePassword'</span></span>)-&gt;once()-&gt;andReturn(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>)-&gt;getMock() -&gt;shouldReceive(<span class="hljs-string"><span class="hljs-string">'findByUsername'</span></span>)-&gt;once()-&gt;andReturn(\Mockery::self())-&gt;getMock(); $loginForm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoginForm($userMock, [ <span class="hljs-string"><span class="hljs-string">'username'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'User'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'INCORRECT-Password'</span></span> ]); expect(<span class="hljs-string"><span class="hljs-string">'Validation should be failed'</span></span>, $loginForm-&gt;validate())-&gt;false(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testGetUserByUsername</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $userMock = \Mockery::mock(User::className()) -&gt;shouldReceive(<span class="hljs-string"><span class="hljs-string">'findByUsername'</span></span>)-&gt;once()-&gt;andReturn(\Mockery::self())-&gt;getMock(); $userName = <span class="hljs-string"><span class="hljs-string">'User'</span></span>; $loginForm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoginForm($userMock, [ <span class="hljs-string"><span class="hljs-string">'username'</span></span> =&gt; $userName ]); expect(<span class="hljs-string"><span class="hljs-string">'getUser method should return User'</span></span>, $loginForm-&gt;getUser() <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> User)-&gt;true(); $userMock-&gt;shouldHaveReceived(<span class="hljs-string"><span class="hljs-string">'findByUsername'</span></span>, [$userName]); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testValidatePassword</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $userMock = \Mockery::mock(User::className()) -&gt;shouldReceive(<span class="hljs-string"><span class="hljs-string">'validatePassword'</span></span>)-&gt;once()-&gt;andReturn(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)-&gt;getMock() -&gt;shouldReceive(<span class="hljs-string"><span class="hljs-string">'findByUsername'</span></span>)-&gt;once()-&gt;andReturn(\Mockery::self())-&gt;getMock(); $password = <span class="hljs-string"><span class="hljs-string">'RightPassword'</span></span>; $loginForm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoginForm($userMock, [ <span class="hljs-string"><span class="hljs-string">'password'</span></span> =&gt; $password ]); $loginForm-&gt;validatePassword(<span class="hljs-string"><span class="hljs-string">'password'</span></span>); expect(<span class="hljs-string"><span class="hljs-string">'validate password should be success'</span></span>, $loginForm-&gt;getErrors())-&gt;isEmpty(); $userMock-&gt;shouldHaveReceived(<span class="hljs-string"><span class="hljs-string">'validatePassword'</span></span>, [$password]); }</code> </pre><br>  The model now looks like this: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \common\models\User $user * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> array $config */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(User $user, $config = [])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user = $user; <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__construct($config); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rules</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ [[<span class="hljs-string"><span class="hljs-string">'username'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span>], <span class="hljs-string"><span class="hljs-string">'required'</span></span>], [<span class="hljs-string"><span class="hljs-string">'password'</span></span>, <span class="hljs-string"><span class="hljs-string">'validatePassword'</span></span>] ]; } <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> string $attribute */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">validatePassword</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($attribute)</span></span></span><span class="hljs-function"> </span></span>{ $user = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getUser(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$user-&gt;validatePassword(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;$attribute)) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;addError($attribute, <span class="hljs-string"><span class="hljs-string">'Incorrect password.'</span></span>); } } <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> \common\models\User * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@throws</span></span></span><span class="hljs-comment"> \yii\base\Exception */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $user = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;user-&gt;findByUsername(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;username); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$user) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span>(<span class="hljs-string"><span class="hljs-string">'    '</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $user; }</code> </pre><br>  Inside the <i>$ user-&gt; validatePassword</i> method there is a call to the framework, and this code should be covered by an integration test.  To determine that the method is called with the necessary parameters, we do not need its implementation, and we wet it.  Now our class is completely covered with tests, it remains only to implement the authorization. <br><br>  Test: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testLogin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $userComponentMock = \Mockery::mock(\yii\web\User::className()) -&gt;shouldReceive(<span class="hljs-string"><span class="hljs-string">'login'</span></span>)-&gt;once()-&gt;andReturn(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)-&gt;getMock(); Yii::$app-&gt;set(<span class="hljs-string"><span class="hljs-string">'user'</span></span>, $userComponentMock); $userMock = \Mockery::mock(User::className()) -&gt;shouldReceive(<span class="hljs-string"><span class="hljs-string">'findByUsername'</span></span>)-&gt;once()-&gt;andReturn(\Mockery::self())-&gt;getMock(); $loginForm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoginForm($userMock); expect(<span class="hljs-string"><span class="hljs-string">'login should be success'</span></span>, $loginForm-&gt;login())-&gt;true(); $userComponentMock-&gt;shouldHaveReceived(<span class="hljs-string"><span class="hljs-string">'login'</span></span>, [$userMock]); }</code> </pre><br><br>  In the model: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> bool */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Yii::$app-&gt;user-&gt;login(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getUser()); }</code> </pre><br>  This test is an integration test and it is separate from the unit tests.  Here it‚Äôs quite a controversial point whether the service locator in the <i>LoginForm</i> class is <i>valid</i> .  On the one hand, it does not interfere with the tests, in any case, we would have to test the fact of authorization.  On the other hand, our model is now less reusable.  I think that this is the most obvious place after the controller, so while there is no additional logic, this code should be in the controller for good. <br><br>  Result: <br><br><pre> <code class="bash hljs">$ codecept run Codeception PHP Testing Framework v2.1.2 Powered by PHPUnit 4.8.10-5-g4ecd63c by Sebastian Bergmann and contributors. Tests\codeception\common.unit Tests (5) --------------------------------------------------------------------------------- Test login (LoginFormTest::testLogin) Ok Test success validation (LoginFormTestWithoutDbTest::testSuccessValidation) Ok Test failed validation (LoginFormTestWithoutDbTest::testFailedValidation) Ok Test get user by username (LoginFormTestWithoutDbTest::testGetUserByUsername) Ok Test validate password (LoginFormTestWithoutDbTest::testValidatePassword) Ok --------------------------------------------------------------------------------- Time: 973 ms, Memory: 10.50Mb OK (5 tests, 5 assertions)</code> </pre><br>  The result is the x10 number of all 5 tests: <br><br><pre> <code class="bash hljs">Time: 1.62 seconds, Memory: 15.75Mb OK (50 tests, 50 assertions)</code> </pre><br>  Using moki and sharing the logic of working with the database, framework and regular classes, we were able to significantly reduce the test time.  Of course, the tests that verify the correctness of working with the database have not gone away, they will need to be implemented.  But they should be separated from unit tests and test only methods that interact with the database.  Their launch will be necessary only when the logic of working with the database changes. <br><br>  A question may arise, is it worth it?  At the very beginning we had a small method and a small test.  The code was simple and readable.  Now we got a large number of tests, a bunch of mocks and a dependency in the constructor.  All in order to quickly test password validation and authorization.  The answer depends on the duration of the development and support of the web application. <br><br>  If you are working alone on a small project, you will only need a minimum set of the most simple tests that you will write simply because you will write code faster with them.  If you know that you will conduct development and support for a long time, carefully assess the situation.  You are unlikely to rewrite the tests and the time won at first you will give with interest in the process of maintaining the code with slow tests. <br><br>  In case more than one programmer works on a project, the answer is obvious.  The slow test will take not only your time, but also the time of each team member.  You should make every effort to make your tests as fast as possible. <br><br><h5>  Conclusion: </h5><br><ul><li>  Tests must be written before writing code.  This will allow to naturally separate the methods that require external dependencies from the methods that can be tested independently. </li><li>  Tests that do not require a database and the framework work very quickly.  This allows you to write a lot of tests and run them all the time. </li><li>  Tests are a full part of the application and they are subject to the same quality standards and the right to access the methods they need. </li><li>  It is necessary to separate tests from the database and the framework if code is developed that will be supported for a long time, and also if more than one programmer works on the project. </li></ul><br><h5>  Resources recommended for review: </h5><br>  <a href="http://blog.8thlight.com/uncle-bob/archive.html">Robert C. Martin blog</a> <br>  <a href="http://butunclebob.com/ArticleS.UncleBob.TheThreeRulesOfTdd">Robert C. Martin: The Three Rules Of Tdd</a> <br>  <a href="http://blog.8thlight.com/uncle-bob/2015/06/30/the-little-singleton.html">Robert C. Martin: The little singleton</a> <br>  <a href="http://blog.8thlight.com/uncle-bob/2014/05/14/TheLittleMocker.html">Robert C. Martin: The little mocker</a> <br>  <a href="http://butunclebob.com/ArticleS.UncleBob.TheNextBigThing">Robert C. Martin: The Next Big Thing</a> <br>  <a href="http://butunclebob.com/ArticleS.UncleBob.JustTenMinutesWithoutAtest">Robert C. Martin: Just Ten Minutes Without A test</a> <br><br>  <a href="http://www.jamesshore.com/Agile-Book/test_driven_development.html">Agile Book: Test Driven Development</a> </div><p>Source: <a href="https://habr.com/ru/post/268381/">https://habr.com/ru/post/268381/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../268369/index.html">The secret arrow in the address bar and other surprises in the assembly Vivaldi 1.0.291.18</a></li>
<li><a href="../268371/index.html">DTO vs POCO vs Value Object</a></li>
<li><a href="../268375/index.html">Solving the problem of setting the screen resolution in Thinstation</a></li>
<li><a href="../268377/index.html">How to create a game on Unity3D without a mat</a></li>
<li><a href="../268379/index.html">Three holes in Scratch Mania</a></li>
<li><a href="../268383/index.html">Transfer. I left my system fonts in San Francisco</a></li>
<li><a href="../268387/index.html">New scam: pay Bitcoins to save a hacked phone</a></li>
<li><a href="../268389/index.html">Codebattle: a game for programmers</a></li>
<li><a href="../268395/index.html">Tehnokniga, Part 4: literature on product management, web services development, web project management, business and systems analysis of architects</a></li>
<li><a href="../268397/index.html">How VMware DRS works</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
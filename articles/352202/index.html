<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The book "Head First. Design patterns. Updated anniversary edition ¬ª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the world, someone constantly encounters the same programming problems that you have. Many developers solve completely identical tasks and find sim...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The book "Head First. Design patterns. Updated anniversary edition ¬ª</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/company/piter/blog/352202/"><img src="https://habrastorage.org/webt/ly/4n/sh/ly4nshust75juiwotvtjgoclnjw.jpeg" align="left" alt="image"></a>  In the world, someone constantly encounters the same programming problems that you have.  Many developers solve completely identical tasks and find similar solutions.  If you do not want to reinvent the wheel, use ready-made design patterns (patterns) that this book is dedicated to. <br><br>  Patterns appeared because many developers were looking for ways to increase the flexibility and reuse of their programs.  The solutions found are embodied in a concise and easily applicable form in practice. <br><br>  The peculiarity of this publication is a unique way of presenting the material, highlighting the ‚ÄúHead First‚Äù series of O'Reilly publishing house in a series of many boring books on programming.  Dalle presents the passage ‚ÄúSimplifying the RemoteControl code with lambda expressions‚Äù <br><a name="habracut"></a><br>  As you have seen, the command pattern is fairly straightforward.  However, the Java language provides a handy tool that allows you to further simplify the code - namely, lambda expressions.  A lambda expression is an abbreviated form of a method record (as a sequence of calculations) at the exact point where it is used.  Instead of creating a separate class with a method, creating an instance of this class, and then calling the method, you simply specify: ‚ÄúThis is the method you want to call‚Äù with the help of a lambda expression.  In our case, the execute () method should be called. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To understand how this is done, replace the LightOnCommand and LightOffCommand objects. <br>  lambda expressions.  Perform the following steps so that the light on / off commands are implemented by lambda expressions instead of command objects: <br><br>  <b>Step 1. Create a receiver</b> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ek/wn/6z/ekwn6z596b_146k_mwycrevfrzk.png" alt="image"></div><br>  <b>Step 2. Implementing remote control commands using lambda expressions</b> <br><br>  This is where all the fun happens.  Now, instead of creating LightOnCommand and LightOffCommand objects for passing to remoteControl.setCommand (), we simply pass instead of each object a lambda expression with code from the corresponding execute () method: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4y/if/oz/4yifozshglworgxk4xzkw5m43fa.png" alt="image"></div><br>  <b>Step 3. Activating the buttons</b> <br><br>  This step also has not changed - except for the fact that when the onButtonWasPushed (0) method was called, the command in slot 0 is represented by a function object (created using lambda expressions).  When we call execute () for a command, this method is mapped to a method defined by a lambda expression, which is then executed. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cb/vv/lr/cbvvlrb09erddvwszssovp5nqhg.png" alt="image"></div><br>  We use lambda expressions to replace Command objects, and the Command interface contains just one method: execute ().  The lambda expression we use must have a compatible signature ‚Äî it is: the execute () method takes no arguments (like our lambda expression) and does not return values ‚Äã‚Äã(like our lambda expression).  The compiler is happy with everything.  The lambda expression is passed in the Command parameter of the setCommand () method: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2o/0d/bc/2o0dbcurskebrnhrwa24wjlgnjw.png" alt="image"></div><br>  Remember: if the parameter interface in which the lambda expression is passed contains one (and only one!) Method, and the signature of this method is compatible with the signature of the lambda expression, everything will work as it should. <br><br><h3>  References to methods </h3><br>  To further simplify the code, you can use the links to the methods.  If the passed lambda expression calls just one method, instead of the lambda expression, you can <br>  pass method reference.  This is done like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uj/x8/c5/ujx8c5ehdtlfc98y6caawddafk4.png" alt="image"></div><br>  Instead of passing a lambda expression that calls the object's on () method <br>  livingRoomLight, we pass the link to the method itself. <br><br>  <b>But what if a lambda expression has to perform several operations at once?</b> <br><br>  Sometimes lambda expressions used to replace Command objects are not limited to a single operation.  Let's see how to replace stereoOnWithCDCommand objects and <br>  stereoOffCommand lambda expressions.  Next will be the complete RemoteLoader code, so that you understand how all these ideas fit together. <br><br>  The stereoOffCommand object executes just one simple command: <br><br><pre><code class="hljs pgsql">stereo.<span class="hljs-keyword"><span class="hljs-keyword">off</span></span>();</code> </pre> <br>  For this command, instead of a lambda expression, you can use the link to the stereo :: off method. <br>  But stereoOnWithCDCommand performs not one, but three operations: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">stereo</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.on</span></span>(); <span class="hljs-selector-tag"><span class="hljs-selector-tag">stereo</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setCD</span></span>(); <span class="hljs-selector-tag"><span class="hljs-selector-tag">stereo</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setVolume</span></span>(11);</code> </pre> <br>  In this case, the use of the method reference will fail.  Instead, you will have to either write the lambda expression in the built-in view, or create it separately, assign a name, and then transfer it to the setCommand () method of the remoteControl object by name.  Creation option <br>  A separate lambda expression and assigning it a name looks like this: <br><br><pre> <code class="hljs coffeescript">Command stereoOnWithCD = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> -&gt;</span></span> { stereo.<span class="hljs-literal"><span class="hljs-literal">on</span></span>(); stereo.setCD(); stereo.setVolume(<span class="hljs-number"><span class="hljs-number">11</span></span>); }; remoteControl.setCommand(<span class="hljs-number"><span class="hljs-number">3</span></span>, stereoOnWithCD, stereo::<span class="hljs-literal"><span class="hljs-literal">off</span></span>);</code> </pre> <br>  Note: Command is used as a lambda expression type.  Lambda expression <br>  is mapped to the execute () method of the Command interface and with the Command parameter in which <br>  It is passed to the setCommand () method. <br><br><h3>  Test drive commands using lambda expressions </h3><br>  To use lambda expressions to simplify source code implementation <br>  RemoteControl (without cancel), we will change the RemoteLoader code and replace specific objects <br>  Command lambda expressions.  You also need to change the RemoteControl constructor. <br>  to use lambda expressions instead of a NoCommand object.  After that you can <br>  but remove all specific Command classes (LightOnCommand, LightOffCommand, <br>  HottubOnCommand, HottubOffCommand, etc.).  That's all!  Everything else remains the same <br>  by him.  Do not accidentally delete the Command interface;  it is necessary for type matching <br>  function objects created by lambda expressions that are stored in the object <br>  remote and transmitted to various methods. <br><br>  The new code for the RemoteLoader class looks like this: <br><br><pre> <code class="hljs php"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RemoteLoader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> void main(String[] args) { RemoteControl remoteControl = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RemoteControl(); Light livingRoomLight = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Light(<span class="hljs-string"><span class="hljs-string">"Living Room"</span></span>); Light kitchenLight = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Light(<span class="hljs-string"><span class="hljs-string">"Kitchen"</span></span>); CeilingFan ceilingFan = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CeilingFan(<span class="hljs-string"><span class="hljs-string">"Living Room"</span></span>); GarageDoor garageDoor = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GarageDoor(<span class="hljs-string"><span class="hljs-string">"Main house"</span></span>); Stereo stereo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stereo(<span class="hljs-string"><span class="hljs-string">"Living Room"</span></span>);       Command (   ).      (  <span class="hljs-number"><span class="hljs-number">22</span></span>    <span class="hljs-number"><span class="hljs-number">9</span></span>). remoteControl.setCommand(<span class="hljs-number"><span class="hljs-number">0</span></span>, livingRoomLight::on, livingRoomLight::off); remoteControl.setCommand(<span class="hljs-number"><span class="hljs-number">1</span></span>, kitchenLight::on, kitchenLight::off); remoteControl.setCommand(<span class="hljs-number"><span class="hljs-number">2</span></span>, ceilingFan::high, ceilingFan::off); Command stereoOnWithCD = () -&gt; { stereo.on(); stereo.setCD(); stereo.setVolume(<span class="hljs-number"><span class="hljs-number">11</span></span>); }; remoteControl.setCommand(<span class="hljs-number"><span class="hljs-number">3</span></span>, stereoOnWithCD, stereo::off); remoteControl.setCommand(<span class="hljs-number"><span class="hljs-number">4</span></span>, garageDoor::up, garageDoor::down);      ,       ,   - ,     .(       -.       ;    ‚Äî     -,     .) System.out.println(remoteControl); remoteControl.onButtonWasPushed(<span class="hljs-number"><span class="hljs-number">0</span></span>); remoteControl.offButtonWasPushed(<span class="hljs-number"><span class="hljs-number">0</span></span>); remoteControl.onButtonWasPushed(<span class="hljs-number"><span class="hljs-number">1</span></span>); remoteControl.offButtonWasPushed(<span class="hljs-number"><span class="hljs-number">1</span></span>); remoteControl.onButtonWasPushed(<span class="hljs-number"><span class="hljs-number">2</span></span>); remoteControl.offButtonWasPushed(<span class="hljs-number"><span class="hljs-number">2</span></span>); remoteControl.onButtonWasPushed(<span class="hljs-number"><span class="hljs-number">3</span></span>); remoteControl.offButtonWasPushed(<span class="hljs-number"><span class="hljs-number">3</span></span>);</code> </pre> <br>  And do not forget: we must change the RemoteControl constructor, remove the NoCommand object construction code from it, and replace it with lambda expressions. <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">RemoteControl</span></span> { Command[] onCommands; Command[] offCommands; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RemoteControl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { onCommands = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Command[<span class="hljs-number"><span class="hljs-number">7</span></span>]; offCommands = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Command[<span class="hljs-number"><span class="hljs-number">7</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">7</span></span>; i++) { onCommands[i] = () -&gt; { }; offCommands[i] = () -&gt; { }; } } <span class="hljs-comment"><span class="hljs-comment">//   }</span></span></code> </pre> <br>  <b>And now let's check the results of all these commands with lambda expressions ...</b> <br><br><img src="https://habrastorage.org/webt/sn/3h/t9/sn3ht9ktuegvicfsrziezbzsi8e.png" alt="image"><br><br>  ¬ªMore information about the book can be found on <a href="https://www.piter.com/collection/recommend/product/head-first-patterny-proektirovaniya-obnovlennoe-yubileynoe-izdanie">the publisher's website.</a> <br>  ¬ª <a href="https://storage.piter.com/upload/contents/978549603210/978549603210_X.pdf">Table of Contents</a> <br>  ¬ª <a href="https://storage.piter.com/upload/contents/978549603210/978549603210_p.pdf">Excerpt</a> <br><br>  For Habrozhiteley 20% coupon discount - <b>Head First</b> </div><p>Source: <a href="https://habr.com/ru/post/352202/">https://habr.com/ru/post/352202/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../352192/index.html">How to become a GPU engineer in an hour</a></li>
<li><a href="../352194/index.html">How to grow from a junior tester into a good tester? Continuation</a></li>
<li><a href="../352196/index.html">Comparison of ITSM-systems</a></li>
<li><a href="../352198/index.html">Classes and factory functions in javascript. What to choose?</a></li>
<li><a href="../352200/index.html">How to turn a website into a mobile application using 7 lines of JSON</a></li>
<li><a href="../352206/index.html">Release of PVS-Studio for macOS: 64 weaknesses in Apple XNU Kernel</a></li>
<li><a href="../352208/index.html">How to perform many UI tests in parallel using Selenium Grid?</a></li>
<li><a href="../352210/index.html">Automation in the development of the platform "1C: Enterprise"</a></li>
<li><a href="../352212/index.html">Gaijin Engineer in Tokyo</a></li>
<li><a href="../352214/index.html">Unblock Hackathon Registration Open April 6-8</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
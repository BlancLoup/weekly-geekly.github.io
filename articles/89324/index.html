<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to quickly install and start experimenting with Cassandra</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cassandra - a distributed database based on the ideas of Dynamo and Google Big Table 

 Overview of the main features: 


- Tested in use (used on Fac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to quickly install and start experimenting with Cassandra</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://cassandra.apache.org/"><img src="https://habrastorage.org/getpro/habr/post_images/c2f/cf7/1e7/c2fcf71e73abe86a91c854a6dc60efb1.png" alt="image"></a> <br><br>  <a href="http://cassandra.apache.org/">Cassandra</a> - a distributed database based on the ideas of <a href="http://www.allthingsdistributed.com/2007/10/amazons_dynamo.html">Dynamo</a> and <a href="http://labs.google.com/papers/bigtable.html">Google Big Table</a> <br><br>  Overview of the main features: <br><ul><li>  Tested in use (used on Facebook, Twitter, Digg and others) </li><li>  Failsafe (each record is duplicated on several nodes in the cluster) </li><li>  Decentralized (all nodes in the cluster are equivalent) </li><li>  Flexible data model </li><li>  The read and write throughput increases linearly with the addition of new nodes. </li><li>  Dimensionless (no limit on volume, search is always O (1)) </li></ul><br><a name="habracut"></a><br><h3>  Preparing to install </h3><br>  It is convenient to begin acquaintance with Cassandra with ruby, I assume that you have it installed.  Now we install the eponymous ruby ‚Äã‚Äãgem, which will simplify the assembly of Cassandra 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>  sudo gem install cassandra --source http://gemcutter.org </pre><br>  Together with other gems, thrift will also be established for you (roughly speaking, it is an intermediary between different languages). <br>  In cassandra-gem there are convenient rake tasks that will quickly help you build the latest version of cassandra, but they are not available to the system as a whole, but only inside the cassandra-gem folder.  To quickly access it, I made a link to my home directory: <br><br> <code>ln -s /usr/lib/ruby/gems/1.8/gems/cassandra-0.8.0/ ~/cassandra_gem</code> <br> <br>  You can see where the installed gems are located using the <code>gem environment</code> command, in my case this is /usr/lib/ruby/gems/1.8.  Go to the <code>cd cassandra_gem</code> directory, and here I recommend to get acquainted with the list of everything that can be done using rake: <code>rake -T</code> .  Perhaps here you will need to install another gem echoe. <br><br><h3>  Install cassandra </h3><br>  Now we will collect a database.  You can do this with the command <br><br> <code>rake cassandra</code> <br> <br>  Here I had some incident that ended in error. <br><br> <code>tar xzf apache-cassandra-0.6.0-beta2-bin.tar.gz <br> tar: apache-cassandra-0.6.0-beta2-bin.tar.gz: Cannot open: No such file or directory <br></code> <br>  This usually should not be, but a new beta3 version of cassandra has been released, and the gem has not yet been updated, so it is trying to download beta2, which is no longer there.  In general, this will be quickly corrected, but if you stumbled upon this, then <a href="">you can download beta2</a> for this version of gem (0.8).  Next we create the folder cassandra in the home directory and move the downloaded file apache-cassandra-0.6.0-beta2-bin.tar.gz there.  Run the command again: <br><br> <code>rake cassandra</code> <br> <br>  To build cassandra, you need ant and ivy-retrieve.  Just in case, I copied my compilation output, which can be viewed <a href="http://gist.github.com/348487">here</a> .  It will automatically start the database, but first you need to configure the paths for storing data, otherwise it will not work.  Default paths require superuser privileges. <br><br><h3>  Configuring configuration files </h3><br>  Create folders for data storage: <br><br> <code>cd ~ <br> mkdir cassandra_data <br> cd !$ <br> mkdir bootstrap callouts commitlog data staging <br> touch system.log <br></code> <br>  Configuration files are stored in two directories: ~ / cassandra / server / conf and ~ / cassandra_gem / conf.  Since we are going to run cassandra using gem, the configuration files are loaded from there, therefore, they need to be edited. <br><br>  Change the logger'a settings: <br><br> <code>sudo gedit ~/cassandra_gem/conf/log4j.properties</code> <br> <br>  Row <br> <code>log4j.appender.R.File=data/logs/system.log</code> <br>  replace with <br> <code>log4j.appender.R.File=~/cassandra_data/logs/system.log</code> <br>  In production, this logger is disabled. <br><br>  Configuring storage-conf.xml: <br><br>  Modify the Directories section in the same way (use absolute paths).  Now Cassandra should start successfully. <br><br><h3>  Setting the data structure </h3><br>  The data structure is also defined in storage-conf.xml. <br><br>  For understanding, we will use terminology from relational databases.  Roughly speaking, the data structure in Cassandra is a hash. <br><br>  Keyspaces - a list of all databases <br>  Keyspace - a database that contains tables <br>  ColumnFamily - a table with the ability to create "columns" online <br>  CompareWith specifies how keys are organized.  Usually they are sorted alphabetically (CompareWith = "UTF8Type") or by time (CompareWith = "TimeUUIDType") <br><br>  ColumnFamily can be of two types: regular and Super.  Super means that each column stores any number of other columns.  This type is suitable for the model when the post contains a lot of comments.  Naturally, in the SuperColumn, you can organize both the keys themselves and other sub-columns (CompareSubcolumnsWith).  For example, we want comments to be ordered by time, then CompareSubcolumnsWith = "TimeUUIDType". <br><br>  Sooner or later you will come across a term such as consistency level.  This is a kind of trust in the system, that is, if during the recording you want to wait until cassandra writes data to several nodes (this is configured), then the consistency level should be as high as possible.  If you just need to wait for the recording on at least one machine, then set 1. The level of the value 0 - send the data to the recording and forget, without waiting for it to be recorded.  The latter, of course, the fastest, the first - the longest.  Usually in production put 0. <br><br><h3>  Attempt at writing </h3><br>  By default, several Keyspaces (Twitter, Multiblog, MultiblogLong, maybe CassandraObject) are configured in storage-conf, which we will use.  Go to the ruby ‚Äã‚Äãconsole using the irb command: <br><br><pre> irb (main): 001: 0&gt; require 'cassandra'
 =&gt; true

 irb (main): 002: 0&gt; client = Cassandra.new 'Twitter', 'localhost: 9160'
 =&gt; # &lt;Cassandra: 69944556734180, @ keyspace = "Twitter", @ schema = {}, @servers = ["localhost: 9160"]&gt;

 irb (main): 003: 0&gt; client.insert: Users, 'user_name@web.com', {'screen_name' =&gt; 'Suvo'}
 =&gt; nil

 irb (main): 004: 0&gt; suvo = client.get: Users, 'user_name@web.com'
 =&gt; # &lt;OrderedHash {"screen_name" =&gt; "Suvo"}&gt;

 irb (main): 005: 0&gt; suvo ['screen_name']
 =&gt; "Suvo"
</pre><br><br>  <code>user_name@web.com</code> has a key. <br>  I note that the client.insert command does not return anything.  Writing to Cassandra is always successful.  Now let's try to update the record and add another field: <br><br><pre> irb (main): 006: 0&gt; client.insert: Users, 'user_name@web.com', {'status' =&gt; 'Hello world!'}
 =&gt; nil

 irb (main): 007: 0&gt; client.get: Users, 'user_name@web.com'
 =&gt; # &lt;OrderedHash {"status" =&gt; "Hello world!", "Screen_name" =&gt; "Suvo"}&gt;
</pre><br><br>  Another important query (besides get and insert) that is available to you is slice_range.  Using this query, you can get values ‚Äã‚Äãin a specific key range. <br><br>  So, we succeeded (I hope) to install cassandra, write and read test data. <br><br>  Next, I would like to share with you what may be disappointing in Cassandra, what has been done and what I have done for Cassandra in Ruby on Rails, but the article did not fit completely.  You can continue reading in <a href="http://suvo.habrahabr.ru/blog/89465/">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/89324/">https://habr.com/ru/post/89324/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../89315/index.html">CanVG: drawing SVG files to canvas</a></li>
<li><a href="../89316/index.html">Clear even without translation</a></li>
<li><a href="../89319/index.html">How to make a good photo of a glossy phone</a></li>
<li><a href="../89321/index.html">EDuke32 - Open Source Duke Nukem 3D Engine</a></li>
<li><a href="../89323/index.html">FictionBook2 Wikipedia Articles</a></li>
<li><a href="../89325/index.html">node.js and SQLite 3 are now friends</a></li>
<li><a href="../89326/index.html">Neocub. Continuing the handgam article</a></li>
<li><a href="../89330/index.html">Robots play football at FIRST Boston</a></li>
<li><a href="../89332/index.html">Rumors about the status of servers on Hosting.UA</a></li>
<li><a href="../89333/index.html">Practical experience in the development of an online store on OpenCart</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
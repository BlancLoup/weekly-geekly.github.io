<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Smart watch do it yourself for 1500 rubles</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This story began with the fact that after reading posts with the DIY tag, I decided to get a set of MK + debug board. Googling found out that the chea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Smart watch do it yourself for 1500 rubles</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/b6f/239/8ac/b6f2398ac095868dfb572ba2a67a3276.jpg" align="right">  This story began with the fact that after reading posts with the DIY tag, I decided to get a set of MK + debug board.  Googling found out that the cheapest motherboard in the city is TI's LaunchPad.  Without hesitation, I went to the store for her, and rushed ... like everyone else first had flashing LEDs, then a display connection from the Siemens CX75, and so on. <br>  Soon I was tired of doing something just like that, without a goal, in order to do something.  So the idea arose to create a gadget for myself, which I would use all the time. <br>  For details, I ask under the cat. <br><a name="habracut"></a><br>  I usually walk down the street in my headphones and I don‚Äôt hear the phone‚Äôs ringing, and a bunch of phone + case + pocket + walking = no vibration is felt.  And I came up with a gadget for myself: an informant about SMS and calls in the form of a watch / bracelet.  Again, the idea is not new, and in the shops a lot of similar stuff, but I wanted, first, to do it myself, and secondly, it still turns out to be cheaper.  The first pancake, as they say, lumpy: <br><img src="https://habrastorage.org/getpro/habr/post_images/103/545/bd1/103545bd18fd52742d26748d456185c9.jpg"><br>  ‚ÄúI don‚Äôt know, my watch doesn‚Äôt show time.‚Äù (C) <br>  The composition is simple: MK, BT, diodes, voltage regulator, vibration motor, battery, case from the old clock.  An application for android was written for it, and a small program for MK.  Miracle beast, which is already 6 months old, which helped me out more than once. <br>  What the program does on android: connect via BT with a clock, send ‚Äú1‚Äù - the connection is passed, we start the service and listen to incoming SMS and calls.  When receiving it, send via BT event ID ‚Äú2‚Äù - SMS, ‚Äú3‚Äù - call. <br>  What does the program on the MK: when receiving a symbol with BT ("1", "2", "3") include a certain sequence of on / off indication and vibration. <br>  Then I didn‚Äôt even think about any energy saving mode, and I also forgot about the fact that the stabilizer is working at voltages of 3.6 - 6 V.  As a result, one battery charge lasts for working days, provided that the "clock" is constantly connected via BT. <br>  About three months ago, I decided to take up this idea thoroughly and add functionality that is not enough: a full clock, display of the name of the caller, text and SMS sender, the possibility of flashing.  I thought there would be a problem with the last one, because the MK is reflashed via the Spy-Bi-Wire interface, and I didn‚Äôt want to pull 3 pins to the body output, but then I read in the datasheet that the MK has a bootstrap Loader (BSL) mode that allows you to flash it through the UART interface . <br><br><h2>  Insides </h2><br>  What I needed from the parts that I had to buy: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d54/3f6/cb3/d543f6cb36761fa24895ebddddd0802c.jpg"><br>  At first I wanted to put the MK in the QFN package, but then refused, and took in the tssop28 ‚Äã‚Äãpackage.  It is easier to breed, as there is still a place under the body. <br><table><tbody><tr><th>  Part Name <br></th><th>  Purpose <br></th><th>  Cost of <br></th></tr><tr><td>  msp430g2553ipw28 <br></td><td>  microcontroller <br></td><td>  60 <br></td></tr><tr><td>  lir3048-lby2 <br></td><td>  battery <br></td><td>  77 <br></td></tr><tr><td>  ds1337u + <br></td><td>  real time clock <br></td><td>  78 <br></td></tr><tr><td>  ADP3338AKCZ-3.3-RL7 <br></td><td>  stabilizer <br></td><td>  124 <br></td></tr><tr><td>  CP2102-GMR <br></td><td>  USB UART <br></td><td>  84 <br></td></tr><tr><td>  MCP73831T_2ACI_OT <br></td><td>  charging li-ion, li-pol <br></td><td>  54 <br></td></tr><tr><td>  HC-06 <br></td><td>  bluetooth <br></td><td>  120 <br></td></tr><tr><td>  LCD nokia 1202 <br></td><td>  screen <br></td><td>  33 <br></td></tr></tbody></table><br>  Total: 630r. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      All parts were bought in the city, except for BT - it was ordered from China, if you buy in the city, you can find it for 350r. <br>  The rest: mini usb, buttons, vibration motor taken from the old communicator;  quartz and passivation were found in the bins of the motherland.  If you buy this small things, it will cost 300 rubles on the strength. <br><br>  Details have what next?  Further the model was going to and the program for MK was written.  Having rejected Energia, I switched to CCS 5.3 free version with code restriction of 16kb, which is quite enough, considering the memory size of the MK (16kb).  In MK involved: 2 timers and WDT + in the mode of interval timer, HW I2C, ADC10, BSL, FLASH.  Special attention was paid to the consumption of the device.  As a result, 30 mA at full load (BT is not connected, MK is in normal mode, the backlight is at maximum), 8 mA in standby (BT is connected, MK is in low consumption mode, backlight is off) and less than 1 mA in clock mode only (BT is off , MK in low consumption mode, the backlight is turned off).  The capacity of the battery is 200mA, so one charge is enough for a day or more.  Simultaneously with the programming of the MK, the program for android was being finalized, namely: when an incoming call, the phonebook matches the number, and if a match is found, replace the number with the name and send via BT.  And when you receive SMS, we also send the text of the message. <br><img src="https://habrastorage.org/getpro/habr/post_images/933/1ee/b11/9331eeb11bae01fe9f83d66ed9412de1.jpg"><br><br><h2>  Pay </h2><br>  After writing the program and checking the viability of the assembled model, I proceeded to wiring the board, etching, tinning and soldering. <br><ol><li><img src="https://habrastorage.org/getpro/habr/post_images/52c/909/143/52c909143a8bee89452df53bd9016a41.jpg"></li><li><img src="https://habrastorage.org/getpro/habr/post_images/a54/b72/675/a54b726756b8bf29268ab8354616487f.jpg"></li><li><img src="https://habrastorage.org/getpro/habr/post_images/cfe/3bd/d45/cfe3bdd45264ea45045a2bbdf5a7181b.jpg"></li><li><img src="https://habrastorage.org/getpro/habr/post_images/70f/de7/881/70fde7881973345b6a021c5513129434.jpg"></li><li><img src="https://habrastorage.org/getpro/habr/post_images/27f/da0/1de/27fda01ded87760ab9126efbf12ee88c.jpg"></li><li><img src="https://habrastorage.org/getpro/habr/post_images/e8d/66b/d35/e8d66bd35b9e734838f65cd21bc4fc03.jpg"></li><li><img src="https://habrastorage.org/getpro/habr/post_images/2b4/230/a4f/2b4230a4f672207734a01e7424eedf6c.jpg"></li></ol><br>  The entire board took 6 jumpers, 5 capacitors, 8 resistors, 1 LED.  Turn on ... works! <br><br><h2>  Housing </h2><br>  Perhaps it was the most difficult.  Dremel, plexiglas, dichloroethane, goi paste: hellish mixture ... I will not particularly describe the process of making the case (and I forgot to make a photo).  2 layers of 6mm plexiglass on the bottom of the case and 2mm plexiglass and protective glass screen from the old fotik on the top.  In the process of turning the case, the question arose of attaching the watch to the arm, the usual watch straps would be too steamed with their fastening mechanisms, so I bought one for 350r .: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/75d/51e/0ea/75d51e0ea0f830872ecc886f08a827b7.jpg"><br><br>  A couple of through holes in the case and the strap mount is ready.  The case turned out really not very good, but it does not affect the functionality of the clock and fully performs its functions. <br><br>  Here is a video of work: <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/-SJ_jwznpwM%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700190,15700253,15700259&amp;usg=ALkJrhi8uF2NouSLRm9MEZxWlp8gn-EBrQ" frameborder="0" allowfullscreen=""></iframe><br><br>  And finally, I'll sign for all the functionality of my watch: <br><ul><li>  display date and time as the main function; </li><li>  update the date and time from the phone; </li><li>  manual date and time change; </li><li>  BT connection to Android phone; </li><li>  BT power loss in case of loss of connection to save battery power; </li><li>  battery charge display; </li><li>  informing about incoming SMS with text output and the name of the sender on the screen; </li><li>  informing about an incoming call with the display of the name of the caller on the screen; </li><li>  display of text typed in the program field on android; </li><li>  changing screen settings (brightness and backlight off time, screen contrast); </li><li>  the possibility of flashing the device. </li></ul><br>  TOTAL: For 1500 wooden and 3 months of work in the free from work and study time from idea to realization. <br><br><h2>  Conclusion </h2><br>  While I was busy with this watch, I had a suspicion that a similar article would be published on Habr√©, but somehow it had passed. <br>  I wear a watch for a week, sometimes correcting software glitches and shortcomings.  Recently added the ability to reset an incoming call. <br><br>  I hope this post will inspire you to do something useful. <br><br>  PS I look forward to questions and comments! <br><br>  <a href="http://habrahabr.ru/post/218645/">Part 2 - Board and Components</a> </div><p>Source: <a href="https://habr.com/ru/post/218495/">https://habr.com/ru/post/218495/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../218477/index.html">Watching IP-TV from Rostelecom on the computer</a></li>
<li><a href="../218481/index.html">Intl comes to us!</a></li>
<li><a href="../218483/index.html">OpenFOAM for dummies</a></li>
<li><a href="../218485/index.html">Organization of js code for juniors</a></li>
<li><a href="../218489/index.html">About website blocking</a></li>
<li><a href="../218497/index.html">Conditional loading for responsive web design</a></li>
<li><a href="../218499/index.html">The Russian national payment system has all chances to be more successful than the existing ones.</a></li>
<li><a href="../218501/index.html">50 years of mainframe</a></li>
<li><a href="../218505/index.html">Who should I work then, what to do?</a></li>
<li><a href="../218507/index.html">How not to make a "poop"? Personal experience of creating a product</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
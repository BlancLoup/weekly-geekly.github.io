<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to transfer a variable from fragment to activity in Android?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A story about how to transfer information from an Fragment to an Activity in Android. Information will be useful for beginners (Junior), mastering pro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">🔎</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">📜</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">⬆️</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">⬇️</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to transfer a variable from fragment to activity in Android?</h1><div class="post__text post__text-html js-mediator-article"> A story about how to transfer information from an Fragment to an Activity in Android.  Information will be useful for beginners (Junior), mastering programming for Android, and is unlikely to be interesting for middles and seniors. <br><br>  Launch IDE (integrated development environment) <a href="https://developer.android.com/studio/">Android Studio</a> .  Create a new project: File -&gt; New -&gt; New Project.  Select "Empty Activity", click "Next". <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/cg/ke/e2/cgkee2qhgl99tnppykdclbuqm-m.gif"><br><br>  Fill in the fields "Name", "Package name", "Save location". 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/lm/fs/bk/lmfsbkgnztagfar9zebozvr0388.gif"><br><br>  The IDE will automatically create two files: “MainActivity.java” - in the “java / [package name]” directory, and “activity_main.xml” - in the “res / layout” directory. <br><br><img src="https://habrastorage.org/webt/b3/ku/tg/b3kutgfol159_bc6u5wikjyfvg8.jpeg"><br><br><img src="https://habrastorage.org/webt/nq/a5/iq/nqa5iqsksg74xzkkiyo2yhbchzo.jpeg"><br><br>  The java file defines what the application <i><b>does</b></i> , xml - what it <i><b>looks like</b></i> .  It does so far very little, only "setContentView (R.layout.activity_main);".  This line instructs the application to use the “activity_main.xml” layout at startup.  And, since the layout contains only one “TextView” type widget with the text “Hello World!”, Our application also looks very modest. <br><br><img src="https://habrastorage.org/webt/ne/vk/dp/nevkdph0t9qydcj1jnn8kqsxdzu.gif"><br><br>  In the project folder, create a fragment with the name “Fragment1”. <br><br><img src="https://habrastorage.org/webt/4f/jj/ws/4fjjwsspunm4e3up2bzd-sycpwc.jpeg"><br><br><img src="https://habrastorage.org/webt/bd/xt/to/bdxttophoj-6r7_vu5faxiyrnxo.gif"><br><br>  The IDE will create two files: “Fragment1” and “fragment_fragment1.xml”. <br><br><img src="https://habrastorage.org/webt/gk/z9/vl/gkz9vluu61zdz7kja9od3dtsomk.jpeg"><br><br><img src="https://habrastorage.org/webt/bc/cy/8l/bccy8ljhhmlponiixf522a5z7lm.jpeg"><br><br>  Open the fragment layout file and delete the “TextView” widget with a welcome line that we do not need. <br><br><img src="https://habrastorage.org/webt/y0/-k/kk/y0-kkkfjxdhvccgc2yflvcnl8pi.jpeg"><br><br>  Switch to design mode and drag a button to the layout (Button). <br><br><img src="https://habrastorage.org/webt/gs/8g/yn/gs8gynbw8fylpdugjpqwzzktb4c.jpeg"><br><br>  The IDE will create a button with the identifier "button1". <br><br><img src="https://habrastorage.org/webt/a_/ng/fb/a_ngfbvqvgv52zful83hsuxpwmo.jpeg"><br><br>  Now edit the layout of the main activity, i.e.  file "activity_main.xml" <br><br><img src="https://habrastorage.org/webt/wa/-z/vr/wa-zvrhls1y0cy22xaa4oqcsyls.jpeg"><br><br>  Move the text widget higher and add the fragment we created to the layout (to do this, drag the element "&lt;&gt;" onto the layout, select "Fragment1" and click "OK"). <br><br><img src="https://habrastorage.org/webt/pm/fj/wg/pmfjwgcfvfvfbnimdhl78bjh08u.jpeg"><br><br>  In the layout of the activity in the settings of the fragment, set layout_height = "wrap_content" and edit its placement to your taste.  We will also change the identifier of the text field to “textReport”, and the fragment to “fragmentWithButton”. <br><br><img src="https://habrastorage.org/webt/dk/au/mg/dkaumgt8t_rpixwewkiyd_ozcdc.jpeg"><br><br>  Run the emulator (Shift + F10) and see what happened. <br><br><img src="https://habrastorage.org/webt/c2/yc/ax/c2ycaxbgia70bz0xe0tzs1veai4.gif"><br><br>  The application displays the inscription “Hello World!” And the “BUTTON” button.  The inscription is derived from the <i><b>activity</b></i> , the button belongs to the <i><b>fragment</b></i> .  The button is pressed, but it does not give any effect yet.  Let's try to program an inscription to display the number of button presses.  To do this, we will need to <i><b>send a message about pressing a button from the fragment to the activity</b></i> . <br><br>  First we teach the fragment to count the number of button presses.  Open the file "Fragment1.java". <br><br><img src="https://habrastorage.org/webt/6f/ti/eo/6ftieohuhycuf_tpcwnu6s1bm0y.jpeg"><br><br>  Add the variable "counter".  In the “onCreateView” method, which is called immediately after creating a fragment, we create a “listener” button.  IDE will need to implement View.OnClickListener - agree (Alt + Enter).  Let's create (override) the onClick method, which will increase the value of the counter variable with each click on the button and display a pop-up message. <br><br><img src="https://habrastorage.org/webt/is/lw/bg/islwbg0ijjtbojfcvsis1i2gacq.jpeg"><br><br>  Check in the emulator (again Shift + F10) how it works.  Pressing the button causes a pop-up message “Number of button presses: ...” to appear at the bottom of the application screen. <br><br><img src="https://habrastorage.org/webt/vo/j5/ul/voj5uljhsxmwgzg_m1ycafmg5p0.gif"><br><br>  Great, go ahead.  Our main goal is to transfer information (in this case, the number of button presses) from a fragment instance to an activity instance.  Alas, the life cycles of <a href="https://developer.android.com/guide/components/activities/activity-lifecycle">activities</a> and <a href="https://developer.android.com/guide/components/fragments">fragments are</a> organized in such a way that Android (almost) does not allow the activity and the fragment to communicate directly, so we need a mediator-interface.  Let's call it “Postman” (postman).  The interface can be created both in a separate file and in a file with a fragment code;  we will choose the first option.  Our Postman interface will contain a single abstract (without “body”) method “fragmentMail”. <br><br><img src="https://habrastorage.org/webt/m4/7y/ze/m47yzelbzced44wwarahc5incwe.jpeg"><br><br>  The variable "numberOfClicks" we will use as an "envelope" to send messages from the fragment to the activity. <br><br>  Open the file with the activity code "MainActivity.java".  As we remember, it looks like this: <br><br><img src="https://habrastorage.org/webt/tl/h3/s9/tlh3s9pb3alrn_busz9f2pmq9t0.jpeg"><br><br>  We implement the Postman interface and add the fragmentMail interface method to the activity, overriding it ( <a href="https://habr.com/ru/users/override/" class="user_link">Override</a> ). <br><br><img src="https://habrastorage.org/webt/fw/1u/vq/fw1uvq544wgtximbhjtslbszmrs.jpeg"><br><br>  Now, as soon as the activity “sees” the new value in the “numberOfClicks” variable, it will display the updated message in the textReport text box. <br><br>  But we still need to “put the letter in the envelope”, i.e.  transfer to a variable number of clicks on the button.  And we do this in the fragment code.  Open the file "Fragment1.java". <br><br>  D̶o̶b̶a̶v̶l̶ya̶e̶m̶ ̶v̶ ̶p̶o̶d̶p̶i̶s̶̶ ̶k̶l̶a̶s̶s̶a̶ ̶i̶m̶p̶l̶e̶m̶e̶n̶t̶a̶ts̶i̶yu̶ ̶i̶n̶t̶e̶r̶f̶e̶y̶s̶a̶ ̶ «̶P̶o̶s̶t̶m̶a̶n̶» ̶.̶ ̶I̶D̶E̶ ̶p̶o̶t̶r̶e̶b̶u̶e̶t̶ ̶p̶e̶r̶e̶o̶p̶r̶e̶d̶e̶l̶i̶t̶̶ ̶m̶e̶t̶o̶d̶ ̶i̶n̶t̶e̶r̶f̶e̶y̶s̶a̶ ̶ «̶f̶r̶a̶g̶m̶e̶n̶t̶M̶a̶i̶l̶» ̶, ̶ ̶n̶o̶ ̶d̶e̶l̶a̶t̶̶ ̶v̶ ̶n̶o̶m̶ ̶m̶y̶ ̶n̶i̶ch̶e̶g̶o̶ ̶n̶e̶ ̶b̶u̶d̶e̶m̶, ̶ ̶p̶o̶e̶t̶o̶m̶u̶ ̶o̶s̶t̶a̶v̶i̶m̶ ̶e̶g̶o̶ ̶t̶e̶l̶o̶ ̶p̶u̶s̶t̶y̶m̶.  <i>[Deleted, see “Note 1 dated 04.04.2019”]</i> <br><br>  We will need a link to the activity instance.  We will get it when attaching a fragment to an activity like this: <br><img src="https://habrastorage.org/webt/yl/jh/fr/yljhfr9cyl1pzhptlzzi6h0ejhy.jpeg"><br><br>  In the “onClick” method (the one that is called when the button of our fragment is clicked) we add a call to the interface from the activity instance. <br><br><img src="https://habrastorage.org/webt/je/o2/k8/jeo2k8ssprrdoyrzi9ab3v3e4kc.jpeg"><br><br>  The final code of the fragment after deletion (for compactness) of comments looks like this: <br><img src="https://habrastorage.org/webt/wb/7r/3d/wb7r3digdzwfbscmtcpwy7qzqj4.jpeg"><br><br>  Now our <i>fragment counts the number of button presses</i> , displays them in a pop-up message, and then using the Postman interface <i>passes the value of the counter variable to the numberOfClicks variable</i> , which serves as an envelope container for sending the message from the fragment to the activity.  The activity, receiving a new message, immediately displays it in its widget text field with the identifier “textReport”.  The goal is achieved! <br><img src="https://habrastorage.org/webt/ur/vh/mc/urvhmcy7fbx4rmt7sgkdnb_t2v0.gif"><br><br>  PS: Changing the programming language from Java to Kotlin allows you to significantly reduce fragment code: <br><br><img src="https://habrastorage.org/webt/3g/zu/dr/3gzudr28v2o8c3xvmbewzpzqusg.jpeg"><br><br>  PPS: Download project files here: <a href="https://github.com/kotlin-studio/ForHabrCom_AndroidActivityFragmentCommunication_Java">Java</a> , <a href="https://github.com/kotlin-studio/ForHabrCom_AndroidActivityFragmentCommunication_Kotlin">Kotlin</a> . <br><br><h4>  Note 1 dated 04/20/2019: </h4><br>  The implementation of the Postman interface has been removed from the fragment code. <br>  The fragment works with the interface through the activity in which this interface is already implemented. <br>  Thanks to <a href="https://habr.com/ru/users/mikaakim/" class="user_link">mikaakim</a> for <a href="https://habr.com/ru/post/448744/">comment</a> . <br>  Updated files can be downloaded from github by the links above. </div><p>Source: <a href="https://habr.com/ru/post/448744/">https://habr.com/ru/post/448744/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../448728/index.html">In a couple of decades, the brain will be connected to the Internet.</a></li>
<li><a href="../448732/index.html">Intervertebral hernia? Work on it</a></li>
<li><a href="../448734/index.html">Drones and robots that helped save the Notre Dame Cathedral in Paris</a></li>
<li><a href="../448738/index.html">Who hunts startups?</a></li>
<li><a href="../448740/index.html">Listening to SID music (Commodore 64) via OPL3 on modern PCs</a></li>
<li><a href="../448752/index.html">Earth is flat</a></li>
<li><a href="../448754/index.html">Who is who in open source: biographies of geeks</a></li>
<li><a href="../448756/index.html">Background: why Apple and Qualcomm quarreled, and then reconciled</a></li>
<li><a href="../448758/index.html">Smartwatch with BASIC on the physical 6502</a></li>
<li><a href="../448760/index.html">Development in the cloud, information security and personal data: digest for reading at the weekend from 1cloud</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
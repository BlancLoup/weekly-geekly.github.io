<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>In more detail about a dynamic magnetic strip</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Firstly, a special thank you to everyone who ordered a card after opening a pre-order on cardberry.com. We connected an alternative to a simpler (for ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>In more detail about a dynamic magnetic strip</h1><div class="post__text post__text-html js-mediator-article">  Firstly, a special <b>thank you to</b> everyone who ordered a card after opening a pre-order on <a href="http://cardberry.com/">cardberry.com.</a> We connected an alternative to a simpler (for those who do not have a paypal account) payment using a <b>robocash box</b> , where the card data are simply entered without additional fields.  Also, thanks for the comments and questions on the project, and interest in general! <br>  In this post, you will learn more about the most dynamic magnetic strip - dynamic magnetic stripe and its variants.  The idea of ‚Äã‚ÄãDMS appeared 25 years ago in the United States and was embodied in the form of theoretical descriptions, drawings and patented.  The patent was assigned the number WO 89/01672 and published on February 23, 1989. <br>  At present, the patent can already be used without violating any intellectual property rights, but, unfortunately, it is useless in practical application. <br><img src="https://habrastorage.org/getpro/habr/post_images/b4e/201/729/b4e2017290e4c9fa510f2c1cae8dec94.jpg"><a name="habracut"></a><br>  So, the idea is the same as 25 years ago: signal transmission by a changing magnetic field, which is created by the coil / coils.  The control is carried out by a microcontroller.  In fact, the magnetic stripe of the card is nothing more than a tape recording, on which there are positively and negatively magnetized portions arranged in 3 rows (if all three tracks are used).  When drawing a card through a card reader, we create an alternating magnetic field at the read head.  It is with the help of it that the information on the map is encoded.  An alternating current appears in the winding of the head.  Thus, we need to recreate the sequence of the changing magnetic field on the reader head.  This can be done with the help of a coil and supplying it with an alternating voltage of the appropriate type. <br>  For a start, it was necessary, in general, to understand the possibility of simulating a magnetic field.  One small coil was wound, the card code was written to the microcontroller and reproduced.  The first test sample was inserted into the reader stationary in such a way that the coil was located opposite the read head, namely opposite the receiver of the second track (the fact that the encoding of the first track is different from the encoding of the second and third).  In stationary mode, the tests were successful.  The coil created an alternating magnetic field, sequentially transmitting symbol by symbol, the reader accepted this sequence and decoded (of course, there are limitations on the speed of drawing the card, and therefore the speed of signal transmission, but it is possible to get into this interval). <br>  In the dynamics everything was more difficult.  Several factors influenced the steady data transmission, the main of which were: the coil winding uniformity (we wound manually) and the coil length.  The fact is that with a long coil in the middle there was a ‚Äúfailure‚Äù, that is, the level of the magnetic field was not enough to transfer information, and with a short coil we did not always have time to transmit the entire sequence of characters when drawing an experimental card.  We had to drive the map more slowly, which did not correspond to the concept we chose - the usual habitual use of the map.  In parallel, several other problems appeared, one of which, and perhaps the main one, is the guidance of a signal to neighboring tracks. <br>  So, the main tasks to be solved: <br>  <i>1) to obtain approximately the same magnetic field strength on the working part of the track;</i> <i><br></i>  <i>2) minimize pointing to a neighboring track (otherwise, the information there is also read and decoded (if there is no other main signal) and the trading equipment gives an error, or the noise breaks the main signal transmitted via another track).</i> <br>  I must say that we tried to imitate the magnetic strip for the Cardberry e-card using different methods.  More details about each. <br>  <b>The first version of the card with USB</b> <br>  The first hypothesis was to check the performance of the coils in an integrated way into the printed circuit board (the coils are made in the form of conductive tracks directly on the printed circuit board). <br>  At that moment (the end of 2013) we did not have an understanding about the presence of a battery with a thickness of 0.55-0.65 mm and we made the body of the card the width of the found battery.  The body is made using a 3D printer.  When testing this card did not show stable operation and we continued to search for solutions. <br><img src="https://habrastorage.org/getpro/habr/post_images/f5c/94d/f31/f5c94df3144b229fc2095958ee00a1d3.jpg"><br>  <b>CoilCraft second coil version</b> <br>  Analyzing the possibility of sequential transmission of DMS information to the reader‚Äôs head, we came to the option of arranging small inductors along the entire length.  We created and programmed a map with a sequential arrangement of coils and tested this option.  After testing, we were forced to abandon this idea due to identified failures during rolling.  The coils separately generated a magnetic field and the overall picture was uneven.  The field broke and was read in motion in 50-60% of cases, which did not satisfy the requirements. <br><img src="https://habrastorage.org/getpro/habr/post_images/d2c/fa7/b18/d2cfa7b18cfdbf8e9063255c80460f25.jpg"><br>  <b>The third option with longitudinal winding</b> <br>  One of our electronics engineers suggested that the geometry of the magnetic field would allow for vertical longitudinal winding to reduce vertical guidance to adjacent tracks.  We have implemented this hypothesis on various materials.  In fact, guidance to neighboring tracks decreased, but the field became very weak.  More precisely, very strong at the beginning and failures to almost zero in the middle.  Reading was recorded in less than 30% of cases. <br><img src="https://habrastorage.org/getpro/habr/post_images/ef6/c4c/8f2/ef6c4c8f2770063303bd59123f406dcc.jpg"><br>  <b>The fourth option with suppression of aiming - the last decision taken as a basis</b> <br>  The problem with the guidance, one of the key.  As mentioned above, a reader designed to read 2 or 3 tracks in this situation will read the pickups and understand them as a signal (erroneous) or noise and refuse to read data from other tracks.  In this approach to the DMS, we were able to implement the proposed theory of extinction of the induced signal by a symmetrically located coil, through which current flows in the opposite direction. <br><img src="https://habrastorage.org/getpro/habr/post_images/147/9a9/734/1479a9734cdbdfe872fdfffc23853179.jpg"><br>  This prototype was successfully tested in several stores, and we proceeded to the formation of an exact (machine) industrial design. <br>  The key role is played by the thickness of the wire and core, the change in each of the parameters significantly affects the quality and uniformity of the signal. <br>  At the moment, the process of setting up production is completed, as the equipment designed to create DMS coils was created from scratch and the idea of ‚Äã‚Äãblanking for the stable operation of the card is being finalized and optimized. <br>  Pre-order is available on the <a href="http://cardberry.com/">cardberry.com</a> website at a 50% discount. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/231465/">https://habr.com/ru/post/231465/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../231453/index.html">High-speed construction of an energy efficient home</a></li>
<li><a href="../231455/index.html">Evacuated car? Notify owner</a></li>
<li><a href="../231457/index.html">HP All-flash array and 10 more major changes to 3PAR storage systems (part 2)</a></li>
<li><a href="../231459/index.html">Repair Hard Disk Western Digital My Passport Essential SE 750 GB USB3.0</a></li>
<li><a href="../231461/index.html">Speedometer for skate. Hopelessness</a></li>
<li><a href="../231469/index.html">Running CDN for cloud storage</a></li>
<li><a href="../231471/index.html">A simple cloud backup for developers, and how we work on it in Yandex Tolstoy Startup Camp</a></li>
<li><a href="../231473/index.html">New in Support-Library</a></li>
<li><a href="../231477/index.html">Philips VISIQ: portable ultrasound scanner tablet</a></li>
<li><a href="../231481/index.html">According to NASA, Opportunity became the record for the mileage among all extraterrestrial spacecraft.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
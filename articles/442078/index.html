<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Working with the Jira API with Python</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. There was a thought to automate unloading reports from Jira. Since Python was the favorite tool, the choice fell on a module from JIra that all...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Working with the Jira API with Python</h1><div class="post__text post__text-html js-mediator-article">  Hello.  There was a thought to automate unloading reports from Jira.  Since Python was the favorite tool, the choice fell on a module from JIra that allows you to work with their API.  Who cares please in the cat. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c2d/a37/f46/c2da37f469f8ecd69f7b7597d9e90cc6.jpg" alt="image"><br><a name="habracut"></a><br>  Atlassian has official <a href="https://jira.readthedocs.io/en/master/">documentation</a> on the use of their module.  The module itself is called ‚Äújira‚Äù.  Traditionally, we will install the module with the command: <br><br><pre><code class="python hljs">pip install jira</code> </pre> <br>  Then we import the module directly in the code: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jira <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> JIRA</code> </pre> <br>  In order to connect to the server itself, you need to create a client by passing the required parameters to it: <br><br><pre> <code class="python hljs">jira_options = {<span class="hljs-string"><span class="hljs-string">'server'</span></span>: <span class="hljs-string"><span class="hljs-string">'https://project-name.atlassian.net'</span></span>} jira = JIRA(options=jira_options, basic_auth=(login, api_key))</code> </pre> <br>  In order to pass authorization with a password, you can send a password instead of api key.  After authorization is completed, we have an active api client that can be accessed. <br><br>  The possibilities are certainly not limitless, but quite wide.  It was necessary for me to pull out tasks for a certain week and to make a report on the hours spent in Excell.  You can drag out tasks directly by the project itself, by task number, or by JQL query.  Search tools are quite flexible and simple.  All information returned by the api client comes in a string, so additional steps are required to work with it. <br>  We make a jql request and pick up tasks for it: <br><br><pre> <code class="python hljs">jql = <span class="hljs-string"><span class="hljs-string">'project = '</span></span> + project_key + <span class="hljs-string"><span class="hljs-string">' AND worklogDate &gt;= '</span></span> + work_date issues_list = jira.search_issues(jql)</code> </pre> <br>  Unfortunately, I did not understand why in those tasks that are obtained through such a query there is no worklog property.  After some attempts to understand what is wrong, I politely asked the jira task by number: <br><br><pre> <code class="python hljs">issue = jira.issue(issue_key)</code> </pre> <br>  In the task returned by this method, the worklog field with a list of worklogs was.  As a result, I began to take tasks on jql request, pulled out task numbers and afterwards pulled out the information I needed: <br><br><pre> <code class="python hljs">worklogs = issue.fields.worklog.worklogs</code> </pre> <br>  Such a line allows you to pull out all time records from a specific task.  Each of the records has information about the time both in seconds and in the textual representation (1h, 3d etc). <br>  After that, everything is simple, we drop the records that do not fit the period, in my case the week number does not match: <br><br><pre> <code class="python hljs">worklog_date_str = re.search(<span class="hljs-string"><span class="hljs-string">r'(\d{4}-\d{2}-\d{2})'</span></span>, worklog.started) worklog_date = datetime.strptime(worklog_date_str.group(<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">'%Y-%m-%d'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> worklog_date.isocalendar()[<span class="hljs-number"><span class="hljs-number">1</span></span>] == weak_number:</code> </pre> <br>  Since the date is returned in the string, I used a simple regular expression to pick it up, and in the next line I quote the required type.  The worklog_date.isocalendar () [1] expression allows you to find out the week number that will be compared with what you need to take.  If it matches, we go further and record the rest of the data. <br><br>  In general, the above module allows you to solve a fairly wide range of tasks, you need only time and desire. <br><br>  UPD <br><br>  You can not re-request a task, but simply expand the desired field. <br>  <a href="https://github.com/pycontribs/jira/blob/master/jira/client.py">github.com/pycontribs/jira/blob/master/jira/client.py#L2371</a> <br>  thanks <a href="https://habr.com/ru/users/hserg/" class="user_link">HSerg</a> </div><p>Source: <a href="https://habr.com/ru/post/442078/">https://habr.com/ru/post/442078/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../442068/index.html">On the introduction of digital technologies in business, Russia ranked 3rd from the end</a></li>
<li><a href="../442070/index.html">Companies have finally attended to the development of IoT devices and their security.</a></li>
<li><a href="../442072/index.html">RxJava2 + Retrofit 2. Modify the adapter to handle the absence of the Internet on Android</a></li>
<li><a href="../442074/index.html">Stylish waterfall from RiME in the game engine: make the water flow</a></li>
<li><a href="../442076/index.html">VKontakte has released an instant messenger for PC, very similar to Telegram</a></li>
<li><a href="../442080/index.html">Micrometer Connection for Java Web Application</a></li>
<li><a href="../442082/index.html">How to simplify the study of Oracle database: "gentleman's set of" scripts</a></li>
<li><a href="../442084/index.html">Antiquities: a twenty year old camera on diskettes</a></li>
<li><a href="../442086/index.html">How was Love Kubernetes in Mail.ru Group on February 14</a></li>
<li><a href="../442088/index.html">SEC accused Ilona Mask of violating the ban on the publication of important data on Tesla in social networks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
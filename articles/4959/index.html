<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MySpace infrastructure can't handle the load</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Baseline magazine has published a detailed technical analysis of the MySpace.com site infrastructure. As you know, this is one of the largest web serv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MySpace infrastructure can't handle the load</h1><div class="post__text post__text-html js-mediator-article">  Baseline magazine has published a <a href="http://www.baselinemag.com/print_article2/0,1217,a%3D198614,00.asp">detailed technical analysis</a> of the <a href="http://www.myspace.com/">MySpace.com</a> site infrastructure.  As you know, this is one of the largest web services on the Internet, which is now <a href="http://www.habrahabr.ru/lenta/1973/">arguing</a> with the <a href="http://www.yahoo.com/">Yahoo</a> portal for the title of the most visited site on the Web. <br><a name="habracut"></a><br>  This topic is also interesting because MySpace was created quite recently, in July 2003, and its popularity has grown very rapidly.  For this reason, the infrastructure upgrade was carried out in an emergency mode, and the cardinal update of the servers was already five times. <br><br>  Currently, the number of registered MySpace users has exceeded 140 million people.  Each of the users does not just visit the site daily, but spends a lot of time on it and publishes content, which greatly loads servers.  In November 2006, 38.7 billion page impressions were recorded - and this is only three years after the site was opened.  Each page is dynamically generated, retrieving information on the fly from numerous databases. <br><br>  MySpace servers run on Microsoft software and it does not cope with the load.  MySpace users see error messages literally every day.  According to independent experts, at times of peak load, between 20% and 40% of attempts to log in to the site are unsuccessful - ‚ÄúUnexpected Error‚Äù appears in response. <br>  On average on the Internet, this figure does not exceed 1%.  A 20‚Äì40% rate is unacceptable for any commercial site, but MySpace‚Äôs main audience is teenagers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      On the night of July 24, 2006, MySpace.com went offline at all for 12 hours (there was a blackout in California, and MySpace did not have a backup data center).  Then users met a page with apologies and a flash game, so that they could kill time waiting for the opening of their favorite site.  Interestingly, during the downtime the number of visitors was more than on a typical day (according to Hitwise statistics).  This indicates the attachment of users who checked the state of their virtual home again and again. <br><br>  According to technical experts, the MySpace infrastructure was not originally designed for such a load.  Unlike the creators of Yahoo, eBay or Google, the creators of MySpace from the small spam company Intermix Media did not consider the possibility of scaling.  Obviously, they were not ready for such a rapid growth of the audience. <br><br>  MySpace was created like this.  In 2003, the US passed the anti-spam law CAN-SPAM, so that the owners of Intermix Media decided to change the scope of activities and open their own social network.  To create a web application, they hired a programmer, Duck Chau, who wrote the first version of MySpace.  The site worked on Perl, under the Apache web server and MySQL DBMS.  However, this program did not like other Intermix Media programmers who had experience working under ColdFusion, so they rewrote the program under ColdFusion.  Naturally, she now worked under Windows and Microsoft SQL Server, and Duck Chau quit. <br><br>  The launch of the MySpace site took place exactly at the moment when the most popular social network Friendster started having performance problems.  Users had to wait for each page to load for 20-30 seconds, and the developers due to lack of financial resources could not do anything about it.  Very quickly, all users switched to MySpace, whose servers worked quite well. <br><br>  Initially, the MySpace site worked on only two Dell servers (4 GB of memory and two processors) with a single database server.  As incoming requests grew, new web servers were purchased.  The problems began in early 2004, when the number of registered users reached 400 thousand, and the database server could not cope with the load.  Adding database servers is not as easy as web servers, so we decided to create a bundle of three SQL Server databases (one main and two copies). <br><br>  The next upgrade had to be done in mid-2004, when the number of users approached 2 million and the database server ceased to withstand the number of read and write requests.  For example, this was manifested in the fact that published comments were published on the site with a delay of up to five minutes.  The way out was to separate the data storage system from the DBMS. <br><br>  The third upgrade (3 million users) occurred shortly after the second, because the DBMS still could not cope with the load.  As a result, it was decided to create a large distributed system from relatively inexpensive database servers, which could easily be scaled in the future.  Additionally, I had to rewrite the software for the site.  It was the biggest upgrade.  For a uniform load on the servers, users are ‚Äúdivided‚Äù into clusters so that each database server serves 2 million people. <br><br>  When the subscriber base reached 9 million in early 2005, engineers began migrating from ColdFusion servers to a new version of web software written in Microsoft C # and running under ASP.NET.  Immediately it turned out that under ASP.NET programs work much more efficiently.  On the new code, 150 servers did the same work as before 246. In addition, a new professional data storage system was installed that can withstand a heavy load.  A little later (for 17 million users), another series of cache sevrers, intermediaries between web servers and database servers were added to the system. <br><br>  The last MySpace upgrade took place in mid-2005 (26 million users), when the migration to the new SQL Server 2005 DBMS was carried out, even during its beta testing.  This rush is due to the fact that this was the first version of SQL Server, supporting 64-bit processors with the possibility of extended addressing to memory.  And memory then was just the bottleneck in MySpace infrastructure. <br><br>  Although a year and a half has passed since then, and the number of registered users has grown to 140 million, no more global upgrades have been carried out.  Just in mid-2005, media mogul Rupert Murdoch bought MySpace for $ 580 million. It was a good bargain, because now the site‚Äôs cost has increased to about $ 6 billion (according to the same Murdoch).  In 2007, the site should bring $ 400 million in revenue, mainly from the display of advertising. <br><br>  Not surprisingly, the MySpace infrastructure is still faltering.  Microsoft software cannot handle the load for which it is not designed.  In November 2006, the site broke the SQL Server limit by the number of simultaneous connections: this is the main reason for the constant failure.  Therefore, the Windows 2003 servers unexpectedly shut down: their built-in protection against DoS attacks worked falsely. <br><br>  In mid-2007, the next MySpace upgrade is planned: the creation of a distributed storage system so as not to depend on the data center in Los Angeles. <br><br>  <b>MySpace infrastructure</b> <br><br><table border="1"><tbody><tr><td>  <b>Task</b> </td><td>  <b>Product</b> </td><td>  <b>Manufacturer</b> </td></tr><tr><td>  Web application technology </td><td>  Microsoft Internet Information Services, .NET Framework </td><td>  Microsoft </td></tr><tr><td>  Server operating system </td><td>  Windows 2003 </td><td>  Microsoft </td></tr><tr><td>  Programming language and environment </td><td>  C # Applications for ASP.NET </td><td>  Microsoft </td></tr><tr><td>  Programming language and environment </td><td>  Initially, the site was launched under Adobe's ColdFusion, now the remaining ColdFusion code runs under New Atlanta's BlueDragon.NET </td><td>  Adobe, New Atlanta </td></tr><tr><td>  DBMS </td><td>  SQL Server 2005 </td><td>  Microsoft </td></tr><tr><td>  Data storage </td><td>  3PAR Utility Storage </td><td>  3PARdata </td></tr><tr><td>  Accelerate Internet Applications </td><td>  Netscaler </td><td>  Citrix systems </td></tr><tr><td>  Servers </td><td>  Standard HP 585 (see below) </td><td>  Hewlett packard </td></tr><tr><td>  Advertising engine </td><td>  DART Enterprise </td><td>  Doubleclick </td></tr><tr><td>  Search engine and contextual advertising </td><td>  Google search </td><td>  Google </td></tr></tbody></table><br><br>  The standard database server (there are 65 of them now) is based on the HP 585 server base with four dual-core 64-bit AMD Opteron processors and 64 GB of RAM (recently increased from 32 GB).  Windows 2003 operating system, Service Pack 1, Microsoft SQL Server 2005 DBMS, Service Pack 1. 10 Gbps network card. </div><p>Source: <a href="https://habr.com/ru/post/4959/">https://habr.com/ru/post/4959/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../4958/index.html">"New focus" do not confiscate</a></li>
<li><a href="../49581/index.html">An example of using a telnet server in firefox</a></li>
<li><a href="../49582/index.html">We learn Java. The third cup: primitive types, and objects. Basic designs</a></li>
<li><a href="../49586/index.html">About broken windows.</a></li>
<li><a href="../49588/index.html">Correct wording</a></li>
<li><a href="../49592/index.html">Kohana vs Codeigniter, Performance Synthetics</a></li>
<li><a href="../49595/index.html">Modality beyond dialog boxes</a></li>
<li><a href="../49597/index.html">Korean Pocket Dictionaries</a></li>
<li><a href="../49599/index.html">What is it about, the author?</a></li>
<li><a href="../4960/index.html">A high-tech police guide has been published.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
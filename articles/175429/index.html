<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We publish Citrix applications in WEB</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We publish Citrix applications in WEB 

 I want to dwell on a very interesting question in the form of a hardware solution from Citrix NetScaler. 
 Th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We publish Citrix applications in WEB</h1><div class="post__text post__text-html js-mediator-article">  <b>We publish Citrix applications in WEB</b> <br><br>  I want to dwell on a very interesting question in the form of a hardware solution from Citrix NetScaler. <br>  The device c huge functionality and features.  In this article I dwell on the issue of publishing applications and vdi in the WEB. <br>  Moreover, besides the safe delivery of the application, it is also provided with batch optimization for faster and better transfer. <br><br><h4>  A bit of description: </h4><br>  We assume that we already have NetScaler MPX or VPX (mpx is a piece of hardware, vpx is a virtual application).  As a test, you can use NetScaler VPX Express.  Moreover, it is free with full functionality, only limited in bandwidth. <br>  Before we begin, let's recall some terms.  The main thing to know are the four different IP addresses that NetScaler uses. <br>  types of IP addresses in NetScaler <br>  NetScaler IP address (NSIP) ‚Äîa control IP address for accessing the system, heartbeat interface for HA, syslog source, etc; <br>  Virtual IP address (VIP) - IP associated with the virtual server.  Often it is the public IP address to which clients connect; <br>  Mapped IP address (MIP) - The MIP address is used for server connections.  Often, it is the address that looks towards your servers for which you need to load balance and / or provide access through the Access Gateway and / or protect applications using the Web Application Firewall <br>  Subnet IP address (SNIP) - when Netscaler interacts with multiple SNIP subnets, it can be configured as MIP to provide access to these subnets.  SNIP can be tied to VLANs and interfaces. <br>  We will also assume that the initial NS tincture has been produced (IP addresses are configured and licenses are installed). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Caution, under the hood a lot of pictures <br><a name="habracut"></a><br>  Connect to NS WEB console: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/07a/8cc/cfa/07a8cccfa41ddd8dd9caea03d0bb620a.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/10d/865/6d5/10d8656d5bed43e0d52f89693bbf88a6.png"><br><br>  Check that the IP addresses are configured by clicking on Network -&gt; IPs in the console <br><br><img src="https://habrastorage.org/getpro/habr/post_images/48f/e2c/acd/48fe2cacd75092e4dbaedf064138ebb4.png"><br><br>  We turn to the most interesting: <br>  Setting up the web interface ... <br><br>  Now we finally get to the part we care about.  Adding a web interface and XML to NetScaler.  After this step we will be able to get to the web interface page through the VIP that we create.  We need to create 2 virtual servers. <br>  But before creating servers, I will create the necessary service groups for balancing. <br><img src="https://habrastorage.org/getpro/habr/post_images/7e5/e05/897/7e5e058979af5a0ceff0a3e24b326861.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/0b4/cbc/7ac/0b4cbc7acc7a6e43b0d3cdb766d6e254.png"><br>  Balancing members <br>  Now, on the basis of this group, we are creating an LB server.  To create a virtual server, go to Load Balancing -&gt; Virtual Servers.  Click the Add button at the bottom of the screen.  Enter the Virtual Server name (I recommend to call the LB server according to its tasks, in my case XenDesktop_WebInterface_serverIPaddress_port_LoadBalancingIP - XD_WI_192.168..__lbvip).  Enter the IP address that will be used as the VIP for the two Web Interface servers.  Choose HTTP protocol, port 80 <br>  On the Services tab, check the box for the two web-based services created earlier.  On the Method and Persistence tab and select the Least Connection method.  We save. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/976/92d/cf8/97692dcf8489b52b1d13d30fd205809e.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ed/a16/738/2eda16738e7669d945f0067cc52e9e5b.png"><br><br>  Now we will create an LB server for XML. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d59/476/bbe/d59476bbe52d1dc90dead81497c1a643.png"><br><br>  In order to use these functions, you need to create a new monitor.  This new monitor uses XML to send a request to the XenApp / Desktop farm.  It should be noted that this only works for XenApp and XenDesktop. <br>  To create a monitor in Load Balancing -&gt; Monitors.  Click create.  Create a new monitor name and select CITRIX-XD-DDC and XD-WEB-INTERFACE.  The name of the monitor I propose to use as LB servers. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/279/508/df8/279508df8cd1177c65f842110328e006.png"><br><br>  Brief summary: We set up 2 server load balancer, created monitors for monitoring end servers. <br>  Certificates: <br>  It is easiest to configure using the WEB interface by logging into NSIP Netscaler. <br>  A full description of the process is here. <br>  Briefly: (if I answer questions, but in my opinion, generation should not cause questions if there is a deployed certification authority). <br>  Generates RSA key (Configuration&gt; SSL&gt; Create RSA key); <br>  CSR is created (Configuration&gt; SSL&gt; Create CSR); <br>  Certificates are installed (Configuration&gt; SSL&gt; Certificates&gt; Install); <br>  The server certificate is linked to the CA and Intermediate Authority, forming a chain (Configuration&gt; SSL&gt; Certificates&gt; Link). <br>  As a result, we should get 2 installed certificates - server and CA. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f44/142/d07/f44142d07c50dfb933fa0cfc0bba10d7.png"><br><br>  And only now we create Access Gateway virtual server.  To do this, open Access Gateway -&gt; Virtual Servers and click the ADD button.  Specify the server name.  This name must match the name of the certificate that you registered earlier.  Assign an IP address to be used as the VIP for this connection.  Finally, add the certificate created earlier. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d92/60d/b49/d9260db49b6b92a62ec5581339d124a3.png"><br><br>  Now you can test the AG server.  Open a web browser and go to <u>https: // server name</u> (of course, use the FQDN we created).  Be sure to use HTTPS.  The page should show a certificate without warning.  If there are warnings, you need to check the certificates. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/365/791/a6f/365791a6f80b0eb116082164bf4fbd15.png"><br><br>  AG server is up but not configured.  Configure LDAP authorization <br>  To configure, we need to create an LDAP server.  Go to System -&gt; Authentication -&gt; Server -&gt; Add ... <br><img src="https://habrastorage.org/getpro/habr/post_images/d3a/3e5/762/d3a3e576274faae1d4cacb960e5ad465.png"><br><br>  Name: AD (which is convenient for the soul) <br>  Authentication Type: LDAP <br>  IP address: 192.168.xx (using the IP address of one of the domain controllers) <br>  Base DN: DC = your DC = domain (DN for your domain) <br>  Administrator Bind DN: CN = DC account = your DC = domain (account for access to the domain). <br>  Administrator password: password (password for the user specified above) <br>  We create. <br><br>  Having a connection to AD we will create a policy for authorization on NS.  System -&gt; Authentication -&gt; Policies -&gt; Add <br><img src="https://habrastorage.org/getpro/habr/post_images/9b7/34a/49e/9b734a49e6b7d40a5b100b2aeb5493be.png"><br><br>  Name: policy_AD (or any name) <br>  Authentication Type: LDAP <br>  Server: AD (this is the server you created in the previous step) <br>  Expression: Search for any expression -&gt; General -&gt; True value (click the Create button) <br>  Now we will connect the created LDAP policy with the AG virtual server created earlier. <br><img src="https://habrastorage.org/getpro/habr/post_images/3bb/e99/b58/3bbe99b5829364a261eae3fa6ef15889.png"><br><br>  Already almost everything is ready. <br>  And only now we translate to the settings on the Cirtix XenDesktop / XenApp WEB server. <br>  For cleanliness we will create a new site. <br>  Here everything is clear with the settings (the name of the site and the path to the files) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d86/ab0/0f9/d86ab00f92b4faf544ee7c1b48dcf371.png"><br><br>  In the next step, select the authentication point.  We select Access Gateway. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/640/c0d/4cb/640c0d4cb75cdac4d34a89b9c0eae4e8.png"><br><br>  For authentication of the service URL, we indicate: <a href="https://xn--80ad1e/">your</a> FQDN / CitrixAuthService / AuthService.asmx <br><img src="https://habrastorage.org/getpro/habr/post_images/d1c/dce/db4/d1cdcedb4a0971f8e85f82ffefabe770.png"><br><br>  After creating the site open it to configure.  To configure XML, specify the IP address of the LB server that we created earlier.  Those.  NS will control the load on web / xml servers by itself. <br><img src="https://habrastorage.org/getpro/habr/post_images/647/6f7/bba/6476f7bba96d25b758e5373ad77e7cd9.png"><br>  Once the site is created, we need to set the Access Gateway access type.  Right-click on the new site and select Secure Access. <br><img src="https://habrastorage.org/getpro/habr/post_images/3e9/354/175/3e9354175b85a1402ff050c3f97508ac.png"><br>  After changing the gateway access method from Direct to Gateway direct, click Next.  In the Specify screen field In the gateway parameters, enter the FQDN address.  Click the next button to continue. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8f7/13b/6e3/8f713b6e3a8ddd70ac451f9c5c890365.png"><br>  From Specify the security administration ticket (STA) screen, click Add.  Enter the path to the STA, as https: // your citrix server XD / App / scripts / ctxsta.dll.  Next great Finish button.  (Let me remind you who has the XD cluster - must be done on all WEB nodes). <br><img src="https://habrastorage.org/getpro/habr/post_images/9d6/75f/23c/9d675f23c8492fd1a965f26fc702d932.png"><br><br>  Now we have to add the STA to the Access Gateway Virtual Server.  Open Access Gateway -&gt; Virtual Servers, open the Access Gateway server and open the Published Applications tab.  In the STA section, click Add.  Enter in the format <u>https: // ip address</u> (replace your IP specified in the previous step).  Save by clicking OK. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/143/864/187/14386418715637a4c261f863a14577b8.png"><br><br>  It remains to configure the session access policies Create Access Gateway Session Policy <br>  Name: cag_xd_vser_wi (again following the rule adopted above) CitrixAccessGateway_XenDesktop_VirtualServer_WebInterfase <br><img src="https://habrastorage.org/getpro/habr/post_images/46c/991/50f/46c99150fe00305a341e56bb2bf80b9d.png"><br><br>  Expression (expression): any expression -&gt; General -&gt; True value (click Add Expression) <br>  Click OK and take the next step. <br>  ICA Proxy: ON <br>  Web Interface Address: <i>https://192.168.xx/Citrix/AccessGateway/auth/login.aspx</i> (Specify the IP address of the LB server assigned to WEB balancing) r. <br>  Single Sign-on Domain your.domain (FQDN of your domain) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9d8/cb6/545/9d8cb6545ef4ab90da301d1041d9e188.png"><br><br>  The final touch - on the Security tab of the Default Authorization Action, install ALLOW. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d49/d4b/ca7/d49d4bca7a30bfc039fa19c9435ec6f7.png"><br><br>  You can now safely connect from anywhere in the world to your published applications on Citrix Xendesktop / XenApp using the SSS-VPN tunnel. <br><img src="https://habrastorage.org/getpro/habr/post_images/c49/fa6/669/c49fa6669a5fc3088822704f3b47c27d.png"><br><br>  <i>Thank you for your attention, if you have any questions, comments please ask.</i>  <i>The topic is complex, but interesting and necessary.</i> <br><br>  Original article <a href="http://netolkoit.ru/publikuem-prilozheniya-citrix-v-web/">here</a> </div><p>Source: <a href="https://habr.com/ru/post/175429/">https://habr.com/ru/post/175429/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../175417/index.html">ZTE V987 - 4-core smart phone with a great screen</a></li>
<li><a href="../175421/index.html">The first television images of the Earth from the first weather artificial satellite (53 years ago)</a></li>
<li><a href="../175423/index.html">4.04. The day when the page was not found turned into a holiday</a></li>
<li><a href="../175425/index.html">428,000 pixels to mars</a></li>
<li><a href="../175427/index.html">Is there an alternative to search engines</a></li>
<li><a href="../175431/index.html">Practical use of MvcSiteMapProvider in ASP.net MVC</a></li>
<li><a href="../175433/index.html">Spring! Profitable shares from "Simple business"</a></li>
<li><a href="../175435/index.html">Punk smartphone</a></li>
<li><a href="../175437/index.html">Mobile Timeline of corporate life for the iPhone. We invite you to speak!</a></li>
<li><a href="../175439/index.html">Mail.Ru rating: visits in reports</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
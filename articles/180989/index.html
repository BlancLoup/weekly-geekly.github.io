<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write our interpreted hexadecimal programming language for QR codes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Inspired by the Google Glass project, I thought how good it would be to make an extremely simple but powerful tool of augmented reality specifically f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write our interpreted hexadecimal programming language for QR codes</h1><div class="post__text post__text-html js-mediator-article">  Inspired by the Google Glass project, I thought how good it would be to make an extremely simple but powerful tool of augmented reality specifically for such glasses.  And why not make it based on such widely used technology as QR codes.  Thus, the idea of ‚Äã‚Äãthe QuRava language was born - a set of bytes written in a QR code and interpreted into a full-fledged program that implements part of the capabilities of the Java language. <br><br>  I want to immediately warn you that all of the following - the alpha version, was made in several evenings.  Therefore, do not swear too much about small opportunities and do not ask questions about the lack of lambda calculus. <br><img src="https://habrastorage.org/storage2/538/13e/a82/53813ea82374c864fa02795aba0935d3.png"><br><a name="habracut"></a><br><br><h4>  1. Purpose </h4><br>  It seems to me that most augmented reality tools are completely divorced from reality.  They are beautiful, interesting, but useless for practical use.  And I wanted to make a technology that would be extremely simple and convenient for everyday use.  The best thing that came to mind is to embed the interpreted language into QR codes.  They are already widespread, and do not cause rejection in people.  They can be printed and attached to any place, be it a cafe table or a shop window.  They are read almost instantly, and therefore using Google Glass it will be possible to display programs in real time. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The advantages of this approach are obvious: <br><ul><li>  only the interpreter program and the QR code itself are needed, no additional equipment is needed </li><li>  interface standardization;  people do not need to learn again every time </li><li>  huge potential opportunities: for example, you can make an order in a cafe, looking at the table, or order tickets for a rock concert, looking at the poster </li><li>  elementary simplicity and low cost of creating and distributing programs </li></ul><br>  But there are also disadvantages: <br><ul><li>  small program size.  Solved by pumping additional logic over the network. </li><li>  perhaps it would be easier to download a code in a scripting language from the Internet via a QR link, even though it is slower </li><li>  Stephenson's novel "Avalanche" is recalled, in which people, looking at a black and white image, melted their brains </li></ul><br><h4>  2. Language structure </h4><br>  In QR codes, information is recorded using a sequence of sections of 8 bits each.  Therefore, I decided to create a language on the basis of byte calculus, that is, on the basis of hexadecimal characters from 00 to FF.  First, the idea of ‚Äã‚Äãwriting a Java bytecode in the barcode came to mind, but I refused it because of the redundancy of this approach.  The interpreted language for QR should be very short, so a bar code can contain at best only 2 kilobytes of memory.  Yes, and many opportunities this language is not necessary. <br><br>  So far, only three types of constructions are used in the language: variables, procedures, and Android components.  Each object of these three types has its own subtype (for example, for variables it is 00-boolean, 01 is int, 02-float, 03-String), single-byte name and body.  For the convenience of the parser, a length byte is placed before each construction. <br>  For example, the syntax { <code>06,01,AA,00,00,00,03</code> } contains the following: <br><br><ul><li>  The first byte is a length byte of 6, and the parser reads 6 bytes after it. </li><li>  The second byte is the data type byte.  It is 01, which means integer </li><li>  The third byte means the name of the variable.  Here the variable is called AA, and afterwards the interpreter will know it precisely under this nickname. </li><li>  After that comes 4 bytes of the body.  Mean that the variable is initially assigned a value of 3 </li></ul><br>  In the procedures, a list of primitive operations is specified.  For example { <code>4,14,,,</code> } means AA = AA + BB; <br><br>  Since Google Glass has not yet been released, I wrote an interpreter program for Android.  Therefore, QuRav now supports Android components.  For now, only Button, TextView and Edit Text.  You can set their position on the screen, the text on them, and for the buttons to add an indication of the procedure that is called when you click.  For example, { <code>05,09,05,02,03,08</code> } means the creation of a button (code 09) with the name 05, position on screen 02 (at the top center, using the system of old telephone hardwired keyboards from 1 to 9), with the text string by name 03 and by calling procedure 08 by pressing. <br><br>  To be honest, now the syntax looks just awful.  It is damn complex and has very few features.  But this is just a prototype.  In the future I plan to stuff all primitive operations on libraries, making them shorter and more convenient.  There is still no possibility to call a procedure from another procedure, which is caused by a stupidly written compiler.  Now by the way about him. <br><br><h4>  3. Interpreter </h4><br>  The main interpreter parser reads the program, breaks it into pieces and sends them to the subparsers, which in turn can have their own subparsers.  Based on the results of the work of numerous parsers, the program is assembled in pieces at not less than small factories.  Finished procedures, variables, and components fall into the Main class. <br><img src="https://habrastorage.org/storage2/73c/210/6f8/73c2106f877f11508ea60d8c91a345f8.png"><br>  In the Main class, everything is contained in separate HashMaps.  An example of such a HashMap is the namesOfVariables: <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getVariable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Byte name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> namesOfVariables.get(name); }</code> </pre><br>  And so that access to variables and components is from procedures and primitive operations, the Procedure class is an inheritor of the ProgramUnit class (in the figure designated as Main), and the primitive operation extends the Procedure class. <br>  In the procedure class, the variable taking method is overridden.  By adding a couple of lines to it, you can implement the mechanism of local variables. <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getVariable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Byte name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> superiorUnit.getVariable(name); }</code> </pre><br><br>  To be honest, the interpreter is the most boring part of what was done, so enough about it. <br><br><h4>  4. Example of use </h4><br>  And now I will show you something for which you actually started reading this article.  An example of the current program in the language QuRava. <br>  In this example, byte numbers are used, not their hex equivalents! <br><br>  <code>02,03,00</code> - Announcement of an empty string named 00 <br>  <code>02,01,01</code> - declaration of a variable of type int by name 01 <br>  <code>02,01,02</code> - declaration of a variable of type int by name 02 <br>  <code>06,03,03,80,108,117,115</code> - announcement of the line with the text ‚ÄúPlus‚Äù <br><br>  <code>04,11,04,01,00</code> - creating a variable text field named 04 <br>  <code>05,09,05,02,03,08</code> - creating a button named 05 calling procedure 08 when pressed <br>  <code>04,11,06,03,00</code> - creating a variable text field named 06 <br>  <code>04,13,07,08,00</code> - creating an immutable text field named 07 <br><br>  <code>31,04,08</code> - announcement of procedure by name 08 <br>  <code>........03,42,00,04</code> - read the text recorded in field 04 and put it in line 00 <br>  <code>........03,41,01,00</code> - we translate the line 00 to int and write the result in the variable 01 <br>  <code>........03,42,00,06</code> - read the text recorded in field 06 and put it on line 00 <br>  <code>........03,41,02,00</code> - we translate the line 00 into int and we write the result in the variable 02 <br>  <code>........04,14,01,01,02</code> - add variables 01 and 02 and write the result in 01 <br>  <code>........03,40,00,01</code> - we translate the value 01 into a string and write the result in 00 <br>  <code>........03,43,07,00</code> - we display in the text field 07 a line 00 <br><br>  Well, actually a demonstration of work: (sorry for the quality) <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/tZ3IQuB9ntU%3Ffeature%3Doembed&amp;xid=17259,1500008,15700019,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhhzr7ksOOl2mCh9R-DpOQHJib2Wow" frameborder="0" allowfullscreen=""></iframe><br><br><h4>  5. Further development </h4><br>  Now I showed you only the alpha version of the prototype of what I want to do.  In the future, I would like to add a lot of interesting things to the QuRava language: <br><br><ul><li>  develop a simple and powerful syntax </li><li>  add regular expressions, arrays, loops and more </li><li>  to distribute all primitive operations among libraries duplicating the main classes-libraries of Java itself (such as Math or Arrays, for example. </li><li>  add the ability to call procedures from other procedures and local variables </li><li>  add work with the network, the function of downloading additional content from the network to the program or even logic </li><li>  write a bunch of standard libraries </li><li>  write a compiler for the desktop and a small but convenient IDE to it </li><li>  write comprehensive language help </li><li>  put the project on github </li></ul><br>  Unfortunately so far there is almost nothing to show, so I will not post any links.  If it is interesting, then I will work on it and write another article. <br>  In the meantime, I want to conduct a survey. </div><p>Source: <a href="https://habr.com/ru/post/180989/">https://habr.com/ru/post/180989/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../180973/index.html">DOOM 3 BFG - source code review: introduction (part 1 of 4)</a></li>
<li><a href="../180977/index.html">The digest of news from the world of mobile development for the last week ‚Ññ13 (May 20 - 26, 2013)</a></li>
<li><a href="../180979/index.html">Phdays 2013 The end</a></li>
<li><a href="../18098/index.html">Passive fool protection</a></li>
<li><a href="../180983/index.html">And again about the eternal: improving page 404 for wordpress</a></li>
<li><a href="../180993/index.html">Generate text versions of letters from HTML using lynx</a></li>
<li><a href="../180995/index.html">The optimal algorithm of the game in the sea battle</a></li>
<li><a href="../180997/index.html">The collapse of anonymous payments. At rest goes LibertyReserve. Or not</a></li>
<li><a href="../181/index.html">"Optimist" earned?</a></li>
<li><a href="../1810/index.html">Finns again chopped off the Internet in St. Petersburg</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
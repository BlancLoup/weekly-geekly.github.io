<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to integrate TeamCity and Bitbucket Server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bitbucket Server (formerly known as Stash) is a solution for centralized development management that allows you to manage your repositories, including...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to integrate TeamCity and Bitbucket Server</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/a3a/ced/a49/a3aceda4932b4ea7aa698bccf075616a.png"><br><br>  <a href="https://www.atlassian.com/software/bitbucket">Bitbucket Server</a> (formerly known as Stash) is a solution for centralized development management that allows you to manage your repositories, including without opening access to them from outside the organization.  Bitbucket allows you to simplify storage of repositories with source codes on your server and provides ease of access to repositories for all members of your team. <br><br>  In the IT world, it is known that Bitbucket can be integrated with other products and platforms into a single ecosystem that makes the development process comprehensive and convenient.  Most often, Bitbucket integrates with <a href="https://www.atlassian.com/software/jira">JIRA</a> .  However, the search for and localization of problems is not the only task that a typical development process faces every day, and even several times a day.  A more important task is to preserve the integrity of the project in the process of making additions and corrections to the code.  For these tasks, you can use the CI server, which, among other things, allows you to create project assemblies and run a series of tests to automatically verify functionality. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Bitbucket out of the box offers integration with <a href="https://www.atlassian.com/">Atlassian's</a> related solution, <a href="https://www.atlassian.com/software/bamboo">Bamboo</a> .  But, in addition to Bamboo, there are other CI-solutions that are also quite popular - <a href="https://www.jetbrains.com/teamcity/">TeamCity</a> and <a href="http://jenkins-ci.org/">Jenkins</a> .  In our post we will outline the specifics of the integration of Bitbucket and TeamCity. <br><br><a name="habracut"></a><br><br><h3>  REST API as an integration point with Bitbucket </h3><br>  Since Bitbucket acquired the REST API (in fact, it was always with Stash and expanded as the Stash / Bitbucket Server functionality developed - note of the translator), it became much easier for him to work and build solutions for each case study.  Currently, there are several add-ons for integrating Bitbucket with CI-systems and obtaining information on the status of assemblies.  By examining commits in the repository, you can simultaneously see the build status and easily go to TeamCity to study the problems encountered when building a particular commit, or simply download the latest version of the application for the client. <br><br><h3>  Tools for the integration of TeamCity and Bitbucket </h3><br>  On the Internet, you can find two TeamCity plugins that can be used to integrate with Bitbucket.  <a href="https://github.com/JetBrains/commit-status-publisher">Commit Status Publisher was</a> released directly by <a href="http://www.jetbrains.com/">JetBrains</a> , the other - <a href="https://github.com/mendhak/teamcity-stash">TeamCity Stash Integration</a> - was developed by <a href="https://github.com/mendhak">mendhak</a> .  Both have proven to work as a means of integrating Teamcity and Bitbucket.  Let's take a look at each of them and look for their pros and cons. <br><br><h3>  Installing plugins in Teamcity </h3><br>  Installing plug-ins in TeamCity is quite simple and follows the <a href="https://confluence.jetbrains.com/display/TCD9/Installing%2BAdditional%2BPlugins">documentation</a> .  We load zip-archives with plug-ins through the administrative console of Teamcity, restart Teamcity.  Plugins are available and ready to help you get the information you need. <br><br><img src="https://habrastorage.org/files/b34/316/37d/b3431637d1d84ad389c81d60ed9c104c.png"><br><br><h3>  Jet Status Publisher from JetBrains </h3><br>  First of all, let's introduce the ‚Äúnative‚Äù plugin from the developer of the TeamCity itself, since the integration tools from the ‚Äúdeveloper‚Äù are usually convenient, thoughtful and functional.  Configure the assembly to transfer the status of the assembly to Bitbucket.  To do this, add the Build Feature with the type Commit status publisher (this type becomes available after installing the plugin from JetBrains).  Finish connecting to Bitbucket. <br><br><img src="https://habrastorage.org/files/9ac/4ee/74b/9ac4ee74b96b4672b04766c839b569e8.png"><br><br>  After the setup is complete, run the build and verify that Bitbucket received the data from TeamCity. <br><br><img src="https://habrastorage.org/files/56f/7c5/fe4/56f7c5fe4294499e8bd9c813ea9fc7c3.png"><br><br>  Clicking on the assembly icon opens a window containing information about the project, configuration, and assembly number.  The number of passed and ignored tests is also displayed. <br><br><img src="https://habrastorage.org/files/2e4/e95/ec6/2e4e95ec6bdf45f99e143686e7b78397.png"><br><br>  When viewing the details of the pull request, you can also open the form with the assembly information. <br><br><img src="https://habrastorage.org/files/9d2/445/17b/9d244517b8644fe4bbec2bed36099e2e.png"><br><br><h3>  Teamcity Stash (Bitbucket) integration from <a href="https://github.com/mendhak">mendhak</a> </h3><br>  Plugin is configured similarly to the solution from JetBrains.  After installation, a build feature appears with the name Report build status to Atlassian Bitbucket.  Unlike the JetBrains addon, more settings appear.  You can, for example, mark a canceled assembly in Bitbucket as unsuccessful.  Or do not show the status of all builds in Bitbucket, leaving only the status of the last build for each commit. <br><br><img src="https://habrastorage.org/files/afb/e9e/eac/afbe9eeace3141428874c2dbbddb3f76.png"><br><br>  After the code commit, you can see the assemblies that depend on this commit and their status. <br><br><img src="https://habrastorage.org/files/65d/63b/454/65d63b4547764fcf9a8996bc3aab8a12.png"><br><br><h3>  Which plugin to choose? </h3><br>  It should be noted that they are very similar to each other.  Both use the Bitbucket REST API to update build statuses.  Both are very easy to install and configure.  On the side of the ‚Äúnative‚Äù plug-in from JetBrains is support for new versions of TeamCity (in TeamCity 10 this plug-in will be built out of the box - translator's note), fast release of new versions and support from a team of world-famous developers.  On the side of TeamCity Stash (Bitbucket) Integration - a bit more functionality and detailed instructions on how to configure the plugin.  The choice of add-on is yours and depends on your requirements and wishes. </div><p>Source: <a href="https://habr.com/ru/post/282457/">https://habr.com/ru/post/282457/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../282435/index.html">"And how well everything began ...", or the benefits of O-notation, not only for the analysis of algorithms</a></li>
<li><a href="../282441/index.html">Mill Fighting - 1: Interpolation Splines</a></li>
<li><a href="../282443/index.html">MNP and Appearance API 1.0 - Voluntary Eating Cacti</a></li>
<li><a href="../282449/index.html">Silent revolution: the introduction of x86-architecture instead of RISC-machines for bank processing</a></li>
<li><a href="../282455/index.html">Why security experts prefer outdated email clients</a></li>
<li><a href="../282459/index.html">Connect to the online broadcast! Opening conference Xamarin Evolve April 27</a></li>
<li><a href="../282461/index.html">Free selection of 40 CSS effects</a></li>
<li><a href="../282463/index.html">The first update of the stable branch Vivaldi 1.1</a></li>
<li><a href="../282465/index.html">One little problem downloading files on slow connections</a></li>
<li><a href="../282467/index.html">How to connect the Internet in one day and set up telephony in the office?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
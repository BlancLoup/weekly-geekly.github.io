<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Do you want to distribute elements, tied to their number, on the same styles? Yes, easily</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The alternative title of the article is ‚Äúalmost: child-count (n)‚Äù. Because that's how it all works. On bare CSS and without any data attributes or any...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Do you want to distribute elements, tied to their number, on the same styles? Yes, easily</h1><div class="post__text post__text-html js-mediator-article">  The alternative title of the article is ‚Äúalmost: child-count (n)‚Äù.  Because that's how it all works.  On bare CSS and without any data attributes or anything else in the layout. <br><br>  Imagine that you have, for example, some news feed.  No matter what.  The main thing is that you do not know how many elements there will be in it, and how to arrange them so that it is symmetrical.  And I want to do something useless, but beautiful: for example, put everything in two columns, and insert some blocks in full width.  Every third, or every fifth. <br><br>  Of course, if you have four elements, and you have made the third full width, the last one will hang at the end.  Therefore, you need to apply such a beautiful and useless thing only if the number of elements is a multiple of three.  And if there is an odd number of them (but not a multiple of three) - for example, the last element in the entire tire must be done. <br>  So, for example: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/d60/c5d/72c/d60c5d72c9df2d360863745352c1f4e2.png"><br><br><a name="habracut"></a><br><br>  Or, for example, you decided to make a radio, as in GTA 5. Here it is: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2c8/a00/e85/2c8a00e85e6aaf67f1e36fa16e4c7e22.jpg" alt="image"><br><br>  And you want to place the elements in a circle, but you do not know how many of them.  Of course, for different cases - you need to specify a different transform: rotate ().  Well, or, if desired, you can arrange everything through the left and top, relying on sin and cos.  But still, you need to know how many items you have. <br><br>  In the project, where it was necessary to implement just such a feature, I first did everything through the simplest js: <br><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">countElementChildren</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">element</span></span></span><span class="hljs-function">) </span></span>{ $(element).attr(<span class="hljs-string"><span class="hljs-string">'children'</span></span>, $(element).children().length) }</code> </pre> <br><br>  And in scss worked directly with <br><br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> $i from <span class="hljs-number"><span class="hljs-number">1</span></span> through <span class="hljs-number"><span class="hljs-number">20</span></span> { <span class="hljs-selector-class"><span class="hljs-selector-class">.parent</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[children="#{$i}"]</span></span> { @for $j from 1 through $i { &amp; &gt; :nth-child(#{$j}) { <span class="hljs-attribute"><span class="hljs-attribute">transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate</span></span>(360deg * (($j - 1) / ($i - <span class="hljs-number"><span class="hljs-number">1</span></span>))); } } } }</code> </pre><br><br>  <i>I hope this code is clear to everyone.</i>  <i>If not, it unfolds in a construct of the form .parent [children = 2]&gt;: nth-child (0) {transform: rotate (0deg)} and further along the cycle</i> <br><br>  It was possible to wrap up a call to this function in MutationObserver to keep track of the number of descendants, but still there was a feeling that this decision was wrong ‚Äî it was just a style that did not relate to the main logic. <br><br>  Probably, every person who has been engaged in styles for quite a long time, somewhere on the level of intuition, a detector appears, ‚Äúcan it be done on the same styles‚Äù. <br>  As a result, almost a day the search for a solution was going on, how can the number of elements be determined?  There were even two solutions, though very similar. <br>  The logic was quite simple, technically we can refer to almost any element forward (through ~ and +), but to determine the number of elements in the list, you must be able to go ahead, count all the elements and go back. <br>  "Reverse" movement is possible with just two attributes - nth-last-of-type and nth-last-child. <br>  At the same time, this movement is actually performed from the last element, so that in the end you need to go through all the elements from the first to the last through nth-last-child and find the "final" element through the first-child <br>  As a result, the first version of the selector was <br><br><pre> <code class="css hljs"><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-last-child(20)</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:first-child</span></span> { }</code> </pre><br><br>  which allowed us to refer to the first element if it is 20th from the end (that is, its parent has only 20 children). <br>  Go to any of the following element could be something like this: <br><br><pre> <code class="css hljs"><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-last-child(20)</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:first-child</span></span> ~ <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-child(10)</span></span> { }</code> </pre><br><br>  This gave readability, but it still looked somewhat cumbersome. <br>  It was just the time to recall that: first-child is a special case of: nth-child (1), in the end we got a selector <br><br><pre> <code class="css hljs"><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-child(1)</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-last-child(20)</span></span> { }</code> </pre><br><br>  What made it possible to move right and left by any means, clearly ‚Äúclinging‚Äù to the beginning and end of the list of children. <br><br>  In real scss, it turned into a similar, somewhat monstrous design. <br><br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> $i from <span class="hljs-number"><span class="hljs-number">1</span></span> through <span class="hljs-number"><span class="hljs-number">20</span></span> { @<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> $j from <span class="hljs-number"><span class="hljs-number">1</span></span> through $i { <span class="hljs-selector-class"><span class="hljs-selector-class">.child</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-child(</span></span>#{$j})<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-last-child(</span></span>#{$i - $j}) { @include transform(rotate(360deg * (($j - 1) / ($i - 1)))) } } }</code> </pre><br><br>  Here are some examples of how this works: <br>  <a href="http://codepen.io/Jabher/pen/EjvwB">An example with different width of blocks depending on their number</a> <br>  <a href="http://codepen.io/Jabher/pen/IyDAp">An example with a uniform distribution of elements in a circle</a> <br><br>  These examples are perhaps somewhat contrived, but in reality they show the real possibilities of such a ‚Äúpoint‚Äù conditional reference to elements. <br><br>  Of the minuses, I could name only the large size of the output css file: for a construction with 20 elements, each selector of which had 14 lines due to vendor prefixes, the length of the final style was about 2000 lines. <br><br>  I do not know how else this can be used, but there is clearly something in it, something big and interesting.  If you have ideas, I‚Äôll be happy to add their examples here at the end of the post. </div><p>Source: <a href="https://habr.com/ru/post/198322/">https://habr.com/ru/post/198322/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../198306/index.html">WebGL Beginner's Guide Chapter 1: Getting Started With WebGL</a></li>
<li><a href="../198312/index.html">Php json has been removed from php 5.5?</a></li>
<li><a href="../198316/index.html">DIY dimmer for those who want it themselves</a></li>
<li><a href="../198318/index.html">The digest of interesting news and materials from the world of PHP for the last two weeks, No. 28 (October 6‚Äî20, 2013)</a></li>
<li><a href="../198320/index.html">Creating a 1k / 4k intro for Linux, part 4</a></li>
<li><a href="../198324/index.html">Nvidia announced full support for Linux on equal terms</a></li>
<li><a href="../198328/index.html">Dependency Injection in Objective-C with Magic and Blood</a></li>
<li><a href="../198330/index.html">6 tips for creating complex AJAX sites</a></li>
<li><a href="../198332/index.html">Creating extensions in PostgreSQL</a></li>
<li><a href="../198336/index.html">Apogee: Man Orchestra and Online Game Publisher 1987 (continued)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
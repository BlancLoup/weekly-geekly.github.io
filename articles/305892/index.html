<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Modal windows on Angular, Angular 2 and ReactJS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, we will look at how to create pop-up and overlapping elements on React, Angular 1.5 and Angular 2. We implement the creation and disp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Modal windows on Angular, Angular 2 and ReactJS</h1><div class="post__text post__text-html js-mediator-article"><p>  In this article, we will look at how to create pop-up and overlapping elements on React, Angular 1.5 and Angular 2. We implement the creation and display of a modal window on each of the frameworks.  All code is written in typescript.  The source code for the samples is available <a href="https://github.com/rd-dev-ukraine/lore/tree/master/ui-framework-popup">on github</a> . </p><a name="habracut"></a><br><h1>  Introduction </h1><br><p>  What are "pop-up and overlapping" elements?  These are DOM elements that appear above the main content of the document. </p><br><p>  These are various pop-up windows (including modal), drop-down lists and menus, panels for date selection, and so on. </p><br><p> As a rule, absolute positioning is used for such elements in window coordinates (for modal windows) using <code>position: fixed</code> , or absolute positioning in document coordinates ‚Äî for menus, drop-down lists that should be located near their ‚Äúparent‚Äù elements ‚Äî using <code>position: absolute</code> . </p><br><p>  Simply placing pop-up items near the "parents" and hiding / displaying them does not work completely.  The reason is parent containers with <code>overflow</code> other than <code>visible</code> (and <code>fixed</code> ).  Anything that protrudes beyond the container will be clipped.  Also, such elements can overlap with elements below the tree, and z-index does not always help here, as it works only within the same <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context">context overlay</a> . </p><br><p>  In an amicable way, this problem could be elegantly solved by the Shadow DOM (and even then, not a fact), but so far it is not ready.  Could help CSS property prohibiting trimming and overlapping, or positioning relative to the document (and not the parent), but it is not.  Therefore, we use a crutch - DOM elements for pop-up components are placed in the <code>body</code> , well, or, at worst, closer to it, in a special container, whose parents obviously do not have ‚Äútrimming‚Äù styles. </p><br><p>  Note: we will not consider the positioning of elements with different coordinates and parents - this is a separate complex topic, full of crutches, javascript and handling unexpected browser events. </p><br><p>  For example, none of the existing methods ideally solves the positioning problem if we need to make a component of type <code>select</code> or autocomplete with a drop-down list near the element. </p><br><p>  Using <code>position: fixed</code> , apparently, allows you to avoid clipping the parent container, but it forces you to scroll the document and container (the easiest way to close the drop-down list is stupid).  Using <code>position: absolute</code> and placing the element in the <code>body</code> handles the scrolling of the document correctly, but requires recalculation of the position when scrolling the container. </p><br><p>  All methods require handling the resize event.  In general, there is no good solution here. </p><br><h1>  Examples </h1><br><p>  All examples contain the same layout, and consist of an input field with text and a button.  By clicking on the button, the entered text appears in the "modal" window with the "Close" button. </p><br><p>  All examples are written in typescript.  For compilation and bandling webpack is used.  To run the examples, you must have NodeJS installed. </p><br><p>  To start, go to the folder with the corresponding example and run <code>npm run prepare</code> NodeJS command line once to install the global and local packages.  Then run the <code>npm run server</code> .  After that, open the browser address <a href="http://localhost:8080/">http: // localhost: 8080</a> </p><br><p>  If you are too lazy to do this, you can simply open in the browser <code>index.html</code> from the folder of the corresponding example. </p><br><h1>  Angular 1.5 </h1><br><h2>  Components </h2><br><p>  In version 1.5, Angular purchased syntactic sugar as a <code>component</code> method from a module that allows you to declare components.  Components are actually directives, but their ad code is focused on creating application domain building blocks, while directives are more oriented (ideologically, technically everything is identical) to low-level and imperative work with the DOM.  This innovation is simple, but cool, and allows you to declare components in a way similar to Angular 2. This method does not introduce any new features, but can drastically affect the structure of the application, especially if you used <code>&lt;div ng-controller="MyController as $c"&gt;...&lt;/div&gt;</code> . </p><br><p>  From myself I can add that I am delighted with this opportunity.  It allows you to create components with a clear contract and high potential for reuse.  Moreover, with this feature, I refused to render the HTML markup of the component into a separate file, since  the markup is small and neat ‚Äî it uses embedded components ‚Äî and does not clutter the source of the component. </p><br><p>  In the example, I also use this feature, so if you are not familiar with it, you can read it <a href="https://docs.angularjs.org/guide/component">here</a> . </p><br><h2>  Two ways </h2><br><p>  There are probably more ways to put a component in an arbitrary place in the DOM.  I will show two of them, one with the help of the <code>$compile</code> service, the second with the directive with <code>transclude</code> . </p><br><p>  The first method is imperative, and is more suitable for ad-hoc display of modal windows, for example, for displaying messages or prompting the user for some parameters.  This method can also be used if the component type is unknown, or the markup is dynamic. </p><br><p>  The second method is declarative, it allows you to embed a pop-up element in the component template, <br>  but when showing it, put it in the <code>body</code> .  Suitable for drop-down components, allowing for responsive control of visibility. </p><br><h2>  Method 1: $ compile </h2><br><p>  The <code>$compile</code> allows you to convert a string with Angular markup to a DOM element and associate it with <code>$scope</code> . <br>  The resulting element can be added to an arbitrary place in the document. </p><br><p>  It's pretty simple. </p><br><p>  Here <a href="https://docs.angularjs.org/api/ng/service/%24compile">is the</a> service <a href="https://docs.angularjs.org/api/ng/service/%24compile">documentation</a> .  The link is a complete guide to the API directives, the part of interest at the very end is the use of <code>$compile</code> as a function. </p><br><p>  We get access to <code>$compile</code> </p><br><pre> <code class="hljs bash">// popup.service.ts import * as angular from <span class="hljs-string"><span class="hljs-string">"angular"</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> class PopupService { static <span class="hljs-variable"><span class="hljs-variable">$inject</span></span> = [<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$compile</span></span></span><span class="hljs-string">"</span></span>]; constructor(private <span class="hljs-variable"><span class="hljs-variable">$compile</span></span>: angular.ICompileService) {} }</code> </pre><br><p>  The <code>static $inject=["$compile"]</code> equivalent to the following Javascript code: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PopupService</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$compile</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$compile = $compile; } PopupService.$inject = [<span class="hljs-string"><span class="hljs-string">"$compile"</span></span>];</code> </pre> <br><p>  <code>$compile</code> works in two phases.  At first, it converts a string to a factory function.  On the second, you need to call the received factory and pass it <code>$scope</code> .  The factory will return DOM elements associated with this $ scope. </p><br><p>  <code>$compile</code> takes three arguments, we are only interested in the first one.  The first argument is a string containing the HTML template, which will then be converted into a working fragment of the Angular application.  In the template, you can use any registered components from your module and its dependencies, as well as any valid Angular constructions - directives, string interpolation, etc. </p><br><p>  The result of the compilation will be a factory - a function that allows you to associate a string pattern with any <code>$scope</code> .  Thus, specifying a template, you can use any fields and methods of your scopa.  For example, this is how the popup window opening code looks like: </p><br><pre> <code class="hljs bash">/// <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>-popup.component.ts <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> class TestPopupComponentController { static <span class="hljs-variable"><span class="hljs-variable">$inject</span></span> = [<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$scope</span></span></span><span class="hljs-string">"</span></span>, PopupService.Name]; text: string = <span class="hljs-string"><span class="hljs-string">"Open popup with this text"</span></span>; constructor( private <span class="hljs-variable"><span class="hljs-variable">$scope</span></span>: angular.IScope, private popupService: PopupService) { } <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">openPopup</span></span></span></span>() { const template = `&lt;popup-content text=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$c</span></span></span><span class="hljs-string">.text"</span></span> ...&gt;&lt;/popup-content&gt; ` this.popupService.open(template)(this.<span class="hljs-variable"><span class="hljs-variable">$scope</span></span>); } }</code> </pre><br><p>  Pay attention to a few things. </p><br><p>  First, the template contains the <code>&lt;popup-content&gt;&lt;/popup-content&gt;</code> component. <br>  Secondly, the template contains a call to the controller's <code>text</code> field: <code>text="$c.text"</code> . <br>  <code>$c</code> is the controller alias specified when the component is declared. </p><br><p>  <code>PopupService.open</code> also returns a factory that allows you to associate a template with <code>$scope</code> .  In order to associate a dynamic component with the <code>$scope</code> our component, you have to pass <code>$scope</code> to the controller. </p><br><p>  Here‚Äôs what <code>PopupService.open</code> looks <code>PopupService.open</code> : </p><br><pre> <code class="hljs coffeescript"><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> popup.service.ts open(popupContentTemplate: string): <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($scope: angular.IScope)</span></span></span><span class="hljs-function"> =&gt;</span></span> () =&gt; void { const content = `<span class="javascript"><span class="javascript"> &lt;div </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span></span><span class="javascript">=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"popup-overlay"</span></span></span><span class="javascript">&gt; ${popupContentTemplate} &lt;</span><span class="hljs-regexp"><span class="javascript"><span class="hljs-regexp">/div&gt; </span></span></span></span>`; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($scope: angular.IScope) =&gt; { const element = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$compile(content)($scope); const popupElement = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.appendChild(element[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> () =&gt; { body.removeChild(popupElement); }; }; }</code> </pre><br><p>  In our function, we wrap the passed template in the markup of a modal window.  Then we compile the template, getting the factory of dynamic components.  Then we call the resulting factory, passing <code>$scope</code> , and we get the HTML element, which is a fully working fragment of the Angular application associated with the transferred <code>$scope</code> .  Now you can add it anywhere in the document. </p><br><p>  Although our <code>PopupService.open</code> method also returns a factory to communicate with <code>$scope</code> , it does additional work.  First, when the factory is called, it not only creates the element, but also adds it to the <code>body</code> .  Secondly, it creates a function that allows you to "close" the pop-up window, removing it from the document.  <code>PopupService.open</code> returns this function to close the window. </p><br><p>  Well, the option is not so bad.  Although the window mapping itself is imperative, however, the contents of the window are still reactive, and can be declaratively related to the parent <code>$scope</code> .  Although you have to use strings to display content, but if you make the content of the window itself as a component, you only need to bind the input and output properties, and not all the content.  The method allows you to place the pop-up element anywhere in the document, even if it is outside the <code>ng-app</code> . </p><br><h2>  Method 2: transclude directive </h2><br><p>  The second method allows you to set the contents of the pop-up element right next to its "parent".  When displayed, the element will actually be added to the <code>body</code> . </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-group"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> Enter text to display in popup: <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-control"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-model</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$c.text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn btn-default"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$c.openInlinePopup()"</span></span></span><span class="hljs-tag">&gt;</span></span> Open inline <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--     body --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">popup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$c.popupVisible"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">popup-content</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$c.text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">close</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$c.closeInlinePopup()"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">popup-content</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">popup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><p>  Here the required directive is <code>&lt;popup&gt;...&lt;/popup&gt;</code> .  Everything inside it will be shown in a pop-up window, and located in the <code>body</code> . </p><br><p>  A small drawback of this method is that showing and hiding the window is necessary with the help of the <code>ng-if</code> directive, which will physically remove / add content to the DOM tree. </p><br><h3>  transclude </h3><br><p>  <code>transclude</code> is a way of directives to work with its content.  By content is meant what is located between the opening and closing tags of the directive. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-directive</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- ,   my-directive,   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">other-component</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">other-component</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-directive</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  This is a very powerful feature, on the basis of which you can do a lot of interesting things.  We will take the content and put it in the <code>body</code> . </p><br><p>  How to use <code>transclude</code> ?  Directly using content (for example, through <code>$element.children</code> ) is impossible - it is not associated with the correct scope, and is not compiled (no directives are replaced, etc.).  To use <code>transclude</code> you need to access the so-called.  <code>transclude function</code> .  This is a factory that can create compiled copies (clones) of content.  These clones will be compiled and linked to the correct scope, and in general, very similar to the output of <code>$compile</code> .  The transclude function, however, does not return a value like a normal factory, but passes it to a callback function. </p><br><p>  You can create as many clones as you like, redefine the scope with it, add the document to any place, and so on.  Great. </p><br><p>  For directives that control the content themselves (they call the transclude function), you must implement lifecycle methods to clear the contents.  These methods are implemented in the directive controller.  Delete the added content needed in <code>$onDestroy</code> . </p><br><p>  The last thing left is how to access the transclude function.  It is transmitted in several places, but we will inject it into the controller.  In order for it to be passed, <code>transclude: true</code> must be set in the directive configuration. </p><br><p>  So, the complete code: </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> angular <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"angular"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PopupDirectiveController</span></span></span><span class="hljs-class"> </span></span>{ private content: Node; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(private transclude: angular.ITranscludeFunction) { } $onInit() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transclude(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">clone</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> popup = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">"div"</span></span>); popup.className = <span class="hljs-string"><span class="hljs-string">"popup-overlay"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; clone.length; i++) { popup.appendChild(clone[i]); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.content = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.appendChild(popup); }); } $onDestroy() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.content) { <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.removeChild(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.content) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.content = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> name = <span class="hljs-string"><span class="hljs-string">"popup"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> configuration: angular.IDirective = { <span class="hljs-attr"><span class="hljs-attr">controller</span></span>: [<span class="hljs-string"><span class="hljs-string">"$transclude"</span></span>, PopupDirectiveController], <span class="hljs-attr"><span class="hljs-attr">replace</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">restrict</span></span>: <span class="hljs-string"><span class="hljs-string">"E"</span></span>, <span class="hljs-attr"><span class="hljs-attr">transclude</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> };</code> </pre> <br><p>  Not bad, just 36 lines. </p><br><p>  Benefits: </p><br><ul><li>  Fully reactive display and hide, reactive content </li><li>  Conveniently distributes the "virtual" location in the component tree and the "physical" location in the DOM tree. </li><li>  Declaratively tied to the current scope. </li></ul><br><p>  Disadvantages: </p><br><ul><li>  In this implementation, you need to use <code>ng-if</code> to control the display. </li></ul><br><h1>  Angular 2 </h1><br><p>  The new version of Angular, which differs from the first so much that, in fact, it is a new product. <br>  My impressions of him are twofold. </p><br><p>  On the one hand, the component code is clearly cleaner and clearer.  When writing business components, the separation of code and presentation is excellent, change tracking works fine, goodbye <code>$watch</code> and <code>$apply</code> , excellent tools for describing a component contract. </p><br><p>  On the other hand, does not leave a feeling of monstrosity.  <a href="https://angular.io/docs/ts/latest/quickstart.html">5 min quickstart</a> looks like a mockery.  Many additional libraries, many of which are mandatory (like <code>rxjs</code> ).  The fact that I can see <strong>Loading ...</strong> when opening a document <em>from the file system</em> raises doubts about its speed.  The size of the bundle is 4.3MB versus 1.3MB for Angular 1 and 700KB React (but this is no optimizations, default webpack bundling).  (I remind you that webpack collects (bandit) all the code of the application and its dependencies (from npm) into one big javascript file). </p><br><p>  Minified size: Angular 1 - 156KB, Angular 2 - about 630KB, depending on the version, React - 150KB. </p><br><p>  Angular 2 at the time of writing yet RC.  The code is almost ready, there seems to be no bugs, the basic things are done (well, except maybe reworking the forms).  However, the documentation is incomplete, many things have to be found in the comments to the github issue <br>  (such as dynamic loading of components, which, in fact, prompted me to write this article). </p><br><h2>  Disclaimer </h2><br><p>  I didn‚Äôt want to spend an hour and a half on the steps described in the mentioned 5 min quickstart, so the project is not completely configured, ahem, traditionally for Angular 2. SystemJS is not used, instead it becomes a webpack.  Moreover, Angular 2 is not specified as externals, but is taken from the npm package as is.  The result is a giant bundle of 4.5MB in weight.  Therefore, do not use this configuration in production unless, of course, you want users to hate your download indicator.  The second oddity, which does not know what caused it, is the different names of the modules.  In all examples (including the official documentation), the Angular import looks like <code>import { } from "@angular/core"</code> .  At the same time, it did not work for me, but <code>import {} from "angular2/core"</code> works. </p><br><h2>  Dynamic loading </h2><br><p>  To its credit, Angular 2, the dynamic loading code is difficult only when searching.  For dynamic loading, the <a href="https://angular.io/docs/ts/latest/api/core/index/ComponentResolver-class.html">ComponentResolver</a> class is used in conjunction with the <a href="https://angular.io/docs/ts/latest/api/core/index/ViewContainerRef-class.html">ViewContainerRef</a> . </p><br><pre> <code class="hljs pgsql">//      . //  -    ( -) loadComponentDynamically(componentType: <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span>, container: ViewContainerRef) { this.componentResolve .resolveComponent(componentType) .<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>(factory =&gt; container.createComponent(factory)) .<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>(componentRef =&gt; { //       componentRef.instance; //   ElementRef ,     componentRef.<span class="hljs-keyword"><span class="hljs-keyword">location</span></span>; //    DOM . componentRef.<span class="hljs-keyword"><span class="hljs-keyword">location</span></span>.nativeElement; //   componentRef.destroy(); }); }</code> </pre> <br><p>  <code>ComponentResolver</code> easy to get through dependency injection.  <code>ViewContainerRef</code> , apparently, cannot be created for an arbitrary DOM element, and can only be obtained for an existing Angular component.  This means that it is impossible to place a dynamically created element in an arbitrary place in the DOM tree, at least in a release candidate. </p><br><p>  Therefore, our mechanism for showing pop-ups will be integral. </p><br><p>  First, we will have a component to which pop-up elements will be dynamically added.  It will need to be placed somewhere in the component tree, preferably closer to the root element.  In addition, none of its parent containers should contain styles that trim the contents.  In the code, this is <code>overlay-host.component.ts</code> . </p><br><p>  Secondly, we have an auxiliary component that contains markup for pop-up windows.  This is the <code>OverlayComponent</code> in which the dynamically generated component is wrapped. </p><br><p>  Thirdly, we have a service that provides communication between the host component for pop-ups and clients who want to show the component.  The service is fairly simple, the host component registers itself in it when it is created, and the service method simply redirects calls to open the window to that host component. </p><br><h2>  Host component </h2><br><p>  I will bring the whole class, it is not very big, and then I will go through thin places: </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Component, ComponentRef, ComponentResolver, OnInit, Type, ViewChild, ViewContainerRef } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"angular2/core"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { OverlayComponent } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./overlay.component"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { IOverlayHost, OverlayService } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./overlay.service"</span></span>; @Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">"overlay-host"</span></span>, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;template #container&gt;&lt;/template&gt;"</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OverlayHostComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IOverlayHost</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ @ViewChild(<span class="hljs-string"><span class="hljs-string">"container"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">read</span></span>: ViewContainerRef }) container: ViewContainerRef; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>( private overlayService: OverlayService, private componentResolver: ComponentResolver) { } openComponentInPopup&lt;T&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">componentType: Type</span></span></span><span class="hljs-function">): </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Promise</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ComponentRef</span></span></span><span class="hljs-function">&gt; { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">componentResolver</span></span></span><span class="hljs-function"> .</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolveComponent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">OverlayComponent</span></span></span><span class="hljs-function">) .</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">then</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">factory =&gt; </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.container.createComponent(factory</span></span></span><span class="hljs-function">)) .</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">then</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(overlayRef: ComponentRef</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> overlayRef.instance .addComponent(componentType) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function"> =&gt;</span></span> { result.onDestroy(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { overlayRef.destroy(); }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }); }); } ngOnInit(): <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.overlayService.registerHost(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } }</code> </pre> <br><p>  What does this code do?  It dynamically creates a component using its type (the type of the component is its constructor function).  A pre-created component wrapper ( <code>OverlayComponent</code> ), our requested component is added to it already.  We also subscribe to the <code>destroy</code> event to destroy the wrapper when the component is destroyed. </p><br><p>  The first thing you need to pay attention to is how the <code>ViewContainerRef</code> is <code>ViewContainerRef</code> by querying the content. <br>  The <code>@ViewChild()</code> decorator allows you to get a <code>ViewContainerRef</code> called template variable <code>template: &lt;template #container&gt;&lt;/template&gt;</code> . <br>  <code>#container</code> is the template variable, the template variable.  It can be accessed by name, but only in the template itself.  To access it from a component class, the decorator is used. </p><br><p>  Honestly, I googled it, and as for me, it is generally unintuitive.  This is one of the features of the second Angular, which struck me very much - it‚Äôs very difficult, or impossible, to find solutions for typical low-level directive development tasks in the documentation.  Documentation for the creation of business components is normal, and there is nothing particularly complicated there.  However, it is impossible to find documentation for scripts for writing controls, low-level components.  Dynamic creation of components, interaction with a template from a class ‚Äî these areas are simply not documented.  Even in the <a href="https://angular.io/docs/ts/latest/api/core/index/ViewChild-var.html">@ViewChild</a> description <a href="https://angular.io/docs/ts/latest/api/core/index/ViewChild-var.html">,</a> nothing is said about the second parameter. </p><br><p>  Well, I hope, to release will document. </p><br><p>  The <code>OverlayHostComponent</code> code, which I cited above, is the most interesting in our example.  <code>OverlayComponent</code> contains similar code for dynamically adding content, <code>OverlayService</code> redirects calls to open pop-up to the host component.  I do not list listings because of the triviality, if you're interested, look at the source. </p><br><p>  Now let's see how to use it: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Component, <span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "angular2/core"; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { OverlayService } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "./overlay"; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { PopupContent } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "./popup-content.component"; @Component({ selector: "test-popup", <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>: ` &lt;div&gt; &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="form-group"&gt; &lt;label&gt; Enter <span class="hljs-type"><span class="hljs-type">text</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> display <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> popup: &lt;/label&gt; &lt;<span class="hljs-keyword"><span class="hljs-keyword">input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="form-control" [(ngModel)]="text" <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="text" /&gt; &lt;/div&gt; &lt;p&gt; &lt;button <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="btn btn-primary" (click)="openPopup()"&gt; <span class="hljs-keyword"><span class="hljs-keyword">Open</span></span> popup &lt;/button&gt; &lt;/p&gt; &lt;/div&gt; ` }) export <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> TestPopup { <span class="hljs-type"><span class="hljs-type">text</span></span>: string = "Show me in popup"; constructor(private overlayService: OverlayService) { } openPopup() { this.overlayService .openComponentInPopup(PopupContent) .<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>(c =&gt; { const popup: PopupContent = c.instance; popup.text = this.text; popup.<span class="hljs-keyword"><span class="hljs-keyword">close</span></span>.subscribe(n =&gt; { c.destroy(); }); }); } }</code> </pre> <br><p> <code>OverlayService</code>   providers <code>Root</code> ,       . </p><br><p>           <code>ComponentRef.instance</code> . </p><br><p>    :   ,   ,   .         .  ,     .        <code>isRunning</code>  . </p><br><h2>  Conclusion </h2><br><p>  ,   .   ,     ,  -   ,       DOM ,         . </p><br><p>    <a href=""> ngFor</a> ,      .        ,   ,         <code>directives</code> . </p><br><p>        DOM    ,    ,      -.      ,   ,    . </p><br><h1>  ReactJS </h1><br><p>        DOM  ‚Äî   <code>render</code> ,      DOM. ,    ,    .         <code>render</code>  <code>null</code> ,   lifecycle- <code>componentDidMount</code> , <code>componentWillUnmount</code> , <code>componentDidUpdate</code> .  <code>componentDidMount</code>  <code>componentDidUpdate</code> ,  <code>ReactDOM.render</code> ,      .  <code>componentWillUnmount</code> , , . </p><br><p> , : </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-dom"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Popup</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class">&lt;</span></span>{}, {}&gt; { <span class="hljs-attr"><span class="hljs-attr">popup</span></span>: HTMLElement; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">noscript</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">noscript</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>); } componentDidMount() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.renderPopup(); } componentDidUpdate() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.renderPopup(); } componentWillUnmount() { ReactDOM.unmountComponentAtNode(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.popup); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.removeChild(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.popup); } renderPopup() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.popup) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.popup = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">"div"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.appendChild(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.popup); } ReactDOM.render( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"popup-overlay"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"popup-content"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> { this.props.children } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.popup); } }</code> </pre><br><p>  Everything is simple and clear. ,      . </p><br><p>    Angular    .    ,      ,   .    DOM ,   .     -  <code>children</code> ,       HTMLElement,  ,     - (      <code>React.Children</code> ). </p><br><p> ,  ,   . ,  ,   <code>render</code> : </p><br><pre> <code class="hljs xml">render() { return ( <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-group"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> Enter text to display in popup: <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-control"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">this.state.text</span></span></span><span class="hljs-tag"> } </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">e</span></span></span><span class="hljs-tag"> =&gt;</span></span> this.setText(e.target.value) } type="text" /&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn btn-primary"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{e</span></span></span><span class="hljs-tag"> =&gt;</span></span> this.openPopup() } type="button" &gt; Open popup <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Ifc</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{</span></span></span><span class="hljs-tag"> () =&gt;</span></span> this.state.isPopupVisible } &gt; <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Popup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"alert alert-success"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> { this.state.text} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn btn-warning"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{e</span></span></span><span class="hljs-tag"> =&gt;</span></span> this.closePopup() } type="button" &gt; Close popup <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Popup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Ifc</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> ) }</code> </pre> <br><p> <code>Ifc</code>  ,   ,   <code>condition</code> .      IIFE,       . </p><br><p>    :   <code>&lt;Popup&gt;&lt;/Popup&gt;</code>     ‚Äî -  ,   ‚Äî  .     DOM     <code>body</code> . </p><br><p>  ,       Angular 1.5,  . </p><br><h2>  Results </h2><br><p>  , -       ,    Angular  <code>$compile</code> .                .    ( <code>ReactDOM.render</code> ),        ,    <code>openPopup</code> . ,  ,  ,    ,  . </p><br><p>    ‚Äî      . </p><br><h1>  Conclusion </h1><br><p> ,     ‚Äî   , ,  input/output   ‚Äî      Angular: by design  Angular 2,    Angular 1.5.         Angular. </p><br><p>      ‚Äî   ,   -  CSS,      -.     ,     " "  " "  .  ,  Angular 2      ,   ,    .    ,  Angular  React   (      ),              . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/305892/">https://habr.com/ru/post/305892/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../305880/index.html">What's new is expected in v4.8-rc1 core for Intel Edison. Digest</a></li>
<li><a href="../305882/index.html">Pass a technical interview (Level 4)</a></li>
<li><a href="../305886/index.html">VShBI Lectures: Game Design and Game Operations</a></li>
<li><a href="../305888/index.html">Agile API - is it possible?</a></li>
<li><a href="../305890/index.html">The digest of interesting events from the world of Java, and around it # 6 (07/04/2016 - 07/17/2016)</a></li>
<li><a href="../305894/index.html">JIT compiler optimizes not cool, but very cool</a></li>
<li><a href="../305898/index.html">Cache, Hash and Nyash Mesh</a></li>
<li><a href="../305900/index.html">ES6 humanly</a></li>
<li><a href="../305904/index.html">Haordic Organization Visa (Part 4)</a></li>
<li><a href="../305906/index.html">Increment in php</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Morphology analyzer on automata</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Periodically, articles about how to write a program for the analysis of morphology jump through to Habr√©. Most authors use databases, or standard stru...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Morphology analyzer on automata</h1><div class="post__text post__text-html js-mediator-article">  Periodically, articles about how to write a program for the analysis of morphology jump through to Habr√©.  Most authors use databases, or standard structures, such as dictionaries.  But this is not always convenient.  First, speed suffers.  Secondly, some algorithms, such as predicting the morphology of unfamiliar words, are implemented nontrivially. <br><br>  Here I present a version based on state machines, where I will try to avoid these problems.  How it works can be <a href="http://www.delinguis.com/morph">found here</a> . <br><a name="habracut"></a><br>  So, what do we want from morphology.  Usually, the morphology analysis module requires: <br><ul><li>  obtaining a lemma on a given word </li><li>  obtaining morphological information on a given word </li><li>  prediction of morphology </li></ul><br>  We will prepare all this from two ingredients: a morphological dictionary and a library of automata.  First we take (as already accepted) from the <a href="http://aot.ru/">aot.ru</a> project, thanks to them for the LGPL.  A library of machines - from here: <a href="http://openfst.org/">openfst.org</a> .  The code will be at a minimum: all the necessary operations have already been implemented in the library. <br><br><h4>  Step one.  Parsim morphological dictionary. </h4><br>  In the morphological dictionary there are lines of the form: <br> <code>                        </code> <br>  Here is an example for the word 'darkness'.  The letters MGL are the root of the word.  The rest is the endings (flexion).  We can get a lemma, or a normalized word, by adding the root and the first inflection, in this case, MSLA.  Small two-letter combinations are an ankod.  Those.  This is a code that uniquely identifies the morphology of the word form.  For example, for 'ga' this is the 'noun, feminine gender, singular, nominative case'. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We turn to action.  For each line of the dictionary we build this structure. <br><img src="http://www.delinguis.com/static/morph_00.png" alt="image"><br><br>  This is the final transducer.  Works as follows.  Each transition is marked with two letters, where the first is the input symbol, the second is the output symbol.  If we ‚Äúcollect‚Äù incoming and outgoing characters along any of the paths from the initial state to the final state, we will get two words.  The magic is that here the input word will be one of the morphological forms of the word, and the output will be Lemma + Ancode.  For example, having ‚Äúfed‚Äù the word ‚ÄúHUMBLE‚Äù into this machine, we will get the output ‚ÄúMGLAMG‚Äù.  It is worth noting that "-" denotes a blank character, and when passing through the graph we can ignore it. <br><br>  In general, you can get the output word by input using the standard composition operation: <br>  if D is a dictionary like in the picture above, <br>  W is the word, where W = &lt;(M, M) (T, T) (L, L) (O, O) (S, S), (I, I)&gt; <br>  That M - the result of the composition - will be equal (minus empty characters) <br>  M = W o D = &lt;(M, M) (T, T) (L, L) (A, A) (a, a) (m, m) <br><br><h4>  Step two.  Optimization. </h4><br>  The structure in the picture above has a problem.  It is not optimal.  The first is a lot of unnecessary empty characters that uselessly ‚Äúinflate‚Äù the converter.  The second is that the converter itself is not optimal.  If we construct such a construction for a complete dictionary, the latter will be very large. <br><br>  And so, first we shift the outgoing symbols towards the initial state.  This will reduce the number of empty characters.  The openfst library implements such an operation.  Called fstpush. <br><img src="http://www.delinguis.com/static/morph_01.png" alt="image"><br>  As you can see in the picture, arcs appeared with the labels "-: -".  They will be removed during the packaging process. <br>  Next, pack the converter.  There is a subtlety.  In the general case, the end transducer cannot be packaged as a normal state machine.  The fact is that in order to minimize the converter, as well as the automaton, it must be deterministic (there is a single output word for each input word).  But this converter is not. <br>  To solve this problem, you can <br><ul><li>  bring the converter to the state machine </li><li>  pack machine (standard algorithm) </li><li>  bring the resulting automaton to the converter </li></ul><br>  All these operations are standard, there is no need to write code.  The result for the word "mist" in the picture below. <br><img src="http://www.delinguis.com/static/morph_02.png" alt="image"><br><br>  As can be seen from the figure, the number of states and transitions has noticeably decreased.  And this is our goal. <br><br><h4>  Step three.  Prediction of the morphology of an unknown word. </h4><br>  Everything is simple here.  All we need is for the incoming word W to build a composition with two transducers and find the shortest path to the final state: <br>  P = shortest (W o T o D) <br>  where, D - dictionary <br>  T is a special converter with weights that absorbs the prefix of the word, while penalizing each ‚Äúeaten‚Äù character. <br><img src="http://www.delinguis.com/static/morph_03.png" alt="image"><br><br>  I have not yet implemented the prediction in the example.  Perhaps later. <br><br><h4>  findings </h4><br>  In my opinion, this is a rather interesting way to work with morphology.  I can distinguish two significant advantages: <br><ul><li>  speed and resources </li><li>  ease of development </li><li>  universality of algorithms </li></ul><br>  Regarding the speed in this example, I was not able to achieve good results with a hitch.  It turned out something like 2000 words / sec.  But I used the standard library and didn‚Äôt care much about optimization.  Perhaps if you use other types of transducer speed may increase.  The dictionary weighed about 35M (however, if you use a compact representation, it is compressed 3 times). <br><br>  At the expense of simplicity: a lot of code is unnecessary here.  It is enough to use the standard operations: composition, concatenation, union and search for the shortest path.  The design of the dictionary took about 50 lines of code.  An example tarball with source codes and Python buffings can be <a href="">downloaded here</a> . <br><br>  In addition, this approach has a very interesting feature.  It allows you to build complex transformations by combining transducers into more complex schemes.  For example, by adding an automaton from my <a href="http://habrahabr.ru/blogs/algorithm/105450/">last article about a spellchecker to the predictor,</a> we will get a logical device that will answer the question: ‚Äúis this word really unknown or does it contain an error‚Äù. <br>  Perhaps, for now.  I hope it was interesting. </div><p>Source: <a href="https://habr.com/ru/post/109736/">https://habr.com/ru/post/109736/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../109727/index.html">Kee4 - a new type of wireless keyboard for mobile devices</a></li>
<li><a href="../109730/index.html">The history and development of mobile gaming platforms</a></li>
<li><a href="../109731/index.html">Die, but pay the debt to Megaphone: is there a dispute?</a></li>
<li><a href="../109733/index.html">Web sockets are temporarily canceled.</a></li>
<li><a href="../109735/index.html">Project BendDesk - multitouch table</a></li>
<li><a href="../109737/index.html">DMOZ: inside view</a></li>
<li><a href="../109738/index.html">Using Windows Features in Silverlight Applications</a></li>
<li><a href="../109739/index.html">We write a simple application on jQuery Mobile</a></li>
<li><a href="../109740/index.html">The first laptop with Chrome OS - Google CR-48</a></li>
<li><a href="../109742/index.html">How to cure Shuttle XPC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>LED lamp with brightness control</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Self-made LED lamp is equipped with a magnifying glass, and is designed for comfortable small-scale installation and disassembly with miniature radio ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>LED lamp with brightness control</h1><div class="post__text post__text-html js-mediator-article"> Self-made LED lamp is equipped with a magnifying glass, and is designed for comfortable small-scale installation and disassembly with miniature radio parts - many hams know that it is difficult to see the marking on some SMD parts even under a magnifying glass.  The presence of high-quality scattered backlighting significantly improves the marking reading, and simplifies the visual search for defects in electronic devices.  Brief characteristics of the lamp: <br>  - supply voltage of 12 volts DC, maximum power consumption of about 6..7 W, the number of LEDs - 20 pcs. <br>  - built-in automatic calibration for power supply voltage. <br>  - Smooth on and off the lamp. <br>  - smooth brightness adjustment from zero to a pre-programmed limit - using the encoder knob.  Power adjustment method - PWM (pulse width modulation). <br>  - non-volatile memorization of all the parameters of the lamp and the last set brightness. <br>  - built-in service menu available via USB connection.  The menu allows you to adjust the operating parameters of the lamp and view its current state. <a name="habracut"></a><br><br>  Magnifying lens on a tripod, which in the future will receive the backlight. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/254/6ff/c7d/2546ffc7d78a01a9c2849092c425bb80.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      On the rim of the lens according to the plan should be installed LEDs. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/c57/a87/078/c57a870782eac7ed4a53dc3a94948f66.jpg"><br><br>  One-watt LEDs from the company ARL (Arlight), type <b>OS-1W</b> WarmWhite (75 Lm, 3000K, maximum allowable current 0.35 A), the color of the glow - white warm.  At the maximum current, effective cooling of the LEDs is required so that they do not overheat above 85 degrees Celsius.  For this, special radiators are usually used.  However, I simplified my task - I installed the LEDs on a simple textolite ring, and limited the maximum current to 0.1 A, which automatically eliminated the cooling problem. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/e53/17d/9a1/e5317d9a13b75630d85b84b87c775b95.jpg"><br><br>  The appearance of a single LED.  "Thick" output - the anode. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/d5d/f50/a13/d5df50a135c89f87820463cbf9f68244.jpg"><br><br>  So, for fixing the LEDs from the double-sided foil textolite ring was cut.  On the ring Dremel made wiring for 5 sections of LEDs, 4 LEDs and a resistor in each section.  The resistor and the LEDs in each section are connected in series, and all sections are parallel to each other, due to which the array of LEDs turns out to be designed for 12 volts of supply voltage (see the circuit diagram below). <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/f20/c5a/529/f20c5a529c5e73f3a26b9f0aaa8383c7.jpg"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/137/fac/04a/137fac04a2604360f37d944e3188d282.jpg"><br><br>  LEDs and SMD resistors were soldered to the ring.  It turned out pretty nice. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/8ab/858/abc/8ab858abcd5fd34ad82f25d1e8e36045.jpg"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/8f8/695/32b/8f869532b9adee43579ec756d21b4851.jpg"><br><br>  On the reverse side of the ring, a special groove was made by the Dremel, separating the copper ring along the length - we got two power buses that connect 5 sections of LEDs in parallel. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/fda/cad/3fb/fdacad3fba870784a401a65d5fa1f39d.jpg"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/099/ed3/b83/099ed3b833b429ca5e26ba58dcc88b68.jpg"><br><br>  Thermally conductive glue "Radial" ring was glued to the rim of the lens.  Although thermal conductivity did not help much here - the lens rim is still plastic. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/171/f08/859/171f0885941685d359f60e13c1c9866c.jpg"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/d87/4f2/d0e/d874f2d0ee5960f4f1c9073e8c814910.jpg"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/e99/639/1a0/e996391a0d28395ddef0387cf1bb55a7.jpg"><br><br>  The AVR-USB-MEGA16 prototype board was used as a controller and driver for controlling the LEDs. It has a very convenient software update capability through a USB bootloader stitched into the board.  On the prototyping field of the board a controller was doped.  Due to the fact that everything was almost ready on the breadboard, the scheme was very simple.  It was necessary to solder only the power part - the control of a key transistor, a voltage regulator of 5 volts and an RC-chain of the voltage filter from the current sensor output. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/640/ef4/2b7/640ef42b705b08c61d8dd8217507d3f0.png"><br><br>  View of the finished mounted device from the reverse and upper side.  The power transistor is used without a radiator, since small power is dissipated on it (it operates in key mode at a frequency of about 400 Hz). <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a08/d2c/70d/a08d2c70d65cb8f067fc499d4aa89b69.jpg"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/91a/0f5/8ce/91a0f58ceab2483a99bb6d692afb1e00.jpg"><br><br>  Writing and debugging the program took a little time, because the algorithm of work is very simple, and ready-made pieces from other projects - ledlight, usb-console, encoder were used. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/137/7cf/e21/1377cfe21fffb7c29780aac8a246c8c6.jpg"><br><br>  The lamp control console is made on the basis of the project ‚ÄúUSB console for controlling amateur devices‚Äù (see references [2]).  Edits were made minimal, and everything worked right away, debugging was not required. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/d23/976/d3f/d23976d3f614420b54338585861bc159.png"><br><br>  A brief description of the algorithm - when the power is turned on, the settings from the EEPROM are read, and the lamp lights up with the brightness at which it was previously turned off.  Rotating the encoder knob to the left gradually decreases the brightness, while rotating it to the right increases the brightness.  The encoder also has a button which, when pressed, turns the lamp on and off.  Turning on and off occurs with a smooth change in brightness - it looks pretty nice.  If the encoder button was pressed when connecting external power, then all EEPROM settings are reset, and the program recalibrates the maximum limit of the regulation current - based on the resistance of the current sensor and the maximum permissible current. <br><br>  The current through the LEDs is measured using the ADC built into the microcontroller (see references [3]).  The PWM for power control is generated by the PWM node built into the microcontroller (see reference 4). <br><br>  The wires from the lamp were collected in a cambric, and the controller was attached to the leg of the lens. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/659/e19/f73/659e19f733fb1157d31b44dd03ad753b.jpg"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/627/2e6/66e/6272e666e69d20507e0a1373e2d112f0.jpg"><br><br>  The result was a comfortable lamp that can be used for accurate radio installation. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/10b/e72/0e4/10be720e4a4639b928b5bce9a49ef72b.jpg"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/728/5b2/d32/7285b2d32bb417131dbcabebde932e0c.jpg"><br><br>  Despite the fact that the maximum current through the LEDs was reduced three times (in order to protect against overheating), the lamp turned out very bright. <br><br>  For boring technical details, see [1]. <br><br>  [ <b>What can be improved in the design of the lamp</b> ] <br><br>  <b>1</b> .  For LEDs you can use a radiator.  This will allow to reduce the number of used LEDs by 2..3 times with the same lamp brightness. <br>  <b>2</b>  LEDs need some diffuser, because each LED individually glows very brightly, which is uncomfortable for the eye - even if you look at the LED from the side. <br>  <b>3</b>  You can more accurately choose the resistance of the current sensor so that the voltage drop across it fits better to the reference voltage interval - this will improve the accuracy of current measurement.  For low-resistance current sensors (1 ohm or less), the ADC can be switched to the differential input mode with a multiplication factor of X10. <br>  <b>4</b>  To smooth the ripple current through the LEDs, increase the PWM frequency and put a choke in series with them (this is done in circuits with a hardware driver).  This revision will increase the maximum allowable voltage of the circuit (it is now 12 volts).  Another ADC channel can be used to measure the supply voltage of the LEDs - this will automatically stabilize the current through the LEDs when the supply voltage changes. <br><br>  [ <strong>Links</strong> ] <br><br>  <strong>1</strong> .  AVR-USB-MEGA16: LED controller / driver with brightness control.  <a href="http://depositfiles.com/files/r409svlbb">Sources, schematic diagram</a> , <a href="http://depositfiles.com/files/pv9owa89h">documentation</a> , <a href="http://depositfiles.com/files/ggla17oyk">photo</a> . <br>  <strong>2</strong>  <a href="http://microsin.ru/content/view/1178/44/">USB console for controlling amateur radio devices</a> . <br>  <strong>3</strong>  <a href="http://microsin.ru/content/view/1145/44/">ATmega16 (32): analog-to-digital converter (ADC)</a> . <br>  <strong>4</strong>  <a href="http://microsin.ru/content/view/32/44/">ATmega16 - PWM using T / C0, T / C1, T / C2</a> . <br>  <strong>5</strong>  <a href="http://radio-hobby.org/modules/news/article.php%3Fstoryid%3D683">Features circuitry drivers superbright LEDs</a> . <br>  <strong>6</strong>  <a href="http://www.gaw.ru/html.cgi/txt/ic/National_Semi/power/led/start.htm">Drivers pumping white LEDs company National Semiconductor</a> . <br>  <strong>7</strong>  <a href="http://www.premier-electric.com/files/supertex/pdf/hv9910.pdf">HV9910 - PWM driver for high-brightness LEDs (datashit in English)</a> . <br>  <strong>8</strong>  <a href="http://www.linear.com/pc/productDetail.jsp%3FnavId%3DH0,C1,C1003,C1094,P13452">LT3474 / LT3474-1 - Step-Down 1A LED Driver (description in English)</a> . </div><p>Source: <a href="https://habr.com/ru/post/110270/">https://habr.com/ru/post/110270/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../110262/index.html">Automated search for facts in the text (the ‚Äúfact-window‚Äù method)</a></li>
<li><a href="../110264/index.html">Tasks in the field of Russian education</a></li>
<li><a href="../110265/index.html">Research factors affecting the choice of video card</a></li>
<li><a href="../110266/index.html">The second life of the HTC HD2</a></li>
<li><a href="../110267/index.html">Mercedes F-Cell - the car on hydrogen passes the first tests</a></li>
<li><a href="../110271/index.html">Facebook plans to buy about 15 companies next year.</a></li>
<li><a href="../110272/index.html">Photoshop Tutorial Rap</a></li>
<li><a href="../110273/index.html">deleted</a></li>
<li><a href="../110275/index.html">Google Translate began offering alternative translations</a></li>
<li><a href="../110276/index.html">What's next for Delicious?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
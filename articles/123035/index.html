<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Blurring Gaussian Images with SVG</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this topic, I would like to tell you how to add a Gaussian blur effect to images on a web page without using a flash. I planned to write the articl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Blurring Gaussian Images with SVG</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/d65880aa/72d3693f/86e749d9/792ea2e0.jpg"><br><br>  In this topic, I would like to tell you how to add a <a href="http://en.wikipedia.org/wiki/Gaussian_blur">Gaussian blur</a> effect to images on a web page without using a flash.  I planned to write the article a year ago, and, to my great surprise, no one has outstripped me, although the topic is quite simple and interesting both in terms of web design and in terms of client development.  To create the effect, we will use the already popular technology <a href="http://en.wikipedia.org/wiki/Scalable_Vector_Graphics">SVG</a> , which works in all the latest versions of browsers.  For IE8-we will use CSS filters ( <a href="http://msdn.microsoft.com/en-us/library/ms532979(v%3Dvs.85).aspx">Blur</a> in particular), which work only in Microsoft products.  For a start, I suggest to get acquainted with the final version <a href="http://finom.ho.ua/blur/">here</a> (hover over any image).  The script is presented in the form of jQuery plugin, but pull it out for use outside of jQuery is not difficult. <br><br>  Obviously, the aim of the work is not only to blur the picture, but also to animate this blur. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      From the simplest example, we can see that the intensity of the blur depends on the stdDeviation attribute in the feGaussian Blur tag. <br><a name="habracut"></a><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">svg</font> <font color="#ff0000">width</font> <font color="#0000ff">="100%"</font> <font color="#ff0000">height</font> <font color="#0000ff">="100%"</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.1"</font> <br> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://www.w3.org/2000/svg"</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">defs</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">filter</font> <font color="#ff0000">id</font> <font color="#0000ff">="Gaussian_Blur"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">feGaussianBlur</font> <font color="#ff0000">in</font> <font color="#0000ff">="SourceGraphic"</font> <font color="#ff0000">stdDeviation</font> <font color="#0000ff">="3"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">filter</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">defs</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">ellipse</font> <font color="#ff0000">cx</font> <font color="#0000ff">="200"</font> <font color="#ff0000">cy</font> <font color="#0000ff">="150"</font> <font color="#ff0000">rx</font> <font color="#0000ff">="70"</font> <font color="#ff0000">ry</font> <font color="#0000ff">="40"</font> <br> <font color="#ff0000">style</font> <font color="#0000ff">="fill:#ff0000;stroke:#000000; <br> stroke-width:2;filter:url(#Gaussian_Blur)"</font> <font color="#0000ff">/&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">svg</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  (code taken <a href="http://www.w3schools.com/svg/svg_filters_gaussian.asp">from here</a> ). <br>  First of all, I tried to animate this attribute, but as it turned out, attribute values ‚Äã‚Äãcan only be whole numbers, that is, the animation was ‚Äújerky‚Äù.  To create the illusion of smooth animation, we will follow a very simple logic. <br><br><img src="https://habrastorage.org/storage1/f2791069/8ba99736/e59c5b1e/907b80d8.jpg"><br><br>  We make two layers: the first is a blurred image (SVG), the second is the original image (the usual html img), and we change the transparency to it, which is perfectly animated.  In order to avoid problems with the positioning of elements relative to each other, a requirement was put: the original image should be contained in the container, for example, in the span tag, which will be further added and blurred image. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">span</font> <font color="#ff0000">class</font> <font color="#0000ff">="blurImageContainer"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">img</font> <font color="#ff0000">class</font> <font color="#0000ff">="blurImage"</font> <font color="#ff0000">src</font> <font color="#0000ff">="a.jpg"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">span</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  First of all, an object was created for convenient work with SVG: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">var</font> SVG = { <br> <br> <font color="#008000">// </font> <br> svgns: <font color="#A31515">'http://www.w3.org/2000/svg'</font> , <br> xlink: <font color="#A31515">'http://www.w3.org/1999/xlink'</font> , <br> <br> <font color="#008000">// svg  (name -  , attrs - )</font> <br> createElement: <font color="#0000ff">function</font> (name, attrs){ <br> <font color="#0000ff">var</font> element = <font color="#0000ff">document</font> .createElementNS(SVG.svgns, name); <br> <br> <font color="#0000ff">if</font> (attrs) { <br> SVG.setAttr(element, attrs); <br> } <br> <font color="#0000ff">return</font> element; <br> }, <br> <br> <font color="#008000">//  (element - SVG-)</font> <br> setAttr: <font color="#0000ff">function</font> (element, attrs) { <br> <font color="#0000ff">for</font> ( <font color="#0000ff">var</font> i <font color="#0000ff">in</font> attrs) { <br> <font color="#0000ff">if</font> (i === <font color="#A31515">'href'</font> ) { <font color="#008000">// href    xlink</font> <br> element.setAttributeNS(SVG.xlink, i, attrs[i]); <br> } <font color="#0000ff">else</font> { <font color="#008000">// </font> <br> element.setAttribute(i, attrs[i]); <br> } <br> } <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote>  This is all we need to correctly create several svg elements. <br><br>  In order not to make a mistake of reusable use of the plugin to the same element, each time we will delete the element with blur, and for this we need to somehow identify it.  Unfortunately, it was not possible to add a class to the svg element itself, but it turned out to assign it an ID: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">var</font> blurredId = Math.random(); <font color="#008000">//    </font> <br> ... <br> $ <font color="#0000ff">this</font> .children( <font color="#A31515">'[id^="blurred"]'</font> ).remove(); <font color="#008000">//      </font> <br> ... <br> <br> svg = SVG.createElement( <font color="#A31515">'svg'</font> , { <br> ... <br> id: <font color="#A31515">'blurred'</font> +blurredId <br> });</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote>  This will allow us to also avoid the conflict of ITDs of the blur filter to which the image refers. <br><br>  As a result, we get the following code: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">var</font> svg, filterId, filter, gaussianBlur, image; <br> svg = SVG.createElement( <font color="#A31515">'svg'</font> , { <font color="#008000">// SVG </font> <br> xmlns: SVG.svgns, <br> version: <font color="#A31515">'1.1'</font> , <br> <br> <font color="#008000">//    </font> <br> width: imgWidth, <br> height: imgHeight, <br> <br> id: <font color="#A31515">'blurred'</font> +blurredId <br> }); <br> <br> filterId = <font color="#A31515">'blur'</font> +blurredId; <font color="#008000">// ;     image</font> <br> filter = SVG.createElement( <font color="#A31515">'filter'</font> , { <font color="#008000">//</font> <br> id:filterId <br> }); <br> <br> gaussianBlur = SVG.createElement( <font color="#A31515">'feGaussianBlur'</font> , { <font color="#008000">//   </font> <br> <font color="#A31515">'in'</font> : <font color="#A31515">'SourceGraphic'</font> , <font color="#008000">//in ‚Äî  ;    ,    </font> <br> stdDeviation: args.deviation <font color="#008000">//  (int)</font> <br> }); <br> <br> image = SVG.createElement( <font color="#A31515">'image'</font> , { <font color="#008000">//,    </font> <br> x: 0, <br> y: 0, <br> <br> <font color="#008000">//,     </font> <br> width: imgWidth, <br> height: imgHeight, <br> href: imgSrc, <br> <br> style: <font color="#A31515">'filter:url(#'</font> +filterId+ <font color="#A31515">')'</font> <font color="#008000">//  </font> <br> }); <br> <br> filter.appendChild(gaussianBlur); <font color="#008000">//     </font> <br> svg.appendChild(filter); <font color="#008000">//   SVG</font> <br> svg.appendChild(image); <font color="#008000">//    SVG</font> <br> <font color="#0000ff">this</font> .appendChild(svg); // SVG  span ( <font color="#0000ff">this</font> )   </font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  which generates this SVG: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">svg</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://www.w3.org/2000/svg"</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.1"</font> <font color="#ff0000">width</font> <font color="#0000ff">="144"</font> <font color="#ff0000">height</font> <font color="#0000ff">="144"</font> <font color="#ff0000">id</font> <font color="#0000ff">="blurred0.9918661566916853"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">filter</font> <font color="#ff0000">id</font> <font color="#0000ff">="blur0.9918661566916853"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">feGaussianBlur</font> <font color="#ff0000">in</font> <font color="#0000ff">="SourceGraphic"</font> <font color="#ff0000">stdDeviation</font> <font color="#0000ff">="2"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">feGaussianBlur</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">filter</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">image</font> <font color="#ff0000">x</font> <font color="#0000ff">="0"</font> <font color="#ff0000">y</font> <font color="#0000ff">="0"</font> <font color="#ff0000">width</font> <font color="#0000ff">="144"</font> <font color="#ff0000">height</font> <font color="#0000ff">="144"</font> <font color="#ff0000">href</font> <font color="#0000ff">="a.jpg"</font> <font color="#ff0000">style</font> <font color="#0000ff">="filter:url(#blur0.9918661566916853)"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">image</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">svg</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Now let's get into the blur in earlier versions of IE.  As mentioned above, the Blur filter will be used.  The resulting blur is not quite according to Gauss, and it does not look very good, but it is not so important.  We adhere to a similar principle: create a second image, put it under the original image, blur it. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">$img.clone() <font color="#008000">//  </font> <br> .css({ <font color="#008000">// </font> <br> <br> <font color="#008000">// ;      ,      </font> <br> filter: <font color="#A31515">'progid:DXImageTransform.Microsoft.Blur(pixelradius='</font> + args.deviation*2 + <font color="#A31515">')'</font> , <br> <br> <font color="#008000">//      ,  </font> <br> top: -args.deviation*2, <br> left: -args.deviation*2, <br> <br> <font color="#008000">//-      ; </font> <br> width: imgWidth, <br> height: imgHeight, <br> }) <br> .attr( <font color="#A31515">'id'</font> , <font color="#A31515">'blurred'</font> +blurredId) <br> .appendTo( <font color="#0000ff">this</font> );</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  We make the script as a jQuery plugin and use it as follows: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">jQuery(window).load( <font color="#0000ff">function</font> ($){ <font color="#008000">//      ,   load  ready</font> <br> $( <font color="#A31515">'.blurImageContainer .blurImage'</font> ).css({opacity: 0}); <font color="#008000">//    </font> <br> <br> $( <font color="#A31515">'.blurImageContainer'</font> ).gaussianBlur({ <br> deviation: 3, <font color="#008000">// </font> <br> imageClass: <font color="#A31515">'blurImage'</font> <font color="#008000">//  </font> <br> }); <br> <br> $( <font color="#A31515">'.blurImageContainer'</font> ).hover( <font color="#0000ff">function</font> (){ <br> $( <font color="#A31515">'.blurImage'</font> , <font color="#0000ff">this</font> ).animate({opacity: 1}, 500); <br> }, <font color="#0000ff">function</font> (){ <br> $( <font color="#A31515">'.blurImage'</font> , <font color="#0000ff">this</font> ).animate({opacity: 0}, 500); <br> }); <br> });</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Thanks for attention. <br>  Please report any inaccuracies and shortcomings. <br><br>  References: <br>  <a href="http://finom.ho.ua/blur/">finom.ho.ua/blur</a> - an example <br>  <a href="">finom.ho.ua/blur/jquery.gaussian-blur.js</a> - plugin code <br>  <a href="http://www.w3.org/TR/SVG/filters.html">www.w3.org/TR/SVG/filters.html</a> - filter specification in SVG <br><br>  PS In the course of work, an attempt was made to learn how to blur not only pictures, but also whole pieces of html.  Despite the fact that it is not difficult to embed html in svg (that way), it was not possible to apply graphic filters.  I would be glad if dear habra people help with the idea how to do it. </div><p>Source: <a href="https://habr.com/ru/post/123035/">https://habr.com/ru/post/123035/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../123029/index.html">Saving files directly from the network to the cloud using the Cloud Save extension</a></li>
<li><a href="../123030/index.html">How Symantec Hacked Stuxnet</a></li>
<li><a href="../123032/index.html">Dotjs: execution of local scripts on any site</a></li>
<li><a href="../123033/index.html">PageBreaker extension for MODX - pagination of texts</a></li>
<li><a href="../123034/index.html">Brainfuck BAT Interpreter</a></li>
<li><a href="../123036/index.html">Space Odyssey 2011</a></li>
<li><a href="../123037/index.html">SMS about incoming messages Vkontakte</a></li>
<li><a href="../123039/index.html">HTML Captcha without using images</a></li>
<li><a href="../123040/index.html">How to safely go to GTD</a></li>
<li><a href="../123042/index.html">Why don't girls play video games?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
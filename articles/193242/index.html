<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mega-Tutorial Flask, Part 1: "Hello, World!"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is the first article in the series where I will document my experience of writing a web application in Python using the Flask microform. 

 Here ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mega-Tutorial Flask, Part 1: "Hello, World!"</h1><div class="post__text post__text-html js-mediator-article">  This is the first article in the series where I will document my experience of writing a web application in Python using the Flask microform. <br><br>  Here is a list of all the articles in the series: <br>  <a href="http://habrahabr.ru/post/193242/">Part 1: Hello, World!</a> <br>  <a href="http://habrahabr.ru/post/193260/">Part 2: Templates</a> <br>  <a href="http://habrahabr.ru/post/194062/">Part 3: Forms</a> <br>  <a href="http://habrahabr.ru/post/196810/">Part 4: Database</a> <br>  <a href="http://habrahabr.ru/post/222983/">Part 5: User Login</a> <br>  <a href="http://habrahabr.ru/post/223375/">Part 6: Profile Page and Avatars</a> <br>  <a href="http://habrahabr.ru/post/223783/">Part 7: Unit Testing</a> <br>  <a href="http://habrahabr.ru/post/230643/">Part 8: Subscribers, Contacts and Friends</a> <br>  <a href="http://habrahabr.ru/post/230897/">Part 9: Pagination</a> <br>  <a href="http://habrahabr.ru/post/234613/">Part 10: Full Text Search</a> <br>  <a href="http://habrahabr.ru/post/234737/">Part 11: Email Support</a> <br>  <a href="http://habrahabr.ru/post/234785/">Part 12: Reconstruction</a> <br>  <a href="http://habrahabr.ru/post/236753/">Part 13: Date and Time</a> <br>  <a href="http://habrahabr.ru/post/236861/">Part 14: I18n and L10n</a> <br>  <a href="http://habrahabr.ru/post/237065/">Part 15: Ajax</a> <br>  <a href="http://habrahabr.ru/post/237317/">Part 16: Debugging, Testing, and Profiling</a> <br>  <a href="http://habrahabr.ru/post/237489/">Part 17: Deploying to Linux (even to Raspberry Pi!)</a> <br>  <a href="http://habrahabr.ru/post/237517/">Part 18: Deploying to Heroku Cloud</a> <br><br><h4>  My background </h4><br>  I‚Äôm a double-digit software developer with years of experience developing complex applications in multiple languages.  I first met Python to create bindings to a C ++ library at work.  In addition to Python, I wrote web applications in PHP, Ruby, Smalltalk and, believe it or not, in C ++.  From all this, I find the Python / Flask combination the most flexible. <br><a name="habracut"></a><br><h4>  application </h4><br>  The application I am going to develop as part of this tutorial is a microblogging server, and I decided to call it <i>microblog</i> .  Pretty creative, I know. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      During our progress, I will cover the following topics: <br><br><ul><li>  User management, including management of logins, sessions, user roles, profiles, and user avatars </li><li>  Database management, including migration </li><li>  Form support, including field validation </li><li>  Pagination of long lists of items </li><li>  Full text search </li><li>  E-mail notifications to users </li><li>  HTML templates </li><li>  Multi-language support </li><li>  Caching and other performance optimization </li><li>  Debugging methods for development and production servers </li><li>  Installation on production server </li></ul><br><br>  As you can see, I take it all quite significantly.  I hope that this application, when I finish it, will become something of a template for writing other web applications. <br><br><h4>  Requirements </h4><br>  If your computer supports Python 2.6 / 2.7, then everything will probably go well.  The application from the manual should work fine on Windows, OS X and Linux. <br><br>  This guide assumes that you are familiar with the terminal window (the command console in the case of Windows), and you know the basic commands for working with your OS files.  If this is not the case, then before continuing, I recommend that you familiarize yourself with how to create directories, copy files, etc., using the console. <br><br>  Finally, you should feel free to write Python code.  Familiarity with the modules and packages of this language also does not hurt. <br><br><h4>  Flask installation </h4><br>  Well, let's get started! <br>  If you have not yet installed Python 2.7, then take it <a href="http://python.org/download/">from here</a> . <br><br>  Now we need to install Flask and several extensions that we will use.  I prefer to create a <a href="http://pypi.python.org/pypi/virtualenv">virtual environment</a> where everything will be installed in such a way that your basic Python installation will not be affected.  As a bonus, you will not need root access to install in this way. <br><br>  So, open the terminal, select the place where your application will be, and create a new folder in which it will be contained.  Let's call this folder <code>microblog</code> . <br><br>  Next, download <a href="https://raw.github.com/pypa/virtualenv/1.9.X/virtualenv.py">virtualenv.py</a> and put it inside the new folder. <br><br>  To create a new environment, enter the following command: <br><pre> <code class="bash hljs">python virtualenv.py flask</code> </pre><br>  This command will create a full Python environment inside the <code>flask</code> folder. <br><br>  Virtual environments can be activated and deactivated as desired.  An activated environment adds the path of its <code>bin</code> folder to the system path, for example, when you call the python interpreter, you get the version of the current environment, not the system one.  Personally, I never liked this property, so I never activated any of my environments; instead, I simply called the interpreter I wanted, typing its way. <br><br>  <i><b>Note</b></i>  <i><b>Lane:</b> Before you start entering commands, I want to note that in the comments to the ninth part a bug in flask-whooshalchemy will be noted, the corrected version <s>can</s> be downloaded <a href="https://github.com/miguelgrinberg/Flask-WhooshAlchemy">from here</a> (author's repository)</i> <br><br>  If you are a Linux, OS x or Cygwin user, set the flask and extensions by entering the following commands one by one: <br><div class="spoiler">  <b class="spoiler_title">Command list</b> <div class="spoiler_text"><pre> flask / bin / pip install flask == 0.9
 flask / bin / pip install flask-login
 flask / bin / pip install flask-openid
 flask / bin / pip install flask
 flask / bin / pip install sqlalchemy == 0.7.9
 flask / bin / pip install flask-sqlalchemy == 0.16
 flask / bin / pip install sqlalchemy-migrate
 flask / bin / pip install flask-whooshalchemy == 0.54a
 flask / bin / pip install flask-wtf == 0.8.4
 flask / bin / pip install pytz == 2013b
 flask / bin / pip install flask-babel == 0.8
 flask / bin / pip install flup
</pre><br></div></div><br>  If you are a Windows user, the commands are slightly different: <br><div class="spoiler">  <b class="spoiler_title">Command list</b> <div class="spoiler_text"><pre> flask \ Scripts \ pip install flask == 0.9
 flask \ Scripts \ pip install flask-login
 flask \ Scripts \ pip install flask-openid
 flask \ Scripts \ pip install sqlalchemy == 0.7.9
 flask \ Scripts \ pip install flask-sqlalchemy == 0.16
 flask \ Scripts \ pip install sqlalchemy-migrate
 flask \ Scripts \ pip install flask-whooshalchemy == 0.54a
 flask \ Scripts \ pip install flask-wtf == 0.8.4
 flask \ Scripts \ pip install pytz == 2013b
 flask \ Scripts \ pip install flask-babel == 0.8
 flask \ Scripts \ pip install flup
</pre><br></div></div><br>  These commands will download and install all the packages that we will use in our application. <br>  Note that we are going to use Flask 0.9, not the latest version.  Flask 0.10 was not quite long and some extensions are not ready to work with this version.  There are also several incompatibilities between the packages and the latest version of <code>pip</code> , which are solved using specific versions for installation. <br><br>  Windows users waiting for one more step.  The observant reader will notice that there is no <code>flask-mail</code> in the list of commands for Windows.  This extension is not installed purely on Windows, so we will work around it: <br><pre> <code class="bash hljs">flask\Scripts\pip install --no-deps lamson chardet flask-mail</code> </pre><br><br>  I will not go into details, so if you want to learn more, read the documentation for flask-mail. <br><br>  If the installation of all the packages was successful, you can remove <code>virtualenv.py</code> , since we will no longer need the file. <br><br><h4>  "Hello, World!" In Flask </h4><br>  Now you have a <code>flask</code> subfolder in your <code>microblog</code> folder containing the Python interpreter and the Flask framework with extensions that we will use in this application.  It's time to write our first web app! <br><br>  After you have moved the <code>microblog</code> folder, let's create the basic folder structure for our application: <br><br><pre> <code class="bash hljs">mkdir app mkdir app/static mkdir app/templates mkdir tmp</code> </pre><br><br>  In the <code>app</code> folder we place our application itself.  The <code>static</code> subfolder is needed to store statics, such as images, javascript files and style sheets.  The <code>templates</code> subfolder is obviously intended for storing our templates. <br><br>  Let's start by creating a simple initialization script for our <code>app</code> package (file <code>app/__init__.py</code> ) <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> flask <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Flask app = Flask(__name__) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> app <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> views</code> </pre><br><br>  The script above simply creates an application object (inheriting <code>Flask</code> ), then imports a view module that we haven‚Äôt written yet. <br><br>  Views are handlers that respond to requests from a web browser.  Representations in Flask are written as Python functions.  Each view function is matched with one or more URL requests. <br><br>  Let's write our first view function ( <code>app/views.py</code> ) <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> app <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> app @app.route(<span class="hljs-string"><span class="hljs-string">'/'</span></span>) @app.route(<span class="hljs-string"><span class="hljs-string">'/index'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Hello, World!"</span></span></code> </pre><br><br>  This is a very simple view that simply returns a string for display in a custom browser.  Two <code>route</code> decorators create a binding address <code>/</code> and <code>/index</code> to this function. <br><br>  The final step to get a fully working web application is to create a script that starts the web server of our application.  Let's call the <code>run.py</code> script and put it in the root directory ( <code>microblog/</code> ): <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!flask/bin/python from app import app app.run(debug = True)</span></span></code> </pre><br><br>  The script simply imports the <code>app</code> variable from our <code>app</code> package and calls the <code>run</code> method to start the server.  Remember that the <code>app</code> variable is an instance of the <code>Flask</code> class, we created it above. <br><br>  To run your application, simply run the script.  On OS X, Linux and Cygwin, you should mark the file as executable before you can run it. <br><br><pre> <code class="bash hljs">chmod a+x run.py</code> </pre><br><br>  Then the script can be called simply: <br><br><pre> <code class="bash hljs">./run.py</code> </pre><br><br>  In Windows, the process is slightly different.  No need to mark the file as executable.  Instead, you need to run the script as a Python interpreter argument: <br><br><pre> <code class="bash hljs">flask/Scripts/python run.py</code> </pre><br><br>  After starting, the server will listen on port 5000, waiting for connections.  Now open the browser and enter the following URL in the address bar: <br><br><br><br>  Or you can use this link: <br><br><pre> <code class="bash hljs">http://localhost:5000/index</code> </pre><br><br>  Now did you see the routing in action?  The first URL is bound to <code>/</code> , while the second is to <code>/index</code> .  Both routes are associated with our view function, so they give the same result.  If you enter any other route, you will get an error, since only these two were attached to the view function. <br><br>  When you finish playing with the server you can just press Ctrl-C to stop it. <br><br>  And with this I want to finish the first part of this guide. <br><br>  Those of you who are too lazy to type can download the code from this guide below: <br><br>  Download <a href="">microblog-0.1.zip</a> . <br><br>  Please note that you need to install Flask to run the application from the archive above. <br><br><h4>  What's next </h4><br><br>  In the next part of the series, we will change our little application to use HTML templates. <br><br>  Hope to see you in the next part. <br><br>  Miguel </div><p>Source: <a href="https://habr.com/ru/post/193242/">https://habr.com/ru/post/193242/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../193228/index.html">Installing FreeBSD 9.1 with root partition encryption</a></li>
<li><a href="../193230/index.html">Where are all the laptops on Android?</a></li>
<li><a href="../193232/index.html">Selection of manifestos from the IT world</a></li>
<li><a href="../193234/index.html">Metric # 21 - Podcast on IT technology, products and services</a></li>
<li><a href="../193238/index.html">What's new in SQLite (2013)?</a></li>
<li><a href="../193244/index.html">SPM Conf - 3. Competently on IT project management</a></li>
<li><a href="../193248/index.html">Loc Kit: localization of games and two-step quality control</a></li>
<li><a href="../193250/index.html">Cloud storage for backup sites</a></li>
<li><a href="../193254/index.html">Meeting Ruby Lovers</a></li>
<li><a href="../193256/index.html">KiB, Kib, KB, Kb</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
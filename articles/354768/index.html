<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Higher order components using Recompose</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="HOC is too loud a word for a simple functional pattern! 

 A month ago in RaiffeisenBank, the first front-end mitap took place, and since I just prepa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Higher order components using Recompose</h1><div class="post__text post__text-html js-mediator-article">  <b>HOC</b> is too loud a word for a simple functional pattern! <br><br>  A month ago in RaiffeisenBank, the first front-end mitap took place, and since I just prepared a presentation on ‚ÄúHigh order components with functional patterns using Recompose‚Äù in just a couple of days, I didn‚Äôt have time to prepare any information about Recompose on the Internet. reference material, and did not even write their contact details at the end of the presentation, which was not very good.  And to the question: ‚ÄúWhere can we see your slides?‚Äù, I hesitated and did not answer, for which I apologize very much. <br><br>  I want to correct the situation and write reference material, as well as release a series of articles in which I will tell in detail all that my presentation was devoted to. <br><a name="habracut"></a><br>  The Recompose library has very poor documentation, which is not understandable to everyone because it does not contain explanatory examples.  I will try to close this gap, and at the end of the cycle we will even touch RxJS. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this article, I will talk about how to compose and decompose components and start with simple short questions and definitions, and show with examples what the stateless component looks like and then the stateful component. <br><br>  And the first question is ‚ÄúWhat is the name of a component that does not have a state?‚Äù <br><br><img src="https://habrastorage.org/webt/et/ud/ij/etudijqah4_n63t6byltmpwms-s.png"><br><br>  <b>The stateless component</b> is a component that does not have a state. <br><br>  Example (arrow function): <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> stateComponent = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{name}</span></span></span><span class="hljs-function">) =&gt;</span></span> &lt;div&gt;{name}&lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt;</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/71/6a/oc/716aocw31ff7s8v5al84fg9fvy8.png"><br><br>  The second question is ‚ÄúWhat is the name of a component that has a state? <br><br><img src="https://habrastorage.org/webt/bk/_i/w3/bk_iw3mmn5cx4bdbyk0mehty_uc.png"><br>  <b>A stateful componen</b> t is a component that has a state. <br><br>  Now imagine that you do not need to use the state and use the life cycle methods in your stateful component.  More precisely, you can use it all, but carrying it out and then re-using it in different components.  And this is done with the help of HOC. <br><br>  What is HOC? <br><br>  <b>High Order Component</b> is a function that accepts a component and returns a new enhanced component. <br><br>  Abstractly it looks like this: <br><br><img src="https://habrastorage.org/webt/ks/kc/op/kskcopwtrgnnboiveivmopby1w4.png"><br><br>  Here you can see that the function accepts the <b>arg1</b> and <b>arg2</b> arguments and returns a function that accepts the <b>Component</b> component and returns a new enhanced <b>EnhancedComponent</b> component. <br><br>  Hoc can be of two types: <br><br>  1. stateless <br><br><img src="https://habrastorage.org/webt/vn/z7/8k/vnz78kuhx-gtf34rjcpd4d3pjdm.png"><br><br>  2. stateful <br><br><img src="https://habrastorage.org/webt/qt/kc/hq/qtkchqenwdjafy_yryytz2fodna.png"><br><br>  The stateful component-a has the advantage that we can specify not only the template but also the methods of the life cycle. <br><br>  Usage example: <br><br><img src="https://habrastorage.org/webt/ja/pj/bx/japjbxjsu8zznfkroqrf-ybomei.png"><br><br>  Here, using the HOC component is created Bob.  In the first part of the HOC-a, we pass the object {name: ‚ÄúBob‚Äù} as an argument, and in the second part, the component on the basis of which we obtain the ‚Äúimproved‚Äù component of Bob. <br><br>  ‚Üí A <a href="https://codepen.io/Grigorov/pen/Zorxbm%3Feditors%3D0110">live example of using a higher order component by reference</a> <br><br><img src="https://habrastorage.org/webt/ls/rd/bx/lsrdbxljjvt7chnn1w1bnfzcarc.png"><br><br><h3>  Recompose </h3><br>  Recompose is a library with ready-made components of higher order.  The idea is to write stateless components and divide the code into logical parts.  Using ready-made HOCs, you can separate the methods of the life cycle, make business logic and hang event handlers not inside the component, but outside.  At the same time, reuse everything that you used and create your own components based on the base ones. <br><br>  Recompose created by Andrew Clarke, more information can be found in the official repository: github.com/acdlite/recompose. <br><br>  And now let's take a closer look at the word Recompose and remove the first two letters.  We obtain the compose method, which is very often used to apply several HOCs. <br><br>  Let's see what compose is. <br><br><img src="https://habrastorage.org/webt/oj/9s/ga/oj9sga1wbmi-l6b73q5xbtqyeu4.png"><br><br>  Suppose we have a function that takes an argument: <br><br><img src="https://habrastorage.org/webt/go/np/cx/gonpcxsitnvoqy2thbsljntrlky.png"><br><br>  And what if we wanted to put one function in another: <br><br><img src="https://habrastorage.org/webt/wu/6e/_y/wu6e_y_zvhvlxgpmmuba-cq4_0g.png"><br><br>  And then invest the result of the execution also in the third function: <br><br><img src="https://habrastorage.org/webt/d3/sm/tu/d3smtuzrsrjw0msroykbdlmr3dy.png"><br><br>  Imagine that you have twenty functions that you want to execute sequentially for one argument.  What a nightmare will be.  This is where the compose method comes in. <br><br><img src="https://habrastorage.org/webt/pl/hw/ty/plhwtyz8ytclf8jpc1s18es9kfk.png"><br><br>  Compose accepts a list of functions in the first part, and a second argument for which functions will be executed.  And the order of performance of functions begins from the end: <br><br><ol><li>  func1 </li><li>  func2 </li><li>  func3 </li></ol><br>  Now, remember that <b>hoc</b> is a function that accepts a component and returns a new component.  And since this is a function, we can, with the help of compose, apply several hocs for one component.  And consider a simple example of how compose interacts with the <b>setDisplayName</b> and <b>setPropTypes methods</b> from <b>recompose</b> : <br><br><img src="https://habrastorage.org/webt/ff/ox/j2/ffoxj2gopirup1zfmvkf_64qrm0.png"><br><br>  <b>setDisplayName</b> - takes a string and sets the displayName (display name) for the component. <br>  <b>setPropTypes</b> - accepts an object with props that can be reused in other HOCs or in the arguments themselves. <br><br>  ‚Üí <a href="https://codepen.io/Grigorov/pen/odEdLG%3Feditors%3D0010">Live example by reference</a> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { Component, PropTypes } = React; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { compose, setDisplayName, setPropTypes } = Recompose; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> enhance = compose( setDisplayName(<span class="hljs-string"><span class="hljs-string">'User'</span></span>), setPropTypes({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: React.PropTypes.string.isRequired, <span class="hljs-attr"><span class="hljs-attr">status</span></span>: React.PropTypes.string }) ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> User = enhance(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ name, status, dispatch }</span></span></span><span class="hljs-function">) =&gt;</span></span> &lt;div className=<span class="hljs-string"><span class="hljs-string">"User"</span></span> onClick={ () =&gt; dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">"USER_SELECTED"</span></span> }) }&gt; { name }: { status } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt; ); console.log(User.displayName); ReactDOM.render( &lt;User name="Tim" status="active" /</span></span>&gt;, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'main'</span></span>) );</code> </pre><br>  Now step by step: <br><br>  1. We import the setDisplayName and setPropTypes methods from the Recompose library, but due to codepen.io limitations, destructuring is used here instead of import.  In the enhance variable, I write the higher order components <b>setDisplayName</b> and <b>setPropTypes</b> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { Component, PropTypes } = React; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { compose, setDisplayName, setPropTypes } = Recompose; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { connect } = Redux(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> enhance = compose( setDisplayName(<span class="hljs-string"><span class="hljs-string">'User'</span></span>), setPropTypes({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: React.PropTypes.string.isRequired, <span class="hljs-attr"><span class="hljs-attr">status</span></span>: React.PropTypes.string }), );</code> </pre><br>  2. Then use the enhance method for a stateless component. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> User = enhance(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ name, status, dispatch }</span></span></span><span class="hljs-function">) =&gt;</span></span> &lt;div className=<span class="hljs-string"><span class="hljs-string">"User"</span></span>&gt; { name }: { status } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt; );</span></span></code> </pre><br>  3. Render <br><br><pre> <code class="javascript hljs">ReactDOM.render( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">User</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Tim"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">status</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"active"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">, document.getElementById('main') );</span></span></code> </pre><br>  Please note that here in the compose method we specified only the first part, which consists of three HOCs, and wrote it into the enhance variable, and did not specify the second part at all. <br><br>  To understand why we did it, you need to understand how the compose method works and <br>  understand that this is a higher order function: <br><br>  A higher order function is a function that accepts other functions and returns a new function. <br><br>  Now let's briefly describe the compose method: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compose</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">...funcs</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> funcs.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> (...args) =&gt; a(b(...args))) }</code> </pre><br><ol><li>  A pure function sheet is passed to the arguments of the compose method; </li><li>  Next, this list of functions is iterated using the reduce method; </li><li>  In the reduce method, a and b are passed as arguments, where a is the battery function and b is the function currently being executed. </li><li>  The body of a function of a reduce method is nothing more than a recursive function that will iterate through an array of functions from the end. </li></ol><br><h3>  withState &amp; withHandlers </h3><br>  <b>withState</b> is a hoc that takes three arguments: <br><br>  1. stateName - the name of the state that can be accessed; <br>  2. stateUpdaterName - the name of the pure function that will update the state; <br>  3. initialState - the initial state (initial state); <br><br>  Consider an example. <br><br><img src="https://habrastorage.org/webt/ig/y6/nw/igy6nwx7izrzpktpbsy-kp-jmdg.png"><br><br>  Suppose we have two components Status and Tooltip, it is clear that these two components have a state and some event handlers that change the same state, but only under different circumstances.  The StatusList will appear in the Status component when you click on the component, and the text appears in the Tooltip component when you hover the cursor over the block. <br><br><img src="https://habrastorage.org/webt/ec/cm/jz/eccmjzr9or6xxm_ug6_aoy1aviy.png"><br><br>  State of these components is exactly the same and has the same initial state. <br><br><img src="https://habrastorage.org/webt/x9/ze/vn/x9zevnkrcfbhaqybceubsaiqaf4.png"><br><br>  What do event handlers do?  Each method handles the same flag in its own way, but even with such differences they can be combined in one HOC-e. <br><br>  Now imagine that we can pull out the state and event handlers from the component.  How?  The answer is simple: ‚Äúrecompose HOCs‚Äù! <br><br><img src="https://habrastorage.org/webt/6v/wg/xr/6vwgxrnqmylgyzm5_rj5tor-bxq.png"><br><br>  The only difference between these components is the render method.  But it can be taken out into a stateless component, which we will do. <br><br>  Now back to the subtitle <b>withState &amp; withHandlers</b> and first withState, and after withHandlers. <br><br>  <b>withState</b> <br><br>  Create a simple component, when hovering over which the Tooltip will appear, and when you click on the status, the StatusList will be displayed. <br><br>  ‚Üí <a href="https://codepen.io/Grigorov/pen/vjryXj">Live example by reference</a> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { Component } = React; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { compose, withState } = Recompose; <span class="hljs-comment"><span class="hljs-comment">//  compose  withState const StatusList = () =&gt; // StatusList -         Active &lt;div className="StatusList"&gt; &lt;div&gt;pending&lt;/div&gt; &lt;div&gt;inactive&lt;/div&gt; &lt;div&gt;active&lt;/div&gt; &lt;/div&gt;; //  hoc withState, //    isToggle ‚Äî  ,  toggle -   stateUpdater- //    initialState const Status = withState('isToggle', 'toggle', false) (({ status, isToggle, toggle }) =&gt; // 'isToggle', 'toggle'     &lt;span onClick={ () =&gt; toggle(!isToggle) }&gt; {/*  event onClick    */} { status } { isToggle &amp;&amp; &lt;StatusList /&gt; } &lt;/span&gt; ); //  hoc withState, //    isToggle ‚Äî  ,  toggle -   stateUpdater- //    initialState const Tooltip = withState('isToggle', 'toggle', false) (({ text, children, isToggle, toggle }) =&gt; // 'isToggle', 'toggle'     &lt;span&gt; { isToggle &amp;&amp; &lt;div className="Tooltip"&gt;{ text }&lt;/div&gt; } &lt;span onMouseEnter={ () =&gt; toggle(true) } onMouseLeave={ () =&gt; toggle(false) }&gt;{ children }&lt;/span&gt; {/*  event- onMouseEnter  onMouseLeave    */} &lt;/span&gt; ); //  hoc withState, //    isToggle ‚Äî  ,  toggle -   stateUpdater- //    initialState const User = ({ name, status }) =&gt; &lt;div className="User"&gt; &lt;Tooltip text="Cool Dude!"&gt;{ name }&lt;/Tooltip&gt;‚Äî &lt;Status status={ status } /&gt; &lt;/div&gt;; const App = () =&gt; &lt;div&gt; &lt;User name="Tim" status="active" /&gt; &lt;/div&gt;; ReactDOM.render( &lt;App /&gt;, document.getElementById('main') );</span></span></code> </pre><br>  You can see that withState ('isToggle', 'toggle', false) is repeated for two components, so let's move it into the withToggle variable: <br><br>  ‚Üí <a href="https://codepen.io/Grigorov/pen/pVKdXV">Live example by reference</a> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { Component } = React; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { compose, withState } = Recompose; <span class="hljs-comment"><span class="hljs-comment">//  compose  withState const StatusList = () =&gt; // StatusList -         Active &lt;div className="StatusList"&gt; &lt;div&gt;pending&lt;/div&gt; &lt;div&gt;inactive&lt;/div&gt; &lt;div&gt;active&lt;/div&gt; &lt;/div&gt;; //  hoc withState,       //    isToggle ‚Äî  ,  toggle -   stateUpdater- //    initialState const withToggle = withState('isToggle', 'toggle', false); const Status = withToggle(({ status, isToggle, toggle }) =&gt; // 'isToggle', 'toggle'     &lt;span onClick={ () =&gt; toggle(!isToggle) }&gt; {/*  event onClick    */} { status } { isToggle &amp;&amp; &lt;StatusList /&gt; } &lt;/span&gt; ); //  hoc withState, //    isToggle ‚Äî  ,  toggle -   stateUpdater- //    initialState const Tooltip = withToggle(({ text, children, isToggle, toggle }) =&gt; // 'isToggle', 'toggle'     &lt;span&gt; { isToggle &amp;&amp; &lt;div className="Tooltip"&gt;{ text }&lt;/div&gt; } &lt;span onMouseEnter={ () =&gt; toggle(true) } onMouseLeave={ () =&gt; toggle(false) }&gt;{ children }&lt;/span&gt; {/*  event- onMouseEnter, onMouseLeave    */} &lt;/span&gt; ); //  hoc withState, //    isToggle ‚Äî  ,  toggle -   stateUpdater- //    initialState const User = ({ name, status }) =&gt; &lt;div className="User"&gt; &lt;Tooltip text="Cool Dude!"&gt;{ name }&lt;/Tooltip&gt;‚Äî &lt;Status status={ status } /&gt; &lt;/div&gt;; const App = () =&gt; &lt;div&gt; &lt;User name="Tim" status="active" /&gt; &lt;/div&gt;; ReactDOM.render( &lt;App /&gt;, document.getElementById('main') );</span></span></code> </pre><br>  With the help of <b>withHandlers,</b> we can <b>move</b> event handlers to hoc and call the component from the props.  Consider how <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { Component } = React; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { compose, withState, withHandlers } = Recompose; <span class="hljs-comment"><span class="hljs-comment">//  compose, withState  withHandlers const withToggle = compose( //   withState &amp; withHandlers   compose withState('toggledOn', 'toggle', false), withHandlers({ // withHandlers     //      toggle,   stateUpdater-    show: ({ toggle }) =&gt; (e) =&gt; toggle(true), hide: ({ toggle }) =&gt; (e) =&gt; toggle(false), toggle: ({ toggle }) =&gt; (e) =&gt; toggle((current) =&gt; !current) }) ) const StatusList = () =&gt; // StatusList -         Active &lt;div className="StatusList"&gt; &lt;div&gt;pending&lt;/div&gt; &lt;div&gt;inactive&lt;/div&gt; &lt;div&gt;active&lt;/div&gt; &lt;/div&gt;; const Status = withToggle(({ status, toggledOn, toggle }) =&gt; &lt;span onClick={ toggle }&gt; { status } { toggledOn &amp;&amp; &lt;StatusList /&gt; } &lt;/span&gt; ); const Tooltip = withToggle(({ text, children, toggledOn, show, hide }) =&gt; &lt;span&gt; { toggledOn &amp;&amp; &lt;div className="Tooltip"&gt;{ text }&lt;/div&gt; } &lt;span onMouseEnter={ show } onMouseLeave={ hide }&gt;{ children }&lt;/span&gt; &lt;/span&gt; ); const User = ({ name, status }) =&gt; &lt;div className="User"&gt; &lt;Tooltip text="Cool Dude!"&gt;{ name }&lt;/Tooltip&gt;‚Äî &lt;Status status={ status } /&gt; &lt;/div&gt;; const App = () =&gt; &lt;div&gt; &lt;User name="Tim" status="active" /&gt; &lt;/div&gt;; ReactDOM.render( &lt;App /&gt;, document.getElementById('main') );</span></span></code> </pre><br>  ‚Üí <a href="https://codepen.io/Grigorov/pen/KReNEg%3Feditors%3D0110">Live example by reference</a> <br><br>  And now let's see how our code looked before and after: <br><br><img src="https://habrastorage.org/webt/7l/kg/mz/7lkgmzlg5hoc4vp0k581zhla4kw.png"><br><br><img src="https://habrastorage.org/webt/i3/yh/m6/i3yhm6pkzi6ms2gfor5nh12xjke.png"><br><br><h3>  WithReducer </h3><br><pre> <code class="javascript hljs">withReducer&lt;S, A&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> stateName: string, dispatchName: string, reducer: (state: S, action: A</span></span></span><span class="hljs-function">) =&gt;</span></span> S, <span class="hljs-attr"><span class="hljs-attr">initialState</span></span>: S | <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ownerProps: </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Object</span></span></span></span></span><span class="hljs-function">) =&gt;</span></span> S ): HigherOrderComponent</code> </pre><br>  <b>The withReducer</b> is similar to the withState method and has a similar structure, but the <b>state</b> is updated using the reducer function.  Consider an example: <br><br>  ‚Üí <a href="https://codepen.io/Grigorov/pen/RyBqRv%3Feditors%3D0110">Live example by reference</a> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { Component } = React; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { compose, withReducer, withHandlers } = Recompose; <span class="hljs-comment"><span class="hljs-comment">//  compose, withReducer  withHandlers const withToggle = compose( withReducer('toggledOn', 'dispatch', (state, action) =&gt; { switch(action.type) { //    case 'SHOW': return true; case 'HIDE': return false; case 'TOGGLE': return !state; default: return state; } }, false), withHandlers({ show: ({ dispatch }) =&gt; (e) =&gt; dispatch({ type: 'SHOW' }), //  action-   dispatch hide: ({ dispatch }) =&gt; (e) =&gt; dispatch({ type: 'HIDE' }), toggle: ({ dispatch }) =&gt; (e) =&gt; dispatch({ type: 'TOGGLE' }) }) ); const StatusList = () =&gt; // StatusList -         Active &lt;div className="StatusList"&gt; &lt;div&gt;pending&lt;/div&gt; &lt;div&gt;inactive&lt;/div&gt; &lt;div&gt;active&lt;/div&gt; &lt;/div&gt;; const Status = withToggle(({ status, toggledOn, toggle }) =&gt; &lt;span onClick={ toggle }&gt; { status } { toggledOn &amp;&amp; &lt;StatusList /&gt; } &lt;/span&gt; ); const Tooltip = withToggle(({ text, children, toggledOn, show, hide }) =&gt; &lt;span&gt; { toggledOn &amp;&amp; &lt;div className="Tooltip"&gt;{ text }&lt;/div&gt; } &lt;span onMouseEnter={ show } onMouseLeave={ hide }&gt;{ children }&lt;/span&gt; &lt;/span&gt; ); const User = ({ name, status }) =&gt; &lt;div className="User"&gt; &lt;Tooltip text="Cool Dude!"&gt;{ name }&lt;/Tooltip&gt;‚Äî &lt;Status status={ status } /&gt; &lt;/div&gt;; const App = () =&gt; &lt;div&gt; &lt;User name="Tim" status="active" /&gt; &lt;/div&gt;;</span></span></code> </pre><br>  Conclusion: <br><br><ol><li>  Composition and decomposition of components </li><li>  We can use only stateless components. </li><li>  Higher-order components allow you to create something similar to decorators and add impurities to a component. </li><li>  Small HOC utilities can be packaged into large and useful HOCs and </li></ol></div><p>Source: <a href="https://habr.com/ru/post/354768/">https://habr.com/ru/post/354768/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../354752/index.html">Flask Mega-Tutorial, Part XXII: Background Tasks</a></li>
<li><a href="../354756/index.html">DevConf 2018 - vote for reports</a></li>
<li><a href="../354758/index.html">How to assign a custom method for a button in a notification</a></li>
<li><a href="../354760/index.html">Too many cooks, or hacking the Internet with TR-069</a></li>
<li><a href="../354766/index.html">Walk between pixels</a></li>
<li><a href="../354772/index.html">Apply Gradient Descent on the Real Earth</a></li>
<li><a href="../354774/index.html">The device of special effects for games under NES. Part 2</a></li>
<li><a href="../354776/index.html">How I learned to read</a></li>
<li><a href="../354778/index.html">Rhinoceros, python and shot through foot at the conference SMARTRHINO-2018</a></li>
<li><a href="../354780/index.html">Building and installing GNURadio from GIT under Ubuntu and Debian</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
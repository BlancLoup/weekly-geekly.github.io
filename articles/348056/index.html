<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I wrote the Java Olympics or why it is better not to use Scanner</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The Regional stage of the All-Russian School Olympiad ended yesterday. I participated in it and chose Java for this. The main reason why I decided to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I wrote the Java Olympics or why it is better not to use Scanner</h1><div class="post__text post__text-html js-mediator-article"> The Regional stage of the All-Russian School Olympiad ended yesterday.  I participated in it and chose Java for this.  The main reason why I decided to write the Olympiad specifically for Java was that at that time I knew it quite well and understood how it implemented most of the basic data structures and functions.  IntellijIDEA has also greatly contributed to productive coding, in situations where time is a decisive factor.  Yes, JetBrains development environment is available for many other languages, but among these languages ‚Äã‚Äãthere are not those that are commonly used in sports programming, not counting Python, but I was afraid to use it here because this language is known for gluttony. <br><br>  However, our friend, named after the Indonesian island, turned out to be even slower in some situations than a voracious snake. <br><a name="habracut"></a><br>  I will not delve deeply into the conditions of the problem, in the solution of which I was faced with the fact that the program does not have time to cope with the task in the allotted time, but I note one fact: the solution I wrote was a reference one (that is, the judges in the test package provided an identical solution, but on C), did not have infinite cycles and other things, and its complexity was O (n). <br><br>  With the restrictions that n &lt;= 20000, and one second is available for the program, the question arose as to who ate the time. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And according to the results, it can be said with accuracy that the culprit was <code>Scanner</code> and its <code>nextInt()</code> function. <br><br>  And now let's take a closer look at how this function works. <br><br>  The function itself consists of just one line <code>return nextInt(defaultRadix);</code>  . <br>  But what is happening inside this function is much more interesting to us. <br><br>  The first step is to check <code>if ((typeCache != null) &amp;&amp; (typeCache instanceof Integer) <br> &amp;&amp; this.radix == radix)</code> <code>if ((typeCache != null) &amp;&amp; (typeCache instanceof Integer) <br> &amp;&amp; this.radix == radix)</code>  <code>if ((typeCache != null) &amp;&amp; (typeCache instanceof Integer) <br> &amp;&amp; this.radix == radix)</code> and here it is very important to understand what <code>typeCache</code> and where it comes from.  And here everything is quite simple.  It is nothing more than a string of our console written in the <code>Object</code> form and if this object (read as the string we entered) is an <code>Integer</code> instance, then the Scanner concludes that the string entered is the desired number and returns it. <br>  Everything is good here and the complexity of this operation is O (1).  From this we can conclude that by entering only one number into the line we practically do not spend time converting input to a number. <br>  So we go on. <br><br>  And here the hero of the occasion appears. <br><br>  If the line that Scanner received is not int or if there are several such lines, then this line of code is called: <br><br><pre> <code class="hljs lisp">String s = next(<span class="hljs-name"><span class="hljs-name">integerPattern</span></span>())<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br>  And under it is hidden that: <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> String next(Pattern pattern) { ensureOpen(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pattern == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) throw <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> NullPointerException(); // Did we already find this pattern? <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasNextPattern == pattern) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getCachedResult(); clearCaches(); // <span class="hljs-keyword"><span class="hljs-keyword">Search</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the pattern <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { String token = getCompleteTokenInBuffer(pattern); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (token != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { matchValid = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; skipped = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> token; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (needInput) readInput(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> throwFor(); } }</code> </pre> <br>  I didn‚Äôt see the point of inserting the full code before, but now that we‚Äôve got to the point, I think it's time to look into detail. <br><br>  The first three lines are just foolproof. <br><br>  And then, as the comments of those who wrote this code suggest, we are checking ‚Äúdidn‚Äôt we have already found such a pattern?‚Äù, But in our case this check will always return false, because we have already checked at the last stage that the string we received not int. <br><br>  And what do we see at the end?  Realizing that there are no more quick search methods, the Scanner gives up and starts an infinite loop that will end only if something is found through the search. <br><br>  And what is our difficulty in such a bust?  There seems to be used, of course, the method of two pointers or something similar to it, but in any case it does not save from many checks. <br><br>  You can correct me, but I see O (n ^ 2) there, because otherwise I cannot explain where so much time could have gone. <br><br>  <b>Bottom line:</b> in case you need the program to really quickly read the integers from the console, do not trust this business <code>Scanner.nextInt()</code> .  Even the banal <code>Scanner.nextLine</code> and splitting a String into String [] and turning each of the members of a given array into int will be much faster. </div><p>Source: <a href="https://habr.com/ru/post/348056/">https://habr.com/ru/post/348056/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348042/index.html">Developing a PCI device driver for Linux</a></li>
<li><a href="../348044/index.html">Rook - "self-service" data store for Kubernetes</a></li>
<li><a href="../348046/index.html">What exactly is personal data?</a></li>
<li><a href="../348052/index.html">Top 5 Information Security Forecasts</a></li>
<li><a href="../348054/index.html">How we adapted the ELK stack to monitor and analyze errors in Java and .NET projects</a></li>
<li><a href="../348058/index.html">Free Tesla K80 GPU for your experiments with neural networks</a></li>
<li><a href="../348060/index.html">‚ÄúHurray, we were checkin!‚Äù Or How to change the data center under load and without downtime when everything goes to hell</a></li>
<li><a href="../348062/index.html">Gas savings in smart Ethereum contracts</a></li>
<li><a href="../348064/index.html">Nemesida Scanner - Web Application Vulnerability Scanner</a></li>
<li><a href="../348066/index.html">We count chickens until they are pecked</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
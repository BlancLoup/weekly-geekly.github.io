<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Another smart home. Part Four - connect the intercom</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As I already said, the project does not stand still, but gradually develops. Therefore, meet the fourth part. In it, I will tell you about the interco...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Another smart home. Part Four - connect the intercom</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/21b/4c2/a34/21b4c2a34c374ec0bac899e0bd4d83a9.jpg" alt="image"><br>  As I already said, the project does not stand still, but gradually develops.  Therefore, meet the fourth part.  In it, I will tell you about the intercom connection. <br><a name="habracut"></a><br>  I will briefly describe how it was done initially.  Outside, an ordinary intercom call station with a camera is installed.  All entrails related to the audio path were removed, the camera was connected to the video recorder, the call button and the electromechanical lock were connected to their controllers.  Everything worked, everything suited.  A letter arrived that they rang the doorbell ‚Äî someone looked at the recording.  But I wanted more, namely, the possibility of dialing on mobile, and talking on it with those who came. <br><br>  It turned out that there is such a class of devices as ‚ÄúGSM dialer‚Äù - it is included in the gap between the call panel and the intercom, when you press the call button, after a certain time it dials the number and allows you to communicate via a mobile phone.  I am not particularly fond of repeating finished products, so I just bought it.  But another problem arose - the call panel is now untied from my controller.  Therefore, we must somehow link two different systems. <br><br>  After analyzing the operation of the intercom with the call panel, the following became clear.  The panel is connected by 4 wires: + 12V, "Audio", "Video" and common.  Power is supplied to it only at the moment of pressing the call button, and after a certain time it is removed.  The video signal comes directly from the camera, but both the camera and the backlight are connected to the power supply that comes from the doorphone, and it is served only at the moment the button is pressed.  So you need to decouple the power of the camera from the power of the audio path, because it must also be connected to the recorder. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      On the line "Audio" in the inactive mode there is about + 3V.  When you press the call button - this line is attracted to the ground, when you press the button to open the electromechanical lock - + 12V is applied to it. <br><br>  Thus, it is necessary to make a device that would turn on between the call panel and the intercom, provide the camera and dialer with power and, in normal form, issue commands for my controller.  A video splitter is also needed, because as practice has shown, if you simply connect the video intercom and recorder video inputs in parallel and connect them to the camera output, then everything works fine, but this is wrong and there are no guarantees that it will work normally on a cable 20 meters long. -thirty. <br><br><img src="https://habrastorage.org/files/4d9/9dc/4d6/4d99dc4d6801401b81e432d434c58b1d.png" alt="image"><br><br>  In a nutshell I will describe what is on the diagram.  The video splitter is assembled at the AD812 op amp.  Pressing the call button detects the Q1-Q2-Relay3 circuit;  pressing the lock open button - chain D5-Q3-Relay 2;  when power is applied to the call panel - Relay 1 is activated. <br><br>  We draw a payment, we poison, we collect. <br><br><img src="https://habrastorage.org/files/ee5/b95/509/ee5b955091f5423ea227fa785162a1d1.jpg" alt="image"><br><br>  Mounted. <br><br><img src="https://habrastorage.org/files/53e/54e/f62/53e54ef624b8417492794e8141a86410.jpg" alt="image"><br><br>  The logic of operation is as follows: when the call button is pressed, power is supplied to the call panel, relay 1 is activated, which in the lighting controller turns on the light in front of the wicket.  Also, while the button is held down, relay 3 is triggered, which captures the time and number of the event on another controller.  When you open the lock from the intercom - the relay 2 is triggered, which opens the electromechanical lock through the lighting controller.  In addition, for convenience, a two-channel remote control receiver is connected in parallel, allowing you to open the lock on the gate, or turn on the light at the entrance. <br><br>  The signal from the camera, through the video splitter is fed to the intercom and video recorder, which then goes to the web interface. <br><br><img src="https://habrastorage.org/files/30a/bac/f9c/30abacf9cede4f7e9cc6ee8353fe5586.jpg" alt="image"><br><br>  Schematic files (TinyCAD) and PCB layout (Sprint-Layout) - <a href="http://we.tl/1UKtg3koz4">here</a> . <br><br>  Links to previous parts: <br><ul><li>  <a href="http://geektimes.ru/post/255466/">Another smart home, in three parts.</a>  <a href="http://geektimes.ru/post/255466/">Part One, Iron</a> </li><li>  <a href="http://geektimes.ru/post/255476/">Another smart home, in three parts.</a>  <a href="http://geektimes.ru/post/255476/">Part two, software and server.</a> </li><li>  <a href="http://habrahabr.ru/post/261551/">Another smart home, in three parts.</a>  <a href="http://habrahabr.ru/post/261551/">Part Three, User Interface</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/367111/">https://habr.com/ru/post/367111/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../367101/index.html">X-Flash Smart Light Bulbs</a></li>
<li><a href="../367103/index.html">Unknown programmer sends SMS alerts to those who posted their phone number on Twitter</a></li>
<li><a href="../367105/index.html">Time-lapse video from shared photos</a></li>
<li><a href="../367107/index.html">Lunar Microsatellite Project: Questions and Answers</a></li>
<li><a href="../367109/index.html">Segway Inmotion R2 and Inmotion V3 monowheels overview</a></li>
<li><a href="../367113/index.html">Scientists propose making coating for electrodes of supercapacitors of cigarette butts</a></li>
<li><a href="../367115/index.html">Created yeasts that synthesize morphine from glucose</a></li>
<li><a href="../367117/index.html">In the US, passports will be canceled for tax evasion</a></li>
<li><a href="../367119/index.html">Major trends in mobile commerce in Europe</a></li>
<li><a href="../367123/index.html">Gyurza. TRIO - Awakening</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Performance Indicators: KVM vs. Xen</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We at Cloud4Y consider VmWare products as the leading virtualization solution. However, we are interested in other solutions, including Xen and KVM. A...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Performance Indicators: KVM vs. Xen</h1><div class="post__text post__text-html js-mediator-article"><p>  We at Cloud4Y consider VmWare products as the leading virtualization solution.  However, we are interested in other solutions, including Xen and KVM.  And here's what we noticed: there is not too much information to compare these hypervisors: the last good research that we found on the network relates to 2012 and, of course, can no longer be considered relevant.  Today we will present to your attention not the newest, but, in our opinion, quite a useful study on the performance of KVM and Xen hypervisors. </p><br><img src="https://habrastorage.org/files/c09/2da/59a/c092da59a339422692d739a37a5519de.png" alt="image"><br><a name="habracut"></a><br><h3>  KVM hypervisor </h3><br><p>  Forgive us virtualization gurus, but first we remind readers what a hypervisor is and what it is for.  To perform various tasks (software development, hosting <nobr>, etc.</nobr> ), it is easiest to use virtual machines: they will allow you to have several different operating systems with the appropriate software environment.  For ease of working with virtual machines, hypervisors are used - software tools that allow you to quickly deploy, stop and start VMs.  KVM is one of the most widely distributed hypervisors. <br></p><br><p>  KVM is software that allows virtualization based on a PC running Linux and similar.  Recently, KVM is considered a component of the <nobr>Linux-kernel</nobr> and develops in parallel with it.  This hypervisor can only be used on systems where virtualization is supported by hardware ‚Äî using Intel and AMD processors. <br></p><br>  During operation, KVM accesses the kernel directly through a <nobr>processor-specific</nobr> module ( <nobr>kvm-intel</nobr> or <nobr>kvm-amd</nobr> ).  In addition, the complex includes the main core - kvm.ko and UI elements, including the widespread QEMU.  KVM allows you to directly work with VM files and disk images.  Each virtual machine is provided with its own isolated space. <img src="http://habr.habrastorage.org/post_images/330/ed7/08a/330ed708a1aa493498f25de98a59cf09.gif"><br><br><h3>  Xen hypervisor </h3><br><p>  Initially, Cambridge students launched a project that eventually became a commercial version of Xen.  The first release is dated 2003, and in 2007 Citrix bought the source code.  Xen is a cross-platform hypervisor with great functionality and enormous capabilities, which makes it possible to use it in the corporate sphere.  Xen supports paravirtualization ‚Äî a special operating system kernel mode when the kernel is configured to work simultaneously with the hypervisor. </p><br><br><p>  The Xen code added only the necessary set of functions: management of virtual memory and processor clock frequency, work with DMA, real-time timer and interrupts.  The rest of the functionality is rendered to the domains, that is, to the virtual machines running at that time.  Thus, Xen is the easiest hypervisor. </p>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  The essence of the study </h3><br><p>  Testing is based on the use of two SuperMicro servers, each with a quad-core Intel Xeon <nobr>E3-1220</nobr> processor with a clock frequency of 3.10 Hz, 24GB Kingston DDR3 RAM and four Western Digital <nobr>RE-3</nobr> drivers 160GB (RAID 10).  BIOS versions are identical. <br>  For hosting and virtual machines we took Fedora 20 (with SELinux).  Here are the software versions we took: <br></p><ul><li>  Kernel: 3.14.8 </li><li>  For KVM: <nobr>qemu-kvm</nobr> 1.6.2 </li><li>  For Xen: xen 4.3.2 </li></ul><br>  All root file systems are XFS with the default configuration.  Virtual machines are created using <nobr>virt-Manager</nobr> using default settings applicable to KVM and Xen.  Virtual disks used <nobr>raw images</nobr> and 8 GB of RAM was allocated with 4 vCPU (virtual processors).  The OS running on Xen used PVHVM. <p></p><br><br><h3>  Explanations </h3><br><p>  <nobr>Some</nobr> of you may be outraged - they say, the owner of Fedora 20, Red Hat, spends a significant amount of effort on supporting KVM.  To clarify: Red Hat has not made significant progress on the Xen part for many years. <br></p><br>  In addition, the competition between hypervisors is tightly controlled and minimized.  On most virtual servers, you will have several virtual machines competing for processor time, I / O devices, and network access.  Our testing does not take this into account.  One hypervisor may have low performance with low competition for resources, and then show far more efficiency than competitors when the fight for resources is higher. <br><br>  The study was conducted on Intel processors, so its results may differ for AMD and ARM. <br><br><h3>  results </h3><br><p>  Tests for virtual machines installed directly on hardware, that is, without an operating system (hereinafter referred to as hardware), served as the basis for testing virtual machines.  The performance penalty between the two servers without virtualization was 0.51% or less. <br></p><br>  KVM performance fell within 1.5% compared to the ‚Äúiron‚Äù in almost all tests.  Only two tests showed a different result: one of them was the <nobr>7-Zip</nobr> test, where KVM showed itself by 2.79% slower than the "iron".  It is strange that KVM was 4.11% faster in the PostMark test (which simulated a heavily loaded mail server).  The performance of Xen was more different from the performance of "iron" than in the situation with KVM.  In the three tests, Xen differed by 2.5% from the speed of the "iron", in the rest of the tests it was even slower. <br><br>  In the PostMark test, the Xen was 14.41% slower than the hardware.  At restart, the test results differed from the initial by 2%.  The best test for KVM, MAFFT, turned out to be the second worst in the list for Xen. <br><br>  Here is a brief summary of the test: <br><table><tbody><tr><th></th><th>  Best Value </th><th>  Bare metal </th><th>  KVM </th><th>  Xen </th></tr><tr><th>  Timed MAFFT Alignment </th><th>  lower </th><th>  7.78 </th><th>  7.795 </th><th>  8.42 </th></tr><tr><th>  Smallpt </th><th>  lower </th><th>  160 </th><th>  162 </th><th>  167.5 </th></tr><tr><th>  Pov ray </th><th>  lower </th><th>  230.02 </th><th>  232.44 </th><th>  235.89 </th></tr><tr><th>  Postmark </th><th>  higher </th><th>  3667 </th><th>  3824 </th><th>  3205 </th></tr><tr><th>  Openssl </th><th>  higher </th><th>  397.68 </th><th>  393.95 </th><th>  388.25 </th></tr><tr><th>  John the Ripper (MD5) </th><th>  higher </th><th>  49548 </th><th>  48899.5 </th><th>  46653.5 </th></tr><tr><th>  John the Ripper (DES) </th><th>  higher </th><th>  7374833.5 </th><th>  7271833.5 </th><th>  6911167 </th></tr><tr><th>  John the Ripper (Blowfish) </th><th>  higher </th><th>  3026 </th><th>  2991.5 </th><th>  2856 </th></tr><tr><th>  CLOMP </th><th>  higher </th><th>  3.3 </th><th>  3.285 </th><th>  3.125 </th></tr><tr><th>  C-ray </th><th>  lower </th><th>  35.35 </th><th>  35.66 </th><th>  36.13 </th></tr><tr><th>  7-zip </th><th>  higher </th><th>  12467.5 </th><th>  12129.5 </th><th>  11879 </th></tr></tbody></table><br><p>  If you want to see the results in full, follow the <a href="https://docs.google.com/spreadsheets/d/1kmudbOjCDUgfw76b8qP2GqNqF1ddlTOKyOjc0GmNOIE/edit%3Fusp%3Dsharing">link</a> . </p><br><br><h3>  Instead of conclusion </h3><br><p>  In our testing, KVM was almost always 2% slower than hardware.  Xen was 2.5% slower in three tests out of ten, and the rest even worse: 5-7%.  Although KVM showed itself best in the PostMark test, it should be noted that we performed only one I / O test, and it is worthwhile to conduct a few more for a more reliable picture. <br></p><br>  To select the right hypervisor, you need to correctly assess the nature of your workloads.  If your workloads require less CPU power and more I / O, then you can run more I / O tests.  If you work mostly with audio and video, try x264 or mp3 tests. <br><br>  <b>[UPD]</b> As <a href="https://habrahabr.ru/users/mister_fog/" class="user_link">mister_fog</a> rightly noted, in 2007, Citrix bought not Xen source code, but XenSource, which was founded by Xen developers and was engaged in the commercial development of this open source project.  <a href="http://xenserver.org/about-xenserver-open-source.html">Proof</a> </div><p>Source: <a href="https://habr.com/ru/post/282918/">https://habr.com/ru/post/282918/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../282908/index.html">Virtual IT Infrastructure: Pros and Cons</a></li>
<li><a href="../282910/index.html">NB-IoT: narrow band - broad prospects</a></li>
<li><a href="../282912/index.html">We send data from Arduino to Azure IoT Hub</a></li>
<li><a href="../282914/index.html">Writing the background process on Apache Cordova</a></li>
<li><a href="../282916/index.html">IMAPSync. Transfer mail between servers</a></li>
<li><a href="../282922/index.html">Work with WAV files using PHP</a></li>
<li><a href="../282924/index.html">Test Gradle Plugins Correctly</a></li>
<li><a href="../282926/index.html">About Modbus and Intel Edison Protocol</a></li>
<li><a href="../282930/index.html">Smart or virtual hardware drivers</a></li>
<li><a href="../282932/index.html">About the usefulness of indexes by expressions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
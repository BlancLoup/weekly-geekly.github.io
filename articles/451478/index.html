<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Acceleration of exploratory data analysis using the library pandas-profiling</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="First of all, starting to work with a new data set, you need to understand it. In order to do this, you need, for example, to find out the ranges of v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Acceleration of exploratory data analysis using the library pandas-profiling</h1><div class="post__text post__text-html js-mediator-article">  First of all, starting to work with a new data set, you need to understand it.  In order to do this, you need, for example, to find out the ranges of values ‚Äã‚Äãaccepted by variables, their types, and also to learn about the number of missing values. <br><br>  The pandas library provides us with many useful tools for performing exploratory data analysis (EDA).  But before using them, you usually need to start with more general functions, such as df.describe ().  However, it should be noted that the opportunities provided by such functions are limited, and the initial stages of working with any data sets when performing EDA are very often very similar to each other. <br><br> <a href="https://habr.com/ru/company/ruvds/blog/451476/"><img src="https://habrastorage.org/webt/5w/2h/8c/5w2h8ckcwdq5ukaw61r5xhdvch4.jpeg"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The author of the material we are publishing today says that he is not a fan of performing repetitive actions.  As a result, he, in search of tools to quickly and efficiently perform exploratory data analysis, found the <a href="https://github.com/pandas-profiling/pandas-profiling">pandas-profiling</a> library.  The results of her work are not expressed in the form of certain individual indicators, but in the form of a fairly detailed HTML report containing most of the information about the analyzed data that you may need to know before you start working more closely with them. <br><a name="habracut"></a><br>  Here we will discuss the features of using the pandas-profiling library using the example of the Titanic data set. <br><br><h2>  <font color="#3AC1EF">Exploration data analysis with pandas</font> </h2><br>  I decided to experiment with pandas-profiling on the Titanic dataset due to the fact that it has data of different types and due to the presence of missing values ‚Äã‚Äãin it.  I believe that the pandas-profiling library is particularly interesting in cases where the data has not yet been cleared and require further processing, depending on their features.  In order to successfully perform such processing, you need to know where to start and what to look for.  This is where pandas-profiling features come in handy. <br><br>  First, we import the data and use pandas to get descriptive statistics: <br><br><pre><code class="plaintext hljs">#    import pandas as pd import pandas_profiling import numpy as np #   df = pd.read_csv('/Users/lukas/Downloads/titanic/train.csv') #     df.describe()</code> </pre> <br>  After executing this code snippet, you get what is shown in the following figure. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7f2/aa7/199/7f2aa71998447a1618eb8d307594ad16.png"></div><br>  <i><font color="#999999">Indicators of descriptive statistics obtained using standard pandas tools</font></i> <br><br>  Although it contains a lot of useful information, there is nothing here that would be interesting to know about the data under study.  For example, it can be assumed that in the data frame, in the <code>DataFrame</code> structure, there are 891 <code>DataFrame</code> .  If this needs to be checked, then another line of code will be required, defining the frame size.  Although these calculations are not particularly resource-intensive, their constant repetition will necessarily lead to a waste of time, which it is probably better to spend on clearing data. <br><br><h2>  <font color="#3AC1EF">Exploratory data analysis with pandas-profiling</font> </h2><br>  Now do the same with pandas-profiling: <br><br><pre> <code class="plaintext hljs">pandas_profiling.ProfileReport(df)</code> </pre> <br>  Performing the above line of code will allow you to generate a report with indicators of exploratory data analysis.  The code shown above will output the information found about the data, but you can make it so that the result is an HTML file that, for example, can be shown to someone. <br><br>  The first part of the report will contain an Overview section, giving basic information about the data (number of observations, number of variables, and so on).  In addition, it will contain a list of alerts, notifying the analyst that you should pay special attention to.  These warnings can be a hint about where you can focus your efforts on data cleaning. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/174/84c/728/17484c7286399fc9776298fff4f1e812.png"></div><br>  <i><font color="#999999">Overview Report Section</font></i> <br><br><h2>  <font color="#3AC1EF">Exploratory variable analysis</font> </h2><br>  Following the Overview section in the report, you can find useful information about each variable.  They include, among other things, small diagrams describing the distribution of each variable. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/323/c12/003/323c12003055c61e634d0575e564842b.png"></div><br>  <i><font color="#999999">Information about the numeric variable Age</font></i> <br><br>  As can be seen from the previous example, pandas-profiling gives us some useful indicators, such as the percentage and number of missing values, as well as the indicators of descriptive statistics that we have already seen.  Since <code>Age</code> is a numeric variable, visualization of its distribution in the form of a histogram allows us to conclude that the distribution is skewed to the right. <br><br>  When considering a categorical variable, the output is slightly different from what was found for a numeric variable. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fdf/f91/5c4/fdff915c4b0fce210387ffcfeb775b9d.png"></div><br>  <i><font color="#999999">Information about the categorical variable Sex</font></i> <br><br>  Namely, instead of finding the average, minimum and maximum, the library pandas-profiling found the number of classes.  Since <code>Sex</code> is a binary variable, its values ‚Äã‚Äãare represented by two classes. <br><br>  If you, like me, like to explore the code, then you may be interested in how exactly the pandas-profiling library calculates these indicators.  Learning about this, given that the library code is open and available on GitHub, is not so difficult.  Since I am not a big fan of using ‚Äúblack boxes‚Äù in my projects, I looked at the source code of the library.  For example, here‚Äôs what the mechanism for processing numeric variables represented by the <a href="https://github.com/pandas-profiling/pandas-profiling/blob/003d236daee8b7aca39c62708b18d59bced0bc03/pandas_profiling/describe.py">describe_numeric_1d</a> function looks like: <br><br><pre> <code class="plaintext hljs">def describe_numeric_1d(series, **kwargs):   """Compute summary statistics of a numerical (`TYPE_NUM`) variable (a Series).   Also create histograms (mini an full) of its distribution.   Parameters   ----------   series : Series       The variable to describe.   Returns   -------   Series       The description of the variable as a Series with index being stats keys.   """   # Format a number as a percentage. For example 0.25 will be turned to 25%.   _percentile_format = "{:.0%}"   stats = dict()   stats['type'] = base.TYPE_NUM   stats['mean'] = series.mean()   stats['std'] = series.std()   stats['variance'] = series.var()   stats['min'] = series.min()   stats['max'] = series.max()   stats['range'] = stats['max'] - stats['min']   # To avoid to compute it several times   _series_no_na = series.dropna()   for percentile in np.array([0.05, 0.25, 0.5, 0.75, 0.95]):       # The dropna() is a workaround for https://github.com/pydata/pandas/issues/13098       stats[_percentile_format.format(percentile)] = _series_no_na.quantile(percentile)   stats['iqr'] = stats['75%'] - stats['25%']   stats['kurtosis'] = series.kurt()   stats['skewness'] = series.skew()   stats['sum'] = series.sum()   stats['mad'] = series.mad()   stats['cv'] = stats['std'] / stats['mean'] if stats['mean'] else np.NaN   stats['n_zeros'] = (len(series) - np.count_nonzero(series))   stats['p_zeros'] = stats['n_zeros'] * 1.0 / len(series)   # Histograms   stats['histogram'] = histogram(series, **kwargs)   stats['mini_histogram'] = mini_histogram(series, **kwargs)   return pd.Series(stats, name=series.name)</code> </pre> <br>  Although this code snippet may seem rather large and complex, in fact, it is very easy to understand.  The point is that in the source code of the library there is a function that determines the types of variables.  If it turns out that the library has encountered a numeric variable, the above function will find the indicators that we considered.  This function uses standard pandas operations for working with objects of type <code>Series</code> , like <code>series.mean()</code> .  The results of the calculations are stored in the <code>stats</code> dictionary.  Histograms are generated using an adapted version of the <code>matplotlib.pyplot.hist</code> function.  Adaptation aims to enable the function to work with different types of data sets. <br><br><h2>  <font color="#3AC1EF">Correlation rates and sample survey data</font> </h2><br>  After analyzing the variables of pandas-profiling, in the Correlations section, it will show the Pearson and Spearman correlation matrices. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d95/56f/a49/d9556fa495d7c0f0fd337cae18e512a2.png"></div><br>  <i><font color="#999999">Pearson Correlation Matrix</font></i> <br><br>  If necessary, then it is possible, in the line of code that starts the formation of the report, to set the indicators of the threshold values ‚Äã‚Äãused in the calculation of the correlation.  By doing this, you can indicate what kind of correlation power is considered important for your analysis. <br><br>  Finally, the pandas-profiling report, in the Sample section, displays, as an example, a piece of data taken from the beginning of a data set.  This approach can lead to unpleasant surprises, since the first few observations can be a sample that does not reflect the features of the entire data set. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d26/9e9/d5c/d269e9d5c6d5f6cf18041a154034fcbc.png"></div><br>  <i><font color="#999999">Section containing sample data under investigation</font></i> <br><br>  As a result, I do not recommend paying attention to this last section.  Instead, it is better to use the <code>df.sample(5)</code> command, which, randomly, selects 5 cases from the data set. <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  Summarizing the above, it can be noted that the pandas-profiling library provides the analyst with some useful features that will come in handy when you need to quickly get a general approximate idea of ‚Äã‚Äãthe data or send someone a report on intelligence data analysis.  At the same time, real work with the data, taking into account their features, is performed, as well as without using pandas-profiling, manually. <br><br>  If you want to take a look at how the entire intelligence analysis of data in one Jupyter notebook looks like - take a look at <a href="https://nbviewer.jupyter.org/github/lksfr/TowardsDataScience/blob/master/pandas-profiling.ipynb">this</a> project of mine created with the help of nbviewer.  And in <a href="https://github.com/lksfr/TowardsDataScience/blob/master/pandas-profiling.ipynb">this</a> GitHub repository you can find the corresponding code. <br><br>  <b>Dear readers!</b>  How do you start analyzing new datasets? <br><br><div style="text-align:center;"> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a href="https://habr.com/ru/post/451478/">https://habr.com/ru/post/451478/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../451456/index.html">Russian storage AERODISK: load testing. Squeeze the IOPS</a></li>
<li><a href="../451462/index.html">We write less duplicate code using Binding in Laravel</a></li>
<li><a href="../451466/index.html">graphql - pitfalls</a></li>
<li><a href="../451468/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ 364 (May 6 - 12, 2019)</a></li>
<li><a href="../45147/index.html">Down with the language barrier!</a></li>
<li><a href="../451480/index.html">Why does the Ministry of Industry and Trade prohibit the storage of data on foreign equipment?</a></li>
<li><a href="../451488/index.html">Calculation of cannibalization based on the classic A / B test and the bootstrap method</a></li>
<li><a href="../45149/index.html">666</a></li>
<li><a href="../451490/index.html">Which programming language to choose</a></li>
<li><a href="../451492/index.html">Seven Unexpected Bash Variables</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>TestCafe: A brief history of finding harmony in functional testing (with pictures)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TestCafe is a cross-platform framework for functional testing of web applications, recently released by DevExpress. 

 We at DevExpress are developing...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>TestCafe: A brief history of finding harmony in functional testing (with pictures)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/6ac/024/62a/6ac02462aba0e8009b1c30af068ab416.png"><br><br>  <a href="http://testcafe.devexpress.com/" title="Testcafe">TestCafe</a> is a cross-platform framework for <a href="http://en.wikipedia.org/wiki/Functional_testing" title="functional testing">functional testing of</a> web applications, recently released by DevExpress. <br><br>  We at DevExpress are developing a wide range of components for web developers ( <a href="https://www.devexpress.com/Products/NET/Controls/ASP/" title="ASP.NET WebForms">ASP.NET WebForms</a> , <a href="https://www.devexpress.com/Products/NET/Controls/ASP/MVC/" title="ASP.NET MVC">ASP.NET MVC</a> , as well as <a href="http://chartjs.devexpress.com/" title="javascript components">JavaScript components</a> and <a href="http://phonejs.devexpress.com/" title="frameworks">frameworks</a> ) and, of course, we test them.  If everything is clear with unit tests and there is no space left for some incredible revelations, the situation with the functional tests is not so simple because of the complexity of their implementation.  Initially, the TestCafe framework was an internal development aimed at solving immediate problems with the functional testing of our components and sites.  And it so happened that this internal development eventually grew into an independent product. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this article, I will tell you what the prerequisites were for the creation of this framework, what problems (besides the <a href="http://en.wikipedia.org/wiki/Not_invented_here" title="fatal flaw">fatal flaw</a> ) we faced when testing existing solutions and how we tried to cope with them. <a name="habracut"></a><br><br><h4>  About daily </h4><br>  <strong>Problem:</strong> <blockquote>  In the existing test solutions, the problem is the need to install browser plug-ins.  Setting up the test environment becomes very nontrivial - you need to install plugins on browsers, sometimes configure the browsers themselves, the plug-in for the new version of the browser may simply not work, and you need to test here and now. <br><br>  It often happens that in a large development team, not all developers simply have a test environment installed or an old version of the test framework installed.  And there is such a situation that in the system of continuous integration a test falls, an urgent need to correct the error, and at the same time a significant part of the time is spent only on the fact that the test "took off" from you locally.  Updating plug-ins, framework in the system of continuous integration is a separate fun topic. <br><br>  Also here stand out mobile devices.  For most configurations, there are simply no plug-ins, for some - the installation of the plug-in is far from trivial. </blockquote><br>  The main "chip" of TestCafe is that the framework does not require browser plug-ins and any browser pre-settings to work.  TestCafe uses the plug'n'play approach for browsers.  You can verify this by <a href="http://testcafedemo.devexpress.com/">running a demo test</a> in the browser in which you are currently viewing this article.  If you are working on a local machine, then TestCafe will automatically detect installed browsers and create a worker for you: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/946/b99/6e4/946b996e4caf050376fc1db16587bee8.jpg"><br><br>  Connecting a mobile device is just as easy, by pressing a single button from the browser of a mobile device or by scanning a QR code: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/df3/852/d33/df3852d335db5e9ab44612c9d8f1be0f.jpg"><br><br>  Here it is worth mentioning separately that the entire control system has a web-based interface.  Those.  You can run tests and analyze their results on your colleague's machine (assuming that you are on the same network) simply by connecting its browser to the framework.  In this case, your colleague will not have to install anything.  Moreover, this flexibility makes it possible to run tests in any remote environment, for example, <a href="https://community.devexpress.com/blogs/ctodx/archive/2014/01/09/testcafe-and-browserstack-run-tests-everywhere.aspx">on virtual machines Browser Stack</a> . <br><br>  Also TestCafe does not block the browser and keyboard / mouse input.  Those.  You can run tests in parallel in all browsers you have and at the same time continue to work in another tab of your favorite browser. <br><br>  <strong>Problem:</strong> <blockquote>  There is one significant difference between test code and production code: as a rule, tests are code written once, but we often return to this code to analyze violations in the work of the application being developed.  Those.  The main purpose of the test code is to identify problems, so there are two requirements for it: <br><br><ul><li>  determinism of the test scenario - the test should carry out exactly one scenario of actions and this scenario should be easily understood from the test code; </li><li>  the ability to quickly localize the stage of the scenario where the problem occurred. </li></ul><br>  These considerations are strongly imprinted in my head, when one day my colleague and I debugged a very complex functional test.  It was a wall of code, from which it was difficult to trite to understand what generally happens in the test script.  Therefore, we step by step debugged the test and compared the visible actions with the code.  It took us just half an hour to figure out which scenario of action we are dealing with at all! <br><br>  Yes, here the problem is in many respects the human factor - the test was written clumsily and the person who created the test did not take care of those who would analyze its results.  But what to do - <a href="http://ru.wikipedia.org/wiki/%25D0%2597%25D0%25B0%25D0%25BA%25D0%25BE%25D0%25BD_%25D0%259C%25D0%25B5%25D1%2580%25D1%2584%25D0%25B8">‚Äúif a person can shoot himself in the foot, then sooner or later he will shoot himself in the foot</a> . <a href="http://ru.wikipedia.org/wiki/%25D0%2597%25D0%25B0%25D0%25BA%25D0%25BE%25D0%25BD_%25D0%259C%25D0%25B5%25D1%2580%25D1%2584%25D0%25B8">‚Äù</a> </blockquote><br>  But since  correct all people is a task, to put it mildly, a little feasible, then at TestCafe we ‚Äã‚Äãdid not use a universal behavior algorithm in difficult situations <sup><a href="https://habr.com/ru/company/devexpress/blog/212491/">[1]</a></sup> .  We went a little different way, donating a little time to the developer of tests (recall that the test is usually written once) in favor of those who later analyze the results of this test. <br><br>  TestCafe tests are divided into steps: <br><br><pre><code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">'@fixture Example'</span></span>; <span class="hljs-string"><span class="hljs-string">'@page http://testcafe.devexpress.com/Example'</span></span>; <span class="hljs-string"><span class="hljs-string">'@test'</span></span>[<span class="hljs-string"><span class="hljs-string">'Drag slider'</span></span>] = { <span class="hljs-string"><span class="hljs-string">'1.Click label "I have tried TestCafe"'</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ act.click(<span class="hljs-string"><span class="hljs-string">':containsExcludeChildren(I have tried TestCafe)'</span></span>); }, <span class="hljs-string"><span class="hljs-string">'2.Check initial slider value'</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ eq($(<span class="hljs-string"><span class="hljs-string">'#Developer_Rating'</span></span>).val(), <span class="hljs-number"><span class="hljs-number">0</span></span>); }, <span class="hljs-string"><span class="hljs-string">'3.Drag slider handle'</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ act.drag(<span class="hljs-string"><span class="hljs-string">'.ui-slider-handle'</span></span>, <span class="hljs-number"><span class="hljs-number">360</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); }, <span class="hljs-string"><span class="hljs-string">'4.Check resulting slider value'</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ eq($(<span class="hljs-string"><span class="hljs-string">'#Developer_Rating'</span></span>).val(), <span class="hljs-number"><span class="hljs-number">7</span></span>); } };</code> </pre> <br><br>  There are two requirements for steps: <br><br><ul><li>  steps must be named, i.e.  the developer must describe in natural language what happens; </li><li>  Each step must contain no more than one user action. </li></ul><br><br>  I have to say that this approach was most ambiguously met by our developers and testers.  They wanted to write code, and had to write text.  However, soon the indignation faded away, the developers got used to this style.  But now we have well-documented and structured tests, and the developers create a more meaningful test code, because  they first formulate their actions in natural language.  If problems arise, detailed analysis of the code is no longer required, the essence of the test can be simply read, without going into implementation details. <br><br>  It is also worth noting that TestCafe analyzes network traffic and JavaScript errors.  And if the test suddenly fell (did not pass assertion or some other error occurred), the framework will point out possible causes of the crash - unloaded resources or errors in the code, which sometimes is very useful in locating the problem. <br><br>  <b>Problem:</b> <blockquote>  It would seem that a functional test is simple: we perform the emulation of the actions of the end user in a certain scenario and evaluate the results.  But there are a number of hidden mechanisms that occur outside the user's control, but affect the execution of the script.  And test developers have to take them into account. <br><br>  For example, you press a button, an asynchronous XHR request is sent, some data is sent in response, from which some block of the page is built, which is displayed to the user.  For the user, this is just a slight visual delay, and for the machine, it is an action with side effects and a non-deterministic completion time.  And it turns out that without deepening the meaning of what is happening, it is difficult to write a good test (after all, in the test we need to explicitly indicate that it is necessary to wait until the XHR request has been loaded and then proceed to the next step).  There are other options when internal mechanisms have a strong influence on passing tests.  For example, in many frameworks you have to manually clear <i>cookies</i> before running tests.  It is worth forgetting to do this cleaning and you can get a very unstable and difficult to debug test. </blockquote><br>  Remember the test steps mechanism I mentioned earlier?  In addition to improving the structure of the code, it solves another problem - it allows to level the transitions between the application states.  Those.  in TestCafe, you do not need to explicitly prescribe things like <i>waitForPageLoad ()</i> or <i>waitForXhrComplete ()</i> .  Since  each step contains exactly one action, then TestCafe automatically waits for the completion of the transition between pages and the end of XHR requests caused by this action.  Thus, you do not need to describe the transition states in the test.  The test contains absolutely nothing that should contain - emulation of user actions and analysis of the final states to which they lead. <br><br>  We also took care of clearing the <i>cookie</i> .  Each test is essentially performed in a certain test container, which always contains empty <i>cookies</i> when the test starts.  You do not need to worry about resetting the state and setting up a browser test environment.  This happens automatically. <br><br>  <b>Problem:</b> <blockquote>  Often a test page requires Basic or Windows authentication.  And often this problem has no solution "out of the box." </blockquote><br>  TestCafe has built-in support for these authentication protocols ‚Äî just enter your login information and TestCafe will automatically authenticate, just like your browser does: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/aac/5d9/9f8/aac5d99f8d702feb28d8572a0207b63c.jpg" alt="image"><br><br>  You can also specify login details in the test code: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">'@auth guest:MostlyHarmless'</span></span>; <span class="hljs-string"><span class="hljs-string">'@test'</span></span>[<span class="hljs-string"><span class="hljs-string">'Click Input'</span></span>] = { <span class="hljs-string"><span class="hljs-string">'1. Type name'</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ act.type(getInput(), <span class="hljs-string"><span class="hljs-string">'Peter Parker'</span></span>); }, <span class="hljs-string"><span class="hljs-string">'2. Move caret position'</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ act.click(getInput(), { <span class="hljs-attr"><span class="hljs-attr">caretPos</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span> }); }, <span class="hljs-string"><span class="hljs-string">'3. Erase a character'</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ act.press(<span class="hljs-string"><span class="hljs-string">'backspace'</span></span>); }, <span class="hljs-string"><span class="hljs-string">'4. Check result'</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ eq(getInput().val(), <span class="hljs-string"><span class="hljs-string">'Pete Parker'</span></span>); } };</code> </pre><br><br>  <b>Problem:</b> <blockquote>  The API of functional testing frameworks is a thing that deserves special attention.  These monstrous add-ins on DOM, which sometimes do not keep pace with the innovations in the DOM API browsers - not the easiest thing to learn. <br><br>  ‚ÄúBut testers who are not familiar with DOM and JavaScript are easier!‚Äù You say.  But, this statement contains an internal contradiction: this API, anyway, is a wrapper for the native DOM-tree.  Those.  in any case, you need to understand the structure of the DOM and, moreover, keep in mind the additional API and understand how one is projected into another. </blockquote><br>  As you may have noticed, the test creation language in TestCafe is JavaScript.  Or rather, to be precise, this is <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B5%25D0%25B4%25D0%25BC%25D0%25B5%25D1%2582%25D0%25BD%25D0%25BE-%25D0%25BE%25D1%2580%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D0%25B9_%25D1%258F%25D0%25B7%25D1%258B%25D0%25BA">DSL</a> , which is a subset of JavaScript.  This means that any existing JavaScript editor can easily open test files with all the accompanying "buns", such as syntax highlighting, auto-completion and refactoring. <br><br>  Moreover, there is no more natural language for the web than JavaScript.  There is no middleware API in TestCafe, you can work with DOM directly (this is if you are a big fan of Vanilla JS) or you can use the automatically included version of jQuery. <br><br>  Separate attention deserve available in TestCafe emulation of end-user actions.  We tried to keep the API as minimalistic as possible, while keeping it as flexible as possible.  Only <a href="http://testcafe.devexpress.com/Documentation/ApiReference/Test_Fixture_API_Reference/User_Actions">11 methods</a> , but they cover almost all scenarios we encountered in practice. <br><br>  API TestCafe also includes <a href="http://testcafe.devexpress.com/Documentation/ApiReference/Test_Fixture_API_Reference/Assertions">4 types of assertions</a> , able to recognize the types of objects and make a "deep" comparison.  To edit tests, you can use the editor built into the framework: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/59c/3a0/e70/59c3a0e70cc5a434f602c4bd50c55b66.jpg"><br><br>  You can also use your favorite JavaScript editor.  TestCafe compiles tests on the fly, so if you make a syntax error or form a test structure incorrectly, you will immediately be notified of this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/120/ef0/afb/120ef0afbf6053fa553c37e49cd48ca4.jpg"><br><br>  <b>Problem:</b> <blockquote>  Functional tests may be unstable.  As a rule, the cause is an incorrectly set waiting time for effects to complete from a user action.  Changes in time intervals can be caused by many factors: network delays, slow computers, slowness of the application being tested.  TestCafe, as mentioned earlier, has built-in mechanisms for waiting for page transitions and ending XHR requests.  However, heuristics for animation expectations are still at the research stage and are not included in the release branch of the framework.  In addition, the instability of the test can be caused by the instability of the application being tested. </blockquote><br>  In order to catch such tests, TestCafe introduced a special mode - <a href="http://testcafe.devexpress.com/Documentation/ApiReference/Continuous_Integration_API_Reference/TestCafe_Methods">Quarantine Mode</a> , which in general is the technical implementation <a href="http://martinfowler.com/articles/nonDeterminism.html">of Martin Fowler's idea of ‚Äã‚Äãquarantine for unstable tests</a> .  Its essence is quite simple: if the test falls, then it is not immediately added to the list of dropped tests, but enters the "quarantine".  This means that the test will be run 2 more times and if the results of the passage vary, then such a test will be added to the list of unstable tests in the report. <br><br>  This rather simple mechanism allows to effectively capture tests with a non-deterministic result.  It gives a particularly good result when working in a system of continuous integration, where the volume of statistical sampling is naturally much larger.  By the way, TestCafe has a <a href="http://testcafe.devexpress.com/Documentation/ApiReference/Continuous_Integration_API_Reference">built-in API for continuous integration</a> .  The framework is available as a regular node-library via <a href="https://www.npmjs.org/package/testcafe">npm</a> . <br><br><br><h4>  About the test recorder </h4><br>  Of course, in addition to everything described earlier, TestCafe has a built-in test recorder with a convenient live editor of selectors and the ability to roll back the actions performed: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b8b/986/d57/b8b986d574bf6f41ddd372a583bff851.jpg"><br><br><br><h4>  As a conclusion </h4><br>  When developing TestCafe, we used a huge amount of open-source development, so from our side it would be a little unfair not to pay tribute to the open source community.  So, in the context of the development of TestCafe, parse5 was created - the HTML parser <sup><a href="https://habr.com/ru/company/devexpress/blog/212491/">[2]</a></sup> , which is the fastest of the parters that are fully compatible with the <a href="http://www.whatwg.org/specs/web-apps/current-work/">HTML5 specification</a> for node.js.  And <a href="https://github.com/inikulin/whacko">whacko</a> is a fork of the <a href="https://github.com/cheeriojs/cheerio">cheerio</a> library, using parse5 as a platform. <br><br>  We still have a huge number of plans for the future, which we are trying to implement as quickly as possible (the major release of TestCafe is released approximately every 2 months).  In the future, in addition to the obvious improvements in usability and speed of work, many unique and interesting features are waiting for us.  Stay in touch! <br><br><h5>  Notes </h5><br><a name="algo"></a><div class="spoiler">  <b class="spoiler_title">1. Universal behavior algorithm in difficult situations</b> <div class="spoiler_text"><ol><li>  Declare the futility of being </li><li>  Knee to the ground </li><li>  Cover your face with your hands </li><li>  Cry </li></ol></div></div><a name="sarcasm"></a><div class="spoiler">  <b class="spoiler_title">2. Do you know what ...</b> <div class="spoiler_text">  In the official HTML5 specification, the <i>&lt;sarcasm&gt;</i> tag appears <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0eb/628/afb/0eb628afbcf0f7b1c3c1f3a6e0c7f308.png" alt="image"><br><br></div></div></div><p>Source: <a href="https://habr.com/ru/post/212491/">https://habr.com/ru/post/212491/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../212479/index.html">Domain disputes with the dead</a></li>
<li><a href="../212481/index.html">E-commerce in Russia: A View from the West</a></li>
<li><a href="../212483/index.html">The history of smart watches</a></li>
<li><a href="../212487/index.html">Facebook is testing a water taxi to transport employees from San Francisco</a></li>
<li><a href="../212489/index.html">An important step has been taken towards laser fusion.</a></li>
<li><a href="../212495/index.html">Samsung Galaxy S5 and Apple iPhone 6</a></li>
<li><a href="../212497/index.html">+ (AppStore *) Timera: application architecture and design features</a></li>
<li><a href="../212499/index.html">Brief instruction on working with a web-designer (for a project manager)</a></li>
<li><a href="../212501/index.html">Highscreen Boost 2 SE went on sale: details plus photo and first-hand opinion</a></li>
<li><a href="../212503/index.html">Creator Mt. Gox and eDonkey are working on a secret Bitcoin project</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
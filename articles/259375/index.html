<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing Tetris for LG SmartTV (WebOS)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 - What makes the Russian people in a crisis? 
 - Spends all your money as quickly as possible. 

 Piece of iron 
 I bought myself a LG LG l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing Tetris for LG SmartTV (WebOS)</h1><div class="post__text post__text-html js-mediator-article"><h4>  Foreword </h4><br>  <i>- What makes the Russian people in a crisis?</i> <i><br></i>  <i>- Spends all your money as quickly as possible.</i> <br><br><h4>  Piece of iron </h4><br>  I bought myself a LG LG lb671v TV and, following the old tradition of writing something for each new piece of hardware, decided to write a game, especially since LG already has its own online application store and an open SDK for third-party developers. <br><br>  I go to the online store and, what do you think, I do not find there my beloved good old tube ... (to substitute my) Tetris.  Need to fix. <br><a name="habracut"></a><br><h4>  Instruments </h4><br>  Go to <a href="http://developer.lge.com/">the developers site</a> in the <a href="">section for SmartTV</a> and download the SDK.  The development tools package includes: command line tools, emulator, development environment (using eclipse).  If there are problems with the installation, then look at the section "Troubleshooting" on the <a href="http://developer.lge.com/webOSTV/sdk/web-sdk/sdk-installation/">SDK</a> page.  Installing special difficulties should not cause. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The webOS platform supports several types of applications: Web, Native, Unity, Flash, etc. Some of them are not available for third-party developers.  In my case, the application is of type web (html5). <br><br><h4>  Code </h4><br><div class="spoiler">  <b class="spoiler_title">Canvas full page.</b>  <b class="spoiler_title">Found in the expanses of stackoverflow.</b> <div class="spoiler_text"><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Tetris<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'utf-8'</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">html</span></span></span><span class="css">, </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">body</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">width</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; } </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">canvas</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">display</span></span></span><span class="css">: block; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">position</span></span></span><span class="css">: absolute; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">top</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">left</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">right</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">bottom</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">width</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onload</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"initGame()"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">canvas</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'myCanvas'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'1080'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'1920'</span></span></span><span class="hljs-tag">&gt;</span></span>Not support<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"><span class="undefined">‚Ä¶</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br><h4>  A game </h4><br>  Describe the implementation of Tetris does not see the point.  Every self-respecting programmer in his life should write tag, snake and tetris.  I will give a screenshot: <br><br><img src="https://habrastorage.org/files/b6a/2f5/d9c/b6a2f5d9c2384afcbcd933c141daef69.png"><br><br><h4>  Assembly </h4><br>  1) We put all the files in a separate folder; <br>  2) Create a JSON file with a description of the application: <br><br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"myapp"</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"vendor"</span></span>: <span class="hljs-string"><span class="hljs-string">"mycompany"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"web"</span></span>, <span class="hljs-string"><span class="hljs-string">"main"</span></span>: <span class="hljs-string"><span class="hljs-string">"index.html"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Tetris"</span></span>, <span class="hljs-string"><span class="hljs-string">"icon"</span></span>: <span class="hljs-string"><span class="hljs-string">"icon80.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"largeIcon"</span></span>: <span class="hljs-string"><span class="hljs-string">"icon130.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"appDescription"</span></span>: <span class="hljs-string"><span class="hljs-string">"Classic Tetris game. Enjoy it!"</span></span>, <span class="hljs-string"><span class="hljs-string">"splashBackground"</span></span>: <span class="hljs-string"><span class="hljs-string">"splashScreen.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"bgImage"</span></span>: <span class="hljs-string"><span class="hljs-string">"bgImage.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"bgColor"</span></span>: <span class="hljs-string"><span class="hljs-string">"#d0dbbd"</span></span>, <span class="hljs-string"><span class="hljs-string">"iconColor"</span></span>: <span class="hljs-string"><span class="hljs-string">"#343829"</span></span> }</code> </pre></div></div><br>  3) In the command line, go to this folder and run the build script from the SDK: 'ares-package'.  After that, if there are no errors, a file with the * .ipk extension is created; <br>  4) If we want to run on the emulator, then we run the emulator and execute the command: 'ares-install file_name.ipk'; <br>  5) If we want to run on TV, then we need: <br>  5.1) sign the application on the lg website (download our * .ipk and download the signed application as an archive); <br>  5.2) create a directory on a flash drive / developer / apps / usr / palm / applications /; <br>  5.4) unpack the archive downloaded from the site into this directory; <br>  5.5) after connecting the USB flash drive to TV, yours should appear in the list of applications.  At the same time to start, you must have access to the Internet on TV. <br><br><h4>  Rake </h4><br>  Some difficulties arose in the fight against anti-aliasing, and the old-school design style suggests clear pixels.  I will give a solution immediately: <br>  a.  the only option that guaranteed removes artifacts on all browsers is to insert a transparent pixel between the tiles (this is true if the images use transparency); <br>  b.  draw images only by whole pixels. <br><br><h4>  <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B1%25D0%25B5%25D1%2581%25D0%25BF%25D0%25B5%25D1%2587%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25BA%25D0%25B0%25D1%2587%25D0%25B5%25D1%2581%25D1%2582%25D0%25B2%25D0%25B0">QA</a> </h4><br>  There were such notes: fill in the correct / full description and test result, remove the transparency of the icon, handle the back / home buttons, add splashScreen, add buttons to the UI.  Regarding the latter: LG has a requirement for TV applications - to control the TV, the MRCU (mouse) cursor should be enough.  Magic Remote Control Unit is a special remote, an analogue of the Nintendo Wii gamepad. <br><br><h4>  Several stones in the garden LG </h4><br>  1) Authorization on sites is reset after 30 minutes (quite often you have to re-enter, the Remember my ID checkbox doesn‚Äôt affect anything).  At the same time, it is necessary to register separately on the developers website and in the store. <br>  2) Playing <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BF%25D0%25B5%25D1%2586%25D1%258D%25D1%2584%25D1%2584%25D0%25B5%25D0%25BA%25D1%2582">sfx</a> sounds is delayed by 0.5 seconds, which makes it difficult to use sound effects in games.  The official position of LG: we have been working on this problem (they have been working for more than a year), use graphic special effects instead of sound ones.  I had to abandon the sound. <br>  3) I do not know how things are with this in other online stores, but filling out the description and test results is tiring.  Most of the items in the test plan look like this: ‚ÄúThe application is described properly,‚Äù ‚ÄúThe application does not contain malicious code,‚Äù ‚ÄúNo calls for violence and racial discrimination,‚Äù ‚ÄúThe application works fine, without error messages,‚Äù etc. <br><br><h4>  Support </h4><br>  Pleased support.  I could not understand the remark from QA: "UI must be navigable with MRCU (Cursor + OK + Back)".  I sent a letter of support in English, but answered me in Russian.  Either determined by my location, or by crooked English.  If a specialist from support sits on Habr√© - thank you. <br><br><h4>  Few numbers </h4><br>  2 pm on the development of the prototype; <br>  1 month for revision; <br>  5 months to put in the market, because  the interesting part of the work (coding) was over, but the QA refusals did not add inspiration. <br><br>  Pareto's law: 20% of the project takes 80% of the time. <br><br>  [ <a href="http://github.com/moggiozzi/JsTetris/tree/release">source</a> ] </div><p>Source: <a href="https://habr.com/ru/post/259375/">https://habr.com/ru/post/259375/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../259363/index.html">VKontakte does not pay users for found vulnerabilities</a></li>
<li><a href="../259365/index.html">TrueCrypt container as storage for XenServer virtual machines</a></li>
<li><a href="../259367/index.html">Create an app for Gear VR using Unity3D</a></li>
<li><a href="../259369/index.html">PHP for the little ones. MVC in its own way</a></li>
<li><a href="../259371/index.html">Welcome to the OWASP Russia Meetup June 6</a></li>
<li><a href="../259377/index.html">Developing a successful international business with Google Play</a></li>
<li><a href="../259379/index.html">Opera browsers, their modes and engines</a></li>
<li><a href="../259381/index.html">100 Years Later: Ramanujan Records Complete</a></li>
<li><a href="../259383/index.html">OpenEMS dipole antenna simulation</a></li>
<li><a href="../259385/index.html">Why did we open the code Virtuozzo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Is it hard to write your first VHDL program?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Is it hard to write your first VHDL program? It's hard to say, but the main thing here is motivation ... 


 Maybe I could have managed to delay this ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Is it hard to write your first VHDL program?</h1><div class="post__text post__text-html js-mediator-article">  Is it hard to write your first VHDL program?  It's hard to say, but the main thing here is motivation ... <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/z2/bv/hn/z2bvhnb6ur4cnx35lh3rh-fj-ra.png"></div><br>  Maybe I could have managed to delay this moment, but a neighbor asked me to make a rectangular pulse generator so that it could be clearly displayed and it would be possible to control the frequency and duration of the pulse. <br><br>  And with an accuracy of 0.1 microseconds ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And my opinion fell on a scarf with CPLD (200 rubles, sort of) on which there were indicators and buttons.  Once you should start working with such a thing, I thought, and ... <br><a name="habracut"></a><br>  The choice on what to write VHDL or Verilog did not stand - although I write everything in C, but I still love Ada - so VHDL is unique.  Moreover, having read the introduction to FPGA, I realized that nothing would be complicated (well, at least for such a simple task). <br><br>  So, in the <s>beginning was the word we</s> make ourselves a generator.  The frequency of the native shred is 50 MHz, that is, we will reduce it to 10, so that the switching of the clock line will be in the middle and end.  Here's what happened. <br><br><pre><code class="vhdl hljs"><span class="hljs-comment"><span class="hljs-comment">-- 100 ns signal generator process(clk) variable t:integer range 0 to 5 := 0; begin if rising_edge(clk) then t := t + 1; if t = 5 then t := 0; tact &lt;= not tact; end if; if t = 2 then tact &lt;= not tact; end if; end if; end process;</span></span></code> </pre> <br>  Then you need to somehow display and manage.  We have two values ‚Äã‚Äã- the length of the period and the length of the impulse, so that for the length of the period we assign 3 familiarities (taking into account tenths), and for the length of the period - 3. <br><br><pre> <code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">shared</span></span> <span class="hljs-keyword"><span class="hljs-keyword">variable</span></span> period : <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span> <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">1000</span></span> := <span class="hljs-number"><span class="hljs-number">500</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">shared</span></span> <span class="hljs-keyword"><span class="hljs-keyword">variable</span></span> duty : <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span> <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">1000</span></span> := <span class="hljs-number"><span class="hljs-number">250</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">shared</span></span> <span class="hljs-keyword"><span class="hljs-keyword">variable</span></span> dig1:<span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>):=<span class="hljs-string"><span class="hljs-string">"0000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">shared</span></span> <span class="hljs-keyword"><span class="hljs-keyword">variable</span></span> dig2:<span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>):=<span class="hljs-string"><span class="hljs-string">"0101"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">shared</span></span> <span class="hljs-keyword"><span class="hljs-keyword">variable</span></span> dig3:<span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>):=<span class="hljs-string"><span class="hljs-string">"0010"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">shared</span></span> <span class="hljs-keyword"><span class="hljs-keyword">variable</span></span> di1:<span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>):=<span class="hljs-string"><span class="hljs-string">"0000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">shared</span></span> <span class="hljs-keyword"><span class="hljs-keyword">variable</span></span> di2:<span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>):=<span class="hljs-string"><span class="hljs-string">"0000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">shared</span></span> <span class="hljs-keyword"><span class="hljs-keyword">variable</span></span> di3:<span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>):=<span class="hljs-string"><span class="hljs-string">"0101"</span></span>;</code> </pre><br>  Well, for control, signals from the buttons are suitable, which are visible at the bottom of the board - there are only 4 of them, <br>  so let two control the change of period and momentum, respectively, one sets the sign of the change, and another one turns the output of the generator on and off ... <br><br><div class="spoiler">  <b class="spoiler_title">Here is the management</b> <div class="spoiler_text"><pre> <code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">process</span></span>(key1) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> rising_edge(key1) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> ready &lt;= <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> ready; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>(key3) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> rising_edge(key3) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> key4 = <span class="hljs-string"><span class="hljs-string">'1'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> inc_duty; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> dec_duty; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>(key2) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> rising_edge(key2) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> key4 = <span class="hljs-string"><span class="hljs-string">'1'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> inc_period; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> dec_period; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>;</code> </pre><br><br>  In management there are inc / dec procedures, here they are <br><pre> <code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">procedure</span></span> inc_duty <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> duty &lt; period <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> duty := duty + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> dig1 = <span class="hljs-string"><span class="hljs-string">"1001"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> dig1 := <span class="hljs-string"><span class="hljs-string">"0000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> dig2 = <span class="hljs-string"><span class="hljs-string">"1001"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> dig2 := <span class="hljs-string"><span class="hljs-string">"0000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> dig3 = <span class="hljs-string"><span class="hljs-string">"1001"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> dig3 := <span class="hljs-string"><span class="hljs-string">"0000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> dig3 := dig3 + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> dig2 := dig2 + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> dig1 := dig1 + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">procedure</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">procedure</span></span> dec_duty <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> duty &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> duty := duty - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> dig1 = <span class="hljs-string"><span class="hljs-string">"0000"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> dig1 := <span class="hljs-string"><span class="hljs-string">"1001"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> dig2 = <span class="hljs-string"><span class="hljs-string">"0000"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> dig2 := <span class="hljs-string"><span class="hljs-string">"1001"</span></span>; dig3 := dig3 - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> dig2 := dig2 - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> dig1 := dig1 - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">procedure</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">procedure</span></span> inc_period <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> period &lt; <span class="hljs-number"><span class="hljs-number">1000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> period := period + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> di1 = <span class="hljs-string"><span class="hljs-string">"1001"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> di1 := <span class="hljs-string"><span class="hljs-string">"0000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> di2 = <span class="hljs-string"><span class="hljs-string">"1001"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> di2 := <span class="hljs-string"><span class="hljs-string">"0000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> di3 = <span class="hljs-string"><span class="hljs-string">"1001"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> di3 := <span class="hljs-string"><span class="hljs-string">"0000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> di3 := di3 + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> di2 := di2 + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> di1 := di1 + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">procedure</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">procedure</span></span> dec_period <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> period &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> period := period - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> di1 = <span class="hljs-string"><span class="hljs-string">"0000"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> di1 := <span class="hljs-string"><span class="hljs-string">"1001"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> di2 = <span class="hljs-string"><span class="hljs-string">"0000"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> di2 := <span class="hljs-string"><span class="hljs-string">"1001"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> di3 = <span class="hljs-string"><span class="hljs-string">"0000"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> di3 := <span class="hljs-string"><span class="hljs-string">"1001"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> di3 := di3 - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> di2 := di2 - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> di1 := di1 - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">procedure</span></span>;</code> </pre><br></div></div><br>  A little long and complicated (that's why it is folded up), but it‚Äôs quite understandable. <br><br>  Well, we need to somehow display - we have a seven-segment indicator, and there are 6 of them (actually 8).  We will display the time and, in order not to suffer with a point, in tenths of a microsecond. <br><br>  Let them cycle through and display the current digit: <br><br><pre> <code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">process</span></span>(tactX) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> tactX <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span><span class="hljs-string"><span class="hljs-string">"000"</span></span>=&gt; en_xhdl&lt;=<span class="hljs-string"><span class="hljs-string">"11111110"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span><span class="hljs-string"><span class="hljs-string">"001"</span></span>=&gt; en_xhdl&lt;=<span class="hljs-string"><span class="hljs-string">"11111101"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span><span class="hljs-string"><span class="hljs-string">"010"</span></span>=&gt; en_xhdl&lt;=<span class="hljs-string"><span class="hljs-string">"11111011"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span><span class="hljs-string"><span class="hljs-string">"011"</span></span>=&gt; en_xhdl&lt;=<span class="hljs-string"><span class="hljs-string">"11110111"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span><span class="hljs-string"><span class="hljs-string">"100"</span></span>=&gt; en_xhdl&lt;=<span class="hljs-string"><span class="hljs-string">"11101111"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span><span class="hljs-string"><span class="hljs-string">"101"</span></span>=&gt; en_xhdl&lt;=<span class="hljs-string"><span class="hljs-string">"11011111"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span><span class="hljs-string"><span class="hljs-string">"110"</span></span>=&gt; en_xhdl&lt;=<span class="hljs-string"><span class="hljs-string">"10111111"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span><span class="hljs-string"><span class="hljs-string">"111"</span></span>=&gt; en_xhdl&lt;=<span class="hljs-string"><span class="hljs-string">"01111111"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-keyword"><span class="hljs-keyword">others</span></span> =&gt; en_xhdl&lt;=<span class="hljs-string"><span class="hljs-string">"01111111"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>(en_xhdl) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> en_xhdl <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"11111110"</span></span>=&gt; data4&lt;=dig1; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"11111101"</span></span>=&gt; data4&lt;=dig2; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"11111011"</span></span>=&gt; data4&lt;=dig3; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"11110111"</span></span>=&gt; data4&lt;=<span class="hljs-string"><span class="hljs-string">"1111"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"11101111"</span></span>=&gt; data4&lt;=di1; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"11011111"</span></span>=&gt; data4&lt;=di2; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"10111111"</span></span>=&gt; data4&lt;=di3; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"01111111"</span></span>=&gt; data4&lt;=<span class="hljs-string"><span class="hljs-string">"0000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-keyword"><span class="hljs-keyword">others</span></span> =&gt; data4&lt;=<span class="hljs-string"><span class="hljs-string">"1111"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>(data4) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> data4 <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-string"><span class="hljs-string">"0000"</span></span> =&gt; dataout_xhdl1 &lt;= <span class="hljs-string"><span class="hljs-string">"11000000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-string"><span class="hljs-string">"0001"</span></span> =&gt; dataout_xhdl1 &lt;= <span class="hljs-string"><span class="hljs-string">"11111001"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-string"><span class="hljs-string">"0010"</span></span> =&gt; dataout_xhdl1 &lt;= <span class="hljs-string"><span class="hljs-string">"10100100"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-string"><span class="hljs-string">"0011"</span></span> =&gt; dataout_xhdl1 &lt;= <span class="hljs-string"><span class="hljs-string">"10110000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-string"><span class="hljs-string">"0100"</span></span> =&gt; dataout_xhdl1 &lt;= <span class="hljs-string"><span class="hljs-string">"10011001"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-string"><span class="hljs-string">"0101"</span></span> =&gt; dataout_xhdl1 &lt;= <span class="hljs-string"><span class="hljs-string">"10010010"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-string"><span class="hljs-string">"0110"</span></span> =&gt; dataout_xhdl1 &lt;= <span class="hljs-string"><span class="hljs-string">"10000010"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-string"><span class="hljs-string">"0111"</span></span> =&gt; dataout_xhdl1 &lt;= <span class="hljs-string"><span class="hljs-string">"11111000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-string"><span class="hljs-string">"1000"</span></span> =&gt; dataout_xhdl1 &lt;= <span class="hljs-string"><span class="hljs-string">"10000000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-string"><span class="hljs-string">"1001"</span></span> =&gt; dataout_xhdl1 &lt;= <span class="hljs-string"><span class="hljs-string">"10010000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OTHERS</span></span> =&gt; dataout_xhdl1 &lt;= <span class="hljs-string"><span class="hljs-string">"11111111"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CASE</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PROCESS</span></span>;</code> </pre><br>  I admit honestly I dragged part of the code from the sources that came with a scarf - it‚Äôs very cool and clearly written!  en_xhdl - this signal will control which indicator is on in the switching cycle, dataout_xhdl1 - this signal turns on the LEDs, well, data4 is a temporary register and stores a digit. <br><br>  It remains to write a heart that considers everything - the generator itself.  Here tactX is the display generator, and cnt is the pulse position counter.  Well, lin is the signal of the generator itself. <br><br><pre> <code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">process</span></span>(tact) <span class="hljs-keyword"><span class="hljs-keyword">variable</span></span> cntX : <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span> <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">1000</span></span> := <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">variable</span></span> cnt : <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span> <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">1000</span></span> := <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> rising_edge(tact) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cntX = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> tactX &lt;= tactX + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; cntX := cntX + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cnt &gt; period <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> cnt := <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> cnt := cnt + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cnt = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> lin &lt;= <span class="hljs-string"><span class="hljs-string">'0'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">elsif</span></span> cnt = duty <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> lin &lt;= <span class="hljs-string"><span class="hljs-string">'1'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>;</code> </pre><br>  Well, it remains to output the data - this is done constantly, so it should be located in the parallel execution block. <br><br><pre> <code class="vhdl hljs"> cat_led &lt;= dataout_xhdl1; en_led &lt;= en_xhdl; led1 &lt;= <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> ready; out1 &lt;= lin <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> ready = <span class="hljs-string"><span class="hljs-string">'1'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">'0'</span></span>; out2 &lt;= <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> lin <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> ready = <span class="hljs-string"><span class="hljs-string">'1'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">'0'</span></span>;</code> </pre><br>  At the end, blind all processes together - the resulting Quarus Prime file was favorably received, compiled, and reported that <br><br><pre> <code class="markdown hljs">Top-level Entity Name v12 Family MAX II Device EPM240T100C5 Timing Models Final Total logic elements 229 / 240 ( 95 % ) Total pins 29 / 80 ( 36 % ) Total virtual pins 0 UFM blocks 0 / 1 ( 0 % )</code> </pre><br>  The most tedious stage remains, although it is completely graphic - to assign specific pins to the signals.  And that‚Äôs all - it remains to pour everything into the device and check!  Interestingly, we managed to keep within 229 cells, so there were still 11 left - but in reality, almost all gobbled up the interface - buttons and display.  Actually the generator can be stacked in several cells - Intel has a document where they describe how to stack in 1 LUT - well, of course, without control ... <br><br>  So, answering the question of the headline - no, it‚Äôs not difficult if you know C or Ada and you understand how digital electronics work, and yes, it‚Äôs difficult if you don‚Äôt have an idea of ‚Äã‚Äãthe basic things ... At least it took me a day to write, and I I got a lot of pleasure both from the development process, and from a functioning device!  And the neighbor is happy :) </div><p>Source: <a href="https://habr.com/ru/post/461621/">https://habr.com/ru/post/461621/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../461611/index.html">Verilog Cache Implementation</a></li>
<li><a href="../461613/index.html">Battery self-study</a></li>
<li><a href="../461615/index.html">4 deadly sins of TWS headphones: why is True Wireless still not a mess?</a></li>
<li><a href="../461617/index.html">Theory of a Successful Startup</a></li>
<li><a href="../46162/index.html">iQue Grill - grill with computer and built-in stereo system</a></li>
<li><a href="../461623/index.html">How we made the engine and the game on it for a year and a half</a></li>
<li><a href="../461625/index.html">The digest of interesting materials for the mobile # 308 developer (on July 22 - 28)</a></li>
<li><a href="../461629/index.html">12 steps to find remote work</a></li>
<li><a href="../461631/index.html">17 ways to penetrate the company‚Äôs internal network</a></li>
<li><a href="../461633/index.html">Digital events in Moscow from July 29 to August 04</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
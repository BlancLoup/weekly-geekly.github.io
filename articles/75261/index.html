<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Another open source</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Then no one used these words. I'm not sure that I knew their meaning at all then. For the first time about the project of Vladimir Kladov ‚ÄúKey Object ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Another open source</h1><div class="post__text post__text-html js-mediator-article">  Then no one used these words.  I'm not sure that I knew their meaning at all then.  For the first time about the project of <a href="http://kolmck.net/r_author.htm">Vladimir Kladov</a> ‚ÄúKey Object Library‚Äù, or simply <a href="http://kolmck.net/rindex.htm">KOL,</a> I found out before the institute, in one of the two issues of the magazine ‚ÄúProgrammer‚Äù, which my mother wrote to me in honor of going to the programming contest in the region.  The article was entitled ‚Äú <a href="http://www.base-it.ru/kol-v-serdtse-svoey-programmy.html">Stake in the Heart ... of its program!</a>  "It seems in the same issue of the magazine, I first learned about .NET.  Then, such exorbitant resource requirements seemed almost a diversion of the software giant against the IT industry.  (I still remember the laboratory friend of a fellow student consisting of a single mold that runs half a minute at the department on the Celeron 433 64MB hardware from under Windows 98. I played on the same machine in Diablo II without brakes when the task for a couple was done :) <a name="habracut"></a><br><br>  And KOL was different.  He put in the forefront the speed of work and the size of the executable file.  It was not good at that time to download software updates of 10 megabytes each from the Internet.  For those that wrote under Delphi, the choice was not great - either use VCL - standard Delphi visual library (by the way, its architect also worked on creating the .NET framework), or writing on windows API, the most desperate enthusiasts were doing it. <br><br>  Not to say that VCL was terrible, it coped well with projects from medium to large.  But for small utilities, which a novice programmer writes most, he did not fit fully.  The minimum size of the executable file was, depending on the version of Delphi, from 250 to 350 KB and quite quickly increased with the addition of various controllers to the application.  This was the result, above all, of a highly branched class tree, where each control had up to a dozen parents.  In addition, I could not forgive the VCL that the empty application on it on my very first AMD K5-100 computer started for about half a second, and the application on MFC (the standard framework in old visual studios) started almost instantly :) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Apparently Vladimir Kladov was worried about the same problems and at some point he began writing XCL, a library built on the same principles as the VCL, but respectful of the size of the executable file.  And I must say that there are quite a few ways to influence the size of the executable (not counting the post-processing in the form of packers).  Different code that performs the same task can vary greatly in size.  However, the work on this project did not last long (judging by the <a href="http://kolmck.net/xcl_history_old.htm">history of changes</a> , a year), when the ineffectiveness of this approach became apparent.  A new attempt to rethink the device of a compact framework was KOL. <br><br>  The main know-how of the KOL approach was to imprison the functionality of <u>all</u> standard controls in a <u>single</u> PControl class.  At first glance, this seems to be nonsense, when one class is responsible for the directory tree and the button, but it worked.  The whole secret was in different designers for different controllers.  The MCK, a superstructure above the VCL, which generated the code for creating similar KOL components, was the backlog for everything.  Those.  you could work in the familiar Delphi environment, throw buttons on the form, and MCK generated you a code for the same form, but on pure KOL.  In this case, the starting size of the application was 20 kb or 10 kb with a little trickery, a replacement for the Delphi system libraries, which could be used in ‚Äúreleases‚Äù. <br><br>  The community developing the library was small but friendly.  Of course, Vladimir made the biggest contribution to the development of the library, but it was difficult to overestimate the role of others.  I joined this friendly team, still quite green, on the first courses of the institute.  The main forum, in combination with the bug-track, was on the site <a href="http://www.delphimaster.ru/cgi-bin/forum.pl%3Fn%3D10">delphimaster.ru</a> .  Commits, in the form of diffs made using the utility written by Vladimir, were made by all those interested (I still don‚Äôt know if its diff format is compatible with other open source counterparts).  New versions released our permanent team leader.  The license under which the library can be used seems never to have been discussed.  The official website still says simple and understandable ‚ÄúProvided free of charge, with source code‚Äù. <br><br>  A lot of <a href="http://kolnmck.kolmck.net/files2.shtml">auxiliary libraries</a> have been written and ported under the framework, all in compliance with the main ideology. <br><br>  As in any other Open Source project, everyone found something different in his development.  Vladimir had and still has quite a few small and medium-sized projects, all built on KOL: <ul><li>  <a href="">ImgSearch</a> - Program for finding and deleting similar images.  At one time, it worked better, perhaps imageDupeless known to you. </li><li>  <a href="http://zoomer.kolmck.net/">Zoomer</a> - ( <b>Beware</b> , something tells me that the virus on the page. The program itself is in order).  Fast, even very, graphic image viewer with its unique scaling algorithm using MMX, which Vladimir did not agree to issue even under torture :) </li><li>  <a href="">EmuZWin</a> - Spectrum Emulator (S48 and S128).  Supports Multicolor (48K, 128, 128 / + 2 / + 3, Pentagon), Smooth Scale, and a very long list of other things :) </li></ul>  These and other smaller applications can be found on the <a href="http://kolmck.net/r_apps.htm">KOL program</a> page.  As Vladimir himself has repeatedly said, the library is actively used by him in his main work. <br><br>  I, of course, had completely different goals.  For me, it was primarily a programming practice.  Well, as they say now just for fun.  I made a total of 4 more or less significant contributions to the library.  Since I still do not remember the chronology, I will list them in increasing order of importance. <br><br><h5>  New Drawing for GradientPanel Controller </h5><br>  The reason for writing is the very slow speed of the previous implementation.  Since the new one did not support some types of fills that the old implementation supported, it was not enabled by default. <br><br><h5>  TinyPictures library </h5><br>  Of course, this was not the first or even the best library for downloading images under KOL.  But it was very tricky :) The BMP JPG and GIF format downloaders did not occupy more than one kilobyte in compiled form.  How is this possible?  The OLE automation features of OleLoadPicture were used.  Of course, this was not an option for graphic editors, at least this function could not download broken images.  But for some installer was the most.  But with PNG everything was more complicated.  Of course, I took some kind of library not for KOL as a basis (I don‚Äôt even remember which one), but then I found a <a href="http://www.schaik.com/pngsuite/">set of pictures for testing</a> PNG and many formats didn‚Äôt work.  I had to finish writing.  Then I found out what the PNG format is capable of and how different it is (hello, ie!). <br><br><h5>  Replacing the old transparency system </h5><br>  KOL allowed any element to draw itself of any shape.  What Vladimir realized, and later I improved, was not in the VCL except for windowless controllers (i.e., pictures and labels).  My improvement was as follows: the transparent element used to draw the parent on itself, and then on top of itself.  If there were 20 transparent elements, each of them painted a parent on itself.  My solution was not to draw the child elements, but to send a request for redrawing to the parent, who would draw all the children on himself.  It sounds simple, but in reality it was very difficult to force GDI to do something it was not intended for.  Nevertheless, the achieved result seems to work correctly in at least 90% of cases and worked faster than the previous version. <br><br><h5>  GRush controls </h5><br>  So far this is the biggest project I have done alone.  Someone from the forum participants somehow demonstrated their experience in porting to the KOL library RB Controls.  By the way, the original RB Controls are used in at least one of the add-ons over IE (maxthon, it seems).  The demo of the ported components looked like this: <br><br><img src="http://img22.imageshack.us/img22/2874/kolrbcontrolsdemo.png" alt="image"><br><br>  Agree, quite nice.  Plus, good customization options.  But the speed of all this was far from amazing (you can see a <a href="">compiled example</a> ).  As I understand it, the original RBs for the VCL also did not shine.  My further actions are not difficult to guess, I began to work on my version of the controllers, similar to RB Controls outwardly, but completely different inside - GRush Controls. <br><br>  The result was controllers with several fill types, smooth flowing when pressed and hovering, smoothed round corners (hello, css3!), With the ability to use both text with a shadow and a drawing.  And it all worked like hell fast even on my then-celeron 500. The set of components included: Button, Panel, CheckBox, RadioBox, Splitter (slider for resizing by the user of 2 other components), ProgressBar. <br><br>  The work was useful developments on the first project, fast gradient fill.  All critical sections were thoroughly tested and much was written in assembler using MMX.  Rereading now some items of changelog, such nostalgia takes: <br><blockquote><code>[+]     USE_MEMSAVEMODE (  ).  -          Paterns     ,        .          (   ). <br> [*]  BitmapAntialias4X   MMX   (   ),           XXX_BorderRoundWidth/Height.     - GDI,    BitmapAntialias2X (     MMX)       (        USE_2XAA_INSTEAD_OF_4XAA).</code> </blockquote> <br>  I will give a few "shocking" facts: <br>  - The RB Controls demo eats up to 7 meters of memory when I unfold it to full screen and up to 50 meters while resizing the panels using a splitter. <br>  - GRush demo is almost the same ( <a href="">compiled example</a> ) for any window size it eats 850 KB and during resizing up to 3 MB.  The secret is in using for unchangeable surfaces of video memory, for changeable - dib. <br>  - A gradient panel with a size of 1900 √ó 1100 pixels ( <a href="">such</a> ) with rounded, four times ironed corners 100 √ó 100 pixels each, capable of being drawn 70 times per second.  Without round corners up to 320 times.  This is on a single Athlon 5200 core. I must say that this is a drawing from scratch, which happens when a component is resized or created.  If nobody touches the component, it draws itself from the caching surface much faster. <br><br>  Separate mentions are visual wizards of component settings in MCK.  As I said before, MCK components are essentially the same VCL components.  It does not play a big role for buttons and panels, both are in both frameworks (KOL and VCL).  But GRush controls for VCL is not, and they have a lot of settings.  And to make a full-fledged editor, I would have to port them to the VCL.  The idea itself is not bad, but not for the sake of the settings editor!  I acted differently.  As far as I know, before me, and possibly after, no one did this.  I launched the KOL form with real GRush controllers as an editor.  Those.  the KOL form worked in the Delphi environment itself.  The editor is: <br><br><img src="http://img199.imageshack.us/img199/8919/mckgrushmaster.png" alt="image"><br><br>  I think I told all that was going.  The story was inspired by yesterday's poll in Habr√©, "Do you have any authority in programming," which, apparently, the author chose to hide (We traditionally have negative polls, yes). <br><br>  By the way, I stumbled upon my old ftp at one <a href="">interesting archivist</a> .  Not even sure that I did it myself.  There are several demo projects on VCL vs KOL and VCL &amp; RB vs KOL &amp; GRush.  You can compare the size of programs, download speed and memory consumption. </div><p>Source: <a href="https://habr.com/ru/post/75261/">https://habr.com/ru/post/75261/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../75252/index.html">SLEEPBOX - a comfortable overnight stay anywhere in the city</a></li>
<li><a href="../75255/index.html">Great song of a little man or Big sediment from hosting Hosting.ua</a></li>
<li><a href="../75256/index.html">Samsung netbook n310 review</a></li>
<li><a href="../75258/index.html">Aeroflot. Transportation rules</a></li>
<li><a href="../75260/index.html">Do you use Google Docs?</a></li>
<li><a href="../75265/index.html">Oper'nye fun with first-line</a></li>
<li><a href="../75271/index.html">Create a page "stub" for their sites</a></li>
<li><a href="../75272/index.html">Translation Django Documentation: Models. Part 3</a></li>
<li><a href="../75273/index.html">Google published the source code for Android 2.0, and it was immediately launched on the HTC G1 (Dream). It works without brakes.</a></li>
<li><a href="../75274/index.html">License Panda Antivirus Pro 2010 for 3 months</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
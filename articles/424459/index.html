<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Success story, or DEV + DEVOPS + OPS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Development teams can be weakly interconnected and work in different directions, not knowing and not wanting to use DevOps. In today's article, we wil...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Success story, or DEV + DEVOPS + OPS</h1><div class="post__text post__text-html js-mediator-article">  Development teams can be weakly interconnected and work in different directions, not knowing and not wanting to use DevOps.  In today's article, we will talk about how DevOps practices can be distorted and transformed so that they can be implemented in companies with long-established rules, policies and habits of people. <br><br><img src="https://habrastorage.org/webt/jn/ib/ei/jnibei25spbbapaal6uwlz6vci4.png"><br><br>  The material is based on the report-dialogue of Sergey Berdnikov (Golden Crown) and Artem Kalichkin (CFT) from the October <b>DevOops 2017</b> conference.  Under the cut - video and text transcript of the report. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/74bqTSmSI4E" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>Sergey:</b> I am the head of the operations department in our company.  Artem and I started a small revolution-evolution.  It all started with a revolution, now moved to the stage of evolution. <br><br><img src="https://habrastorage.org/webt/le/pz/rv/lepzrvv9sjb1hefctsxbn0sgfsy.jpeg"><br><br>  <b>Artem:</b> The company has been operating in the financial market since 1992.  The work consists of two main parts.  The first part is software development, Core Banking, bank accounting and so on.  Here we act as a vendor: we developed and sold you a box, and you deployed and operated it. <br><br>  The second part is processing services.  Here we provide services either directly to individuals or through our partners.  These are large retail chains, banks, other participants in the financial services market.  Here we are working on a full cycle from the idea to the development, implementation and further exploitation. <br><br>  Sergey and I work in the processing part of our company.  We will tell you about how we came to the story with DevOps in this processing. <br><br><h1>  What happened </h1><br><br><img src="https://habrastorage.org/webt/zr/fz/um/zrfzumxez4uqap6kkwoprapd9by.jpeg"><br><br>  <b>Sergey:</b> Our legacy was completely banking.  The company initially made banking products, respectively, everything was familiar: the entire infrastructure of SPARC only, its own data centers, the entire kernel is written in Oracle.  PL / SQL-code, all sorts of stuff - it is not easy to scale. <br><br>  We scaled only vertically: we bought a powerful piece of iron, we used it until it became outdated, we replaced it with a new one and took the old one to staging. <br><br>  Also wrote a lot of Java code.  We were backed up via a warm reserve: there is a data center, and the entire copied structure is full of switches, servers, all one-on-one, bolt to bolt. <br><br><img src="https://habrastorage.org/webt/gy/qu/11/gyqu11d93h5nv5glfrggqdeori8.jpeg"><br><br>  Here you can see how the whole structure looked from the point of view of the processes.  There were separate Dev technical directorates, further firewalls with fire.  Next was centralized IT, which was engaged in the removal, deployment and so on.  That is, the Devs wrote a big instruction, and IT Operations was divided into three divisions: <br><ul><li>  Application administrators who are engaged in deployment.  They did not have a root, there were users on the machines, they could follow the instructions - this is called the Monkey code. </li><li>  Unix administrators who could and were able to configure, pour iron and so on. </li><li>  There were separate database specialists.  And since the database for us is the main goal, the essence of our existence for a long time, there have been many processes. </li></ul><br>  <b>Artem:</b> DevOps is not here at this stage yet, we worked according to the regulations, which Sergey was not pleased with. <br><br>  <b>Sergey:</b> I came to the team of application administrators and I remember what kind of "wonderful times" these were.  We could make one application for three weeks.  The application comes, they found some mistake in it and canceled it, believing that the fools themselves did not know how to write applications.  And the knowledge that is necessary for the correct writing of the application was with me. <br><br>  People then resorted every other day: ‚ÄúWhat did we write wrong?‚Äù.  I explained that somewhere they did not put a plus or a minus, they forgot a comma.  They write an application, I give some expertise on how to work in Oracle, and send it further to the DBA, where specially trained people who know how to execute these applications sit. <br><br>  And they also work with me, they say: ‚ÄúWhy didn‚Äôt I indicate the main indicator here, didn‚Äôt write a semicolon?‚Äù.  The application is canceled, the cycle begins anew.  Now for such a shame, but what to do, before working in this way. <br><br>  <b>Artem:</b> Then we began to change.  There were really many applications.  When Sergey came to our team, he became the result of a small evolution and transformation.  I was the author of a sufficiently large number of regulations of different types of applications, because I had to somehow survive.  In general, the whole transformation took place not because of a hype or a fashion, but because of the need to solve specific problems. <br><br>  For example, configuration changes lead to the fact that my combat broke and worked incorrectly.  I found out about this in 24 hours or at night: it happened that at six in the evening something rolled over, and until three in the morning it all worked incorrectly. <br><br>  Passed the installation version, in front of which no one was going and did not discuss what to do if something goes wrong.  The well-known famous multi-page installation instructions were transmitted literally half an hour before the start of work in operation.  It was necessary to solve something, and at that time we found a solution - an adaptive implementation of ITIL processes. <br><br>  We began to check whether everything was correctly rolled after the roll-up to combat, whether the service and the main key indicators work normally.  We started dating before installing versions.  It was then, actually, that was the very beginning of DevOps, when the development team, which transmits the distribution kit, began to at least meet with the operation team, to discuss what would be in the night work. <br><br>  <b>Sergey:</b> And there was something to discuss: we had four pages of installation instructions - execute the command, execute the plan.  It was almost impossible to write without errors.  We constantly swore between the development, what was written wrong, read, and stuff like that.  Meetings sometimes turned into hell. <br><br>  <b>Artem: We</b> tried to move with requests to Confluence, as it is inconvenient to transfer to Word - it was possible to form something wrong.  In Confluence, they always planned to post the current version with all the changes. <br><br>  Inserted a piece of code for rolling in combat.  Confluence chewed meta-markup, gave out something else incorrect, the admin took the code that turned into noodles and started working with it - it was a disaster. <br><br>  We understood that no matter how perverted the page instruction was, it all turned into utter nonsense, no matter how it was framed. <br><br>  There were important prerequisites for protracted downtime during the night work, which led to a poor take-off after installation, jambs, and a huge number of conflicts between development and operation. <br><ul><li>  Many human errors in the transfer of changes; </li><li>  Constant search for the guilty; </li><li>  The speed of removal of new modules up to 3 weeks; </li><li>  Single points of failure (only vertical scaling), lack of balancing; </li><li>  Planned downtime during updates for 2 hours. </li></ul><br><br><h1>  Transformation prerequisites </h1><br><br><img src="https://habrastorage.org/webt/hb/b0/hm/hbb0hmqz03nidmnnteigf0olgyu.jpeg"><br><br>  <b>Sergey:</b> There were a lot of changes, we were constantly lying.  Every week we gathered, swore, calmed down.  This process was repeated forever, looking for the guilty: "This is all the developers who write the curve code, even the Java module can not pass." <br><br>  <b>Artem:</b> And the developers believed that these were elementary things: an error occurred in the logs - figure it out, google it and figure out what needs to be fixed in the configs. <br><br>  <b>Sergey:</b> Also released new products for a very long time.  This is connected structurally: we created an application, we had to create an application for creating a user on the server, then create a scheme.  Then began the football bids.  The developers issued the modules, but we cannot use them, we have everything according to the regulations. <br><br>  Also, we were very long set.  The instruction is huge, while reading, while you are doing, the reel took about two hours.  The actions themselves were not performed in a second. <br><br>  <b>Artem:</b> There were also routine actions, for example, 30 Java modules.  In all there is a config, in each config you need to go in and make changes.  First, you can go crazy doing the same change: you hate yourself and the rest of humanity.  Secondly, the probability of making a mistake on the 25th config becomes extremely high. <br><br>  <b>Sergey:</b> I remember how I got the offer to scale horizontally.  And we have 150 modules with different configs: if there is an error in one version of the config, they will install the second one for me, and I will be mistaken in it.  We are not robots, after all. <br><br>  <b>Artem:</b> Planned downtime for 2 hours is one of the critical factors of why we began to look for a solution, how to get away from it. <br><br>  The fact is that we provide financial services, processing services.  We work for foreign countries.  Then we already worked in 11 time zones, in 2013 we had only one hour window, when the use of the service was minimal, the number of customer calls was minimized, there was a calm, and something could be done. <br><br>  Conventionally, we could carry out work from one to two at night.  Two hours is much more than this window.  We were approaching a catastrophe if it were not for the transformation, because now we have no physical windows. <br><br>  The answer to all these problems I had an idea, an attempt to find out, and what is DevOps. <br><br>  At that time our colleague arrived with HighLoad, I was fiddling with the introduction of CMBD, because I needed the configurations to not break and I could manage at least something.  He listened to the report of Sasha Titov, who talked about some Chef.  It seems to be configuration management too. <br><br>  In 2013, I read about it all, I decided that some garbage and not what you need.  I need to control, and they are forced to write code there.  However, the situation did not change, problems accumulated and I forced myself to sit at home and begin to understand.  I thought that there was something in it, some kind of salvation. <br><br>  And then I discovered the postulates and values ‚Äã‚Äãthat we should have the same environment, the same roll-out and update scenario, that we should test these scenarios, starting with the test environment. <br><br>  There was an opportunity to minimize the instruction and manual actions, and to automate everything as much as possible not just by separate bash-scripts, in which then another admin will break his leg. <br><br>  That's when I came up with this idea, with the first declaration of what I want to receive.  This is a 2013 document, first created in the company about DevOps. <br><br>  <b>Sergey:</b> This is the key idea: to reduce the speed of the removal of new modules, to reduce the number of errors when moving to a battle.  That is, there were specific goals that we wanted to achieve at the first stage of the release of new releases. <br><br><img src="https://habrastorage.org/webt/51/_i/6o/51_i6ot_7mavpaloowvb9ssrdv4.jpeg"><br><br>  There were many arguments against it.  For example, the fear that the automation will break everything: it works incomprehensibly, it is terrible to execute someone else‚Äôs code, this is a great service, people get money through us.  Not serious. <br><br>  The following security people joined.  They walked through us to the fullest: some identical stages!  And they have an ideal picture of the world: transfer versions on a flash drive, sign them with a PGP key, and everything will be fine - perfect service.  We worked with them for so long to get to the end, only thanks to the project activity something happened to us. <br><br>  <b>Artem:</b> It was based on values: here we are losing money, this simple one is inadmissible. <br><br>  The guys and I came up with a way to minimize these losses.  Do you have a better option to do this?  If not - be silent, if there is - criticize and offer.  Nothing to offer?  Then we try. <br><br>  There was a process of persuasion and pushing: we offered to use our ideas on a limited number of systems. <br><br>  <b>Sergey:</b> We were asked to write out all the risks, as we will release.  It was necessary to coordinate with people who could lose money.  The programmers also said: ‚ÄúTo write some code, we used to transfer zip normally, instructions were written, another additional code was written for the removal!‚Äù <br><br>  <b>Artyom:</b> ‚ÄúI write application code of business logic, I use frameworks to minimize any unnecessary part of the code.  And you ask for more code to write.  Take and carry out, in the end, ‚Äù- such dialogues were at the start.  But nevertheless, all this gradually, through demonstrations and convictions worked. <br><br><img src="https://habrastorage.org/webt/-m/ei/4m/-mei4mzgzaerthjyhzxfbfuyyoe.jpeg"><br><br>  <b>Sergey:</b> In the first iterations, we made many important decisions in terms of the structure of our company and in terms of technology.  First of all, implemented Configuration management.  This saved us from problems with the removal of the wrong configuration with instructions in 10 A4 pages. <br><br>  Then operations began to sink, and application administrators moved to the technical directorate with the developers.  It gave a sense of command, a feeling of elbow.  We began to understand that we were making a product, and we were not fulfilling incomprehensible requests with a desire to reject them - there were specific goals. <br><br>  Teamwork brings people together when they are sitting next to people, when they see how they work, when they see how we work.  We even had a dialogue between the teams: this is the first spark of real DevOps.  There was no technology, not some new technology.  From the point of view of technology, we thought that nothing would take root at all; we worked differently, in another world. <br><br>  The first idea is that Configuration Management should write by itself, there are a lot of developers.  Then we remembered everything that we wrote ourselves, and refused - we all had a feil. <br><br>  <b>Artem:</b> I will correct a colleague.  Sergei is not right: everything that we write ourselves worked perfectly in our applied field, in which we are strong.  And when they tried to write some of their spiders to automatically build a CMDB or some kind of self-written monitoring systems for controlling business logic, yes, here comes a system of another class. <br><br>  At this stage, it turned out that the application administrators moved from the IT-Directorate to our technical directorate.  As Sergey said, they began to feel the whole business value, elementary due to mercantile things. <br><br>  We were able to pay them project awards for achievements, it was quite motivating.  Since they started the dialogue, the removal of modules decreased from three weeks to more than a week, some progress went even without some deep automatics. <br><br><img src="https://habrastorage.org/webt/j-/oy/go/j-oygo6ekpbd02ablrffz_skyjg.jpeg"><br><br>  <b>Sergey:</b> At this moment, if we did not understand something with the application, we asked the developer to come up: "Let's decide together and write how the application should sound." <br><br>  <b>Artem:</b> And on this, conditionally, command structure, we began to move into the technique. <br><br>  <b>Sergey:</b> Now let's tell you how we chose the system.  It was quite interesting.  First of all, we tried Chef, for one simple reason - we knew a guru who knew Chef.  Then we tried Puppet, because at that time Oracle announced support for Puppet. <br><br>  Ansible also tried, but both teams did not like it as a system.  There were also security problems: Ansible in 2013 was very different from the current one. <br><br>  We launched in parallel two different projects with the same functionality.  And everything worked cool, there was a feeling that something was wrong and should be left alone.  How did we choose? <br><br>  <b>Artem:</b> Programmers wrote on Chef, admins wrote on Puppet.  The idea was: try, then compare, where better and choose.  But when we compiled, when as a result time passed, the duality began to create problems, because the amount of code is growing, it continues to grow and everyone likes everything, the developers write and automate. <br><br>  I gathered everyone and asked what we would write on.  Programmers said: ‚ÄúWe like Chef a lot.‚Äù  And admins: "And we are on Puppet!".  It was a complete tin.  I compared and understood that in the current environment and current parameters there is no objective way to choose one or another product. <br><br>  In the end, I did, as they like to say in our country, elections with a predictable result.  Some "closed" vote among the participants.  But there was no falsification, there was a conditional effect on the brain, as a result of which Puppet was chosen.  I decided that offended developers would calm down faster than offended admins.  There was simply no other selection criteria. <br><br>  <b>Sergey:</b> At that moment, we thought for a long time how to put a binary.  On the slide you can see a photo from our board and meeting.  We decided that you need to use some kind of packaging system, and not your bike.  Again won the mind. <br><br>  In fact, we chose not RPM, but IPS - the Solaris package manager.  We imported ourselves from the 11th version into the top ten, which stood, and began to use.  To refuse samopisny bash-crutches and zip-s at that moment was the most correct decision. <br><br>  <b>Artem:</b> This is why it was still important: in the recipe, the result appears in the form of changing the version number, it continues to draw further and further from the repository. <br><br>  When we came to teach DevOps, Chef, all of these things, and we thought: ‚ÄúNow they will tell you how to transmit a binary,‚Äù but we were not told about this.  The answers are usually such: ‚ÄúEveryone decides in his own way and gets out as he can.‚Äù  Therefore, we understood that the industry response to this is ‚Äú42‚Äù, as from ‚ÄúHitchhiker's Guide to the Galaxy‚Äù, the answer to the main question of the universe. <br><br>  <b>Sergey:</b> We also had long disputes about how to build a CI / CD, what it is.  Like Configuration Management - one utility, they took and set.  And here there are a lot of options and choices, arguing for a long time, the developers made their own system, we made ours in operation for carrying out. <br><br>  At that point in time, we realized that there was no perfect solution.  Just take all that they have worked out and will deliver.  The developers had their own system for the assembly, we made our own delivery.  There was no perfect choice, and still work with different teams in different ways.  There is no ideal. <br><br>  We also have a large stack, most of our code is stored in the database: all financial processing, in which, unfortunately, the paradigm ‚Äúthe closer to the data, the faster it works‚Äù.  Oracle sells, Fowler agrees.  Financial transactions hang in PS / SQL, we did not find any opensource-product that would help solve our problem with versioning and delivery.  Perhaps he was, but we began to write his tool. <br><br>  <b>Artem:</b> We have, in fact, a big problem, because, as mentioned in the initial slide, Production is a large vertical server.  Accordingly, it is terribly expensive and very difficult to raise an equally large vertical server on the Stage.  This is still half the problem. <br><br>  The fact is that we need to raise an environment that is similar in performance and fill it with similar in volume, and, last but not least, cardinal data in order for our tests on the Stage to pass correctly. <br><br>  Here were some very hard decisions.  Firstly, what we did in terms of scaling - we realized that we could not provide the same vertical machines on the Stage as in combat.  But at the time point X, we can fix the benchmark indicators of the system performance requests on the Stage environment and compare them with new packages.  If they start to change abnormally, it means that something has floated here and something does not work wrong.  This is one problem. <br><br>  Then we discovered a problem with the transfer of data from the battle to the Stage in order to fill it with the same amount of data.  It is impossible that none of the people who do not have documents access to customer data, had access to them. <br><br>  We do not have the right to pour personal data and bank secrecy of clients in the Stage.  To transfer this data, wrote obfuscation data scripts so that they are not recoverable and incompatible with the real ones.  At the same time, it is important that it is impossible to replace all full names with aaa bbb, because we lose the cardinality of the data, and all our checks on the Stage show incorrect information. <br><br>  Therefore, we also wrote this script with an eye to the fact that it generated some conditionally random cardinality of these text data so that our queries show an adequate picture that is comparable to the battle, and we could understand the changes. <br><br>  We are moving away from the absolute state of performance, we are watching the changes.  The situation did not worsen compared to the previous version, which, we believe, was not bad in terms of performance. <br><br><img src="https://habrastorage.org/webt/cy/r2/n_/cyr2n_zip9ndqbx2kw2bgurhurk.jpeg"><br><br>  This is the second iteration.  Probably the most key phrase here is that the project ended here.  There was no DevOps project.  Here was originally an internal customer - me.  I got my result: the instruction was reduced, the errors during the removal of the version were reduced, the combat configuration began to change, controlled through Puppet, it became controllable, understandable.  What I wanted was what I got. <br><br>  <b>Sergey:</b> There have been some minor changes with your submission.  Again, responsibilities flowed from centralized IT to the technical board. <br><br>  It became a full OPS with root.  It really helped to accomplish tasks in terms of the removal of new modules.  We began to take out modules faster, after three weeks it seemed ideal to us to do it in just three days.  The result was tangible: there was a drive, the team itself began to generate ideas on what and how to improve. <br><br><img src="https://habrastorage.org/webt/bm/un/yg/bmunyghmuesubuvfjyqgoley2r4.jpeg"><br><br>  What we did from the point of view of related units: we have a team of 200+ people, 150 developers, 6 OPS.  There were a lot of escorts, security men.  The first is the realization that the best ideal bid that should not be made.  They began to go to this and try: if a person has the opportunity to do something without creating an application, it‚Äôs good for everyone.  And it is done perfectly fast. <br><br>  <b>Artem:</b> Here is an example, we make an offer through git.  The manager himself comes in and makes an offer for a fight. <br><br>  <b>Sergey:</b> We found tools like Gitlab, we liked that a person can work with a graphical interface.  There is a ‚Äúdownload‚Äù button, the user may not even understand what the commit actually does. <br><br>  In this case, we have written scripts to check the content, for example, that pdf is pdf, file size check, and other logic according to the rules issued by the security officers.  People got the opportunity to update these documents without creating an application.  The load on ops has decreased. <br><br>  Another difficulty was how to calculate such moments.  In the routine it is not clear how to look for problem areas.  Therefore, we invented our own scale and called it "Jackals". <br><br>  We were inspired by the old picture.  We considered that we assigned the number of jackals to each completed application, how boring and tedious it is and we don‚Äôt want to do it.  At the end of the month they considered which applications scored the most jackals. <br><br>  They sat down all division and thought how to get rid of this disgrace.  How to make it so that it was not necessary to create applications for this, it was cool and drove the people. <br><br>  The next stage, where we found ways to automate, is bots.  We mastered the API Telegram, began to cut bots for everyone, especially for ourselves.  Concluded last triggers. <br><br><img src="https://habrastorage.org/webt/75/qb/w1/75qbw1syyglhd20kglx0bwdhk8k.jpeg"><br><br>  Business liked: there are situations when something is lying, everyone starts calling and asking what is happening.  And so a person could take a telephone, select the ‚Äúincidents‚Äù command and read the latest incidents.  People began to conduct incidents in more detail, so that no one would call and ask about them. <br><br>  Then we began to write additional features to get information that used to be requests in Jira.  The business wants to know whether the transfer has been completed: enters the number, gets the result.  This also made life much easier in terms of applications. <br><br>  <b>Artem:</b> At the same time, we carried out another organizational transformation, but already local, within Sergey‚Äôs department.  At that time, we became very infected with the idea of ‚Äã‚Äãan on-call duty engineer and, thanks to Sergey, we were able to build this scheme in the department.  There is a seated engineer on incidents, there is a seated engineer on applications, all the rest destroy jackals, are engaged in their shooting. <br><br><img src="https://habrastorage.org/webt/b3/t5/ej/b3t5ejjsi1uuoonkbleeux2b3em.jpeg"><br><br><h1>  Work with DEV </h1><br>  <b>Sergey:</b> What did the division do: there were rearrangements, people were engaged not only in jackals, but also in other things.  First of all, we had a dialogue with the development.  We told the new teams what DevOps is, how to prepare it properly, taught CM. <br><br>  We passed the way from when we ourselves wrote them recipes, then they learned how to correct them, and then write on their own.  We also talk about CI, help set up the pipeline and build packages.  We help build a secure development environment. <br><br>  <b>Artem:</b> From the point of view of CI, this is all very important.  In parallel, I am a product-owner, I lead projects, I lead development teams.  And here is a very interesting case. <br><br>  On small teams, we combined the functions of operation, that is, Stage and Prod in the person of one unit.  On these small projects, small products, teams and infrastructures it turned out very convenient.  You see right through how you will roll the fight. <br><br>  <b>Sergey:</b> When a combat engineer sets up a test environment, he makes her one-on-one, knowing that she will come to him later, and to torment him with it.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is an important psychological factor that you can not freeze, it is better to do everything at once and normal. </font></font><br><br><img src="https://habrastorage.org/webt/a7/rd/yp/a7rdypygwcsy5qdtgsjagnr7yxe.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What came out of it? Here, many say that there is no DevOps department, we believe that we have a DevOps department. What are the main tasks of the department? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">He walks, promotes, talks about DevOps. Everyone understands what it is and how to cook it. They tell and show how a new product with a database can be rolled out in five minutes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Our only limitation is security, coordination of schemes. When we have a virtual machine and the schemes are consistent, then everything takes five minutes. Everything is completely rolling automatically. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artem:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When I had a new product launch in August, that is, a completely new one, we rolled out 15-20 releases a day without conflicts and tension. There is a value here: it‚Äôs cool when you calmly relax and go to the next. </font></font><br><br><img src="https://habrastorage.org/webt/c9/rg/je/c9rgjehoyqhvdhjelmb32ttjefg.jpeg"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sergey:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I will talk about pain. We support DRP recovery plan from scratch. And when there was no automation, we copied there almost configs. New modules were constantly added, and the plan needed to be constantly updated. With the advent of DevOps and automation, the plan has declined: we take the latest current version of Git and add plans to it.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This deployment plan becomes fair. This is supported, among other things, by test deployment runs. We do test runs, and in combat we perform a run with a switch to the reserve. The whole routine is gone. This, by the way, helped us move the stack a bit. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We used SPARC Solaris before, now x86 appeared for a simple reason: today nobody writes or tests hipster applications for Sparc. And we use for example Haproxy, together with the developers, we saw fixes for Solaris bugs. It got us, no longer wanted to endure. We chose a platform on which everyone is testing products, and now we are working on it normally. This also shifted us towards speeding up the whole process. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artem:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This generally opened the gates to a new world full of wonders. Because the advent of x86 allowed us to use really relevant and useful utilities for our tasks. Moreover, when we got this opportunity, we moved in parallel towards clustering. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In fact, now everything, except for central and nuclear processing, is clustered and works fine for us. We are not steaming: there is no idle time, or it takes a maximum of one minute, even where there is no cluster. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The only place where he stayed and was at least two hours is the migration of central processing schemes. Now it takes eight minutes. </font></font><br><br><img src="https://habrastorage.org/webt/wy/dn/ty/wydntyqbv0aqmah0vhzxwotkwjw.jpeg"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sergey:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> On the slide, a new document, one-line application: do a merge in git. No more of those ten A4-sheets.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depla new modules takes up to three hours. These are some difficult cases when you need to do something in Oracle, for example, to get a virtual machine. Disappeared errors during the removal. I don‚Äôt remember anyone saying something wrong. Of course, there are some rough edges, but they are all small, not serious, they are corrected very quickly. </font></font><br><br><img src="https://habrastorage.org/webt/xs/-k/mn/xs-kmnmiiz5-jbicr_aujsqi9d4.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What allowed us to achieve success? First of all, we did not start a revolution here and now. I did not say: "We need to implement DevOps in three weeks." We approached this process methodically, agitated for a long time, told people, dripped onto our brains, talked about the goals we were achieving. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artem:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I fought back from the questions of the authorities: ‚ÄúArtem, when is DevOps?‚Äù. He said that there would be no time limit, we try in Prod, do not ask anything. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sergei:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On the other hand, everything is also very cool. We did not impose technologies used by us on all divisions. The company is big, the neighbors are watching, they say: "Well, yes, great, but we deploy every six months."</font></font> They don't need it.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We do not walk, do not tell us that we have the only right decision. Somewhere they don‚Äôt want to use our stack, for them we wrote down simple bash scripts that allow us to integrate with other commands. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artem:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Here I am convinced that the top can not be forced to implement DevOps. It is unreal for such a project. </font></font><br><br><img src="https://habrastorage.org/webt/es/d5/zg/esd5zgzfwd5gzulm-lnm56goiu4.jpeg"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sergey:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We analyzed where we are losing the most time: today we are losing the most time for safety. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We are able to work quickly, quickly deploy, but agreeing on a deployment pattern is some kind of hell. Now we looked at it, it reminds the same thing, when there were completely different units Dev and Ops. Now we have no plan, we think, how to include security in our process so that they can analyze the changes. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artem:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For example, you can use Merge for this, see what has changed in the recipe. Bezopasnik is also an engineer. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sergey:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Often our formal processes do not provide real security. When we conduct an audit, we understand that all procedures have passed, but have not received the desired level of security, and a lot of time and resources have been spent. We constantly find some problems that have occurred due to the poor integration of security processes and CI / CD.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">From the point of view of OPS, we still have the problem of wasting time on CI and fitting recipes. This thing is already beginning to recruit "jackals." Therefore, we are looking at systems to introduce frameworks for developers, we are looking towards Docker, Kubernetes, so that we can write: ‚ÄúGuys, there are tools, there are no big documents, you can unify the delivery process‚Äù. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We want to promote this idea, but security again resists. They say: ‚ÄúSome kind of virtual networks you have, how will services go without a firewall?‚Äù. There are some contradictions, but I think we will win anyway. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artem:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I have my own pain, I would like her to finish. We have a very big problem: we are a company, and we are not the only such company, there are representatives who are in the same situation. We are under the constant control of the regulator, the Central Bank constantly comes with an audit. We pass an audit, we pass an externally independent audit. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is difficult to blame the auditor, he does work on the basis of standards in which it is written that the physical piece of iron should be a separate, non-virtual machine. No containers.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Not a single international standard has so far moved one iota towards new technologies. There is a black hole. They do not notice that this is a big problem. I can not blame the auditors, they are listening to standards. They have nowhere else to take it, but not a single standard is trying to change in this sense, to transform and move somewhere. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I need to figure out how to make friends with the picture now in the company with these terrible words so that everything is correct and fair.</font></font><br><br><blockquote>      ‚Äî   <a href="https://5minphp.ru/episode38/">  ¬´ PHP¬ª</a>    ‚Äî     .  DevOps, DecSecOps,  Kubernetes   State of DevOps 2018 by DORA. <br><br>       ‚Äî    DevOops 2018.    ,  ,   <a href="https://devoops.ru/"> </a> !     ‚Äî <a href="https://devoops.ru/%3Futm_source%3Dhabr%26utm_medium%3Darticle%26utm_term%3Dadblock%26utm_content%3Dlink_program%26utm_campaign%3Ddevops_260918"> </a> . <br><br>  :  1    DevOops 2018  <a href="https://devoops.ru/tickets/%3Futm_source%3Dhabr%26utm_medium%3Darticle%26utm_term%3Dadblock%26utm_content%3Dlink_ticket%26utm_campaign%3Ddevops_260918">  </a> . </blockquote></div><p>Source: <a href="https://habr.com/ru/post/424459/">https://habr.com/ru/post/424459/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../424445/index.html">Translation of Neil Ford's article "Microservices as an Evolutionary Architecture"</a></li>
<li><a href="../424447/index.html">Pascal-style Lisp or 8501st programming language</a></li>
<li><a href="../424453/index.html">Learn OpenGL. Lesson 6.2 - Physically-Based Rendering. Analytical light sources</a></li>
<li><a href="../424455/index.html">Intel Optane - now with a capacity of one and a half terabytes</a></li>
<li><a href="../424457/index.html">IDA Pro Upgrade. Learning to write Python downloaders</a></li>
<li><a href="../424461/index.html">Why learn unpopular languages. Community example F #</a></li>
<li><a href="../424463/index.html">How certainty affects the scope of payments</a></li>
<li><a href="../424465/index.html">Pancakes with ICO on python or how to measure people and ICO projects</a></li>
<li><a href="../424467/index.html">Spray antenna: diminutive, flexible and productive</a></li>
<li><a href="../424469/index.html">The government is exploring the possibility of legislating in the Russian Federation the principle of network neutrality</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Some facts about the CAP- ‚Äútheorem‚Äù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In any discovery of NoSQL databases, someone will definitely remember the CAP- ‚Äútheorem‚Äù. I do not accidentally write the word "theorem" in quotes. CA...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Some facts about the CAP- ‚Äútheorem‚Äù</h1><div class="post__text post__text-html js-mediator-article">  In any discovery of NoSQL databases, someone will definitely remember the CAP- ‚Äútheorem‚Äù.  I do not accidentally write the word "theorem" in quotes.  CAP- "theorem" is not at all a theorem in the mathematical understanding of this word.  This is an informal statement made by Eric Brewer in a report at the Principles of Distributed Computing (PODC) conference in 2000.  Eric argued that it is impossible to create a distributed (consisting of several equivalent instances - links) web application that will simultaneously have three properties: <i>consistency</i> , <i>availability</i> and <i>separation</i> <i>tolerance</i> , or CAP.  The informality of the statement is that Brewer did not define these three concepts. <br><br>  Two years later, Seth Gilbert and Nancy Lynch published a study where they defined the concepts of CAP and also formalized ‚Äú <i>Delayed Consistency</i> ‚Äù, which was later called ‚Äú <i>Eventual Consistency</i> ‚Äù and proved the CAP ‚Äútheorem‚Äù in terms of specified definitions.  If you have not read the study, then it is definitely worth doing - <a href="http://lpd.epfl.ch/sgilbert/pubs/BrewersConjecture-SigAct.pdf">lpd.epfl.ch/sgilbert/pubs/BrewersConjecture-SigAct.pdf</a> <br><br>  This ‚Äútheorem‚Äù would not have been necessary to anyone, if it had not been adopted by the marketers of NoSQL. <br><a name="habracut"></a><br><h4>  Fact ‚Ññ1 </h4><br>  <b>Consistency in CAP does not mean that consistency in ACID</b> .  Gilbert and Lynch define coherence as the existence of a single order of read / write operations throughout the system.  That is, if at time T1 the value X was written, then at any time T2&gt; T1 the user can read X until another write operation occurs.  A more human formulation of consistency in CAP - the user will always read what he wrote, if no one else had time to rewrite the data.  In ACID, this concept coincides with atomicity. <br>  The consistency in ACID gives much stronger guarantees - the integrity (uniqueness) of the keys and the integrity of the foreign keys (the foreign key always refers to the existing record), as well as the fulfillment of all the limitations described in the data schema.  In addition, ACID guarantees not only one transaction, but transactions that may consist of many operations.  Some scenarios, such as ticket sales, are generally impossible without ACID guarantees. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Fact number 2 </h4><br>  <b>Availability in CAP, means at all that you think</b> .  Gilbert and Lynch define accessibility as the ability of any link whose <i>performance is not impaired</i> to respond to a request.  What is a malfunction is not specified. <br><br>  From the client‚Äôs point of view, the response is ‚Äúserver unavailable‚Äù and a direct lack of communication with the server may be equivalent.  Because of this logical flaw, any server inability to respond can be perceived as a link failure and the need to repeat the request to another node. <br>  That is, a web service, all instances of which access the same database, in the event of a loss of communication between the instance and the database begins to generate an error, is available from the point of view of the CAP. <br><br>  There is another logical flaw in the definition of accessibility - the time required for the answer is unlimited, the main thing is that it is finite.  That is, the service may try to access the common base for as long as it takes until the connection is restored.  ‚ÄúAnd what if the connection is not restored at all?‚Äù - you ask, about this just a little further. <br><br>  Thus, accessibility in CAP is not the same accessibility in the philistine sense of the meaning of the word. <br><br><h4>  Fact number 3 </h4><br>  <b>CAP assumes that network separations occur and can last indefinitely</b> .  Splitting a network means losing any number of messages between servers. <br>  There are two misconceptions. <br><ol><li>  With unlimited network sharing, it is impossible to fulfill the <i>Consistency</i> property and even the <i>Consistency</i> property <i>in the long run</i> .  In fact, with unlimited long sharing, the web service ceases to be one from the user's point of view.  Gilbert and Lynch in their study do not consider the case of unlimited long separation, but only a predetermined number of lost messages. </li><li>  Network sharing is extremely rare in our time.  Gilbert and Lynch expressly declare that systems operating on a local network can be considered not susceptible to separation. </li></ol><br>  Thus, most information systems and websites do not fall under the CAP- ‚Äútheorem‚Äù. <br><br><h4>  Fact number 4 </h4><br>  <b>CAP does not describe client behavior</b> .  Loss of communication between the client and the web application is much more common than network separation or even server failure.  The mechanisms for re-requesting and resuming transmission are embedded in many clients.  Roy Fielding's thesis, which appeared about the same time as CAP, describes how to build web services and clients for them based on the HTTP protocol (REST services), with maximum fault tolerance and consistency (in the sense of ACID). <br>  In most cases, on the principles of REST, you can build a system (client + service) that can overcome the lack of accessibility from the point of view of CAP, and in some cases the lack of consistency. <br><br><h4>  Fact number 5 </h4><br>  <b>AP systems are useless in their pure form</b> .  Gilbert and Lynch write that to achieve AP characteristics it is enough that the service always returns one value.  In principle, in its pure form, the AP system (on which no additional restrictions are imposed) can return a random value. <br><br><h4>  Fact ‚Ññ6 </h4><br>  <b><i>Delayed consistency</i> or <i>consistency</i> can <i>ultimately</i> be achieved only if there is no recording in the interval to achieve consistency</b> .  In other words, if the service takes time T to achieve a consistent state, then it is necessary that the recording take place no more than once every T interval, otherwise the <i>delayed consistency</i> becomes a <i>permanent inconsistency</i> . <br><br>  Of course, when recording unrelated data occurs, for example, different zones are updated in the DNS, then this is not a problem.  But for data with a bunch of connections, there is a great opportunity to get a <i>permanently inconsistent</i> state with a large write load. <br><br><h4>  Fact ‚Ññ7 </h4><br>  <b><i>Deferred consistency</i> or <i>consistency ultimately</i> gives no guarantees</b> .  If the system supports only consistency in the long run, then it is impossible to guarantee its correctness.  Any link may rely on outdated data and not be aware of this.  Moreover, it is impossible to introduce additional restrictions and control them at the level of the program code in order to obtain guarantees, since it is necessary to rely on a consistent state to check the restrictions. <br><br><h4>  Conclusion </h4><br>  The CAP- ‚Äútheorem‚Äù has a rather difficult fate.  Initially, it was a statement based on practical considerations.  But for the proof, a formal model was invented, which is quite far from the real world.  And all would be fine if CAP- ‚Äútheorem‚Äù did not become a way of promoting NoSQL databases, causing a wave of disputes, resentments and delusions.  I hope that by understanding CAP, you can make decisions based on practical considerations, not marketing statements. </div><p>Source: <a href="https://habr.com/ru/post/231703/">https://habr.com/ru/post/231703/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../231689/index.html">Monthly digest of interesting IT-projects on Kickstarter ‚Ññ5</a></li>
<li><a href="../231691/index.html">ASUS ZenFone 6</a></li>
<li><a href="../231693/index.html">PHP specifications published for discussion.</a></li>
<li><a href="../231695/index.html">Creating Ivideon: From Idea to Successful Implementation 2.0</a></li>
<li><a href="../231699/index.html">How many cats on Habr√©?</a></li>
<li><a href="../231705/index.html">Blink: Wireless Surveillance System for Home and Office</a></li>
<li><a href="../231707/index.html">A small overview of the monitor AOC G2460Pqu - 144 Hz to the masses</a></li>
<li><a href="../231711/index.html">Katie Sierra on how to create popular applications and improve the "coolness" of its users</a></li>
<li><a href="../231713/index.html">Network Virtualization in Hyper-V. Configuring the HNV gateway based on Windows Server 2012 R2</a></li>
<li><a href="../231715/index.html">Show Sound # 13 - Podcast on audio equipment, components, formats and technologies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
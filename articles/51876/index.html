<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>AJAX + XML + XSLT or a new lookup on AJAX</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A year and a half ago, there was a problem in dynamically generating HTML code. To rebuild HTML using DOM is too cumbersome and the code turns out to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>AJAX + XML + XSLT or a new lookup on AJAX</h1><div class="post__text post__text-html js-mediator-article">  A year and a half ago, there was a problem in dynamically generating HTML code.  To rebuild HTML using DOM is too cumbersome and the code turns out to be big, loading the generated HTML on the server is not a very nice and harsh solution. <br>  It was decided to look for an alternative way to generate HTML. <br>  And it was found: AJAX + XML + XSLT. <br>  On the server side is the XSLT template, the script that generates the XML (or XML file).  On the client side via AJAX, XML and XSLT are loaded and converted to HTML <br><a name="habracut"></a><br>  Example of use: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">function</font> getContent(){ <font color="#0000ff">try</font> { <font color="#0000ff">var</font> xslt = <font color="#0000ff">new</font> xsltLoad( <font color="#A31515">"http://"</font> +location.hostname+ <font color="#A31515">"/content.xml,</font> "http: <font color="#008000">//"+location.hostname+"/template.xsl", "myDiv", callback);</font> xslt.init(); } <font color="#0000ff">catch</font> (e){ alert(e.message) } }</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> getContent(){ <font color="#0000ff">try</font> { <font color="#0000ff">var</font> xslt = <font color="#0000ff">new</font> xsltLoad( <font color="#A31515">"http://"</font> +location.hostname+ <font color="#A31515">"/content.xml,</font> "http: <font color="#008000">//"+location.hostname+"/template.xsl", "myDiv", callback);</font> xslt.init(); } <font color="#0000ff">catch</font> (e){ alert(e.message) } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> getContent(){ <font color="#0000ff">try</font> { <font color="#0000ff">var</font> xslt = <font color="#0000ff">new</font> xsltLoad( <font color="#A31515">"http://"</font> +location.hostname+ <font color="#A31515">"/content.xml,</font> "http: <font color="#008000">//"+location.hostname+"/template.xsl", "myDiv", callback);</font> xslt.init(); } <font color="#0000ff">catch</font> (e){ alert(e.message) } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> getContent(){ <font color="#0000ff">try</font> { <font color="#0000ff">var</font> xslt = <font color="#0000ff">new</font> xsltLoad( <font color="#A31515">"http://"</font> +location.hostname+ <font color="#A31515">"/content.xml,</font> "http: <font color="#008000">//"+location.hostname+"/template.xsl", "myDiv", callback);</font> xslt.init(); } <font color="#0000ff">catch</font> (e){ alert(e.message) } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> getContent(){ <font color="#0000ff">try</font> { <font color="#0000ff">var</font> xslt = <font color="#0000ff">new</font> xsltLoad( <font color="#A31515">"http://"</font> +location.hostname+ <font color="#A31515">"/content.xml,</font> "http: <font color="#008000">//"+location.hostname+"/template.xsl", "myDiv", callback);</font> xslt.init(); } <font color="#0000ff">catch</font> (e){ alert(e.message) } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> getContent(){ <font color="#0000ff">try</font> { <font color="#0000ff">var</font> xslt = <font color="#0000ff">new</font> xsltLoad( <font color="#A31515">"http://"</font> +location.hostname+ <font color="#A31515">"/content.xml,</font> "http: <font color="#008000">//"+location.hostname+"/template.xsl", "myDiv", callback);</font> xslt.init(); } <font color="#0000ff">catch</font> (e){ alert(e.message) } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> getContent(){ <font color="#0000ff">try</font> { <font color="#0000ff">var</font> xslt = <font color="#0000ff">new</font> xsltLoad( <font color="#A31515">"http://"</font> +location.hostname+ <font color="#A31515">"/content.xml,</font> "http: <font color="#008000">//"+location.hostname+"/template.xsl", "myDiv", callback);</font> xslt.init(); } <font color="#0000ff">catch</font> (e){ alert(e.message) } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> getContent(){ <font color="#0000ff">try</font> { <font color="#0000ff">var</font> xslt = <font color="#0000ff">new</font> xsltLoad( <font color="#A31515">"http://"</font> +location.hostname+ <font color="#A31515">"/content.xml,</font> "http: <font color="#008000">//"+location.hostname+"/template.xsl", "myDiv", callback);</font> xslt.init(); } <font color="#0000ff">catch</font> (e){ alert(e.message) } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">function</font> getContent(){ <font color="#0000ff">try</font> { <font color="#0000ff">var</font> xslt = <font color="#0000ff">new</font> xsltLoad( <font color="#A31515">"http://"</font> +location.hostname+ <font color="#A31515">"/content.xml,</font> "http: <font color="#008000">//"+location.hostname+"/template.xsl", "myDiv", callback);</font> xslt.init(); } <font color="#0000ff">catch</font> (e){ alert(e.message) } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">function</font> getContent(){ <font color="#0000ff">try</font> { <font color="#0000ff">var</font> xslt = <font color="#0000ff">new</font> xsltLoad( <font color="#A31515">"http://"</font> +location.hostname+ <font color="#A31515">"/content.xml,</font> "http: <font color="#008000">//"+location.hostname+"/template.xsl", "myDiv", callback);</font> xslt.init(); } <font color="#0000ff">catch</font> (e){ alert(e.message) } }</font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  myDiv - the element into which our HTML will be inserted <br>  callback is a callback function that will work after the content is loaded. <br>  Pros: Minimizing the download data from the server, unloading the server when generating HTML, in this case, this operation is transferred to the client's computer. <br>  Disadvantages of this method: it does not work correctly in Opera and Safari browsers when parsing XSLT templates containing complex for-each instructions <br><br>  Well, the code itself that implements this bundle: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">function</font> getXmlHttpRequestObject () { </li><li>  <font color="#0000ff">if</font> (window.XMLHttpRequest) { </li><li>  <font color="#0000ff">try</font> { </li><li>  <font color="#0000ff">var</font> receiveReq = <font color="#0000ff">new</font> XMLHttpRequest (); </li><li>  } <font color="#0000ff">catch</font> (e) {} </li><li>  } <font color="#0000ff">else</font> <font color="#0000ff">if</font> (window.ActiveXObject) { </li><li>  <font color="#0000ff">var</font> xmlHttpVers = <font color="#0000ff">new</font> Array ( <font color="#A31515">'Msxml2.XMLHTTP.6.0'</font> , <font color="#A31515">'Msxml2.XMLHTTP.5.0'</font> , <font color="#A31515">'Msxml2.2.XMLHTTP.4.0'</font> , <font color="#A31515">'Msxml2.XMLHTTP.3.0'</font> , <font color="#A31515">'Msxml2.XMLHTTP'</font> , <font color="#A31515">'Microsoft.XMLHTTP'</font> ) ; </li><li>  <font color="#0000ff">for</font> ( <font color="#0000ff">var</font> i = 0; i &lt;xmlHttpVers.length &amp;&amp;! receiveReq; i ++) { </li><li>  <font color="#0000ff">try</font> { </li><li>  <font color="#0000ff">var</font> receiveReq = <font color="#0000ff">new</font> ActiveXObject (xmlHttpVers [i]); </li><li>  } <font color="#0000ff">catch</font> (e) {} </li><li>  } </li><li>  } </li><li>  <font color="#0000ff">return</font> receiveReq; </li><li>  } </li><li></li><li>  <font color="#0000ff">function</font> __callXmlHttprequest (r, f) { </li><li>  <font color="#0000ff">if</font> (r.readyState == 4 &amp;&amp; r.status == 200) { </li><li>  f (r); </li><li>  } </li><li>  } </li><li></li><li>  <font color="#0000ff">function</font> getReceive (url, funcCallback, l) { </li><li>  <font color="#0000ff">if</font> (! l) { </li><li>  l = <font color="#0000ff">true</font> ; </li><li>  } </li><li>  <font color="#0000ff">var</font> xmlHttp = getXmlHttpRequestObject (); </li><li>  <font color="#0000ff">if</font> (! xmlHttp) { </li><li>  <font color="#0000ff">return</font> ; </li><li>  } </li><li>  <font color="#0000ff">if</font> (funcCallback) { </li><li>  xmlHttp.onreadystatechange = <font color="#0000ff">function</font> () { </li><li>  __callXmlHttprequest (xmlHttp, funcCallback); </li><li>  }; </li><li>  } <font color="#0000ff">else</font> { </li><li>  xmlHttp.onreadystatechange = <font color="#0000ff">function</font> () {}; </li><li>  } </li><li>  xmlHttp.open ( <font color="#A31515">"GET"</font> , url, l); </li><li>  xmlHttp.send ( <font color="#0000ff">null</font> ); </li><li>  } </li><li></li><li>  <font color="#0000ff">var</font> Browser = { </li><li>  IE: !! (window.attachEvent &amp;&amp;! Window.opera), </li><li>  Opera: !! window.opera, </li><li>  Khtml: navigator.userAgent.indexOf ( <font color="#A31515">'AppleWebKit /'</font> )&gt; -1, </li><li>  Gecko: navigator.userAgent.indexOf ( <font color="#A31515">'Gecko'</font> )&gt; -1 &amp;&amp; navigator.userAgent.indexOf ( <font color="#A31515">'KHTML'</font> ) == -1 </li><li>  } </li><li></li><li>  <font color="#0000ff">function</font> xsltLoad (xmlFile, xsltFile, elementId, _call) { </li><li>  <font color="#0000ff">var</font> method; </li><li>  <font color="#0000ff">var</font> postData; </li><li>  <font color="#0000ff">var</font> stylesheetDoc; </li><li>  <font color="#0000ff">var</font> xmldoc, xsldoc; </li><li></li><li>  <font color="#0000ff">this</font> .createMSDOM = <font color="#0000ff">function</font> () { </li><li>  <font color="#0000ff">var</font> msdom; </li><li>  <font color="#0000ff">var</font> v = <font color="#0000ff">new</font> Array ( <font color="#A31515">"Msxml2.DOMDocument.6.0"</font> , <font color="#A31515">"Msxml2.DOMDocument.5.0"</font> , <font color="#A31515">"Msxml2.DOMDocument.4.0"</font> ); </li><li>  <font color="#0000ff">for</font> ( <font color="#0000ff">var</font> i = 0; i &lt;v.length &amp;&amp;! msdom; i ++) { </li><li>  <font color="#0000ff">try</font> { </li><li>  msdom = <font color="#0000ff">new</font> ActiveXObject (v [i]); </li><li>  } <font color="#0000ff">catch</font> (e) {} </li><li>  } </li><li>  <font color="#0000ff">return</font> msdom; </li><li>  } </li><li></li><li>  <font color="#0000ff">this</font> .init = <font color="#0000ff">function</font> () { </li><li>  <font color="#0000ff">if</font> (Browser.IE) { </li><li>  xmldoc = <font color="#0000ff">new</font> ActiveXObject ( <font color="#A31515">"Microsoft.XMLDOM"</font> ); </li><li>  xmldoc.async = <font color="#0000ff">false</font> ; </li><li>  xmldoc.load (xmlFile); </li><li></li><li>  xsldoc = <font color="#0000ff">new</font> ActiveXObject ( <font color="#A31515">"Microsoft.XMLDOM"</font> ); </li><li>  xsldoc.async = <font color="#0000ff">false</font> ; </li><li>  xsldoc.load (xsltFile); </li><li>  <font color="#0000ff">document</font> .getElementById (elementId) .innerHTML = xmldoc.transformNode (xsldoc); </li><li>  <font color="#0000ff">if</font> (_call) { </li><li>  _call (); </li><li>  } </li><li>  } <font color="#0000ff">else</font> { </li><li>  <font color="#0000ff">this</font> .loadStylesheet (); </li><li>  <font color="#0000ff">this</font> .loadXMLFile (); </li><li>  <font color="#0000ff">return</font> ; </li><li>  } </li><li>  } </li><li>  <font color="#0000ff">this</font> .callBack = <font color="#0000ff">function</font> (r) { </li><li>  <font color="#0000ff">try</font> { </li><li>  <font color="#0000ff">var</font> dp = <font color="#0000ff">new</font> DOMParser (); </li><li>  stylesheetDoc = dp.parseFromString (r.responseText, <font color="#A31515">"text / xml"</font> ); </li><li>  } <font color="#0000ff">catch</font> (e) { </li><li>  alert (e) </li><li>  } </li><li>  } </li><li></li><li>  <font color="#0000ff">this</font> .loadStylesheet = <font color="#0000ff">function</font> () { </li><li>  getReceive (xsltFile + <font color="#A31515">"?"</font> + randomNumber (1.999999), <font color="#0000ff">this</font> .callBack, <font color="#0000ff">false</font> ); </li><li>  } </li><li></li><li>  <font color="#0000ff">this</font> .loadXMLFile = <font color="#0000ff">function</font> () { </li><li>  <font color="#0000ff">if</font> (! method) { </li><li>  getReceive (xmlFile, <font color="#0000ff">this</font> .buildHTML); </li><li>  } <font color="#0000ff">else</font> { </li><li>  getReceive (xmlFile, encodeURIComponent ( <font color="#0000ff">this</font> .postData), <font color="#0000ff">this</font> .buildHTML); </li><li>  } </li><li>  } </li><li></li><li>  <font color="#0000ff">this</font> .buildHTML = <font color="#0000ff">function</font> (r) { </li><li>  xmlResponse = r.responseXML; </li><li>  <font color="#0000ff">try</font> { </li><li>  <font color="#0000ff">var</font> xsltProcessor = <font color="#0000ff">new</font> XSLTProcessor (); </li><li>  xsltProcessor.importStylesheet (stylesheetDoc); </li><li>  page = xsltProcessor.transformToFragment (xmlResponse, <font color="#0000ff">document</font> ); </li><li>  <font color="#0000ff">var</font> e = <font color="#0000ff">document</font> .getElementById (elementId); </li><li>  e.innerHTML = <font color="#A31515">""</font> ; </li><li>  e.appendChild (page); </li><li>  stylesheetDoc = <font color="#0000ff">null</font> ; </li><li>  xsltProcessor = <font color="#0000ff">null</font> ; </li><li>  } <font color="#0000ff">catch</font> (e2) { </li><li>  alert (e2.message); </li><li>  } </li><li>  <font color="#0000ff">if</font> (_call) { </li><li>  _call (); </li><li>  } </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/51876/">https://habr.com/ru/post/51876/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../51871/index.html">Bespin is a web-based editor from Mozilla.</a></li>
<li><a href="../51872/index.html">Clones</a></li>
<li><a href="../51873/index.html">8 success factors</a></li>
<li><a href="../51874/index.html">Amazon.com Delivery</a></li>
<li><a href="../51875/index.html">Create your SVN server: $ 3 and 30 minutes</a></li>
<li><a href="../51877/index.html">Javafx mobile</a></li>
<li><a href="../51878/index.html">Optimization of vector graphics for LaTeX'a.</a></li>
<li><a href="../51879/index.html">Times New Roman - ban</a></li>
<li><a href="../51881/index.html">A little more about text optimization. How to prepare military documents.</a></li>
<li><a href="../51882/index.html">Help to understand how FreeRADIUS works and works ...</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
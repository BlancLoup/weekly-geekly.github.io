<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hey request! Are you alive? How to easily handle locks in PostgreSQL</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good time of day! Administration and maintenance of relational databases is often a non-trivial task. Sometimes queries that worked quickly suddenly b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hey request! Are you alive? How to easily handle locks in PostgreSQL</h1><div class="post__text post__text-html js-mediator-article">  Good time of day!  Administration and maintenance of relational databases is often a non-trivial task.  Sometimes queries that worked quickly suddenly begin to ‚Äúslow down‚Äù for unknown reasons, the size of the tables grows and overall database performance decreases. <br><br>  Often the reason for this behavior is blocking various resources that occur in the database, and, accordingly, the increased waiting time for these resources.  For example, difficulties begin in situations where two or more queries in different sessions try to simultaneously change the same data in the tables or the structure of the table itself. <br><br>  In order to understand the current situation, the DBA needs to understand which process is blocking and which process is blocked, and also be able to cancel or kill the blocking process and finally check the result. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this article I want to touch on the topic of locks in PostgreSQL and talk about tools for working with them.  But first, let's try to understand the topic itself. <a name="habracut"></a><br><br><h2>  It is a little theory: an educational program about locks </h2><br>  What is the lock in the database?  Wikipedia offers the following definition: ‚ÄúLock (in English) <i>lock</i> ) in a DBMS is a mark about an object being captured by a transaction with limited or exclusive access in order to prevent collisions and maintain data integrity.‚Äù <br><br>  PostgeSQL maintains data integrity by implementing the MVCC model.  <i>MVCC (MultiVersion Concurrency Control)</i> is one of the mechanisms for providing parallel access to the database, which consists in providing each user with a so-called ‚Äúsnapshot‚Äù of the database.  A special ‚Äúproperty‚Äù of such a snapshot is that changes made by the user to the database are invisible to other users until the transaction is committed. <br><br>  PostgreSQL guarantees integrity for even the strictest transaction isolation level using the innovative SSI isolation level (Serializable Snapshot Isolation). <br><br>  For a better understanding of the topic, you can read the <a href="https://habrahabr.ru/post/121858/">article on Habr√©</a> and the <a href="http://zelark.github.io/exploring-query-locks-in-postgres/">article</a> in the blog of Alexander Zhuravlev about locks, their work and competitive access in general. <br><br><h2>  Unexpected situations </h2><br>  Unfortunately, there are situations when the implemented mechanisms to ensure data integrity still cannot cope with incoming requests without the occurrence of locks.  It happens rarely, but if there is a situation that any query has blocked a whole table for a long time, this can lead to trouble. <br><br>  For example, if you start a long-running query to a table with 1000 entries, to which 100 UPDATE requests occur per second, in 5-6 hours the size of the table will increase to 1.8 million entries, respectively, the physical size of the table also increases (since the database stores all versions rows until a long transaction completes its work. <br><br>  Consider this situation in more detail. <br><br><h2>  Blocking example </h2><br>  Suppose we have a <i>pgsqlblocks_testing</i> table in some database and it has a <i>rule_pgsqlblocks_testing</i> rule.  We emulate to it a ‚Äúlong‚Äù query for 10 minutes, for example, using the pgAdmin SQL editor: <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> public.pgsqlblocks_testing <span class="hljs-keyword"><span class="hljs-keyword">LIMIT</span></span> <span class="hljs-number"><span class="hljs-number">1000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> pg_sleep(<span class="hljs-number"><span class="hljs-number">600</span></span>);</code> </pre> <br>  Pid of process 16728 <br><br>  Open another editor and execute another request to delete the rule: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> RULE rule_pgsqlblocks_testing <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> public.pgsqlblocks_testing;</code> </pre> <br>  Pid of process 16726 <br><br>  And here DROP RULE is blocked by SELECT request.  MVCC in this case could not do without explicitly locking the <i>pgsqlblocks_testing</i> table. <br><br><h2>  Tools for working with locks </h2><br>  How do we view the available locks?  You can write your own query for the pg_locks lock table and the pg_stat_activity view, or use the tool built into pgAdmin. <br><br><h3>  PgAdmin server status </h3><br>  pgAdmin is a fairly convenient and simple software for working with PostgreSQL databases.  Currently, the current versions are pgAdmin III and pgAdmin IV, which was released only at the end of September. <br><br><h4>  pgAdmin III </h4><br>  Displaying information about locks and active processes in pgAdmin III requires the presence of the adminpack extension in the database.  After installing this extension, the window we need opens via the Tools - Server Status menu. <br><br>  In this window, we see a table with processes and a table with existing locks in the database.  In order not to get lost among a large number of processes, we can adjust the colors of processes depending on their status: active, blocked, inactive, or ‚Äúslow‚Äù. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/74c/24f/55b/74c24f55b53a4dcf86498bade6be777e.png"></div><br>  In the table, each blocking and blocking process is represented by separate lines, and it is not possible to quickly determine who is blocking whom.  To solve this problem, we will have to compare different strings among themselves in an attempt to find strings combined by the common value of the relation column and different values ‚Äã‚Äãof the granted column. <br><br>  To cancel or terminate the selected process in the window there are two buttons.  After terminating any of the processes, you need to refresh the window and match the lines again in order to evaluate the result. <br><br>  So, pgAdmin III can be used as a tool for working with locks, but it has a couple of drawbacks: it requires a preliminary DB setting and shows locks in a flat view (without a tree display of blocking-blocking processes), which complicates the search for problematic processes and the assessment of their termination.  This makes it not the most convenient tool for our tasks. <br><br><h4>  pgAdmin IV </h4><br>  After installing and running pgAdmin IV, we will be able to view the existing locks in the same way as in pgAdmin III. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c8e/169/8c0/c8e1698c0aa04d88aa3537592a871f88.png"></div><br>  But ... that's all we can do here.  The pgAdmin IV has lost the toolbar for actions on processes, and we can no longer cancel or terminate processes from this view, which makes pgAdmin IV an inconvenient tool for working with locks. <br><br><h3>  Queries to the database </h3><br>  There are many different implementations of queries on the network for viewing blocked and blocking queries in the database. <br><br>  The first result in the search engine for the query ‚Äúpg_locks monitoring‚Äù gives a link with the query variant: <br><br><img src="https://habrastorage.org/files/f89/ec0/9d0/f89ec09d0a1243adbd26053f58367e08.png"><br><br>  Request 1: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> blocked_locks.pid <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> blocked_pid, blocked_activity.usename <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> blocked_user, blocking_locks.pid <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> blocking_pid, blocking_activity.usename <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> blocking_user, blocked_activity.query <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> blocked_statement, blocking_activity.query <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> current_statement_in_blocking_process <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_catalog.pg_locks blocked_locks <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_catalog.pg_stat_activity blocked_activity <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> blocked_activity.pid = blocked_locks.pid <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_catalog.pg_locks blocking_locks <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> blocking_locks.locktype = blocked_locks.locktype <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> blocking_locks.DATABASE <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> blocked_locks.DATABASE <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> blocking_locks.relation <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> blocked_locks.relation <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> blocking_locks.page <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> blocked_locks.page <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> blocking_locks.tuple <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> blocked_locks.tuple <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> blocking_locks.virtualxid <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> blocked_locks.virtualxid <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> blocking_locks.transactionid <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> blocked_locks.transactionid <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> blocking_locks.classid <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> blocked_locks.classid <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> blocking_locks.objid <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> blocked_locks.objid <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> blocking_locks.objsubid <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> blocked_locks.objsubid <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> blocking_locks.pid != blocked_locks.pid <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_catalog.pg_stat_activity blocking_activity <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> blocking_activity.pid = blocking_locks.pid <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> blocked_locks.GRANTED;</code> </pre> <br>  Open the editor and enter the request to get information about locks: <br><br><img src="https://habrastorage.org/files/cf0/59c/5ef/cf059c5efe0940e3ae9c50688023c89a.png"><br><br>  It looks quite difficult, but the result is pleasing to the eye.  In general, the PostgreSQL community has created and maintains a lot of resources that help and facilitate the search for information for ordinary database administrators.  For example, the same wiki <a href="https://wiki.postgresql.org/">wiki.postgresql.org</a> <br><br>  So, we see who is blocking whom.  There are more variants of such requests, where you can display information about how long the process has been waiting for its turn, and so on. <br><br>  The second link (from official, by the way, documentation) offers a very simple request: <br><br>  Request 2: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_locks pl <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> pg_stat_activity psa <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> pl.pid = psa.pid;</code> </pre> <br>  The meaning of all these variations is essentially the same query: displaying information about locks.  We received the necessary information, but the answer does not lie directly on the surface.  Especially if there are many queries to the database.  Sit down and figure it out yourself, who is blocking whom and why!  Not everyone can build a graph of blocked resources in his head! <br><br><img src="https://habrastorage.org/files/64b/38d/60c/64b38d60c8b74aada7a4a6a1acddc9b0.png"><br><br>  In addition, we need to destroy or stop the blocking process.  And yes, it will have to be done manually, through another request indicating the pid process - <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> pg_backend_pid(<span class="hljs-number"><span class="hljs-number">16728</span></span>);</code> </pre> <br>  or <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> pg_terminate_backend(<span class="hljs-number"><span class="hljs-number">16728</span></span>);</code> </pre> <br>  To check the result, run Query 1 again or <code>SELECT * FROM pg_catalog.pg_stat_activity WHERE pid=16728;</code>  . <br><br><h2>  Everything is simple and convenient with pgSqlBlocks! </h2><br>  I want to show you one more tool and share what it is so convenient with - pgSqlBlocks.  The pgSqlBlocks tool was written by us for ourselves, and was created precisely in order to facilitate the solution of problems with locks in PostgreSQL, which we have been using for over a year. <br><br>  This is what the pgSqlBlocks window looks like in the case of our two-process example (here they have pid 29981 (SELECT) and 28710 (DROP RULE)). <br><br><img src="https://habrastorage.org/files/f45/a67/85b/f45a6785baf94affb5366e22b1b08532.png"><br><br>  In the left part of the window there is a list of databases in which information on the connection to the database is displayed (connected, disconnected, updating information, connection error, there are locks in the database). <br><br>  The main part of the application is occupied by the process tree that currently exists in the selected database.  Blocked processes have an icon of a closed gray lock and are descendants of blocking processes, whose icon is a red lock.  The normal process icon is a green dot. <br><br>  Such a presentation of processes allows us to easily navigate in them, to obtain information about the blocking and waiting processes, as well as about their relationship to each other.  It is possible for greater clarity to hide the usual (not blocked and not blocking) processes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/cd3/3a1/8a6/cd33a18a64b742b4aac9dcabcd957980.png"></div><br>  We clearly see that a process with pid 29981 with a long SELECT query blocks the process with pid 28710. <br><br>  If necessary, you can send a signal to cancel or destroy any process.  For example, if you destroy the blocked process 28710, the information in the process tree is immediately updated and we will see the result - the process 29981 with a long SELECT query does not block anyone else.  Quick and convenient. <br><br>  Another of the small and pleasant features of the application can be noted: <br><br>  - Save lock history to file and download back to the application.  A sort of snapshot of all locks at the time of saving, which allows you to view and analyze at any convenient time what locks were in the database; <br>  - The tray icon changes if a lock appears in at least one of the connected databases; <br>  - Notifications in the tray when blocking occurs; <br>  - Customizable auto-update process list. <br><br>  How to install pgSqlBlocks and how is it convenient compared to the options described above? <br><br><h3>  Installation and Setup </h3><br>  The system must have JRE 8 preinstalled. <br><br>  Go to the address <a href="http://pgcodekeeper.ru/pgsqlblocks/">pgcodekeeper.ru/pgsqlblocks</a> and select the latest current version of the program.  The folder will contain 4 jar-files.  Choose the one that is suitable for the OS and the digit capacity of your system.  Download, run and voila! <br><br>  This is all you need to run the application.  Everything works out of the box. <br><br>  To start working with the application it is worth filling out the list with the databases.  To add a new database, click the database icon with a "+" icon above the database list and fill in the necessary data in the dialog that appears.  Password is best stored in the pgpass file. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/262/093/9cd/2620939cddfa4d5dbd56b1d3937d9426.png"></div><br>  Tested on PostgreSQL versions 9.2-9.6. <br><br>  Additionally, you can configure the frequency of updating information from the database, the need to show idle processes, the list of displayed columns. <br><br><h2>  Conclusion </h2><br>  The problem of blocking queries in the database can be very serious and lead to a noticeable slowdown of the database and the exhaustion of disk space.  Therefore, it is important to have a convenient and fast tool for detecting locks and taking (sometimes) operational actions. <br><br>  Such a tool for us is pgSqlBlocks - an application that allows you to easily navigate among the processes and receive information about blocking and pending requests. <br><br>  Its advantages include the visibility of the information provided, as well as the convenience of performing typical tasks - viewing information about processes, finding problems among the list of processes, canceling or terminating a process, and evaluating the result.  In addition, a pleasant opportunity is to save the lock history to a file for further analysis of the current situation.  All this makes your work with locks in the PostgreSQL database quick and easy. <br><br>  <b>PS: The</b> <a href="http://sqlblocks.narod.ru/rus/index.html">MSSQL Blocks</a> utility was the inspiration for creating this application.  But it is designed specifically for working with the MSSQL database.  For PostgreSQL, there were no analogues of it. <br><br>  ‚Üí Download the latest version for your OS <a href="http://pgcodekeeper.ru/pgsqlblocks.html">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/319832/">https://habr.com/ru/post/319832/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319820/index.html">How to avoid self-excitation of cellular amplifier</a></li>
<li><a href="../319822/index.html">IT outsourcing in Russia - current realities and perspectives, opinions and experience of experts</a></li>
<li><a href="../319824/index.html">Old men have a place here: forgotten IT technologies in the ranks</a></li>
<li><a href="../319826/index.html">How to distinguish between British and American literature using machine learning</a></li>
<li><a href="../319830/index.html">[Translation] Report: The most popular Android devices in the US, Britain, Germany and Canada for the 4th quarter of 2016</a></li>
<li><a href="../319834/index.html">WebAssembly - the path to new performance horizons</a></li>
<li><a href="../319836/index.html">ExBB - PHP File Forum</a></li>
<li><a href="../319838/index.html">As I in one team did a redesign of a web product (cases!)</a></li>
<li><a href="../319848/index.html">"Ultimate DNS Digest": 45 materials from Habr and other resources</a></li>
<li><a href="../319852/index.html">Java examples from books and documentation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
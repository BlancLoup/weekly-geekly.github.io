<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experience masking OpenVPN-tunnel using obfsproxy</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Preamble 
 In connection with the emerging trends, I decided to obfuscate my modest OpenVPN tunnel, just to get my hand ‚Äî you never need it ... 

 It ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experience masking OpenVPN-tunnel using obfsproxy</h1><div class="post__text post__text-html js-mediator-article"><h2>  Preamble </h2><br>  In connection with the <a href="http://geektimes.ru/post/246380/">emerging</a> <a href="http://geektimes.ru/post/245486/">trends,</a> I decided to obfuscate my modest OpenVPN tunnel, just to get my hand ‚Äî you never need it ... <br><br>  It is given: cheap VPS with white IP, working under Ubuntu Trusty Server Edition and serving OpenVPN server. <br>  Required: if possible, hide the OpenVPN tunnel, preferably without the invention of bicycles. <br><a name="habracut"></a><br><h2>  obfsproxy </h2><br>  Since the Tor-node has already been raised on the VPS, the idea of <a href="">obfsproxy</a> came by itself.  As it turned out, the utility really knows how to pretend to be SOCKS-proxy, which means obfuscate not only Tor connections, but also virtually arbitrary traffic.  Rummaging around on the web, I found several manuals, but many were either outdated or out of sight the necessary details. <br><div class="spoiler">  <b class="spoiler_title">Important!</b>  <b class="spoiler_title">Versions.</b> <div class="spoiler_text"><ul><li>  OpenVPN versions earlier than 2.3.4 contains a <a href="https://community.openvpn.net/openvpn/ticket/377">bug</a> that interferes with normal work with SOCKS proxies.  If you want to use the socks mode, make sure that you have the appropriate version of OpenVPN installed. </li><li>  Apparently, obfsproxy is still not included in the Tor repository, and the Debian / Ubuntu repositories may contain old versions without scramblesuit support.  In this case, obfsproxy must be <a href="">installed</a> using the <i>pip</i> utility ( <i>python-pip</i> package): <br><pre><code class="markdown hljs">pip install obfsproxy</code> </pre> <br>  After the installation is completed, make sure that you are using the scramblesuit version of obfsproxy: <br><pre> <code class="markdown hljs"> obfsproxy scramblesuit -h</code> </pre><br></li><li>  The obfsproxy version for Windows can be extracted from the <a href="">Tor Browser</a> package by finding the <i>Tor \ PluggableTransports</i> subdirectory. </li></ul><br></div></div><br>  From the man obfsproxy you can learn the following <br><pre> <code class="markdown hljs"> obfsproxy [logging<span class="hljs-emphasis"><span class="hljs-emphasis">_options] [--data-dir path] transport [--dest destination] [--password BASE32PASS] mode listen_</span></span>addr</code> </pre><br><div class="spoiler">  <b class="spoiler_title">A little more:</b> <div class="spoiler_text"><ul><li>  <i>--data-dir <u>statepath</u></i> - directory for storing temporary data.  Required if obfsproxy is not in managed mode. </li><li>  <i>transport</i> - selects the method of traffic obfuscation and the mode of its transmission.  We are interested in the following transports: <br><ul><li>  <i>scramblesuit</i> is a relatively new method that we will use. </li><li>  <i>dummy</i> is a debugging method in which traffic is transmitted as is, without obfuscation. </li></ul><br></li><li>  <i>mode</i> - selects the proxy mode.  We are interested in the following modes: <br><ul><li>  <i>server</i> - accepts client connections, deobfusts and redirects to the <i>destination</i> address.  This mode is useful on the server side. </li><li>  <i>client</i> - transparent proxying: accepts data, obfusts and sends to the server at the <i>destination</i> address.  That we will use on the client side. </li><li>  <i>socks</i> - imitation of socks-proxy. </li></ul><br>  The difference between client and socks modes is that in the first case the address of the remote host the target application is trying to connect to must be replaced with the address of the opbfsproxy client, while in the second case the target application uses obfsproxy as SOCKS proxy.  For our purposes, and the client. <br></li><li>  <i>--dest <u>destination</u></i> - for the server: sets the address-to-address pair to which deobfuscated connections will be redirected.  For client: sets the address of the obfsproxy server. </li><li>  <i>--password <u>BASE32PASS</u></i> - set the key (pre-shared key) for the scramblesuit method.  The key must be a string of at least 20 characters encoded in base32 and match on the client and on the server.  A suitable key can be generated as follows: <br><pre> <code class="hljs swift">python -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-string"><span class="hljs-string">"import os,base64; print base64.b32encode(os.urandom(20))"</span></span></code> </pre><br></li><li>  <i>--password-file <u>filepath</u></i> is an alternative method for setting the key for the scramblesuit method, in case you do not want to write the pre-shared key in clear text. </li><li>  <i>log_options</i> includes the following keys: <br><ul><li>  <i>--log-file <u>path</u></i> - sets the location of the log. </li><li>  <i>--log-min-severity <u>level</u></i> - <i>What <u>level</u></i> events (debug, info, warning, error) to record. </li><li>  <i>--no-safe-logging</i> - by default obfsproxy cuts addresses from the log, but this key allows you to change this behavior. </li><li>  <i>--no-log</i> - disables logging altogether (by default). </li></ul></li></ul><br></div></div><br>  The VPN server itself can either be hidden behind obfsproxy completely (by making you listen to 127.0.0.1), or you can leave it on the external network interface in case of obfsproxy failure.  I chose the second option as more reliable. <br>  Thus, to run obfsproxy on the server side, it suffices to perform something like: <br><pre> <code class="bash hljs">obfsproxy --<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>-file /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/obfsproxy-openvpn.log --<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>-min-severity info scramblesuit --password BASE32LONGPASS --dest 1.2.3.4:1800 server 1.2.3.4:81</code> </pre><br>  where 1.2.3.4 is the external IP of the host, 1800 is the port that OpenVPN listens to, 81 is the port that obfsproxy will listen to. <br>  A serious drawback is the inability of obfsproxy to run in daemon mode, but this can be circumvented. <br><br>  Running on the client is almost identical to the server: <br><pre> <code class="bash hljs">obfsproxy scramblesuit --password BASE32LONGPASS --dest 1.2.3.4:81 {client|socks} 127.0.0.1:81</code> </pre><br>  where 1.2.3.4:81 is the address that the obfsproxy server listens to, 127.0.0.1:81 is the address that the client listens to. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  OpenVPN setup </h2><br>  <b>Important</b> : OpenVPN must use the TCP protocol. <br>  If we use client mode, we simply replace the address of the remote server in the openvpn configuration file with the address of the local obfsproxy: <br><pre> <code class="hljs css"><span class="hljs-selector-id"><span class="hljs-selector-id">#remote</span></span> 1<span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span> 1800 #    <span class="hljs-selector-tag"><span class="hljs-selector-tag">remote</span></span> 127<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> 81 #       <span class="hljs-selector-tag"><span class="hljs-selector-tag">obfsproxy</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">Socks mode</b> <div class="spoiler_text">  To work in socks mode, we configure OpenVPN a little bit differently: <br><pre> <code class="hljs css"><span class="hljs-selector-id"><span class="hljs-selector-id">#remote</span></span> 1<span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span> 1800 #    <span class="hljs-selector-tag"><span class="hljs-selector-tag">remote</span></span> 1<span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span> 81 #  <span class="hljs-selector-tag"><span class="hljs-selector-tag">obfsproxy-</span></span> (!    ) <span class="hljs-selector-tag"><span class="hljs-selector-tag">socks-proxy-retry</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">socks-proxy</span></span> 127<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> 81 #  <span class="hljs-selector-tag"><span class="hljs-selector-tag">socks</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">proxy</span></span></code> </pre><br>  Considering the need to replace the address of the OpenVPN server with the address of the obfsproxy server, I do not see any particular benefit from the proxy mode ‚Äî applications in which the connection addresses are tightly protected are still not zaproksirue. <br></div></div><br>  If openvpn traffic is blocked only occasionally (for example, only on the working network), you can use the following technique.  In the OpenVPN configuration file, write the following: <br><pre> <code class="hljs objectivec">&lt;connection&gt; remote <span class="hljs-number"><span class="hljs-number">1.2</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> <span class="hljs-number"><span class="hljs-number">1800</span></span> <span class="hljs-meta"><span class="hljs-meta">#    </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;/connection&gt;</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;connection&gt;</span></span></span><span class="hljs-meta"> remote 127.0.0.1 81 #  ,   obfsproxy </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;/connection&gt;</span></span></span></span></code> </pre><br>  OpenVPN will try to use each &lt;connection&gt; section in turn, until it makes a successful connection. <br><br>  Regarding the launch of obfsproxy, unfortunately, OpenVPN itself does not support pre-connect scripts (running the command before attempting to connect).  You can try to install one of the unofficial <a href="https://digitaldj.net/blog/2013/09/09/a-pre-connect-patch-for-openvpn/">patches</a> , run obfsproxy manually, or use one of the following methods. <br><br><h3>  openvpn-gui for windows </h3><br>  If you use the openvpn-gui wrapper to connect manually (or automatically with the <i>--connect</i> key), then the easiest thing to do is to create the <i>XXXXXX_pre.bat</i> file in the <i>config</i> folder, where <i>XXXXXX</i> is the name of the configuration file (without the .ovpn extension).  This file will be automatically executed before openvpn-gui tries to connect.  The contents of the file will look something like this: <br><pre> <code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">start</span></span> "window <span class="hljs-built_in"><span class="hljs-built_in">title</span></span>" /MIN "<span class="hljs-variable"><span class="hljs-variable">%USERPROFILE%</span></span>\Tor Browser\Tor\PluggableTransports\obfsproxy.exe" --log-min-severity info --data-<span class="hljs-built_in"><span class="hljs-built_in">dir</span></span> "<span class="hljs-variable"><span class="hljs-variable">%TEMP%</span></span>\obfs-openvpn" scramblesuit --password-file obfsproxy.key --dest <span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>:<span class="hljs-number"><span class="hljs-number">81</span></span> client <span class="hljs-number"><span class="hljs-number">127</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">81</span></span></code> </pre><br><ul><li>  <u>window title</u> - <u>window title</u> , required. </li><li>  <u>% USERPROFILE% \ Desktop \ Tor Browser \ Tor \ PluggableTransports \ obfsproxy.exe</u> is the path to the obfsproxy executable file.  By default, the Tor Browser is installed on the desktop, although this is not necessary. </li><li>  <u>% TEMP% \ obfs-openvpn</u> - the path to place the obfsproxy state files. </li><li>  <u>obfsproxy.key</u> - the path to the file with the key, if you use it. </li><li>  <u>1.2.3.4:81</u> - the address that the obfsproxy server listens to. </li><li>  <u>127.0.0.1:81</u> - the address that the client will listen to. </li></ul><br>  Using the start command (without the / wait key, it works as an analogue of the &amp; operator in the shell) is necessary, since openvpn-gui waits for the pre-up script to complete before attempting to connect.  The disadvantage of this method is a console window that constantly hangs in the background.  If desired, it can be hidden by the utility <a href="https://code.google.com/p/andrew-grechkin/downloads/detail%3Fname%3Dhidcon-v1.1.4.7z">hidcon</a> or similar. <br><br><h3>  obfsproxy as a service </h3><br>  If OpenVPN is launched as a service, then it makes sense to organize the launch of obfsproxy in the same way. <br>  You can create a service using the MS <a href="http://support.microsoft.com/kb/137890">srvany</a> utility or some alternative utility like <a href="http://nssm.cc/">NSSM</a> .  The question of running an application as a Windows service is beyond the scope of the article, so I‚Äôll just point out that this approach will allow you to set dependencies on other services, thereby ensuring that obfsproxy will be available at the time OpenVPN is launched. <br><br>  This approach can be combined with the previous one, using the bat-file launched by openvpn-gui, to start the created service with the <i>net start</i> command. <br><br><h2>  Effect on speed </h2><br>  The last test was carried out on February 7, 2016 through the good old speedtest.net using the same server in London (the OpenVPN server is hosted in Latvia, the client is in the European part of Russia) from a Windows 7 client machine. Measurements were made in tenfold repetition.  From the results it follows that, at least in my case, obfsproxy does not have a significant effect on speed.  So, if there is a good channel to your VPN server, it will not be worse. <br><br><table><tbody><tr><th>  Mode </th><th></th><th>  Ping ms </th><th>  Download, MB / s </th><th>  Upload, MB / s </th></tr><tr><th rowspan="2">  direct </th><td>  the average </td><td>  56 </td><td>  20.18 </td><td>  21.03 </td></tr><tr><td>  coeff.  variations </td><td>  3.6% </td><td>  0.6% </td><td>  1.2% </td></tr><tr><th rowspan="2">  openvpn </th><td>  the average </td><td>  56 </td><td>  20.21 </td><td>  21.29 </td></tr><tr><td>  coeff.  variations </td><td>  2.3% </td><td>  1.0% </td><td>  1.0% </td></tr><tr><th rowspan="2">  openvpn + obfsproxy </th><td>  the average </td><td>  55 </td><td>  20.24 </td><td>  21.15 </td></tr><tr><td>  coeff.  variations </td><td>  4.0% </td><td>  0.73% </td><td>  1.34% </td></tr></tbody></table><br><br><h2>  Run obfs-proxy as init.d service </h2><br><div class="spoiler">  <b class="spoiler_title">init.d / obfs-openvpn</b> <div class="spoiler_text">  #!  / bin / sh <br>  ### BEGIN INIT INFO <br>  # Provides: obfsproxy-openvpn <br>  # Required-Start: $ remote_fs $ syslog <br>  # Required-Stop: $ remote_fs $ syslog <br>  # Default-Start: 2 3 4 5 <br>  # Default-Stop: 0 1 6 <br>  # Short-Description: obfsproxy wrapper for openvpn <br>  # Description: This file starts up obfsproxy configured to process obfuscated openvpn client connections. <br>  ### END INIT INFO <br><br>  # Author: Vindicar &lt;the.vindicar@gmail.com&gt; <br><br>  # Do NOT "set -e" <br><br>  # PATH should only include / usr / * if it runs after the mountnfs.sh script <br>  PATH = "/ sbin: / usr / sbin: / bin: / usr / bin: / usr / local / bin" <br>  DESC = "obfsproxy wrapper for openvpn" <br>  NAME = obfs-openvpn <br>  DAEMON = "/ usr / local / bin / obfsproxy" <br><br>  OBFSPROXY_KEYFILE = "/ etc / obfsproxy-openvpn.key" <br>  SERVER_IP =?.?.?.?  # &lt;&lt;&lt; TODO: insert server address here <br>  OPENVPN_PORT = 443 #port 443 due to use of sslh <br>  OBFSPROXY_PORT = 81 <br><br>  DAEMON_ARGS = "- log-file /var/log/obfs-openvpn.log --log-min-severity warning \ <br>  --data-dir / tmp / obfs-openvpn \ <br>  scramblesuit --password-file $ OBFSPROXY_KEYFILE \ <br>  --dest $ SERVER_IP: $ OPENVPN_PORT server $ SERVER_IP: $ OBFSPROXY_PORT " <br>  PIDFILE = / var / run / $ NAME.pid <br>  SCRIPTNAME = / etc / init.d / $ NAME <br><br>  # Exit if the package is not installed <br>  [-x "$ DAEMON"] ||  exit 0 <br><br>  # Read configuration variable file if it is present <br>  [-r / etc / default / $ NAME] &amp;&amp;.  / etc / default / $ NAME <br><br>  # Load the rcS variables <br>  .  /lib/init/vars.sh <br><br>  # Define LSB log_ * functions. <br>  # Depend on lsb-base (&gt; = 3.2-14) to ensure that this file is present <br>  # and status_of_proc is working. <br>  .  / lib / lsb / init-functions <br><br>  # <br>  # Function that starts the daemon / service <br>  # <br>  do_start () <br>  { <br>  # Return <br>  # 0 if daemon has been started <br>  # 1 if daemon was already running <br>  # 2 if daemon could not be started <br>  start-stop-daemon --start --quiet --pidfile $ PIDFILE --exec $ DAEMON --test&gt; / dev / null \ <br>  ||  return 1 <br>  start-stop-daemon - start - background - quiet - make-pidfile - pidfile $ PIDFILE - exe $ DAEMON - \ <br>  $ DAEMON_ARGS \ <br>  ||  return 2 <br>  # Add code here, if necessary, that waits <br>  # to handle requests from services started <br>  # on this one.  As a last resort, sleep for some time. <br>  } <br><br>  # <br>  # Function that stops the daemon / service <br>  # <br>  do_stop () <br>  { <br>  # Return <br>  # 0 if daemon has been stopped <br>  # 1 if daemon was already stopped <br>  # 2 if daemon could not be stopped <br>  # other if a failure occurred <br>  # EDIT: removed --name parameter since ssd matches <br>  # will be relying on the pidfile to stop it. <br>  start-stop-daemon --stop --quiet --retry = TERM / 30 / KILL / 5 --pidfile $ PIDFILE <br>  RETVAL = "$?" <br>  ["$ RETVAL" = 2] &amp;&amp; return 2 <br>  # Wait for children to finish <br>  # and if the daemon is from ever in this script. <br>  # If the conditions above are not satisfied then add some other code <br>  # that waits <br>  # needed by services started subsequently.  A last resort is to <br>  # sleep for some time. <br>  # start-stop-daemon --stop --quiet --oknodo --retry = 0/30 / KILL / 5 --exec $ DAEMON <br>  # ["$?"  = 2] &amp;&amp; return 2 <br>  # Many daemons don't exit their pidfiles when they exit. <br>  rm -f $ PIDFILE <br>  return "$ RETVAL" <br>  } <br><br>  # <br>  # Function that sends a SIGHUP to the daemon / service <br>  # <br>  do_reload () { <br>  # <br>  # If the daemon can reload configuration without <br>  # restarting (for example, when it is sent a SIGHUP), <br>  # then implement that here. <br>  # <br>  start-stop-daemon --stop --signal 1 --quiet --pidfile $ PIDFILE <br>  return 0 <br>  } <br><br>  case "$ 1" in <br>  start) <br>  ["$ VERBOSE"! = No] &amp;&amp; log_daemon_msg "Starting $ DESC" "$ NAME" <br>  do_start <br>  case "$?"  in <br>  0 | 1) ["$ VERBOSE"! = No] &amp;&amp; log_end_msg 0 ;; <br>  2) ["$ VERBOSE"! = No] &amp;&amp; log_end_msg 1 ;; <br>  esac <br>  ;; <br>  stop) <br>  ["$ VERBOSE"! = No] &amp;&amp; log_daemon_msg "Stopping $ DESC" "$ NAME" <br>  do_stop <br>  case "$?"  in <br>  0 | 1) ["$ VERBOSE"! = No] &amp;&amp; log_end_msg 0 ;; <br>  2) ["$ VERBOSE"! = No] &amp;&amp; log_end_msg 1 ;; <br>  esac <br>  ;; <br>  status) <br>  status_of_proc "$ DAEMON" "$ NAME" &amp;&amp; exit 0 ||  exit $? <br>  ;; <br>  #reload | force-reload) <br>  # <br>  # Leave this commented out <br>  # and leave 'force-reload' as an alias for 'restart'. <br>  # <br>  #log_daemon_msg "Reloading $ DESC" "$ NAME" <br>  #do_reload <br>  #log_end_msg $? <br>  # ;; <br>  restart | force-reload) <br>  # <br>  # If the "reload" option is then removed the <br>  # 'force-reload' alias <br>  # <br>  log_daemon_msg "Restarting $ DESC" "$ NAME" <br>  do_stop <br>  case "$?"  in <br>  0 | 1) <br>  do_start <br>  case "$?"  in <br>  0) log_end_msg 0 ;; <br>  1) log_end_msg 1 ;;  # Old process is still running <br>  *) log_end_msg 1 ;;  # Failed to start <br>  esac <br>  ;; <br>  *) <br>  # Failed to stop <br>  log_end_msg 1 <br>  ;; <br>  esac <br>  ;; <br>  *) <br>  #echo "Usage: $ SCRIPTNAME {start | stop | restart | reload | force-reload}"&gt; &amp; 2 <br>  echo "Usage: $ SCRIPTNAME {start | stop | status | restart | force-reload}"&gt; &amp; 2 <br>  exit 3 <br>  ;; <br>  esac <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/251569/">https://habr.com/ru/post/251569/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../251557/index.html">Fujitsu ETERNUS CD10000: Ceph without worries</a></li>
<li><a href="../251561/index.html">Lectures Technopark. 1 semester Algorithms and data structures</a></li>
<li><a href="../251563/index.html">How do companies cope with the growing avalanche of data? Is the tape really dead?</a></li>
<li><a href="../251565/index.html">Competition for the creation of applications "Spring Marathon"</a></li>
<li><a href="../251567/index.html">Multivendor corporate network: myths and reality</a></li>
<li><a href="../251571/index.html">Crisis backups</a></li>
<li><a href="../251573/index.html">Using skyboxes in unity3d</a></li>
<li><a href="../251575/index.html">Patch management. Testing monthly software updates</a></li>
<li><a href="../251577/index.html">Law enforcement authorities rained down the Ramnit botnet</a></li>
<li><a href="../251579/index.html">Arabic localization: windows and drawing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why you need to think 1000 times before using noSQL</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Why am I writing this article? First, I would like to contribute to people's understanding of the essence of nosql and why it is necessary to choose t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Why you need to think 1000 times before using noSQL</h1><div class="post__text post__text-html js-mediator-article">  Why am I writing this article?  First, I would like to contribute to people's understanding of the essence of nosql and why it is necessary to choose this type of storage consciously.  Secondly, I will be happy to meet like-minded people, opponents and, possibly, debate.  And if you liked this article, I will be glad to hear questions that can be disclosed in more detail in new articles :) <br><br>  Despite the fact that nosql solutions are now dark, people are reluctant to switch to new types of repositories.  Is it correct?  In my opinion - yes.  And I will try to say why, using the example of different nosql repositories that met on my professional path. <br><a name="habracut"></a><br><h4>  Beginning of the story </h4><br>  Good day to all.  This is my first ‚Äúattempt at writing‚Äù in a large edition, I hope it will turn out interesting :) The very term nosql is written here <a href="http://habrahabr.ru/post/152477/">in this article</a> , and we turn to life examples and try to draw conclusions. <br><br>  Consider the most popular DBMS: MySql, PostgreSql, Oracle.  There are a lot of differences, but all three of them are well-established relational databases with rich possibilities.  They allow you to create document circulation systems, banking applications and business cards for a small cafe.  This is a common solution for almost any of your tasks. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      What problems does a novice developer encounter when they encounter their first SQL database? <br><ol><li>  Need to learn SQL syntax </li><li>  We need to realize the very essence of the relational model. </li><li>  You need to master the client to the database in your favorite development language </li></ol><br>  And everything, after that the person will not just master one database, he will master the family of databases and will easily transfer, for example, from Mysql to Oracle.  (let's forget about PL / SQL and other important differences for a moment).  And if you use ORM ... beauty. <br><br>  This imaginary simplicity can play a cruel joke.  For example: when debugging a 5 line query in Oracle, in an attempt to make it more optimal.  Here you begin to understand that free cheese is only in a mousetrap. <br><br>  And yet: this is the convenience of selecting information, with the help of a huge number of means of the query language, is it not happiness? <br><br>  Frankly, for more than 2 years, I didn‚Äôt seriously touch mysql, oracle.  And then I will describe what distracted me and lured away ... <br><br><h4>  Alfresco </h4><br>  And may <a href="http://ru.wikipedia.org/wiki/Alfresco_(ECM-%25D1%2581%25D0%25B8%25D1%2581%25D1%2582%25D0%25B5%25D0%25BC%25D0%25B0)">it</a> require a SQL solution for work, but still I consider alfresco my first nosql database. <br><br>  What do you need to study a person who first sits down to develop on the basis of this wonderful platform?  Yes, actually, everything :) <br><br>  It is completely different.  The data structures in it are described using xml.  Relationships are defined using so-called associations.  For example: a post; a list of comments in it is an association.  And then there is the inheritance of models.  One "table" can be inherited by another. <br><br>  There is an opinion that the nosql solution is necessarily a fast repository.  But alfresco is a very slow repository.  Very very.  Among the shortcomings, I can also name the query API.  You need to access the repository in two ways: associations and objects by id should be received via java api, and more complex queries with selections by attributes and associations via Lucene Query Engine.  The requests look scary, but I wrote a simple wrapper over the query engine that allowed you to build queries like this: <code>Query.field(title).eq("").and(Query.field(text).like("**"));</code>  and life has become more beautiful and more fun.  The request was written from memory, but colleagues will find out (hello! :)) <br><br>  And anyway this is a wonderful thing, because it is very convenient to write workflow systems on it, with large and complex business processes, in which documents will travel, ‚Äúspending the night‚Äù for one user or another.  Until they finally come to some kind of result.  For example to the resolution: done. <br><br>  Then it was the beginning of version 3, in 2011 it came out 4. A lot of tasty things were added, probably the performance improved, but I was too carried away by the new storages ... <br><br><h4>  Cassandra </h4><br>  This is my <a href="http://cassandra.apache.org/">love</a> , which I do not change until now.  Colleagues did not have much excitement about her, but I still think that this is all from the lack of RAM on the servers.  Naturally, when it comes to 500 million lines of blobs on the server, you need to use more RAM than 8 GB ... sometimes the node hangs with the ends. <br><br>  But ... very fast recording, fast reading.  Full control over the data, the confidence that the base will not be capped by the speed of writing or reading.  I still use it in my own projects and she has not let me down yet.  A distinctive feature of this database is that it is difficult to kill.  I am never afraid that the server will be cut down and I will have to do restore, as it happens, for example, with MongoDb with default settings. <br><br>  Requests to the database are made using <a href="http://thrift.apache.org/">thrift api</a> , which is very scary in appearance.  It lacks all the necessary amenities such as a pool of connections.  We put a set of bytes, we get, in fact, a set of bytes.  I also solved this problem, as in the case of Alfresco, only on a larger scale: I had to write an ORM framework, which became a superstructure over the thrift, and at the same time did not impose restrictions on performance.  There were open source alternatives to the bike, but they all seemed inconvenient in the context of the tasks to be solved. <br><br>  Thanks to the team leader and patient colleagues who selflessly started using my product and immediately threw a ton of bug reports :)) <br><br>  And still, cassandra still guzzled memory and hung at its flaw ... <br><br><h4>  Riak </h4><br>  My acquaintance with <a href="http://wiki.basho.com/">him</a> was short.  I read on Habr√© - cool.  I read on the site - cool.  Installed, began to test.  Firstly, the lack of the necessary functionality for queries to the database confused.  Secondly, the base behaved very strangely at the recording of 20 million lines.  She just died.  The restarted base behaved even more strangely: with 20 million lines onboard, it loaded for 10 minutes, for some reason only 100% of the four were forcing. <br>  This was my personal research, so I did not want to waste time on this database. <br><br><h4>  Hypertable </h4><br>  The salvation seemed to be <a href="http://hypertable.org/">this</a> database, since it was not very memory intensive on a billion records per server, and it was very fast by appointment.  Although, of course, the recording speed there depends solely on the selected timeout'a reset to disk.  <a href="http://thrift.apache.org/">Thrift api</a> did not cause any problems after cassandra, it remained only to add support for the hypertable in orm. <br><br>  But this base was so epile, and the logs were so uninformative that you could only be amazed as soon as the product could be called stable.  Attempts to find colleagues on the problems in the network - nothing was given.  It was possible to simply restart and never wait for the base.  And it was necessary to raise it with a tambourine: reload 2 times, remove the logs, reload another 2-3 times.  Or 5 times.  Although the problems did not appear immediately, she almost managed to leave in production.  In general, not an option ... <br><br><h4>  Mysql </h4>  (just for example) <br><br>  Sad faces of colleagues, sad me.  Nosql did not solve our problems.  Everything was in vain.  Reluctantly we tested mysql on our tasks and on 3 billion records it showed itself quite well.  This completely upset me, with the thoughts ‚ÄúHow is that!  After all, nosql!  Big data! ‚ÄùI had to search for Mysql on real data.  Naturally: no join'ov, complex links.  I must say that the real data changed the picture and one of the problems with mysql was never solved.  That is all.  A request for 4 seconds is over the edge.  Even under the condition of a hard-optimized query, this time with connections and using SQL features.  But with the other task Mysql coped completely nothing.  The main thing is the correct number of lines in the write batch. <br><br>  In general: we were financially limited, it was impossible to purchase many powerful servers.  We used what they give.  And they tried to save as much as possible. <br><br><h4>  MongoDb </h4><br>  In parallel with the listed DB, I used / use <a href="http://www.mongodb.org/">this one too</a> .  This is also a favorite database, I used it already in 6 projects.  As amenities there is a convenient ORM framework for java - <a href="http://code.google.com/p/morphia/">Morphia</a> , great possibilities for data sampling, scalability and speed. <br><br>  Of course, there are nuances here: <br><ol><li>  use highly desirable mongo version&gt; 2 </li><li>  be careful with server restarts, without shutting down mongo, if you haven‚Äôt been properly tuned </li><li>  read about mongorestore and journaling :) </li></ol><br>  In my opinion, this database is remarkable as a transitional one - between the SQL solution and the world of Nosql.  What are the advantages of this database for me personally?  Schema free, easy queries, document orientation, scalability.  I like the very paradigm that this database carries. <br><br>  And yet: out of 6 projects in Mongo, you could write 3-4 on mysql and not bathe.  I wrote them in Mongo just because I like Mongo. <br><br><h4>  Hadoop </h4><br>  I started using <a href="http://hadoop.apache.org/">this</a> thing recently - about 3 months ago, with the transition to a new place of work.  Hadoop is an ecosystem of solutions for storing and processing huge amounts of data.  When realizing the essence of map-reduce and hadoop, the simplicity of the algorithms and principles laid down at the beginning of this decision are striking.  Nevertheless, this simplicity helps to process 200 gigabytes of textual information as if you were processing a small article.  The thing is that a set of simple ideas gives a quick, simple solution.  And if it seems to you that the data are not being processed fast enough, add the node to the cluster. <br><br>  Of course, the understanding of the essence, the study of the hadoop sources, the implementation of the first calculation tasks take some time. <br><br>  But the main surprise of this solution for me was that the database may not be needed at all if you need to store and process really big data. <br><br>  As a <b>conclusion,</b> I would like to express my personal opinion on all this: <br>  There is no one solution for all tasks.  Closest to that, in spite of everything, is the sql solution.  Each nosql repository is a tool that solves only a certain range of tasks, and at the same time requires working with a file, studying the guts and careful tuning, or even writing your client. <br><br>  Addition to the conclusion: <br>  It is necessary to think first of all because there will be no silver bullet.  And no matter how clear the manual to the database, the number of surprises from this will not decrease.  Current nosql solutions are young and therefore not without flaws tools.  Nevertheless, some of them are quite ready for production use, for example: mongodb, redis, hbase, cassandra. <br><br>  But to come to the answer to the question "what to use" and in which case, in my opinion, you need to yourself.  By testing and researching solutions to your specific problem. </div><p>Source: <a href="https://habr.com/ru/post/153859/">https://habr.com/ru/post/153859/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../153849/index.html">Review of the report ‚ÄúEnsuring the availability of mobile phones and mobile services for people with disabilities‚Äù</a></li>
<li><a href="../153851/index.html">How the project of the smart home BeeToo Home won the iRidium Awards 2014</a></li>
<li><a href="../153853/index.html">Programming in maxima</a></li>
<li><a href="../153855/index.html">Warm and lamp VPN</a></li>
<li><a href="../153857/index.html">Creating icons for Mac OS X applications</a></li>
<li><a href="../153861/index.html">Build a Nested Set Tree without Recursion</a></li>
<li><a href="../153865/index.html">Configuring OSPF on Cisco and HUAWEI Hardware</a></li>
<li><a href="../153867/index.html">Review code in the comments</a></li>
<li><a href="../153869/index.html">Overclock the median in OLAP</a></li>
<li><a href="../153873/index.html">Writing a plugin to support cmake projects under vim</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>New heart for Chinese lantern</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Having bought a lot of Chinese lanterns, with a capacity of 100 to 16,000 lumens, was not satisfied. 

 In most cases, the flashlight does not give th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>New heart for Chinese lantern</h1><div class="post__text post__text-html js-mediator-article">  Having bought a lot of Chinese lanterns, with a capacity of 100 to 16,000 lumens, was not satisfied. <br><br>  In most cases, the flashlight does not give the luminous flux declared by the seller.  This is due to the fact that, at best, the sellers indicate the maximum luminous flux that the installed LED module can deliver, but as a result of savings on materials, the LED works, if lucky, at half its maximum.  Thin wires are used to limit the current, it allows you to abandon the use of a DC source and limit yourself to a simple PWM controller with a power switch. <br> <a href=""><img src="https://habrastorage.org/files/64d/229/621/64d22962193c4e70a197986030ec306a.jpg"></a> <br><a name="habracut"></a>  As a donor, the ‚Äú2500Lm CREE XM-L T6 LED Headlamp‚Äù was selected at a price of 12 dollars, which has a CX2812 PWM controller died after one year of use.  This controller has three outputs for load, two inputs for setting operation modes and one input for mode switching button.  The first unpleasant moment of almost any Chinese flashlight for me was the presence of Strobe and SOS modes.  In the case of this controller, it is enough to submit a logical unit to the OPT1 input and only three of the five modes will remain (High, Low, Off).  If the unit is applied to both OPT inputs, the Low mode will also disappear. <br><br> <a href=""><img src="https://habrastorage.org/files/e8a/6e3/fb6/e8a6e3fb6a6e4faf98c9650a200be9e1.png"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The seller claims that the flashlight uses a Cree XM-L T6 LED and it fries as much as 2500 lumens at maximum.  On the Cree website for this LED declared luminosity of 100 lumens per watt and a maximum power of 10 watts.  In fact, the XM-L U2 LED is used, its characteristics do not differ much from T6, but due to the thickness of the wires, only 1.1A reaches the LED, which at 4. V battery power is 4.51W.  It turns out that at the maximum mode, the flashlight emits about 451 lumens.  The luxmeter shows 420 lumens, and that is quite far from the figure of 2500. <br><br> <a href=""><img src="https://habrastorage.org/files/7ef/002/9de/7ef0029de17641528331ab749e4fbc12.jpg"></a> <br><br>  The driver circuit is nowhere simpler and we will not complicate it.  The ATtiny85 microcontroller was chosen as the new stone heart, although ATtiny13 (a) would have been enough, but it was not at hand in the right case.  The mode switch button successfully hit the PB2 / INT0 foot, but the base of the transistor was connected to the RESET output.  Having on board hardware PWM, it was decided to use it, so the track leading to the RESET was cut, and the base of the transistor was connected with a jumper to the PB1 / OC0B output.  For ease of programming, the necessary pins were taken out.  Wires fixed snot glue.  The wires from the batteries to the board are replaced by slightly thicker ones. <br><br> <a href=""><img src="https://habrastorage.org/files/9dc/b56/74c/9dcb5674c6ae4db6a1a3b28177c18f71.jpg"></a> <br><br>  The firmware was assembled in Arduino 1.0.6, Arduino Nano was used as a programmer.  Installed fyuzy in accordance with the scheme "ATtiny85 @ 1 MHz (internal oscillator; BOD disabled)".  The weight of the firmware in binary form at the moment is 278 bytes.  In the off state, the flashlight consumes 0.3mkA, by briefly pressing the button the minimum mode is turned on, the consumption increases to 7.6mA.  To turn off, briefly press and release the button.  If you continue to hold the button, the brightness will gradually increase to maximum.  Partial replacement of wires did not give a significant increase in brightness, because the wires from the power supply to the head remained a bottleneck.  At the moment, at the maximum mode, the consumption is 1.2A, the voltage of the battery is 4.2, it turns out about 500 lumens. <br><br>  But even in spite of the fact that Chinese sellers indicate several times overestimated performance on luminosity, often even the minimum, from the proposed, the mode was too bright for me.  After the alteration, the minimum mode is quite enough to not stumble on the forest path at night or to use a flashlight as a night light when spending the night in a cave.  Total literally in a couple of hours, I managed to make a flashlight of my dream out of a dead flashlight.  I hope my experience will be useful for someone.  The code is available at the link <a href="">HeadLamp.ino</a> . <br><br>  Update 02/04/2015: Thinking a bit, I added the ability to instantly turn on the flashlight for maximum mode (two quick clicks), as well as a strobe mode (three quick clicks).  To activate these modes, you must uncomment the corresponding defaults at the beginning of the code. </div><p>Source: <a href="https://habr.com/ru/post/249011/">https://habr.com/ru/post/249011/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../248999/index.html">Generating fake data for your javascript application using faker</a></li>
<li><a href="../249001/index.html">New Flash Player vulnerabilities are exploited in-the-wild</a></li>
<li><a href="../249005/index.html">Attention, application ideas contest for Microsoft and Mojio</a></li>
<li><a href="../249007/index.html">Ghost - gethostbyname () vulnerability in glibc</a></li>
<li><a href="../249009/index.html">How we won the Intel RealSense Hackathon</a></li>
<li><a href="../249015/index.html">Creating plug-ins for AutoCAD using the .NET API (part 3 - working with layers)</a></li>
<li><a href="../249017/index.html">Surface mounting: stencil and reflow oven at home</a></li>
<li><a href="../249021/index.html">The evolution of SAAS website designers</a></li>
<li><a href="../249023/index.html">Candelabrum vs Lollipop</a></li>
<li><a href="../249025/index.html">Announcement of the JPoint 2015 Java Conference</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
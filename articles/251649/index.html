<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Another way to organize OOP in JS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 As it was recently stated in the publication in ‚ÄúHonest Private Properties in the Prototype‚Äù , there are two camps of JavaScript develo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Another way to organize OOP in JS</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  As it was recently stated in the publication in <a href="http://habrahabr.ru/post/251477">‚ÄúHonest Private Properties in the Prototype‚Äù</a> , there are two camps of JavaScript developers: <br><ul><li>  those that are willing to tolerate prefixes, as a designation for hiding properties \ methods; </li><li>  those that are not willing to tolerate pseudo-encapsulation. </li></ul><br><br>  I take myself to the second camp and solve the problem by declaring the whole class in its constructor, which allows using <i>private</i> / <i>public</i> in any combination with <i>static</i> . <br><a name="habracut"></a><br>  For example, <i>Computer.js</i> : <br><br><pre><code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">module</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> privateStaticVariable = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Computer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> privateVariable = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.publicVariable = <span class="hljs-number"><span class="hljs-number">8</span></span>; Computer.publicStaticVariable = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getAnswer = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> privateStaticVariable + Computer.publicStaticVariable + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.publicVariable * privateVariable ; }; } <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = Computer; }(<span class="hljs-built_in"><span class="hljs-built_in">module</span></span>));</code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Problem </h4><br>  Everything would be fine, but OOP is not limited to open / closed, therefore many heads were broken and quite a few ways were developed to solve the problem of protected properties of classes, most of which basically use agreements (again we return to pseudo-encapsulation and prefixes), a lot more and introduces its syntax.  During the search, we even managed to see the library using <i>eval ()</i> at its core, and we know: <blockquote>  Eval is evil! </blockquote>  But oddly enough, the latter was the best (in its subjective opinion) of all those considered according to the following criteria: <br><ul><li>  no agreements, real security; </li><li>  no specific syntax, only native JS. </li></ul><br><h4>  Study </h4><br>  After a brief study of the sources, it was discovered that ‚Äúsecurity‚Äù was provided by moving the private code to the child class through regular expressions, <i>.toSource ()</i> , <i>eval ()</i> and magic.  Naturally, this engineering marvel quickly could not work, and donating <i>privately</i> for the sake of <i>protected is</i> not very interesting. <br><br><h4>  Decision </h4><br><h5>  First stage </h5><br>  It was decided to break the head over what may be in all classes of the hierarchy and at the same time be completely inaccessible to users of this hierarchy.  On the third day, my head was still lit up with the thought, just before burying the whole idea and being content with what we have: <strong>Designer parameter</strong> ! <br><br><h5>  Second phase </h5><br>  At that, the first part of the thinking process was completed, the next step was to figure out how to hide this most additional argument from the users of the code.  And language and creativity will help us with this problem: <br><ol><li>  Save the class constructor. </li><li>  Overwriting the class constructor. </li><li>  Create a private variable (object). </li><li>  Use <i>Function.prototype.bind.apply ()</i> on the saved constructor with the <i>[null, savedPrivateObject]</i> parameter. </li></ol><br>  But <i>doing</i> so many manual actions is a long time, and after all, a good developer is a lazy developer ( <i>ObjectOriented.js</i> ): <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * Inject protected-data object to class * @private * @param Class {Function} Class * @param protectedData {Object} Protected-data object * @return {Function} Result class */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">injectProtected</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Class, protectedData</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Native</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Overridden</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> args = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype.map.call(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [value]; }); args.unshift(protectedData); args.unshift(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>.prototype.bind.apply(Native, args))()); } Overridden.prototype = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Native({}); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Overridden; }(Class)); } }());</code> </pre><br><h5>  ‚ÄúBut what about inheritance?‚Äù Or the fourth stage </h5><br>  To solve this problem, we first need a functional to determine if our protected section is implemented; this is solved by adding a static method for the class, for example, <i>isProtectedInjected ()</i> .  Now that we can get information about the availability of the implementation, we can think about how to implement the same object in the class and all its heirs.  To do this, we at least need to be able to get the original class before introducing the protected object into it, therefore we will add a static method that returns the original class.  Inheritance itself is quite standard for JavaScript, with the exception of creating an additional protected data variable and embedding it in classes that require embedding. <br><br><h5>  Last stage or ‚Äúadd convenience‚Äù </h5><br>  It's time to bring the code that implements some of the features of OOP to object-oriented style.  Add the <i>injectProtected ()</i> , <i>extend ()</i> and <i>isProtectedInjected</i> , <i>getNative ()</i> stub methods to the global built-in class <i>Function</i> .  This will help simplify your life, because  after that, any class will have this set of functions. <br><br><h4>  Result </h4><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Function</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Check if protected-data was injected * @returns {boolean} */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>.prototype.isProtectedInjected = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }; <span class="hljs-comment"><span class="hljs-comment">/** * Inject protected-data object to class * @private * @param Class {Function} Class * @param protectedData {Object} Protected-data object * @return {Function} Result class */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">injectProtected</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Class, protectedData</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Native</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Overridden</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> args = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype.map.call(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [value]; }); args.unshift(protectedData); args.unshift(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>.prototype.bind.apply(Native, args))()); } Overridden.prototype = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Native({}); Overridden.getNative = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Native; }; Overridden.isProtectedInjected = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Overridden; }(Class)); } <span class="hljs-comment"><span class="hljs-comment">/** * Get native class without injection of protected * @returns {Function} Class */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>.prototype.getNative = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; }; <span class="hljs-comment"><span class="hljs-comment">/** * Extend from @a ParentClass * @param {Function} ParentClass * @return {Function} Result class */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>.prototype.extend = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ParentClass</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> protectedData = {}, parent, me = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getNative(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ParentClass.isProtectedInjected()) { ParentClass = injectProtected(ParentClass.getNative(), protectedData); } parent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ParentClass(); me.prototype = parent; me.prototype.constructor = me; protectedData.parent = parent; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (me.isProtectedInjected()) { me = injectProtected(me, protectedData); } me.prototype = parent; me.prototype.constructor = me; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> me; }; <span class="hljs-comment"><span class="hljs-comment">/** * Injects protected-data object to class * @example * function SomeClass(protectedData/\* , ... *\/) { * protectedData.protectedMethod = function () {}; * protectedData.protectedVariable = 'Access only from children and self'; * /\* ...Realization... *\/ * }.injectProtected() * @returns {Function} */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>.prototype.injectProtected = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> injectProtected(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, {}); }; }(<span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>));</code> </pre><br><h4>  Usage example </h4><br>  <i>Computer.js</i> : <br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">module</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> privateStaticVariable = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Computer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">protectedData</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> privateVariable = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.publicVariable = <span class="hljs-number"><span class="hljs-number">8</span></span>; protectedData.badModifier = <span class="hljs-number"><span class="hljs-number">0.1</span></span>; Computer.publicStaticVariable = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getAnswer = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( privateStaticVariable + Computer.publicStaticVariable + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.publicVariable * privateVariable ) * protectedData.badModifier; }; } <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = Computer.injectProtected(); <span class="hljs-comment"><span class="hljs-comment">// &lt;- That's it! }(module));</span></span></code> </pre><br>  <i>FixedComputer, js</i> : <br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">module</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Computer = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'Computer'</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FixedComputer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">protectedData</span></span></span><span class="hljs-function">) </span></span>{ Computer.call(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Super analogue protectedData.badModifier = 1; } module.exports = FixedComputer.injectProtected().extend(Computer); // &lt;- That's it! }(module));</span></span></code> </pre><br><h4>  Links </h4><br>  Libraries: <br><ul><li>  <a href="https://github.com/oopjs/oopjs">creates its own syntax</a> ; </li><li>  <a href="https://github.com/Cleod9/oopsjs">one more</a> ; </li><li>  <a href="https://code.google.com/p/oopsjs">the one based on <i>eval ()</i></a> ; </li><li>  <a href="https://gist.github.com/saksmt/020e5f62e819a81f018e">the result of this article</a> . </li></ul></div><p>Source: <a href="https://habr.com/ru/post/251649/">https://habr.com/ru/post/251649/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../251625/index.html">New utorrent bugs or what Bittorrent programmers are preparing for us</a></li>
<li><a href="../251627/index.html">Creating a world map</a></li>
<li><a href="../251629/index.html">Understanding the LCD screen LPH9157-2 from Siemens C75 / ME75</a></li>
<li><a href="../251631/index.html">The maze output program at 13 ... no. 10 bytes!</a></li>
<li><a href="../251647/index.html">Futuristic thinking</a></li>
<li><a href="../251653/index.html">McPaintio - a program that converts an image into a set of mouse commands that draw this image</a></li>
<li><a href="../251659/index.html">Backup Linux and restore it on another hardware</a></li>
<li><a href="../251663/index.html">How can a sysadmin stay out of work</a></li>
<li><a href="../251665/index.html">Run SQL queries in SAP</a></li>
<li><a href="../251669/index.html">How REST-architecture affects the speed and reliability of the site</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
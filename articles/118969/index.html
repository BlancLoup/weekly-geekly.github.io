<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Getting Started with Windows Azure Toolkit for iOS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I am very pleased to present the already available Windows Azure Toolkit for iOS toolkit! 

 The first release of Windows Azure Toolkit for iOS allows...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Getting Started with Windows Azure Toolkit for iOS</h1><div class="post__text post__text-html js-mediator-article">  I am very pleased to present the already available Windows Azure Toolkit for iOS toolkit! <br><br>  The first release of Windows Azure Toolkit for iOS allows you to easily and conveniently access Windows Azure storage from iOS applications.  As for <a href="http://habrahabr.ru/company/microsoft/blog/118569/">Windows Azure Toolkit for Windows Phone 7,</a> we will add new features to the toolkit, such as push alerts, Access Control Service, etc. <br><br><table><tbody><tr><td><img src="https://habrastorage.org/storage/c58f7ec9/09063ab2/105ed9a1/944e07a8.png" alt="iOS"></td><td><img src="https://habrastorage.org/storage/b3f1c25b/4cf47bd7/05ccafd9/7dd13cc6.png" alt="iOS"></td><td><img src="https://habrastorage.org/storage/5e3b176e/270528d8/86f68dc4/601bdb88.png" alt="iOS"></td></tr></tbody></table><br><a name="habracut"></a><br>  You can download the toolkit and all source code on github: <br><ul><li>  Source code: <a href="https://github.com/microsoft-dpe/watoolkitios-lib">https://github.com/microsoft-dpe/watoolkitios-lib</a> </li><li>  Sample application: <a href="https://github.com/microsoft-dpe/watoolkitios-samples">https://github.com/microsoft-dpe/watoolkitios-samples</a> </li><li>  Documentation: <a href="https://github.com/microsoft-dpe/watoolkitios-doc">https://github.com/microsoft-dpe/watoolkitios-doc</a> </li></ul><br>  You can use the toolkit in two ways.  It can be used to directly access Windows Azure storage, or, alternatively, through a proxy service.  The proxy service code is the same as that used in Windows Azure Toolkit for Windows Phone 7, it eliminates the need to store Azure Storage accounts locally on the device. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This release of Windows Azure Toolkit for iOS is an important milestone, it reinforces my opinion that Windows Azure is a great place to run services for mobile applications. <br><br><h4>  Deploying Windows Azure Services </h4><br>  If you need to quickly raise and run a mobile service on Windows Azure, pay attention to the package Cloud Ready Package for Devices (which can be found in the downloads <a href="https://github.com/microsoft-dpe/watoolkitios-lib">https://github.com/microsoft-dpe/watoolkitios-lib</a> ) <br><br>  The package Cloud Ready Package for Devices is designed to simplify the construction of mobile applications that use the capabilities of services running in Windows Azure.  Instead of having to open Visual Studio and compile the solution with the services you want to use, we provide you with pre-assembled Windows Azure CSPKG and CSCFG files ‚Äî all you need to do is update the configuration file with your credentials. <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/uHfdaqpjEmE%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhg6wfNdFZLZHxdtw7cNaw9qZP899w" frameborder="0" allowfullscreen=""></iframe><br><br>  In this video, you can see how easy it is to deploy a package in Windows Azure, regardless of your operating system (for example, Windows 7 or OSX) and the target device (for example, Windows Phone 7, iOS or Android).  You can read more about Windows Azure Toolkit for Windows Phone 7 and Windows Azure Toolkit for iOS in the author's blog: <a href="http://www.wadewegner.com/">Wade Wegner</a> . <br><br><h4>  Unpacking v1.0.0 zip library file </h4><br>  You can download the compiled library for working with the repository with github (can be found in downloads <a href="https://github.com/microsoft-dpe/watoolkitios-lib">https://github.com/microsoft-dpe/watoolkitios-lib</a> ).  After unzipping, there will be several folders: <br><ul><li>  /4.3-device - binary library for iOS 4.3 (device) </li><li>  /4.3-simulator - binary library for iOS 4.3 (emulator) </li><li>  / include - header files for the library </li></ul><br><br><h4>  Creating your first project using the toolkit </h4><br>  If you are not familiar with Xcode, below is a brief tutorial on how to create and run your first project.  Launch Xcode and create a new project: <br><br><img src="https://habrastorage.org/storage/e7109974/09a0edae/e050514e/565c5a73.jpg" alt="Xcode"><br><br>  Select <strong>View-based application</strong> and click <strong>Next</strong> . <br><br>  Specify the project name and company.  In this step-by-step instruction, we will call it <strong>‚ÄúFirstAzureProject‚Äù</strong> .  <strong>Unit Test</strong> do not turn on. <br><br><img src="https://habrastorage.org/storage/2f760dd0/3276fc50/816f01eb/a4da3835.jpg" alt="New project"><br><br>  Select the folder where to save the project and uncheck the checkbox <strong>source code repository</strong> . <br><br>  When the project opens, right-click on <strong>Frameworks</strong> and select <strong>Add Files to ...</strong> <br><br><img src="https://habrastorage.org/storage/1f97bafb/36bede3d/82cc748a/4efbaa65.jpg" alt="Frameworks"><br><br>  Find the <strong>libwatoolkitios.a</strong> library in the folder of the downloaded package (for the emulator or device), and add it to the <strong>Frameworks</strong> folder. <br><br><img src="https://habrastorage.org/storage/a8f5e8b8/f6da5718/8261827c/64343fc4.png" alt="libwatoolkitios.a"><br><br>  Now, click on the topmost project (FirstAzureProject) in the left column.  Click on targets.  Click on the <strong>Build Settings</strong> heading in the third column.  Check that <strong>All is</strong> selected so that all settings are displayed. <br><br>  In the search field, enter <strong>header search</strong> and find the <strong>Header Search Paths</strong> setting: <br><br><img src="https://habrastorage.org/storage/bbdbf8f0/ad2874e7/43cfdeba/76fa0cf6.png" alt="header search"><br><br>  Double-click on the line (on the right side) and click on the <strong>+</strong> button at the bottom left. <br><br><img src="https://habrastorage.org/storage/a517eeb2/6fda51e3/2278b427/287940ce.png" alt="add header"><br><br>  Add the path to the folder that contains the header files (one of the folders that is created when unpacking the downloaded archive).  For example, "~ / Desktop / v1.0.0 / include" if the archive has been unarchived to the desktop.  Don't forget to enclose the path in quotes if it contains spaces. <br><br><img src="https://habrastorage.org/storage/4ccbb56e/a15f5978/3a49b30c/ff4b96a0.png" alt="Path to header files"><br><br>  Now, click on the <strong>Build Phases</strong> tab and expand the <strong>Link Binary with Libraries</strong> section: <br><br><img src="https://habrastorage.org/storage/f430d426/00d46687/44cddc43/49c3d1d9.png" alt="Add a library"><br><br>  Click the <strong>+</strong> button at the bottom left and scroll down the list until you find the <strong>libxml2.2.7.3.dylib</strong> library.  Add this library to the project. <br><br><h4>  Check that everything works </h4><br>  Now that all the necessary references have been added, let's test what library functions can be called.  To do this, double-click the [ProjectName] AppDelegate.m file (for example, FirstAzureProjectAppDelegate.m) and import the following header files into the class: <br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"AuthenticationCredential.h"</span></span></span><span class="hljs-meta"> #import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CloudStorageClient.h"</span></span></span></span></code> </pre> <br>  Build  If the build is completed successfully, then the library is correctly added to the project.  If there is a failure, it is recommended to go back and check the setting for header search files (header search paths). <br><br>  Assuming that everything is assembled, in the .m file, add the following declarations after the <a href="https://habrahabr.ru/users/synthesize/" class="user_link">synthesize</a> lines: <br><pre> <code class="cpp hljs">AuthenticationCredential *credential; CloudStorageClient *client;</code> </pre><br>  Now, add the following code after the <strong>[self.window makeKeyAndVisible] line</strong> to the <strong>didFinishLaunchingWithOptions</strong> method: <br><pre> <code class="cpp hljs">credential = [AuthenticationCredential credentialWithAzureServiceAccount:@<span class="hljs-string"><span class="hljs-string">"ACCOUNT_NAME"</span></span> accessKey:@<span class="hljs-string"><span class="hljs-string">"ACCOUNT_KEY"</span></span>]; client = [CloudStorageClient storageClientWithCredential:credential]; [client getBlobContainersWithBlock:^(NSArray* containers, NSError* error) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error) { NSLog(@<span class="hljs-string"><span class="hljs-string">"%@"</span></span>,[error localizedDescription]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { NSLog(@<span class="hljs-string"><span class="hljs-string">"%i containers were found‚Ä¶"</span></span>,[containers count]); } }];</code> </pre><br><br>  Check that you have replaced <strong>ACCOUNT_NAME</strong> and <strong>ACCOUNT_KEY with</strong> your name and access key to Windows Azure Storage, which can be obtained from your Windows Azure management portal ( <a href="http://windows.azure.com/">http://windows.azure.com</a> ). <br><br>  Build and run the project.  You should see something like the text below in the debug window: <br> <code>2011-05-06 18:18:46.001 FirstAzureProject[27456:207] 2 containers were found‚Ä¶ <br></code> <br>  It indicates that the account contains 2 containers.  This of course depends on how many BLOB containers you have created in your Windows Axure account. <br><br><h4>  What else can be done using the toolkit </h4><br>  Check out the class documentation to learn more about the API provided by the toolkit.  Below are some additional examples. <br><br>  In the <strong>[ProjectName] AppDelegate.m class,</strong> add the following header files: <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"AuthenticationCredential.h"</span></span></span><span class="hljs-meta"> #import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CloudStorageClient.h"</span></span></span><span class="hljs-meta"> #import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"BlobContainer.h"</span></span></span><span class="hljs-meta"> #import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Blob.h"</span></span></span><span class="hljs-meta"> #import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"TableEntity.h"</span></span></span><span class="hljs-meta"> #import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"TableFetchRequest.h"</span></span></span></span></code> </pre><br><br>  In the <strong>didFinishLaunchingWithOptions</strong> method, after the line <strong>[self.window makeKeyAndVisible],</strong> try several of the following commands.  Again, when you run the project, the result is displayed in the debugger window. <br><br>  Authentication using account name and key: <br><pre> <code class="cpp hljs">credential = [AuthenticationCredential credentialWithAzureServiceAccount:@<span class="hljs-string"><span class="hljs-string">"ACCOUNT_NAME"</span></span> accessKey:@<span class="hljs-string"><span class="hljs-string">"ACCOUNT_KEY"</span></span>];</code> </pre><br>  Authentication using a proxy service from Windows Azure Toolkit for Windows Phone 7: <br><pre> <code class="cpp hljs">credential = [AuthenticationCredential authenticateCredentialWithProxyURL:[NSURL URLWithString:@<span class="hljs-string"><span class="hljs-string">"PROXY_URL"</span></span>] user:@<span class="hljs-string"><span class="hljs-string">"USERNAME"</span></span> password:@<span class="hljs-string"><span class="hljs-string">"PASSWORD"</span></span> withBlock:^(NSError *error) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error) { NSLog(@<span class="hljs-string"><span class="hljs-string">"%@"</span></span>,[error localizedDescription]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { NSLog(@<span class="hljs-string"><span class="hljs-string">"Successfully logged in"</span></span>); } }];</code> </pre><br>  Replace <strong>PROXY_URL</strong> , <strong>USERNAME</strong> and <strong>PASSWORD with the</strong> data required to access your proxy service. <br><br>  Creating a new client to access the repository: <br><pre> <code class="cpp hljs">client = [CloudStorageClient storageClientWithCredential:credential];</code> </pre><br>  Getting a list of BLOB containers (not supported through a proxy server): <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// get all blob containers [client getBlobContainersWithBlock:^(NSArray *containers, NSError *error) { if (error) { NSLog(@"%@",[error localizedDescription]); } else { NSLog(@"%i containers were found‚Ä¶",[containers count]); } }];</span></span></code> </pre><br><br>  Getting all container BLOBs (also not supported through a proxy): <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// get all blobs within a container [client getBlobs:@"images" withBlock:^(NSArray *blobs, NSError *error) { if (error) { NSLog(@"%@",[error localizedDescription]); } else { NSLog(@"%i blobs were found in the images container‚Ä¶",[blobs count]); } }];</span></span></code> </pre><br><br>  Get all tables from storage (works both through proxy and directly): <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// get all tables [client getTablesWithBlock:^(NSArray* tables, NSError* error) { if (error) { NSLog(@"%@",[error localizedDescription]); } else { NSLog(@"%i tables found",[tables count]); } }];</span></span></code> </pre><br><br>  Create a table (works both through proxy and directly): <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// create table [client createTableNamed:@"wadestable" withBlock:^(NSError *error) { if (error) { NSLog(@"%@",[error localizedDescription]); } else { NSLog(@"Table created"); } }];</span></span></code> </pre><br><br>  Delete table (works both through proxy and directly): <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//delete a table [client deleteTableNamed:@"wadestable" withBlock:^(NSError *error) { if (error) { NSLog(@"%@",[error localizedDescription]); } else { NSLog(@"Table was deleted"); } }];</span></span></code> </pre><br><br>  Get records from the table (works both through proxy and directly): <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// get entities for table developers TableFetchRequest* fetchRequest = [TableFetchRequest fetchRequestForTable:@"Developers"]; [client getEntities:fetchRequest withBlock:^(NSArray *entities, NSError *error) { if (error) { NSLog(@"%@",[error localizedDescription]); } else { NSLog(@"%i entities found in the developer table",[entities count]); } }];</span></span></code> </pre><br><br>  Get the records from the table using predicates (works both through proxy and directly): <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// get entities for table developers with predicate request NSError* error = nil; NSPredicate* predicate = [NSPredicate predicateWithFormat:@"Name = 'Wade' || Name = 'Vittorio' || Name = 'Nathan'"]; TableFetchRequest* anotherFetchRequest = [TableFetchRequest fetchRequestForTable:@"Developers" predicate:predicate error:&amp;error]; [client getEntities:anotherFetchRequest withBlock:^(NSArray *entities, NSError *error) { if (error) { NSLog(@"%@",[error localizedDescription]); } else { NSLog(@"%i entities returned by this request",[entities count]); } }];</span></span></code> </pre><br><br><h4>  What else can you do? </h4><br>  If you are wondering what else can be done using the toolkit, I recommend looking at the sample application - the <a href="https://github.com/microsoft-dpe/watoolkitios-samples">watoolkitios-samples</a> project.  The project demonstrates all the capabilities of the toolkit, including creating, loading and retrieving records from the storage of tables and BLOBs. </div><p>Source: <a href="https://habr.com/ru/post/118969/">https://habr.com/ru/post/118969/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../118961/index.html">A simple solution to problems with Flash in Ubuntu</a></li>
<li><a href="../118963/index.html">Trillian: Now completely free on all platforms</a></li>
<li><a href="../118964/index.html">Qt 5 thoughts</a></li>
<li><a href="../118966/index.html">How to become a system administrator - a guide for beginners (Part 2)</a></li>
<li><a href="../118967/index.html">Wanted.VC - Digest of Russian projects seeking investment</a></li>
<li><a href="../118972/index.html">Screencast: static analysis of C ++ code</a></li>
<li><a href="../118973/index.html">How to display a page in UTF-8, despite windows-1251 in the HTTP header</a></li>
<li><a href="../118975/index.html">Important note for free software supporters using Gmail</a></li>
<li><a href="../118976/index.html">Asterisk VoIP - how to fight off hackers or ‚Äúbloopers‚Äù in setting up gateways</a></li>
<li><a href="../118977/index.html">iLab will help the digital revolution in the field of intellectual property</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
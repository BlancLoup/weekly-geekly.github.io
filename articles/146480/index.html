<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Launch Ubuntu x86 + Wine for Android x86 (chroot + VNC)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 The theme of launching Ubuntu on Android devices is already pretty trite, you can find a large number of manuals on the network. But there ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Launch Ubuntu x86 + Wine for Android x86 (chroot + VNC)</h1><div class="post__text post__text-html js-mediator-article"><h4>  Foreword </h4><br>  The theme of launching Ubuntu on Android devices is already pretty trite, you can find a large number of manuals on the network.  But there is one BUT!  We are talking about <b>ARM</b> architecture. <br>  However, Intel has already announced its plans to promote Medfield (x86) processors to the mobile market.  As well as steel, ready-to-use smartphones will appear. <br>  In India, this is the <b>Lava XOLO X900</b> .  As well as a copy of it under the brand name of the operator <b>Orange</b> for Europe. <br><img src="https://habrastorage.org/getpro/habr/comment_images/1f2/6a7/f12/1f26a7f127b1aef666968eadb0800fb4.jpg" alt="image"><br><h6>  Lava xolo x900 </h6><br><img src="http://sdl2.4pda.ru/1808609.jpg" alt="image"><br><h6>  Orange version </h6><br><br>  For China, Lenovo has released a model LePhone K800 <br><img src="https://habrastorage.org/getpro/habr/post_images/95e/8f9/bdf/95e8f9bdf0d1af09673a25451b9d8bd9.jpg" alt="image"><br><h6>  Lenovo LePhone K800 </h6><br><br>  At the end of June 2012, these devices are already commercially available. <br>  <b>Lava XOLO X900</b> with of.  The site <a href="http://www.xolo.in/">www.xolo.in</a> , as I understand it is available within India.  Although it can already be ordered from <b>ebay</b> .  The current price for Russia through intermediaries can be viewed at <a href="http://www.bay.ru/">www.bay.ru</a> <br>  <b>Lenovo LePhone K800 is</b> also available, but so far it seems only in Chinese stores <a href="http://www.360buy.com/">www.360buy.com</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Introduction </h4><br>  While the model is happy small, and not very affordable.  I was interested in technical issues. <br>  And so what we have.  In these devices is a processor with x86 architecture.  I do not know who was thinking about. <br>  Probably about its low energy efficiency, low productivity.  Although the reviews suggest otherwise. <br>  I immediately thought, it would not be bad to finally run Windows applications without emulation.  I think many have already tried to run old versions of Windows under emulators (Qemu, Bochs, aDOSBox, etc.) Deje on powerful modern Android smartphones, the brakes are tangible. <br>  It‚Äôs too early to talk about the possibility of Dual Boot.  It is not even clear whether there is a BIOS / UEFI. <br>  I thought that it would be nice to try running <b>Wine</b> under <b>Ubuntu x86</b> .  Under ubuntu <br>  ARM such a miracle for obvious reasons is not available. <br>  Well, since the device in my hands is not.  All that remained was to test the idea under the Android x86 emulator. <a name="habracut"></a><br><br><h4>  Getting Started </h4><br>  First of all, I added the <b>Intel x86 Atom System Image</b> to the Android SDK.  Running it, I ran into incredible brakes, the inclusion of the GPU also did not solve the problem.  So slow work, discouraged me from even wanting to rant Android. <br>  Therefore, I immediately installed Android x86 under VirtualBox.  When setting up a VM for the first time, specify a large HDD size of at least 7 GB.  At the last stage of Android installation, refuse to create a fake SD card. <br><br>  The next problem was to find an image with Ubuntu installed in <b>* .img</b> <br>  At hand I had the image of Ubuntu 12 under VirtualBox <b>* .vdi</b> <br>  The first thing that came to mind was to convert * .vdi to * .img with commands like <br> <code>VBoxManage clonehd --format RAW ubuntu.vdi ubuntu.img</code> <br>  But this was not the right way.  In this way, an image of the entire disk with a partition table will be created, it is not so easy to mount it. <br><br>  After consulting it was found the right solution.  You need to boot the virtual machine from livecd, pre-connect in the settings of the VM images of the HDD * .vdi Android and Ubuntu. <br>  In the console, boot from livecd run <br> <code>sudo parted -l</code> <br>  We look at the name of the connected image of Ubuntu x86.  This is usually <b>sda1</b> <br><br>  Further from myself I will recommend to set the right <b>777</b> on all directories and files in the image.  Despite the fact that it will take a lot of time for these operations.  If you do not do this, you may experience unsolved problems when mounting the image to Android.  I have them. <br>  So we use the commands: <br> <code># find /media/    -type d -exec chmod 777 {} \;</code> <br> <code># find /media/    -type f -exec chmod 777 {} \;</code> <br> <br>  or <br><br> <code>chmod -R 0777 /media/   </code> <br> <br>  Further, in the console to enter the input unit feed the mounted image of Ubuntu.  For output, we write the file image <b>ubuntu.img</b> For convenience, we write directly to the Android image, to the sdcard / ubuntu directory. <br>  To do this, perform: <br> <code>dd if=/dev/sda1 of=/media/Android-x86/android-4.0-RC1/data/media/ubuntu/ubuntu.img bs=1M</code> <br>  We are waiting for the operation is not fast.  Make sure that there is enough space in the Android image. <br><br>  Again, on the resulting image file ubuntu.img we set permissions <b>777</b> <br>  Well, sort of an image prepared.  Moving on. <br><br><h4>  Mounting </h4><br>  Mounting is probably the most stressful stage. <br>  After all done, finally boot into Android. <br>  To begin with, we should have: <br>  1. Ubuntu x86 image in the /sdcard/ubuntu/ubuntu.img directory <br>  2. Ruled Android x86 build.  Usually they are immediately rectified. <br>  3. Android Terminal <br>  4. android-vnc-viewer <br>  5. Root Explorer <br><br>  For a start, raise the network in Android. <br>  As a network adapter, select PCNET Fast III in NAT mode (or in bridge mode, if you have a DHCP server in your environment) <br><img src="https://habrastorage.org/getpro/habr/post_images/1c9/58f/0dc/1c958f0dc0e72f83245534d19e96b6b3.jpg" alt="image"><br>  Correct work of the Internet can be configured through the terminal: <br>  display a list of network interfaces.  Among them should be for example eth0 <br>  ip a <br>  get root rights: <br>  su <br>  get network settings via DHCP <br>  dhcpcd eth0 <br>  configure DNS server <br>  setprop net.dns1 8.8.8.8 <br>  After these actions, the Internet should appear on the virtual machine. <br>  configure adb.  In VirtualBox options, forward port 5555 for example to port 5556 of the host. <br><img src="https://habrastorage.org/getpro/habr/post_images/bfc/d0c/248/bfcd0c248c440fbe3ff52880384b5cf5.jpg" alt="image"><br>  Now you can connect to virtual Android with adb <br>  adb connect 127.0.0.1 Lower556 <br>  If you need to get rooted <br>  adb shell <br>  File sharing and application installation is done by commands. <br>  adb push or adb install <br>  For Market, the Internet did not work for me.  However, in the browser and in the system it is. <br><br>  The next step is to directly mount the image and chroot in Ubuntu. <br><br>  Create a file <b>b</b> in and save it to the directory <b>/ sdcard / ubuntu</b> with the following content <br><div class="spoiler">  <b class="spoiler_title">Script to mount and login to Ubuntu</b> <div class="spoiler_text">  mount -o remount, rw -t yaffs2 / dev / block / mtdblock3 / system <br>  echo "SET VARIABLES" <br>  export bin = / system / bin <br>  export mnt = / data / local / ubuntu <br>  export PATH = $ bin: / usr / bin: / usr / sbin: / bin: $ PATH <br>  export TERM = linux <br>  export HOME = / root <br>  if [!  -d / data / local / ubuntu] <br>  then <br>  mkdir / data / local / ubuntu <br>  chmod 777 / data / local / ubuntu <br>  fi <br><br>  echo "SET UP LOOP DEVICE" <br>  losetup / dev / block / loop1 /sdcard/ubuntu/ubuntu.img <br><br>  echo "MOUNT" <br>  mount -t <b>ext4</b> / dev / block / loop1 / data / local / ubuntu <br>  mount -t devpts devpts $ mnt / dev / pts <br>  mount -t proc proc $ mnt / proc <br>  mount -t sysfs sysfs $ mnt / sys <br><br>  echo "SET UP NETWORK" <br>  sysctl -w net.ipv4.ip_forward = 1 <br>  echo "nameserver 208.67.222.222"&gt; $ mnt / etc / resolv.conf <br>  echo "nameserver 208.67.220.220" &gt;&gt; $ mnt / etc / resolv.conf <br>  echo "127.0.0.1 localhost"&gt; $ mnt / etc / hosts <br><br>  echo "ENTER UBUNTU" <br>  chroot $ mnt / bin / bash <br><br>  echo "UMOUNTING" <br>  umount -lfr $ mnt / dev / pts <br>  umount -lfr $ mnt / proc <br>  umount -lfr $ mnt / sys <br>  umount -lfr $ mnt <br>  losetup -d / dev / block / loop1 </div></div><br><br>  Especially be careful in the line. <br>  <b>mount -t <b>ext4</b> / dev / block / loop1 / data / local / ubuntu</b> <br>  It is important to correctly specify the type of file system on the mounted image. <br><br>  Run a terminal application <br>  Enter the command in the terminal and press "Enter": <br>  <b>su</b> <br><br>  Enter the command in the terminal and press "Enter": <br>  <b>cd / sdcard / ubuntu</b> <br><br>  Enter the command in the terminal and press "Enter": <br>  <b>sh b</b> <br><br>  If you see "root @ localhost: / #" - congratulations!  Now you are working in Ubuntu x86 <br><br>  Every time you want to sign in to Ubuntu, you just need to type su and then sh b in your Android terminal. <br><br>  To exit Ubuntu properly, you must enter exit in the Ubuntu terminal. <br><br><h5>  Configure VNC </h5><br>  Make sure there is a network connection. <br>  Enter the command in the terminal and press "Enter", wait until the end: <br> <code>apt-get update</code> <br> <br>  Enter the command in the terminal and press "Enter", answer the question y: <br> <code>apt-get install tightvncserver</code> <br> <br>  We continue to work under chroot. <br>  Go to <b>/ bin</b> <br>  There we create a file <b>x</b> with the content: <br>  rm -r -f / tmp <br>  mkdir / tmp <br>  chmod 777 / tmp <br>  export USER = root <br>  export XKL_XMODMAP_DISABLE = 1 <br>  vncserver -geometry 800x550 <br><br>  800x550 replace resolution of your emulator / device <br>  Note that in Android 4, the bottom panel occupies a certain number of pixels.  In my case it is 50 pixels.  Therefore, what would have to scroll in the VNC client indicated not 600 as in the emulator, but 550. <br>  The easiest way to find out permission is to take a screen. <br><br>  Make <b>chmod 777 x</b> <br><br>  Using the previous step, we created a script x.  When you want to start working in graphical mode, type x in the Ubuntu terminal and press Enter.  <u>Please note that the first time you run the x script (Only for the first time) you will be asked to create a password for the VNC connection.</u>  <u>Enter the password you need (Considers only the first 8 characters).</u>  <u>Also, you will be asked to create a ‚Äúview-only‚Äù password (view-only) - refuse by entering the answer to question n</u> <br>  Launch the android-vnc-viewer.  Create a new connection with the following parameters: <br>  Nickname: anything <br>  Password: VNC connection password you set <br>  Address: localhost <br>  Port: 5901 <br>  Color format: 24-bit color (4 bpp) <br>  Click the "Connect" button.  After a few minutes, Ubuntu will launch in graphical mode. <br><br>  We still need to create a final script called <b>s</b> <br>  Go back to <b>/ bin</b> <br>  There we create a file <b>x</b> with the content: <br>  export USER = root <br>  vncserver -kill: 1 <br>  vncserver -kill: 2 <br>  sudo reboot <br>  sudo halt <br><br>  Making <b>chmod 777 s</b> <br><br>  If you are running a graphical interface and want to exit Ubuntu, then you MUST execute s in the Ubuntu terminal to stop the VNC server. <br><br><h4>  Well, the final part </h4><br>  We put <b>Wine</b> <br>  Well, everything is trivial <br> <code>sudo apt-get install wine</code> <br> <br><h4>  Not a lot of pitfalls </h4><br>  I had to work under an emulator, in which there is probably no miraculous binary binary translator from Intel. <br>  On this software written using NDK just did not start, falling out with errors. <br>  That is why the android-vnc-viewer is used, as it is written without the NDK.  But note that the android-vnc-viewer does not fully support the hardware keyboard.  And full-fledged analogues do not work <br>  Check whether NDK was used is simple enough.  Open * .apk, for example in WinRAR if there is a <b>lib</b> directory, it means that NDK was used.  In this directory you can see under which architecture the application was built.  I think soon developers besides ARMv6, v7 will add x86. <br>  Consider the speed under the emulator speed is not very high.  I also used a fairly heavy shell in Ubuntu. <br>  In the android-vnc-viewer, the right mouse button, in a certain mode, works as a double click with the left. <br><br>  I want to see how productive the binary translator in games will be at first. <br><br><img src="http://img803.imageshack.us/img803/2043/wine.png" alt="image"><br><h6>  <i>Victory</i> </h6><br><br>  Thanks to friends with w3bsit3-dns.com, and also <b>bit_imp</b> for help and articles. <br><br>  Link for those who want to try to launch a ready-made Android image with Ubuntu under VirtualBox <br>  <a href="http://narod.ru/disk/53940773001.7d8f3a1e5cbcdf6499737ecdb1c83337/Android%25204%2520x86.7z.html">narod.ru/disk/53940773001.7d8f3a1e5cbcdf6499737ecdb1c83337/Android%204%20x86.7z.html</a> </div><p>Source: <a href="https://habr.com/ru/post/146480/">https://habr.com/ru/post/146480/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146473/index.html">Separation of configurations in Yii by adult</a></li>
<li><a href="../146474/index.html">RichFaces 3.0, File Shaping and Uploading, jQuery and Crutches</a></li>
<li><a href="../146475/index.html">xNet - C # library for working with the Web</a></li>
<li><a href="../146476/index.html">Runet Today, June 25, 2012. Experts of the issue: Sergey Fage, Maxim Kazak</a></li>
<li><a href="../146478/index.html">How designers and developers can play cohesively (and keep running with scissors)</a></li>
<li><a href="../146481/index.html">Modern servers on Intel Xeon E5-2600 on the example of ETegro Hyperion RS230 G4</a></li>
<li><a href="../146483/index.html">Rescue CD / DVD Polished</a></li>
<li><a href="../146484/index.html">More about data transmission technology for optics. Wavelength multiplexing of signals</a></li>
<li><a href="../146485/index.html">The Russian team has become a two-time world champion in underwater robotics</a></li>
<li><a href="../146486/index.html">New freeware software from NetWrix</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
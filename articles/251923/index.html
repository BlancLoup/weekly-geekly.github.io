<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cubieboard customization highlights with linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I'll tell you what difficulties I encountered when setting up my Cubieboard, which made me spend a lot of time with red eyes at night. I do not preten...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cubieboard customization highlights with linux</h1><div class="post__text post__text-html js-mediator-article">  I'll tell you what difficulties I encountered when setting up my Cubieboard, which made me spend a lot of time with red eyes at night.  I do not pretend to reveal something new, perhaps for many those things that I will tell are obvious, for the rest it will be a good help when setting up Cubieboard. <br><br>  So, the main points of the setting are written in the publications <a href="http://habrahabr.ru/post/235199/">‚ÄúCubietruck.</a>  <a href="http://habrahabr.ru/post/235199/">Road mini server.</a>  <a href="http://habrahabr.ru/post/235199/">Part 2 "</a> and <a href="http://habrahabr.ru/post/225371/">" Cubietruck.</a>  <a href="http://habrahabr.ru/post/225371/">Cozy, home server</a> .  I will only talk about the problems that I encountered when setting up my cube as a router with HDD. <br><br>  Let's start in order. <br><a name="habracut"></a><br>  The first problem was c load average.  This parameter did not fall below 1, in the absence of heavy processes, and load cpu at 1%.  The fact is that the default configuration of the cube is an erroneous config, in the file script.bin, in the [usbc0] section.  Need to change this.  I set my system to nand, therefore: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs">sudo -i mount /dev/nanda /mnt <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /mnt bin2fex script.bin script.fex rm script.bin</code> </pre> <br>  Open the vim script.fex and search for usbc0 option usb_detect_type = 1, then make it usb_detect_type = 0.  Save: <br><br><pre> <code class="bash hljs">fex2bin script.fex script.bin</code> </pre><br>  Reboot and see that la&gt; = 0; <br><br>  The second problem was with the transfer of the system from nand to HDD.  Following the <a href="http://docs.cubieboard.org/tutorials/ct1/installation/moving_rootfs_from_nandflash_to_hard_drive">"Moving Rootfs From Nandflash To Hard Drive" Guide</a> did not make me feel good.  The cube refused to be loaded, went into an endless reboot, I had to roll the axis again.  I tried different things: put a hornbeam, try to edit the standard U-boot bootloader.  However, the old decision was more correct.  Following the instructions in the article <a href="http://habrahabr.ru/post/225371/">‚ÄúCubietruck.</a>  <a href="http://habrahabr.ru/post/225371/">Cozy, home server ‚Äù</a> I managed to get to boot from the HDD.  As a result, the uEnv.txt file looked like this: <br><br><pre> <code class="bash hljs">console=tty0 extraargs=console=ttyS0,115200 hdmi.audio=EDID:0 disp.screen0_output_mode=EDID:1280x720p50 rootwait panic=10 rootfstype=ext4 rootflags=discard nand_root=/dev/sda1</code> </pre><br>  The third problem was with the repositories, which answered 404 in the lubuntu arm. The solution is simple - change the sources.list: <br><br><pre> <code class="bash hljs">nano /etc/apt/sources.list</code> </pre><br>  And replace with: <br><br><div class="spoiler">  <b class="spoiler_title">sources.list</b> <div class="spoiler_text">  deb <a href="http://old-releases.ubuntu.com/ubuntu/">old-releases.ubuntu.com/ubuntu</a> raring main universe restricted multiverse <br>  deb-src <a href="http://old-releases.ubuntu.com/ubuntu/">old-releases.ubuntu.com/ubuntu</a> raring main universe restricted multiverse <br>  deb <a href="http://old-releases.ubuntu.com/ubuntu/">old-releases.ubuntu.com/ubuntu</a> raring-security main universe restricted multiverse <br>  deb-src <a href="http://old-releases.ubuntu.com/ubuntu/">old-releases.ubuntu.com/ubuntu</a> raring-security main universe restricted multiverse <br>  deb <a href="http://old-releases.ubuntu.com/ubuntu/">old-releases.ubuntu.com/ubuntu</a> raring-updates main universe restricted multiverse <br>  deb-src <a href="http://old-releases.ubuntu.com/ubuntu/">old-releases.ubuntu.com/ubuntu</a> raring-updates main universe restricted multiverse <br>  deb <a href="http://old-releases.ubuntu.com/ubuntu/">old-releases.ubuntu.com/ubuntu</a> raring-backports main restricted universe multiverse <br>  deb-src <a href="http://old-releases.ubuntu.com/ubuntu/">old-releases.ubuntu.com/ubuntu</a> raring-backports main restricted universe multiverse <br>  deb <a href="http://old-releases.ubuntu.com/ubuntu/">old-releases.ubuntu.com/ubuntu</a> raring-proposed main restricted universe multiverse <br>  deb-src <a href="http://old-releases.ubuntu.com/ubuntu/">old-releases.ubuntu.com/ubuntu</a> raring-proposed main restricted universe multiverse <br><br></div></div><br>  The fourth problem was related to configuring the cube as an access point.  DNS categorically refused to resolve, helped add directly to /etc/dnsmasq.conf dns provider from /etc/resolv.conf: <br><br><div class="spoiler">  <b class="spoiler_title">dnsmasq.conf</b> <div class="spoiler_text">  bind-interfaces <br>  interface = wlan0 <br>  dhcp-range = 192.168.1.10,192.168.1.100 <br>  server = xxxx (your provider‚Äôs DNS) <br><br></div></div><br>  Just a small little thing.  Add the line allow-hotplug wlan0 to / etc / network / interfaces, which will include wi-fi after rebuses. <br><br>  The problem that is standing now is the unstable work of torrents.  The cube behaves very strangely, periodically turns off wifi, cuts speed.  While I sit through 10 threads and limit the download speed, but this is a crutch. <br><br>  That's all.  Additional information can be found here <a href="http://avsnippets.blogspot.ru/2014/03/cubietruck-nas-arduino.html">avsnippets.blogspot.ru/2014/03/cubietruck-nas-arduino.html</a> Thank you av0000! </div><p>Source: <a href="https://habr.com/ru/post/251923/">https://habr.com/ru/post/251923/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../251913/index.html">Welcome to Moscow.pm on March 5</a></li>
<li><a href="../251915/index.html">Trigger mailings</a></li>
<li><a href="../251917/index.html">Crucial moment. Bank of England makes its bitcoin</a></li>
<li><a href="../251919/index.html">Big pitfalls of a small controller</a></li>
<li><a href="../251921/index.html">New server park Fujitsu</a></li>
<li><a href="../251927/index.html">PHP and Erlang interaction through RabbitMQ</a></li>
<li><a href="../251929/index.html">Detection of mobile malware in the wild</a></li>
<li><a href="../251931/index.html">We test content distribution in GlusterFS</a></li>
<li><a href="../251933/index.html">The magic of one div. Masterclass from the creator of a.singlediv.com</a></li>
<li><a href="../251935/index.html">Ciklum Dnepropetrovsk C ++ Saturday: The first subbotnik of the year for C ++ fans is happy to meet everyone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
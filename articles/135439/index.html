<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Static code analyzer PC-Lint</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In order not to postpone the matter in a ‚Äúlong box‚Äù, I will continue the story about my experience of using static code analyzers. (Start here and her...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Static code analyzer PC-Lint</h1><div class="post__text post__text-html js-mediator-article">  In order not to postpone the matter in a ‚Äúlong box‚Äù, I will continue the story about my experience of using static code analyzers.  (Start <a href="http://habrahabr.ru/blogs/code_review/131245/">here</a> and <a href="http://habrahabr.ru/blogs/code_review/135397/">here</a> ). <br><br>  Having tried Klocwork, I tried to interest the management in it, however the price of 30 thousand euros served as the main stopping criterion, everything else was no longer important. <br><br>  However, someone suddenly remembered that once the company had already acquired a license for some kind of code analyzer.  This analyzer was PC-Lint.  It turned out that no one uses it (having read to the end, you will understand why), so they gave me the license supposedly to play, if interested. <br><a name="habracut"></a><br>  Well, the system turned out to be the complete opposite of Klocwork.  Run from the command line, all settings via parameters or configuration file, the list of files for analysis must be prepared manually.  True, there was some kind of integration with Visual Studio, which, however, only allowed to avoid creating a list of files.  Configuration files still needed to be written "hands" in a text editor. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The output of the results is in a text file.  When you start from Visual Studio, go to the studio console, from where you could click to the location of the alleged problem by clicking (it is already easier!). <br><br>  The main problem of PC-Lint is the number of messages.  On a relatively small project, he with the default settings gave out more than 23 thousand comments!  Having spent a couple of days on viewing and ‚Äúturning off‚Äù 34 of the most frequent and at the same time non-critical class of problems, I managed to reduce the total number of comments to five and a half thousand! <br><br>  And of course, in such a heap, several really important notes can be easily lost, indicating a real buffer overflow or the use of an uninitialized variable. <br><br>  And for this reason, those who bought it stopped using the tool.  I also stopped using it, having spent several days digging into thousands of warnings, finding, however, a couple of real critical problems and slightly improving the style of the code. <br><br>  You can only turn off all messages of a certain type, there is no possibility to mark one specific message as false positive. <br><br>  Of course, there is no tracking from build to build.  You can only focus on the total number of messages. <br><br>  Problems found in the header files are duplicated each time this file is connected.  If a file is connected ten times, then all ten times PC-Lint will display messages about all problems found inside.  And if you consider that he easily finds problems even in the files of the studio itself, especially in the implementation of STL containers ... <br><br>  At the same time, the way in which the problem arises is also not shown in any way.  Those.  for example, he can report that an uninitialized variable can be used at a given place, but under what conditions it occurs, one has to guess himself (unlike Klocwork, which shows the full path from the beginning of the function to the problem point through all the branchings). <br><br>  And to top it off - it only works locally.  When working in a team, there is no way to easily and quickly report other problems found (only copy-paste text, alas), as there is no possibility of launching by all participants (unless, of course, each participant is purchased a separate license). <br><br>  There are, of course, the PC-Lint and advantages. <br><br>  The number of messages can, under certain conditions, be considered a plus.  Despite the fact that most of the messages belong to the style and almost never indicate a potential problem, it is necessary to recognize that almost every message has a drop of common sense.  And if (theoretically) fix everything that PC-Lint proposes to fix, the code will clearly become better, clearer and more readable.  But, as someone said on the Internet, ‚ÄúI want to program in C, not Lint!‚Äù. <br><br>  An example of a ‚Äúcosmetic‚Äù note: <br><br>  It was: <br><pre><code class="cpp hljs">calib_offset = (int32)(full_offset / full_gain * <span class="hljs-number"><span class="hljs-number">100000</span></span>);</code> </pre> <br>  PC-Lint here sees the ambiguity of reading: a / b * c - is (a / b) * c or a / (b * c)? <br><br>  Accordingly, it became: <br><pre> <code class="cpp hljs">calib_offset = (int32)( (full_offset / full_gain) * <span class="hljs-number"><span class="hljs-number">100000</span></span>);</code> </pre><br>  In my opinion, readability has increased! <br><br>  If the project starts from scratch and is not too large, then with a certain desire it is possible to achieve the ‚ÄúZero Problems‚Äù approach from PC-Lint.  If, at the time of the first launch, the project is close to completion, then ‚ÄúZero Problems‚Äù will be almost impossible to achieve. <br><br>  Of the other advantages, I can highlight the following: <br><br><ul><li>  a very good description of each warning issued (they are all in a separate large PDF document; it is naturally impossible to automatically switch to the description from the studio); </li><li>  a very large set of rules, for example, there are rules written in both Myers‚Äôs ‚ÄúEffective C ++‚Äù books; </li><li>  flexible settings - you can turn on and off each rule individually; </li><li>  well finds real problems (it is difficult only to find them among the abundance of other messages); </li><li>  the price is much cheaper than other options ($ 389 for an unlimited license). </li></ul><br>  And finally - a pair of really found problem areas: <br><br>  It was: <br><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (SocketID) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SOCKETID_1: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SOCKETID_2: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SOCKETID_3: doSomething(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SOCKETID_4: doSomethingElse(); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SOCKETID_5: doSomethingElseSimilar(); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SOCKETID_6: doAnotherThing(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ERR_SERVICE_NOT_SUPPORTED; }</code> </pre><br>  It became: <br><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (SocketID) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SOCKETID_1: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SOCKETID_2: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SOCKETID_3: doSomething(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SOCKETID_4: doSomethingElse(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SOCKETID_5: doSomethingElseSimilar(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SOCKETID_6: doAnotherThing(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ERR_SERVICE_NOT_SUPPORTED; }</code> </pre><br>  If someone didn't notice, the word break was missed twice; <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main_task</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *p_arg)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> status; <span class="hljs-comment"><span class="hljs-comment">// somewhere below‚Ä¶ status = memory_init(&amp;memory_config[0], memory_heap, sizeof(memory_heap)); // and later ‚Äústatus‚Äù in never used‚Ä¶ }</span></span></code> </pre><br>  A note to this piece of code is rather stylistic - ‚ÄúThe value of the status variable is not used anywhere‚Äù, but, in my opinion, not so meaningless ‚Äî such code creates a false certainty that the result of the memory_init function is taken into account somewhere, but this is not the case. <br><br>  And it is much more ‚Äúhonest" to rewrite the code like this, without declaring an unused variable and obviously discarding the result. <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main_task</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *p_arg)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// some code‚Ä¶ memory_init(&amp;memory_config[0], memory_heap, sizeof(memory_heap)); // some other code }</span></span></code> </pre><br>  Of course, it would be more correct to check the result and perform the necessary actions in case of failure - but ... this is good when the project is at an early stage, and changing the architecture of the application is still quite easy, and not when the project has already been completed, and in this place the handling of exceptional situations It was not originally laid architecturally (You can check the result, and then what? Where to put it then, if it signals failure, and the calling function does not have an exception handling mechanism?). <br><br>  And it is precisely for this purpose that a static code analyzer is needed, which is launched regularly (ideally, after each build!), Along with the requirement ‚ÄúZero warnings from the analyzer‚Äù. <br><br>  Of course, no analyzer will replace a competent developer, code review and other techniques and development management techniques.  However, it can definitely make life easier for the whole team with proper use! </div><p>Source: <a href="https://habr.com/ru/post/135439/">https://habr.com/ru/post/135439/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../135429/index.html">Export user interface from Photoshop</a></li>
<li><a href="../135431/index.html">Siri virtual operator in a dial phone</a></li>
<li><a href="../135432/index.html">Traditional survey of heads of studios. Turnover of my studio for 2011 compared to 2010:</a></li>
<li><a href="../135437/index.html">Dropbox is testing an automatic image upload feature.</a></li>
<li><a href="../135438/index.html">Migrating from ISA 2004/2006 to Forefront TMG</a></li>
<li><a href="../135440/index.html">Google+ keeps track of how your finger is scratching your beard</a></li>
<li><a href="../135441/index.html">JXD S7100 - portable gaming console on Android OS</a></li>
<li><a href="../135443/index.html">QtDockTile - cross-platform use of docks!</a></li>
<li><a href="../135444/index.html">Torvalds - 42. Do not panic!</a></li>
<li><a href="../135446/index.html">Apple patented YouTube icon for iOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Open machine learning course. Topic 9. Time Series Analysis with Python</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! We continue our series of open-source machine learning articles and today we will talk about time series. 


 Let's look at how to work with...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Open machine learning course. Topic 9. Time Series Analysis with Python</h1><div class="post__text post__text-html js-mediator-article"><p>  Good day!  We continue our series of open-source machine learning articles and today we will talk about time series. </p><br><p><img src="https://habrastorage.org/files/234/dcd/2fc/234dcd2fca894e80bc4c753e67bf613f.jpg" width="250" align="right">  Let's look at how to work with them in Python, what possible methods and models can be used for forecasting;  what is double and triple exponential weighting;  what to do if stationarity is not about you;  how to build SARIMA and not die;  and how to predict xgboost.  And all this we will apply for example from the harsh reality. </p><br><p>  <strong>UPD:</strong> now the course is in English under the brand <a href="http://mlcourse.ai/">mlcourse.ai</a> with <a href="https://medium.com/open-machine-learning-course">articles</a> on Medium, and materials on Kaggle ( <a href="https://www.kaggle.com/kashnitsky/mlcourse">Dataset</a> ) and on <a href="">GitHub</a> . </p><br><p>  <a href="https://youtu.be/nQjul-5_0_M">Video recording of the</a> lecture based on this article as part of the second launch of the open course (September-November 2017). </p><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">List of articles series</b> <div class="spoiler_text"><ol><li>  <a href="https://habrahabr.ru/company/ods/blog/322626/">Primary data analysis with Pandas</a> </li><li>  <a href="https://habrahabr.ru/company/ods/blog/323210/">Visual data analysis with Python</a> </li><li>  <a href="https://habrahabr.ru/company/ods/blog/322534/">Classification, decision trees and the method of nearest neighbors</a> </li><li>  <a href="https://habrahabr.ru/company/ods/blog/323890/">Linear classification and regression models</a> </li><li>  <a href="https://habrahabr.ru/company/ods/blog/324402/">Compositions: bagging, random forest.</a>  <a href="https://habrahabr.ru/company/ods/blog/324402/">Validation and training curves</a> </li><li>  <a href="https://habrahabr.ru/company/ods/blog/325422/">Construction and selection of signs</a> </li><li>  <a href="https://habrahabr.ru/company/ods/blog/325654/">Teaching without a teacher: PCA, clustering</a> </li><li>  <a href="https://habrahabr.ru/company/ods/blog/326418/">We study on gigabytes with Vowpal Wabbit</a> </li><li>  <a href="https://habrahabr.ru/company/ods/blog/327242/">Time Series Analysis with Python</a> </li><li>  <a href="https://habrahabr.ru/company/ods/blog/327250/">Gradient boosting</a> </li></ol></div></div><br><p>  Plan for this article: </p><br><ol><li>  Moving, smoothing and evaluating <br><ul><li>  Rolling window estimations </li><li>  Exponential Smoothing, Holt-Winters Model </li><li>  Cross-validation on time series, selection of parameters </li></ul></li><li>  Econometric approach <br><ul><li>  Stationarity, single roots </li><li>  We get rid of non-stationarity and build SARIMA </li></ul></li><li>  Linear and not very time series models <br><ul><li>  Feature Extraction </li><li>  Linear regression vs XGBoost </li></ul></li><li>  Homework </li><li>  Useful resources </li></ol><br><h2 id="vvedenie">  Introduction </h2><br><p>  At work, I almost daily encounter various tasks related to time series.  The most common question arises - what will happen to our indicators in the next day / week / month / etc.  - how many players will install the applications, how many will be online, how many actions will be performed by users, and so on.  The forecasting task can be approached differently, depending on what quality the forecast should be for, for what period we want to build it, and, of course, for how long it is necessary to select and adjust the model parameters to obtain it. </p><br><p>  Let's start with simple methods of analysis and forecasting - moving averages, smoothing and their variations. </p><br><h1 id="dvizhemsya-sglazhivaem-i-ocenivaem">  Moving, smoothing and evaluating </h1><br><p>  A small <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D1%2580%25D0%25B5%25D0%25BC%25D0%25B5%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B9_%25D1%2580%25D1%258F%25D0%25B4">definition of the</a> time series: </p><br><blockquote>  <em>A time series</em> is a sequence of values ‚Äã‚Äãdescribing a process occurring in time, measured at successive times, usually at regular intervals. </blockquote><p> Thus, the data are ordered with respect to non-random moments of time, and, therefore, unlike random samples, they can contain additional information that we will try to extract. </p><br><p>  We import the necessary libraries.  Basically, we will need the <a href="http://statsmodels.sourceforge.net/stable/">statsmodels</a> module, which implements numerous methods of statistical modeling, including for time series.  For fans of R who have moved to Python, it may seem very familiar, since it supports the writing of wording models in the style of 'Wage ~ Age + Education'. </p><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> warnings warnings.filterwarnings(<span class="hljs-string"><span class="hljs-string">'ignore'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> tqdm <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> tqdm <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pandas <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pd <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> sklearn.metrics <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> mean_absolute_error, mean_squared_error <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> statsmodels.formula.api <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> smf <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> statsmodels.tsa.api <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> smt <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> statsmodels.api <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> sm <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> scipy.stats <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> scs <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.optimize <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> minimize <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt</code> </pre> <br><p>  As an example for the work, let's take the real data on the hour online players in one of the mobile toys: </p><br><div class="spoiler">  <b class="spoiler_title">Graphic drawing code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> plotly.offline <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> download_plotlyjs, init_notebook_mode, plot, iplot <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> plotly <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> graph_objs <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> go init_notebook_mode(connected = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">plotly_df</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(df, title = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> data = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> column <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> df.columns: trace = go.Scatter( x = df.index, y = df[column], mode = <span class="hljs-string"><span class="hljs-string">'lines'</span></span>, name = column ) data.append(trace) layout = dict(title = title) fig = dict(data = data, layout = layout) iplot(fig, show_link=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) dataset = pd.read_csv(<span class="hljs-string"><span class="hljs-string">'hour_online.csv'</span></span>, index_col=[<span class="hljs-string"><span class="hljs-string">'Time'</span></span>], parse_dates=[<span class="hljs-string"><span class="hljs-string">'Time'</span></span>]) plotly_df(dataset, title = <span class="hljs-string"><span class="hljs-string">"Online users"</span></span>)</code> </pre> </div></div><br><img src="https://habrastorage.org/files/6d5/ca9/91f/6d5ca991f01445178a9c61a3b901f069.png"><br><h2 id="rolling-window-estimations">  Rolling window estimations </h2><br><p>  Let's start modeling with the naive assumption - ‚Äútomorrow will be like yesterday‚Äù, but instead of a model of the form <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>y</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi></mrow></msub><mo>=</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.118ex" height="2.539ex" viewBox="0 -780.1 5648.2 1093.4" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="1356" y="0"></use><g transform="translate(1717,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="693" y="-342"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="2841" y="0"></use><g transform="translate(3897,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="361" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1140" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><msub><mrow class="MJX-TeXAtom-ORD"><mi>y</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>t</mi></mrow></msub><mo>=</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mi>t</mi><mo>‚àí</mo><mn>1</mn></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-1"> \ hat {y} _ {t} = y_ {t-1} </script>  we will assume that the future value of the variable depends on the average <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-2"> n </script>  its previous values, which means we use the <strong>moving average</strong> . </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>y</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi></mrow></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi></mrow><mtext>&amp;#xA0;</mtext><mi>d</mi><mi>i</mi><mi>s</mi><mi>p</mi><mi>l</mi><mi>a</mi><mi>y</mi><mi>s</mi><mi>t</mi><mi>y</mi><mi>l</mi><mi>e</mi><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msubsup><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mi>n</mi></mrow></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="41.961ex" height="3.262ex" viewBox="0 -987.6 18066.4 1404.6" role="img" focusable="false" style="vertical-align: -0.969ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="1356" y="0"></use><g transform="translate(1717,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="693" y="-342"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="2841" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-66" x="4147" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-72" x="4698" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="5149" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-63" x="5679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="6112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6B" x="6613" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-64" x="7384" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-69" x="7908" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-73" x="8253" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-70" x="8723" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="9226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="9525" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="10054" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-73" x="10552" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="11021" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="11383" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="11880" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="12179" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-73" x="12895" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-75" x="13365" y="0"></use><g transform="translate(13937,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,403)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="521" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1300" y="0"></use></g><g transform="translate(878,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="600" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-30" x="1379" y="0"></use></g></g><g transform="translate(16245,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="361" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6E" x="1140" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><msub><mrow class="MJX-TeXAtom-ORD"><mi>y</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>t</mi></mrow></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>k</mi></mrow><mtext>&nbsp;</mtext><mi>d</mi><mi>i</mi><mi>s</mi><mi>p</mi><mi>l</mi><mi>a</mi><mi>y</mi><mi>s</mi><mi>t</mi><mi>y</mi><mi>l</mi><mi>e</mi><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class="MJX-TeXAtom-ORD"><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>‚àí</mo><mn>1</mn></mrow></msubsup><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mi>t</mi><mo>‚àí</mo><mi>n</mi></mrow></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> \ hat {y} _ {t} = \ frac {1} {k} \ displaystyle \ sum ^ {k-1} _ {n = 0} y_ {t-n} </script></p><br><p>  We implement the same function in python and look at the forecast, built on the last observed day (24 hours) </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">moving_average</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(series, n)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> np.average(series[-n:]) moving_average(dataset.Users, <span class="hljs-number"><span class="hljs-number">24</span></span>)</code> </pre> <br><pre> <code class="python hljs">Out: <span class="hljs-number"><span class="hljs-number">29858.333333333332</span></span></code> </pre> <br><p>  Unfortunately, such a long-term forecast cannot be made - in order to get a prediction one step further, the previous value should be an actually observed value.  But the moving average has another application - smoothing the original series to identify trends.  There is a ready implementation in the <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.rolling.html"><code>DataFrame.rolling(window).mean()</code></a> - <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.rolling.html"><code>DataFrame.rolling(window).mean()</code></a> .  The more we set the width of the interval, the more smooth the trend will be.  If the data is very noisy, which is especially common, for example, in financial indicators, such a procedure can help with the definition of common patterns. </p><br><p>  For our series, trends are quite obvious, but if we smooth them out by day, the online dynamics are better visible on weekdays and weekends (weekends - it's time to play), and weekly smoothing reflects well the general changes associated with a sharp increase in the number of active players in February and the subsequent decline in March. </p><br><div class="spoiler">  <b class="spoiler_title">Graphic drawing code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">plotMovingAverage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(series, n)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" series - dataframe with timeseries n - rolling window size """</span></span> rolling_mean = series.rolling(window=n).mean() <span class="hljs-comment"><span class="hljs-comment">#  ,         #rolling_std = series.rolling(window=n).std() #upper_bond = rolling_mean+1.96*rolling_std #lower_bond = rolling_mean-1.96*rolling_std plt.figure(figsize=(15,5)) plt.title("Moving average\n window size = {}".format(n)) plt.plot(rolling_mean, "g", label="Rolling mean trend") #plt.plot(upper_bond, "r--", label="Upper Bond / Lower Bond") #plt.plot(lower_bond, "r--") plt.plot(dataset[n:], label="Actual values") plt.legend(loc="upper left") plt.grid(True)</span></span></code> </pre> </div></div><br><pre> <code class="python hljs">plotMovingAverage(dataset, <span class="hljs-number"><span class="hljs-number">24</span></span>) <span class="hljs-comment"><span class="hljs-comment">#    plotMovingAverage(dataset, 24*7) #   </span></span></code> </pre> <br><img src="https://habrastorage.org/files/3e2/004/3b6/3e20043b67d540d0af26c90777c0b230.png"><br><img src="https://habrastorage.org/files/b94/839/0e0/b948390e05854780a2249e95a0d7cccd.png"><br><p>  A modification of a simple moving average is a <strong>weighted average</strong> , within which various weights are attached to the observations, giving a total of one in the total, with more weight being usually assigned to the last observations. </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>y</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi></mrow></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>d</mi><mi>i</mi><mi>s</mi><mi>p</mi><mi>l</mi><mi>a</mi><mi>y</mi><mi>s</mi><mi>t</mi><mi>y</mi><mi>l</mi><mi>e</mi><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>n</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi></mrow></msubsup><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>n</mi></msub><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi><mo>+</mo><mn>1</mn><mo>&amp;#x2212;</mo><mi>n</mi></mrow></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="44.94ex" height="3.142ex" viewBox="0 -935.7 19348.9 1352.7" role="img" focusable="false" style="vertical-align: -0.969ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="1356" y="0"></use><g transform="translate(1717,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="693" y="-342"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="2841" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-64" x="4147" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-69" x="4671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-73" x="5016" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-70" x="5486" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="5989" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="6288" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="6817" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-73" x="7315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="7784" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="8146" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="8643" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="8942" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-73" x="9658" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-75" x="10128" y="0"></use><g transform="translate(10700,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6B" x="1242" y="499"></use><g transform="translate(878,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="600" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1379" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6F" x="13258" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6D" x="13743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="14622" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-67" x="15088" y="0"></use><g transform="translate(15569,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6E" x="748" y="-213"></use></g><g transform="translate(16623,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="361" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1140" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="1640" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6E" x="2419" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><msub><mrow class="MJX-TeXAtom-ORD"><mi>y</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>t</mi></mrow></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>d</mi><mi>i</mi><mi>s</mi><mi>p</mi><mi>l</mi><mi>a</mi><mi>y</mi><mi>s</mi><mi>t</mi><mi>y</mi><mi>l</mi><mi>e</mi><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class="MJX-TeXAtom-ORD"><mi>n</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>k</mi></mrow></msubsup><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>n</mi></msub><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mi>t</mi><mo>+</mo><mn>1</mn><mo>‚àí</mo><mi>n</mi></mrow></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> \ hat {y} _ {t} = \ displaystyle \ sum ^ {k} _ {n = 1} \ omega_n y_ {t + 1-n} </script></p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">weighted_average</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(series, weights)</span></span></span><span class="hljs-function">:</span></span> result = <span class="hljs-number"><span class="hljs-number">0.0</span></span> weights.reverse() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> n <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(weights)): result += series[-n<span class="hljs-number"><span class="hljs-number">-1</span></span>] * weights[n] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result weighted_average(dataset.Users, [<span class="hljs-number"><span class="hljs-number">0.6</span></span>, <span class="hljs-number"><span class="hljs-number">0.2</span></span>, <span class="hljs-number"><span class="hljs-number">0.1</span></span>, <span class="hljs-number"><span class="hljs-number">0.07</span></span>, <span class="hljs-number"><span class="hljs-number">0.03</span></span>])</code> </pre> <br><pre> <code class="python hljs">Out: <span class="hljs-number"><span class="hljs-number">35967.550000000003</span></span></code> </pre> <br><h2 id="eksponencialnoe-sglazhivanie-model-holta-vintersa">  Exponential Smoothing, Holt-Winters Model </h2><br><h3 id="prostoe-eksponencialnoe-sglazhivanie">  Simple exponential smoothing </h3><br><p>  Now let's see what happens if instead of weighing the last <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> n </script>  the values ‚Äã‚Äãof the series, we begin to weigh all available observations, while decreasing weights exponentially as we go deeper into the historical data.  The simple <a href="http://www.machinelearning.ru/wiki/index.php%3Ftitle%3D%25D0%25AD%25D0%25BA%25D1%2581%25D0%25BF%25D0%25BE%25D0%25BD%25D0%25B5%25D0%25BD%25D1%2586%25D0%25B8%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D0%25BE%25D0%25B5_%25D1%2581%25D0%25B3%25D0%25BB%25D0%25B0%25D0%25B6%25D0%25B8%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">exponential smoothing</a> formula will help us with this: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>y</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi></mrow></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>y</mi><mi>t</mi></msub><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="49.75ex" height="2.66ex" viewBox="0 -832 21420.2 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="1356" y="0"></use><g transform="translate(1717,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="693" y="-342"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="2841" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="4147" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="4677" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-70" x="4975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="5479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="6055" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-63" x="6835" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-64" x="7268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6F" x="7792" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="8277" y="0"></use><g transform="translate(8639,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="9707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="10708" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="11097" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="11820" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="13071" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="13600" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-70" x="13899" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="14402" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="14979" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="15508" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-63" x="16148" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-64" x="16581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6F" x="17105" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="17590" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="18202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="18778" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="19308" y="0"></use><g transform="translate(19669,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="361" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1140" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><msub><mrow class="MJX-TeXAtom-ORD"><mi>y</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>t</mi></mrow></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>y</mi><mi>t</mi></msub><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo stretchy="false">)</mo><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mi>t</mi><mo>‚àí</mo><mn>1</mn></mrow></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> \ hat {y} _ {t} = \ alpha \ cdot y_t + (1- \ alpha) \ cdot \ hat y_ {t-1} </script></p><br><p>  Here, the model value is a weighted average between the current true and previous model values.  Weight <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.242ex" height="2.419ex" viewBox="0 -780.1 2687.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="2158" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-7"> \ alpha </script>  called a smoothing factor.  It determines how quickly we will ‚Äúforget‚Äù the last available true observation.  The smaller <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.242ex" height="2.419ex" viewBox="0 -780.1 2687.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="2158" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-8"> \ alpha </script>  , the more influences previous model values ‚Äã‚Äãhave, and the series are smoothed out more. </p><br><p>  Exponentiality is hidden in the recursiveness of a function - every time we multiply <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.054ex" height="2.66ex" viewBox="0 -832 5189.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="1112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="2362" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="2892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-70" x="3190" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="3694" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="4270" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="4800" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-9"> (1- \ alpha) </script>  to the previous model value, which, in turn, also contained <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.054ex" height="2.66ex" viewBox="0 -832 5189.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="1112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="2362" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="2892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-70" x="3190" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="3694" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="4270" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="4800" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-10"> (1- \ alpha) </script>  and so on until the very beginning. </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">exponential_smoothing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(series, alpha)</span></span></span><span class="hljs-function">:</span></span> result = [series[<span class="hljs-number"><span class="hljs-number">0</span></span>]] <span class="hljs-comment"><span class="hljs-comment"># first value is same as series for n in range(1, len(series)): result.append(alpha * series[n] + (1 - alpha) * result[n-1]) return result</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Graphic drawing code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> plt.style.context(<span class="hljs-string"><span class="hljs-string">'seaborn-white'</span></span>): plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> alpha <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [<span class="hljs-number"><span class="hljs-number">0.3</span></span>, <span class="hljs-number"><span class="hljs-number">0.05</span></span>]: plt.plot(exponential_smoothing(dataset.Users, alpha), label=<span class="hljs-string"><span class="hljs-string">"Alpha {}"</span></span>.format(alpha)) plt.plot(dataset.Users.values, <span class="hljs-string"><span class="hljs-string">"c"</span></span>, label = <span class="hljs-string"><span class="hljs-string">"Actual"</span></span>) plt.legend(loc=<span class="hljs-string"><span class="hljs-string">"best"</span></span>) plt.axis(<span class="hljs-string"><span class="hljs-string">'tight'</span></span>) plt.title(<span class="hljs-string"><span class="hljs-string">"Exponential Smoothing"</span></span>) plt.grid(<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)</code> </pre> </div></div><br><img src="https://habrastorage.org/files/485/0b1/b90/4850b1b90baf4674aeab0c2a08a26306.png"><br><h3 id="dvoynoe-eksponencialnoe-sglazhivanie">  Double exponential smoothing </h3><br><p>  Until now, we could get a forecast just one point ahead (and even smooth the series nicely) from our methods at best. This is great, but not enough, so let's move on to expanding the exponential smoothing, which will allow us to build a forecast two points ahead (and too beautiful to smooth out the series). </p><br><p>  This will help us split the series into two components - level (level, intercept) <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>l</mi><mi>l</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.051ex" height="2.057ex" viewBox="0 -780.1 1313.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="1015" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>e</mi><mi>l</mi><mi>l</mi></math></span></span><script type="math/tex" id="MathJax-Element-11"> \ ell </script>  and trend <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.998ex" height="2.057ex" viewBox="0 -780.1 429.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-12"> b </script>  (trend, slope).  We predicted the level, or the expected value of the series, using the previous methods, and now the same exponential smoothing is applicable to the trend, naively or not very well believing that the future direction of change of the series depends on the weighted previous changes. </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mi>x</mi></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><msub><mi>y</mi><mi>x</mi></msub><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>x</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>b</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>x</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mspace linebreak=&quot;newline&quot; /><msub><mi>b</mi><mi>x</mi></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mi>x</mi></msub><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>x</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo><msub><mi>b</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>x</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mspace linebreak=&quot;newline&quot; /><mtext>&amp;#xA0;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>y</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>x</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mi>x</mi></msub><mo>+</mo><msub><mi>b</mi><mi>x</mi></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="93.735ex" height="9.286ex" viewBox="0 -832 40358 3998.3" role="img" focusable="false" style="vertical-align: -7.354ex; max-width: 778px;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(10273,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="716" y="0"></use><g transform="translate(1015,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="422" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="2096" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="3402" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="3931" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-70" x="4230" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="4733" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="5310" y="0"></use><g transform="translate(5839,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="7057" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="8058" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="8447" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="9170" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="10421" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="10950" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-70" x="11249" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="11752" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="12329" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="12858" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="13248" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="13887" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="14354" y="0"></use><g transform="translate(14652,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="0" y="0"></use><g transform="translate(298,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1351" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="16582" y="0"></use><g transform="translate(17583,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="0" y="0"></use><g transform="translate(429,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1351" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="19421" y="0"></use></g><g transform="translate(10954,-1433)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="607" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="1212" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="2518" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="2947" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="3414" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="3775" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="4305" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="4944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="5411" y="0"></use><g transform="translate(5709,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="422" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="6735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="7986" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="8452" y="0"></use><g transform="translate(8751,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="0" y="0"></use><g transform="translate(298,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1351" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="10458" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="11070" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="12071" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="12460" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="13183" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="14434" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="14863" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="15330" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="15691" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="16221" y="0"></use><g transform="translate(16610,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="0" y="0"></use><g transform="translate(429,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1351" y="0"></use></g></g></g><g transform="translate(15715,-2811)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="1356" y="0"></use><g transform="translate(1717,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="0" y="0"></use><g transform="translate(490,-242)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1351" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="3894" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="5201" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="5667" y="0"></use><g transform="translate(5966,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="422" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="6991" y="0"></use><g transform="translate(7992,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="607" y="-213"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mi>x</mi></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><msub><mi>y</mi><mi>x</mi></msub><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mrow class="MJX-TeXAtom-ORD"><mi>x</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>b</mi><mrow class="MJX-TeXAtom-ORD"><mi>x</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><msub><mi>b</mi><mi>x</mi></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mi>x</mi></msub><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mrow class="MJX-TeXAtom-ORD"><mi>x</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi><mo stretchy="false">)</mo><msub><mi>b</mi><mrow class="MJX-TeXAtom-ORD"><mi>x</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mspace linebreak="newline"></mspace><mtext>&nbsp;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><msub><mrow class="MJX-TeXAtom-ORD"><mi>y</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>x</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mi>x</mi></msub><mo>+</mo><msub><mi>b</mi><mi>x</mi></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-13"> \ ell_x = \ alpha y_x + (1- \ alpha) (\ ell_ {x-1} + b_ {x-1}) \\ b_x = \ beta (\ ell_x - \ ell_ {x-1}) + ( 1- \ beta) b_ {x-1} \\ \ hat {y} _ {x + 1} = \ ell_x + b_x </script></p><br><p>  The result is a set of functions.  The first describes the level - it, as before, depends on the current value of the series, and the second term is now divided into the previous value of the level and trend.  The second is responsible for the trend - it depends on the level change at the current step, and on the previous trend value.  Here, the role of weight in the exponential smoothing is the coefficient <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.731ex" height="2.057ex" viewBox="0 -780.1 2037 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="1146" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="1507" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-14"> \ beta </script>  .  Finally, the final prediction is the sum of the model level and trend values. </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">double_exponential_smoothing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(series, alpha, beta)</span></span></span><span class="hljs-function">:</span></span> result = [series[<span class="hljs-number"><span class="hljs-number">0</span></span>]] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> n <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, len(series)+<span class="hljs-number"><span class="hljs-number">1</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> n == <span class="hljs-number"><span class="hljs-number">1</span></span>: level, trend = series[<span class="hljs-number"><span class="hljs-number">0</span></span>], series[<span class="hljs-number"><span class="hljs-number">1</span></span>] - series[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> n &gt;= len(series): <span class="hljs-comment"><span class="hljs-comment">#  value = result[-1] else: value = series[n] last_level, level = level, alpha*value + (1-alpha)*(level+trend) trend = beta*(level-last_level) + (1-beta)*trend result.append(level+trend) return result</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Graphic drawing code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> plt.style.context(<span class="hljs-string"><span class="hljs-string">'seaborn-white'</span></span>): plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> alpha <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [<span class="hljs-number"><span class="hljs-number">0.9</span></span>, <span class="hljs-number"><span class="hljs-number">0.02</span></span>]: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> beta <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [<span class="hljs-number"><span class="hljs-number">0.9</span></span>, <span class="hljs-number"><span class="hljs-number">0.02</span></span>]: plt.plot(double_exponential_smoothing(dataset.Users, alpha, beta), label=<span class="hljs-string"><span class="hljs-string">"Alpha {}, beta {}"</span></span>.format(alpha, beta)) plt.plot(dataset.Users.values, label = <span class="hljs-string"><span class="hljs-string">"Actual"</span></span>) plt.legend(loc=<span class="hljs-string"><span class="hljs-string">"best"</span></span>) plt.axis(<span class="hljs-string"><span class="hljs-string">'tight'</span></span>) plt.title(<span class="hljs-string"><span class="hljs-string">"Double Exponential Smoothing"</span></span>) plt.grid(<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)</code> </pre> </div></div><br><img src="https://habrastorage.org/files/c47/eb0/262/c47eb0262b90465c88151194624cb20f.png"><br><p>  Now I had to configure two parameters - <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.242ex" height="2.419ex" viewBox="0 -780.1 2687.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="2158" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-15"> \ alpha </script>  and <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.731ex" height="2.057ex" viewBox="0 -780.1 2037 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="1146" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="1507" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-16"> \ beta </script>  .  The first is responsible for smoothing the series around the trend, the second - for smoothing the trend itself.  The higher the values, the more weight will be given to the latest observations and the less smoother the model range will be.  Combinations of parameters can produce quite bizarre results, especially if asked by hand.  And about not manual selection of parameters I will tell a little lower, immediately after the triple exponential smoothing. </p><br><h3 id="troynoe-eksponencialnoe-sglazhivanie-aka-holt-winters">  Triple exponential smoothing aka Holt-Winters </h3><br><p>  So, successfully reached the next option of exponential smoothing, this time triple. </p><br><p>  The idea of ‚Äã‚Äãthis method is to add another, third, component - seasonality.  Accordingly, the method is applicable only if the series is not deprived of this seasonality, which is true in our case.  The seasonal component in the model will explain the repeated fluctuations around the level and trend, and it will be characterized by the length of the season ‚Äî the period after which the repetitions of the oscillations begin.  For each observation in the season, its component is formed, for example, if the season length is 7 (for example, weekly seasonality), then we get 7 seasonal components, piece by piece for each of the days of the week. </p><br><p>  We get a new system: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mi>x</mi></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>y</mi><mi>x</mi></msub><mo>&amp;#x2212;</mo><msub><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>x</mi><mi>L</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>x</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>b</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>x</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mspace linebreak=&quot;newline&quot; /><msub><mi>b</mi><mi>x</mi></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mi>x</mi></msub><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>x</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo><msub><mi>b</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>x</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mspace linebreak=&quot;newline&quot; /><msub><mi>s</mi><mi>x</mi></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>g</mi><mi>a</mi><mi>m</mi><mi>m</mi><mi>a</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>y</mi><mi>x</mi></msub><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mi>x</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>g</mi><mi>a</mi><mi>m</mi><mi>m</mi><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo><msub><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>x</mi><mi>L</mi></mrow></msub><mspace linebreak=&quot;newline&quot; /><mtext>&amp;#xA0;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>y</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>x</mi><mo>+</mo><mi>m</mi></mrow></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mi>x</mi></msub><mo>+</mo><mi>m</mi><msub><mi>b</mi><mi>x</mi></msub><mo>+</mo><msub><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>x</mi><mo>&amp;#x2212;</mo><mi>L</mi><mo>+</mo><mn>1</mn><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mi>m</mi><mo>&amp;#x2212;</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo><mi>m</mi><mi>o</mi><mi>d</mi><mi>L</mi></mrow></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="93.735ex" height="12.78ex" viewBox="0 -832 40358 5502.6" role="img" focusable="false" style="vertical-align: -10.848ex; max-width: 778px;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(8544,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="716" y="0"></use><g transform="translate(1015,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="422" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="2096" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="3402" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="3931" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-70" x="4230" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="4733" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="5310" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="5839" y="0"></use><g transform="translate(6229,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="7446" y="0"></use><g transform="translate(8447,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-4C" x="572" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="9903" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="10515" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="11516" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="11905" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="12628" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="13879" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="14408" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-70" x="14707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="15210" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="15787" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="16316" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="16706" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="17345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="17812" y="0"></use><g transform="translate(18110,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="0" y="0"></use><g transform="translate(298,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1351" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="20040" y="0"></use><g transform="translate(21041,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="0" y="0"></use><g transform="translate(429,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1351" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="22880" y="0"></use></g><g transform="translate(10954,-1433)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="607" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="1212" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="2518" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="2947" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="3414" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="3775" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="4305" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="4944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="5411" y="0"></use><g transform="translate(5709,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="422" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="6735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="7986" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="8452" y="0"></use><g transform="translate(8751,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="0" y="0"></use><g transform="translate(298,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1351" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="10458" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="11070" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="12071" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="12460" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="13183" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="14434" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="14863" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="15330" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="15691" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="16221" y="0"></use><g transform="translate(16610,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="0" y="0"></use><g transform="translate(429,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1351" y="0"></use></g></g></g><g transform="translate(10479,-2866)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="663" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="1252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-67" x="2558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="3038" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6D" x="3568" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6D" x="4446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="5325" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="5854" y="0"></use><g transform="translate(6244,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="7461" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="8712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="9179" y="0"></use><g transform="translate(9477,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="422" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="10280" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="10892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="11893" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="12282" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="13005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-67" x="14256" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="14736" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6D" x="15266" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6D" x="16144" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="17023" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="17552" y="0"></use><g transform="translate(17942,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-4C" x="572" y="0"></use></g></g></g><g transform="translate(10853,-4243)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="1356" y="0"></use><g transform="translate(1717,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-79" x="0" y="0"></use><g transform="translate(490,-242)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6D" x="1351" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="4162" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="5468" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="5935" y="0"></use><g transform="translate(6233,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="422" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="7259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6D" x="8259" y="0"></use><g transform="translate(9138,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="607" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="10294" y="0"></use><g transform="translate(11295,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-187)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-4C" x="1351" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="2032" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="2811" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="3311" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="4090" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6D" x="4479" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="5358" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="6136" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="6637" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6D" x="7026" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6F" x="7905" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-64" x="8390" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-4C" x="8914" y="0"></use></g></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mi>x</mi></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo stretchy="false">(</mo><msub><mi>y</mi><mi>x</mi></msub><mo>‚àí</mo><msub><mi>s</mi><mrow class="MJX-TeXAtom-ORD"><mi>x</mi><mi>L</mi></mrow></msub><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mrow class="MJX-TeXAtom-ORD"><mi>x</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>b</mi><mrow class="MJX-TeXAtom-ORD"><mi>x</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><msub><mi>b</mi><mi>x</mi></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mi>x</mi></msub><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mrow class="MJX-TeXAtom-ORD"><mi>x</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi><mo stretchy="false">)</mo><msub><mi>b</mi><mrow class="MJX-TeXAtom-ORD"><mi>x</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mspace linebreak="newline"></mspace><msub><mi>s</mi><mi>x</mi></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>g</mi><mi>a</mi><mi>m</mi><mi>m</mi><mi>a</mi><mo stretchy="false">(</mo><msub><mi>y</mi><mi>x</mi></msub><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mi>x</mi></msub><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>g</mi><mi>a</mi><mi>m</mi><mi>m</mi><mi>a</mi><mo stretchy="false">)</mo><msub><mi>s</mi><mrow class="MJX-TeXAtom-ORD"><mi>x</mi><mi>L</mi></mrow></msub><mspace linebreak="newline"></mspace><mtext>&nbsp;</mtext><mi>h</mi><mi>a</mi><mi>t</mi><msub><mrow class="MJX-TeXAtom-ORD"><mi>y</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mi>x</mi><mo>+</mo><mi>m</mi></mrow></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>e</mi><mi>l</mi><msub><mi>l</mi><mi>x</mi></msub><mo>+</mo><mi>m</mi><msub><mi>b</mi><mi>x</mi></msub><mo>+</mo><msub><mi>s</mi><mrow class="MJX-TeXAtom-ORD"><mi>x</mi><mo>‚àí</mo><mi>L</mi><mo>+</mo><mn>1</mn><mo>+</mo><mo stretchy="false">(</mo><mi>m</mi><mo>‚àí</mo><mn>1</mn><mo stretchy="false">)</mo><mi>m</mi><mi>o</mi><mi>d</mi><mi>L</mi></mrow></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-17"> \ ell_x = \ alpha (y_x - s_ {xL}) + (1- \ alpha) (\ ell_ {x-1} + b_ {x-1}) \\ b_x = \ beta (\ ell_x - \ ell_ { x-1}) + (1- \ beta) b_ {x-1} \\ s_x = \ gamma (y_x - \ ell_x) + (1- \ gamma) s_ {xL} \\ \ hat {y} _ { x + m} = \ ell_x + mb_x + s_ {x-L + 1 + (m-1) modL} </script></p><br><p>  The level now depends on the current value of the series minus the corresponding seasonal component, the trend remains unchanged, and the seasonal component depends on the current value of the series minus the level and on the previous value of the component.  In this case, the components are smoothed over all available seasons, for example, if this is a component responsible for Monday, then it will be averaged only with other Mondays.  More information about the work of averages and an assessment of the initial values ‚Äã‚Äãof the trend and seasonal components can be found <a href="http://www.itl.nist.gov/div898/handbook/pmc/section4/pmc435.htm">here</a> .  Now, having a seasonal component, we can predict not just one, or even two, but arbitrary <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>m</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.04ex" height="1.455ex" viewBox="0 -520.7 878.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6D" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>m</mi></math></span></span><script type="math/tex" id="MathJax-Element-18"> m </script>  steps forward, which can not but rejoice. </p><br><p>  Below is the code for building a model of triple exponential smoothing, also known by the names of its creators - Charles Holt and his student Peter Winters. <br>  Additionally, Brutlaga method is included in the model for building confidence intervals: </p><br><p><math> </math> $$ display $$ \ hat y_ {max_x} = \ ell_ {x ‚àí 1} + b_ {x ‚àí 1} + s_ {x ‚àí T} + m‚ãÖd_ {t ‚àí T} \\ \ hat y_ {min_x} = \ ell_ {x ‚àí 1} + b_ {x ‚àí 1} + s_ {x ‚àí T} -m‚ãÖd_ {t ‚àí T} \\ d_t = \ gamma‚à£y_t‚àí \ hat y_t‚à£ + (1‚àí \ gamma ) d_ {t ‚àí T}, $$ display $$ </p><br><p>  Where <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-54" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-20"> T </script>  - season length, <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>d</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.216ex" height="2.057ex" viewBox="0 -780.1 523.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-64" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>d</mi></math></span></span><script type="math/tex" id="MathJax-Element-21"> d </script>  - the predicted deviation, and the remaining parameters are taken from the triple smoothing.  More information about the method and its application to the search for anomalies in the time series can be found <a href="https://fedcsis.org/proceedings/2012/pliks/118.pdf">here.</a> </p><br><div class="spoiler">  <b class="spoiler_title">Code for the Holt-Winters model</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HoltWinters</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-string"><span class="hljs-string">"""  -       https://fedcsis.org/proceedings/2012/pliks/118.pdf # series -    # slen -   # alpha, beta, gamma -   - # n_preds -   # scaling_factor -       (    2  3) """</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, series, slen, alpha, beta, gamma, n_preds, scaling_factor=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1.96</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> self.series = series self.slen = slen self.alpha = alpha self.beta = beta self.gamma = gamma self.n_preds = n_preds self.scaling_factor = scaling_factor <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initial_trend</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> sum = <span class="hljs-number"><span class="hljs-number">0.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(self.slen): sum += float(self.series[i+self.slen] - self.series[i]) / self.slen <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum / self.slen <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initial_seasonal_components</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> seasonals = {} season_averages = [] n_seasons = int(len(self.series)/self.slen) <span class="hljs-comment"><span class="hljs-comment">#    for j in range(n_seasons): season_averages.append(sum(self.series[self.slen*j:self.slen*j+self.slen])/float(self.slen)) #    for i in range(self.slen): sum_of_vals_over_avg = 0.0 for j in range(n_seasons): sum_of_vals_over_avg += self.series[self.slen*j+i]-season_averages[j] seasonals[i] = sum_of_vals_over_avg/n_seasons return seasonals def triple_exponential_smoothing(self): self.result = [] self.Smooth = [] self.Season = [] self.Trend = [] self.PredictedDeviation = [] self.UpperBond = [] self.LowerBond = [] seasonals = self.initial_seasonal_components() for i in range(len(self.series)+self.n_preds): if i == 0: #    smooth = self.series[0] trend = self.initial_trend() self.result.append(self.series[0]) self.Smooth.append(smooth) self.Trend.append(trend) self.Season.append(seasonals[i%self.slen]) self.PredictedDeviation.append(0) self.UpperBond.append(self.result[0] + self.scaling_factor * self.PredictedDeviation[0]) self.LowerBond.append(self.result[0] - self.scaling_factor * self.PredictedDeviation[0]) continue if i &gt;= len(self.series): #  m = i - len(self.series) + 1 self.result.append((smooth + m*trend) + seasonals[i%self.slen]) #         self.PredictedDeviation.append(self.PredictedDeviation[-1]*1.01) else: val = self.series[i] last_smooth, smooth = smooth, self.alpha*(val-seasonals[i%self.slen]) + (1-self.alpha)*(smooth+trend) trend = self.beta * (smooth-last_smooth) + (1-self.beta)*trend seasonals[i%self.slen] = self.gamma*(val-smooth) + (1-self.gamma)*seasonals[i%self.slen] self.result.append(smooth+trend+seasonals[i%self.slen]) #        self.PredictedDeviation.append(self.gamma * np.abs(self.series[i] - self.result[i]) + (1-self.gamma)*self.PredictedDeviation[-1]) self.UpperBond.append(self.result[-1] + self.scaling_factor * self.PredictedDeviation[-1]) self.LowerBond.append(self.result[-1] - self.scaling_factor * self.PredictedDeviation[-1]) self.Smooth.append(smooth) self.Trend.append(trend) self.Season.append(seasonals[i % self.slen])</span></span></code> </pre> </div></div><br><h2 id="kross-validaciya-na-vremennyh-ryadah-podbor-parametrov">  Cross-validation on time series, selection of parameters </h2><br><p>  Before building a model, let's finally talk about the non-manual estimation of parameters for models. </p><br><p>  There is nothing unusual here, as before, you first need to select the appropriate loss function for this task: <a href="https://en.wikipedia.org/wiki/Root-mean-square_deviation">RMSE</a> , <a href="https://en.wikipedia.org/wiki/Mean_absolute_error">MAE</a> , <a href="https://en.wikipedia.org/wiki/Mean_absolute_percentage_error">MAPE</a> , etc., which will monitor the quality of the fit of the model to the source data.  Then we will evaluate for cross-validation the value of the loss function for the given model parameters, look for the gradient, change the parameters in accordance with it, and vigorously descend towards the global minimum of error. </p><br><p>  A small snag occurs only in cross-validation.  The problem is that the time series has, paradoxically, a temporary structure, and randomly mix in the folds of the values ‚Äã‚Äãof the entire series without saving this structure is impossible, otherwise in the process all interrelations of observations with each other will be lost.  Therefore, we will have to use a slightly more cunning way to optimize the parameters, the official name of which I never found, but on the <a href="https://stats.stackexchange.com/questions/14099/using-k-fold-cross-validation-for-time-series-model-selection">CrossValidated</a> website, where you can find answers to everything except the main question of Life, the Universe and Everything Else, they suggest the name "cross-validation on rolling basis ", which is not literally translated as cross-validation on a sliding window. </p><br><p>  The essence is quite simple - we begin to train the model on a small segment of the time series, from the beginning to some <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.84ex" height="1.937ex" viewBox="0 -728.2 361.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-22"> t </script>  making a forecast for <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>+</mo><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.075ex" height="2.057ex" viewBox="0 -728.2 2184.9 885.9" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="583" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6E" x="1584" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><mo>+</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-23"> t + n </script>  steps forward and consider a mistake.  Next, expand the training set to <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>+</mo><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.075ex" height="2.057ex" viewBox="0 -728.2 2184.9 885.9" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="583" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6E" x="1584" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><mo>+</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-24"> t + n </script>  values ‚Äã‚Äãand predict with <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>+</mo><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.075ex" height="2.057ex" viewBox="0 -728.2 2184.9 885.9" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="583" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6E" x="1584" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><mo>+</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-25"> t + n </script>  before <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><mo>+</mo><mn>2</mn><mo>&amp;#x2217;</mo><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.432ex" height="2.057ex" viewBox="0 -728.2 3630.4 885.9" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="583" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-32" x="1584" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2217" x="2307" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6E" x="3029" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><mo>+</mo><mn>2</mn><mo>‚àó</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-26"> t + 2 * n </script>  , so we continue to move the test segment of the series until we rest on the last available observation.  As a result, we get as many folds as <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-27"> n </script>  fits in the gap between the original training segment and the entire length of the series. </p><br><img src="https://habrastorage.org/files/f5c/7cd/b39/f5c7cdb39ccd4ba68378ca232d20d864.png"><br><div class="spoiler">  <b class="spoiler_title">Code for cross-validation on the time series</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> sklearn.model_selection <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TimeSeriesSplit <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">timeseriesCVscore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#   errors = [] values = data.values alpha, beta, gamma = x #     - tscv = TimeSeriesSplit(n_splits=3) #   ,    ,         for train, test in tscv.split(values): model = HoltWinters(series=values[train], slen = 24*7, alpha=alpha, beta=beta, gamma=gamma, n_preds=len(test)) model.triple_exponential_smoothing() predictions = model.result[-len(test):] actual = values[test] error = mean_squared_error(predictions, actual) errors.append(error) #        return np.mean(np.array(errors))</span></span></code> </pre> </div></div><br><p>  The season length value of 24 * 7 was not accidental - the day seasonality is clearly visible in the original row (from here 24), and weekly on weekdays below, on the weekend above, (from here 7), the total seasonal components will turn out 24 * 7. </p><br><p>  In the Holt-Winters model, as in the other exponential smoothing models, there is a limit on the amount of smoothing parameters - each of them can take values ‚Äã‚Äãfrom 0 to 1, therefore, to minimize the loss function, you need to choose an algorithm that supports restrictions on parameters, in this case - Truncated Newton conjugate gradient. </p><br><pre> <code class="python hljs">%%time data = dataset.Users[:<span class="hljs-number"><span class="hljs-number">-500</span></span>] <span class="hljs-comment"><span class="hljs-comment">#      #    x = [0, 0, 0] #        opt = minimize(timeseriesCVscore, x0=x, method="TNC", bounds = ((0, 1), (0, 1), (0, 1))) #       alpha_final, beta_final, gamma_final = opt.x print(alpha_final, beta_final, gamma_final)</span></span></code> </pre> <br><pre> <code class="python hljs">Out: (<span class="hljs-number"><span class="hljs-number">0.0066342670643441681</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.046765204289672901</span></span>)</code> </pre> <br><p>  Let's transfer the received optimum values ‚Äã‚Äãof coefficients <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.242ex" height="2.419ex" viewBox="0 -780.1 2687.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="2158" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>a</mi><mi>l</mi><mi>p</mi><mi>h</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-28"> \ alpha </script>  , <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.731ex" height="2.057ex" viewBox="0 -780.1 2037 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-62" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="1146" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="1507" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-29"> \ beta </script>  and <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>g</mi><mi>a</mi><mi>m</mi><mi>m</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.237ex" height="1.817ex" viewBox="0 -520.7 3546.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-67" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="730" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6D" x="1260" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6D" x="2138" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-61" x="3017" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>g</mi><mi>a</mi><mi>m</mi><mi>m</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-30"> \ gamma </script>  and build a forecast for 5 days ahead (128 hours) </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    , data = dataset.Users model = HoltWinters(data[:-128], slen = 24*7, alpha = alpha_final, beta = beta_final, gamma = gamma_final, n_preds = 128, scaling_factor = 2.56) model.triple_exponential_smoothing()</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Graphic drawing code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">plotHoltWinters</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> Anomalies = np.array([np.NaN]*len(data)) Anomalies[data.values&lt;model.LowerBond] = data.values[data.values&lt;model.LowerBond] plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)) plt.plot(model.result, label = <span class="hljs-string"><span class="hljs-string">"Model"</span></span>) plt.plot(model.UpperBond, <span class="hljs-string"><span class="hljs-string">"r--"</span></span>, alpha=<span class="hljs-number"><span class="hljs-number">0.5</span></span>, label = <span class="hljs-string"><span class="hljs-string">"Up/Low confidence"</span></span>) plt.plot(model.LowerBond, <span class="hljs-string"><span class="hljs-string">"r--"</span></span>, alpha=<span class="hljs-number"><span class="hljs-number">0.5</span></span>) plt.fill_between(x=range(<span class="hljs-number"><span class="hljs-number">0</span></span>,len(model.result)), y1=model.UpperBond, y2=model.LowerBond, alpha=<span class="hljs-number"><span class="hljs-number">0.5</span></span>, color = <span class="hljs-string"><span class="hljs-string">"grey"</span></span>) plt.plot(data.values, label = <span class="hljs-string"><span class="hljs-string">"Actual"</span></span>) plt.plot(Anomalies, <span class="hljs-string"><span class="hljs-string">"o"</span></span>, markersize=<span class="hljs-number"><span class="hljs-number">10</span></span>, label = <span class="hljs-string"><span class="hljs-string">"Anomalies"</span></span>) plt.axvspan(len(data)<span class="hljs-number"><span class="hljs-number">-128</span></span>, len(data), alpha=<span class="hljs-number"><span class="hljs-number">0.5</span></span>, color=<span class="hljs-string"><span class="hljs-string">'lightgrey'</span></span>) plt.grid(<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) plt.axis(<span class="hljs-string"><span class="hljs-string">'tight'</span></span>) plt.legend(loc=<span class="hljs-string"><span class="hljs-string">"best"</span></span>, fontsize=<span class="hljs-number"><span class="hljs-number">13</span></span>); plotHoltWinters()</code> </pre> </div></div><br><img src="https://habrastorage.org/files/259/db7/042/259db7042a6d4bd7b48960cb7a89ef9e.png"><br><p>  Judging by the schedule, the model described the initial time series quite well, catching weekly and daily seasonality, and even managed to catch anomalous declines that went beyond the confidence intervals.  If you look at the simulated deviation, it is clearly seen that the model registers quite sharply for significant changes in the structure of the series, but at the same time quickly returns the variance to normal values, ‚Äúforgetting‚Äù the past.  Such a feature makes it possible, quite well and without significant costs for preparing and training the model, to set up a system for detecting anomalies even in fairly noisy rows. </p><br><img src="https://habrastorage.org/files/d93/461/61a/d9346161a1d643188effd795c2bb65b6.png"><br><h1 id="ekonometricheskiy-podhod">  Econometric approach </h1><br><h2 id="stacionarnost-edinichnye-korni">  Stationarity, single roots </h2><br><p>  Before moving on to modeling, it is worth mentioning such an important property of the time series as <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2582%25D0%25B0%25D1%2586%25D0%25B8%25D0%25BE%25D0%25BD%25D0%25B0%25D1%2580%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C"><strong>stationarity</strong></a> . <br>  Stationarity is understood as the property of the process not to change its statistical characteristics over time, namely, the constancy of the expectation, the constancy of the dispersion (it is <a href="https://ru.wikipedia.org/wiki/%25D0%2593%25D0%25BE%25D0%25BC%25D0%25BE%25D1%2581%25D0%25BA%25D0%25B5%25D0%25B4%25D0%25B0%25D1%2581%25D1%2582%25D0%25B8%25D1%2587%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C">homoscedasticity</a> ) and the independence of the covariance function from time (it should depend only on the distance between observations).  You can clearly see these properties in the pictures taken from the post <a href="http://www.seanabu.com/2016/03/22/time-series-seasonal-ARIMA-model-in-python/">Sean Abu</a> : </p><br><ul><li>  The time series on the right is not stationary, as its expectation increases with time </li></ul><br><img src="https://habrastorage.org/files/20c/9d8/a63/20c9d8a633ec436f91dccd4aedcc6940.png"><br><ul><li>  There is no luck with dispersion - the spread of the values ‚Äã‚Äãof the series varies significantly depending on the period </li></ul><br><img src="https://habrastorage.org/files/b88/eec/a67/b88eeca676d642449cab135273fd5a95.png"><br><ul><li>  Finally, the last graph shows that the values ‚Äã‚Äãof the series suddenly become closer to each other, forming a certain cluster, and as a result we obtain the inconstancy of the covariances </li></ul><br><img src="https://habrastorage.org/files/2f6/1ee/cb2/2f61eecb20714352840748b826e38680.png"><br><p>  Why is stationarity so important?  For the stationary series, it is simple to build a forecast, since we believe that its future statistical characteristics will not differ from the observed current ones.  Most time series models somehow model and predict these characteristics (for example, expectation or variance), so in the case of the nonstationarity of the original series, the predictions will turn out to be incorrect.  Unfortunately, most of the time series that we have to face outside of the training materials are not stationary, but this can (and should) be dealt with. </p><br><p>  To fight nonstationarity, you need to recognize it in person, so let's see how to detect it.  To do this, turn to the white noise and random walk to find out how to get from one to another for free and without SMS. </p><br><p>  White noise graph: </p><br><pre> <code class="python hljs">white_noise = np.random.normal(size=<span class="hljs-number"><span class="hljs-number">1000</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> plt.style.context(<span class="hljs-string"><span class="hljs-string">'bmh'</span></span>): plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>)) plt.plot(white_noise)</code> </pre> <br><img src="https://habrastorage.org/files/ef6/a74/fec/ef6a74fec1434b05b31ad66c5b633cc0.png"><br><p>  So, the process generated by the standard normal distribution is stationary, oscillates around zero with a deviation of 1. Now, based on it, we will generate a new process in which each subsequent value will depend on the previous one: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>x</mi><mi>t</mi></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>r</mi><mi>h</mi><mi>o</mi><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>e</mi><mi>t</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.356ex" height="2.539ex" viewBox="0 -780.1 7903.2 1093.4" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="809" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="1205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-72" x="2512" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="2963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6F" x="3540" y="0"></use><g transform="translate(4025,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><g transform="translate(572,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="361" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1140" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="6080" y="0"></use><g transform="translate(7081,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="659" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>x</mi><mi>t</mi></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>r</mi><mi>h</mi><mi>o</mi><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mi>t</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>e</mi><mi>t</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-31"> x_t = \ rho x_ {t-1} + e_t </script></p><br><div class="spoiler">  <b class="spoiler_title">Code for drawing graphs</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">plotProcess</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(n_samples=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1000</span></span></span></span><span class="hljs-function"><span class="hljs-params">, rho=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> x = w = np.random.normal(size=n_samples) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(n_samples): x[t] = rho * x[t<span class="hljs-number"><span class="hljs-number">-1</span></span>] + w[t] <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> plt.style.context(<span class="hljs-string"><span class="hljs-string">'bmh'</span></span>): plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>)) plt.plot(x) plt.title(<span class="hljs-string"><span class="hljs-string">"Rho {}\n Dickey-Fuller p-value: {}"</span></span>.format(rho, round(sm.tsa.stattools.adfuller(x)[<span class="hljs-number"><span class="hljs-number">1</span></span>], <span class="hljs-number"><span class="hljs-number">3</span></span>))) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> rho <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.6</span></span>, <span class="hljs-number"><span class="hljs-number">0.9</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]: plotProcess(rho=rho)</code> </pre> </div></div><br><img src="https://habrastorage.org/files/b12/1aa/ba6/b121aaba61b34e1087f56a0b7cf0c377.png"><br><img src="https://habrastorage.org/files/76b/5fc/4b7/76b5fc4b760c4af18911be835c9ad35d.png"><br><img src="https://habrastorage.org/files/c49/1f2/399/c491f23996a2450c88b20e2d970f309a.png"><br><img src="https://habrastorage.org/files/599/a58/960/599a589608f14951bbddf00b86a0a27c.png"><br><p>  The first graph produced exactly the same stationary white noise that was built earlier.  On the second value <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>r</mi><mi>h</mi><mi>o</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.096ex" height="2.057ex" viewBox="0 -780.1 1763.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-72" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="701" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6F" x="1278" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>r</mi><mi>h</mi><mi>o</mi></math></span></span><script type="math/tex" id="MathJax-Element-32"> \ rho </script>  increased to 0.6, as a result of which wider cycles began to appear on the graph, but on the whole it has not yet ceased to be stationary.  The third graph is increasingly deviating from the zero average value, but is still fluctuating around it.  Finally, the value <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>r</mi><mi>h</mi><mi>o</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.096ex" height="2.057ex" viewBox="0 -780.1 1763.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-72" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-68" x="701" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-6F" x="1278" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>r</mi><mi>h</mi><mi>o</mi></math></span></span><script type="math/tex" id="MathJax-Element-33"> \ rho </script>       ‚Äî   . </p><br><p>   - ,     ,  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>x</mi><mi>t</mi></msub><mo>=</mo><mi>&amp;#x03C1;</mi><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>e</mi><mi>t</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.462ex" height="2.298ex" viewBox="0 -676.4 6657.2 989.6" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="809" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="1205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-3C1" x="2262" y="0"></use><g transform="translate(2779,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><g transform="translate(572,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="361" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1140" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="4834" y="0"></use><g transform="translate(5835,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="659" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>x</mi><mi>t</mi></msub><mo>=</mo><mi>œÅ</mi><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mi>t</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>e</mi><mi>t</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-34">x_t = \rho x_{t-1} + e_t</script>      .        <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.256ex" height="1.937ex" viewBox="0 -520.7 1832.5 834" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><g transform="translate(572,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="361" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1140" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mi>t</mi><mo>‚àí</mo><mn>1</mn></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-35">x_{t-1}</script> ,   <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>x</mi><mi>t</mi></msub><mo>&amp;#x2212;</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><mi>&amp;#x03C1;</mi><mo>&amp;#x2212;</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>e</mi><mi>t</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28.371ex" height="2.66ex" viewBox="0 -832 12215.1 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="809" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="1150" y="0"></use><g transform="translate(2151,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><g transform="translate(572,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="361" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1140" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="4261" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-28" x="5317" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-3C1" x="5707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="6446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="7447" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-29" x="7948" y="0"></use><g transform="translate(8337,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-78" x="0" y="0"></use><g transform="translate(572,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2212" x="361" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1140" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-2B" x="10392" y="0"></use><g transform="translate(11393,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="659" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>x</mi><mi>t</mi></msub><mo>‚àí</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mi>t</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo>=</mo><mo stretchy="false">(</mo><mi>œÅ</mi><mo>‚àí</mo><mn>1</mn><mo stretchy="false">)</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mi>t</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>e</mi><mi>t</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-36">x_t - x_{t-1} = (\rho - 1) x_{t-1} + e_t</script> ,    ‚Äî  .  If a <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03C1;</mi><mo>=</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.463ex" height="2.419ex" viewBox="0 -728.2 2352.1 1041.5" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-3C1" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-3D" x="795" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMAIN-31" x="1851" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>œÅ</mi><mo>=</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-37">\rho=1</script> ,        <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>e</mi><mi>t</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.909ex" height="1.817ex" viewBox="0 -520.7 822.1 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-65" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/ods/blog/327242/&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj9zKapAVZKxPm6uziFYtdHp5DVEA#MJMATHI-74" x="659" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>e</mi><mi>t</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-38"> e_t </script>  .       <a href="https://ru.wikipedia.org/wiki/%25D0%25A2%25D0%25B5%25D1%2581%25D1%2582_%25D0%2594%25D0%25B8%25D0%25BA%25D0%25B8_%25E2%2580%2594_%25D0%25A4%25D1%2583%25D0%25BB%25D0%25BB%25D0%25B5%25D1%2580%25D0%25B0">-</a>    (  ).         ,      .    ‚Äî   ,     ,    .  ,          ,           (   ),        -,    . </p><br><p>       ‚Äî   ,    ,   , , -  . </p><br><h2 id="izbavlyaemsya-ot-nestacionarnosti-i-stroim-sarima">      SARIMA </h2><br><p>    ARIMA    ,   <del>   </del>      .          ‚Äî <a href="https://habrahabr.ru/post/210530/">  SARIMA   Python+R</a> , <a href="https://habrahabr.ru/post/207160/">     python</a> ,       . </p><br><div class="spoiler"> <b class="spoiler_title">   </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tsplot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(y, lags=None, figsize=</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">12</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, </span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">)</span></span></span></span><span class="hljs-function"><span class="hljs-params">, style=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'bmh'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> isinstance(y, pd.Series): y = pd.Series(y) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> plt.style.context(style): fig = plt.figure(figsize=figsize) layout = (<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) ts_ax = plt.subplot2grid(layout, (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), colspan=<span class="hljs-number"><span class="hljs-number">2</span></span>) acf_ax = plt.subplot2grid(layout, (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)) pacf_ax = plt.subplot2grid(layout, (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)) y.plot(ax=ts_ax) ts_ax.set_title(<span class="hljs-string"><span class="hljs-string">'Time Series Analysis Plots'</span></span>) smt.graphics.plot_acf(y, lags=lags, ax=acf_ax, alpha=<span class="hljs-number"><span class="hljs-number">0.5</span></span>) smt.graphics.plot_pacf(y, lags=lags, ax=pacf_ax, alpha=<span class="hljs-number"><span class="hljs-number">0.5</span></span>) print(<span class="hljs-string"><span class="hljs-string">" -: p=%f"</span></span> % sm.tsa.stattools.adfuller(y)[<span class="hljs-number"><span class="hljs-number">1</span></span>]) plt.tight_layout() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tsplot(dataset.Users, lags=<span class="hljs-number"><span class="hljs-number">30</span></span>)</code> </pre> </div></div><br><pre> <code class="python hljs">Out:  -: p=<span class="hljs-number"><span class="hljs-number">0.190189</span></span></code> </pre> <br><img src="https://habrastorage.org/files/3cd/91f/a88/3cd91fa88d2244ab9ed28b6dd4556f9b.png"><br><p>    ,     ,  -        .     -. </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">invboxcox</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(y,lmbda)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#   - if lmbda == 0: return(np.exp(y)) else: return(np.exp(np.log(lmbda*y+1)/lmbda)) data = dataset.copy() data['Users_box'], lmbda = scs.boxcox(data.Users+1) #  ,        tsplot(data.Users_box, lags=30) print("   -: %f" % lmbda)</span></span></code> </pre> <br><pre> <code class="python hljs">Out:  -: p=<span class="hljs-number"><span class="hljs-number">0.079760</span></span>    -: <span class="hljs-number"><span class="hljs-number">0.587270</span></span></code> </pre> <br><img src="https://habrastorage.org/files/ab2/1c2/bda/ab21c2bda16e4e5184139c4d94ce76d4.png"><br><p>  ,   - -      .          .   : </p><br><pre> <code class="python hljs">data[<span class="hljs-string"><span class="hljs-string">'Users_box_season'</span></span>] = data.Users_box - data.Users_box.shift(<span class="hljs-number"><span class="hljs-number">24</span></span>*<span class="hljs-number"><span class="hljs-number">7</span></span>) tsplot(data.Users_box_season[<span class="hljs-number"><span class="hljs-number">24</span></span>*<span class="hljs-number"><span class="hljs-number">7</span></span>:], lags=<span class="hljs-number"><span class="hljs-number">30</span></span>)</code> </pre> <br><pre> <code class="python hljs">Out:  -: p=<span class="hljs-number"><span class="hljs-number">0.002571</span></span></code> </pre> <br><img src="https://habrastorage.org/files/00f/0f3/f0c/00f0f3f0c7da4c33a66597165bac9a5a.png"><br><p>  -      ,        -    .           ,     ,       . </p><br><pre> <code class="python hljs">data[<span class="hljs-string"><span class="hljs-string">'Users_box_season_diff'</span></span>] = data.Users_box_season - data.Users_box_season.shift(<span class="hljs-number"><span class="hljs-number">1</span></span>) tsplot(data.Users_box_season_diff[<span class="hljs-number"><span class="hljs-number">24</span></span>*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>:], lags=<span class="hljs-number"><span class="hljs-number">30</span></span>)</code> </pre> <br><pre> <code class="python hljs">Out:  -: p=<span class="hljs-number"><span class="hljs-number">0.000000</span></span></code> </pre> <br><img src="https://habrastorage.org/files/b37/ba3/2fc/b37ba32fc1ce4b21946fff6eae07c454.png"><br><p> ,   ,          SARIMA ,  ,        . </p><br><p>   Q = 1, P = 4, q = 3, p = 4 </p><br><pre> <code class="python hljs">ps = range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>) d=<span class="hljs-number"><span class="hljs-number">1</span></span> qs = range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>) Ps = range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>) D=<span class="hljs-number"><span class="hljs-number">1</span></span> Qs = range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> itertools <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> product parameters = product(ps, qs, Ps, Qs) parameters_list = list(parameters) len(parameters_list)</code> </pre> <br><pre> <code class="python hljs">Out: <span class="hljs-number"><span class="hljs-number">100</span></span></code> </pre> <br><div class="spoiler"> <b class="spoiler_title">    </b> <div class="spoiler_text"><pre> <code class="python hljs">%%time results = [] best_aic = float(<span class="hljs-string"><span class="hljs-string">"inf"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> param <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tqdm(parameters_list): <span class="hljs-comment"><span class="hljs-comment">#try except ,          try: model=sm.tsa.statespace.SARIMAX(data.Users_box, order=(param[0], d, param[1]), seasonal_order=(param[2], D, param[3], 24*7)).fit(disp=-1) # ,           except ValueError: print('wrong parameters:', param) continue aic = model.aic #  , aic,  if aic &lt; best_aic: best_model = model best_aic = aic best_param = param results.append([param, model.aic]) warnings.filterwarnings('default') result_table = pd.DataFrame(results) result_table.columns = ['parameters', 'aic'] print(result_table.sort_values(by = 'aic', ascending=True).head())</span></span></code> </pre> </div></div><br><p>     : </p><br><pre> <code class="python hljs">%%time best_model = sm.tsa.statespace.SARIMAX(data.Users_box, order=(<span class="hljs-number"><span class="hljs-number">4</span></span>, d, <span class="hljs-number"><span class="hljs-number">3</span></span>), seasonal_order=(<span class="hljs-number"><span class="hljs-number">4</span></span>, D, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>)).fit(disp=<span class="hljs-number"><span class="hljs-number">-1</span></span>) print(best_model.summary())</code> </pre> <br><pre> <code class="hljs pgsql"> Statespace Model Results ========================================================================================== Dep. Variable: Users_box <span class="hljs-keyword"><span class="hljs-keyword">No</span></span>. Observations: <span class="hljs-number"><span class="hljs-number">2625</span></span> Model: SARIMAX(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>)x(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Log</span></span> Likelihood <span class="hljs-number"><span class="hljs-number">-12547.157</span></span> <span class="hljs-type"><span class="hljs-type">Date</span></span>: Sun, <span class="hljs-number"><span class="hljs-number">23</span></span> Apr <span class="hljs-number"><span class="hljs-number">2017</span></span> AIC <span class="hljs-number"><span class="hljs-number">25120.315</span></span> <span class="hljs-type"><span class="hljs-type">Time</span></span>: <span class="hljs-number"><span class="hljs-number">02</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span> BIC <span class="hljs-number"><span class="hljs-number">25196.662</span></span> Sample: <span class="hljs-number"><span class="hljs-number">0</span></span> HQIC <span class="hljs-number"><span class="hljs-number">25147.964</span></span> - <span class="hljs-number"><span class="hljs-number">2625</span></span> Covariance <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span>: opg ============================================================================== coef std err z P&gt;|z| [<span class="hljs-number"><span class="hljs-number">0.025</span></span> <span class="hljs-number"><span class="hljs-number">0.975</span></span>] <span class="hljs-comment"><span class="hljs-comment">------------------------------------------------------------------------------ ar.L1 0.6794 0.108 6.310 0.000 0.468 0.890 ar.L2 -0.0810 0.181 -0.448 0.654 -0.435 0.273 ar.L3 0.3255 0.137 2.371 0.018 0.056 0.595 ar.L4 -0.2154 0.028 -7.693 0.000 -0.270 -0.161 ma.L1 -0.5086 0.106 -4.784 0.000 -0.717 -0.300 ma.L2 -0.0673 0.170 -0.395 0.693 -0.401 0.267 ma.L3 -0.3490 0.117 -2.976 0.003 -0.579 -0.119 ar.S.L24 0.1023 0.012 8.377 0.000 0.078 0.126 ar.S.L48 -0.0686 0.021 -3.219 0.001 -0.110 -0.027 ar.S.L72 0.1971 0.009 21.573 0.000 0.179 0.215 ar.S.L96 -0.1217 0.013 -9.279 0.000 -0.147 -0.096 ma.S.L24 -0.9983 0.045 -22.085 0.000 -1.087 -0.910 sigma2 873.4159 36.206 24.124 0.000 802.454 944.378 =================================================================================== Ljung-Box (Q): 130.47 Jarque-Bera (JB): 1194707.99 Prob(Q): 0.00 Prob(JB): 0.00 Heteroskedasticity (H): 1.40 Skew: 2.65 Prob(H) (two-sided): 0.00 Kurtosis: 107.88 =================================================================================== Warnings: [1] Covariance matrix calculated using the outer product of gradients (complex-step).</span></span></code> </pre> <br><p>   : </p><br><pre> <code class="python hljs">tsplot(best_model.resid[<span class="hljs-number"><span class="hljs-number">24</span></span>:], lags=<span class="hljs-number"><span class="hljs-number">30</span></span>)</code> </pre> <br><pre> <code class="python hljs">Out:  -: p=<span class="hljs-number"><span class="hljs-number">0.000000</span></span></code> </pre> <br><img src="https://habrastorage.org/files/804/e8a/436/804e8a436ffc4382b73d91ac070d5dfa.png"><br><p>  ,  ,   ,      </p><br><div class="spoiler"> <b class="spoiler_title">      </b> <div class="spoiler_text"><pre> <code class="python hljs">data[<span class="hljs-string"><span class="hljs-string">"arima_model"</span></span>] = invboxcox(best_model.fittedvalues, lmbda) forecast = invboxcox(best_model.predict(start = data.shape[<span class="hljs-number"><span class="hljs-number">0</span></span>], end = data.shape[<span class="hljs-number"><span class="hljs-number">0</span></span>]+<span class="hljs-number"><span class="hljs-number">100</span></span>), lmbda) forecast = data.arima_model.append(forecast).values[<span class="hljs-number"><span class="hljs-number">-500</span></span>:] actual = data.Users.values[<span class="hljs-number"><span class="hljs-number">-400</span></span>:] plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>)) plt.plot(forecast, color=<span class="hljs-string"><span class="hljs-string">'r'</span></span>, label=<span class="hljs-string"><span class="hljs-string">"model"</span></span>) plt.title(<span class="hljs-string"><span class="hljs-string">"SARIMA model\n Mean absolute error {} users"</span></span>.format(round(mean_absolute_error(data.dropna().Users, data.dropna().arima_model)))) plt.plot(actual, label=<span class="hljs-string"><span class="hljs-string">"actual"</span></span>) plt.legend() plt.axvspan(len(actual), len(forecast), alpha=<span class="hljs-number"><span class="hljs-number">0.5</span></span>, color=<span class="hljs-string"><span class="hljs-string">'lightgrey'</span></span>) plt.grid(<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)</code> </pre> </div></div><br><img src="https://habrastorage.org/files/268/37c/27d/26837c27d817434abff69088fe23cf2f.png"><br><p>      ,      1.3 K ,     ,      ,   ,          . </p><br><h1 id="lineynye-i-ne-ochen-modeli-na-vremennyh-ryadah">         </h1><br><p>    .      ,     ‚Äì <a href="http://lurkmore.to/%25D0%2591%25D1%258B%25D1%2581%25D1%2582%25D1%2580%25D0%25BE,_%25D0%25BA%25D0%25B0%25D1%2587%25D0%25B5%25D1%2581%25D1%2582%25D0%25B2%25D0%25B5%25D0%25BD%25D0%25BD%25D0%25BE,_%25D0%25BD%25D0%25B5%25D0%25B4%25D0%25BE%25D1%2580%25D0%25BE%25D0%25B3%25D0%25BE"><em>, , </em></a> .         "-",           (, SARIMA),    (  ‚Äì SARIMA),        ( SARIMA),                       .  Cheap and angry. </p><br><p> ,       ,   , ,  -,     ,              . </p><br><h2 id="izvlechenie-priznakov-feature-exctraction">   (Feature exctraction) </h2><br><p>       ,        .            <a href="https://habrahabr.ru/company/ods/blog/325422/"> </a> . </p><br><p>          ‚Äì  .       -,        ,        - "0  &lt; 23 ",        .   ‚Äì     .               ,        .      ,           (       -),         . </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">code_mean</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data, cat_feature, real_feature)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">"""  ,       cat_feature,   -   real_feature """</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dict(data.groupby(cat_feature)[real_feature].mean())</code> </pre> <br><p>        ,        .          <code>datetime</code> ,     <code>hour</code>  <code>weekday</code> . </p><br><pre> <code class="python hljs">data = pd.DataFrame(dataset) data.columns = [<span class="hljs-string"><span class="hljs-string">"y"</span></span>] data.index = data.index.to_datetime() data[<span class="hljs-string"><span class="hljs-string">"hour"</span></span>] = data.index.hour data[<span class="hljs-string"><span class="hljs-string">"weekday"</span></span>] = data.index.weekday data[<span class="hljs-string"><span class="hljs-string">'is_weekend'</span></span>] = data.weekday.isin([<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>])*<span class="hljs-number"><span class="hljs-number">1</span></span> data.head()</code> </pre> <br><pre> <code class="python hljs">Out:</code> </pre> <br><table border="1"><thead><tr><th></th><th> y </th><th> hour </th><th> weekday </th><th> is_weekend </th></tr><tr><th>  Time </th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><th> 2017-01-01 00:00:00 </th><td> 34002 </td><td>  0 </td><td>  6 </td><td>  one </td></tr><tr><th> 2017-01-01 01:00:00 </th><td>  37947 </td><td>  one </td><td>  6 </td><td>  one </td></tr><tr><th> 2017-01-01 02:00:00 </th><td> 41517 </td><td>  2 </td><td>  6 </td><td>  one </td></tr><tr><th> 2017-01-01 03:00:00 </th><td> 44476 </td><td>  3 </td><td>  6 </td><td>  one </td></tr><tr><th> 2017-01-01 04:00:00 </th><td> 46234 </td><td>  four </td><td>  6 </td><td>  one </td></tr></tbody></table><br><br><p>       </p><br><pre> <code class="python hljs">code_mean(data, <span class="hljs-string"><span class="hljs-string">'weekday'</span></span>, <span class="hljs-string"><span class="hljs-string">"y"</span></span>)</code> </pre> <br><pre> <code class="python hljs">Out: {<span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-number"><span class="hljs-number">38730.143229166664</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-number"><span class="hljs-number">38632.828125</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-number"><span class="hljs-number">38128.518229166664</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-number"><span class="hljs-number">39519.035135135135</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-number"><span class="hljs-number">41505.152777777781</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-number"><span class="hljs-number">43717.708333333336</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-number"><span class="hljs-number">43392.143603133161</span></span>}</code> </pre> <br><p>            , , / ,      , ,  ,     .         <a href="https://github.com/blue-yonder/tsfresh"> tsfresh</a> . </p><br><p>         ,              . </p><br><div class="spoiler"> <b class="spoiler_title">   </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepareData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data, lag_start=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">, lag_end=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">20</span></span></span></span><span class="hljs-function"><span class="hljs-params">, test_size=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.15</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> data = pd.DataFrame(data.copy()) data.columns = [<span class="hljs-string"><span class="hljs-string">"y"</span></span>] <span class="hljs-comment"><span class="hljs-comment">#    ,      test_index = int(len(data)*(1-test_size)) #        for i in range(lag_start, lag_end): data["lag_{}".format(i)] = data.y.shift(i) data.index = data.index.to_datetime() data["hour"] = data.index.hour data["weekday"] = data.index.weekday data['is_weekend'] = data.weekday.isin([5,6])*1 #      ,    data['weekday_average'] = map(code_mean(data[:test_index], 'weekday', "y").get, data.weekday) data["hour_average"] = map(code_mean(data[:test_index], 'hour', "y").get, data.hour) #     data.drop(["hour", "weekday"], axis=1, inplace=True) data = data.dropna() data = data.reset_index(drop=True) #         X_train = data.loc[:test_index].drop(["y"], axis=1) y_train = data.loc[:test_index]["y"] X_test = data.loc[test_index:].drop(["y"], axis=1) y_test = data.loc[test_index:]["y"] return X_train, X_test, y_train, y_test</span></span></code> </pre> </div></div><br><h2 id="lineynaya-regressiya-vs-xgboost">   vs XGBoost </h2><br><p>       .        ,         12  ,       . </p><br><div class="spoiler"> <b class="spoiler_title">  </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> sklearn.linear_model <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> LinearRegression X_train, X_test, y_train, y_test = prepareData(dataset.Users, test_size=<span class="hljs-number"><span class="hljs-number">0.3</span></span>, lag_start=<span class="hljs-number"><span class="hljs-number">12</span></span>, lag_end=<span class="hljs-number"><span class="hljs-number">48</span></span>) lr = LinearRegression() lr.fit(X_train, y_train) prediction = lr.predict(X_test) plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>)) plt.plot(prediction, <span class="hljs-string"><span class="hljs-string">"r"</span></span>, label=<span class="hljs-string"><span class="hljs-string">"prediction"</span></span>) plt.plot(y_test.values, label=<span class="hljs-string"><span class="hljs-string">"actual"</span></span>) plt.legend(loc=<span class="hljs-string"><span class="hljs-string">"best"</span></span>) plt.title(<span class="hljs-string"><span class="hljs-string">"Linear regression\n Mean absolute error {} users"</span></span>.format(round(mean_absolute_error(prediction, y_test)))) plt.grid(<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>);</code> </pre> </div></div><br><img src="https://habrastorage.org/files/a96/a70/f76/a96a70f761d4427c988b92014308f7f7.png"><br><p><br>   ,     ,  ,  3K   ,         . </p><br><p>       -,   ,    .     (  ),    <a href="http://francescopochetti.com/pythonic-cross-validation-time-series-pandas-scikit-learn/">Pythonic Cross Validation on Time Series</a> </p><br><div class="spoiler"> <b class="spoiler_title">  -</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">performTimeSeriesCV</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(X_train, y_train, number_folds, model, metrics)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">'Size train set: {}'</span></span>.format(X_train.shape)) k = int(np.floor(float(X_train.shape[<span class="hljs-number"><span class="hljs-number">0</span></span>]) / number_folds)) print(<span class="hljs-string"><span class="hljs-string">'Size of each fold: {}'</span></span>.format(k)) errors = np.zeros(number_folds<span class="hljs-number"><span class="hljs-number">-1</span></span>) <span class="hljs-comment"><span class="hljs-comment"># loop from the first 2 folds to the total number of folds for i in range(2, number_folds + 1): print('') split = float(i-1)/i print('Splitting the first ' + str(i) + ' chunks at ' + str(i-1) + '/' + str(i) ) X = X_train[:(k*i)] y = y_train[:(k*i)] print('Size of train + test: {}'.format(X.shape)) # the size of the dataframe is going to be k*i index = int(np.floor(X.shape[0] * split)) # folds used to train the model X_trainFolds = X[:index] y_trainFolds = y[:index] # fold used to test the model X_testFold = X[(index + 1):] y_testFold = y[(index + 1):] model.fit(X_trainFolds, y_trainFolds) errors[i-2] = metrics(model.predict(X_testFold), y_testFold) # the function returns the mean of the errors on the n-1 folds return errors.mean()</span></span></code> </pre> </div></div><br><pre> <code class="python hljs">%%time performTimeSeriesCV(X_train, y_train, <span class="hljs-number"><span class="hljs-number">5</span></span>, lr, mean_absolute_error)</code> </pre> <br><pre> <code class="python hljs">Size train set: (<span class="hljs-number"><span class="hljs-number">1838</span></span>, <span class="hljs-number"><span class="hljs-number">39</span></span>) Size of each fold: <span class="hljs-number"><span class="hljs-number">367</span></span> Splitting the first <span class="hljs-number"><span class="hljs-number">2</span></span> chunks at <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> Size of train + test: (<span class="hljs-number"><span class="hljs-number">734</span></span>, <span class="hljs-number"><span class="hljs-number">39</span></span>) Splitting the first <span class="hljs-number"><span class="hljs-number">3</span></span> chunks at <span class="hljs-number"><span class="hljs-number">2</span></span>/<span class="hljs-number"><span class="hljs-number">3</span></span> Size of train + test: (<span class="hljs-number"><span class="hljs-number">1101</span></span>, <span class="hljs-number"><span class="hljs-number">39</span></span>) Splitting the first <span class="hljs-number"><span class="hljs-number">4</span></span> chunks at <span class="hljs-number"><span class="hljs-number">3</span></span>/<span class="hljs-number"><span class="hljs-number">4</span></span> Size of train + test: (<span class="hljs-number"><span class="hljs-number">1468</span></span>, <span class="hljs-number"><span class="hljs-number">39</span></span>) Splitting the first <span class="hljs-number"><span class="hljs-number">5</span></span> chunks at <span class="hljs-number"><span class="hljs-number">4</span></span>/<span class="hljs-number"><span class="hljs-number">5</span></span> Size of train + test: (<span class="hljs-number"><span class="hljs-number">1835</span></span>, <span class="hljs-number"><span class="hljs-number">39</span></span>) CPU times: user <span class="hljs-number"><span class="hljs-number">59.5</span></span> ms, sys: <span class="hljs-number"><span class="hljs-number">7.02</span></span> ms, total: <span class="hljs-number"><span class="hljs-number">66.5</span></span> ms Wall time: <span class="hljs-number"><span class="hljs-number">18.9</span></span> ms Out: <span class="hljs-number"><span class="hljs-number">4613.17893150896</span></span></code> </pre><br><p>  5       4.6 K ,     ,    . </p><br><p>      XGBoost... </p><br><img src="https://habrastorage.org/files/754/a9a/26e/754a9a26e59648de9fe2487241a27c43.jpg"><br><div class="spoiler"> <b class="spoiler_title">     XGBoost</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> xgboost <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> xgb <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">XGB_forecast</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data, lag_start=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">, lag_end=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">20</span></span></span></span><span class="hljs-function"><span class="hljs-params">, test_size=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.15</span></span></span></span><span class="hljs-function"><span class="hljs-params">, scale=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1.96</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#   X_train, X_test, y_train, y_test = prepareData(dataset.Users, lag_start, lag_end, test_size) dtrain = xgb.DMatrix(X_train, label=y_train) dtest = xgb.DMatrix(X_test) #   params = { 'objective': 'reg:linear', 'booster':'gblinear' } trees = 1000 #   -   rmse cv = xgb.cv(params, dtrain, metrics = ('rmse'), verbose_eval=False, nfold=10, show_stdv=False, num_boost_round=trees) #  xgboost    ,   - bst = xgb.train(params, dtrain, num_boost_round=cv['test-rmse-mean'].argmin()) #     #cv.plot(y=['test-mae-mean', 'train-mae-mean']) #    - deviation = cv.loc[cv['test-rmse-mean'].argmin()]["test-rmse-mean"] # ,         prediction_train = bst.predict(dtrain) plt.figure(figsize=(15, 5)) plt.plot(prediction_train) plt.plot(y_train) plt.axis('tight') plt.grid(True) #    prediction_test = bst.predict(dtest) lower = prediction_test-scale*deviation upper = prediction_test+scale*deviation Anomalies = np.array([np.NaN]*len(y_test)) Anomalies[y_test&lt;lower] = y_test[y_test&lt;lower] plt.figure(figsize=(15, 5)) plt.plot(prediction_test, label="prediction") plt.plot(lower, "r--", label="upper bond / lower bond") plt.plot(upper, "r--") plt.plot(list(y_test), label="y_test") plt.plot(Anomalies, "ro", markersize=10) plt.legend(loc="best") plt.axis('tight') plt.title("XGBoost Mean absolute error {} users".format(round(mean_absolute_error(prediction_test, y_test)))) plt.grid(True) plt.legend()</span></span></code> </pre> </div></div><br><pre> <code class="python hljs">XGB_forecast(dataset, test_size=<span class="hljs-number"><span class="hljs-number">0.2</span></span>, lag_start=<span class="hljs-number"><span class="hljs-number">5</span></span>, lag_end=<span class="hljs-number"><span class="hljs-number">30</span></span>)</code> </pre> <br><img src="https://habrastorage.org/files/3d0/683/7f4/3d06837f4571472a9a42502096728542.png"><br><img src="https://habrastorage.org/files/85d/1ea/f35/85d1eaf35af841868d5f426afaf3cc77.png"><br><p><br>   3 K     ,       . ,   ,     ,    ,  , ,         .. </p><br><h1 id="zaklyuchenie">  Conclusion </h1><br><p>             .  ,   ,          . ,   60-   , (     19-), -          LSTM  RNN.     ,   ,     ,       ‚Äî       .          ,          - .          .      SARIMA-        ,      <del>    </del>   ,           10 ,    -  . </p><br><h1 id="domashnee-zadanie">   </h1><br><p>  Actual homework is announced during the regular session of the course, you can follow in <a href="https://vk.com/mlcourse">the VC group</a> and in the <a href="">repository of the</a> course. </p><br><p>  - <a href="http://nbviewer.jupyter.org/github/Yorko/mlcourse.ai/blob/master/jupyter_russian/assignments_demo/assignment09_time_series.ipynb%3Fflush_cache%3Dtrue"> </a>     <a href="https://en.wikipedia.org/wiki/Machine_learning">wiki-</a> "Machine Learning". <a href="https://drive.google.com/open%3Fid%3D1ijk4aFKY5plPiI8z3Mgi3i1Ln94VBY9SSt6xGIdVVFQ">-</a>  ,     . </p><br><h1 id="poleznye-resursy">  Useful resources </h1><br><ul><li>  <a href="https://medium.com/open-machine-learning-course/open-machine-learning-course-topic-9-time-series-analysis-in-python-a270cb05e0b3">Open Machine Learning Course.</a> <a href="https://medium.com/open-machine-learning-course/open-machine-learning-course-topic-9-time-series-analysis-in-python-a270cb05e0b3">Topic 9. Part 1. Time series analysis in Python</a> </li><li>  <a href="https://youtu.be/nQjul-5_0_M">Video recording of the</a> lecture based on this article. </li><li>  <a href="https://medium.com/open-machine-learning-course/open-machine-learning-course-topic-9-part-3-predicting-the-future-with-facebook-prophet-3f3af145cdc">Open Machine Learning Course.</a> <a href="https://medium.com/open-machine-learning-course/open-machine-learning-course-topic-9-part-3-predicting-the-future-with-facebook-prophet-3f3af145cdc">Topic 9. Part 2. Predicting the future with Facebook Prophet</a> </li><li> <a href="https://people.duke.edu/~rnau/411home.htm">-</a>       Duke ‚Äî   ,    ARIMA  </li><li>  <a href="https://bmcbioinformatics.biomedcentral.com/articles/10.1186/1471-2105-15-276">Comparison of ARIMA and Random Forest time series models for prediction of avian influenza H5N1 outbreaks</a> ‚Äî   ,             </li><li>  <a href="http://www.blackarbs.com/blog/time-series-analysis-in-python-linear-models-to-garch/11/1/2016">Time Series Analysis (TSA) in Python ‚Äî Linear Models to GARCH</a>   ARIMA        (Brian Christopher) </li></ul><br><p> <em>    <a href="">GitHub-</a>  <br>   <a href="https://github.com/Yorko/mlcourse.ai/tree/master/jupyter_russian/topic09_time_series"></a> Jupyter.</em> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/327242/">https://habr.com/ru/post/327242/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../327232/index.html">How to use a token to make a Windows domain safer? Part 1</a></li>
<li><a href="../327234/index.html">Jerminal - terminal emulator for java programs</a></li>
<li><a href="../327236/index.html">Dive into Ethereum</a></li>
<li><a href="../327238/index.html">We invite you to the IV conference on the practical application of data science DataScience Lab May 13</a></li>
<li><a href="../327240/index.html">As we from the CRUD-engine service did</a></li>
<li><a href="../327244/index.html">How to make life Redux developer easier?</a></li>
<li><a href="../327246/index.html">Carousel on Vanilla.JS</a></li>
<li><a href="../327248/index.html">Bash scripts, part 6: functions and library development</a></li>
<li><a href="../327250/index.html">Open machine learning course. Theme 10. Gradient boosting</a></li>
<li><a href="../327252/index.html">Go meetup report April 14</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
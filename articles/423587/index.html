<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We collect InnoDB cluster from mysql 5.7 on centos 7</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 

 Once there was a task to work - there seems to be a configured test innoDB cluster on several virtual machines with centos 7.5, you need to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We collect InnoDB cluster from mysql 5.7 on centos 7</h1><div class="post__text post__text-html js-mediator-article">  Hello! <br><br>  Once there was a task to work - there seems to be a configured test innoDB cluster on several virtual machines with centos 7.5, you need to study it and add a couple more nodes.  You can break and mock as you like.  It sounds tempting. <br><a name="habracut"></a><br>  Before that, I had no experience with such a cluster, well, Google‚Äôs help. <br>  With a few exceptions, all the links in it, that in Yandex led either to dev.mysql.com, or to this <a href="https://habr.com/post/332518/">article on Habr√©</a> .  It seems like a cluster of two nodes was configured on it. <br><br>  Well, I read the article, I was somewhat surprised at the complexity of adding nodes and the absence of many details, but oh well.  I added a sin in half with a new node (some of the commands were not useful, some of them broke everything), and then began experimenting with restarting the nodes, etc. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After several approaches and countless deaths of nerve cells, the cluster could not stand it.  One node didn‚Äôt want to be added under any circumstances, another hovered while trying to access the database, and the third pretended that everything was in order.  I had to shoot and start from scratch. <br><br>  When creating a new cluster, unfortunately, no less a lot of problems and inconsistencies arose.  Maybe it's in the versions of the programs, I tried mysql 5.7.  Perhaps in the distribution.  In the end, I stopped the mindless attempts to do everything on paper and began to tune it at random.  And google. <br><br>  A couple of pleasant evenings and nights and the cluster gathered and even refused to crumble. <br>  At the same time, the method of its creation was noticeably different from previous attempts, and I wanted to share it, because  On the Internet, I did not find other relevant, detailed, clear instructions for configuring inndoDB cluster. <br><br>  So, we have three identical virtuals with freshly installed Centos 7.5 minimal 1804 and disabled selinux and firewalld: <br><br>  1.1.1.1 <br>  1.1.1.2 <br>  1.1.1.3 <br><br>  At work, I used mysql 5.7, so we use it.  Let's start with 1.1.1.1: <br><br>  1. Install the mysql-community repository: <br><br><pre><code class="hljs pgsql">rpm -i https://dev.mysql.com/<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>/mysql80-community-<span class="hljs-keyword"><span class="hljs-keyword">release</span></span>-el7<span class="hljs-number"><span class="hljs-number">-1.</span></span>noarch.rpm</code> </pre> <br>  Turn off the repository for 8, turn on for 5.7 and check - if everything is ok, then install mysql: <br><br><pre> <code class="hljs sql">yum <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> yum-utils yum-config-manager <span class="hljs-comment"><span class="hljs-comment">--disable mysql80-community yum-config-manager --enable mysql57-community yum repolist yum install mysql-community-server mysql-shell</span></span></code> </pre> <br>  2. We give /etc/my.cnf to this form: <br><br><pre> <code class="hljs pgsql">[mysqld] datadir=/var/lib/mysql socket=/var/lib/mysql/mysql.sock symbolic-links=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">log</span></span>-error=/var/<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>/mysqld.<span class="hljs-keyword"><span class="hljs-keyword">log</span></span> pid-file=/var/run/mysqld/mysqld.pid bind-address=<span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> port=<span class="hljs-number"><span class="hljs-number">3301</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">Replication</span></span> part server_id=<span class="hljs-number"><span class="hljs-number">1</span></span> gtid_mode=<span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> enforce_gtid_consistency=<span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> master_info_repository=<span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> relay_log_info_repository=<span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> binlog_checksum=<span class="hljs-keyword"><span class="hljs-keyword">NONE</span></span> log_slave_updates=<span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> log_bin=binlog binlog_format=<span class="hljs-keyword"><span class="hljs-keyword">ROW</span></span> plugin-<span class="hljs-keyword"><span class="hljs-keyword">load</span></span> = group_replication.so # <span class="hljs-keyword"><span class="hljs-keyword">Group</span></span> <span class="hljs-keyword"><span class="hljs-keyword">replication</span></span> part transaction_write_set_extraction=XXHASH64 loose-group_replication_start_on_boot = <span class="hljs-keyword"><span class="hljs-keyword">OFF</span></span> loose-group_replication_local_address = <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>:<span class="hljs-number"><span class="hljs-number">33011</span></span> loose-group_replication_bootstrap_group = <span class="hljs-keyword"><span class="hljs-keyword">OFF</span></span> report_port = <span class="hljs-number"><span class="hljs-number">3301</span></span> report_host = <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span></code> </pre><br>  Here 3301 is the port on which mysql will listen, and 33011 is the port on which the nodes communicate with each other. <br><br>  3. Run mysql and pre-configure: <br><br><pre> <code class="hljs pgsql">systemctl <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> mysqld grep <span class="hljs-string"><span class="hljs-string">'password'</span></span> /var/<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>/mysqld.<span class="hljs-keyword"><span class="hljs-keyword">log</span></span> mysql_secure_installation</code> </pre> <br>  4. Well, create a cluster, as well as an individual user to manage it.  If you know in advance the ip-addresses of the nodes, then you can immediately list them in ipWhitelist.  Pretend that we do not yet know about 1.1.1.2.  and 1.1.1.3: <br><br><pre> <code class="hljs perl">mysqlsh &gt; \c <span class="hljs-number"><span class="hljs-number">127.0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> &gt; dba.configureLocalInstance(<span class="hljs-string"><span class="hljs-string">"127.0.0.1:3301"</span></span>, {mycnfPath: <span class="hljs-string"><span class="hljs-string">"/etc/my.cnf"</span></span>, clusterAdmin: <span class="hljs-string"><span class="hljs-string">"cladmin"</span></span>, clusterAdminPassword: <span class="hljs-string"><span class="hljs-string">"SomePassword!123"</span></span>}) &gt; \c cladmin@1.<span class="hljs-number"><span class="hljs-number">1.1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> &gt; dba.checkInstanceConfiguration() &gt; cl=dba.createCluster(<span class="hljs-string"><span class="hljs-string">'TestCluster'</span></span>, {ipWhitelist: <span class="hljs-string"><span class="hljs-string">'1.1.1.1'</span></span>}) &gt; dba.configureLocalInstance() &gt; cl.status()</code> </pre> <br>  Done!  cl.status should output something like this: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"clusterName"</span></span>: <span class="hljs-string"><span class="hljs-string">"TestCluster"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"defaultReplicaSet"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"primary"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ssl"</span></span>: <span class="hljs-string"><span class="hljs-string">"REQUIRED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"OK_NO_TOLERANCE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"statusText"</span></span>: <span class="hljs-string"><span class="hljs-string">"Cluster is NOT tolerant to any failures."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"topology"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"1.1.1.1:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/W"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> } } }, <span class="hljs-attr"><span class="hljs-attr">"groupInformationSourceMember"</span></span>: <span class="hljs-string"><span class="hljs-string">"mysql://cladmin@1.1.1.1:3301"</span></span> }</code> </pre><br>  When a cluster is changed, it will be necessary to execute the dba.configureLocalInstance () locally command on all nodes to save the changes: <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">WARNING</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">On</span></span> instance <span class="hljs-string"><span class="hljs-string">'1.1.1.1:3301'</span></span> membership change cannot be persisted since MySQL <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> <span class="hljs-number"><span class="hljs-number">5.7</span></span><span class="hljs-number"><span class="hljs-number">.23</span></span> does <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> support the <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> PERSIST command (MySQL <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> &gt;= <span class="hljs-number"><span class="hljs-number">8.0</span></span><span class="hljs-number"><span class="hljs-number">.11</span></span> required). Please use the &lt;Dba&gt;.configureLocalInstance command locally <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> persist the changes.</code> </pre> <br>  Since  we are going to add a couple more nodes, then we do not close the connection with the server 1.1.1.1, it will still be useful to us. <br><br>  Now we will try to add node 1.1.1.2 to the cluster.  To do this, we execute all the same commands on it up to 3 steps inclusive, not forgetting to change server_id, loose-group_replication_local_address and report_host. <br><br>  4. Perform on 1.1.1.2: <br><br><pre> <code class="hljs pgsql">mysql -p &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GLOBAL</span></span> group_replication_allow_local_disjoint_gtids_join=<span class="hljs-keyword"><span class="hljs-keyword">ON</span></span>;</code> </pre> <br>  I tried to set this variable through mysqlsh, switching to sql mode, but the actions there did not affect it in mysql.  Further: <br><br><pre> <code class="hljs swift">mysqlsh &gt; \<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-number"><span class="hljs-number">127.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.1</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> &gt; dba.configureLocalInstance(<span class="hljs-string"><span class="hljs-string">"127.0.0.1:3301"</span></span>, {mycnfPath: <span class="hljs-string"><span class="hljs-string">"/etc/my.cnf"</span></span>, clusterAdmin: <span class="hljs-string"><span class="hljs-string">"cladmin"</span></span>, clusterAdminPassword: <span class="hljs-string"><span class="hljs-string">"SomePassword!123"</span></span>}) &gt; \<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> cladmin@<span class="hljs-number"><span class="hljs-number">1.1</span></span>.<span class="hljs-number"><span class="hljs-number">1.2</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> &gt; dba.checkInstanceConfiguration()</code> </pre> <br><br>  5. Go back to the first node 1.1.1.1.  If you have closed the connection, you can quickly connect to the cluster as follows: <br><br><pre> <code class="hljs mel">mysqlsh --uri cladmin@1<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> --<span class="hljs-keyword"><span class="hljs-keyword">cluster</span></span> &gt; \sql &gt; STOP GROUP_REPLICATION; &gt; SET GLOBAL group_replication_ip_whitelist=<span class="hljs-string"><span class="hljs-string">"1.1.1.1,1.1.1.2"</span></span>; &gt; START GROUP_REPLICATION; &gt; \js &gt; <span class="hljs-keyword"><span class="hljs-keyword">cluster</span></span>.addInstance(<span class="hljs-string"><span class="hljs-string">'cladmin@1.1.1.2:3301'</span></span>, {ipWhitelist: <span class="hljs-string"><span class="hljs-string">'1.1.1.1,1.1.1.2'</span></span>}) &gt; <span class="hljs-keyword"><span class="hljs-keyword">cluster</span></span>.status()</code> </pre><br>  For some reason, when adding a node without the ipWhitelist option, it is not automatically transmitted to it, so we specify it manually. <br>  If your whitelist is initially configured for all nodes or subnets, then you can skip commands in sql mode. <br><br>  Do not forget to run dba.configureLocalInstance () on all nodes to save the configuration. <br><br>  It turned out a cluster of two nodes: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"clusterName"</span></span>: <span class="hljs-string"><span class="hljs-string">"TestCluster"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"defaultReplicaSet"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"primary"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ssl"</span></span>: <span class="hljs-string"><span class="hljs-string">"REQUIRED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"OK_NO_TOLERANCE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"statusText"</span></span>: <span class="hljs-string"><span class="hljs-string">"Cluster is NOT tolerant to any failures."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"topology"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"1.1.1.1:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/W"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"1.1.1.2:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.2:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/O"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> } } }, <span class="hljs-attr"><span class="hljs-attr">"groupInformationSourceMember"</span></span>: <span class="hljs-string"><span class="hljs-string">"mysql://cladmin@1.1.1.1:3301"</span></span> }</code> </pre><br>  Well, there is a cluster of two nodes, but in the "Cluster is NOT tolerant to any failures." <br>  Add a third algorithm in principle does not differ from adding a second one. <br><br>  If you need to change whitelist again, then you need to execute commands on the r / w node, since  on r / o nodes, this does not seem to lead to anything.  At the same time, the r / o nodes will fall off and they will need to be reconnected, simultaneously reporting a new whitelist. <br>  In our case: <br><br><pre> <code class="hljs pgsql">&gt; <span class="hljs-keyword"><span class="hljs-keyword">cluster</span></span>.rejoinInstance(<span class="hljs-string"><span class="hljs-string">'cladmin@1.1.1.2:3301'</span></span>, {ipWhitelist: <span class="hljs-string"><span class="hljs-string">'1.1.1.1,1.1.1.2,1.1.1.3'</span></span>})</code> </pre> <br>  Well, again, do not forget to run dba.configureLocalInstance () on all the nodes to save the configuration. <br><br>  A cluster of three nodes looks like this: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"clusterName"</span></span>: <span class="hljs-string"><span class="hljs-string">"TestCluster"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"defaultReplicaSet"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"primary"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ssl"</span></span>: <span class="hljs-string"><span class="hljs-string">"REQUIRED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"OK"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"statusText"</span></span>: <span class="hljs-string"><span class="hljs-string">"Cluster is ONLINE and can tolerate up to ONE failure."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"topology"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"1.1.1.1:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/W"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"1.1.1.2:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.2:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/O"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"1.1.1.3:3301"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.3:3301"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mode"</span></span>: <span class="hljs-string"><span class="hljs-string">"R/O"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"readReplicas"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"HA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ONLINE"</span></span> } } }, <span class="hljs-attr"><span class="hljs-attr">"groupInformationSourceMember"</span></span>: <span class="hljs-string"><span class="hljs-string">"mysql://cladmin@1.1.1.1:3301"</span></span> }</code> </pre><br>  If the cluster has collapsed to the state of one node, it will have to be started with the parameter loose-group_replication_bootstrap_group = ON in /etc/my.cnf <br>  After starting the parameter, it will be necessary to turn it off back, otherwise this node will always be separated from the cluster and maintain its own. <br><br>  The installation of mysql-router is well described <a href="https://habr.com/post/332518/">here</a> , so I don‚Äôt see a duplicate of meaning. <br><br>  Everything seems to be on this, I hope someone my experience will come in handy. <br><br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/423587/">https://habr.com/ru/post/423587/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../423575/index.html">Design standards in microelectronics: where are actually 7 nanometers in 7 nm technology?</a></li>
<li><a href="../423577/index.html">Creating a logical game for the gaming platform</a></li>
<li><a href="../423579/index.html">Cloud services for WebGL? No thanks</a></li>
<li><a href="../423583/index.html">Receive accidents through NotificationIRP in OSS</a></li>
<li><a href="../423585/index.html">LIVE: CI / CD in iOS and Android</a></li>
<li><a href="../423589/index.html">How we chose TTS for examples in the Dictionary</a></li>
<li><a href="../423591/index.html">Old songs about the main thing. Java and outgoing requests</a></li>
<li><a href="../423593/index.html">Google announces contest attacks on machine vision algorithms</a></li>
<li><a href="../423595/index.html">Anomaly Frango, Interchange</a></li>
<li><a href="../423597/index.html">How and what clusters can be allocated in the client base</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
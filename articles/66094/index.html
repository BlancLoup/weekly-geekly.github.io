<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How does the JetBrains MPS system allow you to achieve a wider use of DSLs (domain-specific languages)?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="DSL-i (domain specific languages ‚Äã‚Äãor languages ‚Äã‚Äãfor specific areas) programmers have known for a long time. Despite this, they are rarely used in re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How does the JetBrains MPS system allow you to achieve a wider use of DSLs (domain-specific languages)?</h1><div class="post__text post__text-html js-mediator-article">  DSL-i (domain specific languages ‚Äã‚Äãor languages ‚Äã‚Äãfor specific areas) programmers have known for a long time.  Despite this, they are rarely used in real systems.  This article will discuss what DSLs are and why they are not widely used.  It will also describe how the JetBrains MPS system solves problems that prevent their widespread use. <br><a name="habracut"></a><br><br>  So what is DSL?  DSL is a language designed to solve problems in a particular subject area.  DSLs are most declarative languages ‚Äã‚Äãthat solve problems in narrow subject areas.  For example, SQL, regular expressions, XPath, Prolog, formulas in Excel.  Unfortunately, this list of widely used DSL ends.  The main advantage of such languages ‚Äã‚Äãis that due to the proximity of their structures to the subject area, the code in these languages ‚Äã‚Äãis very clear and short.  Moreover, to edit the code in such languages, it is not necessary to be a programmer.  If a person understands the subject area, then he can easily write code in such languages ‚Äã‚Äãthanks to his knowledge. <br><br>  In theory, everything looks simple: we take the subject area, say, accounting, write the language and give it to the experts or use it ourselves for a more brief description of the subject area.  Unfortunately, this approach is not widespread.  Let's see why. <br>  Why DSL and not widely spread? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's look at the reasons why DSLs are not widely used.  The first reason is that the authors of such languages ‚Äã‚Äãfocus on closed languages ‚Äã‚Äãfor only one specific problem, instead of expanding existing general-purpose programming languages, such as Java, PHP, JavaScript.  There is a reason for this: the possibility of ambiguities when combining such extensions with each other.  Another reason is the difficulty of creating the language infrastructure necessary for the implementation of the language, and comfortable work with it. <br><br>  Most of the efforts in the DSL community are aimed at working with closed languages.  In many cases it would be more useful to add new constructions to existing languages, for example in Java.  Imagine that you can use language extensions, just like you are using libraries now.  With this approach, developers will be able to simultaneously use the expressive power of DSL and the universality of languages ‚Äã‚Äãlike Java, which is impossible with the use of existing technologies. <br><br>  When creating extensions, in order to use them in the same way as we currently use libraries, it is necessary to make languages ‚Äã‚Äãcompatible with each other.  This means that if we add one extension to our language, for example, money support: a type for money, literals like $ 10 or $ 100, and another extension that adds mathematical symbols to the language: sums, products, etc., then we can use them together, even if they were created by different authors. <br><br>  Unfortunately, all popular general-purpose programming languages ‚Äã‚Äãare based on text grammars.  These grammars have one unpleasant property: they can be ambiguous, they may have several interpretations of the same line.  Moreover, if we add new constructions to Java with the help of the extension A, and we achieve the uniqueness of the grammar, and then we do the same with the extension B, it may turn out that if we take Java and both extensions, the resulting grammar will be ambiguous. <br><br>  Let's take an example.  Let's say 2 companies decided to add support for string interpolation (string interpolation allows you to write expressions inside string literals) in Java.  Suppose the first company uses the following syntax: <br>  "{2 + 3}" <br>  And the second one is: <br>  "$ {2 + 3}" <br>  If we use both extensions at the same time, and introduce such a program: <br>  "Account balance is $ {account.getBalance ()}" <br>  its interpretation is ambiguous.  Is $ part of the interpolation syntax, or part of a string literal?  The example is somewhat artificial, but it allows us to understand the general problem of ambiguity that arises when there is a similar syntax for different constructions. <br><br>  To achieve high developer productivity, intelligent development tools are needed.  With the advent of intelligent editors, such as in IntelliJ IDEA or Eclipse, it can be difficult for developers to switch to editing text in regular editors.  Text editors do not highlight errors, do not provide context-sensitive help, do not show menus with available options, they do not support refactorings.  There are frameworks for creating intelligent editors, for example, IntelliJ IDEA Language API, XText, Oslo, but none of these frameworks support extensible languages ‚Äã‚Äãat the proper level.  Even if we do not need extensibility, building language support using these tools requires good knowledge of programming languages ‚Äã‚Äãand takes a lot of time.  Apparently, instrumental support is very important, but it is not easy to implement. <br><br>  Let's summarize: people are doing the wrong type of DSL;  to achieve increased productivity, it is necessary to extend existing programming languages ‚Äã‚Äãof general purpose.  It is difficult to create such extensions due to the fact that widespread technologies do not support the compatibility of extensions with each other. <br>  How JetBrains MPS solves these problems <br><br>  Let's now look at how MPS solves these problems.  In order to maintain compatibility of extensions with each other, MPS does not work with programs as with text.  Instead, MPS stores them as a syntax tree, and editing is done directly, without intermediate use of the text.  This approach allows you to significantly simplify the creation of IDE, since the constant presence of the syntax tree makes it easy to implement error highlighting, automatic addition, contextual prompts and so on. <br><br>  MPS solves the problem of ambiguity in a radical way: if we do not have text grammar, then we do not have ambiguity.  Such an approach, however, does not mean that grammars are not used in MPS.  Instead of a specific syntax, the abstract syntax (syntax tree structure) is defined in the language definition in MPS.  If you are familiar with XML, you probably know about XML Schema, which resembles the syntax used in MPS. <br><br>  Since this approach does not allow ambiguities, languages ‚Äã‚Äãcan easily be combined with each other.  You can extend the syntax of the language with new constructions.  You can insert a code in one language inside a code in another language, or even insert a code in a general-purpose programming language inside a relatively closed DSL-i.  This means that languages ‚Äã‚Äãare compatible with each other, and this makes it possible to reuse languages ‚Äã‚Äãand their parts, which is possible with big problems in the case of traditional technologies.  We at JetBrains have experimented a lot with such reuse.  The MPS distribution includes a large number of Java extensions: <br><ul><li>  collections language, which makes it easier to work with collections </li><li>  dates language that adds date support directly to java </li><li>  math language, which allows you to write sums, works, and so forth mathematically constructions </li></ul><br>  Most languages ‚Äã‚Äãthat we use to define languages ‚Äã‚Äãsimultaneously extend and contain Java.  For example, one of the language constructs for type systems, the output rule, looks like a regular DSL.  However, inside this rule, you can write in Java, extended constructs specific to type systems. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fb5/5d4/fb5/fb55d4fb5a83fb487e3f4e3fcf8cacdf.png"><br><br>  Since we got rid of the text view, we cannot use a plain text editor.  To work with the code, we use a special projection editor.  For each node of the syntactic tree, it creates a projection - a part of the screen with which the user can interact.  During the development of MPS, great efforts were made to ensure that such an editor behaved as close to the test editor as possible.  For example, if you enter 1 + 2 + 3 in MPS, you will also receive a syntax tree, which would be obtained when parsing this line in Java.  Of course, the projection editor is different from the text editor, and there are things that are possible in one and impossible in the other, and vice versa.  Despite this, you can get used to these differences without losing performance.  In our experience, it takes about 2 weeks to become productive in a projection editor. <br><br>  Creating support for intelligent editing when working with a syntax tree is greatly simplified directly.  Moreover, in many places, intellectual possibilities are provided by MPS IDE without any efforts from the author of the language.  Features such as automatic addition, search for uses, rename, work automatically.  When developing IntelliJ IDEA, intelligent editing support was implemented for many languages.  The implementation of such support required a lot of effort: several people per month.  With MPS, similar capabilities can be realized in a matter of days.  This is possible because special languages ‚Äã‚Äãare used to develop languages ‚Äã‚Äãthat configure the existing language infrastructure.  MPS is not just an editor.  You can create a full IDE with it. <br><br>  Inside JetBrains, we use MPS to develop commercial projects.  Our new error tracking system, codenamed Charisma, is created entirely on the MPS, and this is just the beginning. <br>  Conclusion <br><br>  Widespread use of DSL is hampered by two problems: the impossibility of their reuse in systems based on text grammars, and the difficulty of creating intelligent tools for working with them.  MPS solves both of these problems by working with the syntax tree directly, without an intermediate textual representation, and providing the infrastructure for creating intelligent tools for working with such languages. <br><br>  MPS 1.0 was released in July.  Most of the code is available under the Apache 2.0 license (with the exception of the JetBreains IDE Framework, the license of which allows the use of MPS in MPS-based products without buying any licenses from JetBrains). <br><br>  You can download the MPS from here: <a href="http://www.jetbrains.com/mps">www.jetbrains.com/mps</a> and start creating languages ‚Äã‚Äãright today. <br><br>  PS We are looking for a senior developer in the project.  Details in the vacancy in my profile. </div><p>Source: <a href="https://habr.com/ru/post/66094/">https://habr.com/ru/post/66094/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../66083/index.html">"Credit hackers": the method of bank manipulation</a></li>
<li><a href="../66086/index.html">Protected means armed: what is dangerous about Wi-Fi?</a></li>
<li><a href="../66088/index.html">Primordially Russian parable (excerpt from Dostoevsky's ‚ÄúTeenager‚Äù)</a></li>
<li><a href="../66090/index.html">Dugin about LiveJournal</a></li>
<li><a href="../66093/index.html">Government sites security</a></li>
<li><a href="../66095/index.html">We clean the body with Google</a></li>
<li><a href="../66097/index.html">Joomla! Development line 1.0 terminated. Officially</a></li>
<li><a href="../66099/index.html">Making a beautiful list with GroupingStore / View and ExtJS</a></li>
<li><a href="../66103/index.html">Eric Schmidt leaves Apple's board of directors</a></li>
<li><a href="../66105/index.html">IMHO VI is betting on video advertising with Tvigle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
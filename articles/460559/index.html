<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ten Commandments React Components</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Written by Kristofer Selbekk , in collaboration with Caroline Odden . Based on a lecture with the same name and with the same people, held at the Reac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ten Commandments React Components</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/getpro/habr/post_images/adf/1cf/5da/adf1cf5da0c04102046e8b6e8c12322e.jpg" alt="the-10-component-commandments"></p><br><blockquote>  Written by <a href="https://twitter.com/selbekk">Kristofer Selbekk</a> , in collaboration with <a href="https://twitter.com/caroline_odden">Caroline Odden</a> .  Based on a lecture with the same name and with the same people, held at the ReactJS meeting in Oslo in June 2019. </blockquote><p>  <em>From the translator - the original title of <strong>The 10 Component Commandments</strong> does not mention React, but most of the examples and recommendations refer specifically to the reactor, besides the article is posted under the react tag and written by the developers</em> . </p><br><p>  It is not easy to create components that will be used by many developers.  You have to think very carefully about which props to use if these props are part of a public API. </p><br><p>  In this article we will give a brief introduction to some of the best practices in the development of the API as a whole, as well as form <strong>ten useful commandments</strong> that you can use to create components that your fellow developers will be happy to use. </p><a name="habracut"></a><br><p><img src="https://habrastorage.org/getpro/habr/post_images/eb9/35b/750/eb935b750f7a08ad9116ecd5a115f81e.jpg" alt="api"></p><br><h2 id="chto-takoe-api">  What is an API? </h2><br><p>  API - or application programming interface - a place where there are two pieces of code.  This is the contact surface between <em>your code</em> and the rest of the world.  We call this surface interface.  This is a specific set of actions or data points that you can interact with. </p><br><p>  The interface between the class and the code that calls this class is the same API.  You can call class methods to get data or run functions contained in it. </p><br><p>  Following the same principle, the <strong>props that your component accepts are its API</strong> .  This is the way developers interact with your component. </p><br><h2 id="nekotorye-luchshie-praktiki-proektirovaniya-api">  Some of the best API design practices </h2><br><p>  So, what rules and considerations apply when developing an API?  Well, we did a little research and it turned out that there are many excellent resources on this topic.  We chose two - <a href="https://joshdata.wordpress.com/">Josh Tauberer</a> - <a href="https://joshdata.wordpress.com/2014/02/10/what-makes-a-good-api/">"What makes a good API?"</a>  and the article of <a href="https://medium.com/%40rkuris/good-apis-cd861b8b70a3">Ron Kurir with the same title</a> - and came to these four practices. </p><br><h3 id="stabilnye-versii">  Stable versions </h3><br><p>  One of the most important things to consider when creating an API is to keep it as stable as possible.  The number of critical changes should be minimal.  If you have to make critical changes, be sure to write detailed upgrade guides and, if possible, write a code mod that automates this process for developers. </p><br><h3 id="opisatelnye-soobscheniya-ob-oshibkah">  Descriptive Error Messages </h3><br><p>  Whenever an error occurs when calling your API, you need to do everything possible to explain what went wrong and how to fix it.  If you scold the user with messages like "misuse" and do not give any explanation, your API will leave a bad impression. </p><br><p>  Instead, write descriptive errors that will help the user to correct how they use your API. </p><br><h3 id="minimizirovat-syurprizy-dlya-razrabotchikov">  Minimize developer surprises </h3><br><p>  Developers are fragile creatures, and you shouldn't scare them when they use your API.  In other words - make your API as intuitive as possible.  You will achieve this if you follow best practices and existing naming conventions. </p><br><p> Also, your code should always be consistent.  If you use logical property names with <code>is</code> or <code>has</code> in one place, but skip them further, it will confuse people. </p><br><h3 id="minimizirovat-poverhnost-api">  Minimize API surface </h3><br><p>  Your API should also be minimized.  A lot of opportunities are great, but the smaller the surface of your API (API surface), the less developers will have to learn it in order to start working productively with it.  Thanks to this, your API will be perceived as easy to use! </p><br><p>  There is always a way to control the size of your API.  One of them is the refactoring of the new API from the old one. </p><br><h2 id="desyat-zapovedey-dlya-veb-komponentov">  Ten Commandments for Web Components </h2><br><p><img src="https://habrastorage.org/getpro/habr/post_images/15e/2c7/33c/15e2c733cf1d3b5e5916c17692a6df5a.jpg" alt="The 10 Component Commandments"></p><br><p>  So, these four golden rules work well for the REST API and for the old procedural procedural pieces on Pascal - but how to transfer them to the modern world of React? </p><br><p>  As we said earlier, components have their own API.  We call them <code>props</code> , and it is through them that the data is transferred to the components.  How do we structure the props so as not to violate any of the above rules? </p><br><p>  We have created this list of <strong>ten golden rules</strong> that are best followed when creating your components.  We hope that they will be useful to you. </p><br><h3 id="1-dokumentiruyte-ispolzovanie-komponentov">  1. Document the use of components. </h3><br><p>  If the way your component is to be used is not documented, then this component is useless.  Well, almost useless, you can always look at its implementation, but few people like to do it. </p><br><p>  There are many ways to document your components, but we recommend paying attention to these three: </p><br><ul><li>  <a href="https://storybook.js.org/">Storybook</a> </li><li>  <a href="https://react-styleguidist.js.org/">Styleguidist</a> </li><li>  <a href="https://www.docz.site/">Docz</a> </li></ul><br><p>  The first two give you a platform to work on when developing your components, and the third allows you to write free-form documentation using <a href="https://mdxjs.com/">MDX</a> </p><br><p>  No matter what you choose, always document both the API itself and <strong>how your components should be used</strong> .  The last part is crucial in general-purpose libraries ‚Äî so that people use the button or layout grid correctly in a given context. </p><br><h3 id="2-razreshite-kontekstnuyu-semantiku">  2. Allow contextual semantics </h3><br><p>  HTML is a language for structuring information in a semantic way.  Only here the majority of our components consists of <code>&lt;div /&gt;</code> tags.  It makes sense - universal components cannot know in advance what they will be, <code>&lt;article /&gt;</code> , or <code>&lt;section /&gt;</code> , or <code>&lt;aside /&gt;</code> , but this situation is far from ideal. </p><br><p>  There is another option, just let your components take prop <code>as</code> , and thereby determine which element of the DOM will be rendered.  Here is an example of how this can be implemented: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Grid</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ as: Element, ...props }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Element</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"grid"</span></span></span></span><span class="xml"><span class="hljs-tag"> {</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...props</span></span></span></span><span class="xml"><span class="hljs-tag">} /&gt;</span></span></span><span class="xml"> } Grid.defaultProps = { as: 'div', };</span></span></code> </pre> <br><p>  We rename the <code>as</code> as variable to the <code>Element</code> variable and use it in our JSX.  We give the default total <code>div</code> if we don't have a more semantic HTML tag to pass. </p><br><p>  When it comes time to use the <code>&lt;Grid /&gt;</code> component, you can simply pass the correct tag: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">App</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"main"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">MoreContent</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }</code> </pre> <br><p>  This also works with React components.  For example, if you want the <code>&lt;Button /&gt;</code> component to render the React Router <code>&lt;Link /&gt;</code> : </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{Link}</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/profile"</span></span></span><span class="hljs-tag">&gt;</span></span> Go to Profile <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h3 id="3-izbegayte-logicheskih-boolean-propsov">  3. Avoid logical (boolean) props. </h3><br><p>  Logical predictions are a good idea.  They can be used without value, so it looks very elegant: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">large</span></span></span><span class="hljs-tag">&gt;</span></span>BUY NOW!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  But even though it looks pretty, logical properties allow only two possibilities.  On or off  Visible or hidden.  1 or 0. </p><br><p>  Whenever you start to enter logical properties for things like size, options, colors, or something that can be anything other than a binary choice, you have problems. </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">large</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">small</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">primary</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">secondary</span></span></span><span class="hljs-tag">&gt;</span></span>   ?? <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  In other words, logical properties often do not scale with changing requirements.  Instead, for values ‚Äã‚Äãthat may become something other than a binary choice, it‚Äôs better to use enumerated values, such as strings. </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">variant</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"primary"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">size</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"large"</span></span></span><span class="hljs-tag">&gt;</span></span>     <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  This does not mean that logical properties cannot be used at all.  Can!  The prop <code>disabled</code> , which I listed above, still has to be logical - because there is no average state between on and off.  Just leave the logical properties only for a truly binary choice. </p><br><h3 id="4-ispolzuyte-propschildren">  4. Use <code>props.children</code> </h3><br><p>  React has several special properties that are not considered as others.  One such <code>key</code> needed to keep track of the order of the list items.  And one more such special prop is <code>children</code> . </p><br><p>  Everything that you put between the opening and closing tags of a component is placed inside the <code>props.children</code> .  And you should use this as often as possible. </p><br><p>  Why?  Because it's much easier than having <code>content</code> prop for content or something like that, which usually takes only simple values, such as text. </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TableCell</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Some text"</span></span></span><span class="hljs-tag"> /&gt;</span></span> //  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TableCell</span></span></span><span class="hljs-tag">&gt;</span></span>Some text<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TableCell</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  There are several advantages to using <code>props.children</code> .  First of all, this is similar to how plain HTML works.  Secondly, you can freely transfer whatever you want!  Instead of adding props like <code>leftIcon</code> and <code>rightIcon</code> to your component, just pass them as part of the <code>props.children</code> : </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TableCell</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ImportantIcon</span></span></span><span class="hljs-tag"> /&gt;</span></span> Some text <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TableCell</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  You can argue that your component only needs to render plain text, and in some cases it is.  Up to a point.  Using the same <code>props.children</code> , you guarantee that your API will be ready for changing requirements. </p><br><h3 id="5-pozvolte-roditelyu-ceplyatsya-za-vnutrennyuyu-logiku">  5. Allow parent to cling to internal logic. </h3><br><p>  Sometimes we create components with a lot of internal logic and states - for example, autocomplete or interactive diagrams. </p><br><p>  Such components often suffer from excessive APIs, one of the reasons for this is the large number of different use cases that accumulate with the development of the project. </p><br><p>  But what if we could just provide a single, standardized prop that would allow a developer to control, respond to, or just change the default behavior of a component? </p><br><p>  Kent Dodds wrote an excellent article on the concept of state reducers.  <a href="https://kentcdodds.com/blog/the-state-reducer-pattern">Here is an article about the concept itself</a> , and also, here is an article about how to <a href="https://kentcdodds.com/blog/the-state-reducer-pattern-with-react-hooks">implement this for React hooks</a> . </p><br><p>  In short, this is the state redundancy feature transfer pattern to your component, which will allow the developer to access all the actions performed inside your component.  You can change the state or even cause side effects.  This is a great way to provide a <strong>high level of customization, without any props</strong> . </p><br><p>  Here is what it might look like: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyCustomDropdown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> stateReducer = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action.type === Dropdown.actions.CLOSE) { buttonRef.current.focus(); } }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;&gt; &lt;Dropdown stateReducer={stateReducer} {...props} /&gt; &lt;Button ref={buttonRef}&gt;Open&lt;/Button&gt; &lt;/&gt; }</code> </pre> <br><p>  By the way, you can create easier ways to respond to events.  Using the <code>onClose</code> in the previous example is likely to make using the component more convenient.  Use the "state reducer" pattern when you need it. </p><br><h3 id="6-ispolzuyte-operator-troetochie-spread-dlya-ostavshihsya-propsov">  6. Use the operator ellipsis (spread) for the remaining props </h3><br><p>  Every time you create a new component - make sure that you apply a three-dot to the remaining props and send them to the element for which this makes sense. </p><br><p>  You do not need to continue adding props to your component, which will simply be transferred to the base component or element.  This will make your API more stable, eliminating the need for many minor version errors when the next developer needs a new event listener or ARIA tag. </p><br><p>  You can do it like this: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToolTip</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ isVisible, ...rest }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isVisible ? <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"tooltip"</span></span></span></span><span class="xml"><span class="hljs-tag"> {</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...rest</span></span></span></span><span class="xml"><span class="hljs-tag">} /&gt;</span></span></span><span class="xml"> : null; }</span></span></code> </pre> <br><p>  Whenever your component passes a prop to your implementation, such as the class name or <code>onClick</code> handler, make sure that another developer can do the same.  In the case of a class, you can simply add a prop class using the convenient <a href="https://www.npmjs.com/package/classnames">npm classnames library</a> (or simply by concatenating strings): </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> classNames <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'classnames'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToolTip</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag"> {</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...props</span></span></span></span><span class="xml"><span class="hljs-tag">} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{classNames(</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">tooltip</span></span></span></span><span class="xml"><span class="hljs-tag">', </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">props.tooltip</span></span></span></span><span class="xml"><span class="hljs-tag">)} /&gt;</span></span></span><span class="xml"> }</span></span></code> </pre> <br><p>  In the case of click handlers and with other callbacks, you can combine them into one function with a small utility.  Here is one way to do this: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">combine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">...functions</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">...args</span></span></span><span class="hljs-function">) =&gt;</span></span> functions .filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">func</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> func === <span class="hljs-string"><span class="hljs-string">'function'</span></span>) .forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">func</span></span></span><span class="hljs-function"> =&gt;</span></span> func(...args)); }</code> </pre> <br><p>  Here we create a function that takes a list of functions to combine them.  It returns a new callback that calls them all in turn with the same arguments. </p><br><p>  This function can be used in this way: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToolTip</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [isVisible, setVisible] = React.useState(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;span {...props} className={classNames(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'tooltip'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, props.className</span></span></span><span class="hljs-function">)} </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onMouseIn</span></span></span><span class="hljs-function">={</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">combine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span class="hljs-function">) =&gt;</span></span> setVisible(<span class="hljs-literal"><span class="hljs-literal">true</span></span>), props.onMouseIn)} onMouseOut={combine(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> setVisible(<span class="hljs-literal"><span class="hljs-literal">false</span></span>), props.onMouseOut)} /&gt; ); }</code> </pre> <br><h3 id="7-ispolzuyte-znacheniya-po-umolchaniyu">  7. Use default values. </h3><br><p>  Make sure you give enough defaults for your props.  Thus, you will reduce the number of required props.  This will greatly simplify your API. </p><br><p>  Take, for example, the <code>onClick</code> handler.  If your code does not need this handler, use the empty function (noop-function) as the default prop.  This way you can call it in your code as if it were always transmitted. </p><br><p>  Another example might be for user input.  Suppose that the input string is an empty string, unless otherwise specified.  This will allow you to make sure that you are always dealing with a string object, and not with something vague or null. </p><br><h3 id="8-ne-nado-pereimenovyvat-atributy-html">  8. No need to rename HTML attributes </h3><br><p>  HTML as a language has its own props - or attributes, and it itself is an API interface for HTML elements.  So why not continue to use this API? </p><br><p>  As we mentioned earlier, minimizing the API surface (API surface) and its intuitiveness are useful methods for improving the API of your components.  So instead of creating your own <code>screenReaderLabel</code> prop, why not just use an existing <code>aria-label</code> ? </p><br><p>  <strong>Stay away from renaming any existing HTML attributes</strong> for your own "ease of use."  You do not even replace the existing API - you just add your own on top of it.  People can still pass <code>aria-label</code> along with your screenReaderLabel <code>screenReaderLabel</code> - and then what should be the final value? </p><br><p>  Also, make sure that you never override the HTML attributes in your components.  A great example is the <code>type</code> attribute of the <code>&lt;button /&gt;</code> element.  This can be <code>submit</code> (default), <code>button</code> or <code>reset</code> .  However, many developers override this prop to indicate the visual type of the button ( <code>primary</code> , <code>cta</code> , etc.). </p><br><p>  If you use such a prop, you must add an override for this <code>type</code> attribute.  This will lead to confusion, doubt and irritation on the part of the developers. </p><br><p>  Believe me - I made this mistake again and again - if you make it, then you have to clear it up for a long time. </p><br><h3 id="9-pishite-tipy-propsov-ili-prosto-tipy">  9. Write types of props (or just types) </h3><br><p>  No documentation will be as good as the documentation that lives inside your code.  React comes with a great way to declare your API components using the <code>prop-types</code> package.  Use it. </p><br><p>  You can specify any requirements for the format of your mandatory and optional props, besides, you can improve them with the help of <a href="https://devhints.io/jsdoc">JSDoc comments</a> . </p><br><p>  If you do not specify a required proc or pass an invalid or unexpected value, you will receive a warning in the console at runtime.  This is very helpful during development, and can be removed from production. </p><br><p>  If you write your React applications in TypeScript or with Flow, you get API documentation in the form of a language function.  This further increases support from the development tools and simplifies the work. </p><br><p>  If you do not use typed javascript yourself, you should still think about providing type definitions to developers who use it.  Then it will be much easier for them to use your components. </p><br><h3 id="10-proektiruyte-dlya-razrabotchikov">  10. Design for developers </h3><br><p>  Finally, the most important rule to follow.  Make sure that your API and work with your components are optimized for developers who will use it. </p><br><p>  One way to simplify a developer‚Äôs work is to give him inappropriate feedback.  Do this with error messages (errors), and also, but only during the development itself, with warnings (warnings) that there are better ways to use your component. </p><br><p>  When writing errors and warnings, give links to your documentation or show simple code examples.  The faster the developer understands what the problem is and how to fix it, the more comfortable your component will be to work with. </p><br><p>  Incredibly, as it turned out, the presence of all these long error warnings does not affect the size of the final package.  Thanks to the wonders of eliminating dead code, all this text and error code can be removed during assembly into production. </p><br><p>  One of the libraries that gives feedback is incredibly good is React itself.  It doesn't matter if you forgot to specify a key for the list items or incorrectly wrote the life cycle method, or maybe you forgot to extend the base class or called the hook in an indefinite way - in any case, you will get big fat error messages in the console.  Why should developers who use your components expect anything less from you? </p><br><p>  So design for your future users.  Design for yourself from the future.  Design for the unfortunate who will have to maintain your code when you are gone!  Design for developers. </p><br><h3 id="itogo">  Total </h3><br><p>  We can learn a lot from the classic API approach.  Following the tips, tricks, rules and commandments of this article, you can create components that are easy to use, easy to maintain, intuitive and, if necessary, very flexible. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/460559/">https://habr.com/ru/post/460559/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../460543/index.html">New certifications for developers from Cisco. Industry Certification Overview</a></li>
<li><a href="../460547/index.html">Antiquities: Psion 5MX and retired life</a></li>
<li><a href="../46055/index.html">Legal issue.</a></li>
<li><a href="../460551/index.html">Portugal. Best beaches and thousands of startups per year</a></li>
<li><a href="../460557/index.html">Selection of working data processing examples</a></li>
<li><a href="../460561/index.html">How to develop another platformer using Unity. Another tutorial, part 2</a></li>
<li><a href="../460567/index.html">React Native: make a draggable & swipeable list</a></li>
<li><a href="../460569/index.html">Writing software with the functionality of client-server utilities Windows, part 01</a></li>
<li><a href="../46057/index.html">What are you psychologically comfortable to enter as a login</a></li>
<li><a href="../460573/index.html">Google claims that ‚ÄúreCAPTCHA‚Äù does not abuse user data. Should I believe it?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
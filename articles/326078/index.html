<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MASM, TASM, FASM, NASM for Windows and Linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part I 
 Part II 
 Part III 

 In this article, I want to consider issues that may arise in a person who has begun to learn assembly language, related...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MASM, TASM, FASM, NASM for Windows and Linux</h1><div class="post__text post__text-html js-mediator-article">  <a href="https://habr.com/post/326078/">Part I</a> <br>  <a href="https://habr.com/post/423121/">Part II</a> <br>  <a href="https://habr.com/post/426649/">Part III</a> <br><br>  In this article, I want to consider issues that may arise in a person who has begun to learn assembly language, related to installing various translators and translating programs under Windows and Linux, and also provide links to resources and books devoted to the study of this topic. <br><br><h3>  MASM </h3><br>  Used to create drivers for Windows. <br><a name="habracut"></a><br>  Click on the <a href="http://www.masm32.com/">link</a> to the site and download the package (masm32v11r.zip).  After installing the program, a folder with our C: \ masm32 package is created on the disk.  Create the program prog11.asm, which does nothing. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs pgsql"><span class="hljs-number"><span class="hljs-number">.586</span></span>P .model flat, stdcall _data segment _data ends _text segment <span class="hljs-keyword"><span class="hljs-keyword">start</span></span>: ret _text ends <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">start</span></span></code> </pre> <br>  Perform the assembly (translation) of the prog11.asm file using assembler from the <a href="http://www.masm32.com/">masm32</a> site. <br><br><img src="http://i.piccy.info/i9/3447e4769370a64d647e7ffd60cc6538/1489343392/3807/1127701/im2.png" alt="image"><br>  The / coff key is used here for translating 32-bit programs. <br>  Linking is performed by the <i>link / subsystem: windows prog11.obj command</i> ( <i>link / subsystem: console prog11.obj</i> ) <br><br>  As <a href="https://ru.wikipedia.org/wiki/MASM">stated</a> on Wikipedia <blockquote>  MASM is one of the few Microsoft development tools for which there were no separate 16-bit and 32-bit versions. </blockquote><br><br>  Also assembler version 6. you can take on the site of Kip Irvin <a href="http://kipirvine.com/asm/">kipirvine.com/asm</a> , the author of the book "Assembly Language for Intel Processors". <br><br>  By the way, here is a <a href="http://asm.shadrinsk.net/">link</a> to the personal site of Vladislav Pirogov, the author of the book ‚ÄúAssembler for Windows‚Äù. <br><br>  <b>MASM from Microsoft</b> <br><br>  Next, download MASM (version 8.0) from the Microsoft website <a href="https://www.microsoft.com/en-us/download/details.aspx%253Fid%253D12654">by the link</a> .  The downloaded file is called ‚ÄúMASMsetup.exe‚Äù.  When you run this file, we get the message - "Microsoft Visual C ++ Express Edition 2005 required". <br><br>  Open this file with the archiver (for example 7zip).  Inside we see the file setup.exe, extract it, open it with the archiver.  Inside we see two files vc_masm.msi, vc_masm1.cab.  Extract the file vc_masm1.cab, open the archiver.  Inside we see the file FL_ml_exe _____ X86.3643236F_FC70_11D3_A536_0090278A1BB8.  We rename it to the fl_ml.exe file, then we will assemble the prog11.asm file using the assembler fl_ml.exe. <br><br><img src="http://i.piccy.info/i9/e0d88ff039a13be80f6c84c334456551/1489343664/3726/1127701/im3.png" alt="image"><br><br>  <b>MASM in Visual Studio</b> <br><br>  Also MASM can be found in the folder with Visual Studio (I have VS 10) here: C: \ Program Files \ Microsoft Visual Studio 10.0 \ VC \ bin \ ml.exe. <br><br><img src="http://i.piccy.info/i9/13283ffdd262a42eb03e24ed6b27af6b/1489344091/5100/1127701/im4.png" alt="image"><br><br>  In order to run on a 32-bit or 64-bit system and create programs that work under both 32-bit and 64-bit Windows, MASM32 (ml.exe, fl_ml.exe) is suitable.  In order to work on 32-bit and 64-bit systems and create programs that run under 64-bit Windows, but those that don't work under 32-bit need assembler ml64.exe.  It lies in the folder C: \ Program Files \ Microsoft Visual Studio 10.0 \ VC \ bin \ amd64 and right here - C: \ Program Files \ Microsoft Visual Studio 10.0 \ VC \ bin \ x86_amd64. <br><br><h3>  TASM </h3><br>  Borland's software package for developing assembly language programs for the x86 architecture.  Borland has now stopped distributing its assembler. <br><br>  You can download, for example, <a href="http://stilus-doctus.narod.ru/tasm/tasm_2.html">here</a> .  There is no installer, just extract the program.  Here is the source from the book by Peter Abel (Fig. 3.2) "Assembly Language for the IBM PC and programming." <br><br><pre> <code class="hljs pgsql">stacksg segment para stack <span class="hljs-string"><span class="hljs-string">'stack'</span></span> db <span class="hljs-number"><span class="hljs-number">12</span></span> dup (<span class="hljs-string"><span class="hljs-string">'stackseg'</span></span>) stacksg ends codesg segment para <span class="hljs-string"><span class="hljs-string">'code'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> proc far assume ss:stacksg,cs:codesg,ds:<span class="hljs-keyword"><span class="hljs-keyword">nothing</span></span> push ds sub ax,ax push ax mov ax, <span class="hljs-number"><span class="hljs-number">0123</span></span>h <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> ax, <span class="hljs-number"><span class="hljs-number">0025</span></span>h mov bx,ax <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> bx,ax mov cx,bx sub cx,ax sub ax,ax nop ret <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> endp codesg ends <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span></code> </pre><br>  Perform the assembly (translation) of the file abel32.asm. <br><br><img src="http://i.piccy.info/i9/ed2c0f090b98e4452fda09d4fe6aa7b5/1489344277/13530/1127701/im5.png" alt="image"><br><br>  The correctness of the program can be checked by linking (tlink.exe) the object file and running the resulting file in the debugger. <br><br>  As mentioned above, MASM can be used to work with 16-bit programs.  Perform assembly (translation) of the program abel32.asm using MASM assembler: <br><br><img src="http://i.piccy.info/i9/cdeffae9a2c94f670a400f909a73543c/1489344570/9942/1127701/im6.png" alt="image"><br><br>  The <i>/ coff key</i> is not used here. <br>  Linking is performed by the file <i>link16.exe</i> <br><br><h3>  Fasm </h3><br>  In the article by Chris Kaspersky ‚ÄúComparison of assembler translators‚Äù it is written that ‚ÄúFASM is an extraordinary and very original, but alas, toy assembler.  Suitable for small tasks like ‚Äûhello, world‚Äú, viruses, demos and other works of hacker creativity. " <br><br>  Download FASM from the official <a href="http://flatassembler.net/">site</a> .  There is no installer, just extract the program.  Open the fasm editor - C: \ fasm \ fasmw.exe.  In the folder C: \ fasm \ EXAMPLES \ HELLO there is a file HELLO.asm. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">include</span></span> <span class="hljs-string"><span class="hljs-string">'win32ax.inc'</span></span> .code <span class="hljs-keyword"><span class="hljs-keyword">start</span></span>: invoke MessageBox,HWND_DESKTOP,"Hi! I'm the example program!",invoke GetCommandLine,MB_OK invoke ExitProcess,<span class="hljs-number"><span class="hljs-number">0</span></span> .<span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">start</span></span></code> </pre><br>  Open the file HELLO.asm from fasmw.exe.  Change the line include 'win32ax.inc' to the line include 'c: \ fasm \ INCLUDE \ WIN32AX.INC'.  Run from the menu Run ‚Üí Run. <br><br><img src="http://i.piccy.info/i9/06ec5198460df6dada853637b87a5d45/1489344712/36377/1127701/im7.png" alt="image"><br><br>  Here are links to resources dedicated to FASM: <br><br>  ‚Üí <a href="http://www.cyberforum.ru/fasm/">FASM on Cyberforum</a> <br>  ‚Üí <a href="http://asmworld.ru/uchebnik">FASM on asmworld</a> .com programs under Dos <br>  ‚Üí <a href="http://www.nestor.minsk.by/kg/abc/087.html">Series of articles "Assembler under Windows for Dummies"</a> <br>  ‚Üí <a href="http://flatassembler.narod.ru/fasm.htm">Site on narod</a> <br><br>  <b>FASM in Linux</b> <br><br>  In order to use FASM in Linux (I have Ubuntu), download the appropriate distribution (fasm-1.71.60.tgz), unpack it, we will have a fasm binary file in the folder, copy this file to / usr / local / bin for , so that you can run it from the console, like any other command. Let's execute assembly of the hello.asm program from the fasm / examples / elfexe / hello.asm folder. <br><br><img src="http://i.piccy.info/i9/126259e8cc56a9618db9a4f3b6e9d4fb/1489344864/8146/1127701/im8.png" alt="image"><br><br>  The correctness of the program can be checked in the debugger. <br><br><h3>  Nasm </h3><br>  Nasm successfully competes with Gas's standard assembler in Linux and many other UNIX systems. <br><br>  Nasm in Linux can be installed using the package manager or from the command line: in the <i>Debian (Ubuntu)</i> distribution using the <i>apt-get install nasm command</i> , in the <i>Fedora</i> , <i>CentOS</i> , <i>RedHat</i> distributions <i>using the yum install nasm distribution</i> . <br><br>  Create a program that displays the message ‚ÄúHello‚Äù 5 times.  An example is taken from Andrei Viktorovich Stolyarov‚Äôs book ‚ÄúProgramming in NASM assembler language for UNIX OS‚Äù.  The textbook, as well as the library ‚Äústud_io.inc‚Äù is on <a href="http://www.stolyarov.info/books/asm_unix">the author‚Äôs personal website</a> . <br><br><pre> <code class="hljs pgsql">%<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> "stud_io.inc" <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> _start section .text _start: mov eax, <span class="hljs-number"><span class="hljs-number">0</span></span> again: PRINT "Hello" PUTCHAR <span class="hljs-number"><span class="hljs-number">10</span></span> inc eax cmp eax, <span class="hljs-number"><span class="hljs-number">5</span></span> jl again FINISH</code> </pre><br>  Perform assembly and linking and run the file hello.asm. <br><br><pre> <code class="hljs ruby">$ nasm -f elf hello.asm $ ld hello.o -o hello $ ./hello</code> </pre><br>  For 64bit, you must use the command <i>nasm -f elf64 hello.asm</i> <br><br>  <b>NASM for Windows</b> <br><br>  NASM for Windows can be installed by downloading the appropriate distribution from the <a href="http://www.nasm.us/">corresponding site</a> . <br><br>  Assembly: <br> <code>nasm -f bin _.asm -o _.com</code> <br> <br>  Links to Nasm resources: <br><br>  ‚Üí <a href="http://www.stolyarov.info/books/asm_unix">Website A.V.</a>  <a href="http://www.stolyarov.info/books/asm_unix">Stolyarova</a> <br>  ‚Üí <a href="http://acm.mipt.ru/twiki/bin/view/Asm/NasmIntro">The site where the electronic textbook is located</a> (in the archive) <br>  ‚Üí <a href="http://www.opennet.ru/docs/RUS/nasm/">The same</a> <br><br><h3>  AS </h3><br>  Standard assembler in almost all varieties of UNIX, including Linux and BSD.  The free version of this assembler is called GAS (GNU assembler).  Allows you to broadcast programs using the GCC compiler. <br><br>  From the textbooks, only a book in English ‚ÄúProgramming from the ground up‚Äù was found.  In Russian, we managed to find only one chapter from S. Zubkov‚Äôs book Assembler for DOS, Windows and UNIX. <br><br>  Take the example of a program that does nothing from the <a href="https://www.ibm.com/developerworks/ru/library/l-gas-nasm/index.html">site</a> .  Create a program gas.s <br><br><pre> <code class="hljs mel">.section .<span class="hljs-keyword"><span class="hljs-keyword">text</span></span> .globl _start _start: movl $1, %eax movl $2, %ebx <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> $0x80</code> </pre><br>  Perform assembly (translation), linking and running the program: <br><br><pre> <code class="hljs ruby">$ as -o gas.o gas.s $ ld -o gas gas.o $ ./gas</code> </pre><br>  If in this program you change _start to main, then you can perform assembly (translation) and linking with the gcc compiler. <br><br><pre> <code class="hljs mel">.section .<span class="hljs-keyword"><span class="hljs-keyword">text</span></span> .globl main main: movl $1, %eax movl $2, %ebx <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> $0x80</code> </pre><br>  Perform assembly (translation), linking and running the program: <br><br><pre> <code class="hljs ruby">$ gcc gas.s -o gas $ ./gas</code> </pre><br>  <b>Conclusions</b> : if you study programming under Windows, then you can opt for the Masm;  Tasm is no longer supported, but suitable for learning from old classic textbooks. <br><br>  Under Linux Gas, it is suitable for those who use GCC, and for those who do not like the syntax of Gas, Nasm will do. </div><p>Source: <a href="https://habr.com/ru/post/326078/">https://habr.com/ru/post/326078/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../326068/index.html">How to write TK on the system or revision of the 1C system</a></li>
<li><a href="../326070/index.html">Cat Discrimination: Web Tracking Through Invisible Pictures</a></li>
<li><a href="../326072/index.html">Integration of 3CX with Bitrix24 - free CRM plugin</a></li>
<li><a href="../326074/index.html">Async / await: 6 reasons to forget about promises</a></li>
<li><a href="../326076/index.html">Mikrotik 6to4 automation with dynamic IPv4</a></li>
<li><a href="../326080/index.html">Future API</a></li>
<li><a href="../326082/index.html">Huawei HyperMetro - tested and implemented</a></li>
<li><a href="../326084/index.html">Audit of current vulnerabilities without registration and SMS</a></li>
<li><a href="../326086/index.html">Cisco CSR 1000v: Features Overview. Part 1</a></li>
<li><a href="../326088/index.html">Message based integration. Advantages and differences from other approaches</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
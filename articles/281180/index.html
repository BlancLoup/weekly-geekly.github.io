<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Lists of actions: simple, flexible, extensible AI</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Most people are used to solving problems in familiar and understandable ways. We prefer not to go off the beaten track and not reinvent the wheel, eve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Lists of actions: simple, flexible, extensible AI</h1><div class="post__text post__text-html js-mediator-article">  Most people are used to solving problems in familiar and understandable ways.  We prefer not to go off the beaten track and not reinvent the wheel, even if it promises an obvious benefit.  It is very difficult to get rid of this way of thinking, so we continue to use outdated technologies and solutions, thereby causing bewilderment among our more advanced peers.  In this and the next article I want to acquaint readers with a wide range of solutions that can improve the quality of development.  Today we will talk about lists of actions. <br><br><img src="https://habrastorage.org/files/501/fde/d1b/501fded1b9b841bb81f0c0f6dff8519e.jpg"><br><a name="habracut"></a><br><br>  Action lists are a simple but powerful type of artificial intelligence (AI) that every game developer should know about.  Although they cannot be scaled for large AI networks, they provide complex, unpredictable behavior and are fairly simple to use.  This article will be interesting both for beginners of AI programming, and for experienced craftsmen who want to expand their tools.  You will learn what action lists are, and get acquainted with specific examples of their implementation that will be useful to you in developing your own solutions.  So, let's begin. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>In a certain kingdom, in a certain state ...</b> <br><br>  A few years ago, I began to develop the King Randall's Party game, where you need to build a castle and protect it from a siege.  I had to create a smart enough AI able to figure out how to bypass the defense and destroy the castle in order to get the gold protected by the player.  This task turned out to be too voluminous, so as an intelligent programmer I broke it into several parts.  First, I needed to create a specific set of behaviors for units. <br><br><img src="https://habrastorage.org/files/0e5/133/897/0e51338970414d76b4612e8847ab9448.jpg"><br><br>  As expected, the search results on the Internet blew my brain.  The ‚ÄúGame AI‚Äù request led me to the real jungle: planners, finite automata, pack behavior, A * search algorithm, search for a path - which wasn‚Äôt there.  I was completely taken aback, so I did what any sane person would do in my place: I turned to my dog ‚Äã‚Äãfor advice.  When a technical problem arises, I always consult my dog.  You probably think I'm completely nuts.  What can a dog understand in the design?  Well, think what you want.  Especially, if I tell you how she studied forbidden secret technologies for many years, you still won‚Äôt believe me. <br><br>  In general, I asked her: ‚ÄúFrankie, AI is such an extensive subject that I don‚Äôt know at all where to start.  How can I create artificial intelligence for gaming units? ‚Äù  My school teacher, Mr. Francis, said that there are no stupid questions.  But contrary to his words, Frankie looked at me as a complete idiot.  After a significant pause, she asked in response: "Jesse, what do you do every morning?". <br><br>  In the mornings, I usually make a list of everything that I need to do in a day, and determine priorities according to urgency.  I told Frankie about it, and she replied: "In short, you make a list of actions."  It is a list of tasks or behaviors that are alternately performed by game units.  This is one of the forms of the system of final states, which resembles the usual behavior tree with one branch.  At least that's what my dog ‚Äã‚Äãsays. <br><br>  <b>Principle of operation</b> <br><br>  First, let's write all the behaviors that we want to assign to the AI. <br><br><img src="https://habrastorage.org/files/a5b/5ec/6b7/a5b5ec6b738f49ff85178874c995b440.png"><br><br>  Then arrange them in order of priority - from the lowest to the highest. <br><br><img src="https://habrastorage.org/files/b16/9a5/ccd/b169a5ccd520443e8df0ef5995f45b1c.png"><br><br>  Now for each action you need to check the execution conditions, as well as the lock property.  If the item blocks subsequent actions, exit the list.  We'll talk about the importance of blocking later. <br><br>  The first action in our example - ‚ÄúAttack a player‚Äù - will be performed, provided that the unit is located next to the player.  Suppose it is not.  Then the alternate testing of the remaining actions begins: whether it is possible (and necessary) to build a ladder at this place, and so on, until an action is found that meets the conditions of execution.  Let it be the action "Knock the door." <br><br><img src="https://habrastorage.org/files/791/9f9/716/7919f97161954a39a2e60cbea9a57e21.png"><br><br>  This is where locking comes into play.  If the ‚ÄúKnock the door‚Äù action happens instantly, it does not block subsequent actions, and they continue to be performed.  However, for most actions, several frames are required, so this is the exception rather than the rule.  In our case, the ‚ÄúKnock the door‚Äù action calls unit.Attack (door), and then the CurrentState property of the units changes from Waiting to BreakDoor and returns true until the door is broken. <br><br>  <b>Simple state machine</b> <br><br>  So, everything is quite feasible.  It is worth paying tribute to Frankie: lists of actions perfectly suited for my project.  But I was still embarrassed that I had never heard of them before.  On the other hand, in the context of AI, transition-based state machines are often mentioned, similar to the Mecanim animation system in Unity3D.  You define a set of states and specify when and how transitions occur between them.  In exchange for the bone, Frankie explained that when creating a finite state machine, it is necessary not only to identify all states, but absolutely all transitions for each of them.  Here you can get confused very quickly.  For example, if you have a state of receiving damage, you need to specify all the states from which you can go to it: while walking, jumping, squatting or attacking.  This can be useful, but at the same time too difficult.  If you have fairly simple requirements for AI, do not fool yourself. <br>  Another disadvantage of finite automata is complicated debugging.  If you put a breakpoint to look at the current state of the AI, you will not be able to know what state it was before until you use the additional debugging code. <br><br>  <b>Disadvantages of action lists</b> <br><br>  Acquainted with the lists of actions closer, I realized that they are ideal for my project, but also have some drawbacks.  Their main disadvantage, directly related to the main advantage, is simplicity.  Due to the linear structure of the lists, it is simply impossible to build a complex hierarchy of priorities.  Let's say the action ‚ÄúAttack a player‚Äù should have a higher priority than ‚ÄúKnock the door‚Äù, and less priority than ‚ÄúMove to the goal‚Äù.  But at the same time, the action ‚ÄúMove to the goal‚Äù should be lower priority than ‚ÄúKnock out the door‚Äù.  Solving such problems using action lists is very difficult, while finite state machines click them like nuts. <br>  In general, action lists are very useful for relatively simple AI systems, but the more complex the artificial intelligence, the more intricate it becomes to use them.  However, there are several ways to extend their functionality. <br><br>  <b>Expansion of functionality</b> <br><br>  Some units in my game can move and attack at the same time.  For them, it would be possible to make 2 lists of actions - for movement and attack.  But it would be problematic: what if, with certain movements, units cannot attack, or vice versa, to make certain attacks, you need to stand still?  This is where action lanes come to the rescue. <br><br>  In effect, action bars are an enhanced version of the lock feature that allows actions to block only certain items.  Let's see how it works. <br><br>  Each action refers to one or more bands.  Therefore, when the Blocking property returns true, the action blocks only those elements that are on one or more bands with it.  For example, ‚ÄúAttack a player‚Äù refers to the lane, ‚ÄúMove to the goal‚Äù - to the lane, and ‚ÄúBuild a ladder‚Äù - to both, because during construction a unit cannot move and attack.  So now, when performing an action, all subsequent elements will be blocked as intended. <br><br><img src="https://habrastorage.org/files/03d/373/07c/03d37307c3e5466db283f8213fa3504b.png"><br><br>  <b>Implementation example</b> <br><br>  And now is the time to practice.  To begin with we will configure the list and actions. <br><br><img src="https://habrastorage.org/files/1a5/4c1/f64/1a54c1f64d4f469c96001996ade676fb.png"><br><br>  Here is the example of the IActionItem implementation for the BreakDoor action (‚ÄúKnock the door‚Äù): <br><br><img src="https://habrastorage.org/files/4d2/fab/173/4d2fab1735254d14b102bd25746c6786.png"><br><br>  The list of actions can be arranged as a simple list and fill it with IActionItems. <br><br><img src="https://habrastorage.org/files/4ba/e92/06d/4bae9206ddd14e8c8ec426d48bc80644.png"><br><br>  Then we set the method for processing each frame in turn (do not forget about blocking). <br><br><img src="https://habrastorage.org/files/023/18b/c97/02318bc97c19405392dcfac8936145ec.png"><br><br>  With action stripes, things are a little more complicated.  In this example, we define them as a bitfield, and then change the IActionItem interface. <br><br><img src="https://habrastorage.org/files/437/1dd/93e/4371dd93e2c24a68ac196a8247539277.png"><br><br>  Now we have to change the iterator so that it takes into account our lanes of action.  If the specific action bar is blocked, it will be skipped, and if not, it will start as usual.  If all bands are blocked, the cycle is interrupted. <br><br><img src="https://habrastorage.org/files/b6e/eb3/a9f/b6eeb3a9f98f4e0285e1915a615aace6.png"><br><br>  <b>Conclusion</b> <br><br>  After some time, Frankie asked me to summarize my work.  Having thought it over carefully, I highlighted a few key points: <br><br>  ‚Ä¢ Action lists are much easier to manage and configure than state machines. <br>  ‚Ä¢ They provide a familiar priority system. <br>  ‚Ä¢ There are several ways to extend their functionality. <br><br>  As a rule, in programming there are no universal solutions.  Having a lot of tools in your arsenal, you can choose the best solutions for specific problems.  For King Randall's Party, action lists were perfect.  Who knows, maybe this is exactly what your project needs? </div><p>Source: <a href="https://habr.com/ru/post/281180/">https://habr.com/ru/post/281180/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281168/index.html">How to hack thousands of printers in the Russian Federation and print everything you want</a></li>
<li><a href="../281170/index.html">Ubuntu Russification console in 2016</a></li>
<li><a href="../281172/index.html">Welcome to Moscow Atlassian Meetup April 26</a></li>
<li><a href="../281176/index.html">His name is Bot. Statsbot</a></li>
<li><a href="../281178/index.html">RAML 1.0: review of innovations</a></li>
<li><a href="../281184/index.html">Seven things you need to know a novice programmer</a></li>
<li><a href="../281186/index.html">Computer vision and mobile robots. Part 1 - V-REP, Python, OpenCV</a></li>
<li><a href="../281188/index.html">What's in git 2.8? Push, grep, rebase, config and other things</a></li>
<li><a href="../281190/index.html">Angular 2 Beta, training course "Tour of Heroes" part 1</a></li>
<li><a href="../281192/index.html">Bpm'online system overview</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Traffic segmentation with _setCustomVar in Google Analytics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For traffic segmentation, Google Analytics has such a great _setCustomVar method. 

 Method signature: _setCustomVar (index, name, value, opt_scope) 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Traffic segmentation with _setCustomVar in Google Analytics</h1><div class="post__text post__text-html js-mediator-article">  For traffic segmentation, Google Analytics has such a great <a href="http://code.google.com/intl/ru/apis/analytics/docs/gaJS/gaJSApiBasicConfiguration.html">_setCustomVar</a> method. <br><br>  Method signature: <b>_setCustomVar (index, name, value, opt_scope)</b> <br><br>  <b>index</b> - slot, there are 5 such slots (from 1 to 5).  The variable must be placed in one of the slots. <br>  <b>name</b> is the name of the variable. <br>  <b>value</b> is the value of the variable. <br>  <b>opt_scope</b> - variable context: 1 (visitor-level), 2 (session-level), 3 (page-level). <br><ul><li>  <b>visitor-level</b> - Lifetime is eternal.  It is useful to establish for the visitor once and for all (for example, for registered visitors or for buyers). </li><li>  <b>session-level</b> - Timeout - session.  Convenient for separating authorized and anonymous site visitors. </li><li>  <b>page-level</b> ‚Äî Used to track events or specific page views. </li></ul><br><h4>  My examples of using this method are: </h4><a name="habracut"></a><ol><li>  pageTracker._setCustomVar ( <br>  1, // This custom var is set to slot # 1 <br>  "Users", // The name of the custom variable <br>  "Registered", // Sets the value of "Users" var <br>  1 // Sets the scope to visitor-level <br>  ); <br>  I use this segment to track the behavior of registered visitors. <br></li><li>  pageTracker._setCustomVar ( <br>  2, // This custom var is set to slot # 2 <br>  "User", // The name of the custom variable <br>  "$ username", // Sets the value of "User" to "$ username" depending on current visitor <br>  2 // Sets the scope to visitor-level <br>  ); <br>  and this segment to track the behavior of a specific authorized user. <br></li></ol><br>  The main problem arises in the allocation of the created segments in the Google Analytics panel, since  currently, they are not visible in standard reports. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In order to select, for example, a segment of all registered visitors, you must create a new segment.  For this: <br><ol><li>  Go to the link " <b>Segments with advanced settings</b> " in the " <b>My Settings</b> " block in the left GA menu. </li><li>  Click on the link " <b>+ Create a new user segment</b> ." </li><li>  From the " <b>Sizes -&gt; Visitors</b> " list, drag the " <b>Custom Variable (Value 1)</b> " to the " <b>value or metric</b> " block. </li><li>  Select the condition " <b>exact match</b> " value " <b>Registered</b> ". </li><li>  Set the name " <b>Registered Visitors</b> " for the segment. </li><li>  Click the " <b>Create Segment</b> " button. </li></ol><br>  The segment has been created; now it can be selected on any report.  To do this, simply select " <b>Segments with advanced settings</b> " above the date interval and select the created segment in the " <b>Custom Segments</b> " list. <br><br>  For the second segment (tracking authorized users) it is convenient to create a custom report. <br><ol><li>  To do this, go to " <b>My Settings -&gt; Custom Reports -&gt; + Create a new custom report</b> ." </li><li>  Next, drag the required indicators into blocks " <b>indicator</b> ". </li><li>  Drag the " <b>Custom Variable (Key 2)</b> " indicator from the " <b>Dimensions -&gt; Visitors</b> " list to the measurement block. </li><li>  In the nested dimension we drag the indicator " <b>Custom Variable (Value 2)</b> " also from the list " <b>Sizes -&gt; Visitors</b> ". </li><li>  Save the report. </li></ol><br>  Now this report can be viewed in custom reports.  When we just go into this user report, we see general statistics for all authorized users, and if we go to the next level (in our case, the User variable (Custom Variable (Key 2))), we will see statistics for each authorized user. <br><br>  These are my examples of real use. <br><br>  You can also read a detailed <a href="http://code.google.com/apis/analytics/docs/tracking/gaTrackingCustomVariables.html">manual from Google on custom variables.</a> <br><br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/76891/">https://habr.com/ru/post/76891/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../76884/index.html">Current IE6 Bugs</a></li>
<li><a href="../76887/index.html">Startup: MindApps Operating Web Platform</a></li>
<li><a href="../76888/index.html">Using the Wifi API in Windows. Get a list of available wireless networks</a></li>
<li><a href="../76889/index.html">Skype: Phone Box Experiment</a></li>
<li><a href="../76890/index.html">Other - PHPTAL</a></li>
<li><a href="../76893/index.html">Updated popular Twitter client. TweetDeck now supports LinkedIn.</a></li>
<li><a href="../76894/index.html">Habr still not friendly with Opera?</a></li>
<li><a href="../76895/index.html">Google Wave Desktop Client for Mac OS X</a></li>
<li><a href="../76896/index.html">So that work does not become the enemy: maximum comfort in the workplace with minimum costs</a></li>
<li><a href="../76897/index.html">10 milliards of payments in QIWI (OSMP)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hivext Cloud Platform - Low-Level Architecture</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, the architectural solution of the low level of the Hivext cloud platform will be described, namely the level of data centers and the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hivext Cloud Platform - Low-Level Architecture</h1><div class="post__text post__text-html js-mediator-article"><img src="http://api.hivext.ru/xssu/cross/download/VzMHUwgDWUBtDWlDQUMBFAZMRUBfRG1JdXR%2BVEcRFVMPAQBCY1VLQEg%3D" align="left"><br>  In this article, the architectural solution of the low level of <a href="http://www.hivext.com/">the Hivext cloud platform</a> will be described, namely the level of data centers and the interaction between each server type. <br>  Recall that the Hivext project is designed for more efficient use of resources (temporary and financial) in the development of ‚Äúrich‚Äù Internet applications (Rich Internet Application) and provides a wide range of ready interconnected services. <br>  Thanks to <a href="http://it-grad.ru/">IT-GRAD,</a> we were able to deploy an additional copy of the platform in St. Petersburg data center (DC) for free.  We have been allocated virtual hosting based on VMware vSphere 4. You can work with such hosting through both the web interface and the desktop client, everything is quite convenient. <br><br>  At the moment, Hivext is deployed in 3 geographically distributed DCs: Kiev (Ukraine), Zhytomyr (Ukraine) and St. Petersburg (Russia).  The configuration of the platform within each DC is built according to a specific structure. <br><br>  I suggest, so to speak, to look under the hood of our platform. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, in connection with the victory in the <a href="http://habrahabr.ru/company/it-grad/blog/101083/">competition of IT start-ups, the</a> latest copy of our platform is located on the equipment, which is located on the site in DC <a href="http://it-grad.ru/">IT Grad</a> with a high level of reliability TIER3.  This ensures the availability of 99.95%, backup diesel generator, water cooling, gas fire extinguishing system, twenty-four-hour support service.  All together creates a failsafe platform where banks, telecommunication companies and our platform are located. <br><br><h3>  DC Interaction Scheme </h3><br>  All requests from customers come to the general site <a href="http://api.hivext.com/">http://api.hivext.com/</a> , which is located in the central DC.  In this site there is information about the location of each specific application to which the request goes.  If the application is in another DC, the current DC works as a proxy.  In most cases, client-sided SDKs (JavaScript, ActionScript, j2me, j2se, Qt) are used to work with the platform API, and when they first access it, they ask exactly which DC the application is in and all subsequent requests go directly to the desired DC.  Thus, two issues are solved - client balancing and painless migration of applications between DCs. <br><br><img src="http://api.hivext.ru/xssu/cross/download/UmICUg9TW04xUWtGFhJeGQEYERQAF20cfydwDkYSFlkPAQBCY1VLQEg%3D"><br><br><h3>  The interaction of computers within one DC </h3><br>  Four different types of computers are used to provide the necessary functionality. <br><ol><li>  Balancer </li><li>  Application Server (Cloudlets) </li><li>  File server </li><li>  Database server </li></ol><br>  In the ideal case, the general scheme will work according to the mixed principle of HA (High Available) + LB (Load Balancing).  In the real case (at the moment of development), HA is used in a limited mode, the backup server is used only for the application server. <br>  In the field of cloud platforms, we introduce a new concept of Cloudlet - this is one instance of a web server (in this case, tomcat) with a fixed memory size of 1 GB. <br>  Below is a schematic representation of the interaction of different types of platform computers in one of the DCs. <br><br><img src="http://api.hivext.ru/xssu/cross/download/A2ADVVxUW0BnAzwRSkdcFAhJQkAJFGtMeHd0AkoVF1YPAQBCY1VLQEg%3D"><br>  In the IT-GRAD data center, we were allocated free of charge the amount of resources from which we managed to assemble the following configuration: <br>  <b>Balancer</b> - 1 vCPU, 1Gb Memory, 8 Gb HDD - Apache 2 + AJP (modified mod_jk) <br>  <b>Node1</b> - 3 vCPU, 4Gb Memory, 52 Gb HDD - (Master) tomcat 6 (3pcs) + NIS + NFS + FTP <br>  <b>Node2</b> - 3 vCPU, 4Gb Memory, 36 Gb HDD - tomcat 6 (3pcs) <br>  <b>DB</b> - 2 vCPU, 8Gb Memory, 200 Gb HDD - MySQL 5.1 <br><br>  Unfortunately, we did not have enough resources won in the competition to organize a separate File Storage server, so it was temporarily combined with one of the nodes. <br><br>  <b>The balancer is</b> implemented on the basis of Apache 2 + AJP (modified mod_jk) using ‚Äústicky‚Äù sessions (stiky session).  Apache 2 is configured so that all static files are given to them directly, and the rest of the requests are transferred to the application server.  Adding a new application and selecting a domain name is done without restarting Apache 2. <br><br>  <b>Cloudlet (application server) is</b> implemented on the basis of tomcat 6, which is deployed in the amount of 6 pieces on Node1 and Node2 and is configured in 3 separate clusters using DeltaManager + SimpleTcpCluster (replication in memory).  Balancing is done between these three clusters. <br><br>  <b>The file server</b> stores static files.  Static files are directly accessible via the web and are available to application scripts within the application server.  Availability of files on other servers is ensured through the use of <a href="http://ru.wikipedia.org/wiki/Network_File_System">NFS 4</a> .  These files can be accessed using FTP. <br>  <a href="http://ru.wikipedia.org/wiki/Network_Information_Service">NIS is</a> used to synchronize users between computers. <br><br>  <b>The database server is</b> based on MySQL 5.1 using master-slave replication.  Under each application is allocated a separate database.  Access to the application databases is available from application scripts, as well as through the web interface PhpMyAdmin. <br><br>  The organization of the platform at the software level is shown below. <br><img src="http://api.hivext.ru/xssu/cross/download/BmIDAVtVCxg1DG0RQU0NQgcZFUVcRDsfeiQjA0FDEFkPAQBCY1VLQEg%3D" alt="image"><br>  The core of the platform uses two whales, the Spring Framework and Hibernate. <br><br>  In this article, we briefly reviewed the low-level architecture of the Hivext cloud platform. <br><br>  - <br>  In the following articles: <u>opening of PHP based on Quercus</u> , description of working with client SDKs. <br><br>  Previous articles about Hivext <br><ul><li>  Hivext: Web services platform ( <a href="http://habrahabr.ru/blogs/webdev/50771/">part 1</a> and <a href="http://habrahabr.ru/blogs/webdev/56312/">part 2</a> ) </li><li>  <a href="http://habrahabr.ru/blogs/i_am_advertising/94729/">Hivext cloud platform for web development</a> </li><li>  <a href="http://habrahabr.ru/blogs/i_am_advertising/82063/">Hivext Platform - a cloud platform for developing Internet applications.</a>  <a href="http://habrahabr.ru/blogs/i_am_advertising/82063/">Beta testing</a> </li></ul><br>  <a href="http://ide.hivext.com/">Online Cloud Development Environment</a> <br>  <a href="http://forum.hivext.ru/">Our forum</a> <br><br>  Any questions or comments on the merits are welcome. </div><p>Source: <a href="https://habr.com/ru/post/107507/">https://habr.com/ru/post/107507/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../107496/index.html">Did you get the letter?</a></li>
<li><a href="../107497/index.html">Android increased the lead in the US</a></li>
<li><a href="../107498/index.html">Async in C #</a></li>
<li><a href="../107503/index.html">Print files from a mobile device using Dropbox</a></li>
<li><a href="../107504/index.html">events.webmoney.ru - disclosure of private data!</a></li>
<li><a href="../107509/index.html">Motorola Milestone. 2 months later</a></li>
<li><a href="../107512/index.html">"Fighting extremism" as it is</a></li>
<li><a href="../107514/index.html">TOP-5 smart videos in the history of SmartVideos.ru!</a></li>
<li><a href="../107515/index.html">Free access to 0.facebook.com from Beeline - paid</a></li>
<li><a href="../107518/index.html">Intel began developing chips for other companies.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
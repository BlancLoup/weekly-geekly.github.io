<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We are looking for free IPv4 in BGP full-view</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We all know that IPv4 addresses have already ended and more than once . Most recently, this was quite a popular topic for discussion, including on Hab...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We are looking for free IPv4 in BGP full-view</h1><div class="post__text post__text-html js-mediator-article">  We all know that IPv4 addresses <a href="https://habrahabr.ru/post/113056/">have already ended</a> and <a href="https://habrahabr.ru/post/151518/">more than once</a> .  Most recently, this was quite a popular topic for discussion, including on <a href="https://habrahabr.ru/post/124749/">Habrahabr</a> : they made <a href="https://habrahabr.ru/post/8193/">plans</a> and <a href="https://habrahabr.ru/post/106488/">forecasts</a> , <a href="https://habrahabr.ru/post/189516/">counted losses</a> .  In the yard in 2016, but IPv4 is still in service. <br><br>  On April 21, the RIPE NCC published a <a href="https://www.ripe.net/publications/news/about-ripe-ncc-and-ripe/ipv4-chart-updated">brief technical news</a> about the very exhaustion of IPv4 addresses.  Actually, the meaning of the news is that the <a href="https://www.ripe.net/publications/ipv6-info-centre/about-ipv6/ipv4-exhaustion/ipv4-available-pool-graph">graph has been</a> updated showing the current position with free addresses from which RIPE is left at its disposal almost on the full block / 8.  <a href="https://www.apnic.net/community/ipv4-exhaustion/graphical-information">APNIC</a> only has half / 8.  Probably, the rigid address distribution policy is doing its job and this latest / 8 RIRs will drag on for a very long time. <br><br>  But all this refers to the "paper" addresses.  And how many real addresses are available for routing to the Internet?  More precisely, how many addresses possible for routing to the Internet is not used.  To calculate this, we will use a unique live witness - the BGP routing table. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Further, some technical details on how to calculate the results of this calculation. <a name="habracut"></a><br><br>  BGP full-view contains all the addresses available for routing, currently about 600,000 prefixes.  The table with addresses looks like this: <br><br><blockquote><pre> * 1.1.8.0/24 216.221.157.162 0 0 0 40191 3257 4134 i
 * 1.1.8.0/24 147.28.7.2 0 0 0 3130 1239 4134 i
 * 1.1.8.0/24 185.44.116.1 0 0 0 47872 3356 4134 i
 * 1.1.8.0/24 80.91.255.137 0 0 0 1299 4134 i
 * 1.1.16.0/20 80.241.176.31 0 0 0 20771 47872 286 49597 i
 * 1.1.16.0/20 185.44.116.1 0 0 0 47872 286 49597 i
 * 1.1.16.0/20 134.222.87.1 750 0 0 286 49597 i
 * 1.1.20.0/24 85.114.0.217 0 0 0 8492 9304 18046 133948 e
 * 1.1.20.0/24 185.44.116.1 0 0 0 47872 9304 18046 133948 i
</pre></blockquote><br>  for calculations we need only the prefixes themselves (the first column). <br><br>  The prefixes are sorted in ascending order, and the shorter prefix of the same network will always be ahead of the long one.  This will greatly simplify the search for spaces in the table, since only 3 situations are possible: <br><br><ol><li>  One prefix includes the other (the first includes the second, but not vice versa), or they are equal; </li><li>  Prefixes are summed to one with a shorter mask; </li><li>  Prefixes are consecutive, but not cumulative. </li></ol><br>  In all other cases, there is a hole between the prefixes, and then we need to write it down. <br><br>  I did not begin to look for ready-made solutions, perhaps the same could be done using <a href="https://docs.python.org/3/library/ipaddress.html">ipaddress</a> .  In my implementation, the stack is used as the main working tool: <br><blockquote><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> line <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> fileinput.input(): prefix = ipv4num(line) <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> len(ipstack): cur_prefix = ipstack.pop() sum_prefix = netsum(cur_prefix, prefix) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> sum_prefix[<span class="hljs-number"><span class="hljs-number">0</span></span>]: prefix = sum_prefix <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> issubnet(cur_prefix, prefix): prefix = cur_prefix <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> isseq(cur_prefix, prefix): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> prefix[<span class="hljs-number"><span class="hljs-number">1</span></span>] &lt;= cur_prefix[<span class="hljs-number"><span class="hljs-number">1</span></span>]: ipstack[:] = [] <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: ipstack.append(cur_prefix) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> gapprefix, mask <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> subnets(cur_prefix[<span class="hljs-number"><span class="hljs-number">0</span></span>] + ipaddrcount(cur_prefix[<span class="hljs-number"><span class="hljs-number">1</span></span>]), prefix[<span class="hljs-number"><span class="hljs-number">0</span></span>]): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"{}/{}"</span></span>.format(numipv4(gapprefix), mask) ipstack[:] = [] <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> ipstack.append(prefix)</code> </pre> </blockquote><br>  The whole code can be picked up on <a href="https://github.com/Urlandi/bgptablehole/">Github</a> . <br><br>  The prefix received at the input is compared with the fact that it is on the stack to fulfill one of the 3 conditions listed above: <br><br><ol><li>  If the prefixes are summed up then we perform the summation and continue moving to the bottom of the stack, comparing the already summed prefix with the new one taken from the top in the hope that it can again be summed up; </li><li>  If the prefix from the stack includes the prefix at the input, then go to the next prefix from the input, returning the prefix to be checked to the top of the stack; </li><li>  If the prefixes follow each other and the prefix mask from the input is longer than the one taken from the stack, then put the new prefix on the top (later it can be summed up with other prefixes from the input).  If the mask is shorter or equal, it makes no sense to keep the entire previous stack, since in any case all further checks will be only with the new prefix.  The stack is cleared, the incoming value is put on top. </li></ol><br>  If none of this happens, then we calculate the starting and ending address of the gap for convenience, convert it into prefix notation. <br><br>  It remains only to take BPG full-view.  It would be possible to use the nearest BGP router at hand, but not everyone has this opportunity.  Therefore, take the data from here <a href="http://www.routeviews.org/">www.routeviews.org</a> - a good research, academic resource.  The archive itself with data in which the Internet routing tables are collected for a considerable period of time is located here <a href="http://archive.routeviews.org/oix-route-views/">archive.routeviews.org/oix-route-views</a> .  I selected the file for <a href="">April 20th</a> . <br><br>  The table is slightly noisy with addresses from a private address space and / 32 addresses.  Therefore, everything was filtered to the prefix / 24 (which corresponds to practical realities), repeated prefixes were removed.  Nothing special was invented for this - the <i>grep</i> and <i>uniq</i> tools were used.  It was the longest 10 minute process. <br><br>  As a result, the source table contains 628,105 prefixes, more than half of them 344,704 falls on / 24.  In my opinion, a good indicator of the shortage of addresses, since due to a shortage, the address space is fragmented.  8697 prefixes are not under the control of the RIR and belong to the organizations that received them until the formation of the RIR.  The shortest announced prefix / 8 of them in total in Table 16, 13 of which, again, are not under the authority of the RIRs. <br><br><img src="https://habrastorage.org/files/4cd/478/3f9/4cd4783f974c48e6a7d81bbd352c05aa.png" alt="image"><br>  <sub>LEGACY - addresses not under the administration of the RIRs.</sub> <br><br><div class="spoiler">  <b class="spoiler_title">Initial data</b> <div class="spoiler_text"><table><tbody><tr><th></th><th>  TOTAL </th><th>  ARIN </th><th>  Ripe </th><th>  APNIC </th><th>  AFRINIC </th><th>  LACNIC </th><th>  LEGACY </th></tr><tr><th>  / 24 </th><td>  344704 </td><td>  120580 </td><td>  81055 </td><td>  92632 </td><td>  8293 </td><td>  35894 </td><td>  6250 </td></tr><tr><th>  / 23 </th><td>  61168 </td><td>  20135 </td><td>  17563 </td><td>  13976 </td><td>  1373 </td><td>  7332 </td><td>  789 </td></tr><tr><th>  / 22 </th><td>  72588 </td><td>  24472 </td><td>  19366 </td><td>  17587 </td><td>  1799 </td><td>  8803 </td><td>  561 </td></tr><tr><th>  / 21 </th><td>  44409 </td><td>  11721 </td><td>  13596 </td><td>  11143 </td><td>  1376 </td><td>  6250 </td><td>  323 </td></tr><tr><th>  /20 </th><td>  40035 </td><td>  13363 </td><td>  8312 </td><td>  12006 </td><td>  712 </td><td>  5320 </td><td>  322 </td></tr><tr><th>  /nineteen </th><td>  27055 </td><td>  7140 </td><td>  6929 </td><td>  7131 </td><td>  540 </td><td>  5222 </td><td>  93 </td></tr><tr><th>  /18 </th><td>  13300 </td><td>  3868 </td><td>  3114 </td><td>  4229 </td><td>  558 </td><td>  1465 </td><td>  66 </td></tr><tr><th>  / 17 </th><td>  7928 </td><td>  2431 </td><td>  2145 </td><td>  2235 </td><td>  257 </td><td>  810 </td><td>  50 </td></tr><tr><th>  /sixteen </th><td>  13212 </td><td>  5563 </td><td>  2600 </td><td>  3894 </td><td>  315 </td><td>  660 </td><td>  180 </td></tr><tr><th>  /15 </th><td>  1804 </td><td>  502 </td><td>  557 </td><td>  506 </td><td>  56 </td><td>  156 </td><td>  27 </td></tr><tr><th>  /14 </th><td>  1052 </td><td>  280 </td><td>  276 </td><td>  295 </td><td>  58 </td><td>  135 </td><td>  eight </td></tr><tr><th>  /12 </th><td>  516 </td><td>  123 </td><td>  121 </td><td>  233 </td><td>  31 </td><td>  five </td><td>  3 </td></tr><tr><th>  /eleven </th><td>  269 </td><td>  96 </td><td>  50 </td><td>  101 </td><td>  17 </td><td>  2 </td><td>  3 </td></tr><tr><th>  /ten </th><td>  36 </td><td>  13 </td><td>  9 </td><td>  14 </td><td>  0 </td><td>  0 </td><td>  0 </td></tr><tr><th>  /9 </th><td>  13 </td><td>  four </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  9 </td></tr><tr><th>  /eight </th><td>  sixteen </td><td>  2 </td><td>  0 </td><td>  one </td><td>  0 </td><td>  0 </td><td>  13 </td></tr><tr><th>  / 7 </th><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td></tr><tr><th>  Total: </th><td>  628105 </td><td>  210293 </td><td>  155693 </td><td>  165983 </td><td>  15385 </td><td>  72054 </td><td>  8697 </td></tr></tbody></table></div></div><br>  The routing table contains overlapping prefixes.  In order to get some data you need to go further.  We will not do this, it is much more interesting to count how many addresses are not routed. <br><br>  We execute our script and get the result.  Since before this, the prefixes from the private address space were cleaned from the source table and some special <a href="http://www.iana.org/assignments/iana-ipv4-special-registry/iana-ipv4-special-registry.xhtml">addresses</a> appeared again, but not in the table already non-routable (which confirms the correctness of the program's operation).  We clean them again.  It makes no sense to take them into account - most likely they will never be used for routing.  For a <i>moment</i> we pay attention to the block <i>240.0.0.0/4</i> where 1/16 of all addresses is mothballed. <br><br>  From the address space that is left is not routed in a total of 79 blocks by / 8.  ARIN accounts for 39, for APNIC 12, for RIPE 7. In fact, a second Internet can be built from this.  <a href="https://www.ripe.net/publications/ipv6-info-centre/about-ipv6/ipv4-exhaustion/ipv4-available-pool-graph">Recall</a> that RIPE reports only one unallocated block / 8. <br><br><img src="https://habrastorage.org/files/855/65c/6c4/85565c6c4973484384b5c1fa02d5c41c.png" alt="image"><br><br><div class="spoiler">  <b class="spoiler_title">Free prefixes</b> <div class="spoiler_text"><table><tbody><tr><th></th><th>  TOTAL </th><th>  ARIN </th><th>  Ripe </th><th>  APNIC </th><th>  AFRINIC </th><th>  LACNIC </th><th>  LEGACY </th></tr><tr><th>  / 24 </th><td>  27358 </td><td>  14225 </td><td>  6213 </td><td>  5287 </td><td>  401 </td><td>  1211 </td><td>  21 </td></tr><tr><th>  / 23 </th><td>  18763 </td><td>  10260 </td><td>  4159 </td><td>  3419 </td><td>  257 </td><td>  648 </td><td>  20 </td></tr><tr><th>  / 22 </th><td>  15170 </td><td>  7469 </td><td>  3618 </td><td>  3363 </td><td>  221 </td><td>  479 </td><td>  20 </td></tr><tr><th>  / 21 </th><td>  8366 </td><td>  4533 </td><td>  1684 </td><td>  1650 </td><td>  139 </td><td>  336 </td><td>  24 </td></tr><tr><th>  /20 </th><td>  5312 </td><td>  3081 </td><td>  819 </td><td>  1069 </td><td>  74 </td><td>  236 </td><td>  33 </td></tr><tr><th>  /nineteen </th><td>  3355 </td><td>  2011 </td><td>  426 </td><td>  701 </td><td>  56 </td><td>  136 </td><td>  25 </td></tr><tr><th>  /18 </th><td>  1959 </td><td>  1254 </td><td>  181 </td><td>  397 </td><td>  31 </td><td>  76 </td><td>  20 </td></tr><tr><th>  / 17 </th><td>  1194 </td><td>  750 </td><td>  127 </td><td>  241 </td><td>  22 </td><td>  43 </td><td>  eleven </td></tr><tr><th>  /sixteen </th><td>  1907 </td><td>  1405 </td><td>  168 </td><td>  251 </td><td>  24 </td><td>  47 </td><td>  12 </td></tr><tr><th>  /15 </th><td>  586 </td><td>  381 </td><td>  69 </td><td>  106 </td><td>  eleven </td><td>  7 </td><td>  12 </td></tr><tr><th>  /14 </th><td>  193 </td><td>  114 </td><td>  20 </td><td>  38 </td><td>  eight </td><td>  2 </td><td>  eleven </td></tr><tr><th>  /12 </th><td>  70 </td><td>  31 </td><td>  9 </td><td>  17 </td><td>  6 </td><td>  0 </td><td>  7 </td></tr><tr><th>  /eleven </th><td>  40 </td><td>  nineteen </td><td>  one </td><td>  9 </td><td>  2 </td><td>  0 </td><td>  9 </td></tr><tr><th>  /ten </th><td>  sixteen </td><td>  four </td><td>  one </td><td>  four </td><td>  one </td><td>  0 </td><td>  6 </td></tr><tr><th>  /9 </th><td>  eight </td><td>  one </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  7 </td></tr><tr><th>  /eight </th><td>  ten </td><td>  one </td><td>  0 </td><td>  0 </td><td>  one </td><td>  0 </td><td>  eight </td></tr><tr><th>  / 7 </th><td>  one </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  one </td></tr></tbody></table></div></div><br><div class="spoiler">  <b class="spoiler_title">Free prefixes reduced to / 24</b> <div class="spoiler_text"><table><tbody><tr><th></th><th>  TOTAL </th><th>  ARIN </th><th>  Ripe </th><th>  APNIC </th><th>  AFRINIC </th><th>  LACNIC </th><th>  LEGACY </th><th>  ADMINBY </th></tr><tr><th>  / 24 </th><td>  27358 </td><td>  14225 </td><td>  6213 </td><td>  5287 </td><td>  401 </td><td>  1211 </td><td>  21 </td><td>  9439 </td></tr><tr><th>  / 23 </th><td>  37526 </td><td>  20520 </td><td>  8318 </td><td>  6838 </td><td>  514 </td><td>  1296 </td><td>  40 </td><td>  13748 </td></tr><tr><th>  / 22 </th><td>  60680 </td><td>  29876 </td><td>  14472 </td><td>  13452 </td><td>  884 </td><td>  1916 </td><td>  80 </td><td>  21836 </td></tr><tr><th>  / 21 </th><td>  66928 </td><td>  36264 </td><td>  13472 </td><td>  13200 </td><td>  1112 </td><td>  2688 </td><td>  192 </td><td>  27104 </td></tr><tr><th>  /20 </th><td>  84992 </td><td>  49296 </td><td>  13104 </td><td>  17104 </td><td>  1184 </td><td>  3776 </td><td>  528 </td><td>  37792 </td></tr><tr><th>  /nineteen </th><td>  107360 </td><td>  64352 </td><td>  13632 </td><td>  22432 </td><td>  1792 </td><td>  4352 </td><td>  800 </td><td>  53760 </td></tr><tr><th>  /18 </th><td>  125376 </td><td>  80256 </td><td>  11584 </td><td>  25408 </td><td>  1984 </td><td>  4864 </td><td>  1280 </td><td>  73024 </td></tr><tr><th>  / 17 </th><td>  152832 </td><td>  96000 </td><td>  16256 </td><td>  30848 </td><td>  2816 </td><td>  5504 </td><td>  1408 </td><td>  97664 </td></tr><tr><th>  /sixteen </th><td>  488192 </td><td>  359680 </td><td>  43008 </td><td>  64256 </td><td>  6144 </td><td>  12032 </td><td>  3072 </td><td>  396800 </td></tr><tr><th>  /15 </th><td>  300032 </td><td>  195072 </td><td>  35328 </td><td>  54272 </td><td>  5632 </td><td>  3584 </td><td>  6144 </td><td>  229888 </td></tr><tr><th>  /14 </th><td>  197632 </td><td>  116736 </td><td>  20480 </td><td>  38912 </td><td>  8192 </td><td>  2048 </td><td>  11264 </td><td>  130048 </td></tr><tr><th>  /12 </th><td>  143360 </td><td>  63488 </td><td>  18432 </td><td>  34816 </td><td>  12288 </td><td>  0 </td><td>  14336 </td><td>  94208 </td></tr><tr><th>  /eleven </th><td>  163840 </td><td>  77824 </td><td>  4096 </td><td>  36864 </td><td>  8192 </td><td>  0 </td><td>  36864 </td><td>  81920 </td></tr><tr><th>  /ten </th><td>  131072 </td><td>  32768 </td><td>  8192 </td><td>  32768 </td><td>  8192 </td><td>  0 </td><td>  49152 </td><td>  57344 </td></tr><tr><th>  /9 </th><td>  131072 </td><td>  16384 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  114688 </td><td>  16384 </td></tr><tr><th>  /eight </th><td>  327680 </td><td>  32768 </td><td>  0 </td><td>  0 </td><td>  32768 </td><td>  0 </td><td>  262144 </td><td>  32768 </td></tr><tr><th>  / 7 </th><td>  65536 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  65536 </td><td>  0 </td></tr><tr><th>  Total: </th><td>  2611468 </td><td>  1285509 </td><td>  226587 </td><td>  396457 </td><td>  92095 </td><td>  43271 </td><td>  567549 </td><td>  1373727 </td></tr><tr><th>  Total blocks by / 8 </th><td>  79.70 </td><td>  39.23 </td><td>  6.91 </td><td>  12.10 </td><td>  2.81 </td><td>  1.32 </td><td>  17.32 </td><td>  41.92 </td></tr></tbody></table><br>  <sub>ADMINBY - according to <a href="http://www.iana.org/assignments/ipv4-address-space/ipv4-address-space.xhtml">IANA,</a> have LEGACY status, but are assigned to some or their RIRs (Administered by RIR)</sub> </div></div><br>  The largest non-routable block is from <i>28.0.0.0</i> to <i>30.255.255.255</i> .  It belongs to two organizations according to <a href="http://www.iana.org/assignments/ipv4-address-space/ipv4-address-space.xhtml">this document</a> <i>DSI-North</i> and <i>Defense Information Systems Agency</i> . <br><br>  It is worth noting that the address blocks that are under the administrative control of the RIR could have come to them in fact.  For example, the <i>7.0.0.0/8</i> block administered by ARIN is wholly owned by the <i>DoD Network Information Center</i> as judged by <a href="https://whois.arin.net/rest/net/NET-7-0-0-0-1/pft%3Fs%3D7.0.0.0%252F8">whois ARIN</a> and is not routed.  The total number of addresses in such blocks corresponds to approximately 42 address spaces with the / 8 prefix. <br><br>  It is interesting to observe that sometimes in a solid block, for example, <i><a href="https://apps.db.ripe.net/search/query.html%3Fsearchtext%3D13.128.0.0/9%26hierarchyFlag%3Done-more%26bflag%3Dtrue%26source%3DGRS">13.128.0.0/9</a></i> or <i><a href="https://apps.db.ripe.net/search/query.html%3Fsearchtext%3D29.0.0.0/8%26hierarchyFlag%3Done-more%26bflag%3Dtrue%26source%3DGRS">29.0.0.0/8,</a></i> there are objects distributed inetnum and route, but still there is nothing globally seen. <br><br>  In some cases, the company has a large continuous block, for example, <i><a href="https://apps.db.ripe.net/search/query.html%3Fsearchtext%3D2.0.0.0/12%26bflag%3Dtrue%26source%3DRIPE">2.0.0.0/12</a></i> , but apparently due to the uselessness it announces only a part of this block.  Spaces are obtained in <i>2.7.0.0/16</i> and <i>2.15.0.0/16</i> .  It may be a trifle, but precisely / 16 is the peak at the free addresses. <br><br>  If you look back a little and take the data for <a href="">April 20, 2011</a> , we get the following picture. <br><br><img src="https://habrastorage.org/files/8eb/03a/b2e/8eb03ab2e9034f3991e60a36adcb3d22.png" alt="image"><br><br><div class="spoiler">  <b class="spoiler_title">Free prefixes 2011</b> <div class="spoiler_text"><table><tbody><tr><th></th><th>  TOTAL </th><th>  ARIN </th><th>  Ripe </th><th>  APNIC </th><th>  AFRINIC </th><th>  LACNIC </th><th>  LEGACY </th></tr><tr><th>  / 24 </th><td>  19270 </td><td>  10418 </td><td>  4089 </td><td>  3725 </td><td>  246 </td><td>  789 </td><td>  3 </td></tr><tr><th>  / 23 </th><td>  14019 </td><td>  7864 </td><td>  2978 </td><td>  2435 </td><td>  189 </td><td>  547 </td><td>  6 </td></tr><tr><th>  / 22 </th><td>  10221 </td><td>  5683 </td><td>  2251 </td><td>  1634 </td><td>  183 </td><td>  459 </td><td>  eleven </td></tr><tr><th>  / 21 </th><td>  6728 </td><td>  3637 </td><td>  1533 </td><td>  1090 </td><td>  104 </td><td>  356 </td><td>  eight </td></tr><tr><th>  /20 </th><td>  4899 </td><td>  2625 </td><td>  903 </td><td>  853 </td><td>  63 </td><td>  430 </td><td>  25 </td></tr><tr><th>  /nineteen </th><td>  3068 </td><td>  1751 </td><td>  485 </td><td>  554 </td><td>  52 </td><td>  210 </td><td>  sixteen </td></tr><tr><th>  /18 </th><td>  1876 </td><td>  1165 </td><td>  221 </td><td>  330 </td><td>  39 </td><td>  106 </td><td>  15 </td></tr><tr><th>  / 17 </th><td>  1186 </td><td>  710 </td><td>  148 </td><td>  224 </td><td>  20 </td><td>  73 </td><td>  eleven </td></tr><tr><th>  /sixteen </th><td>  2069 </td><td>  1503 </td><td>  179 </td><td>  309 </td><td>  14 </td><td>  54 </td><td>  ten </td></tr><tr><th>  /15 </th><td>  672 </td><td>  424 </td><td>  65 </td><td>  147 </td><td>  9 </td><td>  18 </td><td>  9 </td></tr><tr><th>  /14 </th><td>  280 </td><td>  147 </td><td>  22 </td><td>  80 </td><td>  eight </td><td>  14 </td><td>  9 </td></tr><tr><th>  /12 </th><td>  129 </td><td>  54 </td><td>  eleven </td><td>  41 </td><td>  eight </td><td>  9 </td><td>  6 </td></tr><tr><th>  /eleven </th><td>  73 </td><td>  thirty </td><td>  7 </td><td>  22 </td><td>  four </td><td>  3 </td><td>  7 </td></tr><tr><th>  /ten </th><td>  27 </td><td>  9 </td><td>  four </td><td>  7 </td><td>  one </td><td>  one </td><td>  five </td></tr><tr><th>  /9 </th><td>  17 </td><td>  3 </td><td>  3 </td><td>  3 </td><td>  one </td><td>  2 </td><td>  five </td></tr><tr><th>  /eight </th><td>  sixteen </td><td>  3 </td><td>  2 </td><td>  0 </td><td>  one </td><td>  2 </td><td>  eight </td></tr><tr><th>  / 7 </th><td>  2 </td><td>  one </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  one </td></tr></tbody></table></div></div><br><div class="spoiler">  <b class="spoiler_title">Free prefixes given to / 24 2011</b> <div class="spoiler_text"><table><tbody><tr><th></th><th>  TOTAL </th><th>  ARIN </th><th>  Ripe </th><th>  APNIC </th><th>  AFRINIC </th><th>  LACNIC </th><th>  LEGACY </th><th>  ADMINBY </th></tr><tr><th>  / 24 </th><td>  19270 </td><td>  10418 </td><td>  4089 </td><td>  3725 </td><td>  246 </td><td>  789 </td><td>  3 </td><td>  6335 </td></tr><tr><th>  / 23 </th><td>  28038 </td><td>  15728 </td><td>  5956 </td><td>  4870 </td><td>  378 </td><td>  1094 </td><td>  12 </td><td>  9642 </td></tr><tr><th>  / 22 </th><td>  40884 </td><td>  22732 </td><td>  9004 </td><td>  6536 </td><td>  732 </td><td>  1836 </td><td>  44 </td><td>  14232 </td></tr><tr><th>  / 21 </th><td>  53824 </td><td>  29096 </td><td>  12264 </td><td>  8720 </td><td>  832 </td><td>  2848 </td><td>  64 </td><td>  19240 </td></tr><tr><th>  /20 </th><td>  78384 </td><td>  42,000 </td><td>  14448 </td><td>  13648 </td><td>  1008 </td><td>  6880 </td><td>  400 </td><td>  29760 </td></tr><tr><th>  /nineteen </th><td>  98176 </td><td>  56032 </td><td>  15520 </td><td>  17728 </td><td>  1664 </td><td>  6720 </td><td>  512 </td><td>  43776 </td></tr><tr><th>  /18 </th><td>  120064 </td><td>  74560 </td><td>  14144 </td><td>  21120 </td><td>  2496 </td><td>  6784 </td><td>  960 </td><td>  64192 </td></tr><tr><th>  / 17 </th><td>  151808 </td><td>  90880 </td><td>  18944 </td><td>  28672 </td><td>  2560 </td><td>  9344 </td><td>  1408 </td><td>  86272 </td></tr><tr><th>  /sixteen </th><td>  529664 </td><td>  384768 </td><td>  45824 </td><td>  79104 </td><td>  3584 </td><td>  13824 </td><td>  2560 </td><td>  436480 </td></tr><tr><th>  /15 </th><td>  344064 </td><td>  217088 </td><td>  33280 </td><td>  75264 </td><td>  4608 </td><td>  9216 </td><td>  4608 </td><td>  250368 </td></tr><tr><th>  /14 </th><td>  286720 </td><td>  150528 </td><td>  22528 </td><td>  81920 </td><td>  8192 </td><td>  14336 </td><td>  9216 </td><td>  171008 </td></tr><tr><th>  /12 </th><td>  264192 </td><td>  110592 </td><td>  22528 </td><td>  83968 </td><td>  16384 </td><td>  18432 </td><td>  12288 </td><td>  135168 </td></tr><tr><th>  /eleven </th><td>  299008 </td><td>  122880 </td><td>  28672 </td><td>  90112 </td><td>  16384 </td><td>  12288 </td><td>  28672 </td><td>  135168 </td></tr><tr><th>  /ten </th><td>  221184 </td><td>  73728 </td><td>  32768 </td><td>  57344 </td><td>  8192 </td><td>  8192 </td><td>  40960 </td><td>  65536 </td></tr><tr><th>  /9 </th><td>  278528 </td><td>  49152 </td><td>  49152 </td><td>  49152 </td><td>  16384 </td><td>  32768 </td><td>  81920 </td><td>  65536 </td></tr><tr><th>  /eight </th><td>  524288 </td><td>  98304 </td><td>  65536 </td><td>  0 </td><td>  32768 </td><td>  65536 </td><td>  262144 </td><td>  131072 </td></tr><tr><th>  / 7 </th><td>  131072 </td><td>  65536 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  65536 </td><td>  0 </td></tr><tr><th>  Total: </th><td>  3469168 </td><td>  1614022 </td><td>  394657 </td><td>  621883 </td><td>  116412 </td><td>  210887 </td><td>  511307 </td><td>  1663785 </td></tr><tr><th>  Total blocks by / 8 </th><td>  105,87 </td><td>  49.26 </td><td>  12.04 </td><td>  18.98 </td><td>  3.55 </td><td>  6.44 </td><td>  15.60 </td><td>  50.77 </td></tr></tbody></table></div></div><br>  There were more addresses, almost 1/3 of them.  During this time, all the RIRs spent the addresses of someone not so much, some very many, like LACNIC, but in general from 1/3 to half.  It can be seen that the non-directly administered RIR addresses have remained almost in full strength.  On the contrary, some of the addresses were freed.  It turns out that at the dawn of the development of the Internet, one-fifth of all addresses were distributed that are still not used.  More precisely, they can be used somewhere locally, but in our reality BGP Internet access does not exist. <br><br>  I didn‚Äôt expect so many addresses to be seen in BGP full-view.  Someone allocated them a lot, but that they are not used at all.  Of course, I was embarrassed and I began to look for where I was wrong.  I was mistaken seriously and repeatedly, but after all corrections the final result did not change much.  Maybe I did not find everything or think wrongly.  In the end, I checked all the blocks corresponding to AFRINIC manually for the presence in the routing table of my BGP routers and made sure, at least, in this case it‚Äôs considered true. <br><br>  From the original idea to compare the free blocks in the routing table with the RIR databases had to be abandoned, too many addresses.  I put all the received dumps <a href="https://github.com/Urlandi/bgptablehole">next to the script</a> that calculates spaces in the list of prefixes, calling everyone to try to repeat my calculations.  In the meantime, we look with envy at the pioneers who are certainly not facing a shortage of addresses, not in the near future.  The survey is relevant: </div><p>Source: <a href="https://habr.com/ru/post/282532/">https://habr.com/ru/post/282532/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../282520/index.html">Lightning Talk: Get your five minutes on PHDays VI</a></li>
<li><a href="../282522/index.html">Monte Carlo method for tree search</a></li>
<li><a href="../282524/index.html">Message system or ‚Äúsoft coupling‚Äù between components for Unity3D</a></li>
<li><a href="../282528/index.html">Multiphone in FreePBX: full connection automation</a></li>
<li><a href="../282530/index.html">Certified FSTEK version of Veeam Backup and Replication: backing up confidential information</a></li>
<li><a href="../282534/index.html">Yandex Font - Yandex Sans</a></li>
<li><a href="../282536/index.html">We create a game for the smallest on Phaser in Intel XDK</a></li>
<li><a href="../282538/index.html">Welcome to Moscow CocoaHeads Meetup April 29</a></li>
<li><a href="../282542/index.html">El-get, ELPA, MELPA and automatic package installation</a></li>
<li><a href="../282544/index.html">Garbage Collector & C ++</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to start writing tests in 10 steps of 10 minutes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let me guess: you agree that writing tests is good. This increases the reliability of the system, speeds up development, a project with good test cove...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to start writing tests in 10 steps of 10 minutes</h1><div class="post__text post__text-html js-mediator-article">  Let me guess: you agree that writing tests is good.  This increases the reliability of the system, speeds up development, a project with good test coverage is easy and pleasant to maintain, and TDD is generally almost the ideal development process.  But not in your project.  That is, it is cool, but, unfortunately, now there is so much work - just a blockage.  A bunch of tasks, critical bugs alone - two dozen, plus we need to urgently finish this module and write a letter to the customer ... So, probably, we will fasten the tests at the end, if there is time left.  Or in the next project.  No, well, there will definitely be easier.  Probably. <br><br>  How did you know the situation? <br><br><img src="https://habrastorage.org/storage2/d11/bd8/820/d11bd88203f9641e5547150c5633db6b.jpg" align="right">  So - all this nonsense.  The sphere of IT is infinite, like the universe, a lot of work will always be.  You can either start writing tests right now, or never do it.  I have sketched out a short plan on how to start doing this in 10 steps, one step at a time, 10 minutes per step.  And when I say ‚Äú10 minutes,‚Äù I mean not ‚Äú3 and a half hours‚Äù and not ‚Äúwell, some time, better is more,‚Äù namely, 600 seconds.  If you do not have 600 seconds of free time per day - urgently change the project, job, profession, country of residence (underline the appropriate), because this is not life, but some kind of hard labor.  Go. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  <b>1. Choose a test framework</b> </h5><br>  Do not try to start writing your own framework from scratch - do you need it?  Spending a week on choosing the optimal framework (yes, I saw such an estimate of time for this in the plans) is also silly.  Here's a recipe for you: type in Google the best test framework for% language% site: stackoverflow.com.  Open the first 5 links.  Close those of them, where the rating of the question or the first answer is about zero.  From the remaining tabs, you can safely take any recommended framework from the top three with the highest rating.  With a probability of 99.5%, it will suit you.  Since you have spent 3 minutes so far on this step, you can spend the remaining 7 time to go to the framework site and see examples of its use.  Most likely, there everything will be simple and clear (otherwise it would not be in the top recommendations).  But if suddenly there is not - choose another one by the same algorithm. <br><br><h5>  <b>2. Writing Hello world!</b> </h5><br>  Write <b>Hello, world!</b>  we just spit.  Here, for example, in C ++. <br><div class="spoiler">  <b class="spoiler_title">Hello world!</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; using namespace std; int main() { cout &lt;&lt; "Hello world!" &lt;&lt; endl; return 0; }</span></span></span></span></code> </pre> <br></div></div><br>  And now we will do two things. <br>  First, we will render the generation of the displayed text into separate functions.  Yes, in two.  This is so that they can be tested later. <br><div class="spoiler">  <b class="spoiler_title">Hello world!</b>  <b class="spoiler_title">after refactoring</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;string&gt; using namespace std; string GetHello() { return "Hello"; } string GetAdressat(string adressat) { return adressat; } int main() { cout &lt;&lt; GetHello() + " " + GetAdressat("world") + "!" &lt;&lt; endl; return 0; }</span></span></span></span></code> </pre><br></div></div><br>  Secondly, we will carry out the written functions somewhere from this file.  Depending on the approach and the language used, these can be just separate code files or a library.  This is necessary in order to later call these functions from tests. <br>  We will have this: <br><br><div class="spoiler">  <b class="spoiler_title">HelloFunctions.h</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;string&gt; using namespace std; string GetHello(); string GetAdressat(string adressat);</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">HelloFunctions.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"HelloFunctions.h"</span></span></span><span class="hljs-meta"> string GetHello() { return </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Hello"</span></span></span><span class="hljs-meta">; } string GetAdressat(string adressat) { return adressat; }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">HelloWorld.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include "HelloFunctions.h" using namespace std; int main() { cout &lt;&lt; GetHello() + " " + GetAdressat("world") + "!" &lt;&lt; endl; return 0; }</span></span></span></span></code> </pre><br></div></div><br><br><h5>  <b>3. Connecting the framework to Hello world!</b> </h5><br>  About connecting the framework to the project is probably very well written on the framework site.  Or on stackoverflow.  Or on Habr√©.  Here I, for example, once described connecting the <a href="http://habrahabr.ru/company/infopulse/blog/164471/">Google Test</a> .  Usually, it all comes down to creating a new project of a console executable application (in scripting languages ‚Äã‚Äã- a separate script), connecting the framework with an include (import \ using) pair, connecting the code under test (including the files themselves with the code or connecting the library) - well, everything .  If you do not believe that this step can be done in 10 minutes - open Youtube, write in the search the name of your framework and watch 20 videos of approximately the same content, which prove this. <br><br><h5>  <b>4. We understand the possibilities of the framework</b> </h5><br>  First we need to find out: <br><ul><li>  How to write one unit test </li><li>  How to run unit tests </li></ul><br>  These questions are usually answered by all the same articles I mentioned above.  Do not climb right into the jungle of the framework.  Start with simple tests that test simple things.  Here, after all, as in sports, you don‚Äôt have to tear a lot of weight right away, you must first install the right technique. <br><br>  Here, for example, a couple of tests for our Hello world!  on the above mentioned Google Test: <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"HelloFunctions.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"gtest/gtest.h"</span></span></span><span class="hljs-meta"> class CHelloTest : public ::testing::Test { }; TEST_F(CHelloTest, CheckGetHello) { ASSERT_TRUE(GetHello() == </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Hello"</span></span></span><span class="hljs-meta">); } TEST_F(CHelloTest, GetAdressat) { ASSERT_TRUE(GetAdressat(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"world"</span></span></span><span class="hljs-meta">) == </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"world"</span></span></span><span class="hljs-meta">); ASSERT_FALSE(GetAdressat(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"not world"</span></span></span><span class="hljs-meta">) == </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"world"</span></span></span><span class="hljs-meta">); } int main(int argc, char **argv) { ::testing::InitGoogleTest(&amp;argc, argv); return RUN_ALL_TESTS(); }</span></span></code> </pre><br><br><h5>  <b>5. Connect the framework to this project</b> </h5><br>  We already know how to connect the framework to the project.  Remember, did in step number 3?  Everything worked out.  Now let's do this for a combat project.  Put all the necessary framework files for yourself under SVN \ Git \ TFS \ what-you-there.  Make a test project.  Connect the framework to it.  Include the build test project in the build process of your product.  Check the build in debug and release configurations.  Connect the test project, run the build on the build server.  Everything should be ok.  Do not load your colleagues with the appearance of a test project yet - firstly, you have not broken anything, and secondly, you have nothing to brag about either. <br><br><h5>  <b>6. We test something simple</b> </h5><br>  You remember how we carried out above from <b>Hello world!</b>  part of the functionality in external code?  Pay attention to how these functions have turned out: they do not depend on global variables, on the state of any objects, or on external data from files or databases.  The result depends only on the arguments passed.  Find something similar in your project.  Surely because you have any functions for converting something somewhere, serialization / de-serialization, packaging / unpacking, encryption / decryption, etc.  Do not think yet about how necessary and useful functionality you are testing.  Your task is to write a simple test, but for a combat project.  Run, see "1 test passed successfully." <br><br>  By the way, it is at this stage that insights come to skeptics very often.  Suddenly it turns out that the simplest test, for the most basic functionality, has suddenly failed.  We climb into the code - and suddenly we find something like <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>; <span class="hljs-comment"><span class="hljs-comment">// </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> implement later</span></span></code> </pre><br>  And it turns out that the main code just called this function for now with such arguments that everything was ok, but at any moment this could change. <br><br><h5>  <b>7. We test something more difficult</b> </h5><br>  You already know how to test simple things.  Now figure out how to test something that has external dependencies.  See how your framework offers to do preparation for the start of the test and cleaning after it.  Understand what <a href="http://habrahabr.ru/post/134836/">moki and stubs</a> .  Think about how to test some of your code that reads data from a file or from a database.  Is it easy to replace the input source?  Maybe it is worth slightly changing the code to make it easier?  Do it if necessary.  Write a test for this code. <br><br><h5>  <b>8. We write a test for a bug</b> </h5><br>  How does your work on a bug usually look like?  You take it from the bugtracker, try to reproduce it if it does not work - return the tester, if it works, debug it to understand its location, find a piece of code with an error, correct it, test it, give it to the tester.  Fine.  And now try to work on the next bug between the steps ‚Äúfind a mistake‚Äù and ‚Äúfix‚Äù to add one more step - to write a test for this error.  Such that it fell for the current code.  This is a huge buzz, fix the code - and don‚Äôt bother to test it with your hands, but run the test that fell a few minutes ago and see ‚Äúsuccessfully‚Äù at its output.  In addition to this aesthetic pleasure, this test can be given to the tester and used in the future for regression testing (and also for testing the side branches of the product, the ‚Äúin the field‚Äù project, etc.).  Of course, not everything and it is not always possible to test it this way, it can be difficult with UI, with cross-browser compatibility, with multithreading.  Do not bother if writing a test takes you many, many hours.  In the end, this technology is designed to make your life easier, and not to make you dance to your tune. <br><br><h5>  <b>9. First TDD</b> </h5><br>  How does your work usually look like when developing a new functional?  Probably you think first.  Then you design what you will do - you sketch the names of interfaces, classes, then the names of the methods, fill them with implementation, start, debug.  Great, almost nothing needs to be changed.  Just at that moment when you already have interfaces, classes and method names, but there is no implementation yet - write tests for them.  Simple ones called the method checked the result.  Pay attention, as already at this stage you will notice the illogicality of some names, the lack or excessiveness of arguments in the methods, unnecessary or missing dependencies, etc. At the same time, for the time being, this is almost worthless (the implementation has not been written yet) .  We corrected the architecture, added tests, launched - we saw a bunch of failed tests.  Great, that's the way it should be.  They wrote the implementation, started the tests - saw most of them passed, fixed errors, achieved successful completion of all tests - great, it's done.  You feel how good it became, what moral satisfaction did you get?  It is slightly reminiscent of the pleasure of getting some achivki in the game.  And why?  Because it can be measured!  ‚ÄúThe code passes 18 tests with a test coverage of 90%‚Äù - this sounds cooler, much cooler than ‚Äúwell, the feature seems to be implemented, I so poked a little, it seems, does not fall.‚Äù  It gives the right to be proud.  You go home - and you clearly understand that something has done something useful in a day, this ‚Äúsomething‚Äù is measurable, tangible, real. <br><br><h5>  <b>10. We fasten the test run to the CI-server.</b> </h5><br>  There is little point in tests if you don‚Äôt run them.  Run them manually - long and pointless.  Surely you have a build server with some TeamCity or CruiseControl where your product is going.  So, most good build servers immediately, out of the box, support the launch of tests and even parse their logs and draw beautiful reports.  Compliance here, of course, is not ‚Äúeverything is compatible with everyone,‚Äù but if you took the test framework according to the advice at the beginning of the article, the chances that everything will work are very high.  For example, the TeamCity and Google Test mentioned by me are perfectly friendly. <br><br><h4>  <b>Afterword</b> </h4>  A meticulous reader may notice that the items starting from somewhere from the seventh to the eighth will most likely not fit into the stated in the title ‚Äú10 minutes per step‚Äù.  What can I say?  Consider that I, the bad person, have slightly pinned you.  However, if you passed these points with righteous indignation in practice, then: <br><ol><li>  You already have a project to which tests are bolted.  They are running, working, they are more than zero and they are already benefiting you. </li><li>  You have experience in this whole business. </li><li>  The second time you get seriously faster. </li></ol><br>  So decide whether it was worth it or not. <br><br>  Somewhere after the 8th is a good time to submit a test project to your team.  Explain in 2-3 paragraphs what and how, show a simple example of the test, notice that, they say, ‚Äúfeel free to add your own tests‚Äù, but don‚Äôt push too much.  If you did not write tests, most likely the first impression will be cautious skepticism and misunderstanding.  This is quickly treated after the second or third mention at the meeting that, they say, "we found this bug thanks to the test" or "and here the test was written and we immediately find out if it breaks again."  Programmers are a rational people, they will understand and catch up. </div><p>Source: <a href="https://habr.com/ru/post/177581/">https://habr.com/ru/post/177581/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../177567/index.html">Django report server</a></li>
<li><a href="../177569/index.html">I am writing a toy OS (more accessible about the scheduler)</a></li>
<li><a href="../177571/index.html">How to become a real analyst requirements. Part 1. Great analysts are born or become?</a></li>
<li><a href="../177575/index.html">Dynamic access control: how to work with assertions</a></li>
<li><a href="../177577/index.html">256 Gb OCZ Vector SSD Drive Overview</a></li>
<li><a href="../177589/index.html">Fittestness Test</a></li>
<li><a href="../177595/index.html">DIY: dumbbells as a way to store DVDs</a></li>
<li><a href="../177597/index.html">Take part in the contest "Northern Lights"</a></li>
<li><a href="../177603/index.html">Leap Motion support appeared in Google Earth</a></li>
<li><a href="../177605/index.html">The crib on the graphic design of Android applications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Classic Scala Design Patterns</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About the author: 
 Pavel Fatin is working on a Scala plugin for IntelliJ IDEA in JetBrains . 

 Introduction 

 This article will present examples of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Classic Scala Design Patterns</h1><div class="post__text post__text-html js-mediator-article">  <b>About the author:</b> <br>  <i><a href="http://pavelfatin.com/about">Pavel Fatin is</a> working on a <a href="http://confluence.jetbrains.com/display/SCA/Scala%2BPlugin%2Bfor%2BIntelliJ%2BIDEA">Scala plugin</a> for IntelliJ IDEA in <a href="http://jetbrains.com/">JetBrains</a> .</i> <br><br><h4>  Introduction </h4><br><br>  This article will present examples of how classic <b>Scala</b> <a href="http://en.wikipedia.org/wiki/Software_design_pattern">design patterns</a> are implemented. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The content of the article is the basis of my speech at the <a href="http://javaday.org.ua/">JavaDay</a> conference ( <a href="https://speakerdeck.com/pavelfatin/design-patterns-in-scala">presentation slides</a> ). <br><br><a name="habracut"></a><br><br><h4>  Design Patterns </h4><br><br>  A design pattern is a common, reusable solution for common software development problems.  A design pattern is not a complete code for use in solving a specific problem, but only a template that needs to be adapted for specific needs.  Design patterns are best practices for effective design that help improve readability and speed up the development process. <br><br><h4>  Design patterns in the functional world </h4><br><br>  Classic design patterns are object-oriented.  They show the relationships and interactions between classes and objects.  These models are less applicable in purely functional programming (see <a href="http://www.haskell.org/haskellwiki/Typeclassopedia">Haskell's Typeclassopedia</a> and <a href="https://github.com/scalaz/scalaz">Scalaz</a> for ‚Äúfunctional‚Äù design patterns), however, since <b>Scala</b> is an object-functional programming language, these models remain relevant even in the functional world of <b>Scala</b> code. <br><br>  Sometimes, design patterns are a substitute for necessary constructs that are not in the programming language.  In cases where the language has the necessary capabilities, the patterns can be simplified or removed altogether.  In the world of <b>Scala,</b> most of the classic patterns are implemented using expressive syntactic structures. <br><br>  <b>Scala</b> has its own additional patterns, but in this article only classical design patterns will be described, because they are the key to mutual understanding between developers. <br><br>  Although the examples given here can be implemented more expressively, using the full power of the <b>Scala</b> language, I have tried to avoid complex techniques in favor of simple and visual ones in order to provide a clearer understanding of how the <b>Java</b> implementation correlates with the <b>Scala</b> implementation. <br><br><h4>  Overview of design patterns </h4><br><br><h5>  <a href="http://en.wikipedia.org/wiki/Creational_pattern">Creational patterns</a> ( <a href="http://en.wikipedia.org/wiki/Creational_pattern">Creational patterns</a> ): </h5><br><ul><li>  <a href="http://pavelfatin.com/design-patterns-in-scala/">Factory method</a> </li><li>  <a href="http://pavelfatin.com/design-patterns-in-scala/">Delayed initialization (Lazy initialization)</a> </li><li>  <a href="http://pavelfatin.com/design-patterns-in-scala/">Singleton</a> </li></ul><br><br><h5>  Structural Design <a href="http://en.wikipedia.org/wiki/Structural_patterns">Patterns</a> : </h5><br><ul><li>  <a href="http://pavelfatin.com/design-patterns-in-scala/">Adapter (Adapter)</a> </li><li>  <a href="http://pavelfatin.com/design-patterns-in-scala/">Decorator</a> </li></ul><br><br><h5>  Behavioral patterns of design ( <a href="http://en.wikipedia.org/wiki/Behavioral_patterns">Behavioral patterns</a> ): </h5><br><ul><li>  <a href="http://pavelfatin.com/design-patterns-in-scala/">Value Object (Value object)</a> </li><li>  <a href="http://pavelfatin.com/design-patterns-in-scala/">Null object (Null object)</a> </li><li>  <a href="http://pavelfatin.com/design-patterns-in-scala/">Strategy</a> </li><li>  <a href="http://pavelfatin.com/design-patterns-in-scala/">Command (Command)</a> </li><li>  <a href="http://pavelfatin.com/design-patterns-in-scala/">Chain of responsibility</a> </li><li>  <a href="http://pavelfatin.com/design-patterns-in-scala/">Dependency injection</a> </li></ul><br><br>  Below are the implementation of design patterns (all code is available on the <a href="https://github.com/pavelfatin/patterns">Github repository</a> ). <br><br><h4>  Implementing Design Patterns </h4><br><br><h5>  Factory method </h5><br><br>  The <a href="http://en.wikipedia.org/wiki/Factory_method_pattern">factory method</a> pattern <a href="http://en.wikipedia.org/wiki/Factory_method_pattern">is</a> used to provide an object creation interface, encapsulating the decision about which class objects to create. <br><br>  The pattern allows: <br><ul><li>  combine the logic of creating a complex object, </li><li>  choose a class to create an object </li><li>  cache objects </li><li>  coordinate access to shared resources. </li></ul><br><br>  Below are the implementations of the <a href="http://www.drdobbs.com/jvm/creating-and-destroying-java-objects-par/208403883">Static Factory Method</a> pattern, which is slightly different from the classic version of the <a href="http://en.wikipedia.org/wiki/Factory_method_pattern">Factory Method</a> pattern <a href="http://en.wikipedia.org/wiki/Factory_method_pattern">.</a>  . <br><br>  In <b>Java</b> , the <b>new</b> operator is used to create an instance of a class by calling its constructor.  When implementing the template, we will not use the constructor directly, but will use a special method to create the object. <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Dog</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre><br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cat</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre><br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnimalFactory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Animal </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createAnimal</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String kind)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"cat"</span></span>.equals(kind)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cat(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"dog"</span></span>.equals(kind)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dog(); } <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalArgumentException(); } }</code> </pre><br><br>  An example of using a pattern is creating a dog. <br><br><pre> <code class="java hljs">Animal animal = AnimalFactory.createAnimal(<span class="hljs-string"><span class="hljs-string">"dog"</span></span>);</code> </pre><br><br>  In addition to constructors, <b>Scala</b> provides a special syntactic construct that is similar to constructor calls, but is actually a convenient factory method: <br><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">private</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Dog</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">private</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cat</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">apply</span></span></span></span>(kind: <span class="hljs-type"><span class="hljs-type">String</span></span>) = kind <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"dog"</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Dog</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"cat"</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Cat</span></span>() } }</code> </pre><br><br>  Usage example: <br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">Animal</span></span>(<span class="hljs-string"><span class="hljs-string">"dog"</span></span>)</code> </pre><br><br>  The factory method is defined in the so-called ‚Äúcompanion object‚Äù - a special singleton object with the same name defined in the same source file. This syntax is limited to the ‚Äústatic‚Äù implementation of the pattern, because it becomes impossible to delegate the creation of an object to subclasses. <br><br><h6>  Pros: </h6><br><ul><li>  Reuse base class name. </li><li>  Standard and concise. </li><li>  Resembles a constructor call. </li></ul><br><br><h6>  Minuses: </h6><br><ul><li>  "Static" factory method. </li></ul><br><br><h5>  Delayed initialization (Lazy initialization) </h5><br><br>  <a href="http://en.wikipedia.org/wiki/Lazy_initialization">Delayed initialization</a> is a special case of <a href="http://en.wikipedia.org/wiki/Lazy_evaluation">deferred calculations</a> .  This pattern provides a mechanism for initializing a value (or an object) only on the first access, thereby allowing to postpone (or avoid) some expensive calculations. <br><br>  Usually, when implementing a pattern in <b>Java</b> , the special value <b>null is</b> used to denote the uninitialized state.  But, if the <b>null</b> value is a valid initialized value, then an additional flag is needed to indicate the initialization state.  In a multi-threaded code, access to this flag must be synchronized to avoid a race condition.  More efficient synchronization can use double-check locks, which further complicates the code. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> Component component; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Component </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getComponent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Component result = component; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">synchronized</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) { result = component; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { component = result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Component(); } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre><br><br>  Usage example: <br><pre> <code class="java hljs">Component component = getComponent();</code> </pre><br><br>  <b>Scala</b> provides a more concise built-in mechanism: <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> x = { print(<span class="hljs-string"><span class="hljs-string">"(computing x) "</span></span>) <span class="hljs-number"><span class="hljs-number">42</span></span> }</code> </pre><br><br>  Usage example: <br><pre> <code class="scala hljs">print(<span class="hljs-string"><span class="hljs-string">"x = "</span></span>) println(x) <span class="hljs-comment"><span class="hljs-comment">// x = (computing x) 42</span></span></code> </pre><br><br>  Delayed initialization in <b>Scala</b> also works great with <b>null</b> values.  Access to deferred values ‚Äã‚Äãis thread safe. <br><br><h6>  pros </h6><br><ul><li>  Short syntax </li><li>  Deferred values ‚Äã‚Äãcan also be used for <b>null</b> values. </li><li>  Pending values ‚Äã‚Äãare thread safe. </li></ul><br><br><h6>  Minuses </h6><br><ul><li>  Less control over initialization. </li></ul><br><br><h5>  Singleton </h5><br><br>  The <a href="http://en.wikipedia.org/wiki/Singleton_pattern">singleton</a> pattern provides a mechanism for limiting the number of instances of a class, namely, only one object, and also provides a global access point to this object.  Singleton, perhaps the most widely known design pattern in <b>Java</b> , is a clear sign of the lack of a necessary construct in a language. <br><br>  In <b>Java,</b> there is a special keyword <b>static</b> , to indicate a lack of communication with any object (class instance);  methods marked with this keyword cannot be overridden during inheritance.  This concept goes against the basic OOP principle that everything is an object. <br><br>  So, this pattern is used when you need to have access to some global implementation of an interface (possibly with delayed initialization). <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cat</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Runnable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Cat instance = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cat(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Cat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// do nothing } public static Cat getInstance() { return instance; } }</span></span></code> </pre><br><br>  Usage example: <br><pre> <code class="java hljs">Cat.getInstance().run()</code> </pre><br><br>  However, more experienced implementations of the pattern (with deferred initialization) can be described by a larger amount of code and lead to various kinds of errors (for example, <a href="http://ru.wikipedia.org/wiki/Double_checked_locking">"Double-check lock"</a> ). <br><br>  <b>Scala</b> has a compact mechanism for implementing this pattern. <br><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cat</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Runnable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span></span>() { <span class="hljs-comment"><span class="hljs-comment">// do nothing } }</span></span></code> </pre><br><br>  Usage example: <br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">Cat</span></span>.run()</code> </pre><br><br>  In <b>Scala,</b> objects can inherit methods from classes or interfaces.  The object can be referenced (directly or via an inherited interface).  In <b>Scala</b> , objects are initialized deferred, on demand. <br><br><h6>  pros </h6><br><ul><li>  Transparent implementation. </li><li>  Compact syntax. </li><li>  Delayed initialization. </li><li>  Thread safe. </li></ul><br><br><h6>  Minuses </h6><br><ul><li>  Less control over initialization. </li></ul><br><br><h5>  Adapter </h5><br><br>  The <a href="http://en.wikipedia.org/wiki/Adapter_pattern">adapter</a> pattern provides a mechanism for converting one interface to another, to enable classes that implement these different interfaces to work together. <br><br>  Adapters are convenient for integrating existing components. <br><br>  An implementation in <b>Java</b> consists of creating a wrapper class that is explicitly used in the code. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Log</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">warning</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String message)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String message)</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Logger</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Level level, String message)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoggerToLogAdapter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Log</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger logger; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoggerToLogAdapter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Logger logger)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.logger = logger; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">warning</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String message)</span></span></span><span class="hljs-function"> </span></span>{ logger.log(WARNING, message); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String message)</span></span></span><span class="hljs-function"> </span></span>{ logger.log(ERROR, message); } }</code> </pre><br><br>  Usage example: <br><pre> <code class="java hljs">Log log = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoggerToLogAdapter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Logger());</code> </pre><br><br>  In Scala, there is a special built-in interface adaptation mechanism - implicit classes. <br><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Log</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">warning</span></span></span></span>(message: <span class="hljs-type"><span class="hljs-type">String</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span></span>(message: <span class="hljs-type"><span class="hljs-type">String</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Logger</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span></span>(level: <span class="hljs-type"><span class="hljs-type">Level</span></span>, message: <span class="hljs-type"><span class="hljs-type">String</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoggerToLogAdapter</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">logger: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Logger</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Log</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">warning</span></span></span></span>(message: <span class="hljs-type"><span class="hljs-type">String</span></span>) { logger.log(<span class="hljs-type"><span class="hljs-type">WARNING</span></span>, message) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span></span>(message: <span class="hljs-type"><span class="hljs-type">String</span></span>) { logger.log(<span class="hljs-type"><span class="hljs-type">ERROR</span></span>, message) } }</code> </pre><br><br>  Usage example: <br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> log: <span class="hljs-type"><span class="hljs-type">Log</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Logger</span></span>()</code> </pre><br><br>  Although the <b>Log</b> type is expected to be used, the <b>Scala</b> compiler will create an instance of the <b>Logger</b> class and wrap it with an adapter. <br><br><h6>  pros </h6><br><ul><li>  Transparent implementation. </li><li>  Compact syntax. </li></ul><br><br><h6>  Minuses </h6><br><ul><li>  You can get confused without using IDE. </li></ul><br><br><h5>  Decorator </h5><br><br>  The <a href="http://en.wikipedia.org/wiki/Decorator_pattern">decorator</a> pattern is used to extend the functionality of an object without affecting other instances of the same class.  Decorator provides a flexible alternative to inheritance.  This pattern is useful when there are several independent ways of extending functionality that can be arbitrarily combined together. <br><br>  When implemented in <b>Java</b> , a new decorator class is defined that inherits the base interface and wraps the original class, so that several decorators can be nested.  The intermediate decorator class is often used to delegate several methods. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OutputStream</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] b)</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FileOutputStream</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OutputStream</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OutputStreamDecorator</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OutputStream</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> OutputStream delegate; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OutputStreamDecorator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(OutputStream delegate)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.delegate = delegate; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span><span class="hljs-function"> </span></span>{ delegate.write(b); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] b)</span></span></span><span class="hljs-function"> </span></span>{ delegate.write(b); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BufferedOutputStream</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OutputStreamDecorator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BufferedOutputStream</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(OutputStream delegate)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(delegate); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... delegate.write(buffer) } }</span></span></code> </pre> <br><br>  Usage example: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BufferedOutputStream(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileOutputStream(<span class="hljs-string"><span class="hljs-string">"foo.txt"</span></span>));</code> </pre><br><br>  To achieve the same goal, <b>Scala</b> provides a direct way to override interface methods, without being tied to their specific implementation. <br><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OutputStream</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write</span></span></span></span>(b: <span class="hljs-type"><span class="hljs-type">Byte</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write</span></span></span></span>(b: <span class="hljs-type"><span class="hljs-type">Array</span></span>[<span class="hljs-type"><span class="hljs-type">Byte</span></span>]) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FileOutputStream</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">path: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OutputStream</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Buffering</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OutputStream</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write</span></span></span></span>(b: <span class="hljs-type"><span class="hljs-type">Byte</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// ... super.write(buffer) } }</span></span></code> </pre><br><br>  Usage example: <br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">FileOutputStream</span></span>(<span class="hljs-string"><span class="hljs-string">"foo.txt"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-type"><span class="hljs-type">Buffering</span></span> <span class="hljs-comment"><span class="hljs-comment">// with Filtering, ...</span></span></code> </pre><br><br>  Delegation is set statically, at compile time, but this is usually sufficient as long as we can arbitrarily combine decorators at the time the object is created. <br><br>  In contrast to the implementation based on the composition, the approach in Scala preserves the identity of the object, so you can safely use <b>equals</b> on decorated objects. <br><br>  In <b>Scala,</b> this approach to decorating is called the <a href="http://www.artima.com/scalazine/articles/stackable_trait_pattern.html">Stackable Trait Pattern</a> . <br><br><h6>  pros </h6><br><ul><li>  Transparent implementation. </li><li>  Compact syntax. </li><li>  Identification of objects is saved. </li><li>  No explicit delegation. </li><li>  Lack of intermediate class decorator. </li></ul><br><br><h6>  Minuses </h6><br><ul><li>  Static linking </li><li>  Constructors without parameters. </li></ul><br><br><h5>  Value Object (Value object) </h5><br><br>  <a href="http://en.wikipedia.org/wiki/Value_object">A value object</a> is a small immutable value.  Value objects are equal if all their fields are equal.  Value objects are widely used to represent numbers, dates, colors, etc.  In corporate applications, such objects are used as <a href="http://en.wikipedia.org/wiki/Data_Transfer_Object">DTO objects</a> for interaction between processes; because of their immutability, value objects are convenient in multi-threaded programming. <br><br>  In <b>Java,</b> there is no special syntax for creating value objects, instead a class is created with a constructor, getter methods and additional methods (equals, hashCode, toString). <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Point</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x, y; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Point</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.x = x; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.y = y; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getX</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getY</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> y; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object o)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... return x == that.x &amp;&amp; y == that.y; } public int hashCode() { return 31 * x + y; } public String toString() { return String.format("Point(%d, %d)", x, y); } }</span></span></code> </pre><br><br>  Usage example: <br><pre> <code class="java hljs">Point point = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre><br><br>  In <b>Scala</b> , you can use tuples or case classes to declare value objects.  When a separate case class is not needed, tuples can be used: <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> point = (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-comment"><span class="hljs-comment">// new Tuple2(1, 2)</span></span></code> </pre><br><br>  Tuples are predefined, immutable ‚Äúcollections‚Äù that can contain a fixed number of elements of various types.  Tuples provide a constructor, getter methods, and all utility methods. <br><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Point</span></span></span><span class="hljs-class"> </span></span>= (<span class="hljs-type"><span class="hljs-type">Int</span></span>, <span class="hljs-type"><span class="hljs-type">Int</span></span>) <span class="hljs-comment"><span class="hljs-comment">// Tuple2[Int, Int] val point: Point = (1, 2)</span></span></code> </pre><br><br>  In cases where a distinguished class is still needed, or when more descriptive names are required for data elements, you can define a case class: <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Point</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">x: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">, y: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">val</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">point</span></span></span><span class="hljs-class"> </span></span>= <span class="hljs-type"><span class="hljs-type">Point</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre><br><br>  Case classes make class constructor parameters properties.  By default, case classes are immutable.  Like tuples, they provide all the necessary methods automatically.  In addition, case classes are valid classes, which means you can work with them as with ordinary classes (for example, inherit from them). <br><br><h6>  pros </h6><br><ul><li>  Compact syntax. </li><li>  Predefined language constructs are tuples. </li><li>  Built-in required methods. </li></ul><br><br><h6>  Minuses </h6><br>  None. <br><br><h5>  Null Objects (Null Object) </h5><br><br>  <a href="http://en.wikipedia.org/wiki/Null_Object_pattern">A null object</a> is the absence of an object, defining neutral, "inactive" behavior. <br><br>  This approach has an advantage before using <b>null links</b> , because there is no need to explicitly check the link before use. <br><br>  In Java, the implementation of the pattern consists in creating a special subclass with ‚Äúempty‚Äù methods: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sound</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Music</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sound</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NullSound</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sound</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SoundSource</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Sound </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSound</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> available ? music : <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NullSound(); } } SoundSource.getSound().play();</code> </pre><br><br>  Now there is no need to check the link obtained by calling the <b>getSound</b> method before the subsequent call to the <b>play</b> method.  In addition, a Null object can be made singleton. <br><br>  <b>Scala</b> uses a similar approach, using the predefined <b>Option</b> type, which can be used as an ‚Äúcontainer‚Äù of an optional value: <br><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sound</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span></span>() } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Music</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sound</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span></span>() { <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SoundSource</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSound</span></span></span></span>: <span class="hljs-type"><span class="hljs-type">Option</span></span>[<span class="hljs-type"><span class="hljs-type">Sound</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (available) <span class="hljs-type"><span class="hljs-type">Some</span></span>(music) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-type"><span class="hljs-type">None</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (sound &lt;- <span class="hljs-type"><span class="hljs-type">SoundSource</span></span>.getSound) { sound.play() }</code> </pre><br><br><h6>  pros </h6><br><ul><li>  Predefined type. </li><li>  Explicit option. </li><li>  Built-in constructions for working with optional values. </li></ul><br><br><h6>  Minuses </h6><br><ul><li>  Verbosity. </li></ul><br><br><h5>  Strategy </h5><br><br>  <a href="http://en.wikipedia.org/wiki/Strategy_pattern">The strategy pattern</a> defines a family of encapsulated algorithms and allows you to independently change the algorithm without affecting the clients who use it.  The pattern is convenient to use when you need to change the algorithm at runtime. <br><br>  In <b>Java</b> , a pattern is usually implemented by creating a hierarchy of classes that inherit the basic interface: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Add</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + b; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Multiply</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a * b; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Context</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Strategy strategy; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Context</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Strategy strategy)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.strategy = strategy; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span><span class="hljs-function"> </span></span>{ strategy.compute(a, b); } } <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Context(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Multiply()).use(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>);</code> </pre><br><br>  In <b>Scala,</b> there are first-class functions, so the concept of a pattern is implemented by means of the language itself: <br><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class"> </span></span>= (<span class="hljs-type"><span class="hljs-type">Int</span></span>, <span class="hljs-type"><span class="hljs-type">Int</span></span>) =&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Context</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">computer: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Strategy</span></span></span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span></span>(a: <span class="hljs-type"><span class="hljs-type">Int</span></span>, b: <span class="hljs-type"><span class="hljs-type">Int</span></span>) { computer(a, b) } } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> add: <span class="hljs-type"><span class="hljs-type">Strategy</span></span> = _ + _ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> multiply: <span class="hljs-type"><span class="hljs-type">Strategy</span></span> = _ * _ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Context</span></span>(multiply).use(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>)</code> </pre><br><br>  In the case when the algorithm-strategy contains several methods, you can use case-classes or a tuple to group the methods. <br><br><h6>  pros </h6><br><ul><li>  Compact syntax. </li></ul><br><br><h6>  Minuses </h6><br><ul><li>  Generalized appointment. </li></ul><br><br><h5>  Command (Command) </h5><br><br>  <a href="http://en.wikipedia.org/wiki/Command_pattern">The command pattern is</a> used to encapsulate the information needed to call a method at a remote point in time.  This information includes the name of the method, the object to which the method belongs, and the values ‚Äã‚Äãfor the parameters of the method. <br><br>  In <b>Java, the</b> implementation of a pattern consists of wrapping a call into an object. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PrintCommand</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Runnable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String s; PrintCommand(String s) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.s = s; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(s); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Invoker</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> List&lt;Runnable&gt; history = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">invoke</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Runnable command)</span></span></span><span class="hljs-function"> </span></span>{ command.run(); history.add(command); } } Invoker invoker = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Invoker(); invoker.invoke(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PrintCommand(<span class="hljs-string"><span class="hljs-string">"foo"</span></span>)); invoker.invoke(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PrintCommand(<span class="hljs-string"><span class="hljs-string">"bar"</span></span>));</code> </pre><br><br>  <b>Scala</b> has a special mechanism for deferred computing: <br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Invoker</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> history: <span class="hljs-type"><span class="hljs-type">Seq</span></span>[() =&gt; <span class="hljs-type"><span class="hljs-type">Unit</span></span>] = <span class="hljs-type"><span class="hljs-type">Seq</span></span>.empty <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">invoke</span></span></span></span>(command: =&gt; <span class="hljs-type"><span class="hljs-type">Unit</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// by-name parameter command history :+= command _ } } Invoker.invoke(println("foo")) Invoker.invoke { println("bar 1") println("bar 2") }</span></span></code> </pre><br><br>  This is how you can convert any expression or code block into a function object.  Calls to the <b>println</b> method are executed inside calls to the <b>invoke</b> method, and then stored in the <b>history</b> sequence. <br><br><h6>  pros </h6><br><ul><li>  Compact syntax. </li></ul><br><br><h6>  Minuses </h6><br><ul><li>  Generalized appointment. </li></ul><br><br><h5>  Chain of responsibility </h5><br><br>  <a href="http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern">The chain of responsibility pattern</a> separates the sender of the request from his recipient, allowing several objects to process the request.  The request is processed by the chain until some object processes it. <br><br>  In a typical implementation of a pattern, each object in the chain inherits the basic interface and contains an optional reference to the next processing object in the chain.  Each object is given the opportunity to either process the request (and interrupt processing), or pass the request to the next handler in the chain. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EventHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> EventHandler next; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(EventHandler handler)</span></span></span><span class="hljs-function"> </span></span>{ next = handler; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Event event)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (canHandle(event)) doHandle(event); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (next != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) next.handle(event); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">canHandle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Event event)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doHandle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Event event)</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">KeyboardHandler</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EventHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// MouseHandler... protected boolean canHandle(Event event) { return "keyboard".equals(event.getSource()); } protected void doHandle(Event event) { /* ... */ } }</span></span></code> </pre><br><br>  Usage example: <br><pre> <code class="java hljs">KeyboardHandler handler = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KeyboardHandler(); handler.setNext(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MouseHandler());</code> </pre><br><br>  <b>Scala</b> has a more elegant mechanism for solving such problems, namely, <a href="http://www.scala-lang.org/api/current/index.html">partial functions (partial functions)</a> .  A partial function is a function defined on a subset of the possible values ‚Äã‚Äãof its arguments. <br><br>  Although a combination of the <b>isDefinedAt</b> and <b>apply</b> methods can be used to build a chain, using the <b>getOrElse</b> method is more <b>appropriate.</b> <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Event</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">source: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EventHandler</span></span></span><span class="hljs-class"> </span></span>= <span class="hljs-type"><span class="hljs-type">PartialFunction</span></span>[<span class="hljs-type"><span class="hljs-type">Event</span></span>, <span class="hljs-type"><span class="hljs-type">Unit</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> defaultHandler: <span class="hljs-type"><span class="hljs-type">EventHandler</span></span> = <span class="hljs-type"><span class="hljs-type">PartialFunction</span></span>(_ =&gt; ()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> keyboardHandler: <span class="hljs-type"><span class="hljs-type">EventHandler</span></span> = { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">Event</span></span>(<span class="hljs-string"><span class="hljs-string">"keyboard"</span></span>) =&gt; <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mouseHandler</span></span></span></span>(delay: <span class="hljs-type"><span class="hljs-type">Int</span></span>): <span class="hljs-type"><span class="hljs-type">EventHandler</span></span> = { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-type"><span class="hljs-type">Event</span></span>(<span class="hljs-string"><span class="hljs-string">"mouse"</span></span>) =&gt; <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> }</code> </pre><br><br><pre> <code class="scala hljs">keyboardHandler.orElse(mouseHandler(<span class="hljs-number"><span class="hljs-number">100</span></span>)).orElse(defaultHandler)</code> </pre><br><br>  It is important to note that <b>defaultHandler</b> is used <b>here</b> to avoid errors on ‚Äúundefined‚Äù events. <br><br><h6>  pros </h6><br><ul><li>  Compact syntax. </li><li>  Built-in language design. </li></ul><br><br><h6>  Minuses </h6><br><ul><li>  Generalized appointment. </li></ul><br><br><h5>  Dependency injection </h5><br><br>  <a href="http://en.wikipedia.org/wiki/Dependency_injection">The dependency injection pattern</a> allows you to avoid hard-coded dependencies and substitute dependencies either at runtime or at compile time.  The pattern is a special case of <a href="http://en.wikipedia.org/wiki/Inversion_of_control">control inversion (IoC)</a> . <br><br>  Dependency injection is used to select from a variety of implementations of a particular component in an application, or to provide a <b>mock component</b> for <b>unit testing</b> . <br><br>  In addition to using <a href="http://www.martinfowler.com/articles/injection.html">IoC containers</a> , the simplest way to implement this pattern in <b>Java</b> is to pass specific implementations of interfaces (which the class uses in its work) through the parameters of the constructor. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Repository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(User user)</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DatabaseRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Repository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Repository repository; UserService(Repository repository) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.repository = repository; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(User user)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... repository.save(user); } } new UserService(new DatabaseRepository());</span></span></code> </pre><br><br>  In addition to composition <b>(‚ÄúHAS-A‚Äù)</b> and inheritance <b>(‚ÄúIS-A‚Äù)</b> , <b>Scala</b> offers a special kind of object relationship - a requirement <b>(‚ÄúREQUIRES-A‚Äù)</b> - expressed in <b>self-type</b> annotations.  <b>Self-types</b> allow you to specify additional types to an object without applying inheritance. <br><br>  You can use <b>self-type</b> annotations with <b>traits</b> to implement a dependency injection pattern: <br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Repository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span></span>(user: <span class="hljs-type"><span class="hljs-type">User</span></span>) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DatabaseRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Repository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserService</span></span></span><span class="hljs-class"> </span></span>{ self: <span class="hljs-type"><span class="hljs-type">Repository</span></span> =&gt; <span class="hljs-comment"><span class="hljs-comment">// requires Repository def create(user: User) { // ... save(user) } } new UserService with DatabaseRepository</span></span></code> </pre><br><br>  The full implementation of this methodology is known as the <a href="http://jonasboner.com/2008/10/06/real-world-scala-dependency-injection-di">Cake pattern</a> .  However, this is not the only way to implement a pattern, there are also many other ways to implement a dependency injection pattern in <b>Scala</b> . <br><br>  It is important to recall that the ‚Äúmixing‚Äù of <b>traits</b> in <b>Scala is</b> static, occurring at compile time.  However, in practice, a configuration change is not so often required, and the additional benefits of static checking at the compilation stage have significant advantages compared to XML configuration. <br><br><h6>  pros </h6><br><ul><li>  Transparent implementation. </li><li>  Compact syntax. </li><li>  Static check at compile time. </li></ul><br><br><h6>  Minuses </h6><br><ul><li>  Configuration at compile time. </li><li>  Configuration can be ‚Äúverbose.‚Äù </li></ul><br><br><h4>  Conclusion </h4><br><br>  I hope that this demonstration will help bridge the gap between these two languages ‚Äã‚Äãby helping <b>Java</b> programmers understand the <b>Scala</b> syntax, and <b>Scala</b> programmers can help in matching specific language constructs to widely known abstractions. </div><p>Source: <a href="https://habr.com/ru/post/212121/">https://habr.com/ru/post/212121/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../212111/index.html">How to write your component for iOS</a></li>
<li><a href="../212113/index.html">Date.prototype.getTimezoneOffset - the difference in return values ‚Äã‚Äãin different browsers</a></li>
<li><a href="../212115/index.html">C ++ IDE from JetBrains: when?</a></li>
<li><a href="../212117/index.html">Bitcoin protocol feature that led to delays in Mtgox pinouts and general commotion</a></li>
<li><a href="../212119/index.html">4 billion rubles for an intelligent video surveillance system for the Moscow Metro</a></li>
<li><a href="../212123/index.html">Lightpack went on sale in Russia</a></li>
<li><a href="../212125/index.html">Create an album gallery</a></li>
<li><a href="../212127/index.html">Freaks and Geeks: the main cranks of the IT world</a></li>
<li><a href="../212131/index.html">Open Data Day February 22 in Moscow</a></li>
<li><a href="../212137/index.html">Qwt and Qt Creator. Part 3: Graph as a Designer Form Element</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tower Defense on the Unity engine - Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello to all! This is my first article for Habr and it is intended for beginners. In it, I would like to talk about how to create a small 3D game of t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tower Defense on the Unity engine - Part 1</h1><div class="post__text post__text-html js-mediator-article">  Hello to all!  This is my first article for Habr and it is intended for beginners.  In it, I would like to talk about how to create a small 3D game of the genre Tower Defense on the Unity engine. <br><br>  I like you just study this engine.  I study with you and I can make mistakes.  If the article is interesting, then please under the cat!  Only carefully, there are a lot of pictures ... <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/846/4ba/095/8464ba0954cb498097a59dd42d4d2557.jpg" alt="image"></div><a name="habracut"></a><br>  Part 1 <a href="https://habrahabr.ru/post/309544/">Part 2</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Start </h3><br>  Run Unity.  I have Unity Personal.  Create a new project called ‚ÄúMyTowerDefence‚Äù.  The game will be three-dimensional, we will not use Unity analytics. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1c2/bf8/513/1c2bf8513e6a4690843435587105a6f3.jpg" alt="image"></div><br>  I set up the workspace, as it is convenient for me, you can leave everything as you have.  When creating a new three-dimensional project, a camera and a light source are created by default.  In a two-dimensional project, there will be only a camera. <br><br>  Create 3 new folders: <br><br><ul><li>  The folder ‚ÄúMaterials‚Äù, it will store the materials of the objects. </li><li>  The ‚ÄúPrefabs‚Äù folder, it will store our blanks of objects with customized components, scripts and a hierarchy of child objects. </li><li>  Folder "Scripts", it will store the scripts. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/files/214/38b/5fd/21438b5fd0f14b63ab59dd92f81c0d07.jpg" alt="image"></div><br><h3>  Watch tower </h3><br>  Create a new cube game object by selecting ‚ÄúGameObject -&gt; Cube‚Äù in the main menu.  We give him a new name "Body" translated from English "Body".  It will be the body of the watchtower. <br><br>  Now create an empty object.  He is not visible on stage.  Let's call it ‚ÄúTower‚Äù - ‚ÄúTower‚Äù.  In this case, it will be the main object of the watchtower tree.  The position of the created objects will be set by zeros. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ff2/0a7/c01/ff20a7c0129048e1b1a1ef9ce82d0abe.jpg" alt="image"></div><br>  Drop the ‚ÄúBody‚Äù object into the ‚ÄúTower‚Äù object. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ea2/cb1/55f/ea2cb155fc56444c9240520dad49f2fd.jpg" alt="image"></div><br>  ‚ÄúBody‚Äù has become a child of the Tower object.  The position, rotation and scale of the child objects depends on the similar parameters of the parent object.  Simply put, if you drag the parent object, then all child objects follow their parent. <br><br>  Change the scale of the body of the tower. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/6c6/25f/0a9/6c625f0a94e4448dbc6e5a03b6608b7e.jpg" alt="image"></div><br>  Create a new cube object.  Set the position to zero and flatten a cube along the Y coordinate. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/277/86e/88f/27786e88fdb64e8bbb9d94039f48de9e.jpg" alt="image"></div><br>  Let's call the cube "Head" - "Head".  Put the head in place and glue it to the object "Tower". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3bb/8fa/f70/3bb8faf707bc4908a68f52efef1f01c9.jpg" alt="image"></div><br>  Now we need a gun.  Create a new cube with the name "Gun" - "Gun".  We make it so that the cube would even remotely resemble it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1a0/37d/3a7/1a037d3a79544b4b945f99bd4bbe9a27.jpg" alt="image"></div><br>  We need another auxiliary object that will be the center of rotation of the gun.  Create an empty object and bind the ‚ÄúGun‚Äù object to it.  And we tie it to the object "Tower". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/7bc/6e1/8c1/7bc6e18c1e514e8aa8e19622773a121e.jpg" alt="image"></div><br>  Adjust the position of the gun. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e2b/72e/2cf/e2b72e2cf4624e1393ae347e86b4a71c.jpg" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/cb7/275/8be/cb72758beb0a43baa241153308ddae27.jpg" alt="image"></div><br>  Save the scene with any name.  Create a folder for storing scenes and put the created scene there.  Now we will bring beauty.  In the materials folder we create a new material with the name ‚ÄúTowerBody‚Äù. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/12c/f9e/988/12cf9e988ecd4bf8a0e668a2533b3dce.jpg" alt="image"></div><br>  Set the color and apply the material to the body of the tower by dragging it from the Project window to the object. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/919/70d/cf8/91970dcf83d440bf9d1ef2b1e391a58f.jpg" alt="image"></div><br>  Duplicate material with a new name ¬´TowerHead¬ª.  Perform similar actions for the head.  Also do for the gun. <br>  All beauty cast. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/fd7/5ff/616/fd75ff616d424986b37cd7173ebd7e57.jpg" alt="image"></div><br>  Let's try to simulate the turns of the watchtower.  Here we immediately find the flaw.  The head rotates, and the gun is busy with its affairs. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/dc3/0aa/766/dc30aa7661cf49119fdd9e0d6bc1f477.jpg" alt="image"></div><br>  Let's make it rotate with the head, moving the auxiliary object of the gun to the object ‚ÄúHead‚Äù. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/54c/34a/53d/54c34a53dad347b4bc518f6cffa4aea2.jpg" alt="image"></div><br>  Rotate the gun.  And here we see that inexplicable ... (Melody "The X-Files") <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/6ff/b7b/59c/6ffb7b59c4824171be6cafd9eaf2ec48.jpg" alt="image"></div><br>  Well, okay, we will come back to this later, when we rotate the gun with the help of the script.  Create a new prefab from the Tower object by dragging it to the Prefabs folder. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/bd4/331/21f/bd433121f3cb4f85ba9294177e7bd2d7.jpg" alt="image"></div><br>  The original tower is removed from the scene. <br><br><h3>  Battlefield </h3><br>  Create an object plane.  On the plane will be the whole get-together.  Apply any material to it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/509/98c/775/50998c7750c84c5496aefd2897505601.jpg" alt="image"></div><br>  Change the position of the camera so that the whole plane would be visible at an angle. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/dce/24a/0e1/dce24a0e1b2f4dfc8b3c118eb40f39af.jpg" alt="image"></div><br>  Rename the plane to ‚ÄúGround‚Äù. <br><br>  We need a platform to be able to install a watchtower on it.  To do this, create a cube, set the position on zeros and flatten it on the Y axis. Also, disable shadow casting.  Let's call the cube "TowerPlace". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4fe/7bc/187/4fe7bc1879214d48a1e894e5a2320feb.jpg" alt="image"></div><br>  Drop it in the prefabs folder.  Now duplicate the object on the scene by pressing CTRL + D.  After holding CTRL dragging the object to the side.  With this action, we dragged a new copy of the object through the binding to the grid, which allows you to move the object to the same length of steps.  Now the grid step is equal to one. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b35/b38/32e/b35b3832e02b4bc49ce0b8e84f1212d2.jpg" alt="image"></div><br>  That's the way an interesting feature of prefabs.  If we change, as now, the size of the object, and click the button ‚ÄúApply‚Äù - ‚ÄúApply‚Äù, then the new parameters of this prefab will apply to all its copies. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/7c2/f1c/6eb/7c2f1c6eb08d440b9e991f4d3dd60978.jpg" alt="image"></div><br>  Now we need to fill the whole plane with copies of the object.  Oh yeah, I forgot to set the plane position to zero, just because of this, everything is displayed crookedly. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/630/528/8f4/6305288f4c1a4fd6a0ceb0adf63da6d8.jpg" alt="image"></div><br>  The camera is incorrectly located for the same reason.  Create a new empty ‚ÄúTowerPlaces‚Äù object storing the objects of the places to install the towers. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/48f/e5b/ab9/48fe5bab97ee46fab9af90e969392ed3.jpg" alt="image"></div><br>  Now we will create a path for the movement of bots, simply by deleting the objects ‚ÄúTowerPlace‚Äù. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/7c9/422/ae5/7c9422ae5f71423ba534449df48361dc.jpg" alt="image"></div><br><h3>  Waypoints </h3><br>  Create an empty object for the waypoint.  <u>Waypoints</u> are route points along which bots move.  Position set by zero.  Set an icon for an invisible object, so that it would be visible in the editor window. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/6f4/c28/e21/6f4c28e213cf497983e83e474f7d9456.jpg" alt="image"></div><br>  Lift the object along the Y axis so that it does not merge with the plane.  No matter how much, the main thing is not touching the coordinates of X and Z, they must be zero. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/693/1fd/40f/6931fd40f90549b2bd1168f51d26f414.jpg" alt="image"></div><br>  Drop it into the prefabs folder and move the original to the beginning of the path while holding down the CTRL key.  Note the coordinates of the object, retain their integer value along the X and Z axis. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/9bc/712/271/9bc7122717ef4755895f499028fb3f67.jpg" alt="image"></div><br>  Duplicate the waypoints and place them on the edges of the turn while holding down the CTRL key.  We do this all the way to the end. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f32/82a/c01/f3282ac01dad4c02bb1b69081e01410b.jpg" alt="image"></div><br>  Place all the waypoints into an empty object. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e30/136/a2e/e30136a2e6a049fc85e66b949937db56.jpg" alt="image"></div><br>  It is important to check the order of their location, otherwise the bots will start walking where we want. <br><br><h3>  Spawner </h3><br>  Create a cube that will work as a spuner, i.e.  create bots on stage.  Zanulim position and put the object in front of the beginning of the path.  You can change its scale to your liking. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ced/00f/0bc/ced00f0bc8274bd2a3945c87e897ef7e.jpg" alt="image"></div><br>  In the materials folder create a new material.  Assign it to spawner.  It becomes beautiful. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ae4/fc9/479/ae4fc9479d1843f59fc11af281a4a150.jpg" alt="image"></div><br>  In the scripts folder, create a new script named ‚ÄúSpawner‚Äù.  Let's go to the code editor by double clicking on the script.  The code editor can be Visual Studio, MonoDevelop, or even a regular notepad.  It does not affect the work of the script, if only for convenience.  And the error will indicate the editor Unity. <br><br><h3>  Completion of the first part </h3><br>  In the fifth version of the engine, Visual Studio is used by default, but if necessary, the development environment can be changed in the Unity editor settings. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d29/9a2/aea/d299a2aea41e470d90ef96325d4c5aa0.jpg" alt="image"></div><br>  For greater clarity, you can watch the video tutorial: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/1Qte4DrP_qs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>PS:</b> If you have questions or suggestions, leave your comments on YouTube under the video. <br>  On Habr√©, I do not read comments. <br><br>  Many have noticed that the article and video are similar to the lessons from <a href="https://www.youtube.com/channel/UCYbK_tjZ2OrIZFBvU6CCMiA">this channel</a> .  In part, it is.  But I only borrowed the waypoint allocation and level construction. <br><br>  Thanks for attention!  The end of the first part. </div><p>Source: <a href="https://habr.com/ru/post/309378/">https://habr.com/ru/post/309378/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../309366/index.html">The logic of consciousness. Part 4. The secret of brain memory</a></li>
<li><a href="../309368/index.html">Parsing Supreme Commander Graphics</a></li>
<li><a href="../309370/index.html">Basics of Serverless Applications in Amazon Web Services</a></li>
<li><a href="../309372/index.html">How to "bleed" programming skills ... with virtually no programming</a></li>
<li><a href="../309376/index.html">SPA is not a silver bullet, or an alternative approach to web development. Part 1</a></li>
<li><a href="../309380/index.html">Introduction to GitLab CI</a></li>
<li><a href="../309382/index.html">Elixir: Preparing parsing correctly - yecc and leex</a></li>
<li><a href="../309384/index.html">Compensation of lags for weapons in MechWarrior Online</a></li>
<li><a href="../309386/index.html">OSPF (Quagga), Shorewall and Policy Routing: inactive route problem</a></li>
<li><a href="../309388/index.html">Bad code kills</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
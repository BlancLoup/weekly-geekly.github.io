<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Filter elements in cuSel</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At one of the sites, which I have the honor to maintain, a wonderful jQuery plugin cuSel is used to customize the select . It is convenient because it...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Filter elements in cuSel</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/df3/c9d/424/df3c9d424b3f4f74a2e92ccc9e3a4ef9.png" alt="image"><br><br>  At one of the sites, which I have the honor to maintain, a wonderful jQuery plugin <a href="http://www.xiper.net/collect/html-and-css-tricks/verstka-form/nice-select-jquery.html">cuSel is</a> used to customize the <a href="http://www.xiper.net/collect/html-and-css-tricks/verstka-form/nice-select-jquery.html">select</a> .  It is convenient because it is quite simple to configure and allows you to customize even the scroll bar. <br>  But sometimes it happens that the list of items can be very large.  And quickly find the desired item is not so easy. <br><a name="habracut"></a><br>  Once I received the task to implement the ability to enter text and filter elements by the first letters.  The list consisted of the names of cities in Ukraine and was quite long.  Since this opportunity was absent in the plugin itself, and like me and the customer did not want to give up a beautiful select, it was decided to make minor improvements to the script code. <br><br>  Today I will try to repeat it all with you.  To do this, <a href="">take a</a> demo from the page of the plugin.  The archive contains all the necessary libraries and styles.  On the <b>index.html</b> page, the author has prepared several examples of connecting and using the plugin.  Let's add filtering for the first select, which contains a list of countries. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To enter text, we will use a transparent text field, which will be adjusted by clicking on the top layer of the select.  Add a corresponding css-class for this field to the css <b>/ cusel.css file</b> and set the same dimensions for the block that displays the text of the selected list item. <br><br><pre><code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.cusel</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.search-field</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">outline</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: transparent; <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>:none; } <span class="hljs-selector-class"><span class="hljs-selector-class">.cusel</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.search-field</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.cuselText</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">144px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">20px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>:<span class="hljs-number"><span class="hljs-number">20px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">3px</span></span> <span class="hljs-number"><span class="hljs-number">30px</span></span> <span class="hljs-number"><span class="hljs-number">3px</span></span> <span class="hljs-number"><span class="hljs-number">6px</span></span>; }</code> </pre> <br><br>  In order to be able to add filtering only to the necessary selects, we will mark them with an additional <b>filtering</b> class. <br><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">select</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sel80 filtering"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"country"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"country"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tabindex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Open the <b>js / cusel.js file</b> and add the following code to the <b>cuselEvents</b> function. <br><br><pre> <code class="javascript hljs">jQuery(<span class="hljs-string"><span class="hljs-string">".cusel"</span></span>).each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> itv; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elm = $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (elm.hasClass(<span class="hljs-string"><span class="hljs-string">"filtering"</span></span>) &amp;&amp; elm.find(<span class="hljs-string"><span class="hljs-string">".search-field"</span></span>).length == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f = $(<span class="hljs-string"><span class="hljs-string">"&lt;input type='text' /&gt;"</span></span>) f.addClass(<span class="hljs-string"><span class="hljs-string">"search-field"</span></span>); f.keydown(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ clearInterval(itv); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> list = elm.find(<span class="hljs-string"><span class="hljs-string">".cusel-scroll-pane &gt; span"</span></span>); itv = setInterval(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ list.each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item = $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); item.show(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item.text().toLowerCase().indexOf(f.val().toLowerCase()) != <span class="hljs-number"><span class="hljs-number">0</span></span>) item.hide(); }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d = elm.find(<span class="hljs-string"><span class="hljs-string">".cusel-scroll-pane"</span></span>).eq(<span class="hljs-number"><span class="hljs-number">0</span></span>).attr(<span class="hljs-string"><span class="hljs-string">"id"</span></span>); jQuery(<span class="hljs-string"><span class="hljs-string">"#"</span></span> + d)[<span class="hljs-number"><span class="hljs-number">0</span></span>].scrollTo(<span class="hljs-number"><span class="hljs-number">0</span></span>); clearInterval(itv); }, <span class="hljs-number"><span class="hljs-number">100</span></span>); }); f.click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).val(<span class="hljs-string"><span class="hljs-string">''</span></span>).hide(); elm.focus(); }); elm.append(f); } });</code> </pre><br><br>  What does this code do?  Finds on the page all the elements with the class ¬´cusel¬ª.  It is this class that is used in stylized selects.  Further, if the filtering class is specified for the select and it does not have a child element with the search-field class (our text field), then such a field is created and an event handler is hung on it.  The handler, for each keystroke in the field, finds items in the list whose text does not match the text in the field and simply hides them. <br><br>  Now we need to do so that by clicking on the select above it appears our transparent field.  To do this, in the same cuselEvents <b>function,</b> we find the ‚Äúclick‚Äù event handler.  It is necessary to find a part of the code marked by the author‚Äôs comment ‚Äúif you clicked on the select (text)‚Äù and change it as follows. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/*      () */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((clickedClass.indexOf(<span class="hljs-string"><span class="hljs-string">"cuselText"</span></span>)!=<span class="hljs-number"><span class="hljs-number">-1</span></span> || clickedClass.indexOf(<span class="hljs-string"><span class="hljs-string">"cuselFrameRight"</span></span>)!=<span class="hljs-number"><span class="hljs-number">-1</span></span>) &amp;&amp; clicked.parent().prop(<span class="hljs-string"><span class="hljs-string">"class"</span></span>).indexOf(<span class="hljs-string"><span class="hljs-string">"classDisCusel"</span></span>)==<span class="hljs-number"><span class="hljs-number">-1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cuselWrap = clicked.parent().find(<span class="hljs-string"><span class="hljs-string">".cusel-scroll-wrap"</span></span>).eq(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parent = clicked.parents(<span class="hljs-string"><span class="hljs-string">".cusel"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (parent.hasClass(<span class="hljs-string"><span class="hljs-string">"filtering"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> txt = parent.children(<span class="hljs-string"><span class="hljs-string">".cuselText"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sf = parent.children(<span class="hljs-string"><span class="hljs-string">".search-field"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(sf.is(<span class="hljs-string"><span class="hljs-string">":hidden"</span></span>)) { txt.text(<span class="hljs-string"><span class="hljs-string">""</span></span>); sf.show().focus(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { txt.text(parent.find(<span class="hljs-string"><span class="hljs-string">".cuselActive"</span></span>).eq(<span class="hljs-number"><span class="hljs-number">0</span></span>).text()); sf.val(<span class="hljs-string"><span class="hljs-string">""</span></span>).hide(); } } <span class="hljs-comment"><span class="hljs-comment">/*     -  */</span></span> cuselShowList(cuselWrap); }</code> </pre><br><br>  Since the text field is transparent so as not to overlap the background, we clear the text of the selected item in the select box.  A second click will return the original state of the item. <br><br>  Now we‚Äôll do so that when you select an item in the list, the field is the opposite.  Below, find the block marked by the author‚Äôs comment ‚Äúif you chose a position in the list‚Äù and add the following code there <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(clicked.is(<span class="hljs-string"><span class="hljs-string">".cusel-scroll-wrap span"</span></span>) &amp;&amp; clickedClass.indexOf(<span class="hljs-string"><span class="hljs-string">"cuselActive"</span></span>)==<span class="hljs-number"><span class="hljs-number">-1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parent = clicked.parents(<span class="hljs-string"><span class="hljs-string">".cusel"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (parent.hasClass(<span class="hljs-string"><span class="hljs-string">"filtering"</span></span>)) { parent.children(<span class="hljs-string"><span class="hljs-string">".search-field"</span></span>).val(<span class="hljs-string"><span class="hljs-string">''</span></span>).hide(); parent.find(<span class="hljs-string"><span class="hljs-string">".cusel-scroll-pane &gt; span"</span></span>).show(); } <span class="hljs-comment"><span class="hljs-comment">//  }</span></span></code> </pre><br><br>  As you can see, we make the list items hidden when filtering visible. <br><br>  It would be logical if the user clicks the entire list, close the list and hide the filter field.  Therefore, we find the block below, marked by the author's comment ‚Äúhide the opened lists if clicked outside the list‚Äù and change it as follows. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/*   ,     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> wrap = jQuery(<span class="hljs-string"><span class="hljs-string">".cusel-scroll-wrap"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parent = wrap.parents(<span class="hljs-string"><span class="hljs-string">".cusel"</span></span>); parent.each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elm = $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (elm.hasClass(<span class="hljs-string"><span class="hljs-string">"filtering"</span></span>)) { elm.find(<span class="hljs-string"><span class="hljs-string">".cuselText"</span></span>).text(elm.find(<span class="hljs-string"><span class="hljs-string">".cuselActive"</span></span>).eq(<span class="hljs-number"><span class="hljs-number">0</span></span>).text()); elm.find(<span class="hljs-string"><span class="hljs-string">".search-field"</span></span>).val(<span class="hljs-string"><span class="hljs-string">''</span></span>).hide(); elm.find(<span class="hljs-string"><span class="hljs-string">".cusel-scroll-pane &gt; span"</span></span>).show(); } }); wrap.hide(); parent.removeClass(<span class="hljs-string"><span class="hljs-string">"cuselOpen"</span></span>) }</code> </pre><br><br>  And now the final touch.  At the very end of the <b>cuselEvents</b> function <b>,</b> you will find a piece of code marked with the following comment. <br><br><pre> <code class="javascript hljs"> <span class="hljs-comment"><span class="hljs-comment">/*      ( Alexey Choporov)           0.5  keypress       */</span></span></code> </pre><br><br>  Alexey's function selects the appropriate value for the first letter.  We realize the possibility of selection by several letters.  Therefore, to avoid conflicts, the Alexey code must be commented out. <br><br>  <a href="https://www.zeta-uploader.com/1442281801">Sources</a> <br><br></div><p>Source: <a href="https://habr.com/ru/post/175623/">https://habr.com/ru/post/175623/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../175597/index.html">Overview of information threats in March 2013</a></li>
<li><a href="../175601/index.html">Why is a good developer happy with defects?</a></li>
<li><a href="../175611/index.html">Tactics of combat in the SMM or analogy with the MMORPG</a></li>
<li><a href="../175617/index.html">Amazon reduces the price of Windows EC2 server</a></li>
<li><a href="../175619/index.html">RVM Autolibs: Automatic dependency management and Ruby 2.0</a></li>
<li><a href="../175627/index.html">Decoding of images from the human brain</a></li>
<li><a href="../175629/index.html">Wikipedia in the registry of "banned" sites</a></li>
<li><a href="../175633/index.html">Versioning of debian / ubuntu server configurations</a></li>
<li><a href="../175635/index.html">HackDay # 25 - Hackathon in Nizhny Novgorod</a></li>
<li><a href="../175643/index.html">Important points when linking to your site</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
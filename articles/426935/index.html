<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>+10 clean code rules from Angular developer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 

 Today I wanted to touch on the topic of correct code in working with Angular. These recommendations will make your code more effective in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>+10 clean code rules from Angular developer</h1><div class="post__text post__text-html js-mediator-article">  <b>Hi, Habr!</b> <br><br>  Today I wanted to touch on the topic of correct code in working with Angular.  These recommendations will make your code more effective in practical application, as well as allow me to be less demanding on code from juniors. <a name="habracut"></a><br><br>  1. Avoid logic in patterns 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And the first thing I want to mention is the logic in the templates.  If you have some kind of logic in your templates, even if it's simple &amp;&amp;, it is useful to extract it into your component.  The presence of logic in the template means that it is impossible to perform its testing, and therefore it is more prone to errors when changing the template code. <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"isShow"</span></span></span><span class="hljs-tag">&gt;</span></span> Example <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ngOnInit</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>): </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.isShow = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  2. ‚ÄúSafe‚Äù strings <br><br>  Suppose you have a variable of type string, which can only have a specific set of values.  Instead of declaring it as a string type, you can declare this list of possible values ‚Äã‚Äãas a type. <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: <span class="hljs-string"><span class="hljs-string">'One'</span></span> | <span class="hljs-string"><span class="hljs-string">'Two'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isShow) { <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-string"><span class="hljs-string">'One'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-string"><span class="hljs-string">'Two'</span></span> }</code> </pre><br>  By declaring the type of a variable in this way, we can avoid errors when writing code at compile time, rather than at run time. <br><br>  3. The rule of long methods <br><br>  Here is a demonstration of the code unnecessarily.  It is important to understand that no one likes long methods. <br>  Long methods usually indicate that they do too many things.  Perhaps the method itself does one thing, but inside it there are several other operations that can be placed in another own method with a logical purpose.  Long methods are difficult to read, understand and maintain.  They are also error prone, as changing one thing can affect many other things in this method.  Sure, not for me alone, such methods make refactoring (which is key in any application) more difficult than it could be. <br><br>  4. Duplication of code <br><br>  If you have a code that is repeated in different places in the project.  Extract the duplicate code into a separate method and use it instead of duplicate code. <br><br>  The problem with code duplication is that if we want to make changes to the logic of this code, we have to do it in several places.  This makes it difficult to maintain the code, which in turn increases the risk of bugs.  It also takes more time to make changes to the logic.  With less duplicate code, the application will be faster. <br><br>  5. trackBy <br><br>  Let's dilute the list of the subtleties of working with Angular. <br><br>  Often used by ngFor to iterate through an array in templates, it is often in practice deprived of such a function as trackBy.  Use it with ngFor.  Thanks to such trifles you will receive a unique identifier for each element. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngFor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let item of items; trackBy: trackByFn"</span></span></span><span class="hljs-tag">&gt;</span></span>{{ item }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="hljs axapta">trackByFn(<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>, item) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> item.id; <span class="hljs-comment"><span class="hljs-comment">//  ,   }</span></span></code> </pre> <br>  When the array is changed, Angular re-displays the entire DOM tree.  But if you use trackBy, Angular will know which element has changed and will only change the DOM for that particular element. <br><br>  6. Subscribe in template <br><br>  Pay attention to the example of the subscription to the observed component: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{ text }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="hljs javascript">blablaObservable .pipe( map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function"> =&gt;</span></span> value.item), takeUntil(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._destroyed$) ) .subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.text = item);</code> </pre> <br>  Now you see how not to do it.  It's not that I urged you to strictly follow my recommendations, but often the developers do not understand what is happening in their code.  So why is it bad and how to do well?  The point is that we risk getting a random subscription from a subscription to a component, which can lead to a memory leak.  The best option is to use the subscription in the template itself: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{ text$ | async }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.text$ = blablaObservable .pipe( map(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.item) );</code> </pre> <br>  Thanks to async, we don‚Äôt have to worry about unsubscribing, because it does this automatically, and this simplifies the code, eliminating the need to manually manage subscriptions.  It also reduces the risk of accidentally unsubscribing from a subscription in the component I mentioned above. <br><br>  7. Lazy loading <br><br>  Whenever possible, use lazy loading of modules in your Angular application.  Lazy loading is when you load something only when it is used, for example, loading a component only when you need to see it.  This will reduce the size of the loaded application and can improve the load time of the application without loading modules that are not used. <br><br>  // app.routing.ts <br><br><pre> <code class="hljs css">{ <span class="hljs-attribute"><span class="hljs-attribute">path</span></span>: <span class="hljs-string"><span class="hljs-string">'dashboard'</span></span>, loadChildren: <span class="hljs-string"><span class="hljs-string">'lazy-load.module#DashboardModule'</span></span> }</code> </pre> <br>  8. Subscription within subscription <br><br>  Sometimes you may need values ‚Äã‚Äãfrom more than one observable to perform an action.  In this case, avoid subscribing to one observable in the subscription block of another observable.  Instead, use the appropriate chaining operators.  Chain operators are run on observables from the operator in front of them.  Some chain operators, such as withLatestFrom, combineLatest, etc ... <br><br>  Before: <br><br><pre> <code class="hljs javascript">oneObservable$.pipe( take(<span class="hljs-number"><span class="hljs-number">1</span></span>) ) .subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">oneValue</span></span></span><span class="hljs-function"> =&gt;</span></span> { twoObservable$.pipe( take(<span class="hljs-number"><span class="hljs-number">1</span></span>) ) .subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">twoValue</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log([oneValue, twoValue].join(<span class="hljs-string"><span class="hljs-string">', '</span></span>)); }); });</code> </pre> <br>  After: <br><br><pre> <code class="hljs javascript">oneObservable$.pipe( withLatestFrom(twoObservable$), first() ) .subscribe(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[oneValue, twoValue]</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log([oneValue, twoValue].join(<span class="hljs-string"><span class="hljs-string">', '</span></span>)); });</code> </pre> <br>  9. Caching <br><br>  When making requests to the API, the responses from some of them often do not change.  In these cases, you can add a caching mechanism and save the value from the API.  When the request should be repeated to the same API, check whether the value in the cache is in it, and if so, use it.  Otherwise, make an API call and cache the result.  If necessary, you can enter the cache time, where you can check when it was last, and decide whether to call the API.  The presence of a caching mechanism allows you to avoid unwanted API requests.  Thanks to this avoidance of duplicate request, the speed of the application is improved, since we do not need to wait for a response and thereby download the same information again and again. <br><br>  10. Crushing on reusable components <br><br>  Divide large components into smaller ones.  Simplify such components and make them as stupid as possible, as this will make them work in more scenarios.  The creation of such a component means that the component has no special logic in itself and works solely on the basis of the inputs and outputs provided to it.  As a rule, the last child in the component tree will be the simplest of all.  This is done on the basis of the ease of use of such components, these components have less chance of getting errors.  Also, reusable components reduce code duplication, which makes it easier to maintain and make changes. <br><br>  <b>Would you like to continue this column?</b> </div><p>Source: <a href="https://habr.com/ru/post/426935/">https://habr.com/ru/post/426935/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../426925/index.html">Haiku R1 / beta1 Review - BeOS revision, 18 years after its last official release</a></li>
<li><a href="../426927/index.html">Phase transitions in video games and game balance</a></li>
<li><a href="../426929/index.html">How personal finance applications are synchronized with banks</a></li>
<li><a href="../426931/index.html">How to go to work on the Cote d'Azur and get a French passport for 3 years</a></li>
<li><a href="../426933/index.html">Frontend design</a></li>
<li><a href="../426937/index.html">Bionic limbs learn to open beer</a></li>
<li><a href="../426939/index.html">Graduate student solved the problem of confirming quantum computing</a></li>
<li><a href="../426941/index.html">To the question of speed and its measurement in Arduino</a></li>
<li><a href="../426943/index.html">The most comprehensive Russian translation of the Harvard CS50 2015 Programming Course, free on YouTube</a></li>
<li><a href="../426945/index.html">What I liked about Paul Allen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a native extension library for OpenFL (Haxe)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 If you are thinking about creating mobile applications, but do not know where to start, you have enough time to experiment and learn new th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a native extension library for OpenFL (Haxe)</h1><div class="post__text post__text-html js-mediator-article"><h4>  Foreword </h4><br>  If you are thinking about creating mobile applications, but do not know where to start, you have enough time to experiment and learn new things, then let me recommend you to choose the <a href="http://haxe.org/">haxe</a> programming language as a tool.  You may have already heard about him and you may have heard of him as a substitute for Flash.  This is not entirely true, and you can even say quite differently. <br><br>  Yes, the haxe standard library has a subset of classes and functions that are organizationally similar to the actionscript 3 standard library. But this does not prevent the creation of applications for native platforms, such as Linux, Windows, Android, Mac, iOS. <br><br>  When creating applications for native platforms, the capabilities of the standard library are not enough and you have to search for third-party libraries or develop your own.  I went the second way and for the current project (a small game similar to TripleTown in mechanics) I developed a library for working with Flurry, Localytics, GooglePlay Game Services and some other services. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the translation below, it describes how to begin if you want to create an extension library for haxe and the <a href="http://openfl.github.io/">OpenFL</a> framework (formerly <a href="http://www.nme.io/">NME</a> ), in particular.  The author of the <a href="http://labe.me/en/blog/posts/2013-06-19-OpenFL%2520simple%2520extension.html">original article</a> Laurent B√©dubourg. <br><br><a name="habracut"></a><br><h4>  Creating a simple extension for OpenFL </h4><br>  Until recently, I used Adobov tools for publishing applications on iOS and Android. <br><br>  OpenFL is gaining momentum and seems to have reached a sufficient level of maturity, so I decided to use it for my next project. <br><br>  Using high-level libraries is cool, but sometimes native functions are needed, which are described in the documentation, but are not available from libraries.  To solve this problem, there is Adob's ANE and he, I must say, does it well. <br><br>  But how do we get the same features in OpenFL?  Below I will describe my attempts to cope with this task. <br><br>  As follows, using the template from OpenFL, you can create an extension: <br><pre><code class="bash hljs">$ openfl create extension TestExtension $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> TestExtension $ ls -1 TestExtension.hx <span class="hljs-comment"><span class="hljs-comment">#    haxe    haxelib.json #    haxelib include.xml #  , openfl     #    ndll/ #         #  project/ #   </span></span></code> </pre> <br>  After compiling the extension for all supported platforms, the corresponding native libraries will appear in the ndll / directory. <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> project/ haxelib run hxcpp Build.xml haxelib run hxcpp Build.xml -Dandroid haxelib run hxcpp Build.xml -Diphoneos -DHXCPP_ARMV7 haxelib run hxcpp Build.xml -Diphonesim</code> </pre><br>  Now we need to register our extension in haxelib: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> .. haxelib dev TestExtension `<span class="hljs-built_in"><span class="hljs-built_in">pwd</span></span>`</code> </pre><br>  To make sure that the creation of the extension was successful, do the following: <br><pre> <code class="bash hljs">mkdir TestApp <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> TestApp</code> </pre><br>  Create project.xml: <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TestApp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">package</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"me.labe.testapp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">company</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Laurent Bedubourg"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">main</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Main"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Export"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">file</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TestApp"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"."</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">haxelib</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"openfl"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">haxelib</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TestExtension"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Main.hx: <br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> flash.text.TextField(); t.text = Std.string(TestExtension.sampleMethod(<span class="hljs-number"><span class="hljs-number">16</span></span>)); flash.Lib.current.addChild(t); } }</code> </pre><br>  Compile and test as follows: <br><pre> <code class="bash hljs">openfl <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> project.xml cpp openfl <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> project.xml android openfl <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> project.xml ios -simulator openfl <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> project.xml ios</code> </pre><br>  Everything works great on Mac and on Android. <br><br>  I still need to figure out how to use external libraries, how to structure source code for various platforms, but this is already a good start: creating an extension for OpenFL is simpler than an extension for Adobe Air (ANE). <br><br>  Unfortunately, I still have linking errors for iOS, and when I deal with them, I will update this article. <br><br>  <a href="https://github.com/labe-me/openfl-extension-example">In my repository on github</a> I posted the source code of the example from the article.  And in <a href="http://www.joshuagranick.com/blog/2012/03/20/how-to-create-an-nme-extension/">Joshua Granik's blog,</a> you can find an article on creating extensions. <br><br>  <i>Addition</i> : It seems that my problems with linking under iOS are related to the mismatch between the registers of the names of the imported functions.  Once this error is corrected, you can experiment with lower case extensions without any problems (as is supposed under iOS). <br><br>  <i>Addition</i> : Definitely, this is a problem of the mismatch of the names of imported functions.  <a href="https://github.com/openfl/openfl/issues/38">The OpenFL repository</a> contains a description of the error, so that you can independently track when it is fixed. <br><br>  <i>Addition</i> : Joshua Granik has fixed the extension pattern, so now everything will work fine out of the box *. <br><br>  * <i>from the translator</i> - I left all the additions in the translation with the intention that they could be useful to someone in case of such errors. </div><p>Source: <a href="https://habr.com/ru/post/186230/">https://habr.com/ru/post/186230/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../186210/index.html">Ctrl + Z for Ctrl + D</a></li>
<li><a href="../186212/index.html">Startup Investment Trends</a></li>
<li><a href="../186216/index.html">ASUS Fonepad Review: Intel-enabled Tablet Phone</a></li>
<li><a href="../186218/index.html">Understanding Node.js</a></li>
<li><a href="../186228/index.html">Trends in web design: a flat interface and long shadows</a></li>
<li><a href="../186232/index.html">Windows Azure cloud services and killer asterisk</a></li>
<li><a href="../186236/index.html">Inequality condition coding style</a></li>
<li><a href="../186238/index.html">A camera the size of a tennis ball shoots a stabilized video in flight</a></li>
<li><a href="../186240/index.html">SMB and NTFS permissions. Debriefing</a></li>
<li><a href="../186242/index.html">Part 1. How to connect a smartphone to the car or the history of the creation of OBD Car Doctor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
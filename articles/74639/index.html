<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>RMI (Remote Method Invocation)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It so happened that the task required the use of a remote method call. Having rummaged on Habr√©, found nothing on the matter (it would be desirable to...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>RMI (Remote Method Invocation)</h1><div class="post__text post__text-html js-mediator-article">  It so happened that the task required the use of a remote method call.  Having rummaged on Habr√©, found nothing on the matter (it would be desirable to esteem something as the first acquaintance, before reading the documentation).  Having studied the specifications on java.sun.com, I hasten to share with you my first article.  :) <br><br><h4>  "What is RMI?" </h4><br>  Remote method Invocation - a mechanism that allows you to call the method of a remote object.  According to him, all operations on the preparation and transmission of data are encapsulated in the called method of the stub client object.  The method call itself is no different from the method call of a regular local object, with a few exceptions: <br><ul><li>  <s>all parameters are passed by value (ie, copies of objects, and not references to them, as is usually the case)</s> - corrected below.  Thank you <a href="https://habrahabr.ru/users/konstantinsolomatov/" class="user_link">KonstantinSolomatov</a> </li><li>  local objects are passed by value (copies) </li><li>  when sending a remote (Remote) object, if it is exported, the stub of this object is transferred </li><li>  transmitted objects must be Serializable </li><li>  Except for all other exceptions, when calling a remote method, a RemoteException exception may be thrown (marshall / demarshalling errors, data transfer and other possible protocol errors) </li></ul>  It should also be noted that when calling the method we work with the remote interface, and not with the remote class. <br><br><a name="habracut"></a><h4>  ‚ÄúWhy is this needed?‚Äù </h4><br>  The task of RMI is the organization of client-server interaction.  This means that you do not have to worry about transferring and preprocessing data (protocol, etc.).  Conveniently?  Yes.  But not in all cases.  If in your client-server environment the work of programs written not only in java is implied, RMI is of little use (although with a strong desire you can try to get out with JNI). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  "Let's write something already!" </h4><br>  Let's.  Consider the example of distributed computing.  Our task is this: we will search for simple numbers in the simplest way, by searching.  Distributed, we will check the numbers by selecting the divisors from 2 to sqrt (n), where n is the number we are checking.  (‚ÄúDistributed computing‚Äù is a loud name for such an example. But after all, we calculate? Yes! Distributed? Distributed!) <br><br>  We will solve the problem this way: there is a server that will ‚Äúfeed‚Äù numbers for verification to ‚Äúregistered‚Äù clients, therefore we will interact in both directions (client-&gt; server - registration, server-&gt; client - number for verification), for this we will describe 2 interface: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">interface</font> ClientRegister extends Remote { <font color="#0000ff">public</font> <font color="#0000ff">void</font> register (PrimeChecker checker) throws RemoteException; } <font color="#0000ff">public</font> <font color="#0000ff">interface</font> PrimeChecker extends Remote { <font color="#0000ff">public</font> boolean check (BigDecimal number) throws RemoteException; }</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">interface</font> ClientRegister extends Remote { <font color="#0000ff">public</font> <font color="#0000ff">void</font> register (PrimeChecker checker) throws RemoteException; } <font color="#0000ff">public</font> <font color="#0000ff">interface</font> PrimeChecker extends Remote { <font color="#0000ff">public</font> boolean check (BigDecimal number) throws RemoteException; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">interface</font> ClientRegister extends Remote { <font color="#0000ff">public</font> <font color="#0000ff">void</font> register (PrimeChecker checker) throws RemoteException; } <font color="#0000ff">public</font> <font color="#0000ff">interface</font> PrimeChecker extends Remote { <font color="#0000ff">public</font> boolean check (BigDecimal number) throws RemoteException; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">interface</font> ClientRegister extends Remote { <font color="#0000ff">public</font> <font color="#0000ff">void</font> register (PrimeChecker checker) throws RemoteException; } <font color="#0000ff">public</font> <font color="#0000ff">interface</font> PrimeChecker extends Remote { <font color="#0000ff">public</font> boolean check (BigDecimal number) throws RemoteException; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">interface</font> ClientRegister extends Remote { <font color="#0000ff">public</font> <font color="#0000ff">void</font> register (PrimeChecker checker) throws RemoteException; } <font color="#0000ff">public</font> <font color="#0000ff">interface</font> PrimeChecker extends Remote { <font color="#0000ff">public</font> boolean check (BigDecimal number) throws RemoteException; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">interface</font> ClientRegister extends Remote { <font color="#0000ff">public</font> <font color="#0000ff">void</font> register (PrimeChecker checker) throws RemoteException; } <font color="#0000ff">public</font> <font color="#0000ff">interface</font> PrimeChecker extends Remote { <font color="#0000ff">public</font> boolean check (BigDecimal number) throws RemoteException; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">interface</font> ClientRegister extends Remote { <font color="#0000ff">public</font> <font color="#0000ff">void</font> register (PrimeChecker checker) throws RemoteException; } <font color="#0000ff">public</font> <font color="#0000ff">interface</font> PrimeChecker extends Remote { <font color="#0000ff">public</font> boolean check (BigDecimal number) throws RemoteException; } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">interface</font> ClientRegister extends Remote { <font color="#0000ff">public</font> <font color="#0000ff">void</font> register (PrimeChecker checker) throws RemoteException; } <font color="#0000ff">public</font> <font color="#0000ff">interface</font> PrimeChecker extends Remote { <font color="#0000ff">public</font> boolean check (BigDecimal number) throws RemoteException; }</font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The ClientRegister interface is used by the client to register itself on the server as PrimeChecker`a.  The server uses PrimeChecker to pass the number to the client for verification. <br><br>  As you have noticed, the remote interface must extend, directly or indirectly, the Remote interface.  Also among other exceptions we will define RemoteException (we spoke about it above). <br><br>  Let's start the server implementation ( <a href="http://www.everfall.com/paste/id.php%3Fk66bn1g0raqn">full code</a> ): <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> PrimeNumbersSearchServer implements ClientRegister { </li><li></li><li>  ... </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main ( <font color="#2B91AF">String</font> [] args) { </li><li>  PrimeNumbersSearchServer server = <font color="#0000ff">new</font> PrimeNumbersSearchServer (); </li><li></li><li>  <font color="#0000ff">try</font> { </li><li>  ClientRegister stub = (ClientRegister) UnicastRemoteObject.exportObject (server, 0); </li><li></li><li>  Registry registry = LocateRegistry.createRegistry (12345); </li><li>  registry.bind ( <font color="#A31515">"ClientRegister"</font> , stub); </li><li></li><li>  server.startSearch (); </li><li>  } <font color="#0000ff">catch</font> (Exception e) { </li><li>  System.  <font color="#0000ff">out</font> .println ( <font color="#A31515">"Error occured:"</font> + e.getMessage ()); </li><li>  System.exit (1); </li><li>  } </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  Let's sort the initialization: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  ClientRegister stub = (ClientRegister) UnicastRemoteObject.exportObject (server, 0); </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  We export the remote object and get a stub, through which the client will call the methods of our object.  The second parameter, exportObject, is the port that will be used to connect to the remote object, 0 is the choice of any free port.  stub must be passed to the client.  There are completely different options.  You can even transfer the stub to the client on a 3.5 '' diskette :) We will use the RMI registrar.  It can either be created inside our vm, or used as ‚Äúexternal‚Äù, represented by the rmiregistry utility.  I used the first option: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  Registry registry = LocateRegistry.createRegistry (12345); </li><li>  registry.bind ( <font color="#A31515">"ClientRegister"</font> , stub); </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  Create a logger and associate our stub with the name ClientRegister.  The registrar will accept connections on port 12345. <br><br>  Now the client ( <a href="http://www.everfall.com/paste/id.php%3F7rjnhztufjra">full code</a> ): <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> PrimeNumbersSearchClient implements PrimeChecker { </li><li></li><li>  ... </li><li></li><li>  <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main ( <font color="#2B91AF">String</font> [] args) { </li><li>  PrimeNumbersSearchClient client = <font color="#0000ff">new</font> PrimeNumbersSearchClient (); </li><li></li><li>  <font color="#0000ff">try</font> { </li><li>  Registry registry = LocateRegistry.getRegistry ( <font color="#0000ff">null</font> , 12345); </li><li>  ClientRegister server = (ClientRegister) registry.lookup ( <font color="#A31515">"ClientRegister"</font> ); </li><li></li><li>  PrimeChecker stub = (PrimeChecker) UnicastRemoteObject.exportObject (client, 0); </li><li>  server.register (stub); </li><li></li><li>  } <font color="#0000ff">catch</font> (Exception e) { </li><li>  System.  <font color="#0000ff">out</font> .println ( <font color="#A31515">"Error occured:"</font> + e.getMessage ()); </li><li>  System.exit (1); </li><li>  } </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  The client needs to get a server stub to register. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  Registry registry = LocateRegistry.getRegistry ( <font color="#0000ff">null</font> , 12345); </li><li>  ClientRegister server = (ClientRegister) registry.lookup ( <font color="#A31515">"ClientRegister"</font> ); </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  We find the remote recorder and request a stub associated with it with the name ‚ÄúClientRegister‚Äù.  The first parameter LocateRegistry.getRegistry (null, 12345) is the host (null - localhost), the second is the port. <br><br>  Next, export the client remote object and transfer the stub server (already client) to the server - register.  The server will add the client to the queue of available checkers and start sending numbers to it for verification.  After checking, if it is completed without errors, the client enters the queue again, etc. <br><br>  UPD: moved to Java </div><p>Source: <a href="https://habr.com/ru/post/74639/">https://habr.com/ru/post/74639/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../74626/index.html">We clean the Habrahabr Sandbox from all unsuitable blog entries.</a></li>
<li><a href="../74628/index.html">20 useful and beautiful web applications</a></li>
<li><a href="../74630/index.html">Installation and Tuning Guide for Flight Simulator X Flight Simulator X (FSX)</a></li>
<li><a href="../74633/index.html">How to make a YouTube feed convenient</a></li>
<li><a href="../74636/index.html">Fibonacci numbers</a></li>
<li><a href="../74641/index.html">How to bring MacOS X to mind: a few tips</a></li>
<li><a href="../74643/index.html">The history of one bug or why you should know not only PHP</a></li>
<li><a href="../74644/index.html">Master Class "Secrets of Client Optimization" - as it were</a></li>
<li><a href="../74645/index.html">Greasemonkey for Internet Explorer</a></li>
<li><a href="../74647/index.html">Own, home PBX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
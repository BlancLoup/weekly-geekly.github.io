<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to display dynamic unloading from the database on Atlassian Confluence pages?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There is a huge amount of wiki engines for corporate knowledge bases on the market. If you use Atlassian Confluence , you will probably be interested ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to display dynamic unloading from the database on Atlassian Confluence pages?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/0d1/807/55f/0d180755f4d5430cb62d68d087d33dc9.png"><br>  There is a huge amount of wiki engines for corporate knowledge bases on the market.  If you use <a href="https://www.atlassian.com/software/confluence">Atlassian Confluence</a> , you will probably be interested to learn how to expand the standard wiki-capabilities of the system.  And use Confluence, including, in the form of a storefront to dynamically display any useful information, for example: <br><br><ul><li>  your product metrics </li><li>  Agile team metrics </li><li>  graphs of the growth of your team, </li><li>  list of the nearest birthdays, </li><li>  etc. </li></ul>  In this article, I want to share my experience on how to display such information most beautifully and conveniently on the pages of Confluence. <br><a name="habracut"></a><br><h3>  Solvable problem </h3><br>  For clarity, I will consider the task of accounting for your company's employees, using the example of famous scientists of the past.  That is, in the DBMS there is a table, each entry of which is an individual employee, each field of this entry is a characteristic of the employee (full name, date of birth, telephone ...).  For simplicity, <a href="https://www.atlassian.com/software/jira">Atlassian JIRA</a> DBMS will be used as a DBMS, which stores information about projects, tasks, etc. <br><br><h3>  Ways to display results </h3><br>  And so, we come to the most interesting - how dynamic information will look on the pages of Confluence.  Below you can compare several ways to display information on employees. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  0. JIRA filter </h4><br>  Before displaying information on the page in Confluence, let's see how it will look in JIRA. <br><br>  To do this, you need to write a simple query, select the columns of interest to display: <br><br><img src="https://habrastorage.org/files/0c7/807/99b/0c780799be8f48ecbade9066c8bf8ba6.png"><br><br>  And, for the future, save the query as a filter: <br><br><img src="https://habrastorage.org/files/60c/879/9ff/60c8799ff9034a2996729d5b5e41e382.png"><br><br><h4>  1. JIRA Macro </h4><br>  It‚Äôs no secret that Atlassian products have tight integration with each other.  For example, on the Confluence page, in a couple of clicks, you can display a list of tasks in a particular project, or according to a specified filter. <br><br>  First you need to add a macro: <br><br><img src="https://habrastorage.org/files/8c3/859/452/8c38594527f247a3aad5e60346dbbe2a.png"><br><br>  Then write a request with the JIRA project and the staff departments: <br><br><img src="https://habrastorage.org/files/9a9/a0d/41e/9a9a0d41eef64e81bb29774e0b136e7d.png"><br><br>  Then select the columns to display in the summary table: <br><br><img src="https://habrastorage.org/files/19f/661/bcf/19f661bcf10741daa125047cc8dcb0a8.png"><br><br>  And this is the result: <br><br><img src="https://habrastorage.org/files/2e5/f89/8f8/2e5f898f825d4bc18b8b902d6e704f63.png"><br><br>  The resulting table is dynamically updated when the Confluence page reloads, or when you click on ‚ÄúRefresh‚Äù. <br><br>  In addition, the table can be sorted by clicking on the column names.  The names of the columns coincide with the names of the fields, they can not be renamed.  A paging is also available, in case there are too many entries (in our example, the page size is 20 entries). <br><br><h4>  2. JIRA gadget </h4><br>  Many JIRA users use <a href="https://confluence.atlassian.com/adminjiraserver071/using-dashboard-gadgets-802592293.html">portlets / gadgets</a> to display important project information on dashboards: <br><br><img src="https://habrastorage.org/files/384/dfa/738/384dfa7389a146e3909a3af84f89e96d.png"><br><br>  Here is the list of employees on the JIRA gadget: <br><br><img src="https://habrastorage.org/files/bbb/7fe/77d/bbb7fe77d28d4b2aae05bffb32100fbe.png"><br><br>  Maybe not everyone knows that <a href="https://confluence.atlassian.com/conf57/adding-jira-gadgets-to-a-confluence-page-701435363.html">JIRA gadgets can be displayed on the pages of Confluence</a> .  The only difference from the previous case is that the HTML code is generated on the JIRA side and displayed in Confluence unchanged. <br><br><h4>  3. Direct SQL query </h4><br>  After experimenting with particular cases of JIRA mapping mechanisms, we move on to the more general case of an arbitrary DBMS and queries to it. <br><br>  For clarity of comparison, I wrote a SQL query to the same JIRA DBMS: <br><br><img src="https://habrastorage.org/files/234/f6e/b0f/234f6eb0f735415188f127a867885394.png"><br><br>  Unlike the previous three cases, it will be launched through the usual JDBC, without integration mechanisms between Confluence and JIRA. <br><br>  Here is the result of the query in the development environment: <br><br><img src="https://habrastorage.org/files/96f/542/27b/96f54227bce543a29b5f53252e1a3d62.png"><br><br>  To run this query and view the results on the Confluence page, there is a <a href="https://bobswift.atlassian.net/wiki/display/SQL">SQL for Confluence</a> macro from Bob Swift: <br><br><img src="https://habrastorage.org/files/2c1/d80/d6b/2c1d80d6b0624309b519ca8b1f461183.png"><br><br>  Here is the result of the query: <br><br><img src="https://habrastorage.org/files/83b/859/2c6/83b8592c60334f74b6186a0428a594f0.png"><br><br>  Unlike previous mechanisms, in SQL for Confluence there is no possibility of paginal output of results.  But in the macro settings, you can turn off the auto-numbering of the rows of the executed query.  In addition, it is possible to calculate the sum, average, maximum value by columns (in our example, irrelevant). <br><br>  From a security point of view, the macro allows you to perform an arbitrary SQL query on the DBMS.  To prevent data leakage or corruption, you must, first, configure the rights of the technical user from which SQL queries are run.  At a minimum, disable recording.  Secondly, to limit the rights in Confluence to edit the page with the request. <br><br>  To add the ability to filter the results of queries, the SQL for Confluence macro works well together with another macro - <a href="https://docs.stiltsoft.com/display/public/TableFilter/Table%2BFilter%2Bfor%2BConfluence">Table Filter for Confluence</a> from StiltSoft: <br><br><img src="https://habrastorage.org/files/663/062/db6/663062db6b6744deb9d16395e77b33f2.png"><br><br>  As a result, a set of fields is attached to the table above, by changing the values ‚Äã‚Äãof which you can filter: <br><br><img src="https://habrastorage.org/files/0d1/807/55f/0d180755f4d5430cb62d68d087d33dc9.png"><br><br><h4>  4. eazyBI </h4><br>  And the final, the richest and most complex macro called <a href="https://eazybi.com/">eazyBI is</a> offered by the eponymous company.  This product is tailored to the solution of more complex tasks in the direction of BI, deserves a separate article.  But eazyBI is quite suitable for our task. <br><br>  First, you need to configure the data source and specify the SQL query to select data: <br><br><img src="https://habrastorage.org/files/f71/5f4/d10/f715f4d107084c13943ca7d37c03d2bd.png"><br><br>  The eazyBI engine will execute the query, unload the column names and the first rows of the result: <br><br><img src="https://habrastorage.org/files/338/6e5/128/3386e512853e45c197aee3971fc47a3c.png"><br><br>  Then start importing data, create a cube of them.  Combining the dimensions of the cube in the correct order, we get this unloading: <br><br><img src="https://habrastorage.org/files/634/040/5b6/6340405b64204ed29eef2da3933d11f9.png"><br><br>  Which through the corresponding macro is added to the Confluence page. <br><br>  In eazyBI, all functions are present, as in the mechanisms described above.  In addition, there is auto-update, export to Excel, convenient grouping by dates and much, much more. <br><br>  Among the shortcomings, I want to highlight the peculiarity of the work of BI engines - before displaying, the result of the query is unloaded into a separate DBMS, from which there is already a display in Confluence.  These requests are not triggered in real time, but at intervals (from 5 minutes to 1 day).  Therefore, eazyBI is better to use on large data arrays, where the speed of query execution is critical (as a result, the load on the DBMS), and the freshness of the data is not very critical. <br><br><h3>  Results </h3><br>  Here‚Äôs what comes out of the bottom line: <br><table><tbody><tr><td></td><td>  <b>viewing</b> </td><td>  <b>sorting</b> </td><td>  <b>paging</b> </td><td>  <b>column renaming</b> </td><td>  <b>filtering</b> </td><td>  <b>numbering</b> </td><td>  <b>real time execution</b> </td></tr><tr><td>  <b>0. JIRA filter</b> </td><td>  not </td><td>  Yes </td><td>  Yes </td><td>  not </td><td>  not </td><td>  not </td><td>  Yes </td></tr><tr><td>  <b>1. JIRA Macro</b> </td><td>  Yes </td><td>  Yes </td><td>  Yes </td><td>  not </td><td>  not </td><td>  not </td><td>  Yes </td></tr><tr><td>  <b>2. JIRA gadget</b> </td><td>  Yes </td><td>  Yes </td><td>  Yes </td><td>  not </td><td>  not </td><td>  not </td><td>  Yes </td></tr><tr><td>  <b>3. SQL query</b> </td><td>  Yes </td><td>  Yes </td><td>  not </td><td>  Yes </td><td>  Yes </td><td>  Yes </td><td>  Yes </td></tr><tr><td>  <b>4. eazyBI</b> </td><td>  Yes </td><td>  Yes </td><td>  Yes </td><td>  Yes </td><td>  Yes </td><td>  Yes </td><td>  not </td></tr></tbody></table><br>  Thus, I would like to advise you - if the data is stored in JIRA, use standard mechanisms until they satisfy your needs.  If you do not satisfy, or the data is not stored in the JIRA DBMS, then experiment with SQL + Table Filter.  If there is a lot of data, getting them resource-intensive and relevance is not so important, feel free to use eazyBI. <br><br>  <b>PS</b> Here is a last year's <a href="https://habrahabr.ru/post/273353/">article from the sandbox</a> , in which the data visualization engines in Confluence are described in more detail.  Including, mentioned Table Filter. </div><p>Source: <a href="https://habr.com/ru/post/306788/">https://habr.com/ru/post/306788/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../306776/index.html">Habrahabr visiting Alexander Lyamina, QRATOR</a></li>
<li><a href="../306778/index.html">How we certified our kits "Experiment in a box"</a></li>
<li><a href="../306782/index.html">Churn</a></li>
<li><a href="../306784/index.html">Shannon Communications Model (translation of Great Principles of Computing)</a></li>
<li><a href="../306786/index.html">Resource allocation in large high performance clusters. Lecture in Yandex</a></li>
<li><a href="../306790/index.html">Expanded commentary on the articles "Systematization of publications in the web"</a></li>
<li><a href="../306792/index.html">We create stub services for integration testing on Apache Camel (using Scala DSL)</a></li>
<li><a href="../306794/index.html">July update of Microsoft Azure and VNET peering</a></li>
<li><a href="../306796/index.html">Introducing 3CX Phone System v15 SP1 and test the system on a mini PC instead of a server</a></li>
<li><a href="../306798/index.html">How many neurons do you need to recognize a bridge summary?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
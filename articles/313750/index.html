<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The most popular network for supercomputers or Why did we choose InfiniBand?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 

 Bandwidth inside the cloud - this item is very important from a technological point of view. This is a scrupulous moment, many suppliers a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The most popular network for supercomputers or Why did we choose InfiniBand?</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/company/simnetworks/blog/313750/"><img src="https://habrastorage.org/files/6d5/7ea/eab/6d57eaeab1ea44b09c6cfcaf126244a4.png"></a> <br><br>  Foreword <br><br>  <i>Bandwidth inside the cloud - this item is very important from a technological point of view.</i>  <i>This is a scrupulous moment, many suppliers are reluctant to talk about this topic.</i>  <i>They do not want to reveal the structure of their network.</i>  <i>But if you look at the essence of the issue, then it depends on how much quality service you buy from your provider.</i>  <i>It depends a lot on the speed inside the cloud.</i>  <i>How are the nodes connected?</i>  <i>At what speeds?</i>  <i>What protocols?</i>  <i>Services of many enterprises may well work on 1 gigabit, but you need to consider that most providers use 10G, and only the most advanced build their clouds on 40G or InfiniBand 56G.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Under the cut a couple of thoughts about why we chose InfiniBand for our cloud. <br><a name="habracut"></a><br>  The InfiniBand technology itself has existed for a long time, it was developed and started to be used among supercomputers.  In a high-performance system environment, it was necessary to combine large clusters with a linking bus for fast data exchange. <br><br><h1>  InfiniBand infrastructure tasks </h1><br>  Infiniband itself is as old as ethernet.  This protocol was developed in the depths of the supersystems, respectively, its tasks for which it was designed, the requirements for performance, latency and architecture were dictated by cluster systems.  With the further development of the Internet, InfiniBand has not developed so rapidly, most likely for the reason that this standard is quite niche. <br><br>  Now, with the growth of cloud technologies that have already come out so to speak to the people, when clouds are already used not only in high-computing systems, but are used at the consumer level - here InfiniBand has gained a second wind. <br><br>  This protocol has not only increased in performance, but has already become quite widespread; earlier, even in high-performance environments, the data exchange rate was significantly lower - 4, 8 gigabits.  Today, 56 gigabits is the current standard, which has already become widespread.  Now manufacturers of InfiniBand equipment, such as Mellanox, sell equipment with a bandwidth of 100 gigabits. <br><br>  At this rate, InfiniBand vendors next year can release even faster equipment.  The main advantages of the InfiniBand protocol are high throughput speeds and, most importantly, low latency rates.  The standard itself and the equipment allow transmitting a packet 10 times faster than ethernet.  For high-performance computers and modern data transmission systems, this played a big role. <br><br><img src="https://habrastorage.org/files/56b/343/2a7/56b3432a76fe4cc3b4044444c22041bd.png"><br><br>  The next important point is that this technology has already been improved in the environments where it was developed.  This standard already has, so to speak, the ‚Äúright‚Äù plug-in-play architecture ‚Äî everything is quite automated: building a tree, infrastructure, etc.  Therefore, from the engineer does not require a large number of gestures to configure.  In addition, in the protocol itself, the margin of fault tolerance has already been laid. <br><br>  Of course, on Ethernet, all these capabilities are also present - but implemented by a whole pool of technologies - that all need to be configured separately, and which need to be tested and tested for compatibility.  The engineer, when working with Ethernet, needs to take into account a larger number of infrastructure parts. <br><br><img src="https://habrastorage.org/files/007/f88/886/007f88886bfe4d4a85f79f95ffb51222.png"><br><br>  Melanox also positioning InfiniBand equipment as <abbr title="Hyper-converged systems are modular systems that can be easily and quickly scaled to the required capacity.">hyperconvergent</abbr> - all their equipment can be used for both InfiniBand networks and ethernet networks - Ethernet is implemented on top of the InfiniBand network.  This means that there will be no need to install different switches for different networks - we install one device and select a port group as san, the second port group will be Ethernet 40 gigabits.  This trend comes from the environment of the birth of the protocol - hyperconvergent infrastructures.  Thus, the maximum number of roles is combined in one device - the equipment is unified.  At the same time, it must be said that, all other things being equal, InfiniBand as a technology is simple, it does not have many other functions that the ethernet standard has. <br><br>  Now InfiniBand protocol is actively used at the san network level in cloud environments. <br>  At the moment, we are designing and planning to implement the second architecture of our cloud, where we will fully switch to the hyper-convergent infrastructure - InfiniBand will be at the level of the san network and at the level of the wan network.  If we compare this equipment with conventional switches, the speed is higher with lower delays (which is very important for high-loaded applications).  If we talk in numbers, then when using the ethernet-protocol, delays are on the order of 20-30-40 milliseconds, then in InfiniBand - a delay of 1-2 milliseconds. <br><br><img src="https://habrastorage.org/files/5d5/510/957/5d551095790946199db347b939c8e1c7.png"><br><br>  In our cloud infrastructure, in our data centers, we use equipment Mellanox 56 gigabits.  So far, we are not considering switching to 100 gigabits, since for our tasks 56 gigabits is enough with a margin, and there is a reserve for the future.  We chose this protocol for several reasons: <br><br><ul><li>  universality; </li><li>  hyperconvergence; </li><li>  cost; </li><li>  growth opportunity. </li></ul><br>  Mellanox, how to produce InfiniBand equipment makes, in our opinion, the biggest contribution to the development of this protocol: introduces many new functions, and improves the protocol itself.  By the way, many manufacturers either brand the Mellanox platform, or take melanox chips and solder them into their equipment. <br><br><img src="https://habrastorage.org/files/09f/7d8/d22/09f7d8d2230a45bc9a4f3112b622987e.png"><br><br>  At the moment there are all-flash systems built on fast flash disks on the market.  But for this kind of systems a fast data transfer environment is required.  With an insufficient exchange rate between the storages, consumers of the service will not receive data at a good speed, then the whole point is lost in fast flash memory (just as a very fast machine requires a very good road).  There are often opinions that 50% of IT tasks still do not require such crazy speeds.  Flash drives show themselves well where there are large databases, and you need high performance for fast data retrieval, where administrators complain most often - ‚Äúmore powerful processors are needed ... faster disks ...‚Äù.  Also, high-speed, high-performance storage requires a solution like DaaS, VDI, for example, when all virtual machines access the storage, which leads to so-called  bootstorm and freeze storage.  For other tasks, such as: terminal servers, mail servers - there is enough speed of SSD and SATA drives.  Therefore, we believe that there is no need to pay for unnecessary speed. <br><br><h1>  Why did we decide to use InfiniBand? </h1><br>  Our task was to build a fairly scalable storage facility - and there was a variant of the classic storage facility - FiberChannal + regular storage.  Or it was possible to look towards the new-fashioned SDS (Sofware Define Storage) - by studying this technology in more detail, it became obvious that with this option of building the infrastructure, not so much bandwidth (on average 15 Gigabits per channel is enough), but very low packet transfer delays.  Yes, there are ethernet switches that can do delays, like InfiniBand - but these are such big ‚Äúcombines‚Äù - that we didn‚Äôt fit for either the price or the necessary tasks (in our opinion, this equipment is not quite suitable for network storage) , and more convenient for use in a van network. It was decided to take InfiniBand Mellanox equipment on the test. After successful tests, the equipment was installed in our IT infrastructure. <br><br>  <i>Nota Bene: During the tests, they noted that in the presentations of Mellanox there was no ‚Äúpure‚Äù marketing - all the characteristics of the equipment fully corresponded to the declared functionality.</i> <br><br>  Useful UPD <a href="https://habrahabr.ru/company/simnetworks/blog/313750/">from the comment</a> (thanks to <a href="https://habrahabr.ru/users/igor_o/" class="user_link">Igor_O</a> ): <br><br>  You have forgotten another very important feature of Infiniband that grew out of its supercomputer past: the possibility of building a non-blocking network (with a thick tree topology).  Those.  such a network, where if 50% of the network nodes simultaneously start transmitting data to another 50% of the network, the delays and data transfer rate will remain at the same level as when communicating one node with one node. <br><br>  Useful links: <br><br>  ¬ª <a href="http://www.mellanox.com/related-docs/whitepapers/InfiniBandFAQ_FQ_100.pdf">InfiniBand in questions and answers (eng)</a> <br>  ¬ª <a href="https://habrahabr.ru/company/croc/blog/232509/">How did we transfer the cloud from Ethernet 10G to Infiniband 56G</a> <br>  ¬ª <a href="https://habrahabr.ru/company/intel/blog/154339/">Infiniband: matrix for data</a> <br>  ¬ª <a href="https://habrahabr.ru/company/croc/blog/191306/">About InfiniBand: how we reduced ping from 7 Œºs to 2.4 Œºs (and test results)</a> <br><br> <a href="https://www.sim-networks.com/protected-cloud%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink"><img src="https://habrastorage.org/files/c2e/22e/3bd/c2e22e3bd22c4a0985f83c601d0394f4.png"></a> <br><br><hr><br>  <a href="https://www.sim-networks.com/protected-cloud%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink">SIM-CLOUD - Fail-safe cloud in Germany</a> <br><br>  <a href="https://www.sim-networks.com/dedicated-custom%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink">Dedicated servers in reliable data centers in Germany!</a> <br>  Any configuration, quick build and free installation </div><p>Source: <a href="https://habr.com/ru/post/313750/">https://habr.com/ru/post/313750/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../313736/index.html">What applications, games and online stores do the Chinese use?</a></li>
<li><a href="../313740/index.html">Acceleration of the library HeatonResearchNeural (neural network) 30 times</a></li>
<li><a href="../313742/index.html">Used servers: exposing the purchase with the hands</a></li>
<li><a href="../313744/index.html">The opening of a mobile development studio from scratch in St. Petersburg - 3.5 years later. Reincarnation. Part 2</a></li>
<li><a href="../313746/index.html">Busfor's start-up startup has raised $ 20 million in investment</a></li>
<li><a href="../313752/index.html">Video description of SalesForce CRM. Subtitles in Russian</a></li>
<li><a href="../313754/index.html">Required RMM monitors: how to detect incidents before they become problems in the IT network</a></li>
<li><a href="../313756/index.html">Do developers want to work in startups and be their founders - infographics on the results of the survey</a></li>
<li><a href="../313760/index.html">Attackers specialize in compromising network routers in Brazil</a></li>
<li><a href="../313762/index.html">Security in IoT: Azure IoT Suite for those who start from scratch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Five easy steps for understanding JSON Web Tokens (JWT)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I present to you my rather loose translation of Article 5 Easy Steps to Understanding JSON Web Tokens (JWT) . This article will discuss what JSON Web ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Five easy steps for understanding JSON Web Tokens (JWT)</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/getpro/habr/post_images/ae6/48a/b1f/ae648ab1f46718aea34fc91053bb0078.jpg" alt="jwt"></p><br><p>  I present to you my rather loose translation of Article <a href="https://medium.com/vandium-software/5-easy-steps-to-understanding-json-web-tokens-jwt-1164c0adfcec">5 Easy Steps to Understanding JSON Web Tokens (JWT)</a> .  This article will discuss what <em>JSON Web Tokens (JWT) are</em> and what they eat.  That is, what role do they play in user authentication and ensuring the security of application data. </p><a name="habracut"></a><br><p>  First, consider the formal definition. </p><br><blockquote> <code>JSON Web Token (JWT)</code> is a <em>JSON</em> object that is defined in the open standard <a href="https://tools.ietf.org/html/rfc7519">RFC 7519</a> .  It is considered one of the safe ways to transfer information between two participants.  To create it, it is necessary to define a header with general information on the token, payload data, such as user id, its role, etc.  and signatures (signature). <br>  By the way, <em>JWT</em> is correctly pronounced as <code>/d í…ít/</code> </blockquote><p>  In simple terms, <em>JWT</em> is just a string in the following format <code>header.payload.signature</code> . <br>  Suppose we want to register on the site.  In our case, there are three parties ‚Äî user <code>user</code> , <code>application server</code> and <code>authentication server</code> .  The authentication server will provide the user with a token with which he can later interact with the application. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/4e6/230/2d9/4e62302d99ae5382cfa1842a7d8e02da.png" alt="How the application uses JWT to verify user authentication."></p><br><p>  The application uses <em>JWT</em> to verify user authentication as follows: </p><br><ol><li>  First, the user enters the authentication server using an authentication key (it can be a <em>login / password</em> pair, or a <em>Facebook</em> key, or a <em>Google</em> key, or a key from another account). </li><li>  The authentication server then creates the <em>JWT</em> and sends it to the user. </li><li>  When a user makes a request to the application's API, he adds the previously received <em>JWT</em> to it. </li><li>  When a user makes an API request, the application can check on the <em>JWT</em> submitted with the request whether the user is who he claims to be.  In this scheme, the application server is configured to check whether the incoming <em>JWT is</em> exactly what was created by the authentication server (the verification process will be explained later in more detail). </li></ol><br><h2 id="struktura-jwt">  JWT structure </h2><br><p>  <em>JWT</em> consists of three parts: header <code>header</code> , <code>payload</code> and signature <code>signature</code> .  Let's go through each of them. </p><br><h3 id="shag-1-sozdaem-header">  Step 1. Create a HEADER </h3><br><p>  The <em>JWT header</em> contains information on how the <em>JWT</em> signature should be calculated.  A header is also a <em>JSON</em> object that looks like this: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">header</span></span> = { "alg": "HS256", "typ": "JWT"}</code> </pre> <br><p>  The <code>typ</code> field does not tell us anything new, just that it is <em>JSON Web Token</em> .  More interesting here is the <code>alg</code> field, which defines the hashing algorithm.  It will be used when creating the signature.  <code>HS256</code> is nothing more than a <code>HMAC-SHA256</code> ; only one secret key is needed to calculate it (for more details, see step 3).  Another <code>RS256</code> algorithm can also be used - unlike the previous one, it is asymmetric and creates two keys: public and private.  Using a private key, a signature is created, and using a public key, only the authenticity of the signature is verified, so we do not need to worry about its security. </p><br><h3 id="shag-2-sozdaem-payload">  Step 2. Create PAYLOAD </h3><br><p>  <strong>Payload</strong> is <strong>payload</strong> that is stored inside <em>JWT</em> .  This data is also called <em>JWT-claims</em> .  In the example that we are considering, the authentication server creates a <em>JWT</em> with information about the user <em>id</em> - <strong>userId</strong> . </p><br><pre> <code class="hljs objectivec">payload = { <span class="hljs-string"><span class="hljs-string">"userId"</span></span>: <span class="hljs-string"><span class="hljs-string">"b08f86af-35da-48f2-8fab-cef3904660bd"</span></span> }</code> </pre> <br><p>  We put only one claim in the <em>payload</em> .  You can put as many <em>applications</em> as you like.  There is a list of standard <em>applications</em> for <em>JWT</em> payload - here are some of them: </p><br><ul><li>  <em>iss</em> (issuer) - identifies the application from which the token is sent. </li><li>  <em>sub</em> (subject) - defines the topic of the token. </li><li>  <em>exp</em> (expiration time) - token lifetime. </li></ul><br><p>  These fields can be useful when creating <em>JWT</em> , but they are not required.  If you want to know the entire list of available fields for <em>JWT</em> , you can have a look at the <a href="https://en.wikipedia.org/wiki/JSON_Web_Token">Wiki</a> .  But it is worth remembering that the more information is transmitted, the more <em>JWT</em> itself will end up as a result.  Usually there are no problems with this, but still it can negatively affect performance and cause delays in the interaction with the server. </p><br><h3 id="shag-3-sozdaem-signature">  Step 3. Create SIGNATURE </h3><br><p>  The signature is computed using the following pseudo-code: </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SECRET_KEY = <span class="hljs-string"><span class="hljs-string">'cAtwa1kkEy'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> unsignedToken = base64urlEncode(header) + <span class="hljs-string"><span class="hljs-string">'.'</span></span> + base64urlEncode(payload) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> signature = HMAC-SHA256(unsignedToken, SECRET_KEY)</code> </pre> <br><p>  The <strong>base64url</strong> algorithm encodes the header and payload created in steps <em>1</em> and <em>2</em> .  The algorithm connects the encoded strings through a dot.  Then, the resulting string is hashed by the algorithm specified in the header based on our secret key. </p><br><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">/ header eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ payloadey J1c2VySWQiOiJiMDhmODZhZi0zNWRhLTQ4ZjItOGZhYi1jZWYzOTA0NjYwYmQifQ /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ signature -xN_h82PHVTCMA9vdoHrcZxH-x5mb11y1537t3rGzcM</span></span></code> </pre> <br><h3 id="shag-4-teper-bedinim-vse-tri-jwt-komponenta-vmeste">  Step 4. Now combine all three JWT components together. </h3><br><p>  Now that we have all three components, we can create our <em>JWT</em> .  It's quite simple, we connect all the received elements into a string through a dot. </p><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> token = encodeBase64Url(header) + <span class="hljs-string"><span class="hljs-string">'.'</span></span> + encodeBase64Url(payload) + <span class="hljs-string"><span class="hljs-string">'.'</span></span> + encodeBase64Url(signature) <span class="hljs-comment"><span class="hljs-comment">// JWT Token // eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOiJiMDhmODZhZi0zNWRhLTQ4ZjItOGZhYi1jZWYzOTA0NjYwYmQifQ.-xN_h82PHVTCMA9vdoHrcZxH-x5mb11y1537t3rGzcM</span></span></code> </pre> <br><p>  You can try creating your own <em>JWT</em> at <a href="https://jwt.io/">jwt.io.</a> <br>  Let's return to our example.  Now the authentication server can send to the user <em>JWT</em> . </p><br><h3 id="kak-jwt-zaschischaet-nashi-dannye">  How does JWT protect our data? </h3><br><p>  It is very important to understand that using <em>JWT</em> <strong>does NOT</strong> hide or mask data automatically.  The reason why <em>JWT is</em> used is to verify that the data sent was actually sent to an authorized source.  As demonstrated above, the data inside <em>JWT is</em> encoded and signed, note that this is not the same thing that is encrypted.  The purpose of data coding is structure transformation.  Signed data allows the recipient to verify the data source authentication.  Thus, encoding and signing data does not protect them.  On the other hand, the main purpose of encryption is to protect data from unauthorized access.  For a more detailed explanation of the difference between encryption and encryption, as well as how hashing works, see <a href="https://danielmiessler.com/study/encoding-encryption-hashing-obfuscation/">this article</a> .  Since <em>JWT is</em> only encoded and signed, and since <em>JWT is</em> not encrypted, <em>JWT</em> does not guarantee any security for sensitive data. </p><br><h3 id="shag-5-proverka-jwt">  Step 5. Verify JWT </h3><br><p>  In our simple example of 3 participants, we use <em>JWT</em> , which is signed using the <code>HS256</code> algorithm, and only the authentication server and the application server know the secret key.  The application server receives the secret key from the authentication server during the installation of authentication processes.  Since the application knows the secret key when the user makes an API request with a token attached to it, the application can perform the same signing algorithm for <em>JWT</em> as in step <em>3</em> .  The application can then verify this signature by comparing it with its own calculated hashing.  If the signatures match, then <em>JWT is</em> valid, i.e.  came from a trusted source.  If the signatures do not match, then something went wrong - perhaps this is a sign of a potential attack.  Thus, while testing <em>JWT</em> , the application adds <em>a layer of trust</em> between itself and the user. </p><br><h2 id="v-zaklyuchenie">  Finally </h2><br><p>  We walked through what <em>JWT is</em> , how it is created and how it is validated, how it can be used to establish trust between the user and the application.  But this is only a piece of the puzzle of a large topic of authorization and ensuring the protection of your application.  We considered only the basics, but without them it is impossible to move on. </p><br><h2 id="poleznye-ssylki">  useful links </h2><br><ol><li>  <a href="https://medium.com/vandium-software/5-easy-steps-to-understanding-json-web-tokens-jwt-1164c0adfcec">5 Easy Steps to Understanding JSON Web Tokens (JWT)</a> </li><li>  <a href="https://medium.com/%40rajaraodv/securing-react-redux-apps-with-jwt-tokens-fcfe81356ea0">Securing React Redux Apps With JWT Tokens</a> </li><li>  <a href="https://habrahabr.ru/company/Voximplant/blog/323160/">Why do I need Refresh Token if there is Access Token?</a> </li></ol></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/340146/">https://habr.com/ru/post/340146/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../340132/index.html">Planning practices. Assessment of tasks</a></li>
<li><a href="../340136/index.html">Weekend Reading: 22 independent development, security, testing and game development blogs</a></li>
<li><a href="../340138/index.html">The digest of interesting materials for the mobile developer # 225 (October 9-October 15)</a></li>
<li><a href="../340140/index.html">WiFi roaming - 802.11i / r / k / v / OKC, what we really need and how to recognize it</a></li>
<li><a href="../340144/index.html">Waf eyes hackers</a></li>
<li><a href="../340148/index.html">Digital events for the week</a></li>
<li><a href="../340150/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ284 (October 9 - 15, 2017)</a></li>
<li><a href="../340154/index.html">Change sex and race on a selfie using neural networks</a></li>
<li><a href="../340156/index.html">FrontFest.JS: ClojureScript in production, optimization of React rendering and how to (not) get depressed with Angular</a></li>
<li><a href="../340158/index.html">VoIP server for a small company (FreePBX 14, Asterisk 15, Ubuntu 16.04) part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
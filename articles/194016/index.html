<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MVVM pattern and page navigation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Applying page navigation is a fairly topical task for desktop WPF-MVVM applications. 
 There are plenty of useful guides for organizing such navigatio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MVVM pattern and page navigation</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/739/6cd/31a/7396cd31a1cda24d854974f971ab79ab.png"><br>  Applying page navigation is a fairly topical task for desktop WPF-MVVM applications. <br>  There are plenty of useful guides for organizing such navigation in the network. <br>  <i>And</i> , of course, Habrahabr is no exception (there are articles <a href="http://habrahabr.ru/post/63767/">one</a> and <a href="http://habrahabr.ru/post/140749/">two</a> ). <br>  Looking at the first article you will learn about <b>NavigationService</b> and the ability to use <b>Hyperlink</b> . <br>  If you follow the second link, you will learn how to use the <b>NavigationService</b> in the so-called ‚ÄúCode Behind‚Äù. <br>  Thus, the complete solution in these articles is not presented (in my opinion). <br>  <i>It</i> seems to fill the gap and bring to your attention, it seems to me, quite a working solution. <br>  <i>And I</i> absolutely do not pretend to a complete component for organizing page navigation. <br>  <i>I would be</i> grateful for useful comments, amendments and additions. <br>  I'm going to hell if my implementation of the navigator is useful to someone. <br><a name="habracut"></a><br><br><h4>  Introduction </h4><br>  Everyone who has already worked with WPF is probably familiar with the MVVM pattern (gave links at the end of the article).  After all, the concept of MVVM is simple and, at a minimum, the intuitive benefit of its use should be clear.  If you want it to show itself in all its glory, then put as little logic as possible into User Code Controls in ‚ÄúCode Behind‚Äù and in no case use direct links to the UI within the ViewModels.  This approach will give you a big profit in the form of the ability to test ViewModels separately from controls.  Another good practice is to minimize instantiation of ViewModels directly in controls.  It is not great if the control creates for itself a ViewModel of a specific type - in this case, it will simply be more difficult to control a test doll.  The situation will be different when some parental control is busy creating ViewModels for other screens, because then the code can turn into an untestable bunch of spaghetti.  If other ViewModels are responsible for creating ViewModels, then testing will become much easier. <br><br>  Let's imagine an application with a navigation bar, multiple screens and dialog boxes.  Something like this is presented below. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/6d7/62d/734/6d762d734abf15e345a4e9937005ec22.png"><br><br>  We can see several entities: the main window, the navigation bar with buttons, the current page and the dialog above this page.  In our paging application, HyperLink could be used, instead of using TextBlock buttons with HyperLink as content.  HyperLink has a property that specifies the name of the Frame in which to navigate to the new page.  And everything seems to be fine, but using HyperLink it is difficult to transfer the page to the desired ViewModel'and. <br>  I saw on the net a couple of solutions to this problem: <br><ul><li>  In the Frame.Navigated event in the main application window, through the Code Behind, you can access the frame-loaded content and put the created in the same place in the Code Behind ViewModel there.  Thus, the creation of ViewModels for all pages will be concentrated in a single handler using the long if‚Ä¶ else if‚Ä¶ or switch.  About the fact that testing such a ‚ÄúHard Coded‚Äù navigation process is extremely difficult to automate, I am silent. </li><li>  Another solution is to create an instance of Page and ViewModel'and under it, putting ViewModel'i in the DataContext of the Page instance and calling Navigate on the frame with the transfer of the created Page instance.  This solution is slightly better than the previous one, but still not at all the ‚ÄúMVVM-way‚Äù. </li><li>  The third solution is the use of PRISM libraries.  It is used in the sector of large enterprise applications for implementing composite UI.  If you are familiar with AngularJS, then understand what it is.  Some RegionManager is implemented in which parts of the UI are registered.  Then, through the created manager, the control is instantiated by a certain alias, as well as the assignment of the necessary data context.  This functionality is similar to what is already implemented in the WPF NavigationService. </li></ul><br>  The first two solutions are a clear crutch.  PRISM is a whole UI composition framework.  It is certainly worth investing in learning about it, but for small applications (proof of concept, for example), the use of such things as IoC and PRISM may be impractical. <br><br>  What is the simplest solution that could more or less smoothly fit into the MVVM context?  The Page class in Silverlight has an overloaded OnNavigatedTo method.  In this method, it would be convenient to accept the ViewModel passed to the NavigationService.Navigate (Uri uri, object navigationContext) as the second parameter.  However, in WPF, Page has no such method.  At least I have not found it or something equivalent.  We need some kind of intermediary or, if you wish, a manager who will control page navigation and shift the desired ViewModel from the method parameter to the DataContext.  The implementation of such a navigation manager will be discussed in this article. <br>  In the next section, I will talk about the implementation of the solution kernel, the navigation manager.  Then, it will be told about what needs to be implemented on the UI and ViewModel layers.  To save time, you can read the section ‚ÄúNavigation Manager‚Äù, and think out the rest while solving your tasks. <br>  Who is interested in looking at the code right away can go to the <a href="https://github.com/homoluden/MVVM-Navigation">repository on GitHub</a> . <br><br><h4>  Navigation manager </h4><br>  This manager is implemented as a singleton with double instance checking for null (the so-called <a href="http://msdn.microsoft.com/en-us/library/ff650316.aspx">Double-Check Locking Singleton</a> , a multi-threaded version of the singleton).  Using singleton is my preference.  So it's easier for me to control the life cycle.  You might also have a simple static class. <br>  Singleton implementation code see below. <br><div class="spoiler">  <b class="spoiler_title">Singleton</b> <div class="spoiler_text"><pre><code class="hljs scala">#region <span class="hljs-type"><span class="hljs-type">Singleton</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> static volatile <span class="hljs-type"><span class="hljs-type">Navigation</span></span> instance; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> static <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">syncRoot</span></span></span><span class="hljs-class"> </span></span>= <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Object</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-type"><span class="hljs-type">Navigation</span></span>() { } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> static <span class="hljs-type"><span class="hljs-type">Navigation</span></span> <span class="hljs-type"><span class="hljs-type">Instance</span></span> { get { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (instance == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { lock (syncRoot) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (instance == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) instance = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Navigation</span></span>(); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> instance; } } #endregion</code> </pre> <br>  In the code above, you can see that I made the <b>Instance</b> property private.  This is done for simplicity so that nothing extra looks out.  In practice, you may need to make it available publicly.  Instead of a private property of a singleton instance, I created a public property of the Service navigation <b>service</b> (of type NavigationService), which transmits calls through a private instance of a singleton.  It was possible to do the opposite, but then all the calls from the outside would have to be done through an instance, i.e. <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">Navigation</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Instance</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Service</span></span></code> </pre><br>  instead <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">Navigation</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Service</span></span></code> </pre><br>  Choose the option that you like best.  I think the last option is simpler, but it requires additional implementation of static properties and methods.  Therefore, with the implementation of the new functionality, it may be more profitable to open the instance property (Navigation.Instance). <br></div></div><br>  The <b>Service</b> property in this singleton will store a link to the <b>NavigationService of the</b> Frame instance in which you want to perform page transitions.  You can assign the current value of this link both at the start of the application (in the handler of the <b>Loaded</b> event of the main window), and at any other later point before calling one of the navigation methods. <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="hljs cs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainWindow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { InitializeComponent(); Loaded += MainWindow_Loaded; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainWindow_Loaded</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, RoutedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { Navigation.Navigation.Service = MainFrame.NavigationService; DataContext = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MainViewModel(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ViewModelsResolver()); }</code> </pre><br>  In the example above, we assign our main window to our NavigationService Frame navigator.  Instead of the main window there could be any control, but the NavigationService should be taken in the Loaded event of this control.  Before this event, you can get <b>null</b> .  I have not studied the life cycle of controls and NavigationService in more detail. <br>  As an alternative scenario, I could suggest using ChildWindow from <b>WPF Toolkit Extended</b> , which has another Frame embedded.  In this case, you can temporarily replace the NavigationService in our navigator to make the transition within such a dialogue.  This will allow automating the loading of various screens into dialog boxes through binding.  But the scenario of such use seems very exotic, because I will not paint in detail.  If such a scenario is interesting, then I will write a separate article. <br></div></div><br>  In the current implementation, the manager works extremely simply.  In the navigation service setter, in addition to assigning a new value to a private field, a reply and a subscription to the event Navigated service is made. <br><div class="spoiler">  <b class="spoiler_title">Navigation service property</b> <div class="spoiler_text"><pre> <code class="hljs cs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> NavigationService Service { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Instance._navService; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Instance._navService != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { Instance._navService.Navigated -= Instance._navService_Navigated; } Instance._navService = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; Instance._navService.Navigated += Instance._navService_Navigated; } }</code> </pre><br>  In an amicable way, the setter (and the manager‚Äôs public methods too) lack <b>lock</b> .  But in general, if you have an application in parallel with calling any method of navigation, the NavigationService will be replaced, then, most likely, something is implemented incorrectly.  For the sake of simplicity, we can do without <b>lock</b> , but I warned you. <br></div></div><br>  Below are public navigation methods. <br><div class="spoiler">  <b class="spoiler_title">Navigation methods</b> <div class="spoiler_text"><pre> <code class="hljs vala"> #region Public Methods <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Navigate(Page page, object context) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Instance._navService == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || page == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Instance._navService.Navigate(page, context); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Navigate(Page page) { Navigate(page, <span class="hljs-literal"><span class="hljs-literal">null</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Navigate(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> uri, object context) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Instance._navService == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || uri == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> page = Instance._resolver.GetPageInstance(uri); Navigate(page, context); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Navigate(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> uri) { Navigate(uri, <span class="hljs-literal"><span class="hljs-literal">null</span></span>); } #endregion</code> </pre><br>  In the code above, you may notice the use of " <b>_resolver</b> ".  In the section IoC I will tell about it.  In short, this is the simplest implementation of the <i><a href="http://martinfowler.com/articles/injection.html">Container for Inversion Control</a></i> . <br></div></div><br>  The navigation manager implements a subset of the navigation methods from the <b>NavigationService</b> , which is quite enough for most simple cases.  It remains only to enclose the transmitted ViewModel in the <b>DataContext</b> property of the target page.  This is done in the <b>Navigated</b> event handler (see code below). <br><div class="spoiler">  <b class="spoiler_title">Handling the Navigated Event</b> <div class="spoiler_text"><pre> <code class="hljs kotlin"> #region Private Methods void _navService_Navigated(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> sender, NavigationEventArgs e) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> page = e.Content <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Page; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (page == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } page.DataContext = e.ExtraData; } #endregion</code> </pre><br></div></div><br>  In the event handler for the Navigated event, an attempt is made to convert the <b>Frame</b> content to the <b>Page</b> type.  Thus, only the transitions to the Page will be processed.  All others will be filtered.  If you want, you can remove this ‚Äúiron curtain‚Äù.  In the case of a successful type conversion, the instance of the ViewModel 'passed in the ExtraData property of the event will be placed in the DataContext of the target page.  This is all about navigation manager. <br>  It remains to create an assembly with the implementation of the pages and the assembly of the ViewModels.  I also implemented the Helpers assembly, in which I placed the <a href="http://snipplr.com/view/13642/">RelayCommand</a> implementation <a href="http://snipplr.com/view/13642/">code</a> for ViewModels.  If you have time and effort, proceed to the following sections with a description of the implementation of the UI and ViewModels.  If not, then summarize what else needs to be implemented. <br>  For each page you should create a separate ViewModel.  These ‚Äúprivate‚Äù ViewModels are instantiated in their parent <b>MainViewModel</b> using the ‚Äú <i>Inversion of Control</i> ‚Äù (see the <b>IoC</b> section).  The main ViewModel is placed in the DataContext of the main window, but it could as well be instantiated as a static XAML resource in the resource dictionary of the main window or even at the level of the entire application.  In this case, you have to specify something like Source = {StaticResource MainViewModelDataSourceKey} in the DataContext binding.  But you can not worry about whether the DataContext of the logical parent is inherited in the right place. <br>  In <b>MainViewModel,</b> I created several commands.  One to navigate to the string alias of the page specified in the <b>CommandParameter</b> (the transition without transferring the data context).  Other commands contain in their Delegate Execute a transition to some specific alias of the landing page with data context received via the <b>CommandParameter</b> .  For details, go <a href="https://github.com/homoluden/MVVM-Navigation">to GitHub</a> or continue reading this article. <br><br><h4>  Build ViewModels </h4><br>  This assembly introduces the base ViewModel, which implements <i>INotifyPropertyChanged</i> . <br><div class="spoiler">  <b class="spoiler_title">BaseViewModel</b> <div class="spoiler_text"><pre> <code class="hljs cs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BaseViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">INotifyPropertyChanged</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> PropertyChangedEventHandler PropertyChanged; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RaisePropertyChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> propertyName</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrWhiteSpace(propertyName)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (PropertyChanged != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { PropertyChanged(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PropertyChangedEventArgs(propertyName)); } } }</code> </pre><br></div></div><br>  The rest of the ViewModels are inherited from it and are currently extremely simple.  They contain one string property with a unique name (see example below). <br><pre> <code class="hljs cs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Page1ViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">BaseViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Page1Text { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Hello, world!\nSent from my iPage 1..."</span></span>; } } }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Note</b> <div class="spoiler_text">  Notice that here the property is read-only and without calling RaisePropertyChanged (...) anywhere.  In this case, it was done for simplicity.  In practice, these properties ViewModel'ey meet, but rarely, because  Binding on such properties will work only once.  Even if I add a setter without RaisePropertyChanged (...), the Binding will still be ‚Äúone-time‚Äù. <br></div></div><br>  <b>MainViewModel</b> is much more complicated.  As I wrote briefly in the previous section, it will store private ViewModels and implement navigation commands.  In my case, private ViewModels are created only once using the so-called " <i>Resolver</i> ", when the MainViewModel is initialized.  Therefore, I have implemented only the getters of these ViewModels. <br><pre> <code class="hljs kotlin"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Page1ViewModel Page1ViewModel { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _p1ViewModel; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Page2ViewModel Page2ViewModel { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _p2ViewModel; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Page3ViewModel Page3ViewModel { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _p3ViewModel; } }</code> </pre><br>  Fields are initialized in the MainViewModel constructor: <br><pre> <code class="hljs nginx"> <span class="hljs-attribute"><span class="hljs-attribute">_p1ViewModel</span></span> = _resolver.GetViewModelInstance(Page1ViewModelAlias); <span class="hljs-attribute"><span class="hljs-attribute">_p2ViewModel</span></span> = _resolver.GetViewModelInstance(Page2ViewModelAlias); <span class="hljs-attribute"><span class="hljs-attribute">_p3ViewModel</span></span> = _resolver.GetViewModelInstance(Page3ViewModelAlias);</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Note</b> <div class="spoiler_text">  " <i>_resolver</i> " in this case is another Management Inversion Container, which will be discussed in the appropriate section.  At the moment, this Resolver simply gets a delegate from the dictionary that corresponds to the alias of the ViewModel.  It is also worth noting that in practice you may need to make a full implementation of the fields and properties for private ViewModels.  This is already done elementary. <br></div></div><br>  Commands in my case are implemented with the instructions <b>get</b> and <b>set</b> , and the initialization of their instances is placed in a separate function.  Having the command setters allows me to replace each command outside the current ViewModel.  Such an approach allows, for example, to change the reaction of the dialog box by clicking the ‚ÄúOK‚Äù button, if it is linked via Binding to the corresponding command in its (dialogue) internal ViewModel.  However, such a scenario is quite exotic and can be implemented without command setters. <br><div class="spoiler">  <b class="spoiler_title">Command implementation</b> <div class="spoiler_text"><pre> <code class="hljs cs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ICommand GoToPathCommand { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _goToPathCommand; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { _goToPathCommand = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; RaisePropertyChanged(<span class="hljs-string"><span class="hljs-string">"GoToPathCommand"</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ICommand GoToPage1Command { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _goToPage1Command; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { _goToPage1Command = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; RaisePropertyChanged(<span class="hljs-string"><span class="hljs-string">"GoToPage1Command"</span></span>); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitializeCommands</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GoToPathCommand = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RelayCommand&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(GoToPathCommandExecute); GoToPage1Command = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RelayCommand&lt;Page1ViewModel&gt;(GoToPage1CommandExecute); GoToPage2Command = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RelayCommand&lt;Page2ViewModel&gt;(GoToPage2CommandExecute); GoToPage3Command = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RelayCommand&lt;Page3ViewModel&gt;(GoToPage3CommandExecute); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GoToPathCommandExecute</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> path</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrWhiteSpace(path)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> uri = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Uri(path); Navigation.Navigate(uri); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GoToPage1CommandExecute</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Page1ViewModel viewModel</span></span></span><span class="hljs-function">)</span></span> { Navigation.Navigate(Navigation.Page1Alias, Page1ViewModel); }</code> </pre><br>  Note that the alias of the target page is passed as the path.  I put these aliases in the form of constants in the navigation manager, but in general the best place for them is in the XML configuration file or just in some kind of text dictionary. <br></div></div><br>  After the <b>GoToPage1Command</b> command is executed, the <b>page</b> will be <b>navigated</b> to the specified alias, and the <b>Page1ViewModel</b> will be put in the DataContext of the page.  Thus, we do not need to implement additional logic to get data back from the landing page.  It will work with the repository inside our MainViewModel, so we will automatically receive all changes before we go back. <br>  It seems to be all with ViewModel'ami.  Go to UI. <br><br><h4>  Main window and Pages assembly </h4><br>  I will give again for convenience a type of the test application. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6d7/62d/734/6d762d734abf15e345a4e9937005ec22.png"><br><br>  On the left are four buttons.  The first button is bound to the GoToPathCommand command and transitions to Page1 without a data context.  After navigating to a page without a data context, the value from the FallbackValue parameter of the Binding object will be substituted for the actual value from the ViewModel.  The rest of the buttons are tied to ‚Äúprivate‚Äù teams with the alias of the required page of the page indicated in the team delegate. <br><div class="spoiler">  <b class="spoiler_title">Layout and code of the main window</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Window</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Navigator.MainWindow"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MainWindow"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"480"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"640"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid.ColumnDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ColumnDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Auto"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ColumnDefinition</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid.ColumnDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ScrollViewer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HorizontalScrollBarVisibility</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Disabled"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">VerticalScrollBarVisibility</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Hidden"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"P 1 w/o data"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding GoToPathCommand}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CommandParameter</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pack://application:,,,/Pages;component/Page1.xaml"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Page 1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding GoToPage1Command}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CommandParameter</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Page1ViewModel}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Page 2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding GoToPage2Command}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CommandParameter</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Page2ViewModel}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Page 3"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding GoToPage3Command}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CommandParameter</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Page3ViewModel}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ScrollViewer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Frame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MainFrame"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#CCCCCC"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Window</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><pre> <code class="hljs cs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainWindow</span></span> : <span class="hljs-title"><span class="hljs-title">Window</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainWindow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { InitializeComponent(); Loaded += MainWindow_Loaded; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainWindow_Loaded</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, RoutedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { Navigation.Service = MainFrame.NavigationService; DataContext = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MainViewModel(); } }</code> </pre><br></div></div><br><br>  The Pages assembly contains four pages: Page1, Page2, Page3, Page404.  The first two simply contain text blocks attached to the property of the corresponding private ViewModel.  I made the third one a bit more complicated to implement another MVVM problem, namely the task of binding ListBox.SelectedItems to ViewModel.  This is a separate topic, which in my opinion deserves a separate article.  For interest, you can look under the spoiler markup below. <br><div class="spoiler">  <b class="spoiler_title">Page3 markup</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Page</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Pages.Page3"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:mc</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/expression/blend/2008"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:tkx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.xceed.com/wpf/xaml/toolkit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mc:Ignorable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"d"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">d:DesignHeight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"400"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">d:DesignWidth</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"400"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tkx:ChildWindow</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">WindowState</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Open"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Caption</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"My Dialog"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsModal</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"True"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">WindowStartupLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Center"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid.RowDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RowDefinition</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Auto"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RowDefinition</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid.RowDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Page3Text, FallbackValue='No Data'}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HorizontalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Center"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">VerticalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Center"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">FontSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">FontWeight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Bold"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Category:"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Select..."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Category 1"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Category 2"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Category 3"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Items:"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5 10 5 5"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SelectionMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Multiple"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Item 1"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Item 2"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Item 3"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Item 4"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Item 5"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Item 6"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Item 7"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Item 8"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ListBox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tkx:ChildWindow</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Page</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  On this page, I posted a simple dialogue with the selection of items from a specific category.  This is an example close to reality.  The dialogue view was shown in the screenshot above.  Notice that the text block appears to be in the dialog box, but it binds to the DataContext of the page directly, without any tweaks.  This is the merit of ChildWindow from WPF Toolkit Extended.  This control actually only simulates the behavior of a dialog box and is a direct descendant of its parent in the XAML markup.  Thus, the DataContext is inherited in the ChildWindow from the Grid into which I placed it. <br>  Briefly about the problem of binding multiple selections in a ListBox.  To return the list of selected ListBox elements to the ViewModel, I cannot use the binding directly, because  The ListBox.SelectedItems property does not support binding.  To solve this problem, you can inherit from the ListBox your control in which to add a DependencyProperty.  However, there is a more flexible approach in the context of MVVM, which I am going to write about in a separate article, if you find this interesting. <br></div></div><br><br><h4>  IoC (Inversion Control) </h4><br>  Unfortunately, I cannot describe this approach in detail in this article.  The volume is so great.  But you can learn the necessary knowledge, for example, <a href="http://habrahabr.ru/search/%3Fq%3DIoC">from articles on Habr√©</a> .  Also a lot of resources you can google.  In short, ‚ÄúInversion of Control‚Äù is a way to eliminate direct links in one assembly to another assembly.  Injection of dependencies is performed by special " <i>Containers</i> ", which from the configuration files will learn which classes specifically and from which assemblies to initialize for the specified interface and the section name in the config.  It is necessary to admit that in my code IoC is not fully implemented.  To be honest, there was no such goal.  Of course, I tried to reflect the concept of IoC in the code and tried to show how to make the code less connected. <br>  Below are the interfaces of containers and their implementation. <br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">ViewModels.Interfaces</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IViewModelsResolver</span></span> { <span class="hljs-function"><span class="hljs-function">INotifyPropertyChanged </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetViewModelInstance</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">alias</span></span></span></span></span><span class="hljs-function">)</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Navigator.Navigation.Interfaces</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IPageResolver</span></span> { <span class="hljs-function"><span class="hljs-function">Page </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetPageInstance</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">alias</span></span></span></span></span><span class="hljs-function">)</span></span>; } }</code> </pre><br>  These interfaces play the role of certain contracts for various implementations of page containers and ViewModels.  At the moment I have made two implementations that you <b>should not use in real projects in any way</b> . <br><div class="spoiler">  <b class="spoiler_title">Implementations of test containers</b> <div class="spoiler_text"><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Navigator.Navigation</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PagesResolver</span></span> : <span class="hljs-title"><span class="hljs-title">IPageResolver</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, Func&lt;Page&gt;&gt; _pagesResolvers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, Func&lt;Page&gt;&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PagesResolver</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { _pagesResolvers.Add(Navigation.Page1Alias, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Page1()); _pagesResolvers.Add(Navigation.Page2Alias, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Page2()); _pagesResolvers.Add(Navigation.Page3Alias, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Page3()); _pagesResolvers.Add(Navigation.NotFoundPageAlias, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Page404()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Page </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetPageInstance</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">alias</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_pagesResolvers.ContainsKey(<span class="hljs-keyword"><span class="hljs-keyword">alias</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _pagesResolvers[<span class="hljs-keyword"><span class="hljs-keyword">alias</span></span>](); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _pagesResolvers[Navigation.NotFoundPageAlias](); } } } <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">ViewModels</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ViewModelsResolver</span></span> : <span class="hljs-title"><span class="hljs-title">IViewModelsResolver</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, Func&lt;INotifyPropertyChanged&gt;&gt; _vmResolvers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, Func&lt;INotifyPropertyChanged&gt;&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ViewModelsResolver</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { _vmResolvers.Add(MainViewModel.Page1ViewModelAlias, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Page1ViewModel()); _vmResolvers.Add(MainViewModel.Page2ViewModelAlias, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Page2ViewModel()); _vmResolvers.Add(MainViewModel.Page3ViewModelAlias, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Page3ViewModel()); _vmResolvers.Add(MainViewModel.NotFoundPageViewModelAlias, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Page404ViewModel()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> INotifyPropertyChanged </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetViewModelInstance</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">alias</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_vmResolvers.ContainsKey(<span class="hljs-keyword"><span class="hljs-keyword">alias</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _vmResolvers[<span class="hljs-keyword"><span class="hljs-keyword">alias</span></span>](); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _vmResolvers[MainViewModel.NotFoundPageViewModelAlias](); } } }</code> </pre><br></div></div><br>  These are just ‚Äúdolls‚Äù of containers that need to be replaced with something manageable, for example from the <a href="http://msdn.microsoft.com/en-us/library/ff649614.aspx">Unity</a> library.  As interfaces, it would also be better to use something like <i>IUnityContainer</i> , but I didn‚Äôt want to burden the solution with an additional reference and complicate the perception of my navigator implementation.  Moreover, you may prefer any other IoC library instead of Unity. <br><h4>  additional literature </h4><br>  <a href="http://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B4%25D0%25B8%25D0%25BD%25D0%25BE%25D1%2587%25D0%25BA%25D0%25B0_%2528%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F%2529">About singleton on wikipedia</a> <br>  <a href="http://habrahabr.ru/post/147373/">About singleton on Habrahabr</a> <br>  <a href="http://ru.wikipedia.org/wiki/Model-View-ViewModel">About MVVM Pattern on Wikipedia</a> <br>  <a href="http://habrahabr.ru/post/137541/">About MVVM pattern on Habrahabr</a> </div><p>Source: <a href="https://habr.com/ru/post/194016/">https://habr.com/ru/post/194016/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../194000/index.html">Base stations - micro cells - on poles. What it is?</a></li>
<li><a href="../194002/index.html">European Space Agency may send Mars rover and snake robot</a></li>
<li><a href="../194004/index.html">Interrogation of Mitnick in Hackspace</a></li>
<li><a href="../194010/index.html">Formula E. Spark-Renault SRT 01E racing car presentation in Frankfurt</a></li>
<li><a href="../194012/index.html">Google introduced Coder</a></li>
<li><a href="../194022/index.html">Selected Habratopic Comments</a></li>
<li><a href="../194024/index.html">Russification Launchrock file</a></li>
<li><a href="../194026/index.html">Is it "harmful" to wear glasses?</a></li>
<li><a href="../194028/index.html">Reverse Thread Bolt for .slip Embarcadero RAD Studuo XE</a></li>
<li><a href="../194030/index.html">Creating jQuery Mobile themes in Adobe Fireworks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
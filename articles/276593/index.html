<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a program architecture or how to design a stool</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="By taking on the writing of a small, but real and growing project, we were ‚Äúin our own shoes‚Äù convinced how important it was that the program not only...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a program architecture or how to design a stool</h1><div class="post__text post__text-html js-mediator-article">  By taking on the writing of a small, but real and growing project, we were ‚Äúin our own shoes‚Äù convinced how important it was that the program not only worked well, but also was well organized.  Do not believe that a thought-out architecture is needed only for large projects (just for large projects, the "mortality" of the absence of architecture is obvious).  The complexity usually grows much faster than the size of the program.  And if you do not take care of this in advance, then quite quickly the moment comes when you stop controlling it.  Proper architecture saves a lot of effort, time and money.  And often it generally determines whether your project will survive or not.  And even if we are talking only about ‚Äúbuilding a stool,‚Äù it is still very useful at first to design it. <br><br>  To my surprise, it turned out that the seemingly relevant question: ‚ÄúHow to build a good / beautiful software architecture?‚Äù Is not so easy to find the answer.  Despite the fact that there are many books and articles devoted to design patterns and design principles, for example, the SOLID principles (described briefly <a href="http://info.javarush.ru/translation/2013/08/06/%25D0%259F%25D1%258F%25D1%2582%25D1%258C-%25D0%25BE%25D1%2581%25D0%25BD%25D0%25BE%25D0%25B2%25D0%25BD%25D1%258B%25D1%2585-%25D0%25BF%25D1%2580%25D0%25B8%25D0%25BD%25D1%2586%25D0%25B8%25D0%25BF%25D0%25BE%25D0%25B2-%25D0%25B4%25D0%25B8%25D0%25B7%25D0%25B0%25D0%25B9%25D0%25BD%25D0%25B0-%25D0%25BA%25D0%25BB%25D0%25B0%25D1%2581%25D1%2581%25D0%25BE%25D0%25B2-S-O-L-I-D-%25D0%25B2-Java.html">here</a> , in detail and with examples you can see <a href="http://igor.quatrocode.com/2008/09/solid-top-5.html">here</a> , <a href="http://blog.byndyu.ru/2009/10/solid.html">here</a> and <a href="http://sergeyteplyakov.blogspot.com.es/2014/10/solid.html">here</a> ) and how to properly code the code, everything there was still a feeling that something important was missing.  It was like if you were given many wonderful and useful tools, but you forgot the main thing - to explain how to ‚Äúdesign a stool‚Äù. <br><br>  I wanted to understand what the process of creating the architecture of the program generally includes, what tasks are being solved, what criteria are used (so that the rules and principles cease to be just dogmas, and their logic and purpose would become clear).  Then it will be clearer and what tools are better to use in one way or another. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This article is an attempt to answer these questions, at least as a first approximation. <a name="habracut"></a>  The material was collected for himself, but maybe it will be useful to someone else.  This work allowed me not only to learn a lot of new things, but also in a different context to look at the seemingly almost banal basic principles of the PLO and to truly appreciate their importance. <br><br>  There was a lot of information, so only a general idea and brief descriptions are given, giving an initial idea of ‚Äã‚Äãthe topic and an understanding of where to look further. <br><br><h1>  Criteria for good architecture </h1><br>  Generally speaking, there is no generally accepted term ‚Äúsoftware architecture‚Äù.  However, when it comes to practice, for most developers it‚Äôs clear what kind of code is good and which is bad.  <em>Good architecture</em> is primarily a <em>profitable</em> architecture that makes the process of developing and maintaining a program simpler and more efficient.  A program with a good architecture is easier to expand and change, and also to test, debug, and understand.  That is, in fact, it is possible to formulate a list of quite reasonable and universal criteria: <br><br>  <strong>System efficiency</strong>  First of all, the program, of course, should solve the tasks and perform its functions well, and in different conditions.  This could include such characteristics as reliability, safety, performance, ability to cope with increasing load (scalability), etc. <br><br>  <strong>System flexibility</strong>  Any application has to be changed over time - requirements change, new ones are added.  The faster and more convenient it is possible to make changes to the existing functionality, the less problems and errors it causes - the <em>more flexible</em> and competitive the system.  Therefore, in the development process, try to evaluate what happens, in order to find out how you might need to change it later.  Ask yourself: ‚ÄúWhat will happen if the current architectural solution turns out to be wrong?‚Äù, ‚ÄúHow much code will undergo changes?‚Äù.  Changing one fragment of the system should not affect its other fragments.  If possible, architectural solutions should not be ‚Äúcut down in stone‚Äù, and the consequences of architectural errors should be reasonably limited.  ‚Äú <em>Good architecture allows for DECISION of making key decisions</em> ‚Äù (Bob Martin) and minimizes the ‚Äúcost‚Äù of errors. <br><br>  <strong>System extensibility</strong>  The ability to add new entities and functions to the system without breaking its main structure.  At the initial stage, it only makes sense to lay the basic and most necessary functionality into the system (YAGNI principle - you ain't gonna need it, ‚ÄúYou don‚Äôt need it‚Äù), but the architecture should allow you to easily add additional functionality as needed.  And so that the introduction of the <em>most likely</em> changes required the <em>least effort</em> . <br><br>  The requirement that the system architecture has <em>flexibility</em> and <em>extensibility</em> (that is, it is capable of change and evolution) is so important that it is even formulated as a separate principle - the ‚Äú <strong>Open-Closed Principle</strong> ‚Äù - the second of the five SOLID principles : <em>Program entities (classes, modules, functions, etc.) must be open for expansion, but not open for modification.</em> <br><br>  In other words: <em>It should be possible to expand / change the behavior of the system without changing / rewriting existing parts of the system.</em> <br><br>  This means that the application should be designed in such a way that changing its behavior and adding new functionality would be achieved by writing new code (extension), and at the same time you would not have to change already existing code.  In this case, the emergence of new requirements will not entail a modification of the existing logic, and can be implemented primarily due to its expansion.  This principle is the basis of the ‚Äúplugin architecture‚Äù (Plugin Architecture).  The fact by which techniques this can be achieved will be discussed further. <br><br>  <strong>Scalable development process</strong> .  The opportunity to shorten the development time by adding new people to the project.  The architecture should allow parallelization of the development process, so that many people can work on the program at the same time. <br><br>  <strong>Testability</strong>  Code that is easier to test will contain fewer errors and more reliably work.  But tests not only improve the quality of the code.  Many developers come to the conclusion that the requirement of ‚Äúgood testability‚Äù is also a guiding force, automatically leading to good design, and at the same time one of the most important criteria for assessing its quality: ‚Äú <em>Use the principle of‚Äú testability ‚Äùof a class as a‚Äú litmus test ‚Äùof good design Even if you do not write a single line of test code, the answer to this question in 90% of cases will help you to understand how everything is ‚Äúgood‚Äù or ‚Äúbad‚Äù with its design</em> "( <a href="http://habrahabr.ru/post/133287/">Ideal architecture</a> ). <br><br>  There is a whole methodology for developing test-based programs that is called <em>Test Development Driving (TDD</em> ). <br><br>  <strong>Reusability</strong> .  It is desirable to design the system so that its fragments can be reused in other systems. <br><br>  <strong>Well structured, readable and understandable code.</strong>  <strong>Maintainability</strong> .  Over the program, as a rule, a lot of people work - some leave, new ones come.  After writing to accompany the program, too, as a rule, it is necessary to people who have not participated in its development.  Therefore, a good architecture should make it possible for new people to understand the system relatively quickly and easily.  The project should be well structured, free of duplication, have a well-designed code and preferably documentation.  And whenever possible in the system it is better to use standard, generally accepted solutions familiar to programmers.  The more exotic the system, the more difficult it is to understand others ( <em>The principle of least surprise is Principle of least astonishment</em> . Usually, it is used in relation to the user interface, but it is also applicable to writing code). <br><br>  Well, to complete the <a href="http://sergeyteplyakov.blogspot.com.es/2013/01/blog-post_29.html">criteria for bad design</a> : <br><br><ol><li>  It is hard to change, because any change affects too many other parts of the system.  ( <strong>Stiffness, rigidity</strong> ). </li><li>  When changes are made, other parts of the system suddenly break.  ( <strong>Fragility, Fragility</strong> ). </li><li>  The code is hard to reuse in another application, since it is too hard to ‚Äúblow it out‚Äù from the current application.  ( <strong>Immobility, Immobility</strong> ). </li></ol><br><h1>  Modular architecture.  Decomposition as a basis </h1><br><br><img src="https://habrastorage.org/files/965/721/560/9657215601f14952bb35870f5caf783d.png" alt="software architecture"><br><br>  Despite the variety of criteria, the main task in developing large systems is considered to be the task of reducing complexity.  And to reduce the complexity of nothing but dividing into parts, not yet invented.  This is sometimes called the ‚Äúdivide and conquer‚Äù principle (divide et impera), but essentially it is a <strong>hierarchical decomposition</strong> .  A complex system must be built from a small number of simpler subsystems, each of which, in turn, is built from smaller parts, etc., until the smallest parts are simple enough for direct understanding and creation. <br><br>  Good luck lies in the fact that this solution is not only the only known, but also universal.  In addition to reducing complexity, it also provides system flexibility, provides good scalability, and also allows for increased stability due to duplication of critical parts. <br><br>  Accordingly, when it comes to building a program architecture, creating its structure, this mainly means decomposing a program into subsystems (functional modules, services, layers, subroutines) and organizing their interaction with each other and the outside world.  Moreover, the more independent the subsystems, the safer it is to concentrate on the development of each of them separately at a specific point in time and at the same time not take care of all the other parts. <br><br>  In this case, the program from the ‚Äúspaghetti code‚Äù is transformed into a constructor consisting of a set of modules / subroutines that interact with each other according to well-defined and simple rules, which actually allows you to control its complexity, and also gives you the opportunity to get all the advantages usually correlated with the concept of good architecture: <br><ul><li>  <strong>Scalability</strong> <br>  the ability to expand the system and increase its performance by adding new modules. </li><li>  <strong>Maintainability</strong> <br>  changing one module does not require changing other modules </li><li>  <strong>Swappability Modules</strong> <br>  module is easy to replace </li><li>  <strong>Testing Capability (Unit Testing)</strong> <br>  the module can be disconnected from all others and tested / repaired </li><li>  <strong>Reusability</strong> <br>  the module can be reused in other programs and other environments </li><li>  <strong>Maintainability (maintenance)</strong> <br>  a program broken into modules is easier to understand and maintain </li></ul><br>  It can be said that breaking up a complex problem into simple fragments is the goal of all design techniques.  And the term ‚Äúarchitecture‚Äù, in most cases, simply denotes the result of such a division, plus ‚Äú <em>some constructive solutions that are difficult to change after their adoption</em> ‚Äù (Martin Fowler, ‚ÄúArchitecture of corporate software applications‚Äù).  Therefore, most definitions in one form or another are as follows: <br><br>  "The <em>architecture identifies the main components of the system and the ways of their interaction. It is also a choice of such solutions, which are interpreted as fundamental and not subject to change in the future.</em> " <br><br>  " <em>Architecture is the <strong>organization of a system</strong> , embodied in its <strong>components</strong> , their <strong>relations</strong> among themselves and with the <strong>environment</strong> .</em> <br>  <em><strong>A system</strong> is a set of components combined to perform a specific function.</em>  " <br><br>  Thus, good architecture is, above all, a <strong>modular</strong> / <strong>block architecture</strong> .  To get a good architecture you need to know how to properly decompose the system.  So, it is necessary to understand - what decomposition is considered ‚Äúcorrect‚Äù and how is it better to carry it out? <br><br><h1>  "Correct" decomposition </h1><br>  <strong>1. Hierarchical</strong> <br><br>  It is not necessary to immediately hack the application into hundreds of classes.  As already mentioned, the decomposition should be carried out <strong>hierarchically</strong> - first, the system is divided into large functional modules / subsystems, describing its work in the most general form.  Then, the obtained modules are analyzed in more detail and, in turn, are divided into sub-modules or objects. <br><br>  Before you select objects, divide the system into basic semantic blocks, at least mentally.  For small applications, two levels of hierarchy are often quite enough - the system is first divided into subsystems / packages, and packages are divided into classes. <br><br><img src="https://habrastorage.org/files/8d8/e4d/84b/8d8e4d84b56744c3911775106cd5a28d.png" alt="software decomposition"><br><br>  This thought, for all its obviousness, is not as banal as it seems.  For example, what is the essence of such a common ‚Äúarchitectural pattern‚Äù as Model-View-Controller (MVC)?  Only in the separation of the <strong>presentation</strong> from the <strong>business logic</strong> , that is, any user application is initially divided into two modules - one of which is responsible for the implementation of the logic business itself (Model), and the second for user interaction (User Interface or Representation).  Then, in order for these modules to be developed independently, the connection between them is weakened using the ‚ÄúObserver‚Äù pattern (details of how to weaken the links will be discussed later) and we actually get one of the most powerful and sought-after ‚Äútemplates‚Äù that are currently in use. . <br><br>  Typical first-level modules (obtained as a result of the first division of the system into the largest components) are just <em>‚Äúbusiness logic‚Äù, ‚Äúuser interface‚Äù, ‚Äúdatabase access‚Äù, ‚Äúcommunication with specific equipment or OS‚Äù.</em> <br><br>  For visibility at each hierarchical level, it is recommended to allocate from 2 to 7 modules. <br><br>  <strong>2. Functional</strong> <br><br>  The division into modules / subsystems is best done based on the tasks that the system solves.  The main task is divided into its subtasks, which can be solved / executed independently of each other.  Each module must be responsible for solving a subtask and perform the corresponding <strong>function</strong> .  In addition to the functional purpose, the module is also characterized by a set of data necessary for it to perform its function, that is: <br><br>  <em>Module</em> = <em>Function</em> + <em>Data</em> required for its execution. <br><br>  Moreover, it is desirable that the module could perform its function independently, without the help of other modules, only on the basis of its incoming data. <br><br>  <em>A module is not an arbitrary piece of code, but a separate functionally meaningful and complete software unit</em> ( <em>subroutine) that provides a solution to a certain task and, ideally, can work independently or in another environment and be reusable.</em>  <em>The module should be some kind of "integrity, capable of relative independence in behavior and development" (Christopher Alexander).</em> <br><br>  Thus, competent decomposition is based primarily on the analysis of the <strong>functions of the system</strong> and the data necessary to perform these functions. <br><br>  <strong>3. High Cohesion + Low Coupling</strong> <br>  But the main criterion of the quality of decomposition is the extent to which the modules are focused on solving their problems and are independent.  This is usually formulated as follows: " <em>Modules obtained as a result of decomposition should be maximally interconnected inside (high internal cohesion) and minimally interconnected (low external coupling).</em> " <br><br><ul><li>  <strong>High Cohesion</strong> , high contingency or ‚Äúcohesion‚Äù within the module, suggests that the module focuses on solving one narrow problem, and is not engaged in performing heterogeneous functions or unrelated duties.  ( <em>Contingency</em> - <em>cohesion</em> , describes the degree to which the tasks performed by the module are related to each other) <br><br>  The consequence of High Cohesion is the <strong>principle of sole responsibility</strong> ( <strong>Single Responsibility Principle</strong> - the first of the five principles of SOLID), according to which any object / module should have only one responsibility and, accordingly, there should not be more than one reason for changing it. <br><br></li><li>  <strong>Low Coupling</strong> , weak connectivity, means that the modules into which the system is broken should be, if possible, independent or <em>weakly connected to</em> each other.  They should be able to interact, but at the same time <em>know as little about each other as possible</em> (the <strong>principle of minimum knowledge</strong> ). <br><br>  This means that with proper design, with a change in one module, there will be no need to edit others or these changes will be minimal.  The weaker the connectivity, the easier it is to write / understand / expand / repair the program. </li></ul><br>  It is believed that well-designed modules should have the following properties: <br><ul><li>  <strong>functional integrity and completeness</strong> - each module implements one function, but implements well and completely;  the module itself (without the help of additional funds) performs a full set of operations to implement its function. </li><li>  <strong>one input and one output</strong> - at the input the program module receives a specific set of input data, performs meaningful processing and returns one set of output data, i.e.  the standard IPO principle is implemented ‚Äî <em>input ‚Äì process ‚Äì output</em> ; </li><li>  <strong>logical independence</strong> - the result of the work of the program module depends only on the source data, but does not depend on the work of other modules; </li><li>  <strong>Weak information links with other modules</strong> - the exchange of information between modules should be minimized wherever possible. </li></ul><br>  Literate decomposition is a kind of art and a huge problem for many programmers.  Simplicity is very deceptive here, and mistakes are very expensive.  If the selected modules are strongly linked with each other, if they cannot be developed independently or it is not clear what function each of them is responsible for, then it is worth considering whether the division is correct.  It should be clear what role each module plays.  The most reliable criterion that a decomposition is done correctly is if the modules are obtained as independent and valuable subroutines themselves that can be used in isolation from the rest of the application (and therefore can be reused). <br><br>  Doing system decomposition it is desirable to check its quality by asking yourself the questions: ‚Äú <em>What function does each module perform?</em> ‚Äù, ‚Äú <em>Is it easy to test modules?</em>  ‚Äù,‚Äú <em>Is it possible to use modules independently or in another environment?</em>  "," <em>How much change in one module will affect the rest?</em>  " <br><br>  First of all, of course, we should strive to ensure that the modules are extremely autonomous.  As mentioned above, this is a key parameter for proper decomposition.  Therefore, it should be carried out in such a way that the modules <strong>initially</strong> weakly depended on each other.  But in addition, there are a number of special techniques and templates, which then allow you to further <em>minimize and weaken the connections between the subsystems.</em>  For example, in the case of MVC, an ‚ÄúObserver‚Äù pattern was used for this purpose, but other solutions are possible.  It can be said that techniques to <em>reduce connectivity</em> are precisely the main ‚Äútools of the architect.‚Äù  It is only necessary to understand that we are talking about all subsystems and <strong>we need to weaken connectivity at all levels of the hierarchy</strong> , that is, not only between classes, but also between modules at each hierarchical level. <br><br><h1>  How to weaken connectivity between modules </h1><br>  For clarity, a picture from a good article " <a href="http://citeseerx.ist.psu.edu/viewdoc/download%3Fdoi%3D10.1.1.43.6026%26amp%3Brep%3Drep1%26amp%3Btype%3Dpdf">Decoupling of Object-Oriented Systems</a> ", illustrating the main points that will be discussed. <br><br><img src="https://habrastorage.org/files/9b7/5a0/1a8/9b75a01a808341d29b9bbaa8da1f2734.png" alt="Decoupling architecture"><br><br><h3>  1. Interfaces.  Facade </h3><br>  The main thing that makes it possible to reduce the connectivity of the system is, of course, the <em>Interfaces</em> (and the principle behind them, <em>Encapsulation + Abstraction + Polymorphism)</em> : <br><br><ul><li>       " " ( <em></em> ).  ,      ¬´¬ª           .            </li><li> /        <em></em> ( , <em></em> ,     )               . </li></ul><br>  ¬´ ¬ª ( <em></em> )         . ,    ,    .         (   ).          ( <em></em> )  ‚Äî   .          ,   .         (  )      .      ,    ,    ‚Äî <em></em> /   ,  ¬´ ,  ¬ª ( <a href="https://habrahabr.ru/post/37610/"></a> ).        .   ,   ,  ,  . <br><br>    ,         ,   ,    (Open-Closed Principle).   ,        ,      ,     ¬´¬ª        ,     ,         .      ¬´ ¬ª (plugin architecture) ‚Äî     ,         .    ,       /¬´¬ª  ,     (   ),        (          ).   Open-Closed Principle   ,        <a href="http://sergeyteplyakov.blogspot.ca/2014/08/open-closed-principle.html"></a> +   <a href="http://blog.8thlight.com/uncle-bob/2014/05/12/TheOpenClosedPrinciple.html"> </a> . <br><br>       ,           .                ,       <em>  </em> ,   <em> .</em> ,    /           ,   .        SOLID ‚Äî <strong>   (Interface Segregation Principle)</strong> ,    ¬´ ¬ª  ,  ,         ,     ( )    ,     .    : " <em>      (  ),    </em> "  ‚Äú <em>   ,   ‚Äù.</em> <br><br> ,          ,   <em></em> ,         ,      <em></em> ,     /         ,     <em>.</em>   ,                 ‚Äî , , .     .       ,       ,    ,      ? :    ,   ,         ‚Äî <strong></strong> . <br><br> <em> ‚Äî  -,           ,         .       .     ‚Äî "  ,   ,       ,   "</em> . <br><br>  ,   ,   ,              ‚Äî ¬´ <em>¬ª</em> .   ¬´¬ª                       ,     . <br><br><img src="https://habrastorage.org/files/f29/b83/8b1/f29b838b11df4acda0009ace9b6f9ed7.png" alt="Facade Decoupling architecture"><br><br> <em>:          (),  ,            .       ,         /      ¬´¬ª. , ,  ¬´¬ª     ¬´ ¬ª --,        ,    MVC (  Observer  Composite)?      ,     ,  ,  .    MVC   ,  ,  ( ¬´</em> <a href="http://heim.ifi.uio.no/~trygver/2003/javazone-jaoo/MVC_pattern.pdf">The Model-View-Controller (MVC ). Its Past and Present</a> <em>¬ª,  ,     1973   ,      ‚Äî Presentaition/UI   Editior).   ¬´¬ª            ,  ,    MVC  Microsoft (¬´</em> <a href="https://msdn.microsoft.com/en-us/library/ee658099.aspx">Microsoft Application Architecture Guide</a> <em>¬ª).   :</em> <br><br><img src="https://habrastorage.org/files/171/01d/d78/17101dd785b84564b54477fe7015589b.png" alt="Facade MVC Model-View-Controller Decoupling"><br><br> <em> ,  ,   ¬´¬ª ,    ,   - ,       ,   ¬´¬ª,  ,  </em> <a href="http://alvinjayreyes.com/2011/09/11/ejb-architectural-patterns-session-facade/"></a> <em>,        :</em> <br><br><img src="https://habrastorage.org/files/0ce/540/28e/0ce54028e75c44e6848fbf98274cce79.png" alt="Facade MVC Model-View-Controller Decoupling"><br><br><h3> 2. Dependency Inversion.      </h3><br> , ,        ,            ,   ,   <strong> </strong> ( <strong>Dependency Inversion</strong> ‚Äî     SOLID): <br><ul><li>          .  ,      . </li><li>  Abstractions should not depend on the details.     . </li></ul><br>       ,   ,    ,  : ¬´ <em>      </em> ¬ª.           <a href="http://www.skipy.ru/architecture/module_design.html">   ¬´  DIP, SRP, IoC, DI  ..¬ª</a> .    must-read, ,      . <br><br>           , ,  .  ,  ,    /    new      ,           . <br><br> ,       -  . ,   ,      ,         ,       ,         .    ,            ‚Äî ,  , IoC-. <br><br>  -     <a href="http://www.life-prog.ru/2_31166_printsip-edinstvennogo-vibora.html">  </a> (Single Choice Principle),  : " <em> ,        ,          </em> ".   ,        (  ,        ),        ,     ,             . <br><br>     ,           <em>     ¬´¬ª</em> ,    Dependency Inversion. <br><br> ,         : <br><ul><li>   ,    </li><li>      ,     /      </li><li> <em>    </em> </li></ul><br>   , <em>     ,      </em> .     : <br><br><ol><li> <em>       </em> . <br><br> ,    ,       ‚Äî       ,         ,    .        <a href="http://cpp-reference.ru/patterns/creational-patterns/factory-method/"> </a> ( <strong>Factory Method</strong> ). <br><br> "   ,       new,   -     .          ,            ". <br><br>  ,        ,     <a href="http://cpp-reference.ru/patterns/creational-patterns/abstract-factory/"> </a> ( <strong>Abstract factory</strong> ). <br><br></li><li> <em>     ,     </em> (  ,   ,     ,       ). <br><br>     <strong> </strong> ( <strong>Service Locator</strong> ),      ,     , ,     (),   . <br><br>      ,  Service Locator   ,         (  /  ,    ,       ).       ,             .          ,   .   ,  Service Locator,    ,         - . <br><br>   Service Locator    ,   ,       .  Service Locator        ,           . <br><br>  , Service Locator        (  ,           ).      : <br> <a href="http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx">Service Locator is an Anti-Pattern</a> <br> <a href="http://blog.ploeh.dk/2010/11/01/PatternRecognitionAbstractFactoryOrServiceLocator.aspx">Abstract Factory or Service Locator?</a> <br><br></li><li> <em>     ¬´¬ª .</em>   ,     ,       (¬´¬ª)   - . <br><br>     ‚Äî <strong> </strong> ( <strong>Dependency Injection</strong> ).          ( <em>Constructor Injection</em> ),     ( <em>Setter injection</em> ). <br><br>   <em>   </em> ‚Äî       - .    ,   ‚Äî   ,    .      <strong> </strong> ( <strong>Inversion of Control</strong> ),  <em> </em> ‚Äî ¬´  ,    ¬ª. <br><br>    ,    .  ,        ¬´ <em>  </em> ¬ª ‚Äî       ,            .         ,     ¬´¬ª (         ‚Äî IoC-). <br><br>  ,     :      ,  ,           . ,       ‚Äî      ,    - ,    . </li></ol><br>             , ,   <a href="http://habrahabr.ru/post/244517/"></a> (   ,      <em>Dependency Inversion</em> ,    <em>Inversion of Control</em> ;  ,            ).   <em>Inversion of Control</em> (  <em>Dependency Injection</em>  <em>Service Locator</em> )          : " <a href="http://yugeon-dev.blogspot.com.es/2010/07/inversion-of-control-containers-and_21.html">Inversion of Control Containers and the Dependency Injection pattern</a> "  ‚Äú <a href="http://habrahabr.ru/post/116232/">Inversion of Control</a> ‚Äù. <br><br>    ,         ( <em>Dependency Inversion</em> ) +       (  <em>Dependency Injection</em> )  /    .    ,       ,  ,   , ,         . ,      ,         .  . <br><br><h3> 3.       </h3><br>      <em></em>   ,     - /    ,       .        ¬´   ¬ª,        ,       (messages)   (events). <br><br>    <em> </em>    ,            : <br><br><ul><li> <strong> (Observer).</strong>     ¬´ <em>--</em> ¬ª,        ‚Äî .   <a href="https://en.wikipedia.org/wiki/Publish%25E2%2580%2593subscribe_pattern"></a> ,    ,           ,  ,    ,   ¬´¬ª    .        ,    ()               -    . <br><br>        ¬´¬ª ‚Äî   ¬´¬ª  ¬´¬ª (.. ) .      /    . <br><br></li><li> <strong> (Mediator).</strong> ,      ¬´ <em>  </em> .          <strong>,</strong>              .        (¬´  ¬ª)       (¬´  ¬ª). ,   <em> </em>   . <br><br><img src="https://habrastorage.org/files/598/704/b45/598704b45b854f4baf30aa214210aff5.png" alt="Mediator "><br><br>   ‚Äî    .  ,   ,     ,  ,     .       ,      ,        . , , <a href="http://cpp-reference.ru/patterns/behavioral-patterns/mediator/"></a> . </li></ul><br> <em>:        ¬´ ,   -.    </em> <strong></strong> ( <strong>Command</strong> ). <em>             (       execute()),             ,     -  ,       .  </em> <a href="http://cpp-reference.ru/patterns/behavioral-patterns/command/"></a> <em>,      </em> <a href="http://ooad.asf.ru/Pattern.aspx%3FIdKat%3D7%26amp%3BIdPat%3D33"></a> <em>,    </em> <a href="https://habrahabr.ru/post/114455/"></a> <em>.</em> <br><br><h3> 4.         </h3><br>  This approach summarizes and develops the idea embodied in the ‚ÄúMediator‚Äù template.  When there are a large number of modules in the system, their direct interaction with each other becomes too complicated.  Therefore, it makes sense to replace the ‚Äúall with all‚Äù interaction with the ‚Äúone with all‚Äù interaction.  To do this, a generalized intermediary is introduced, it can be a common core of the application, a storage or a data bus, and all other modules become independent of each other by clients using the services of this core or processing the information contained therein.  The implementation of this idea allows client modules to communicate with each other through an intermediary and at the same time know nothing about each other. <br><br>  The core proxy may either know about the client modules and control them (for example, the <a href="https://www.ibm.com/developerworks/ru/library/os-apache_5/">apache architecture</a> ), so it may be completely, or almost completely, independent and not aware of anything about the clients.  In essence, it is this approach that is implemented in the Model-View-Controller (MVC) ‚Äútemplate‚Äù, where a lot of User Interfaces that work synchronously and do not know each other can interact with one Model (which is the core of the application and the common data store). and the Model does not know about them.  Nothing prevents to connect to the general model and thus synchronize not only interfaces, but also other auxiliary modules. <br><br>  Very actively, this idea is also used in the development of games, where independent modules responsible for graphics, sound, physics, and program management are synchronized with each other through the game core (model), where all data on the state of the game and its characters are stored.  In contrast to MVC, in games, matching modules with the core (model) is not due to the "Observer" template, but by timer, which in itself is an interesting architectural solution, very useful for programs with animation and running graphics. <br><br><h3>  5. Law of Demeter </h3><br>  <a href="https://ru.wikipedia.org/wiki/%25D0%2597%25D0%25B0%25D0%25BA%25D0%25BE%25D0%25BD_%25D0%2594%25D0%25B5%25D0%25BC%25D0%25B5%25D1%2582%25D1%2580%25D1%258B">Demeter's law</a> prohibits the use of implicit dependencies: " <em>Object A should not be able to directly access object C if object A has access to object B and object B has access to object C.</em> "  <a href="http://alvinalexander.com/java/java-law-of-demeter-java-examples">Java example</a> . <br><br>  This means that all dependencies in the code must be ‚Äúexplicit‚Äù - classes / modules can use only ‚Äútheir own dependencies‚Äù in their work and should not go through them to others.  Briefly, this principle is formulated in the following way: " <em>Interact only with direct friends, not friends of friends</em> ."  Thereby, less cohesiveness is achieved, as well as greater visibility and transparency of its design. <br><br>  The law of Demeter implements the already mentioned ‚Äú <em>principle of minimal knowledge</em> ‚Äù, which is the basis of weak connectivity, which means that an object / module should know as little detail as possible about the structure and properties of other objects / modules and anything else, <strong>including its own subcomponents</strong> .  Analogy from life: If you want a dog to run, it is foolish to command its paws, it is better to give the command to the dog, and she will already deal with her paws herself. <br><br><h3>  6. Composition instead of inheritance </h3><br>  One of the strongest links between objects is inheritance, so if possible, it should be avoided and replaced with composition.  This topic is well covered in the article by Herb Sutter - ‚Äú <a href="http://programming-lang.com/ru/comp_programming/satter/0/j84.html">Prefer Composition to Inheritance</a> ‚Äù. <br><br>  I can only advise in this context to pay attention to the <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25B4%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25B3%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F">Delegate</a> pattern ( <strong>Delegation / Delegate</strong> ) and the <strong>Component</strong> pattern <strong>that</strong> came from games, which is described in detail in the book ‚ÄúGame Programming Patterns‚Äù (the corresponding chapter from this book in <a href="http://gameprogrammingpatterns.com/component.html">English</a> and its <a href="http://live13.livejournal.com/473028.html">translation</a> ). <br><br><h1>  What to read </h1><br>  Articles on the Internet: <br><ul><li>  <a href="http://uml-tutorials.trireme.com/uml_tutorial_6_1.htm">Design patterns for decoupling</a> (small useful chapter from the <a href="http://uml-tutorials.trireme.com/">UML Tutorial</a> ); </li><li>  <a href="https://dev.by/lenta/apalon/nemnogo-pro-arhitekturu">A little bit about architecture</a> ; </li><li>  <a href="https://addyosmani.com/largescalejavascript/">Patterns For Large-Scale JavaScript Application Architecture</a> ; </li><li>  <a href="http://www.artlebedev.ru/tools/technogrette/js/observable/">Weak binding of components in JavaScript</a> ; </li><li>  <a href="http://habrahabr.ru/company/mailru/blog/267277/">How to write test code</a> - an article from which it is clearly seen that the criteria for code testing and good design are the same; </li><li>  Martin Fowler <a href="http://martinfowler.com/design.html">site</a> . </li></ul><br>  Wonderful Resource - <a href="http://rus-linux.net/MyLDP/BOOKS/Architecture-Open-Source-Applications/index.html">The open source application architecture</a> , where "the <em>authors of four dozen open source applications tell about the structure of the programs they created and how these programs were created. What are their main components? How do they interact? And what did they discover are the creators in the development process? In answering these questions, the authors of the articles collected in these books give you a unique opportunity to penetrate into how they create</em> . "  One of the articles was fully published in Habr√© - " <a href="http://habrahabr.ru/post/185636/">Scalable web architecture and distributed systems</a> ." <br><br>  Interesting solutions and ideas can be found in game development materials.  <a href="http://gameprogrammingpatterns.com/contents.html">Game Programming Patterns</a> is a large site with a detailed description of many templates and examples of their application to the task of creating games (it turns out there is already a translation of it - ‚Äú <a href="http://live13.livejournal.com/462582.html">Game Programming Templates</a> ‚Äù, thanks to <a href="https://habrahabr.ru/users/strannik_k/">strannik_k</a> for the link).  It may also be useful article " <a href="http://www.dtf.ru/articles/read.php%3Fid%3D40757">Flexible and scalable architecture for computer games</a> " (and its <a href="https://www.tjhsst.edu/~rlatimer/techlab07/plummer_thesis.pdf">original</a> . You just need to keep in mind that the author for some reason, the composition calls the template "Observer"). <br><br>  Regarding design patterns: <br><ul><li>  Interesting " <a href="http://rsdn.ru/forum/design/3774238">Thought about design patterns</a> "; </li><li>  Convenient site with brief descriptions and diagrams of all design patterns - ‚Äú <a href="http://citforum.ru/SE/project/pattern/index.shtml">Review of design patterns</a> ‚Äù; </li><li>  a site based on the book of the gang of four, where all the patterns are described in great detail - ‚Äú <a href="http://ooad.asf.ru/Patterns.aspx">Design Patterns [Patterns]</a> ‚Äù </li></ul><br>  There are also the principles / patterns of GRASP described by Craig Laerman in the book " <a href="http://www.ozon.ru/context/detail/id/3105480/">UML 2.0 Application and Design Patterns</a> ", but they are more confusing than clarifying.  The short review and discussion on <a href="http://habrahabr.ru/post/38323/">Habr√©</a> (the most valuable in comments). <br><br>  And of course the book: <br><ul><li>  Martin Fowler, <a href="http://www.ozon.ru/context/detail/id/1616782/">Enterprise Software Architecture</a> ; </li><li>  Steve McConnell " <a href="http://www.ozon.ru/context/detail/id/5508646/">Perfect Code</a> "; </li><li>  Design patterns from the gang of four (Gang of Four, GoF) - ‚ÄúThe <a href="http://www.ozon.ru/context/detail/id/2457392/">techniques of object-oriented design.</a>  <a href="http://www.ozon.ru/context/detail/id/2457392/">Design patterns</a> . </li></ul></div><p>Source: <a href="https://habr.com/ru/post/276593/">https://habr.com/ru/post/276593/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../276581/index.html">Multi-source replication in MySQL5.7</a></li>
<li><a href="../276583/index.html">New leader in price-performance among storage systems?</a></li>
<li><a href="../276585/index.html">About using React with the canvas element</a></li>
<li><a href="../276587/index.html">Analysis of the current situation in the Russian BIM market in the field of civil engineering</a></li>
<li><a href="../276589/index.html">Introduction to IL2CPP</a></li>
<li><a href="../276595/index.html">Quadcopter navigation using monocular vision</a></li>
<li><a href="../276597/index.html">Binding Request Traker 4.x on Ubuntu to ldap using the example of ActiveDirectory</a></li>
<li><a href="../276599/index.html">What brings the idea (Objective-C) - target-action on the blocks and a lot of runtime</a></li>
<li><a href="../276603/index.html">Evgeny Kaspersky spoke about cybercrime at Innopolis University [video]</a></li>
<li><a href="../276607/index.html">Performance and memory profiling from multiple viewing angles</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
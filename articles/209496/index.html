<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating 3D illustrations - a prototype system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! At the institute we had a course called ‚ÄúDescriptive Geometry‚Äù from which we learned what interesting things you can do with a compass and a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating 3D illustrations - a prototype system</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/7a0/828/6b3/7a08286b38116f8737f3da36e265e88f.png"><br><br>  Hi, Habr!  At the institute we had a course called ‚ÄúDescriptive Geometry‚Äù from which we learned what <a href="">interesting things</a> you can do with a compass and a ruler.  Since then, the idea of ‚Äã‚Äãdoing something on a computer in the spirit of three-dimensional drawing constructions has not left. <br><br>  Not so long ago, I was surprised to find that my laptop (far from the newest and most powerful) supports the WebGL standard.  As a result of some efforts, a prototype of a system for creating and publishing 3D illustrations has turned out. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://ewclid.headfire.ru/">http://ewclid.headfire.ru/</a> <br><br>  An interesting opportunity that was realized - viewing the illustrations on <b>3D-TVs in stereo</b> without any drivers and plug-ins.  The output is made directly from the browser in the format of side-by-side. <br><br>  It is quite possible that very few will be able to see the system in operation.  I beg your pardon for possible habr effects and protruding ears - this is just a prototype.  Who wants to learn more about the system - please read the article. <br><br><a name="habracut"></a><br><br><h4>  Prototype features </h4><br>  At the moment, the prototype has the following capabilities: <br><ul><li>  Scene creation is done in PHP.  Accordingly, all language features are available (variables, arrays, cycles, conditions, auxiliary functions).  You can create 3D scenes using primitives (point, segment, vector, parallelepiped, it is the same plane, sphere, cone, cylinder). </li><li>  Objects can be of different colors (gray, red, blue, green, yellow are recommended).  In addition, arbitrary transparency (from fully opaque to fully transparent) can be assigned. </li><li>  It is possible to place and rotate in space both the primitives themselves and the working coordinate system (conveniently, when all construction needs to be done at the right angle and at the right point) </li><li>  You can add a simple animation.  While it is available only to display an object, hide an object, display a text comment, pause the scene for a while to be displayed to the viewer. </li><li>  Everything that is created can be viewed in several modes.  (See below) </li><li>  The scene can be controlled with the mouse.  The scene can be rotated, approximate-delete, indicate the new center of rotation.  In stereo modes, only the left eye scene reacts to the mouse (in the Cross look mode, it is on the right!). </li></ul><br>  Modes of viewing 3d scenes: <br><ul><li>  Mono mode - one window. </li><li>  Cross look - for the left eye the scene on the right, for the right - on the left. </li><li>  Stereo TV mode - Side-by-Side mode.  Right eye on the right, left eye on the left.  Both images are horizontally compressed twice. </li><li>  All modes have the ability to unfold to full screen (in Stereo TV mode without this, nothing happens) </li><li>  There is a source code where everyone can see what teams built the scene </li></ul><br><br><h4>  Pro drawing board </h4><br>  On scenes, a drawing board may be present as a background.  On the board is a sheet of paper A0.  I tried to make the tree look like a tree, and paper - like paper.  If you look closely, you can see the push buttons on the four corners. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f63/6aa/5d7/f636aa5d77857b0d8be01ce6aee5183c.png"><br><br>  I think the board is useful - it sets the coordinate system, gives a sense of space and scale.  Drawings on its background look better.  By default, the center of coordinates coincides with the center of the sheet.  Dimensions are given in millimeters (sheet dimensions, respectively, 841 √ó 1189).  If you build, setting <code>Z=0</code> , then the construction will take place in the plane of the paper.  Well, who goes into the volume - must use non-zero Z-values. <br><br>  I would also like to say that primitives that do not have thickness ‚Äî such as a point, a vector, a segment ‚Äî are still realized as volumetric bodies ‚Äî it seems to me more spectacular. <br><br><h4>  Demo illustrations </h4><br>  To show the capabilities of the system, several demo scenes were created.  On the main page the illustrations themselves are not displayed, in order to see them you need to enter the publication. <br><br>  Demo 1. Primitives. <br><img src="https://habrastorage.org/getpro/habr/post_images/13e/075/05a/13e07505a2ccbbc9ad1db20d45d4efd6.png"><br><br>  Demo 2. Compound objects. <br><img src="https://habrastorage.org/getpro/habr/post_images/a4d/0cb/d88/a4d0cbd88d81475544f68baa29562639.png"><br><br>  Demo 3. Object in x3d format. <br><img src="https://habrastorage.org/getpro/habr/post_images/fd9/26a/c3b/fd926ac3b2378c8189e11168f3d07d45.png"><br><br>  Demo 4. Animation.  Construction of a tetrahedron.  (Animation is included in the upper left corner of the scene). <br><img src="https://habrastorage.org/getpro/habr/post_images/50d/d87/618/50dd87618ed81ad61fb5c814c569c275.png"><br><br>  I cite the source code of Demo3 so that it is clear how approximately the constructions are produced. <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">###3D### function zzCustomLamp($place, $color) { zzSetCoord($place); zzLamp('', array(0,0,0)); for ($i=1; $i&lt;=6; $i++) { zzSetStyle($color, $i/7); zzCircle('', array(0,0,$i*40), 50+$i*10); } } zzDesk(); zzCustomLamp(array(-200,-200,0),'red'); zzCustomLamp(array(-200,200,0),'green'); zzCustomLamp(array(200,-200,0),'blue'); zzCustomLamp(array(200,200,0),'gray');</span></span></code> </pre><br><br><h4>  Tests on a 3D TV </h4><br>  Stereo TV mode was tested on Phillips TV with passive glasses.  The computer was connected via HDMI.  Stereo effect was present.  As the scene rotated, some objects came out of the screen.  One drawback was noticed - it is inconvenient to manage the site in stereo mode, so often had to switch to 2D mode.  In general, I tried to test the site on all computers that I could reach.  Tested in Firefox and Chrome browsers.  It seems to work.  But of course the best results and smooth movements are achieved on gaming computers with a strong video card. <br><br><h4>  Instructions for those wishing to draw </h4><br>  The following information is for those who want to draw on their own.  You need to log in as the <b>editor</b> login (the password is the same as the login).  Next, select - Create publication, 3D scene.  In the create material window, you can type commands.  The very first thing to do is to separate the PHP code from the main content with the line <code>###3D###</code> .  Then dial <code>zzDesk();</code>  - if you want to display a drawing board.  And then - enter commands. <br><br>  One of the goals of the project was to simplify the scene construction language as much as possible.  Below is a complete list of currently available commands. <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// ###3D### -   PHP- $place=array( $x, $y, $z ) $size=array( $dx, $dy , $dz ) $rotation = array ( $axis_x, $axis_y, $axis_z, $angle) // $angle   ,     . $color = 'gray' 'red' 'green' 'blue' 'yellow' $transparent = 0..1 ( ‚Äì 1 ‚Äì  ). $emissive = true ‚Äì    $id = 'circle01' -   //    , //     $id_comment = 'com01' -   //         //  id,     //       //    function zzSetHide(); //     (  ) function zzSetShow(); //     function zzSetStyle($color, {$transparent}, {$emissive} ); //     function zzSetCoord($center, {$rotation} ); //     //   function zzDesk(); //   function zzPoint($id, $place) ; //  function zzLine($id, $pBegin, $pEnd); //  function zzVector($id, $pBegin, $pEnd); //  (   ) function zzCircle($id, $place, $radius, {$rotation} ) ; //  function zzBox($id, $place, $size, {$rotation} ) ; //  (  ) function zzSphere($id, $place, $radius) ; //  function zzCone($id, $place, $radius, $height, {$rotation} ); //  function zzCylinder($id, $place, $radius, $height, {$rotation} ) ; //  function zzLamp($id, $place) ; // ,  x3d (  teapot ‚Äì   ) //  function zzStepHide($id); //  function zzStepShow($id); //  function zzStepComment($comment_id); //   function zzStepCommentHide($comment_id); //    ( ) function zzStepPause(); //   (  2 )</span></span></code> </pre><br><br>  If suddenly you get an empty scene, or a completely empty browser window - it means something is wrong in the code.  Excuse me, error handling system is in its infancy.  It is treated either with the back button or by <b>typing edit</b> in the address bar after the publication identifier. <br><br><h4>  What could not be implemented in the prototype </h4><br>  Many of the possibilities were beyond the scope of the prototype, although there were intentions to implement them. <br><ul><li>  I would like more primitives (not enough pieces - arcs, sectors, polygonal planes). </li><li>  Of course, spline surfaces and spline curves. </li><li>  I really wanted to implement bulk signatures to sign primitives right in the volume.  Unfortunately not enough intelligence.  There is an opportunity in the WebGL library, but something didn't work as much as I wanted. </li><li>  I would like simple geometric arithmetic to find the points of intersection of primitives. </li><li>  More animation features.  Smooth movements and transformations.  (The main thing is not to complicate everything so that it will be difficult to use it). </li></ul><br><br><h4>  Look under the hood </h4><br>  Under the hood: as a CMS - <a href="http://drupal.org/">Drupal 6</a> , as a WebGL-library - <a href="http://www.x3dom.org/">x3dom</a> (read as xFreedom).  Both were slightly modified.  What was done: <br><ul><li>  Improved library x3dom.  The meaning of refinement is to make two types of synchronization for use in stereo mode.  In addition, in Stereo-TV mode, you had to compress the view horizontally. </li><li>  A module was created for Drupal to implement the API.  A Drupal filter has been created to recognize 3D code. The Drupal theme for displaying screens has been slightly improved. </li><li>  Simple JavaScript code was created to control the animation.  Some more bindings from PHP and JavaScript, so that everything works together. </li></ul><br><br>  There is a desire to improve the system and add 3D-scenes from various areas of knowledge.  Of course, many things I would like to do more competently.  For example, I have to build a scene for two types separately.  I did not manage to use the opportunity to share objects between the two species.  If Habr tells me some libraries and options for shorter paths I would be very grateful. </div><p>Source: <a href="https://habr.com/ru/post/209496/">https://habr.com/ru/post/209496/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../209480/index.html">Php elephant on kickstarter</a></li>
<li><a href="../209482/index.html">How does mathematics help Yandex earn?</a></li>
<li><a href="../209486/index.html">DNS server spoofing. be careful</a></li>
<li><a href="../209488/index.html">Spain became the first country in the world where wind power worked more efficiently than other branches of energy production.</a></li>
<li><a href="../209490/index.html">We analyze the interface details on the example of one mobile taxi client</a></li>
<li><a href="../209498/index.html">Experience of using MNP in Russia or how I transferred the number from operator to operator</a></li>
<li><a href="../209500/index.html">Cloud.Mail.Ru + EncFS for backing up your home photo archive</a></li>
<li><a href="../209504/index.html">Problems of forecasting financial markets</a></li>
<li><a href="../209506/index.html">Fast graphics output in Matlab</a></li>
<li><a href="../209508/index.html">Attempt to drain the client databases of BillManager users</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
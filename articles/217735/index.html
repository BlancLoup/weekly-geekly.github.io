<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SSD: subspecies and prospects</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Everyone remembers how the first truly massive SSD products appeared. Enthusiasm, growth rates, beautiful tens of thousands of IOPS performance. Almos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SSD: subspecies and prospects</h1><div class="post__text post__text-html js-mediator-article"> <a href=""><img align="right" src="https://habrastorage.org/getpro/habr/post_images/7cc/ceb/e87/7cccebe872e81b6f2d7918e035296953.jpg"></a> <br>  Everyone remembers how the first truly massive SSD products appeared.  Enthusiasm, growth rates, beautiful tens of thousands of IOPS performance.  Almost idyll. <br><br>  Naturally, for the server (single computers we do not consider) the market was a huge step forward - after all, magnetic media have long become a bottleneck for building a high-performance solution.  Several cabinets with disks, which together mastered two or three thousand IOPS, were considered the norm, and there was such an opportunity to increase performance a hundred or more times from one drive (compared to SAS 15K). <br><br>  Optimism was the sea, but in reality everything turned out to be not so smooth. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  Here both compatibility issues and resource problems, when everything from the cheapest lines was put to the server, and performance degradation problems ‚Äî issues of TRIM support in RAID controllers are still being raised. <br><br>  The development of SSD technology proceeded in stages.  At first, everyone worked on the speed of linear operations to reach the limit of interfaces.  With SATA II it happened almost immediately, it took some time to conquer SATA III.  The next step was to increase the performance of operations with random access, here we also managed to achieve decent growth. <br><br>  The next point to notice was the performance stability: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3ee/726/e2d/3ee726e2d2a0625186bc63e55ba314ee.jpg"><br>  <i>Taken from the Anandtech review.</i> <br><br>  On average, it is, of course, a lot, but the jumps from 30K to values ‚Äã‚Äãin a couple of dozen iops are strong, the spindle gives its performance steadily. <br><br>  The first who loudly declared this was Intel with its DC S3700 line. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/37e/97e/700/37e97e7004524bcc72d63802fa8b6582.png"><br>  <i>Taken from the Anandtech review.</i> <br><br>  If you bring the right side of the graph closer, the spread will be within 20%.  Why is it important? <br><ol><li>  The behavior of a disk in a RAID array is much more predictable, it is much easier for the controller to work when all the participants in the array have approximately the same performance.  Very few people would think of building arrays of 7.2K and 15K disks at the same time, and an array of SSDs with instantaneous performance spreads a hundred times worse. </li><li>  Applications that need to consistently and quickly receive or write data at random will work more predictably. </li></ol><br><br>  Quite a long time ago, SAS drives appeared, on SLC (Single Level Cell) memory with space cost and almost unlimited resource.  Naturally, they were designed to work as part of a storage system - there dual-port access is a prerequisite for the drive.  Over time, more available products appeared on eMLC memory.  The resource, of course, fell, but still remains very impressive due to the large reserve volume of memory inaccessible to the user. <br><br> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/748/3e3/db6/7483e3db61720886ddff695ed5d82342.jpg"></a> <br>  <i>An example of a modern SAS SSD drive</i> <br><br>  Since they were originally designed to work in corporate systems, the stability of performance was at the height right away.  Since the approaches of hard drives to SSD performance tests are hardly applicable, the SNIA Solid State Storage Performance Test was developed by the Storage Networking Industry Association (SNIA) industry consortium.  The main feature of the technique is that the disk is first ‚Äúprepared‚Äù, the purpose of preparation is to fill up all the available memory, because a particularly smart controller writes data not only to the allocated disk capacity, it spreads the data across all available memory.  In order to get the result of the disk in a real environment after a long continuous operation in a synthetic test, it must be denied access to the ‚Äúfresh‚Äù memory, where there was never any data.  After this, the actual testing begins: <br><br> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/3c7/3a4/9cd/3c73a49cd10724fe76d44e638e18b42b.jpg"></a> <br>  <i>Random reading</i> <br><br> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/61e/bfc/945/61ebfc9455128e398a97ebc719866ed7.jpg"></a> <br>  <i>Random entry</i> <br><br>  On random recording, you can see a significant advantage from 12G SAS, but the processor load for stream processing increases two or more times. <br><br>  <b>Current position on the SAS / SATA SSD market</b> <br><br>  Disks are divided into several groups, each of which is successfully used for certain tasks. <br><ol><li>  Household drives for tasks related to reading.  Extremely popular option at the Russian Internet holdings that use software arrays.  This group also includes Toshiba HG5d type disks, which are positioned for entry-level enterprise workloads (they are excellent for installing OSs or tasks with preferential reading).  They live under such loads for a long time, cost little, what else is needed for happiness? </li><li>  Corporate drives with 1-3 complete rewrites per day.  Positioned in storage with a small percentage of writing, intensive reading or for read caching.  Work well with RAID controllers, some are made for storage and have an SAS interface, the disk cache is necessarily protected by capacitors.  Not significantly more expensive than the first group. </li><li>  Disks with 10 full overwrites per day.  Universal workhorse in servers (where SATA drives are primarily used) and in storage.  Noticeably more expensive than the first group. </li><li>  Disks with 25 full rewrites per day.  The most expensive and fast, a bunch of memory under the reserve sets a high price tag per gigabyte of available capacity. </li></ol><br><br>  Now let's talk about the SSD in an unusual performance, because the flash (as opposed to magnetic plates) can be placed as you like. <br><br>  <b>SATA SSD in DIMM format</b> <br><br>  Due to the growth of memory modules and the efforts of Intel / AMD to increase the number of supported memory bars on the processor, few servers use all the slots on the board. <br><br>  In our experience, even 16 memory strips in the server are not very common, while the RS130 / 230 G4 models offer 24 slots in the system. <br><br> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/d3b/3a3/cb0/d3b3a3cb023c9e7e40b81b533744affc.jpg"></a> <br>  <i>Lots and lots of memory</i> <br><br>  When such a part of the platform's capabilities is idle, it is deeply insulting and annoying. <br>  What can be done with this? <br>  Empty slots can take SSD drives! <br>  For example, such: <br><br> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/71d/fcd/73f/71dfcd73fe062979b8bf977d40a9d3d8.jpg"></a> <br>  <i>SSD in DIMM format</i> <br><br>  Now we have several such drives validated, the capacity of which reaches 200GB on SLC memory and 480GB on MLC / eMLC. <br><br>  Technically, this is a conventional SSD based on the SandForce SF-2281 controller, familiar from many disks in 2.5 "format and quite popular in inexpensive disks for tasks with a predominance of reading (from the first group). The interface is standard SATA, only memory is taken from the memory slot. Used Toshiba flash (MLC NAND Toggle Mode 2.0, 19nm) TH58TEG8DDJBA8C, 3K P / E cycles, with a total volume of 256 gigabytes. The promised Bit Error Rate (BER) less than 1 in 10 ^ 17 bits read (what it gives - was considered in the <a href="http://habrahabr.ru/company/etegro/blog/217115/">previous material on hard drives</a> ). <br><br> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/6a0/9d5/c8e/6a09d5c8ecff1eec2fe76cb5ac755e47.jpg"></a> <br>  <i>View of the controller</i> <br><br>  Installation in the server is simple and convenient - just insert it into the memory slot (power is taken from it) and pull the cable to the port: <br><br> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/369/85c/b9c/36985cb9c7b15c1fd7786cf04d56a605.jpg"></a> <br>  <i>View in the server</i> <br><br>  <b>Original solutions</b> <br><br>  Current SSDs use the usual SATA connector, which is not found on all the boards.  For example, on our RS130 G4 there are only two such connectors.  If necessary, you can make a cable that combines four SSDs in mini-SAS or mini-SAS HD. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e47/2d2/f7f/e472d2f7ff762f1f22c13ac649a47cec.jpg"><br>  <i>mini-SAS cable</i> <br><br>  Using this option you can make different interesting products, for example: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a59/439/766/a5943976686f557959c9090abb1e5bf2.jpg"><br>  <i>32 SSD in 1U case</i> <br><br>  About SSD with standard SAS / SATA interfaces, perhaps, everything.  In the next article, we will look at the PCIe SSD and their future, but for now a little about the method of determining the SSD resource for writing. <br><br>  <b>Write resource</b> <br><br>  For home use, few people care about the disk resource for writing, while for more serious tasks this value can be critical.  The record disc write per day (DWPD), which is defined as the total amount of data recorded by Total Terabyte Written divided by the period of work (usually 5 years), has already become traditional.  The best SATA drives have an index of 10 DWPD, the best SAS SSDs reach up to 45 DWPD. <br><br>  How is this magic figure measured?  Need to delve into the theory of flash memory. <br><br>  The main feature of the flash - to record (program) data cell first you need to erase (erase).  Unfortunately, it is impossible to erase just a cell, such operations are carried out on blocks (Erase block), the minimum amount of memory for erasing, consisting of several pages.  A page is a minimum area of ‚Äã‚Äãmemory that can be read or written in a single read / write operation. <br><br>  This is how the concept of a Program / Erase cycle appeared.  Writing data to one or several pages in a block and erasing a block, in any order. <br><br>  The notion of write amplification factor - Write amplification factor (WAF) appeared in a logical way.  The amount of data written to disk divided by the amount of data sent by the system for recording. <br><br>  What affects the WAF? <br>  The nature of the load: <br><ul><li>  consistent or random; </li><li>  large or small blocks; </li><li>  is there any alignment of data by block sizes; </li><li>  kind of data (especially for SSD with compression). </li></ul><br><br>  For example, if the system sends 4KB for recording and 16KB (one block) is written to the flash, then WAF = 4. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4b1/8f1/89b/4b18f189bb2ae9b94e7cfc848e3297ac.jpg"><br>  <i>One block of flash memory</i> <br><br>  Here is a single NAND block consisting of 64 pages.  Suppose that each page has a size of 2KB (four sectors), with a total of 256 sectors per block.  All pages of the block are occupied by useful data.  Suppose the system overwrites only a few sectors in a block. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c14/27b/c19/c1427bc19ba4dea9ebad3f69aafdfc77.jpg"><br>  <i>Rewriting Pages</i> <br><br>  To record 8 sectors, we need: <br><ol><li>  Read the entire block in RAM. </li><li>  Change the data in pages 1, 2 and 3. </li><li>  Erase block from NAND. </li><li>  Write a block of RAM. </li></ol><br><br>  A total of 256 sectors are erased and rewritten for the sake of a change of only 8, WAF is already 32. But these are all the horrors of small blocks and non-optimized algorithms for working with flash, when recording large blocks of WAF will be equal to one. <br><br>  JEDEC (an industrial consortium on any microelectronics) identified a bunch of factors that affect the life cycle of SSD drives and derived the dependency function as f (TBW) = (TBW √ó 2 √ó WAF) / C, where C is the disk capacity, and multiplier 2 is entered for prevent flush wear on storage reliability. <br><br>  Total TBW Flash capacity * PE cycles / 2 * WA <br><br>  As a result, the survivability of each SSD is determined by the type of load that will have to be determined manually.  The linear recording case is the simplest, for random operations the NAND memory reserve, which is not used by the user, will still greatly influence. <br><br>  If you take a disk with 3K P / E cycles per memory cell, then with linear recording TBW = 384 or about 1 DWPD for a capacity of 256GB for 5 years. <br><br>  Enterprise workload, according to JEDEC, gives a WA of about 5, or about 0.2 DWPD for 5 years. </div><p>Source: <a href="https://habr.com/ru/post/217735/">https://habr.com/ru/post/217735/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../217719/index.html">Managerial tools: need formula or how are we squeezed?</a></li>
<li><a href="../217725/index.html">COLT 2.0 released with support for Angular.js, node-webkit</a></li>
<li><a href="../217727/index.html">Starshade - search habitable planets</a></li>
<li><a href="../217729/index.html">FundingTo - fundraising by your rules</a></li>
<li><a href="../217731/index.html">Mass release of .NET products</a></li>
<li><a href="../217739/index.html">Traditional post to the First of April</a></li>
<li><a href="../217743/index.html">Mathematics for testers</a></li>
<li><a href="../217747/index.html">How to identify hacker activity on the site, eliminate its consequences and defend against intruders</a></li>
<li><a href="../217751/index.html">Yandex cleaned DNS view for AAAA records</a></li>
<li><a href="../217753/index.html">StackExchange API Basics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
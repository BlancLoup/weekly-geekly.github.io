<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Yandex Linguistics API for .NET</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After visiting Yet another Conference 2013, I had an idea to write an API for all Yandex linguistics services under .NET. After a brief googling, fort...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Yandex Linguistics API for .NET</h1><div class="post__text post__text-html js-mediator-article">  After visiting Yet another Conference 2013, I had an idea to write an API for all Yandex linguistics services under .NET.  After a brief googling, fortunately, there were no such libraries.  Despite the fact that it may not be needed by anyone, I decided to implement it at least in order to practice <a href="http://restsharp.org/">RestSharp</a> , testing, and various github functions (issuers, release, markdown, etc.).  In addition, in the implementation process I had to deal with an interesting string comparison algorithm, which I will mention in the topic. <br><br>  Immediately throw links to sources and binaries on GitHub: <a href="">Code</a> , <a href="">Binary</a> <br><br><h4>  Implemented APIs </h4><br><ul><li>  <b><a href="http://api.yandex.ru/predictor/">Yandex.Predictor.</a></b>  This service allows applications to receive in the form of hints the most likely continuation of words or phrases.  The predictor also considers typos in the original query.  This simplifies the text entry process, especially on mobile devices. </li><li>  <b><a href="http://api.yandex.ru/dictionary/">Yandeks.Slovar.</a></b>  This service allows applications to get detailed dictionary entries from Yandex machine dictionaries.  Articles contain grouped translations, information about parts of speech, examples, as well as transcriptions for English words. </li><li>  <b><a href="http://api.yandex.ru/translate/">Yandex.Translate.</a></b>  Text translation for more than 30 languages. </li><li>  <b><a href="http://api.yandex.ru/speller/">Yandex.Speler.</a></b>  The spell checker, which helps to find and correct spelling errors.  The work of the service is based on the use of a spelling dictionary.  Currently Speller is checking texts in Russian, Ukrainian and English. </li></ul><br><a name="habracut"></a><br>  RestSharp makes it very easy to write code for synchronous and asynchronous HTTP GET and POST requests, as well as convert the received responses in XML or JSON format to .NET objects (this project used XML). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Extended Damerau ‚Äî Levenshtein distance calculation function </h4><br>  In the process of implementing the speller, I wanted the user to display not only the corrected version of the text, but also errors in it.  The thought of <a href="http://en.wikipedia.org/wiki/Levenshtein_distance">Levistein</a> ‚Äôs <a href="http://en.wikipedia.org/wiki/Levenshtein_distance">distance</a> immediately came to mind.  But: <br><ul><li>  This algorithm does not take into account the transposition errors, which are 80% when typing (data from Wikipedia). </li><li>  This algorithm it returns the <i>distance</i> , rather than the <i>position of</i> errors in the new word. </li></ul><br>  The first drawback was leveled using the <a href="http://en.wikipedia.org/wiki/Damerau%25E2%2580%2593Levenshtein_distance">Damerau-Levenshtein distance</a> , and the second - using the matrix analysis obtained during the operation of the algorithm (distance is the value of the last row element in the last column of the matrix. Accordingly, in my case, the distance will be the total number of errors returned ). <br><br>  Thus, the algorithm was implemented to search for the following errors in erroneous (word) and correct (correctedWord) words: <br><ul><li>  <b>Replacement.</b>  Example: synchrophasatron -&gt; sync <b>o</b> phase <b>of the</b> throne </li><li>  <b>Insert.</b>  Example: synchrophasic -&gt; synchrophasic <b>he</b> </li><li>  <b>Uninstall.</b>  Example: synchrophasotron -&gt; <u>synx</u> rof azron </li><li>  <b>Transposition</b>  Example: synchrophasortone -&gt; synchro <u>phas</u> </li></ul><br>  In addition, the weights of various errors can be adjusted (by default, all have the same weight, equal to one). <br><br><div class="spoiler">  <b class="spoiler_title">The code of the extended Damerau ‚Äî Levenshtein distance calculation function</b> <div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> List&lt;Mistake&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DamerauLevenshteinDistance</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> word, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> correctedWord, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> transposition = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> substitutionCost = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> insertionCost = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> deletionCost = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> transpositionCost = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> w_length = word.Length; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cw_length = correctedWord.Length; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KeyValuePair&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, CharMistakeType&gt;[w_length + <span class="hljs-number"><span class="hljs-number">1</span></span>, cw_length + <span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Mistake&gt;(Math.Max(w_length, cw_length)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (w_length == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cw_length; i++) result.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mistake(i, CharMistakeType.Insertion)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt;= w_length; i++) d[i, <span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KeyValuePair&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, CharMistakeType&gt;(i, CharMistakeType.None); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt;= cw_length; j++) d[<span class="hljs-number"><span class="hljs-number">0</span></span>, j] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KeyValuePair&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, CharMistakeType&gt;(j, CharMistakeType.None); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt;= w_length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">1</span></span>; j &lt;= cw_length; j++) { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> equal = correctedWord[j - <span class="hljs-number"><span class="hljs-number">1</span></span>] == word[i - <span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> delCost = d[i - <span class="hljs-number"><span class="hljs-number">1</span></span>, j].Key + deletionCost; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> insCost = d[i, j - <span class="hljs-number"><span class="hljs-number">1</span></span>].Key + insertionCost; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> subCost = d[i - <span class="hljs-number"><span class="hljs-number">1</span></span>, j - <span class="hljs-number"><span class="hljs-number">1</span></span>].Key; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!equal) subCost += substitutionCost; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> transCost = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (transposition &amp;&amp; i &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; j &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; word[i - <span class="hljs-number"><span class="hljs-number">1</span></span>] == correctedWord[j - <span class="hljs-number"><span class="hljs-number">2</span></span>] &amp;&amp; word[i - <span class="hljs-number"><span class="hljs-number">2</span></span>] == correctedWord[j - <span class="hljs-number"><span class="hljs-number">1</span></span>]) { transCost = d[i - <span class="hljs-number"><span class="hljs-number">2</span></span>, j - <span class="hljs-number"><span class="hljs-number">2</span></span>].Key; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!equal) transCost += transpositionCost; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> min = delCost; CharMistakeType mistakeType = CharMistakeType.Deletion; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (insCost &lt; min) { min = insCost; mistakeType = CharMistakeType.Insertion; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (subCost &lt; min) { min = subCost; mistakeType = equal ? CharMistakeType.None : CharMistakeType.Substitution; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (transCost &lt; min) { min = transCost; mistakeType = CharMistakeType.Transposition; } d[i, j] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KeyValuePair&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, CharMistakeType&gt;(min, mistakeType); } } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> w_ind = w_length; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cw_ind = cw_length; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (w_ind &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; cw_ind &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (d[w_ind, cw_ind].Value) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CharMistakeType.None: w_ind--; cw_ind--; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CharMistakeType.Substitution: result.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mistake(cw_ind - <span class="hljs-number"><span class="hljs-number">1</span></span>, CharMistakeType.Substitution)); w_ind--; cw_ind--; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CharMistakeType.Deletion: result.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mistake(cw_ind, CharMistakeType.Deletion)); w_ind--; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CharMistakeType.Insertion: result.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mistake(cw_ind - <span class="hljs-number"><span class="hljs-number">1</span></span>, CharMistakeType.Insertion)); cw_ind--; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CharMistakeType.Transposition: result.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mistake(cw_ind - <span class="hljs-number"><span class="hljs-number">2</span></span>, CharMistakeType.Transposition)); w_ind -= <span class="hljs-number"><span class="hljs-number">2</span></span>; cw_ind -= <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (d[w_length, cw_length].Key &gt; result.Count) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> delMistakesCount = d[w_length, cw_length].Key - result.Count; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; delMistakesCount; i++) result.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mistake(<span class="hljs-number"><span class="hljs-number">0</span></span>, CharMistakeType.Deletion)); } result.Reverse(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br></div></div><br><br><h4>  Interface </h4><br>  The interface was implemented on WinForms with the hope that the application will run on Mono.  However, it was not tested. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/57c/9ac/b45/57c9acb45d1cc52a261ff3290db1145b.png" alt="image"><br><br>  This library can be used in any projects, but with attribution (Apache 2.0). </div><p>Source: <a href="https://habr.com/ru/post/204372/">https://habr.com/ru/post/204372/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../204356/index.html">Objective-c blocks and c ++ lambdas</a></li>
<li><a href="../204362/index.html">Microsoft warns of operating CVE-2013-5065 ITW</a></li>
<li><a href="../204364/index.html">Thinkspace: Zuckerberg Factory</a></li>
<li><a href="../204368/index.html">Tube Linux-like terminal in Windows</a></li>
<li><a href="../204370/index.html">LTE in Moscow</a></li>
<li><a href="../204374/index.html">Grid control ... continued 1</a></li>
<li><a href="../204376/index.html">Heavy lonely indie burden</a></li>
<li><a href="../204380/index.html">Finding periodic solutions of a class of non-autonomous systems of differential equations</a></li>
<li><a href="../204384/index.html">Chips for Android</a></li>
<li><a href="../204390/index.html">Akenori 1080 X Review: How to Turn the Recorder into an Integrated Security System</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
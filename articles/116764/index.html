<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A simple example of using WCF in Visual Studio 2010. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="You are expected in two parts: 


- Creating the simplest solution (solution) with standard endpoints 
- Manually add and configure endpoints 


 It's...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A simple example of using WCF in Visual Studio 2010. Part 1</h1><div class="post__text post__text-html js-mediator-article">  You are expected in two parts: <br><ul><li>  Creating the simplest solution (solution) with standard endpoints </li><li>  <a href="http://habrahabr.ru/blogs/net/116872/">Manually add and configure endpoints</a> </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/0ad/3e8/c92/0ad3e8c92eaa1fdfa4b713ba431e0867.png"><br><br>  It's been a long time since I wrote the original post. <a href="http://bloggingabout.net/blogs/dennis/archive/2007/04/20/wcf-simple-example.aspx">A simple example of using WCF</a> .  That was before the release of Visual Studio 2008, and much has changed since then.  Since many people still ask questions in the comments to that post, let's see what we currently have to do in order to raise and start the service (service), as well as access it from the client application. <br><a name="habracut"></a><br>  This time we will start with the class library assembly (DLL), and we will also deploy the service inside the console application.  The client will again use the Windows Forms application.  Although we do everything in Visual Studio 2010, much of it also applies to VS2008.  I will mention when it will be wrong and will offer an alternative option.  This time I will describe in a little more detail what we have to do, so this post will be a little more than the original one. <br><br><h4>  Creating a project </h4><br>  First create a new class library where we define the service itself.  Select New Project and <i>Class Library</i> as the project template.  Enter the name of the project ‚ÄúEmailService‚Äù and the name of the solution ‚ÄúWCFSimpleExample2010‚Äù.  If you cannot set a name for the solution, check whether the option <i>Create directory for solution is</i> selected. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="http://bloggingabout.net/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/dennis.metablogapi/0284.createnewproject_5F00_2128C507.png"><br><br><h4>  Creating a contract </h4><br>  First, we will create a contract with only one method, or an operation, as they are called in WCF.  Rename the file to IEmailValidator.cs and create an interface with the same name. <br>  Now add the signature of the ValidateAddress method, which takes a single EmailAddress argument of type string and returns a boolean value.  This is a simple interface, nothing complicated. <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">interface</font> IEmailValidator { <font color="#0000ff">bool</font> ValidateAddress( <font color="#0000ff">string</font> emailAddress); }</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">interface</font> IEmailValidator { <font color="#0000ff">bool</font> ValidateAddress( <font color="#0000ff">string</font> emailAddress); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">interface</font> IEmailValidator { <font color="#0000ff">bool</font> ValidateAddress( <font color="#0000ff">string</font> emailAddress); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">interface</font> IEmailValidator { <font color="#0000ff">bool</font> ValidateAddress( <font color="#0000ff">string</font> emailAddress); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">interface</font> IEmailValidator { <font color="#0000ff">bool</font> ValidateAddress( <font color="#0000ff">string</font> emailAddress); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">interface</font> IEmailValidator { <font color="#0000ff">bool</font> ValidateAddress( <font color="#0000ff">string</font> emailAddress); }</font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Now we have to tell WCF that this is our contract.  We do this by adding attributes, but first we must add a reference to System.ServiceModel.  Right-click on the project and select <i>Add reference</i> , then select System.ServiceModel from the list.  I use <a href="http://visualstudiogallery.msdn.microsoft.com/en-us/d0d33361-18e2-46c0-8ff2-4adea1e34fef">Visual Studio 2010 Pro Power Tools</a> , so my image in the screenshot may be different from yours, but the idea is the same. <br><br><img src="http://bloggingabout.net/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/dennis.metablogapi/8737.AddReference1_5F00_6E58BE92.png"><br><br><img src="http://bloggingabout.net/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/dennis.metablogapi/0243.AddReference2_5F00_4E3DB1D5.png"><br><br>  Now you can add attributes to the interface.  Above the interface definition, place the <a href="http://msdn.microsoft.com/en-us/library/system.servicemodel.servicecontractattribute.aspx">ServiceContract</a> attribute and, on the operation, the <a href="http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontractattribute.aspx">OperationContract</a> attribute.  Add the using System.ServiceModel directive at the very beginning of the code file, or let Visual Studio do it for you when you hover over one of the attribute names.  If you entered it correctly and are case sensitive, you can press CTRL +.  and then the context menu appears, which allows you to add the using directive automatically.  As a result, your interface should look like this: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  [ServiceContract] </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">interface</font> IEmailValidator </li><li>  { </li><li>  [OperationContract] </li><li>  <font color="#0000ff">bool</font> ValidateAddress ( <font color="#0000ff">string</font> emailAddress); </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br><h4>  Create service implementation </h4><br>  Now that we have a contract, we need to write code for the service in order to actually do what we want to do.  Create a new class that implements the interface.  We will use a regular expression to verify the email address and, if correct, return true.  You must either type something like the following code, or write your own.  :-) <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">public</font> <font color="#0000ff">class</font> EmailValidator: IEmailValidator </li><li>  { </li><li>  <font color="#0000ff">public</font> <font color="#0000ff">bool</font> ValidateAddress ( <font color="#0000ff">string</font> emailAddress) </li><li>  { </li><li>  <font color="#2B91AF">Console</font> .WriteLine ( <font color="#A31515">"Validating: {0}"</font> , emailAddress); </li><li></li><li>  <font color="#0000ff">string</font> pattern = <font color="#A31515">@ "^ ([0-9a-zA-Z] ([-. \ w] * [0-9a-zA-Z]) * @ (([0-9a-zA-Z]) + ( [- \ w] * [0-9a-zA-Z]) * \.) + [a-zA-Z] {2.9}) $ "</font> ; </li><li>  <font color="#0000ff">return</font> Regex.IsMatch (emailAddress, pattern); </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  You now have the two most important classes for your service.  It‚Äôs not really necessary to use the interface, but this is best practice.  Thus, you can inherit several interfaces, as well as implement different versions of interfaces. <br><br><h4>  Creating a host </h4><br>  As already mentioned, we will use a console application as a host.  Add a new project and now choose <i>Console Application</i> as the project template.  Call it "ConsoleHost". <br><br><img src="http://bloggingabout.net/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/dennis.metablogapi/7633.CreateConsoleHost_5F00_2E22A518.png"><br><br>  Add the link to <i>System.ServiceModel</i> again, as well as to the <i>EmailService</i> project.  In your Main method, create a ServiceHost object and pass it the correct arguments in the constructor, as shown below. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  Type serviceType = <font color="#0000ff">typeof</font> (EmailValidator); </li><li>  <font color="#2B91AF">Uri</font> serviceUri = <font color="#0000ff">new</font> <font color="#2B91AF">Uri</font> ( <font color="#A31515">"http: // localhost: 8080 /"</font> ); </li><li>  ServiceHost host = <font color="#0000ff">new</font> ServiceHost (serviceType, serviceUri); </li><li>  host.Open (); </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  In line 4, we create a ServiceHost object.  As the first argument, it gets the implementation type of our service.  And the base address as the second argument.  You can read <a href="http://bloggingabout.net/blogs/dennis/archive/2006/11/29/WCF-Part-6-_3A00_-Address.aspx">more about base addresses here</a> and <a href="http://bloggingabout.net/blogs/dennis/archive/2006/11/09/WCF-Part-3-_3A00_-Hosting-the-service.aspx">more about placing here</a> .  The type is defined in line 1, the base address is in line 2. Finally, in line 5, our host is started. <br><br><h4>  WCF4: Standard Endpoints </h4><br>  This is already a feature of the .NET Framework 4.0 and this cannot be done in the previous version of .NET.  Standard endpoints are a new feature designed to make configuring your service less troublesome.  I would like to explicitly define everything in detail, so that everyone knows what is happening.  But in our example, everything works very well.  If you do not use.  NET 4.0, you can no longer read and go to the <a href="http://habrahabr.ru/blogs/net/116872/">second part</a> , which will be published later. <br>  You can add standard endpoints yourself by adding host.AddDefaultEndpoints ();  to the code, right before the host.Open (); line. <br>  How can we see that endpoints are configured by default?  I have a small script from the <a href="http://bloggingabout.net/blogs/dennis/archive/2006/11/28/Display-WCF-host-details_3B00_-code-snippet.aspx">distant past</a> that displays everything that is currently running.  I will not go into details, just paste the following lines of code after host.Open () ;. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">#region</font> Output dispatchers listening </li><li>  <font color="#0000ff">foreach</font> ( <font color="#2B91AF">Uri</font> uri <font color="#0000ff">in</font> host.BaseAddresses) </li><li>  { </li><li>  <font color="#2B91AF">Console</font> .WriteLine ( <font color="#A31515">"\ t {0}"</font> , uri.ToString ()); </li><li>  } </li><li>  <font color="#2B91AF">Console</font> .WriteLine (); </li><li>  <font color="#2B91AF">Console</font> .WriteLine ( <font color="#A31515">"Number of dispatchers listening: {0}"</font> , host.ChannelDispatchers.Count); </li><li>  <font color="#0000ff">foreach</font> (System.ServiceModel.Dispatcher.ChannelDispatcher dispatcher <font color="#0000ff">in</font> host.ChannelDispatchers) </li><li>  { </li><li>  <font color="#2B91AF">Console</font> .WriteLine ( <font color="#A31515">"\ t {0}, {1}"</font> , dispatcher.Listener. <font color="#2B91AF">Uri</font> .ToString (), dispatcher.BindingName); </li><li>  } </li><li>  <font color="#2B91AF">Console</font> .WriteLine (); </li><li>  <font color="#2B91AF">Console</font> .WriteLine ( <font color="#A31515">"Press &lt;ENTER&gt; to terminate Host"</font> ); </li><li>  <font color="#2B91AF">Console</font> .ReadLine (); </li><li>  <font color="#0000ff">#endregion</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  Now you have the opportunity to see the endpoints, as in the first screenshot below.  You can use the browser to go to the service URI and look at the standard <a href="http://bloggingabout.net/blogs/dennis/archive/2006/11/09/WCF-Part-4-_3A00_-Make-your-service-visible-through-metadata.aspx">MEX endpoint</a> . <br><br><img src="http://bloggingabout.net/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/dennis.metablogapi/0068.mexendpointwithoutconfig_5F00_1FE42C28.png"><br><br><img src="http://bloggingabout.net/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/dennis.metablogapi/7853.ConsoleHostWithoutConfig_5F00_0E07985B.png"><br><br>  As you can see, this tells us that the MEX endpoint (aka metadata) is not yet configured.  Now there is an easy way to do this through the new standard endpoints.  My first impression was that it would work. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  Type serviceType = <font color="#0000ff">typeof</font> (EmailValidator); </li><li>  <font color="#2B91AF">Uri</font> serviceUri = <font color="#0000ff">new</font> <font color="#2B91AF">Uri</font> ( <font color="#A31515">"http: // localhost: 8080 /"</font> ); </li><li>  ServiceHost host = <font color="#0000ff">new</font> ServiceHost (serviceType, serviceUri); </li><li>  host.AddDefaultEndpoints (); </li><li>  <font color="#008000">// This actually doesn‚Äôt just simply work.</font> </li><li>  host.AddServiceEndpoint ( <font color="#0000ff">new</font> ServiceMetadataEndpoint ()); </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  In line 5, you see that we add standard endpoints, and in line 7 we add a ServiceMetadataEndpoint or MEX endpoint.  Unfortunately, the metadata behavior cannot be added by itself, so you still have to do it yourself.  Another way is to specify in the configuration that you want to include metadata.  Another new feature in WCF4 is the ability to inherit configurations.  You can specify in machine.config or in your local configuration what should be enabled by default for WCF services.  I recommend that you do not do this in machine.config, but this is just my opinion.  This is how I implemented this in the configuration of my project, the app.config file of our console host application.  I would like to draw your attention to the fact that in the next part we will do it in the old manner, in a way that will work in Visual Studio 2008 and which I myself prefer. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">&lt;?</font>  <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">= "1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">= "utf-8"</font> ?  <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">configuration</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">system.serviceModel</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">behaviors</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">serviceBehaviors</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">behavior</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">serviceMetadata</font> <font color="#ff0000">httpGetEnabled</font> <font color="#0000ff">= "True"</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">behavior</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">serviceBehaviors</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">behaviors</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">system.serviceModel</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">configuration</font> <font color="#0000ff">&gt;</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  As you can see, I did not specify a name for the behavior, in WCF4 this means that it will be used by all services.  It also means that each service needs a base address for HTTP endpoints. <br>  For reference, here is the code for our console host application: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main ( <font color="#0000ff">string</font> [] args) </li><li>  { </li><li>  Type serviceType = <font color="#0000ff">typeof</font> (EmailValidator); </li><li>  <font color="#2B91AF">Uri</font> serviceUri = <font color="#0000ff">new</font> <font color="#2B91AF">Uri</font> ( <font color="#A31515">"http: // localhost: 8080 /"</font> ); </li><li>  ServiceHost host = <font color="#0000ff">new</font> ServiceHost (serviceType, serviceUri); </li><li>  host.Open (); </li><li>  <font color="#0000ff">#region</font> Output dispatchers listening </li><li>  <font color="#0000ff">foreach</font> ( <font color="#2B91AF">Uri</font> uri <font color="#0000ff">in</font> host.BaseAddresses) </li><li>  { </li><li>  <font color="#2B91AF">Console</font> .WriteLine ( <font color="#A31515">"\ t {0}"</font> , uri.ToString ()); </li><li>  } </li><li>  <font color="#2B91AF">Console</font> .WriteLine (); </li><li>  <font color="#2B91AF">Console</font> .WriteLine ( <font color="#A31515">"Number of dispatchers listening: {0}"</font> , host.ChannelDispatchers.Count); </li><li>  <font color="#0000ff">foreach</font> (System.ServiceModel.Dispatcher.ChannelDispatcher dispatcher <font color="#0000ff">in</font> host.ChannelDispatchers) </li><li>  { </li><li>  <font color="#2B91AF">Console</font> .WriteLine ( <font color="#A31515">"\ t {0}, {1}"</font> , dispatcher.Listener. <font color="#2B91AF">Uri</font> .ToString (), dispatcher.BindingName); </li><li>  } </li><li>  <font color="#2B91AF">Console</font> .WriteLine (); </li><li>  <font color="#2B91AF">Console</font> .WriteLine ( <font color="#A31515">"Press &lt;ENTER&gt; to terminate Host"</font> ); </li><li>  <font color="#2B91AF">Console</font> .ReadLine (); </li><li>  <font color="#0000ff">#endregion</font> </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br><h4>  Accessing Metadata </h4><br>  Now we can open Internet Explorer or any other browser, start our console application host (otherwise, the endpoints will not be available) and go to the URI of our service: <a href="http://localhost:8080/">http: // localhost: 8080 /</a> <br>  If you see a screen with a link to WSDL, most likely you coped with the creation of the service. <br><br><h4>  Creating a client application </h4><br>  Now we will add another project that will access the service, and we will have the opportunity to check whether the specified email addresses are valid, or at least satisfying our regular expression. <br>  Add a new console application and this time name it ConsoleClient.  Make sure that your service (host) is running, and it does not work in debug mode.  The easiest way is to install the ConsoleHost project as a start project and press CTRL + F5 to start it not in debug mode. <br>  Now we need a proxy class (proxy class), which will be between our client and service.  There are two ways to create proxies for our service.  I prefer to do it manually to know exactly what is happening.  I will show it first. <br><br><h4>  Manual proxy creation </h4><br>  First, run the Visual Studio 2010 command line (or Visual Studio 2008) and navigate to the <i>ConsoleClient</i> location.  Since this is a Visual Studio command line, you should have access to the svcutil.exe proxy generator.  Enter the following command: <br><blockquote> <code><font color="black">svcutil http://(___)localhost:8080/ /o:ServiceProxy.cs /config:App.Config /n:*,ConsoleClient</font> <br></code> </blockquote><br>  This command should generate two files: a proxy service and an application configuration file.  Return to Visual Studio to your ConsoleClient application.  In order for App.Config and ServiceProxy.cs to become available, you need to click the icon at the top of the <i>Solution Explorer</i> , as shown in the screenshot below.  Now new files are displayed and you can include them in the project. <br><h6>  Note: the screenshot in the console window shows the wrong namespace ConsoleHost instead of ConsoleClient. </h6><br><img src="http://bloggingabout.net/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/dennis.metablogapi/7268.CreateProxy1_5F00_46B24268.png"><br><br><img src="http://bloggingabout.net/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/dennis.metablogapi/2210.CreateProxy2_5F00_54848863.png"><br><br>  When we started svcutil.exe we passed to it as the first argument the location of our service, as indicated in the host.  This is the base address.  The second argument is our proxy.  The third argument indicates that we also want to update the configuration of the application, and if it is not available, create it.  The final argument is the namespace for our proxy, which is currently the same as our application. <br><br><h4>  Service call </h4><br>  Now we can finally turn to the service.  Go to the <i>Main</i> method in the <i>Program</i> class again.  Now we have access to the proxy class, which has the name of our service with the suffix <i>Client</i> .  In this case, <i>EmailValidatorClient</i> . <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  EmailValidatorClient svc = <font color="#0000ff">new</font> EmailValidatorClient (); </li><li>  <font color="#0000ff">bool</font> result = svc.ValidateAddress ( <font color="#A31515">"dennis@bloggingabout.net"</font> ); </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  In line 1 you can see the initialization of the proxy.  This does not mean setting up a connection, it will occur on the first call.  In line 2, the service is called and the result is returned. <br>  Below is the code of our <i>Main</i> method, which will request email addresses. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main ( <font color="#0000ff">string</font> [] args) </li><li>  { </li><li>  <font color="#0000ff">while</font> ( <font color="#0000ff">true</font> ) </li><li>  { </li><li>  <font color="#2B91AF">Console</font> .WriteLine ( <font color="#A31515">"Enter an email address or press [ENTER] to quit ..."</font> ); </li><li>  <font color="#0000ff">string</font> emailAddress = <font color="#2B91AF">Console</font> .ReadLine (); </li><li>  <font color="#0000ff">if</font> ( <font color="#0000ff">string</font> .IsNullOrEmpty (emailAddress)) </li><li>  <font color="#0000ff">return</font> ; </li><li>  EmailValidatorClient svc = <font color="#0000ff">new</font> EmailValidatorClient (); </li><li>  <font color="#0000ff">bool</font> result = svc.ValidateAddress (emailAddress); </li><li>  <font color="#2B91AF">Console</font> .WriteLine ( <font color="#A31515">"Email address is valid: {0}"</font> , result); </li><li>  } </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br><h4>  Creating a proxy through Visual Studio, the easy way. </h4><br>  Instead of creating a proxy service manually using svcutil.exe, you can also let Visual Studio create it for you.  Just right-click on the project and select ‚ÄúAdd Service Reference ...‚Äù. A dialog box will appear where you will need to enter your service address and namespace. <br><br><img src="http://bloggingabout.net/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/dennis.metablogapi/4784.CreateServiceReference_5F00_34697BA6.png"><br><br>  Now we are in the <i>ConsoleClient</i> namespace, but it also unites already existing namespaces.  So now you can access <i>EmailValidatorClient</i> via <i>ConsoleClient.EmailValidatorClient</i> .  And this is one of the reasons why I don‚Äôt like to use the automatically generated proxy class.  Now you must remember to add a using directive for this namespace.  Probably the best solution in the dialog box is to specify the namespace of <i>Proxies</i> or something similar, so that the full namespace name makes more sense. <br><br><h4>  Client launch </h4><br>  If the service is still running (if not, restart it), you can right-click on the ConsoleClient project and select <i>Debug</i> and <i>Start new instance</i> .  That's it, you're done. <br><br><h4>  What's next? </h4><br>  Next, I will explain how to manually add endpoints and how to host services in IIS.  You can read about it <a href="http://habrahabr.ru/blogs/net/116872/">here</a> . <br><br>  From here you can <a href="http://bloggingabout.net/media/p/483576.aspx">download a solution for Visual Studio 2010</a> .  In the next part, a solution for Visual Studio 2008 will also be available. </div><p>Source: <a href="https://habr.com/ru/post/116764/">https://habr.com/ru/post/116764/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../116754/index.html">Pop-up flash message from the depths of background tasks</a></li>
<li><a href="../116758/index.html">Graph visualization. Rib method</a></li>
<li><a href="../116759/index.html">Adding Input Method to Arduino</a></li>
<li><a href="../116760/index.html">Haskell Tutorial on the other hand</a></li>
<li><a href="../116761/index.html">Encrypt files in black and white images.</a></li>
<li><a href="../116767/index.html">Repent of your sins and be happy. Or how small usability flaws spoil the whole result.</a></li>
<li><a href="../116768/index.html">Making your Gmail Motion</a></li>
<li><a href="../116769/index.html">We protect the VPS-server based on Windows 2008 R2</a></li>
<li><a href="../11677/index.html">Verses by Sergey Mavrodi</a></li>
<li><a href="../116771/index.html">Mono and Windows Forms on the Nokia N900? Sure, not a problem!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
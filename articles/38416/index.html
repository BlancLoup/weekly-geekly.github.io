<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>My Smarty plugins. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Given the community‚Äôs interest in this topic, I‚Äôm continuing to introduce my Smarty plugins. The first part can be found here . 


 1.2. Declination o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>My Smarty plugins. Part 2</h1><div class="post__text post__text-html js-mediator-article">  Given the community‚Äôs interest in this topic, I‚Äôm continuing to introduce my Smarty plugins.  The first part can be found <a href="http://habrahabr.ru/blogs/Smarty/38283/">here</a> . <br><a name="habracut"></a><br><br><h5>  1.2.  Declination of words </h5><br>  Urgent problem: to bring the user how many comments to the blog entry is.  The most terrible option: "2 comments".  Slightly less terrible - "Comments: 2".  But you want to see inscriptions in normal Russian: ‚Äú1 comments‚Äù, ‚Äú22 comments‚Äù, ‚Äú38 comments‚Äù! <br><br>  The declension modifier (declination) serves as a purpose for this very purpose. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Format: <strong>{$ count | declension: 'word forms': 'language'}</strong> , where: <br>  <strong>$ count</strong> - the number of elements recalculated (not displayed) <br>  <strong>'word forms'</strong> - a semicolon-based listing of the required word forms for the current language.  Those.  for Russian it is a stump;  stump;  stumps' (forms for 1, 2 and 5 subjects), for English - 'stump, stumps' (forms for 1 and several objects).  It is allowed (and in my projects this is the main possibility) of setting the term from the localization, in the form: 'group / term'. <br>  <strong>'language'</strong> is the two-letter language code, if it really hurts.  Not required. <br><br>  Examples of using: <br>  {$ messages} {$ messages | declension: 'message;  messages;  messages'} <br>  or <br>  {$ messages} {$ messages | declension: 'Forum / messages'} - when multilingualism is required <br><br>  <strong>File smarty / plugins / modifier.declension.php</strong> ( <a href="http://collectionstudio.com/external/habr/modifier.declension.php">download</a> ) <br><blockquote>  <font color="#000000"><font color="#0000BB">&lt;? php</font></font> <font color="#000000"><font color="#0000BB"><br></font></font>  <font color="#000000"><font color="#FF8000">/ **</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* Smarty plugin - declension modifier</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @package Smarty</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @subpackage plugins</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* /</font></font> <font color="#000000"><font color="#FF8000"><br><br></font></font>  <font color="#000000"><font color="#FF8000">/ **</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* Declension modifier: the declension of nouns by the rules of the English language</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">*</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @param array $ forms (eg: 0 =&gt; article, 1 =&gt; articles)</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @param int $ count</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @return string</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* /</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#007700">function</font> <font color="#0000BB">smarty_modifier_declension_en</font> <font color="#007700">(</font> <font color="#0000BB">$ forms</font> <font color="#007700">,</font> <font color="#0000BB">$ count</font> <font color="#007700">)</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">{</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">if (</font> <font color="#0000BB">$ count</font> <font color="#007700">==</font> <font color="#0000BB">1</font> <font color="#007700">)</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">return</font> <font color="#0000BB">$ forms</font> <font color="#007700">[</font> <font color="#0000BB">0</font> <font color="#007700">];</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">else</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">return</font> <font color="#0000BB">$ forms</font> <font color="#007700">[</font> <font color="#0000BB">1</font> <font color="#007700">];</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">}</font></font> <font color="#000000"><font color="#007700"><br><br></font></font>  <font color="#000000"><font color="#FF8000">/ **</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* Declension modifier: the declension of nouns according to the rules of the Russian language</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">*</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @param array $ forms (eg: 0 =&gt; stump, 1 =&gt; stump, 2 =&gt; stumps)</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @param int $ count</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @return string</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* /</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#007700">function</font> <font color="#0000BB">smarty_modifier_declension_ru</font> <font color="#007700">(</font> <font color="#0000BB">$ forms</font> <font color="#007700">,</font> <font color="#0000BB">$ count</font> <font color="#007700">)</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">{</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#0000BB">$ mod100</font> <font color="#007700">=</font> <font color="#0000BB">$ count</font> <font color="#007700">%</font> <font color="#0000BB">100</font> <font color="#007700">;</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">switch (</font> <font color="#0000BB">$ count</font> <font color="#007700">%</font> <font color="#0000BB">10</font> <font color="#007700">) {</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">case</font> <font color="#0000BB">1</font> <font color="#007700">:</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">if (</font> <font color="#0000BB">$ mod100</font> <font color="#007700">==</font> <font color="#0000BB">11</font> <font color="#007700">)</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">return</font> <font color="#0000BB">$ forms</font> <font color="#007700">[</font> <font color="#0000BB">2</font> <font color="#007700">];</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">else</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">return</font> <font color="#0000BB">$ forms</font> <font color="#007700">[</font> <font color="#0000BB">0</font> <font color="#007700">];</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">case</font> <font color="#0000BB">2</font> <font color="#007700">:</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">case</font> <font color="#0000BB">3</font> <font color="#007700">:</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">case</font> <font color="#0000BB">4</font> <font color="#007700">:</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">if ((</font> <font color="#0000BB">$ mod100</font> <font color="#007700">&gt;</font> <font color="#0000BB">10</font> <font color="#007700">) &amp;&amp; (</font> <font color="#0000BB">$ mod100</font> <font color="#007700">&lt;</font> <font color="#0000BB">20</font> <font color="#007700">))</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">return</font> <font color="#0000BB">$ forms</font> <font color="#007700">[</font> <font color="#0000BB">2</font> <font color="#007700">];</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">else</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">return</font> <font color="#0000BB">$ forms</font> <font color="#007700">[</font> <font color="#0000BB">1</font> <font color="#007700">];</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">case</font> <font color="#0000BB">5</font> <font color="#007700">:</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">case</font> <font color="#0000BB">6</font> <font color="#007700">:</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">case</font> <font color="#0000BB">7</font> <font color="#007700">:</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">case</font> <font color="#0000BB">8</font> <font color="#007700">:</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">case</font> <font color="#0000BB">9</font> <font color="#007700">:</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">case</font> <font color="#0000BB">0</font> <font color="#007700">:</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">return</font> <font color="#0000BB">$ forms</font> <font color="#007700">[</font> <font color="#0000BB">2</font> <font color="#007700">];</font></font> <font color="#000000"><font color="#007700"><br><br></font></font>  <font color="#000000"><font color="#007700">}</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">}</font></font> <font color="#000000"><font color="#007700"><br><br></font></font>  <font color="#000000"><font color="#FF8000">/ **</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* Declension modifier: declension of nouns</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">*</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @param int $ count</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @param string $ forms</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @param string $ language</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @return string</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* /</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#007700">function</font> <font color="#0000BB">smarty_modifier_declension</font> <font color="#007700">(</font> <font color="#0000BB">$ count</font> <font color="#007700">,</font> <font color="#0000BB">$ forms</font> <font color="#007700">,</font> <font color="#0000BB">$ language</font> <font color="#007700">=</font> <font color="#DD0000">''</font> <font color="#007700">)</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">{</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">global</font> <font color="#0000BB">$ currentLanguage</font> <font color="#007700">,</font> <font color="#0000BB">$ Language</font> <font color="#007700">;</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">if (!</font> <font color="#0000BB">$ language</font> <font color="#007700">)</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#0000BB">$ language</font> <font color="#007700">=</font> <font color="#0000BB">$ currentLanguage</font> <font color="#007700">;</font></font> <font color="#000000"><font color="#007700"><br><br></font></font>  <font color="#000000"><font color="#0000BB">$ count</font> <font color="#007700">=</font> <font color="#0000BB">abs</font> <font color="#007700">(</font> <font color="#0000BB">$ count</font> <font color="#007700">);</font></font> <font color="#000000"><font color="#007700"><br><br></font></font>  <font color="#000000"><font color="#FF8000">// Trying to catch the term from the dictionary</font></font> <font color="#000000"><br></font>  <font color="#000000"><font color="#007700">if (</font> <font color="#0000BB">preg_match</font> <font color="#007700">(</font> <font color="#DD0000">'/^(.*)\/(.*)$/'</font> <font color="#007700">,</font> <font color="#0000BB">$ forms</font> <font color="#007700">,</font> <font color="#0000BB">$ termine</font> <font color="#007700">))</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">{</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">if (</font> <font color="#0000BB">$ termine</font> <font color="#007700">[</font> <font color="#0000BB">1</font> <font color="#007700">] &amp;&amp;</font> <font color="#0000BB">$ termine</font> <font color="#007700">[</font> <font color="#0000BB">2</font> <font color="#007700">])</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">{</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#0000BB">$ forms</font> <font color="#007700">=</font> <font color="#0000BB">$ Language</font> <font color="#007700">[</font> <font color="#0000BB">$ termine</font> <font color="#007700">[</font> <font color="#0000BB">1</font> <font color="#007700">]] [</font> <font color="#0000BB">$ termine</font> <font color="#007700">[</font> <font color="#0000BB">2</font> <font color="#007700">]];</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">}</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">}</font></font> <font color="#000000"><font color="#007700"><br><br></font></font>  <font color="#000000"><font color="#FF8000">// Select individual word forms</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#0000BB">$ forms</font> <font color="#007700">=</font> <font color="#0000BB">explode</font> <font color="#007700">(</font> <font color="#DD0000">';'</font> <font color="#007700">,</font> <font color="#0000BB">$ forms</font> <font color="#007700">);</font></font> <font color="#000000"><font color="#007700"><br><br></font></font>  <font color="#000000"><font color="#0000BB">$ fn</font> <font color="#007700">=</font> <font color="#DD0000">'smarty_modifier_declension_'</font> <font color="#007700">.</font></font>  <font color="#000000"><font color="#0000BB">$ language</font> <font color="#007700">;</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">if (</font> <font color="#0000BB">function_exists</font> <font color="#007700">(</font> <font color="#0000BB">$ fn</font> <font color="#007700">))</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">{</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#FF8000">// There is a personal function for the current language</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#007700">return</font> <font color="#0000BB">$ fn</font> <font color="#007700">(</font> <font color="#0000BB">$ forms</font> <font color="#007700">,</font> <font color="#0000BB">$ count</font> <font color="#007700">);</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">} else {</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#FF8000">// We act in the image of the English language</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#007700">return</font> <font color="#0000BB">smarty_modifier_declension_en</font> <font color="#007700">(</font> <font color="#0000BB">$ forms</font> <font color="#007700">,</font> <font color="#0000BB">$ count</font> <font color="#007700">);</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">}</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">}</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#0000BB">?&gt;</font></font> </blockquote><br>  For the modifier to work correctly, in addition to the glossary of terms of the current language ($ Language) already mentioned in past plugins, the $ currentLanguage variable indicating the current language is also required.  (I already mentioned in the previous article that the presence of these global variables is for the article, in my original source code there are references to the framework functions) <br><br><h5>  1.3.  File size </h5><br>  Another trivial task: correctly display file sizes.  ‚Äú384 b‚Äù, ‚Äú613.8 Kb‚Äù, ‚Äú14.1 TB‚Äù.  Someone must translate these thousands and billions of bytes into a user-friendly form.  I do this modifier <strong>filesize</strong> . <br><br>  Format: <strong>{$ filesize | filesize: 'accuracy'}</strong> , where: <br>  <strong>'accuracy'</strong> is an optional number of decimal places for rounding results. <br><br>  <strong>File smarty / plugins / modifier.filesize.php</strong> ( <a href="http://collectionstudio.com/external/habr/modifier.filesize.php">download</a> ) <br><blockquote>  <font color="#000000"><font color="#0000BB">&lt;? php</font></font> <font color="#000000"><font color="#0000BB"><br></font></font>  <font color="#000000"><font color="#FF8000">/ **</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* Smarty plugin - filesize modifier</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">*</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @author Vasily Melenchuk</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @package Smarty</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @subpackage plugins</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* /</font></font> <font color="#000000"><font color="#FF8000"><br><br></font></font>  <font color="#000000"><font color="#FF8000">/ **</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* Modifier filesize: output sizes for files</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">*</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @param int / float $ size</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @param int $ precision - required accuracy (decimal places)</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* @return string</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#FF8000">* /</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#007700">function</font> <font color="#0000BB">smarty_modifier_filesize</font> <font color="#007700">(</font> <font color="#0000BB">$ size</font> <font color="#007700">,</font> <font color="#0000BB">$ precision</font> <font color="#007700">=</font> <font color="#0000BB">2</font> <font color="#007700">)</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">{</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">global</font> <font color="#0000BB">$ Language</font> <font color="#007700">;</font></font> <font color="#000000"><font color="#007700"><br><br></font></font>  <font color="#000000"><font color="#007700">if (!</font> <font color="#0000BB">is_numeric</font> <font color="#007700">(</font> <font color="#0000BB">$ precision</font> <font color="#007700">) ||!</font> <font color="#0000BB">is_numeric</font> <font color="#007700">(</font> <font color="#0000BB">$ size</font> <font color="#007700">))</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">{</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#FF8000">// Something is clearly wrong</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#0000BB">trigger_error</font> <font color="#007700">(</font> <font color="#DD0000">'Modifier filesize: Invalid input params'</font> <font color="#007700">);</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">return</font> <font color="#DD0000">''</font> <font color="#007700">;</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">}</font></font> <font color="#000000"><font color="#007700"><br><br></font></font>  <font color="#000000"><font color="#FF8000">// Find the appropriate value</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#0000BB">$ result</font> <font color="#007700">=</font> <font color="#DD0000">'?'</font></font>  <font color="#000000"><font color="#007700">;</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#0000BB">$ multiplier</font> <font color="#007700">=</font> <font color="#0000BB">1</font> <font color="#007700">;</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">while (</font> <font color="#0000BB">$ multiplier</font> <font color="#007700">&lt;=</font> <font color="#0000BB">1099511627776</font> <font color="#007700">)</font> <font color="#FF8000">// 1 TB in bytes.</font></font>  <font color="#000000"><font color="#FF8000">Enough for now</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#007700">{</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">if (</font> <font color="#0000BB">$ size</font> <font color="#007700">/</font> <font color="#0000BB">$ multiplier</font> <font color="#007700">&lt;</font> <font color="#0000BB">1</font> <font color="#007700">)</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">{</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">break;</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">} else {</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#0000BB">$ result</font> <font color="#007700">=</font> <font color="#0000BB">round</font> <font color="#007700">(</font> <font color="#0000BB">$ size</font> <font color="#007700">/</font> <font color="#0000BB">$ multiplier</font> <font color="#007700">,</font> <font color="#0000BB">$ precision</font> <font color="#007700">).</font></font>  <font color="#000000"><font color="#DD0000">'&amp; nbsp;'</font></font>  <font color="#000000"><font color="#007700">.</font></font>  <font color="#000000"><font color="#0000BB">$ Language</font> <font color="#007700">[</font> <font color="#DD0000">'global'</font> <font color="#007700">] [</font> <font color="#DD0000">'filesize_'</font> <font color="#007700">.</font></font>  <font color="#000000"><font color="#0000BB">$ multiplier</font> <font color="#007700">];</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">}</font></font> <font color="#000000"><font color="#007700"><br><br></font></font>  <font color="#000000"><font color="#0000BB">$ multiplier</font> <font color="#007700">* =</font> <font color="#0000BB">1024</font> <font color="#007700">;</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">}</font></font> <font color="#000000"><font color="#007700"><br><br></font></font>  <font color="#000000"><font color="#FF8000">// Final Touch: Fractional Separator</font></font> <font color="#000000"><font color="#FF8000"><br></font></font>  <font color="#000000"><font color="#0000BB">$ result</font> <font color="#007700">=</font> <font color="#0000BB">str_replace</font> <font color="#007700">(</font> <font color="#DD0000">'.'</font> <font color="#007700">,</font> <font color="#0000BB">$ Language</font> <font color="#007700">[</font> <font color="#DD0000">'global'</font> <font color="#007700">] [</font> <font color="#DD0000">'decimal_separator'</font> <font color="#007700">],</font> <font color="#0000BB">$ result</font> <font color="#007700">);</font></font> <font color="#000000"><font color="#007700"><br><br></font></font>  <font color="#000000"><font color="#007700">return</font> <font color="#0000BB">$ result</font> <font color="#007700">;</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#007700">}</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#0000BB">?&gt;</font></font> <font color="#000000"><br></font> </blockquote><br><br>  As in the case of the date modifier (described in the <a href="http://habrahabr.ru/blogs/Smarty/38283/">first part of the article</a> ), I use localization tables not only for words and expressions of the interface, but also for storing technical information (here the fraction separator character for the current language). <br><br>  For English, the translations look like this (for Russian, they are not much different, I will not duplicate): <br><blockquote>  <font color="#000000"><font color="#0000BB">$ Language</font> <font color="#007700">[</font> <font color="#DD0000">'global'</font> <font color="#007700">] [</font> <font color="#DD0000">'decimal_separator'</font> <font color="#007700">] =</font> <font color="#DD0000">'.'</font></font>  <font color="#000000"><font color="#007700">;</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#0000BB">$ Language</font> <font color="#007700">[</font> <font color="#DD0000">'global'</font> <font color="#007700">] [</font> <font color="#DD0000">'filesize_1'</font> <font color="#007700">] =</font> <font color="#DD0000">'b'</font> <font color="#007700">;</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#0000BB">$ Language</font> <font color="#007700">[</font> <font color="#DD0000">'global'</font> <font color="#007700">] [</font> <font color="#DD0000">'filesize_1024'</font> <font color="#007700">] =</font> <font color="#DD0000">'Kb'</font> <font color="#007700">;</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#0000BB">$ Language</font> <font color="#007700">[</font> <font color="#DD0000">'global'</font> <font color="#007700">] [</font> <font color="#DD0000">'filesize_1048576'</font> <font color="#007700">] =</font> <font color="#DD0000">'Mb'</font> <font color="#007700">;</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#0000BB">$ Language</font> <font color="#007700">[</font> <font color="#DD0000">'global'</font> <font color="#007700">] [</font> <font color="#DD0000">'filesize_1073741824'</font> <font color="#007700">] =</font> <font color="#DD0000">'Gb'</font> <font color="#007700">;</font></font> <font color="#000000"><font color="#007700"><br></font></font>  <font color="#000000"><font color="#0000BB">$ Language</font> <font color="#007700">[</font> <font color="#DD0000">'global'</font> <font color="#007700">] [</font> <font color="#DD0000">'filesize_1099511627776'</font> <font color="#007700">] =</font> <font color="#DD0000">'Tb'</font> <font color="#007700">;</font></font> </blockquote><br><br>  <em>I do not want to inflate the article to indecent size, so for now I‚Äôll stop.</em>  <em>To be continued.</em> </div><p>Source: <a href="https://habr.com/ru/post/38416/">https://habr.com/ru/post/38416/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../38407/index.html">The popularity of operating systems</a></li>
<li><a href="../38408/index.html">Gugarkartim on clever</a></li>
<li><a href="../38410/index.html">And large mail services have such stupid problems.</a></li>
<li><a href="../38412/index.html">Easy tuning tree comments</a></li>
<li><a href="../38415/index.html">Task - Puzzle, difficult for layout alignment</a></li>
<li><a href="../38417/index.html">JavaFX -> thesis student zabugornogo student. Comparing JavaFX and Competitors</a></li>
<li><a href="../38420/index.html">Google offers 15-day compensation for Gmail crashes</a></li>
<li><a href="../38424/index.html">A year later, Mail.ru admitted that he had bought a 30% stake in Mamba.</a></li>
<li><a href="../38425/index.html">Online Paper Critters Generator</a></li>
<li><a href="../38426/index.html">Tired of new advertising in LiveJournal?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
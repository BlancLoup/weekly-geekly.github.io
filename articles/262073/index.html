<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Horizontal scaling of database servers for OLTP systems, or what is on the market</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As a rule, in large and medium-sized companies there are high-loaded transactional information systems, which are the most important component of the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Horizontal scaling of database servers for OLTP systems, or what is on the market</h1><div class="post__text post__text-html js-mediator-article">  As a rule, in large and medium-sized companies there are high-loaded transactional information systems, which are the most important component of the business, they are called OLTP-systems.  With the growth of business, the load increases very quickly, so the task of increasing the performance of existing resources for database servers is very acute.  Often, to solve the problem of increasing the performance of database servers, more powerful equipment is acquired (the so-called ‚Äúvertical‚Äù scaling), but this method has a very significant disadvantage: the company will sooner or later buy a maximum performance database server at an affordable price, and what to do next?  Further business prospects may not be so bright - in many cases we are talking about the deterioration of the company's reputation, the inability to serve customers in times of high demand, a significant loss of profits. <br><a name="habracut"></a><br>  To exclude such situations and ensure the health of the OLTP systems, many companies follow the path of "horizontal" scaling of database servers.  In contrast to increasing the performance of the main server ("vertical" scaling), when "horizontal" scaling servers are combined into a cluster (set), and the load on the database servers is distributed between them.  This approach is more technological, since in addition to the obvious advantages in the form of the possibility of increasing productivity by adding new servers, the problem of achieving failover and disaster tolerance is solved. <br><br>  Many IT companies in Russia and the world are developing such solutions, below I will try to tell about them in more detail. <br><br>  The first solution - <b>Oracle RAC (Real Application Cluster</b> - appeared back in 2001 in version 9i to increase availability and performance in high-load systems based on Oracle DBMS. It allows you to distribute the load on a high-loaded database between database servers and thereby increase the capabilities of the OLTP system for problem-free growth of information flow. For more information you can refer to <a href="http://docs.oracle.com/database/121/index.htm">the documentation</a> or the Oracle Press books publishing. Therefore, I focus on a few points of interest from the point of view of the principle of  work. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Since  Since Oracle RAC implements the Shared-everything architecture (with all its inherent advantages and disadvantages), then for each server, Oracle RAC has its own cache, which receives SQL query data executed on it.  There is also a global cluster cache, implemented using Cache Fusion technology, which synchronizes with local server caches for data.  A special role in cluster resource coordination and cache integration is played by the Global Resource Directory data structure, which records on which server, which data and which objects are relevant;  what mode of locks for object on a copy.  All this information helps to decide which server in terms of performance is better to send an SQL query, because if the wrong decision is made, the SQL query time will increase due to the time it takes to synchronize data between the caches. <br><br>  An important feature of this approach to load sharing between database servers is the need to take into account the ‚Äúdiversity‚Äù of SQL traffic from an OLTP system.  In cases where SQL queries retrieve data from many tables at the same time, and the rate of change in these tables is large, you may lose time to synchronize cache data between different servers in the cluster (for this reason, you need fast and reliable interconnect between servers).  This, in turn, can lead to a deterioration in the response of the OLTP system, and the benefits of using Oracle RAC can be completely leveled. <br><br>  <b>Pros:</b> <ul><li>  Active / Active cluster </li><li>  Load balancing </li><li>  Scaling with increased performance, but also increased availability </li><li>  Almost linear increase in performance when adding new nodes to the cluster </li><li>  Transparent application scaling </li></ul><br><br>  <b>Minuses:</b> <ul><li>  Works only with Oracle DBMS </li><li>  High-performance low-latency interconnect is desirable for operation. </li><li>  Storage can be a single point of failure.  To ensure a high level of fault tolerance, RAC must be combined with standby or mirroring storage. </li></ul><br><br>  The second solution, <b>Citrix NetScaler</b> , implements the horizontal scaling of database servers for OLTP systems based on MS SQL Server and MySQL differently from Oracle RAC.  Technical features can be found by following the <a href="https://www.citrix.com/content/dam/citrix/en_us/documents/products-solutions/scaling-the-data-tier-with-citrix-netscaler-sql-intelligent-load-balancing.pdf">link</a> . <br><br>  If in Oracle RAC, database servers are synchronized automatically, then Citrix NetScaler should use third-party technologies for synchronization: AlwaysOn from Microsoft, MySQL replication.  The Citrix NetScaler solution itself is a proxy server between the application layer (application server, web server) and database servers, so all SQL queries to the database server go through it. <br><br>  According to the specification, the solution can recognize the SQL query signature (for reading or writing data) and redirect them to the necessary (defined by the settings) servers in the cluster.  The delay in processing the SQL query by the proxy server is minimal, so the response of the OLTP system should not deteriorate after implementation.  Despite this advantage, the possibilities for balancing the load from SQL queries also depend on the peculiarities of the traffic of the OLTP system.  In many OLTP systems, the modified data in the transaction is immediately read by the next SQL query for further work.  Considering the features of such a technology, such as MS AlwaysOn, data on additional servers lags behind the main one for some time (in synchronous and asynchronous mode).  Without taking into account this fact, the application and the user can get a situation in which the added data will be missing in the selection of the next SQL query.  As a rule, Citrix NetScaler technology is recommended to be used not in automatic mode, but in manual mode; therefore, its scope is limited to simple database queries in web applications. <br><br>  The third technology, <b>Softpoint Data Cluster,</b> is a Russian development that is similar to the two previous ones, while at some points it is more applicable to practical tasks on ‚Äúhorizontal‚Äù scaling of database servers for OLTP systems.  More information about the product can be found on the <a href="http://www.softpoint.ru/data-cluster-basi-dannih-sql-server">vendor's</a> website. <br><br>  At first glance, the technology is similar to Citrix NetScaler, since it is a proxy server between the application level and the database level, and is tightly integrated with database synchronization technologies (for example, MS AlwaysOn), but unlike Citrix NetScaler it tracks database out-of-sync cluster and fully guarantees the consistency of the data in the samples, no matter where the SQL query is executed on the servers.  This feature allows automatic load balancing without adaptation to application traffic. <br><br>  The technology also provides synchronization of temporary tables between servers in a cluster, which is very important for better balancing, including SQL queries using temporary tables.  An important advantage of using Softpoint Data Cluster is the opportunity to familiarize yourself with examples of implementations for <a href="http://www.softpoint.ru/portfolio-uspeshnih-it-proektov">high-loaded OLTP systems</a> . <br><br>  It is quite difficult to compare the three technologies, given the differences in approaches and implementation, but another thing is important: the horizontal scaling technologies of database servers are constantly evolving and find practical use in the tasks of ensuring the required level of performance for high-loaded OLTP systems. <br><br>  This article does not pretend to a comprehensive description of the details of implementation and use, its purpose is to review the basic technologies of horizontal scaling of database servers. <br><br>  Authors: Sergey Zimin, Sergey Samoilov, Alexander Turkovsky, Pavel Barketov. </div><p>Source: <a href="https://habr.com/ru/post/262073/">https://habr.com/ru/post/262073/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../262063/index.html">Almost duplicate search and geometry</a></li>
<li><a href="../262065/index.html">Combining offices in 3CX (Part 2. Use Session Boarder Controller)</a></li>
<li><a href="../262067/index.html">Plot chat, or how we won first place on wth.by</a></li>
<li><a href="../262069/index.html">RabbitMQ Spring tutorial</a></li>
<li><a href="../262071/index.html">How to correctly select and buy Backup Exec 15</a></li>
<li><a href="../262075/index.html">Writing for Apple Watch something harder Hello, world</a></li>
<li><a href="../262077/index.html">Digest of grocery design, June 2015</a></li>
<li><a href="../262079/index.html">Visualization of static and dynamic networks on R, part 1</a></li>
<li><a href="../262081/index.html">My encryption algorithm</a></li>
<li><a href="../262083/index.html">Wallix vs balabit. Comparison of admin control software [rdp]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
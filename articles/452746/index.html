<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The book "The Art of Programming on R. Immersion in Big Data"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habrozhiteli! Many users use R for specific tasks - here they construct a histogram, perform a regression analysis there, or perform other separat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The book "The Art of Programming on R. Immersion in Big Data"</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habr.com/ru/company/piter/blog/452746/"><img src="https://habrastorage.org/webt/ex/ur/ar/exurarqzneqr0ikhxemszhfc1jm.jpeg" align="left" alt="image"></a>  Hi, Habrozhiteli!  Many users use R for specific tasks - here they construct a histogram, perform a regression analysis there, or perform other separate operations related to statistical data processing.  But this book is written for those who want to develop software on R. The programming skills of prospective readers of this book can lie in a wide spectrum - from professional qualifications to ‚ÄúI took a college programming course‚Äù, but the key goal is to write R code for specific purposes. .  (A deep knowledge of statistics is generally not necessary.) <br><br>  A few examples of readers who could benefit from this book: <br><br><ul><li>  An analyst (say, working in a hospital or in a government office) who has to regularly issue statistical reports and develop programs for this purpose. </li><li>  Researcher engaged in the development of statistical methodology - new or combining existing methods into integrated procedures.  The methodology needs to be encoded so that it can be used in the research community. </li><li>  Specialists in marketing, legal support, journalism, publishing, etc., engaged in the development of code for building complex graphical representations of data. </li><li>  Professional programmers with software development experience assigned to projects related to statistical analysis. </li><li>  Students studying statistics and data processing. </li></ul><br><a name="habracut"></a><br>  Thus, this book is not a reference for the countless statistical methods of the wonderful R package. In fact, it is devoted to programming and it deals with programming issues that are rarely found in other books about R. Even fundamental topics are viewed from a programming angle.  Some examples of this approach: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  In this book, there are sections "Advanced examples".  Usually they provide complete general purpose functions instead of isolated code fragments based on specific data.  Moreover, some of these functions can be useful in your daily work with R. Studying these examples, you will not only learn how specific R constructions work, but also learn how to integrate them into useful programs.  In many cases, I provide descriptions of alternative solutions and answer the question: ‚ÄúWhy was it done this way?‚Äù </li><li>  The material is presented taking into account the perception of the programmer.  For example, when describing data frames, I not only assert that the data frame in R is a list, but also point out the consequences of this fact from the point of view of programming.  Also in the text, R is compared with other languages ‚Äã‚Äãwhere it can be useful (for readers who are fluent in these languages). </li><li>  Debugging plays an important role in programming in any language, but most of the books on R have almost no mention of this topic.  In this book, I devoted an entire chapter to debugging tools, used the principle of "extended examples" and presented fully-developed demonstrations of how programs are debugged in reality. </li><li>  Nowadays, multi-core computers have appeared in all homes, and the programming of graphics processors (GPU) is making an inconspicuous revolution in the field of scientific computing.  More and more R applications require very large amounts of computation, and parallel processing has become relevant for R programmers. A whole chapter is devoted to this book, in which besides the description of mechanics there are also extended examples. </li><li>  A separate chapter describes how to use information about the internal implementation and other aspects of R to speed up the work of the R code. </li><li>  One of the chapters is devoted to the R interface with other programming languages ‚Äã‚Äãsuch as C and Python.  Again, special attention is paid to advanced examples and debugging recommendations. </li></ul><br><h3>  Excerpt  7.8.4.  When should global variables be used? </h3><br>  There is no consensus on the use of global variables in the community of programmers.  Obviously, there is no right answer to the question in the title of this section, since it is a matter of personal preference and style.  Nevertheless, many programmers believe that a complete ban on global variables, advocated by many programming teachers, would be too harsh.  In this section, we explore the possible benefits of global variables in the context of R structures. The term ‚Äúglobal variable‚Äù will denote any variable that is in the hierarchy of environments above the level of code of interest. <br><br>  The use of global variables in R is more common than one would expect.  Surprisingly, R uses global variables very widely in its internal implementation (both in C code and in R functions).  Thus, the super assignment operator &lt;&lt; is used in many library functions R (although usually for writing to a variable that is just one level higher in the hierarchy of variables).  In the multi-threaded code and the GPU code used to write fast programs (see Chapter 16), global variables are usually widely used, providing the basic mechanism of interaction between parallel executors. <br><br>  And now, for the sake of concreteness, let's return to the earlier example from section 7.7: <br><br><pre><code class="plaintext hljs">f &lt;- function(lxxyy) { # lxxyy ‚Äî ,  x  y ... lxxyy$x &lt;- ... lxxyy$y &lt;- ... return(lxxyy) } #  x  y lxy$x &lt;- ... lxy$y &lt;- ... lxy &lt;- f(lxy) #   x  y ... &lt;- lxy$x ... &lt;- lxy$y</code> </pre> <br>  As mentioned earlier, this code can become cumbersome, especially if x and y are lists themselves. <br><br>  On the other hand, take a look at the alternative scheme using global variables: <br><br><pre> <code class="plaintext hljs">f &lt;- function() { ... x &lt;&lt;- ... y &lt;&lt;- ... } #  x  y x &lt;-... y &lt;-... f() #  x  y  #   x  y ... &lt;- x ... &lt;- y</code> </pre> <br>  Perhaps the second version is much cleaner, less cumbersome and does not require manipulations with lists.  Understandable code usually creates fewer problems in writing, debugging, and maintenance. <br><br>  For these reasons - to simplify and reduce the bulkiness of the code - we decided to use global variables instead of returning lists in the DES code given earlier.  Consider this example in more detail. <br><br>  Two global variables were used (both are lists containing different information): the variable sim is associated with the library code, and the variable mm1glbls is associated with the code of the specific application M / M / 1.  Let's start with sim. <br><br>  Even programmers with restraint about global variables agree that the use of such variables can be justified if they are truly global - in the sense that they are widely used in the program.  All this applies to the sim variable from the DES example: it is used both in the library code (in schedevnt (), getnextevnt () and dosim ()) and in M ‚Äã‚Äã/ M / 1 code (in mm1reactevnt ()).  In this particular example, subsequent calls to sim are limited to reading, but in some situations writing is possible.  A typical example of this kind is a possible implementation of cancellation of events.  For example, such a situation may occur when modeling the principle of the ‚Äúearlier of the two‚Äù: two events are planned, and when one of them occurs, the other should be canceled. <br><br>  Thus, using sim as a global variable seems justified.  However, if we had decisively abandoned the use of global variables, the sim could be placed in a local variable inside dosim ().  This function will pass the sim in the argument of all the functions mentioned in the previous paragraph (schedevnt (), getnextevnt (), etc.), and each of these functions will return a modified variable sim. <br>  For example, line 94: <br><br><pre> <code class="plaintext hljs">reactevnt(head)</code> </pre> <br>  converted to the following form: <br><br><pre> <code class="plaintext hljs">sim &lt;- reactevnt(head)</code> </pre> <br>  After that, the function mm1reactevnt () associated with a particular application, you must add the following line: <br><br><pre> <code class="plaintext hljs">return(sim)</code> </pre> <br>  You can do something similar with mm1glbls by including a local variable in dosim () with the name (for example) appvars.  But if this is done with two variables, then they must be placed in the list so that both variables can be returned from the function, as in the above example of the function f ().  And then there is a cumbersome structure of lists within lists, which was mentioned above, or rather, lists within lists within lists. <br><br>  On the other hand, opponents of using global variables notice that the simplicity of the code is not a gift.  They are concerned that during the debugging process, difficulties arise in finding places where the global variable changes the value, since the change can occur at any point in the program.  It would seem that in the world of modern text editors and integrated development tools that will help find all occurrences of a variable, the problem goes into the background (the original article, calling for the rejection of the use of global variables, was published in 1970!).  Yet this factor must be considered. <br><br>  Another problem that critics mention is encountered when calling a function from several unrelated parts of a program with different values.  For example, imagine that a f () function is called from different parts of a program, with each call receiving its own x and y values ‚Äã‚Äãinstead of one value for each.  The problem can be solved by creating vectors of x and y values ‚Äã‚Äãin which each instance of f () in your program corresponds to a separate element.  However, this will lose the simplicity of using global variables. <br><br>  These problems occur not only in R, but in a more general context.  However, in R, the use of global variables at the top level creates an additional problem, since the user at this level usually has many variables.  There is a danger that the code that uses global variables may accidentally replace a completely foreign variable with the same name. <br><br>  Of course, the problem is easily solved - it is enough to choose long names for global variables that are tied to a specific application.  However, the environments also provide a reasonable compromise, as in the following situation for the DES example. <br><br>  Inside the dosim () function, the string <br><br><pre> <code class="plaintext hljs">sim &lt;&lt;- list()</code> </pre> <br>  may be replaced by a string <br><br><pre> <code class="plaintext hljs">assign("simenv",new.env(),envir=.GlobalEnv)</code> </pre> <br>  It creates a new environment, which is referenced by the simenv variable at the top level.  This environment serves as a container for encapsulating global variables that can be accessed by calls to get () and assign ().  For example, the lines <br><br><pre> <code class="plaintext hljs">if (is.null(sim$evnts)) { sim$evnts &lt;&lt;- newevnt</code> </pre> <br>  in schedevnt () take the form <br><br><pre> <code class="plaintext hljs">if (is.null(get("evnts",envir=simenv))) { assign("evnts",newevnt,envir=simenv)</code> </pre> <br>  Yes, this solution is also cumbersome, but at least it is not as complicated as the lists inside the lists within the lists.  And it protects against accidental writing to an extraneous variable at the top level.  Using a super-assignment operator still gives a less cumbersome code, but this trade-off should be taken into account. <br><br>  As usual, there is no single programming style that provides the best results in all situations.  The solution to global variables is another option that should be included in your arsenal of programming tools. <br><br><h3>  7.8.5.  Closures </h3><br>  Recall that the closure (closure) R consists of the arguments and the function body in conjunction with the environment at the time of the call.  The inclusion of the environment is involved in the programming paradigm, which uses a concept, also called a closure (here there is some overloading of terminology). <br><br>  A closure is a function that creates a local variable and then creates another function that accesses this variable.  The description is too abstract, so I‚Äôd better give an example. <br><br><pre> <code class="plaintext hljs">1 &gt; counter 2 function () { 3 ctr &lt;- 0 4 f &lt;- function() { 5 ctr &lt;&lt;- ctr + 1 6 cat("this count currently has value",ctr,"\n") 7 } 8 return(f) 9 }</code> </pre> <br>  Check how this code works before diving into the implementation details: <br><br><pre> <code class="plaintext hljs">&gt; c1 &lt;- counter() &gt; c2 &lt;- counter() &gt; c1 function() { ctr &lt;&lt;- ctr + 1 cat("this count currently has value",ctr,"\n") } &lt;environment: 0x8d445c0&gt; &gt; c2 function() { ctr &lt;&lt;- ctr + 1 cat("this count currently has value",ctr,"\n") } &lt;environment: 0x8d447d4&gt; &gt; c1() this count currently has value 1 &gt; c1() this count currently has value 2 &gt; c2() this count currently has value 1 &gt; c2() this count currently has value 2 &gt; c2() this count currently has value 3 &gt; c1() this count currently has value 3</code> </pre> <br>  Here, the counter () function is called twice, and the results are assigned to c1 and c2.  As expected, these two variables consist of functions, namely copies of f ().  However, f () accesses the variable ctr via a super assignment operator, and this variable will be a variable with the specified name local to counter (), since it will be the first on the path through the environment hierarchy.  It is part of the f () environment, and as such is packaged in what is returned to the side of the counter () call.  The key point is that with different counter () calls, the ctr variable will be in different environments (in the example, the environments were stored in memory at addresses 0x8d445c0 and 0x8d447d4).  In other words, different counter () calls will create physically different instances of ctr. <br><br>  As a result, the functions c1 () and c2 () work as fully independent counters.  This is evident from the example where each function is called several times. <br><br>  ¬ªMore information about the book can be found on <a href="https://www.piter.com/collection/recommend/product/iskusstvo-programmirovaniya-na-r-pogruzhenie-v-bolshie-dannye">the publisher's website.</a> <br>  ¬ª <a href="https://storage.piter.com/upload/contents/978544611101/978544611101_X.pdf">Table of Contents</a> <br>  ¬ª <a href="https://storage.piter.com/upload/contents/978544611101/978544611101_p.pdf">Excerpt</a> <br><br>  For Habrozhiteley a 25% discount on the coupon - <b>R</b> <br><br>  Upon payment of the paper version of the book, an electronic version of the book is sent to the e-mail. </div><p>Source: <a href="https://habr.com/ru/post/452746/">https://habr.com/ru/post/452746/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../452734/index.html">Automatic transfer of iOS applications (ARM) to macOS (x86) using Bitcode</a></li>
<li><a href="../452736/index.html">Encryption of messages in SecureDialogues</a></li>
<li><a href="../45274/index.html">Another explanation for the current</a></li>
<li><a href="../452742/index.html">Setting up automatic testing of a hybrid application</a></li>
<li><a href="../452744/index.html">Is there a full life remotes without freelance exchanges?</a></li>
<li><a href="../452748/index.html">Principles of development of modern applications from NGINX. Part 1</a></li>
<li><a href="../45275/index.html"> áx«ù á dƒ±l…ü</a></li>
<li><a href="../452750/index.html">Nextcloud inside and outside OpenLiteSpeed: set up reverse proxying</a></li>
<li><a href="../452752/index.html">Home BigData. Part 1. Practice Spark Streaming on an AWS Cluster</a></li>
<li><a href="../452754/index.html">19% of the most popular Docker images have no root password.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
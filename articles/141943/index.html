<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write "Snake" for Windows Phone 7</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About the author: Pasi Manninen develops mobile and web applications, is a Nokia Developer Champion and Adobe Professional Professional, an Adobe-cert...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write "Snake" for Windows Phone 7</h1><div class="post__text post__text-html js-mediator-article">  <sup><i><b>About the author:</b> Pasi Manninen develops mobile and web applications, is a Nokia Developer Champion and Adobe Professional Professional, an Adobe-certified Adobe expert in Flex, Flash and Flash Mobile.</i></sup>  <sup><i>Graduated from the University of Jyv√§skyl√§ (one of the largest universities in Finland) with a degree in Applied Mathematics and Computer Science.</i></sup> <br><br><h4>  Introduction </h4><br>  In this article, we will show you how to create a simple version of Snake for Windows Phone.  It will be possible to move the snake in different directions with the help of gestures.  The application consists of a menu screen, the game itself and the final screen with the results of the game. <br><br><img src="https://habrastorage.org/storage2/577/500/574/5775005746f15cee1fdf2f6d39f32251.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Windows Phone 7.1 SDK </h4><br>  To develop applications for devices running Windows Phone 7, you need to install the Windows Phone 7.1 SDK.  You can download the latest version <a href="http://www.microsoft.com/download/en/details.aspx%3Fdisplaylang%3Den%26id%3D27570">here</a> . <br><br><a name="habracut"></a><br><h4>  Windows phone game </h4><br>  To start developing a new Windows Phone Game, launch Microsoft Visual studio, create a new project and select the Windows Phone Game (4.0) Template.  We will use SnakeIt as the project name. <br><br><img src="http://www.developer.nokia.com/Community/Wiki/images/thumb/0/0b/PTMSnakeProject.PNG/700px-PTMSnakeProject.PNG" alt="image"><br><br>  In this example, we will use C # to develop our game. <br><br><h4>  Preparation of images for the game </h4><br>  To get started, let's add simple graphic elements for food and the snake itself.  We will use 25x25 images that can be repeated across the surface. <br><br><h5>  Food </h5><br>  Right-click on Content in the solution browser of the SnakeIt project and select Add&gt; New Item ... <br>  Select the Bitmap File and name it FootTile.bmp <br><br><img src="http://www.developer.nokia.com/Community/Wiki/images/1/14/PTMFoodTile.png" alt="image"><br><br>  Draw a 25x25 green rectangle to indicate food.  Do not forget to save the file. <br><br><img src="http://www.developer.nokia.com/Community/Wiki/images/thumb/6/67/PTMSnakeFoodTileGraphics.png/700px-PTMSnakeFoodTileGraphics.png" alt="image"><br><br><h5>  Snake </h5><br>  Use the same technique to draw the red square of the snake itself.  Name the image SnakeTile.bmp. <br><br><h4>  Game font </h4><br>  We can create a font for the game in the same way we used to create images.  Right-click on the project contents in the solution browser, select Add&gt; New Item ... <br>  Select Sprite Font and name it Segoe20.spritefont. <br><br><img src="http://www.developer.nokia.com/Community/Wiki/images/8/8b/PTMSnakeFont.png" alt="image"><br><br>  Double-click on the font in the project browser and set its size to 20. Do not forget to save the font. <br><br><h4>  Creating a Food Class for Food </h4><br>  Right-click on the project contents in the solution browser, select Add&gt; New Item ... Select Code from the list of installed templates and create the Food class. <br><br><img src="http://www.developer.nokia.com/Community/Wiki/images/7/7c/PTMSnakeFoodClass.png" alt="image"><br><br>  This class stores information about the Texture (texture, type) and Position (position).  The width and height dimensions are used to define collisions in the Game1 class. <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Xna.Framework; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Xna.Framework.Graphics; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">SnakeIt</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Food</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Texture representing the food public Texture2D Texture; // Position of the food relative to the upper left side of the screen public Vector2 Position; // Get the width of the food public int Width { get { return Texture.Width; } } // Get the height of the food public int Height { get { return Texture.Height; } } // Set Food Texture and Position public void Initialize(Texture2D texture, Vector2 position) { Texture = texture; Position = position; } // Draw Food to the Screen public void Draw(SpriteBatch spriteBatch) { spriteBatch.Draw(Texture, Position, null, Color.White, 0f, Vector2.Zero, 1f, SpriteEffects.None, 0f); } } }</span></span></code> </pre> <br><br><h4>  Creating a Snake Class </h4><br>  Create a Snake class just like you created a Food class. <br><br><h4>  Used namespaces </h4><br>  We will use the XNA Framework and the List class from Collections to process all the tiles for our snake. <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Xna.Framework; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Xna.Framework.Graphics; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic;</code> </pre><br><br><h5>  Properties </h5><br>  To define a snake, we will define several of its properties.  We will load the snake image as a Texture texture and set the initial position of the snake in the middle of the screen (we will implement this later in the Game1 class).  All cells for the snake will be stored in the list of snakeTiles.  The direction of movement of the snake will be controlled in the Game1 class using gestures. <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//   public Texture2D Texture; //   public Vector2 Position; //    public List&lt;Tile&gt; snakeTiles; //     public float speed; const float speedIncrement = 0.2f; //   // 1==, 2==, 3==, 4== public int direction; //      -&gt;       public bool newTile;</span></span></code> </pre><br><br><h5>  Initialization </h5><br>  Game1 will initialize the Snake object.  The snake texture will be loaded, its initial position will be set.  All properties of the snake will be reset to the default properties when you first start and when the player wants to go through the game again.  By default the snake moves 5 pixels to the left and its head cell is created. <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//   public void Initialize(Texture2D texture, Vector2 position) { Position = position; Texture = texture; Reset(); } //  ( ) public void Reset() { speed = 5f; direction = 1; Tile tile = new Tile(Texture, Position); snakeTiles = new List&lt;Tile&gt;(); snakeTiles.Add(tile); newTile = false; }</span></span></code> </pre><br><br><h5>  Update </h5><br>  The game will call a method to update the snake every new game step.  In this method we find the position of the snake's head (this is the first cell contained in the snakeTiles list).  If we need to add a new cell to the snake (that is, when the food has been eaten), we create a new cell for headPostion and add it to the snakeTiles list.  Then we move only the head of our snake, thus increasing its size.  If new snake cells are no longer foreseen, we will move only the last cell to the ‚Äúhead‚Äù of the snake, and move the snake itself to a new position. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    Vector2 headPosition = snakeTiles[0].Position; //    if (newTile) { //    Tile tile = new Tile(Texture, headPosition); //    SnakeTiles ( HeadPosition,       ) snakeTiles.Insert(1, tile); } //    ,   ""  else if (snakeTiles.Count &gt; 1) { Tile last = snakeTiles[snakeTiles.Count - 1]; last.Position = headPosition; snakeTiles.RemoveAt(snakeTiles.Count-1); snakeTiles.Insert(0, last); } //      if (newTile) { speed += speedIncrement; newTile = false; } //  ""     switch (direction) { case 1: snakeTiles[0].Position.X -= speed; break; case 2: snakeTiles[0].Position.Y -= speed; break; case 3: snakeTiles[0].Position.X += speed; break; case 4: snakeTiles[0].Position.Y += speed; break; } }</span></span></code> </pre><br><br><h5>  Drawing </h5><br>  Each cell of the snake is drawn in the Draw () method.  This method is called from the Game1 class. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Draw</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SpriteBatch spriteBatch</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; snakeTiles.Count; i++) { spriteBatch.Draw(snakeTiles[i].Texture, snakeTiles[i].Position, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, Color.White, <span class="hljs-number"><span class="hljs-number">0f</span></span>, Vector2.Zero, <span class="hljs-number"><span class="hljs-number">1f</span></span>, SpriteEffects.None, <span class="hljs-number"><span class="hljs-number">0f</span></span>); } }</code> </pre><br><br><h5>  Tile class (nested class relative to Snake class) </h5><br>  Create a nested Tile class.  This class will define a snake cell.  Each cell has a Position position and a Texture texture. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Tile</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Vector2 Position; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Texture2D Texture; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Tile</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Texture2D texture, Vector2 position</span></span></span><span class="hljs-function">)</span></span> { Position = position; Texture = texture; } <span class="hljs-comment"><span class="hljs-comment">//   public int Width { get { return Texture.Width; } } //   public int Height { get { return Texture.Height; } } }</span></span></code> </pre><br><br><h4>  Class game1 </h4><br>  The Game1 class is basic for games based on Windows Phone XNA Games.  Here is the initialization and loading of the contents of our game.  Gestures and collision detection are used in a game method called the Update method.  Draw checks the game mode by the GameMode property and draws the corresponding screen. <br><br><h5>  Namespaces </h5><br>  The usual XNA and Touch classes are used to define gestures. <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Linq; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Xna.Framework; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Xna.Framework.Graphics; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Xna.Framework.Input; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Xna.Framework.Input.Touch;</code> </pre><br><br><h5>  Properties </h5><br>  We use the GraphicsDeviceManage class to get information about the current display.  The SpriteBatch class is used to display information on the screen.  We decided to use different game modes to control what happens through the Draw () method: to draw the menu, the game itself, or the game completion mode.  This is a very simple way to handle the drawing of different modes on the screen.  In addition, it is possible component-wise approach to solve this problem (see link: <a href="http://create.msdn.com/en-US/education/catalog/sample/game_state_management">Game State Management</a> ).  The current game mode is stored in the Mode property, all sorts of modes are defined as the GameMode enumeration. <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//     private GraphicsDeviceManager graphics; //      private SpriteBatch spriteBatch; //  private Snake snake; //    private Food food; //  private SpriteFont segoe20; //     private Vector2 scorePosition; //  private float score; private const float FOOD_POINTS = 20; //    GameMode Mode; //    enum GameMode {Menu, Running, Complete}</span></span></code> </pre><br><br><h5>  Constructor </h5><br>  First we connect to the GraphicsDeviceManage class and report our directory with all the sprites and Content fonts.  The frame rate is set to 30 frames per second by default.  We also need to turn on Tap and Flick gestures.  Different game modes are replaced with the Tap gesture, the movement of the snake is controlled by the Flick gesture. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Game1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//   graphics = new GraphicsDeviceManager(this); //      Content.RootDirectory = "Content"; // 30       Windows Phone. TargetElapsedTime = TimeSpan.FromTicks(333333); //       . InactiveSleepTime = TimeSpan.FromSeconds(1); //   Tap  Flick TouchPanel.EnabledGestures = GestureType.Tap | GestureType.Flick; }</span></span></code> </pre><br><br><h5>  Game initialization </h5><br>  The Initialize method allows you to perform any actions to initialize the game and all its resources before launching the game itself.  Here we will set the game mode and create objects for food and the snake itself. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//     Menu,  Menu    Draw() Mode = GameMode.Menu; //       snake = new Snake(); food = new Food(); //  0  score = 0f; base.Initialize(); }</span></span></code> </pre><br><br><h5>  Download sprites and fonts </h5><br>  LoadContent is called once to load all files.  First, we connect to the graphics device using SpriteBatch, so that later we can draw objects on the screen.  Then we load and create textures for the food and the snake.  At this point, the Initialize method is invoked for the corresponding classes Snake and Food.  We also create our font and calculate the position to display the number of points. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadContent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  SpriteBatch    spriteBatch = new SpriteBatch(GraphicsDevice); //         Vector2 snakePosition = new Vector2( GraphicsDevice.Viewport.TitleSafeArea.X + GraphicsDevice.Viewport.TitleSafeArea.Width / 2, GraphicsDevice.Viewport.TitleSafeArea.Y + GraphicsDevice.Viewport.TitleSafeArea.Height / 2); snake.Initialize(Content.Load&lt;Texture2D&gt;("SnakeTile"), snakePosition); //          Vector2 foodPosition = RandPosition(); food.Initialize(Content.Load&lt;Texture2D&gt;("FoodTile"), foodPosition); //  segoe20 = this.Content.Load&lt;SpriteFont&gt;("Segoe20"); //       scorePosition = new Vector2(20, 20); }</span></span></code> </pre><br><br><h5>  Game update </h5><br>  Update implements the game update logic: collision checking, response to audio input and playback.  Here we update the position of the snake and check for its collision with food, if the game is running.  All gestures are checked every time you call this method, regardless of whether the game is running or not. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTime gameTime</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//     if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed) this.Exit(); if (Mode == GameMode.Running) { snake.Update(); CheckCollision(); } CheckGestures(); base.Update(gameTime); }</span></span></code> </pre><br><br><h5>  Check collisions </h5><br>  The position of the food and the "head" of the snake is calculated into the corresponding Rectangle objects.  We can then use the built-in intersect method to determine the intersection of the rectangles.  In this case, we increase the number of points and create a sprite of food in a random new position, if eating a snake is determined to eat food (we also tell the snake that it needs to be updated and add a new cell to itself).  The game is considered to be over if the snake head goes off the screen. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CheckCollision</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//       int snakeHeadX = (int)snake.snakeTiles[0].Position.X; int snakeHeadY = (int)snake.snakeTiles[0].Position.Y; Rectangle rectangle1 = new Rectangle(snakeHeadX, snakeHeadY, snake.snakeTiles[0].Width, snake.snakeTiles[0].Height); Rectangle rectangle2 = new Rectangle((int)food.Position.X, (int)food.Position.Y, food.Width, food.Height); //     if (rectangle1.Intersects(rectangle2)) { //   score += FOOD_POINTS; //     food.Position = RandPosition(); //     snake.newTile = true; } //     if (snakeHeadX &lt; 0 || snakeHeadY &lt; 0 || snakeHeadX + snake.snakeTiles[0].Width &gt; GraphicsDevice.Viewport.Width || snakeHeadY + snake.snakeTiles[0].Height &gt; GraphicsDevice.Viewport.Height) { Mode = GameMode.Complete; } }</span></span></code> </pre><br><br>  The method below is used to move the food sprite to a new random position: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Vector2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RandPosition</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//     Random random = new Random(); Vector2 position = new Vector2( GraphicsDevice.Viewport.TitleSafeArea.X + random.Next(GraphicsDevice.Viewport.TitleSafeArea.Width - 45) + 20, GraphicsDevice.Viewport.TitleSafeArea.Y + random.Next(GraphicsDevice.Viewport.TitleSafeArea.Height - 45) + 20); return position; }</span></span></code> </pre><br><br><h5>  Gesture check </h5><br>  Gestures will be checked in the Update method every time.  To begin with, we check whether new gestures are available, and, if available, read them.  We also get the Delta value if the Flick gesture was defined.  The snake will then be moved in the appropriate direction.  The player cannot move the snake in the opposite direction (the game will be over).  The game mode changes if the Tap gesture is detected (starts a new game from the menu or restarts the game). <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CheckGestures</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//   ? while (TouchPanel.IsGestureAvailable) { //   GestureSample gesture = TouchPanel.ReadGesture(); // Flick  Tap? switch (gesture.GestureType) { case GestureType.Flick: //     ? Single x = gesture.Delta.X, y = gesture.Delta.Y; //     ? if (Math.Abs(x) &gt; Math.Abs(y)) { // left or right if (x &lt; 0) { if (snake.direction == 3 &amp;&amp; snake.snakeTiles.Count() &gt; 1) Mode = GameMode.Complete; else snake.direction = 1; //  } else { if (snake.direction == 1 &amp;&amp; snake.snakeTiles.Count() &gt; 1) Mode = GameMode.Complete; else snake.direction = 3; //  } } else { //   ? if (y &lt; 0) { if (snake.direction == 4 &amp;&amp; snake.snakeTiles.Count() &gt; 1) Mode = GameMode.Complete; else snake.direction = 2; //  } else { if (snake.direction == 2 &amp;&amp; snake.snakeTiles.Count() &gt; 1) Mode = GameMode.Complete; else snake.direction = 4; //  } } break; case GestureType.Tap: //    Menu  Running if (Mode == GameMode.Menu) { Mode = GameMode.Running; } //    Complete  Running  else if (Mode == GameMode.Complete) { snake.Reset(); score = 0f; Mode = GameMode.Running; } break; } } }</span></span></code> </pre><br><br><h5>  The output of the game on the screen </h5><br>  The Draw method is called when the game draws itself.  This example uses only blue background.  This method checks the game mode and draws the corresponding screen.  The text "FreeSnake, Tap the Screen to Start" is displayed on the screen when the game is loaded for the first time.  Snake, food for the snake and the number of points is displayed when the user plays the game.  Information about the points earned and the offer to play again is displayed when the game ends. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Draw</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTime gameTime</span></span></span><span class="hljs-function">)</span></span> { GraphicsDevice.Clear(Color.CornflowerBlue); <span class="hljs-comment"><span class="hljs-comment">//   spriteBatch.Begin(); if (Mode == GameMode.Menu) { string GameStart = "FreeSnake\nTap the Screen to Start"; Vector2 stringSize = segoe20.MeasureString(GameStart); spriteBatch.DrawString(segoe20, GameStart, new Vector2((GraphicsDevice.Viewport.Width - stringSize.X) / 2, (GraphicsDevice.Viewport.Height - stringSize.Y) / 2), Color.White); } else if (Mode == GameMode.Running) { //   snake.Draw(spriteBatch); //   food.Draw(spriteBatch); //    spriteBatch.DrawString(segoe20, "Score:"+score, scorePosition, Color.White); } else if (Mode == GameMode.Complete) { snake.Draw(spriteBatch); string GameOver = "Game Over\nScore : " + score +"\nTap the Screen to Restart"; Vector2 stringSize = segoe20.MeasureString(GameOver); spriteBatch.DrawString(segoe20, GameOver, new Vector2((GraphicsDevice.Viewport.Width - stringSize.X) / 2, (GraphicsDevice.Viewport.Height - stringSize.Y) / 2), Color.White); } //   spriteBatch.End(); base.Draw(gameTime); }</span></span></code> </pre><br><br><h4>  Conclusion </h4><br>  In this example, we showed the basic information that is required to create gesturing games for Windows Phone. <br><br>  The source code of the resulting game can be <a href="">found here</a> . <br><br><h4>  And something else </h4><br>  <i>We also remind that until May 20, <a href="http://habrahabr.ru/special/microsoft/wp7final/">applications</a> for the <a href="http://habrahabr.ru/company/Nokia/blog/140982/">Best Applications Free Promotion</a> contest from Nokia and Microsoft are being accepted.</i>  <i>Submit your apps and games for Windows Phone 7 to get a chance to win a Nokia Lumia 800 smartphone and free promotion of your application on Nokia and Microsoft platforms.</i> </div><p>Source: <a href="https://habr.com/ru/post/141943/">https://habr.com/ru/post/141943/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../141936/index.html">How to quickly develop a mobile application? Feedback and experience of startups</a></li>
<li><a href="../141937/index.html">Backing up to Yandex.Disk using D√©j√† Dup in Ubuntu and not only in it</a></li>
<li><a href="../141938/index.html">Cleaning infected site files from malicious code. Continuation</a></li>
<li><a href="../141940/index.html">YOTA begins testing a new LTE network in Moscow</a></li>
<li><a href="../141941/index.html">Withdrawing Yandex.Money to Visa cards in new countries</a></li>
<li><a href="../141944/index.html">CouchDB: the story of one accident</a></li>
<li><a href="../141945/index.html">The evolution of architecture: from "samopisnyh" services to HandlerSocket</a></li>
<li><a href="../141946/index.html">Create a session key using public and private keys</a></li>
<li><a href="../141948/index.html">1366 √ó 768px went around 1024 √ó 768px in the list of the most popular screen resolutions</a></li>
<li><a href="../141949/index.html">How to organize a corporate wintering?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
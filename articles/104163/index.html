<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Undo / Redo - The Illusion of Simplicity</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Such a simple and familiar function in any text and graphic editor. It would seem that what could be the difficulty with its implementation? When we f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Undo / Redo - The Illusion of Simplicity</h1><div class="post__text post__text-html js-mediator-article">  Such a simple and familiar function in any text and graphic editor.  It would seem that what could be the difficulty with its implementation?  <a href="http://devexpress.com/XtraRichEdit">When</a> we first faced with the development of Undo / Redo for the text editor <a href="http://devexpress.com/XtraRichEdit">XtraRichEdit</a> , we thought about it, and what approach should we take? <br><br><img src="https://habrastorage.org/storage/48b7ada0/91879e1d/2693117d/58e72cb0.png"><br><a name="habracut"></a><br>  It was obvious that there must be some kind of object responsible for the change history.  This object should contain a list of items representing individual actions.  Each such element must store enough information to undo the action (Undo), as well as repeat it (Redo). <br><br>  Since actions can be very different (inserting text, changing the font, adding a red line to a paragraph), we immediately decided that the elements of the Undo buffer would not only store all the necessary data for undo / redo operations, but would also be responsible for performing undo repeat: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HistoryItem</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Undo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Document document</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Redo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Document document</span></span></span><span class="hljs-function">)</span></span>; }</code> </pre> <br>  The first class prototype for the Undo buffer was as follows: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">History</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> List&lt;HistoryItem&gt; items = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;HistoryItem&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">History</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Document document</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.document = document; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Undo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Redo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HistoryItem item</span></span></span><span class="hljs-function">)</span></span> { items.Add(item); } }</code> </pre> <br>  Hands and stretch to write the Undo method: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Undo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { items[items.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>].Undo(document); }</code> </pre> <br>  Laconic, elegant ... but completely wrong. <br><br>  To begin with, when you try to call the Undo method when the list is empty, an exception will be thrown.  We fix: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> CanUndo { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> items.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Undo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!CanUndo) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; items[items.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>].Undo(document); }</code> </pre> <br>  And again we get the wrong code.  After all, if you call the Undo method several times in a row, then it will be called Undo time after time for the last item in the list, which is wrong.  Make changes: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Undo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!CanUndo) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; items[items.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>].Undo(document); items.RemoveAt(items.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>); }</code> </pre> <br>  Now everything is fine.  Well, it's time to get redo.  Nothing complicated ... <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Redo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!CanRedo) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-comment"><span class="hljs-comment">// ??? }</span></span></code> </pre> <br>  Oops!  We arrived. <br>  In our implementation of Undo, we are irretrievably losing rolled elements in the rollback process, so there is no one to do Redo.  We'll have to start an index pointing to the current item in the clipboard.  So: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> currentIndex = <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> CanUndo { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> currentIndex &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> CanRedo { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> items.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; currentIndex &lt; items.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Undo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!CanUndo) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; items[currentIndex].Undo(document); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.currentIndex--; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Redo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!CanRedo) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.currentIndex++; items[currentIndex].Redo(document); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HistoryItem item</span></span></span><span class="hljs-function">)</span></span> { items.Add(item); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.currentIndex++; }</code> </pre> <br>  Already better, at least it looks like something workable.  Note that in the case of Undo, the index changes <b>after a</b> rollback, and in the case of Redo, it changes <b>before</b> rolling.  We also remember to increment the index when adding an item to the history. <br><br>  And now let's look carefully at the Add method and ask ourselves how it will behave if we have completed and recorded 5 actions in history, then rolled back 3 of them and are going to perform a new action?  After thinking and seeing how it was done from others (everything is already stolen before us), we conclude that in this case, that part of the action history that is <b>after the</b> current index should be lost, and instead of it new actions will start to be recorded: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HistoryItem item</span></span></span><span class="hljs-function">)</span></span> { CutOffHistory(); items.Add(item); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.currentIndex++; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CutOffHistory</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> index = currentIndex + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (index &lt; Count) items.RemoveRange(index, Count - index); }</code> </pre> <br>  Now, finally, the simplest implementation of Undo / Redo has become operational. <br><br>  Let's think about how we will use it.  First of all, such a sequence of actions climbs into the head: <br><ol><li>  Perform the action; </li><li>  Bring information about this action into the undo buffer for further rollback / retry. </li></ol><br>  But at the very beginning, we decided that the undo-buffer elements are capable of not only storing the necessary data, but also independently perform the necessary rollback / repeat operations.  And what is the replay operation?  This is its direct execution from the current state.  Those.  to perform any operation, you can do so: <br><ol><li>  Create an undo buffer element, and put it in the undo buffer for further rollback / repeat; </li><li>  Perform Redo for this item: </li></ol><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoAction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HistoryItem item = CreateActionHistoryItem(); document.History.Add(item); item.Redo(document); }</code> </pre> <br>  It turned out elegant and beautiful.  The first execution of an action is Redo of this action from the current state.  Rollback - undo from the current state.  Repeat - rerun the operation from its current state. <br><br>  In the last sentences we have used the word state several times.  The fact is that the information that is stored in the undo buffer is quite correct at the moment of saving.  However, at the next moment it may become incorrect.  The simplest example.  We have the text ‚ÄúHello World!‚Äù. <br><br><img src="http://habrastorage.org/storage/ecdefe18/ff634681/c211e77b/633b56ea.png"><br><br>  We perform the insert operation of the ‚ÄúDevExpress‚Äù text before the word ‚ÄúWorld‚Äù.  At the same time, we will place the information in the undo buffer that the text ‚ÄúDevExpress‚Äù was inserted into the position with index 6 (starting with 0). <br><br><img src="http://habrastorage.org/storage/ad1b996c/bb2b633e/4e7785c0/7bcaa14f.png"><br><br>  Perform the following action: insert the line ‚ÄúWe say:‚Äù at the beginning of the text.  Of course, after this action, information about the position where you need to insert the string ‚ÄúDevExpress‚Äù will become incorrect. <br><br><img src="http://habrastorage.org/storage/1b00844e/4ba306f7/5fb02a48/a66ae958.png"><br><br>  If at this moment call Undo for the first operation, then the contents of the document will be corrupted.  For the information to be correct, it is necessary to recalculate. <br><br>  Is it possible in some case to do without recalculation?  Of course, it is possible, if we assume that the rollback of each operation leads the document to exactly the state it had at the time of the operation.  A similar requirement should be imposed on the repetition of the operation. <br><br>  In this, it turns out that the information in the undo buffer automatically "becomes" correct as soon as the document arrives in the original state in which this information was stored.  If the state is different from the original, then this information is generally incorrect and cannot be used.  And since operations are rolled back in the reverse order of their execution, we will never be able to use the information until the document is reset. <br><br>  These are some of the considerations you can use when implementing a simple Undo / Redo manager for your own text or graphic editor.  However, in life everything happens a little differently, as we will tell you in the <a href="http://habrahabr.ru/company/devexpress/blog/104167">next article</a> . <br><br>  But the <a href="http://habrahabr.ru/company/devexpress/blog/104168/">link to the extreme article</a> on the same topic. <br><br>  <b>PS:</b> <br>  In the process of writing this article, we became interested, and when did such a useful thing appear as Undo? <br><br>  Carefully googling, came to the conclusion that it happened somewhere in the period from 1971 to 1976.  So, <a href="http://man.cat-v.org/unix_8th/1/ed">modern</a> <a href="http://en.wikipedia.org/wiki/Ed_%2528text_editor%2529">ed ed</a> <a href="http://man.cat-v.org/unix_8th/1/ed">manuals</a> claim that it supports undo.  However, in the <a href="http://man.cat-v.org/unix-1st/1/ed">manual</a> from the first Unix for 1971 there is no mention of Undo yet.  But in the <a href="http://en.wikipedia.org/wiki/Vi">vi</a> editor, the first version of which was released in 1976, Undo seemed to be originally. <br><br>  The term undo itself was mentioned, possibly for the first time, also in 1976: ‚ÄúIt wasn‚Äôt been very much the case‚Äù (by issuing some special und undo command command). ‚Äù(Lance A Miller and John C. Thomas of IBM, ‚ÄúBehavioral Issues in the Use of Interactive Systems.‚Äù) (See NY Times Magazine, 5th paragraph). </div><p>Source: <a href="https://habr.com/ru/post/104163/">https://habr.com/ru/post/104163/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../104153/index.html">Press release following the congress of the Pirate Party of Russia</a></li>
<li><a href="../104154/index.html">Problem with ping</a></li>
<li><a href="../104155/index.html">World masterpieces of classical music without copyright</a></li>
<li><a href="../104159/index.html">History of one keyboard</a></li>
<li><a href="../104161/index.html">OS / 2 Death</a></li>
<li><a href="../104164/index.html">Toast on Programmer's Day</a></li>
<li><a href="../104165/index.html">Moscow City Duma proposes to prohibit torrents and penalize users</a></li>
<li><a href="../104167/index.html">Undo / Redo - Tail wags the dog</a></li>
<li><a href="../104168/index.html">What else is Undo / Redo capable of?</a></li>
<li><a href="../104169/index.html">Opera 10.70 (Win / Mac / Linux | 9046) September 8 and 13</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
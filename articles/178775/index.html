<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PushSharp - Simple Push Notifications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unfortunately, there are no topic links for Habr√© for a long time, so you have to write something about the wonderful PushSharp library. 

 It can sen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PushSharp - Simple Push Notifications</h1><div class="post__text post__text-html js-mediator-article">  Unfortunately, there are no topic links for Habr√© for a long time, so you have to write something about the wonderful <a href="https://github.com/Redth/PushSharp">PushSharp</a> library. <br><br><a name="habracut"></a>  It can send iOS, Android, Windows Phone and Windows 8 Push Notifications (it‚Äôs not in the description, but the PushSharp.Blackberry folder is in the source code, so maybe it already works for this platform)  It's easier to use it at all: <br><br><pre><code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//Create our push services broker var push = new PushBroker(); //Registering the Apple Service and sending an iOS Notification var appleCert = File.ReadAllBytes("ApnsSandboxCert.p12")); //isProduction -    development  ad-hoc/release  push.RegisterAppleService(new ApplePushChannelSettings(isProduction, appleCert, "pwd")); push.QueueNotification(new AppleNotification() .ForDeviceToken("DEVICE TOKEN HERE") .WithAlert("Hello World!") .WithBadge(7) .WithSound("sound.caf")); //Registering the GCM Service and sending an Android Notification push.RegisterGcmService(new GcmPushChannelSettings("theauthorizationtokenhere")); //Fluent construction of an Android GCM Notification //IMPORTANT: For Android you MUST use your own RegistrationId here that gets generated within your Android app itself! push.QueueNotification(new GcmNotification().ForDeviceRegistrationId("DEVICE REGISTRATION ID HERE") .WithJson("{\"alert\":\"Hello World!\",\"badge\":7,\"sound\":\"sound.caf\"}"));</span></span></code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Also, the authors were not too lazy to work on the <a href="https://github.com/Redth/PushSharp/wiki">documentation</a> and <a href="">examples</a> .  <a href="https://github.com/Redth/PushSharp/wiki/How-to-Configure-%26-Send-Apple-Push-Notifications-using-PushSharp">The step-by-step instruction for setting push notifications for iOS</a> from there is simply wonderful. <br><br>  Nuget package, of course, <a href="http://nuget.org/packages/PushSharp/">has</a> this library. <br><br>  And add on my own how to get device token when developing for iOS.  After installing the Push provision profile, you will need to add a method to your AppDelegate: <br><br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)application:(<span class="hljs-built_in"><span class="hljs-built_in">UIApplication</span></span> *)app didRegisterForRemoteNotificationsWithDeviceToken:(<span class="hljs-built_in"><span class="hljs-built_in">NSData</span></span> *)deviceToken { <span class="hljs-comment"><span class="hljs-comment">//  deviceToken,         }</span></span></code> </pre><br><br>  To save the device token, I use NSUserDefaults (I don‚Äôt see any minuses in this approach yet).  The only thing that needs to be considered is token comes in the above method as NSData (when casting to a string, we get something like "&lt;asdfasdf asdfasdf 12341234 wertwert 1234asdf ewrt3456 asdfasfd asdfasdf&gt;"), and we will need it as a string (" asdfasdfasdfasdf12341234wertwert1234asdfewrt3456asdfasfdasdfasdf ‚Äù). <br><br>  That is, the methods for saving and retrieving a token will look like this: <br><br><pre> <code class="objectivec hljs">+(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)getUserDeviceToken{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [[<span class="hljs-built_in"><span class="hljs-built_in">NSUserDefaults</span></span> standardUserDefaults] stringForKey:_deviceTokenKey]; } +(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)setUserDeviceToken:(<span class="hljs-built_in"><span class="hljs-built_in">NSData</span></span>*)tokenData{ <span class="hljs-built_in"><span class="hljs-built_in">NSCharacterSet</span></span> *charactersToRemove = [<span class="hljs-built_in"><span class="hljs-built_in">NSCharacterSet</span></span> characterSetWithCharactersInString:<span class="hljs-string"><span class="hljs-string">@"&lt;&gt; "</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *result = [[[<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> stringWithFormat:<span class="hljs-string"><span class="hljs-string">@"%@"</span></span>,tokenData] componentsSeparatedByCharactersInSet:charactersToRemove] componentsJoinedByString: <span class="hljs-string"><span class="hljs-string">@""</span></span>]; [[<span class="hljs-built_in"><span class="hljs-built_in">NSUserDefaults</span></span> standardUserDefaults] setValue:result forKey:_deviceTokenKey]; }</code> </pre><br><br>  Also, besides installing the certificate, you need to register the application for push notifications in your AppDelegate: <br><br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">BOOL</span></span>)application:(<span class="hljs-built_in"><span class="hljs-built_in">UIApplication</span></span> *)application didFinishLaunchingWithOptions:(<span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span> *)launchOptions { [[<span class="hljs-built_in"><span class="hljs-built_in">UIApplication</span></span> sharedApplication] registerForRemoteNotificationTypes:(<span class="hljs-built_in"><span class="hljs-built_in">UIRemoteNotificationTypeBadge</span></span> | <span class="hljs-built_in"><span class="hljs-built_in">UIRemoteNotificationTypeAlert</span></span> | <span class="hljs-built_in"><span class="hljs-built_in">UIRemoteNotificationTypeSound</span></span>)]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">YES</span></span>; }</code> </pre></div><p>Source: <a href="https://habr.com/ru/post/178775/">https://habr.com/ru/post/178775/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../178757/index.html">Internet addiction surveys</a></li>
<li><a href="../178759/index.html">Windows Azure update: .NET SDK 2.0, new libraries, management tools, diagnostics and adminstrirovaniya, Training Kit</a></li>
<li><a href="../178763/index.html">8 things you might not know about C #</a></li>
<li><a href="../178769/index.html">The digest of interesting news and materials from the world of IT and web development for the last week No. 55 (May 27 - 5, 2013)</a></li>
<li><a href="../178773/index.html">Blacklist 2.0, now with criminal penalties</a></li>
<li><a href="../178777/index.html">Sunday post with puzzles</a></li>
<li><a href="../178779/index.html">Video interview from Silicon Valley. AmBAR is the largest foreign business association of Russian-speaking professionals.</a></li>
<li><a href="../178785/index.html">The company from the United States plans to begin production of "smart weapons"</a></li>
<li><a href="../178789/index.html">"Solar impulse" crosses the US, using only the energy of the sun</a></li>
<li><a href="../178791/index.html">Lenticular hidden text boards for small people</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
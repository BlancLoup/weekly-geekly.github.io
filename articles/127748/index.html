<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Beautiful autologin on active network equipment</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, dear Habraludi! 
 I want to share with you my way to simplify the life of the network administrator. I suggest a way to automatically ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Beautiful autologin on active network equipment</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon, dear Habraludi! <br>  I want to share with you my way to simplify the life of the network administrator.  I suggest a way to automatically enter the login and password for all equipment at once.  I do not pretend to the novelty and freshness of the idea, but my own solution is much simpler, more transparent and somehow closer to the subject.  Welcome under cat. <a name="habracut"></a><br><br><h5>  What is </h5><br>  There is a provider network of managed equipment in the amount of hundreds of devices from different manufacturers (Cisco, D'link, Huawei, etc.).  Each device has a canonical name, but there is no dns entry for it.  There is a list of matching names to addresses.  All (more precisely, almost all) devices offer authorization through <a href="http://ru.wikipedia.org/wiki/TACACS%252B">TACACS +</a> .  That is, in the worst case, in order to fix the configuration of the piece of iron, it is necessary to find the device ip by name in the above list, start up, enter the login and password and do what is required. <br><br><h5>  What do you want </h5><br>  I would like to automate the whole thing somehow, and, finally, not to grind this password thousands of times a day.  It is necessary to get access to a piece of equipment by simply entering its name in the system's shell (cisco style) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Solve the problem </h5><br>  To solve the problem we will use: <br><ul><li>  <b>Of course, linux</b> is also on the workhorse. </li><li>  <b>Of course, python</b> - it also solves all admin problems very quickly, simply and transparently. </li><li>  <b>Of course, <a href="http://ru.wikipedia.org/wiki/Expect">expect</a></b> - what else will help us with autologin? </li></ul><br>  For pyhton, <a href="http://www.noah.org/wiki/pexpect">pexpect</a> is used - the implementation of expect in the contest of this language. <br><br>  <b>First,</b> you need to write a script that takes the ip of the piece of iron and sends us to its shell.  I cite the script code with comments, so in my opinion it is easier, and there is no need to repeat. <br><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env python # -*- coding: utf-8 -*- '''   cisco, d'link, huawei    ''' #    import pexpect from sys import argv #  ip     p=pexpect.spawn('telnet %s' % argv[1]) #  tacacs+ login='mylogin' password='mypassword' '''   -   .    ,       'D-Link'  .      . ''' i = p.expect(['.D-Link.','login:','Username:']) if i == 0: print 'D-Link detected' p.expect(['login:','UserName:']) p.sendline(login) p.expect(['Password:','PassWord']) p.sendline(password) i = p.expect(['.4#', '.3#','.Fail.']) if i == 2: '''    -    tacacs,   '.Fail.' -      . ''' print 'Wrong credentials! Trying default' p.expect(['login:','UserName:']) p.sendline('default') p.expect(['Password:','PassWord']) p.sendline('default') '''    -   . #3 -  , #4 -  ''' elif i == 1: print 'enabling admin' p.sendline("enable admin") p.expect('Password:') p.sendline('admin_pass') else: pass p.interact() elif i == 1: '''  cisco   -  enable  ,       ''' print 'Cisco detected' p.sendline(login) p.expect('Password:') p.sendline(password) p.interact() elif i == 2: '''  huawei    ,       sys ''' print 'Huawei detected' p.sendline(login) p.expect('Password:') p.sendline(password) p.expect('.') print 'enabling sys' p.sendline('sys') p.interact()</span></span></code> </pre> <br><br>  Now, running the script and passing the piece of iron to the ip parameter, we fall directly into its shell without question.  Now back to the task.  It is necessary to simply access the canonical name.  For this we will use <a href="http://ru.wikipedia.org/wiki/Alias_(bash)">bash alias</a> . <br>  For each piece of hardware, add a line to bashrc: " <code>alias _="autologin ip_"</code> ", and put the script in the bin directory (for example, / usr / bin / autologin). <br>  Now, by simply entering the name of the piece of iron in the shell, we can access it without asking any questions. <br><br><h5>  Instead of epilogue </h5><br>  I want to say a big thank you to the developers of the python language, thanks to which many, trivial and not so easy tasks are solved.  Thank you for your attention, waiting for your criticism, I will be glad to know your opinion. </div><p>Source: <a href="https://habr.com/ru/post/127748/">https://habr.com/ru/post/127748/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../127738/index.html">User experience and color perception</a></li>
<li><a href="../127739/index.html">Network scanning is easy</a></li>
<li><a href="../127743/index.html">Linux -> github</a></li>
<li><a href="../127744/index.html">The Japanese are entering the game - first look at the Sony Tablet S and Sony Tablet P tablets</a></li>
<li><a href="../127747/index.html">First look at the new features for the C ++ developer in the next version of Visual Studio</a></li>
<li><a href="../127749/index.html">So much for ‚Äúacquaintance" and why an external client is better</a></li>
<li><a href="../127752/index.html">Technical tour to the TEL data center</a></li>
<li><a href="../127753/index.html">Algorithm analysis</a></li>
<li><a href="../127756/index.html">Thorium in car engine</a></li>
<li><a href="../127757/index.html">Where is my money or fraud in cellular networks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
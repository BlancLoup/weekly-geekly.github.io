<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Brain Trainer Qt (learn to count in your mind or a weekend project)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I stumbled upon posts where the topic of effective mental arithmetic was very actively discussed ( one , two ). I was interested in the topic and I be...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Brain Trainer Qt (learn to count in your mind or a weekend project)</h1><div class="post__text post__text-html js-mediator-article">  I stumbled upon posts where the topic of effective mental arithmetic was very actively discussed ( <a href="https://habr.com/post/398589/">one</a> , <a href="https://habr.com/post/207034/">two</a> ).  I was interested in the topic and I began to look for programs and services for training.  Soon it came to the realization that it would be faster to write my own application, for my own wishes and with buttons where it is convenient for me, + the perspective of transferring to my favorite Windows Phone. <br><br>  For those who are interested to see / criticize - welcome under cat. <br><br><img src="https://habrastorage.org/webt/md/sg/g7/mdsgg782bzk5cvkd1nmxjt5xnty.png"><br><a name="habracut"></a><br>  List of classes: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  controlleri.cpp - spawns the rest of the classes, aggregates the entity and abstracts from the main View: <br><div class="spoiler">  <b class="spoiler_title">Controller.cpp</b> <div class="spoiler_text"><pre><code class="cpp hljs">Controller::Controller() : QObject() { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;leftPanel = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_unique&lt;LeftPanel&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;database = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_unique&lt;Database&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;exercise = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_unique&lt;Exercise&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;settings = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_unique&lt;Settings&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;settings.get()-&gt;init(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!settings-&gt;init()) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> QString(<span class="hljs-string"><span class="hljs-string">"Error open settings!"</span></span>); } database.get()-&gt;getSettings(settings.get()-&gt;getVersion(), settings.get()-&gt;getCountDigiMax(), settings.get()-&gt;getUseMinus(), settings.get()-&gt;getFirstName(), settings.get()-&gt;getLastName(), settings.get()-&gt;getLastAllTime(), settings.get()-&gt;getLastExerciseCorect(), settings.get()-&gt;getLastExerciseWrong(), settings.get()-&gt;getLastExercisePassed()); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;statistict = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_unique&lt;Statistic&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;statistict-&gt;setLastStatistic( settings-&gt;getLastAllTime(), settings-&gt;getLastExerciseCorect(), settings-&gt;getLastExerciseWrong(), settings-&gt;getLastExercisePassed()); connect(statistict.get(), SIGNAL(is_changed()), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, SLOT(statisticsChanged())); connect(settings.get(), SIGNAL(is_changed()), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, SLOT(settingsChanged())); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;timer = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_unique&lt;TimerClass&gt;(); connect(timer.get(), SIGNAL(update(QString)), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, SLOT(updateTime(QString))); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *pErr) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> pErr; } }</code> </pre> <br></div></div></li><li>  Exercise.cpp - generates examples, uses random to the given digits, checks the division by NULL. <br><br><div class="spoiler">  <b class="spoiler_title">Exercise.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs">Exercise::Exercise(QObject *parent) : QObject(parent) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;random = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_unique&lt;Random&gt;(); exercise.result = <span class="hljs-number"><span class="hljs-number">0</span></span>; } Exercise::sExercise Exercise::getNewExercise( eExerciseType operation, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count_max, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> use_minus) { <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> a = <span class="hljs-number"><span class="hljs-number">0</span></span>, b = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(count_max!=<span class="hljs-number"><span class="hljs-number">0</span></span>) { exercise.lastType = operation; a = random-&gt;getRandom(count_max); b = random-&gt;getRandom(count_max); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!use_minus) { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>((a &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) || (a==<span class="hljs-number"><span class="hljs-number">0</span></span>)) { a = random-&gt;getRandom(count_max); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>((b &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) || (b==<span class="hljs-number"><span class="hljs-number">0</span></span>)) { b = random-&gt;getRandom(count_max); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>((a == <span class="hljs-number"><span class="hljs-number">0</span></span>) || (b==<span class="hljs-number"><span class="hljs-number">0</span></span>)) { a = random-&gt;getRandom(count_max); b = random-&gt;getRandom(count_max); } } <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(operation) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> exerc_substraction: exercise.result = (a - b); exercise.exercText = QString(<span class="hljs-string"><span class="hljs-string">"%1%2%3%4"</span></span>).arg(a).arg(<span class="hljs-string"><span class="hljs-string">" - "</span></span>).arg(b).arg(<span class="hljs-string"><span class="hljs-string">"="</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> exerc_addtion: exercise.result = (a + b); exercise.exercText = QString(<span class="hljs-string"><span class="hljs-string">"%1%2%3%4"</span></span>).arg(a).arg(<span class="hljs-string"><span class="hljs-string">" + "</span></span>).arg(b).arg(<span class="hljs-string"><span class="hljs-string">"="</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> exerc_division: <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(b &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { b = random-&gt;getRandom(count_max); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(a &lt;= b) { a = random-&gt;getRandom(count_max); } exercise.result = (a / b); exercise.exercText = QString(<span class="hljs-string"><span class="hljs-string">"%1%2%3%4"</span></span>).arg(a).arg(<span class="hljs-string"><span class="hljs-string">" / "</span></span>).arg(b).arg(<span class="hljs-string"><span class="hljs-string">"="</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> exerc_multiplication: exercise.result = (a * b); exercise.exercText = QString(<span class="hljs-string"><span class="hljs-string">"%1%2%3%4"</span></span>).arg(a).arg(<span class="hljs-string"><span class="hljs-string">" * "</span></span>).arg(b).arg(<span class="hljs-string"><span class="hljs-string">"="</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> exerc_exponentiation: <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(b&lt;<span class="hljs-number"><span class="hljs-number">0</span></span> || b==<span class="hljs-number"><span class="hljs-number">0</span></span> || b&gt;<span class="hljs-number"><span class="hljs-number">15</span></span>) { b = random-&gt;getRandom(count_max); } exercise.result = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">long</span></span>&gt;(powl(a, b)); exercise.exercText = QString(<span class="hljs-string"><span class="hljs-string">"&lt;html&gt;&lt;head/&gt;&lt;body&gt;&lt;p&gt;%1&lt;span style=\" vertical-align:super;\"&gt;%2&lt;/span&gt; =&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"</span></span>) .arg(a).arg(b); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> exerc_root: exercise.result = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">long</span></span>&gt;(<span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(a)); exercise.exercText = QString(<span class="hljs-string"><span class="hljs-string">"%1%2%3"</span></span>).arg(a).arg(<span class="hljs-string"><span class="hljs-string">" ‚àö "</span></span>).arg(<span class="hljs-string"><span class="hljs-string">"="</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> exerc_nothing: exercise.exercText = <span class="hljs-string"><span class="hljs-string">"[Nothing]"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> exercise; } &lt;li&gt;Settings.cpp -       db &lt;spoiler title=<span class="hljs-string"><span class="hljs-string">"Settings.cpp"</span></span>&gt; &lt;source lang=<span class="hljs-string"><span class="hljs-string">"cpp"</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Settings::setCountDigiMax(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count_digits) { count_digit_max = count_digits; <span class="hljs-function"><span class="hljs-function">emit </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is_changed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Settings::setUseMinus(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> use) { use_minus = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt;(use); <span class="hljs-function"><span class="hljs-function">emit </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is_changed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Settings::setFirstName(QString name) { first_name = name; <span class="hljs-function"><span class="hljs-function">emit </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is_changed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Settings::setLastName(QString name) { last_name = name; <span class="hljs-function"><span class="hljs-function">emit </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is_changed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Settings::setLastAllTime(QTime *ptime) { exercise_all_time = ptime-&gt;toString(<span class="hljs-string"><span class="hljs-string">"HH:mm:ss"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Settings::setLastExerciseCorect(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> exercise) { exercise_correct = exercise; } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Settings::setLastExerciseWrong(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> exercise) { exercise_wrong = exercise; } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Settings::setLastExercisePassed(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> exercise) { exercise_passed = exercise; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&amp; Settings::getCountDigiMax() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> count_digit_max; } <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&amp; Settings::getUseMinus() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> use_minus; } QString&amp; Settings::getFirstName(){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> first_name; } QString&amp; Settings::getLastName() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> last_name; } QString&amp; Settings::getLastAllTime() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> exercise_all_time; } QString&amp; Settings::getVersion() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> version; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&amp; Settings::getLastExerciseCorect() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> exercise_correct; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&amp; Settings::getLastExerciseWrong() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> exercise_wrong; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&amp; Settings::getLastExercisePassed() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> exercise_passed; }</code> </pre><br></div></div></li><li>  Statistic.cpp - just keeps storing statistics, how many examples are solved, errors, etc. </li><li>  Timer.cpp will listen for ordering timers <br><div class="spoiler">  <b class="spoiler_title">Timer.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs">TimerClass::TimerClass(QObject *parent) : QObject(parent) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;time = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QTime(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;timer_one_sec = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QTimer(); connect(timer_one_sec, SIGNAL(timeout()), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, SLOT(nextTimeOneSecond())); timer_one_sec-&gt;start(<span class="hljs-number"><span class="hljs-number">1000</span></span>); } QTime* TimerClass::getTime() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> time; } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> TimerClass::nextTimeOneSecond() { *time = time-&gt;addSecs(<span class="hljs-number"><span class="hljs-number">1</span></span>); time-&gt;fromString((time-&gt;toString(<span class="hljs-string"><span class="hljs-string">"HH:mm:ss"</span></span>))); <span class="hljs-function"><span class="hljs-function">emit </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(time-&gt;toString(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"HH:mm:ss"</span></span></span></span><span class="hljs-function"><span class="hljs-params">))</span></span></span></span>; }</code> </pre><br></div></div></li><li>  Database.cpp - database class <br>  Data needs to be stored somewhere. <br>  SQLite fits perfectly <br><div class="spoiler">  <b class="spoiler_title">Database.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs">Database::Database(QObject *parent) : QObject(parent) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;db = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_unique&lt;QSqlDatabase&gt;(QSqlDatabase::addDatabase(<span class="hljs-string"><span class="hljs-string">"QSQLITE"</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;db.get()-&gt;setDatabaseName(<span class="hljs-string"><span class="hljs-string">"./database/database"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;db.get()-&gt;open()) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> QString(<span class="hljs-string"><span class="hljs-string">"Error open database!!"</span></span>); } } Database::~Database() { } <span class="hljs-function"><span class="hljs-function">QString </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">query_get_settings</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"SELECT sets_id, sets_count_digits, sets_used_minus FROM settings"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">QString </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">query_set_settings</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"UPDATE settings SET sets_count_digits=%1, sets_used_minus = %2"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">QString </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">query_update_statistics</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"UPDATE statistics SET "</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">" stats_exercise_all_time='%1', stats_excercise_correct=%2,"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">" stats_excercise_wrong=%3, stats_excercise_all='%4'"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">QString </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">query_get_statistics</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"SELECT "</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">" user_first_name, user_last_name, stats_exercise_all_time,"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">" statistics.stats_excercise_all, statistics.stats_excercise_correct,"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">" statistics.stats_excercise_wrong "</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">" FROM statistics"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">" JOIN user ON user.user_id = statistics.stats_user_id"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">QString </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">query_get_version</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"SELECT * FROM version"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Database::getSettings(QString &amp;version, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> &amp;count_digit_max, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> &amp;use_minus, QString &amp;first_name, QString &amp;last_name, QString &amp;exercise_all_time, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> &amp;exercise_correct, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> &amp;exercise_wrong, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> &amp;exercise_passed) { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> res = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { QSqlQuery query; <span class="hljs-comment"><span class="hljs-comment">// settings query.exec(query_get_settings); qDebug() &lt;&lt; "Query=" &lt;&lt; query.lastQuery(); while(query.next()) { count_digit_max = query.value(1).toInt(); use_minus = query.value(2).toBool(); } // user and statistics query.exec(query_get_statistics); qDebug() &lt;&lt; "Query=" &lt;&lt; query.lastQuery(); while(query.next()) { first_name = query.value(0).toString(); last_name = query.value(1).toString(); exercise_all_time = query.value(2).toString(); exercise_passed = query.value(3).toInt(); exercise_correct = query.value(4).toInt(); exercise_wrong = query.value(5).toInt(); } // version query.exec(query_get_version); qDebug() &lt;&lt; "Query=" &lt;&lt; query.lastQuery(); while(query.next()) { version = query.value(2).toString(); } } catch (...) { throw QString("db: error request get settings!"); } return res; } bool Database::setSettings(int count_digit_max, bool use_minus, QString first_name, QString last_name) { bool res = false; try { QSqlQuery query; // settings query.exec(QString(query_set_settings) .arg(count_digit_max) .arg(use_minus)); qDebug() &lt;&lt; "Query=" &lt;&lt; query.lastQuery(); res = query.result(); } catch (...) { throw QString("db: error request set settings!"); } return res; } bool Database::getStatistics(QString &amp;exercise_all_time, int &amp;exercise_correct, int &amp;exercise_wrong, int &amp;exercise_passed) { bool res = false; try { QSqlQuery query; query.exec(query_get_statistics); qDebug() &lt;&lt; "Query=" &lt;&lt; query.lastQuery(); while(query.next()) { exercise_all_time = query.value(2).toString(); exercise_passed = query.value(3).toInt(); exercise_correct = query.value(4).toInt(); exercise_wrong = query.value(5).toInt(); } } catch (...) { throw QString("db: error request get statistics!"); } return res; } bool Database::updateStatistics(QString exercise_all_time, int exercise_correct, int exercise_wrong, int exercise_passed) { bool res = false; try { QSqlQuery query; // settings query.exec(QString(query_update_statistics).arg(exercise_all_time) .arg(exercise_correct) .arg(exercise_wrong) .arg(exercise_passed)); qDebug() &lt;&lt; "Query=" &lt;&lt; query.lastQuery(); res = query.result(); } catch (...) { throw QString("db: error request update statistics"); } return res; }</span></span></code> </pre><br></div></div></li></ol><br><br><img src="https://habrastorage.org/webt/iw/_h/wt/iw_hwttnwblrh6moztentj2wleq.png"><br><img src="https://habrastorage.org/webt/qb/ps/3o/qbps3ofzwa5ucejomdn9xawijio.png"><br><img src="https://habrastorage.org/webt/-w/ge/8w/-wge8wz6mnv4gs2bxljz4_o6xle.png"><br><br>  ‚Üí Link to <a href="https://github.com/khomin/Brain_trainer">GitHub</a> </div><p>Source: <a href="https://habr.com/ru/post/417843/">https://habr.com/ru/post/417843/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../417831/index.html">Living with Java SE 8 and Java SE 11 at $ 25 per processor per month</a></li>
<li><a href="../417835/index.html">"Empire at depth": why large IT companies are laying their submarine cables</a></li>
<li><a href="../417837/index.html">Upgrading Django from version 1.9 to version 2.0</a></li>
<li><a href="../417839/index.html">Attackers use the game "Clash of Clans" to launder money from stolen credit cards</a></li>
<li><a href="../417841/index.html">Forbid, or useful plugins for ESLint</a></li>
<li><a href="../417845/index.html">Decrease apk size (reasonably)</a></li>
<li><a href="../417849/index.html">Bobinniki: a brief history of reel-to-reel tape recorders and a growing interest in the audio gadget today</a></li>
<li><a href="../417851/index.html">The digest of interesting materials for the mobile developer # 262 (July 16 - July 22)</a></li>
<li><a href="../417855/index.html">Chinese "Moon Palace" set a new record</a></li>
<li><a href="../417857/index.html">A $ 225 GPS spoofer is able to redirect robomobiles to a counter stream of cars.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we "married" cloud PBX, GSM and realtors (part 3)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The third chapter of the post-industrial telecom saga about the lush wedding of cloud technologies, virtual PBX, cellular communications and a real es...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we "married" cloud PBX, GSM and realtors (part 3)</h1><div class="post__text post__text-html js-mediator-article"> The third chapter of the <a href="http://habrahabr.ru/company/altegro/">post-industrial telecom saga</a> about the lush wedding of cloud technologies, virtual PBX, cellular communications and a real estate agency. <br><br>  In the two previous chapters we talked about how <a href="http://altegrocloud.ru/">our project</a> appeared, how painfully and long we went to ensure that the sleepless nights of productologists and the chronic red eyes of engineers began to bring the first financial results that can be seen in the daily report from the accounting department and, if necessary, spend something really needed - Server, Printer, Chocolate Chocolate. <br><br>  <b>What we came up with looks like this: FMC-platform + virtual PBX = Love.</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/0b8/096/8c8/0b80968c84edfc9bc3be4501c58273b8.png" alt="image"><br><br>  Where would all this apply now?  But where: our old acquaintance, director of a real estate agency with a staff of 60 people, 50 of which are real estate agents on mobiles, addressed us with a problem - ‚ÄúI want control over everything, I don‚Äôt believe anyone, the employees lie to me‚Äù <br><br><a name="habracut"></a><br><br>  <b>The problem is more detailed:</b> cunning agents-realtors working for a percentage of the transaction, having received the client‚Äôs contacts, do their best to carry out this very transaction in secret from the employer and take the money for themselves.  Need control.  Immediately, the second task is to automate everything that is possible, that is, to build a cloud-based housing rental robot that does not require a salary and threshes 24/7.  Well.  OK. <br><br>  <b>Introductory:</b> <br><br>  - the FMC platform of one of the Big Three participants that we modified (all calls from mobiles from the GSM network first go to our switch and only then) <br><br>  - carrier cloud IP-PBX, with a lot of nice features and API, purchased from a Russian vendor, and closely ‚Äúpodruzhennaya‚Äù with FMC <br><br>  - Real Estate Agency, concerned about the decline in profits and ready to selflessly march towards the triumph of unified communications and total control <br><br>  Before contacting us, the agency‚Äôs director had already tried to control the business ‚Äî issued corporate SIM cards and every day tracked call statistics, appealed to decency and promised mountains of gold, in case high performance is shown, hired those who control those who control everyone.  In spite of everything, none of the methods had the desired effect - the percentage of ‚Äúgray‚Äù deals was prohibitively high, it is almost impossible to prove the fact of fraud: Svetlana‚Äôs crystal clear view of the realtor disarmed and left no chance to catch an honest girl in dishonesty: .  Well, then we will all record and listen to conversations.  We have the right - we incur losses. <br><br>  After 5 meetings in the chat room, 53 emails and 28 tech.  Descriptions The following task was formulated: to do as in the diagrams <br><br>  <b>Scheme 1</b> <br><img src="https://habrastorage.org/getpro/habr/post_images/351/886/13a/35188613a72aa6001db031e5715a7886.png" alt="image"><br><br>  Various ways (about it below) collect data on real estate objects.  The base of such objects is the flesh and blood of the real estate business, it must be carefully protected.  All calls are received by verified operators in the office, and the agent receives the owner‚Äôs contacts only when there is a hot request from the client.  The less an agent knows, the better.  We distribute contacts only when necessary. <br><br>  <b>Scheme 2</b> <br><img src="https://habrastorage.org/getpro/habr/post_images/50d/b3f/d91/50db3fd918648cd49b71408183379578.png" alt="image"><br><br>  The application from the client for finding odnushki in Chertanovo and the correct friendship of the client with the owner of odnushka is one of the most intimate moments in the life of the agency.  This is money and that says it all.  Here, without options, we record, listen to, control and hide the contacts of the parties to the victorious.  All incoming calls first go through the call center operators.  They are their own, they can be trusted. <br><br>  And as a result of the whole project: to construct a cloud-based robot to conclude real estate transactions, which cannot be depicted in color because of the extreme complexity of the realtor kitchen. <br><br>  To begin with we will make the general script of processing of calls and the list of the employees participating in process. <br><br>  <b>Here's what happened:</b> <br><img src="https://habrastorage.org/getpro/habr/post_images/6de/926/52c/6de92652c415625b3a763b3cdc7635db.png" alt="image"><br><br>  <b>We assign rights in our virtual PBX:</b> <br><br>  For calls, we use our own communicator that supports basic PBX functionality, managers have access to the virtual office interface to monitor statistics and listen to conversations, as well as access to the interface of realtor CRM, with which we have prudently integrated, we have distributed our SIM cards to realtor agents, their former corporate ones are not used - they are not needed. <br><br>  <b>1) The supervisor (he is the director, he is the all-seeing eye)</b> - he sees everything, listens to everything, calls everyone, everyone sees his number, his conversations are not recorded, because the boss is nefig.  He has an expensive vulture phone and Macbook Air with all the passwords and attendances. <br><br>  <b>2) The operator (fighter on the front line)</b> - the girl on the phone in the office, does not deceive anyone, manages calls and, in general, the first person in the scheme - communicates with customers and makes decisions.  She has no access to wiretapping - not her concern.  He sees the statistics of his colleagues-operators, access to the statistics of all other employees is closed.  Uses a communicator and a headset, under the hands of CRM. <br><br>  <b>3) The controller (special forces and secret police)</b> - the trusted people of the leadership, sit and listen to the records, see the statistics and identify violations.  In the business do not participate directly, but just in case we write them down.  Suddenly betrayal.  A communicator is used, there is access to the wiretapping interface, there is no access to CRM. <br><br>  <b>4) A realtor agent (the most insidious, but the most powerless creature)</b> - sits in wait and waits for the team.  Operators transfer to it already hot clients.  Does not have a mobile number, only internal, uses our sim card.  All conversations are recorded, access to any statistics is closed.  His task is to pile up and pupate, and then report back.  When he calls, the company number is determined, not the mobile phone.  May escape at any time.  Uses our SIM cards, does not have access to the PBX interface. <br><br>  <b>Create scripts:</b> <br><br>  A large number of incoming numbers are involved in advertising schemes of a real estate agency.  There is an explanation for this - many ingenious ways to promote services and search for homeowners.  The harmless posting on the door of the entrance ‚ÄúThe Russian family will rent an apartment‚Äù with a mobile number at the end is an effective tool for filling the database of objects.  Calls from grandmothers with apartments come to mobile phones in such announcements and we want to control these calls too.  How to do it?  It's very simple - we have magic SIM cards connected directly to the PBX, so we will send mobile numbers from the ads to our virtual PBX via SIP and create a separate scenario for them: an incoming call, bypassing IVR, immediately comes to the operator, who convinces in three minutes grandmother is that she called in the right place and there is nothing to fear - all Russians are decent and decent.  Call recorded in the statistics and provide a comment.  The first task is completed: the grandmothers are under control, the grandmothers directly get into CRM - Excel is no longer needed, long live the call cards and integration with the database (the agency already had CRM, we just integrated with it). <br><br>  In addition to mobile numbers, urban ones are also used - this is purely clean advertising ‚Äúrenting out, renting housing‚Äù on various Internet sites.  Here, it seems, everything is simple - the usual scripts, voice menus and routing according to pre-created rules.  We are not hiding, we are an agency.  The only thing we do is isolating agents from inbound.  All calls first fall on operators who are honest, who are in the office, who have a salary.  Operators, in turn, control the redirection. <br><br>  At a certain stage, without an agent, a realtor is not enough and you need to connect it to the scheme.  Here again, magic SIM cards appear - the operator, having accepted the call, switches it to the realtor‚Äôs mobile phone, and in the mobile phone is our SIM card.  One click with the mouse and the call went directly to GSM and here (attention!) The <b>realtor does not see the caller‚Äôs number, but only the identifier, the transaction number in CRM that the operator has started (the sequence of numbers)</b> .  To identify a call this is more than enough and, most importantly, to communicate with the client, you need to dial again this identifier, and not the real number, and our PBX will match it with the real number, dial a mobile phone or a city number.  Super! <br><br>  The problem is solved: the client and the realtor communicate with each other, but do not see each other‚Äôs real numbers.  For a realtor, the client's phone number is a certain transaction number in CRM, and for a client, the realtor number is an internal number that he calls when he calls the office.  When a realtor comes in from a mobile phone, the client sees the city number of the agency, which we helpfully substitute, and not the personal number of the agent.  Anonymity has been achieved, in addition, all conversations are recorded and can be heard, there are practically no chances to communicate your personal contacts.  The realtor tears the hair on his head from impotence, the director is happy.  Things are easy: create an effective control scheme for all of this and polish the details.  The robot must be smart, the robot must do everything automatically.  About this in the next chapter, about a week later. <br><br>  To be continued‚Ä¶. <br><br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/252513/">https://habr.com/ru/post/252513/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252501/index.html">About one trick to return an error code from a function</a></li>
<li><a href="../252503/index.html">High Voltage Greetings on Spring Day</a></li>
<li><a href="../252505/index.html">C ++ Russia and after</a></li>
<li><a href="../252507/index.html">Migrating to https</a></li>
<li><a href="../252509/index.html">Perl 6 File Operations</a></li>
<li><a href="../252517/index.html">CTOcast # 5: ‚ÄúYou don't need a thousand people for a good discussion.‚Äù</a></li>
<li><a href="../252519/index.html">C ++ REST service: POCO + Angular TODO</a></li>
<li><a href="../252521/index.html">The digest of interesting materials from the world of Drupal # 6</a></li>
<li><a href="../252529/index.html">Free SSL certificates for 2 years from WoSign</a></li>
<li><a href="../252531/index.html">How we make budget sites</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
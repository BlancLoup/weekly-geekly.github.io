<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Telegram MTPROTO Proxy - everything we know about him</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Immediately after the events with Telegram locks in Iran and Russia, a new type of proxy began to appear in beta versions of the messenger, and to be ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Telegram MTPROTO Proxy - everything we know about him</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/2bd/c3f/160/2bdc3f160d5638e0c4dac7431a6d5bcb.jpg" alt="image"><br><br>  Immediately after the events with Telegram locks in Iran and Russia, a new type of proxy began to appear in beta versions of the messenger, and to be precise, the new protocol is MTProto Proxy. <br><br>  This protocol was created by the Telegram team to solve lock bypass problems, but is it really good? <br><a name="habracut"></a><br><h2>  Like now? </h2><br>  The main proxy type with which the telegram is now socks.  He has a fatal flaw: <b>Login and password</b> when connecting to a proxy is <b>transmitted in the clear</b> , no, your telegrams cannot be ‚Äútaken away‚Äù in this way, but you can look inside the proxy and understand that Ivan Ivanov uses the telegram. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In those countries that use DPI to analyze traffic, this is done.  This device parses the tunnel and looks what is inside, if we see the forbidden traffic, we block it. <br><br><h2>  What does Durov offer? </h2><br>  MTProto Proxy - MTProto family protocol (Telegram works on it), solves several problems at once: <br><br><ol><li>  To connect instead of the login + password, just enough password </li><li>  Traffic does not differ from the usual HTTPS / TLS (well, almost) </li><li>  Password is not transmitted to the server when connecting </li><li>  Traffic is encrypted </li><li>  It is possible to work through a proxy only by Telegram <i>(other applications will not work)</i> </li><li>  Promoted channels </li></ol><br>  As you can see, the set of features makes this type of proxy highly specialized - for Telegram, you will not be able to send normal traffic to it, and this is not strange - a huge plus. <br><br><h2>  Telegram only </h2><br>  Previously, the channels (and bots) made their proxies and distributed them to the world in order to preserve the audience in case of blocking.  Their proxies fell into the global lists of proxies and through them they sent spam and other bad things.  With a new type of proxy - you can not break the law, the maximum that will happen - the telegram will ban your IP address. <br><br>  <i>An example of a violation of the law in the case of socks: They tried to hack a bank / state agency through your proxy, your hoster will receive a formal complaint and, at best, just block you, at worst - well we will have that court.</i> <br><br><h2>  Promoted feeds </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/7d1/13e/e2f/7d113ee2f074706fe7c21464baf97419.jpg" alt="image"><br><br>  Promoted channels are a channel to which you will automatically be subscribed when connected to a proxy, it will be assigned to the top of the contact / chat list and cannot be deleted until you disconnect from this proxy. <br><br>  Roughly speaking, a telegram allows you to monetize a proxy, if earlier you could take a proxy from channel X (it works faster), but you don‚Äôt read it at all and go to read Y (and at the same time, channel X spends money to support the proxy into void), now you will pay for the use of the proxy for using the proxy. <br><br>  Thus, you can expect explosive growth of such proxies, if earlier the creation of a proxy was more a wave of goodwill or charity, now - the more users on your proxy = the more subscribers at the channel -&gt; advertising can be sold more expensive. <br><br><h2>  Traffic is encrypted </h2><br>  Having started Wireshark I went to look how the traffic looks when working through a proxy.  And it looks like a normal TCP / SSL connection <i>(without some packages / headers that belong to https)</i> .  In other words, traffic can be disguised as solutions such as Cisco Anyconnect and similar solutions that use TCP + SSL. <br><br>  Inside the tunnel - "porridge" of encrypted traffic, traffic is encrypted, as you can guess, thereby the password / secret phrase that you enter when you connect.  But not only she, of course, uses all the features of SSL / TLS here. <br><br><h2>  When will it be in production? </h2><br>  At the moment, MTProto Proxy is available in a stable version of Telegram for OS X, Telegram or Android, and in beta versions of Telegram Desktop, iOS Telegram X. <br><br>  It looks like we are waiting for a release in the ‚Äúproduction‚Äù of this proxy in Desktop clients and the usual iOS version (not X) right after that, we should see a new post from the team with a story about why it is good and how to live. <br><br><h2>  And test where? </h2><br>  In the open spaces of the chat, a semi-official proxy was found in the telegram, which works fine with the new protocol and <i>(it seems) was</i> launched by one of the developers, and here it is: <br><br>  <a href="https://t.me/proxy%3Fserver%3Dproxy.digitalresistance.dog%26port%3D443%26secret%3Dd41d8cd98f00b204e9800998ecf8427e">t.me/proxy?server=proxy.digitalresistance.dog&amp;port=443&amp;secret=d41d8cd98f00b204e9800998ecf8427e</a> <br><br>  But that's not all, enthusiasts on Github try to make their proxy servers using the source analysis method (there is no official yet), <a href="https://github.com/danog/MadelineProto">here is a <i>(PHP)</i></a> <a href="https://github.com/TGMTProto/MTProtoProxy">pair <i>(C #) of</i></a> <a href="https://github.com/dotcypress/mtproxy">projects <i>(Rust)</i></a> . <br><br>  PS And in the most <a href="https://github.com/grishka/libtgvoip/commits/public">recent version of the library</a> for VOIP calls that is used in the telegram, support for the conference mode is found, it looks like there will be two big announcements right away. <br><br>  <b>UPD:</b> MTProto proxy - at the moment a part of the Telegram infrastructure and when telegram ‚Äúruns‚Äù from locks - it multiplies and transfers copies of its MTProto Proxy between hosters, the processing servers themselves do not move anywhere.  Thus, in a short time, Telegram will allow to deploy a part of its infrastructure in itself.  <i>(The protocol of ‚Äúnative‚Äù proxies may differ from what the telegrams are currently implementing in their clients under the name MTPROTO)</i> <br><br>  <b>UPD:</b> <a href="http://telegra.ph/telegram-blocks-wtf-05-26">Similar post from Anna</a> <i>(Vee Security)</i> about the types of proxies in the Telegram and about the MTProto Proxy <i>(including the analysis of a specific type of encryption)</i> <br><br>  <b>UPD:</b> MTProto Proxy from the <a href="https://t.me/unkn0wnerror">creators of</a> TgVPN <a href="https://mtproto.tgproxy.cloud/mtproxy.html">mtproto.tgproxy.cloud/mtproxy.html</a> asked to test <br><br>  <b>UPD:</b> The most stable version of the MTProto server (in my opinion) is on Rust, available on Github <a href="https://github.com/dotcypress/mtproxy">github.com/dotcypress/mtproxy</a> <br><br>  The easiest option to run "your" proxy: <br><br><pre><code class="bash hljs">sudo docker run --name <span class="hljs-string"><span class="hljs-string">'mtproto_proxy'</span></span> --restart unless-stopped -p 1984:1984 -dti dotcypress/mtproxy -s <span class="hljs-string"><span class="hljs-string">'proxy secret'</span></span></code></pre><br>
 <i>proxy secret</i> ‚Äî          <br>
<br>
 :<br>
<br>
<pre><code class="bash hljs">docker logs mtproto_proxy</code></pre></div><p>Source: <a href="https://habr.com/ru/post/359348/">https://habr.com/ru/post/359348/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../359338/index.html">How and why $ 10 billion in public cloud costs are unwarranted losses</a></li>
<li><a href="../359340/index.html">Issue # 23: IT training - current issues and challenges from leading companies</a></li>
<li><a href="../359342/index.html">Monday begins on Saturday, or that you can learn about life in another country from sci-hub logs</a></li>
<li><a href="../359344/index.html">Designing software platform protected NAS</a></li>
<li><a href="../359346/index.html">A series of articles: building a secure NAS, or a home mini-server</a></li>
<li><a href="../359350/index.html">Data storage: a brief overview of this year‚Äôs trends</a></li>
<li><a href="../359352/index.html">"Finishing line": 5G networks to be, but not before 2020</a></li>
<li><a href="../359356/index.html">Creating 3D Chess in Unity</a></li>
<li><a href="../359358/index.html">ICANN again updated WHOIS policies - again dissatisfied</a></li>
<li><a href="../359362/index.html">Microsoft 365 and its chips</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
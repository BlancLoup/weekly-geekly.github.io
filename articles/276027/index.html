<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Debugging and Profiling in Visual Studio 2015</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In Visual Studio 2015, tools for debugging and diagnosing .NET applications have been significantly improved. Perhaps the most significant innovation ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Debugging and Profiling in Visual Studio 2015</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/d6f/492/f17/d6f492f17d49404a894b6e97c7259327.jpg"><br><br>  In Visual Studio 2015, tools for debugging and diagnosing .NET applications have been significantly improved.  Perhaps the most significant innovation was the Diagnostic Tools Hub, which allows profiling during debugging.  Let's see what new features appeared in VS 2015. <br><a name="habracut"></a><br>  Here is a list of new tools: <br><br><ul><li>  Perftip </li><li>  Edit &amp; Continue mode for x64 systems </li><li>  Lambda Expression Evaluation in Watch and Immediate Window </li><li>  Diagnostic Tools Window </li><li>  Live Visual Tree and Live Property Explorer </li><li>  Diagnostic Tools Hub </li></ul><br><h3>  Perftip </h3><br>  Debugging tips are small hints that pop up during the debug session and display the values ‚Äã‚Äãof variables.  They have long been present in VS, and I think everyone is familiar with them.  Now instead of them, PerfTip performs the same goal: it makes debugging easier and increases its productivity.  In contrast to the Debugging tips, in PerfTip, when navigating through the code, information about timing is displayed.  Previously, we had to collect timings line by line, inserting code for measurements, like the class <code>System.Diagnostics.Stopwatch</code> .  But now there is no need for this: PerfTip can measure the time elapsed between two debugger stops.  And it does not matter whether you use Step Into, Step Over or Run to Cursor to measure only one instruction or a whole block of code.  Timings are displayed both in PerfTip and as a list in the Diagnostic Tools Window). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/4de/5b3/d9d/4de5b3d9d86a469199c1070fe4d221c7.jpeg"><br>  <i>PerfTip shows that it took 1.357 seconds to execute the <code>BuildOpenMenu ()</code> method.</i> <br><br><h3>  Edit &amp; Continue mode for x64 systems </h3><br>  The ‚Äúedit and continue‚Äù functionality appeared in VS several years ago, but earlier it could only be used for debugging 32-bit processes.  In this mode, you can modify the code without leaving the debugging session.  At the same time, it is recompiled in the background and immediately ready for use.  The advantages are obvious: you can execute the code line by line, analyze the result, modify, move the cursor of the transition operator to the position in front of the modified line and execute it again.  And you don't even need to restart the debugger. <br><br>  As follows from the title, now this mode is also available for 64-bit processes.  However, this requires .NET Framework 4.5.1 or higher. <br><br><h3>  Calculating lambda expressions in the Watch and Immediate Window </h3><br>  VS 2015 now supports lambda expression evaluation in debug windows.  This is convenient, for example, when analyzing collections.  Suppose you have a list of people with 50,000 entries, and you need to find a person with the last name Meyer.  Previously, this could only be done in one way: by adding a collection to the watch window (by opening the window), expanding it and scrolling through the entire list manually.  Not too exciting and effective process, especially if the list is long.  Now you can find the desired entry with a simple LINQ expression: <br><br><img src="https://habrastorage.org/files/83d/55c/c34/83d55cc34ded473c8a4940ad1aa2f659.jpeg"><br><br><h3>  Diagnostic Tools Window </h3><br>  During debugging in this window, you can use tools for profiling.  To open it, select <i>Show Diagnostic Tools</i> from the <i>Debug</i> menu.  By default, it will display graphs of CPU and memory usage.  Yellow markers indicate the work of the garbage collector.  In previous versions of VC, all this data could only be obtained during a profiling session.  Now, instead of a multiple recording and analysis procedure, you can monitor the system behavior in real time during the debugging process.  You will immediately find outbursts in the use of resources, including when collecting garbage, and will be able to compare them with a debugged code fragment or action performed in the interface. <br><br><img src="https://habrastorage.org/files/321/fbb/d83/321fbbd8352f4a2195f8cae8825c2c6e.jpeg"><br><br>  Another important innovation was the list of all PerfTip.  Each time the debugger stops and displays PerfTip, it adds a new dimension to the Diagnostic Tools Window.  Thanks to this list you can watch the time measurements and quickly move to the corresponding lines. <br><br>  The diagnostics window allows you not only to estimate the CPU and memory load, but also to record an impression of managed memory with one click.  In this case, the system automatically calculates and displays the number of objects in the heap, as well as their total size in bytes.  These values ‚Äã‚Äãcan be clicked and see a detailed list of all objects present in the memory.  All this allows you to quickly find the causes of any memory problems, such as leaks.  Please note that this tool is fully integrated into the debugger and does not require its restart. <br><br><h3>  Live Visual Tree and Live Property Explorer </h3><br>  These are two tools designed specifically for WPF applications (Windows Presentation Foundation) and universal applications.  With their help, you can analyze a running program by displaying it as a ‚Äúvisual tree‚Äù (visual tree).  A visual tree is an internal representation of the user interface that contains all the visible elements of the application.  It turns out very similar to the tools for web developers, launched in browsers with the command "explore the element."  The visual tree allows you to select a user interface element with one click, view and change both the element itself and its properties.  All changes will be immediately applied in the running application.  Previously, this could be done only with the help of third-party applications, for example, Snoop or WPF Inspector. <br><br>  The illustration below shows an example of a visual WPF application tree.  The Family.Show program is presented on the left, its reference WPF implementation was created by Vertigo and is available for download on Codeplex.  The illustration shows a picture of Prince Charles, and its properties are displayed on the right in Live Visual Tree.  The tree starts with the MainWindow class and is expanded up to the selected object.  And in the column on the right, the number of child objects for each visual element is displayed. <br><br><img src="https://habrastorage.org/files/bdb/696/8aa/bdb6968aaf4b4a12887b3e820b04b0c6.jpeg"><br><br>  If you right-click on an object inside the tree, the context menu appears.  It has useful items Go to source and Show Properties.  The first opens a XAML file containing the definition of the item.  And the second item launches Live Property Explorer. <br><br>  Here are the properties of the element and their values.  At the same time, Live Property Explorer allows you to group properties by the origin of their values.  From the illustration it is clear that the values ‚Äã‚Äãare default, calculated, inherited and local.  They can also be obtained from the XAML style definition file.  All values ‚Äã‚Äãcan be changed directly in the Live Property Explorer and immediately see what effect it has on a running application. <br><br><img src="https://habrastorage.org/files/98c/e5b/9d7/98ce5b9d7d1f467899c1ea6a0c0cb5dc.jpeg"><br><br><h3>  Diagnostic Tools Hub </h3><br>  This tool appeared in Visual Studio 2013. You can run it through <i>Debug</i> -&gt; <i>Start Diagnostic Tools without Debugging</i> , it is the launch point for all tools related to performance and diagnostics.  Diagnostic Tools Hub is a collection of numerous small tools, each of which measures, records, calculates and displays only one parameter in the Visual Studio window.  All tools use a single structure of data visualization in the form of a timeline with details for each record.  The scale is a histogram of the main dimension, which can display custom markers for special events or values.  You can view the data in more detail, with the display form will be different for all tools.  So, if you wish, you can study in more detail the parameters of any measurement and display general information in the form of a pie chart.  Since the output format of all instruments is common, during the same session you can simultaneously launch several instruments by viewing the results of their measurements in a compact form.  For example, you can combine a user interface activity indicator and a processor load level.  Previously, these tools were sharpened, mainly for Windows Store applications.  Due to its simplicity and unified design, the toolkit is very often updated, and in VS 2015 many of them support other technologies, such as the Windows Presentation Foundation. <br><br>  The old profiler in Visual Studio, which was able to measure CPU and memory usage, did not fit into the concept of small diagnostic tools with a standard output format.  Therefore, for backward compatibility, it was integrated into Diagnostic Tools Hub.  The creators of VS plan to gradually distribute the profiler functionality into several separate tools available from the hub. <br><br>  So, what is the set of tools presented in the Diagnostic Tools Hub in Visual Studio 2015: <br><br><ul><li>  <b>Application Timeline</b> : allows you to monitor the activity of UI-flow of applications based on XAML </li><li>  <b>CPU Usage</b> : <b>CPU Usage</b> () </li><li>  <b>GPU Usage</b> : displays graphics card instructions for DirectX applications. </li><li>  <b>Memory Usage</b> : displays memory consumption for leak detection </li><li>  <b>Performance Wizard</b> : Old Visual Studio Profiler </li><li>  <b>Energy Consumption</b> : displays estimated power consumption for mobile devices </li><li>  <b>HTML UI Responsiveness</b> : allows you to monitor the activity of the UI flow of applications based on HTML </li><li>  <b>JavaScript Memory</b> : analyzes memory usage in HTML applications </li><li>  <b>Network</b> : profiles network traffic </li></ul><br>  The following illustration shows the graphs of a number of system parameters when running a WPF application.  In this case, Application Timeline and CPU Usage are used.  The scale shows the activity of the UI and the frame rate in the FPS.  Separately, XAML parsing, layout output, rendering, input / output operations, application code and other activities are shown.  Color differentiation allows you to quickly navigate the graph.  The CPU utilization graph reflects the processor load, in this example it is involved at 12.5%.  That is, on the eight-core machine, one core is fully occupied by the UI thread.  If necessary, you can adjust the scale of the scale and explore some intervals in more detail. <br><br><img src="https://habrastorage.org/files/7c5/ad9/497/7c5ad94970604c389d3906930de6a159.jpeg"><br><br>  The following is an example of detailed detailing of the same session.  Events are divided into categories and displayed in the form of strips, the length of which corresponds to the duration of each event.  This makes it very easy to estimate how much time it took you to parse, display the layout, read and write from disk, or garbage collection.  Some events can be expanded as a tree for even more detailed study. <br><br><img src="https://habrastorage.org/files/196/361/8e3/1963618e3cc84471ade76360e0a6e2ae.jpeg"><br><br><h3>  Conclusion </h3><br>  In Visual Studio 2015, there are many great debugging, diagnostic, and profiling features that can help improve developer productivity.  All mentioned tools are in each VS edition, up to the free Visual Studio Community Edition.  Here you will find everything you need.  In this case, for the first time in the history of VS, profiling can be performed directly during debugging.  In Visual Studio 2015, application profiling is combined with a convenient daily debugging process used by developers. <br><br>  Useful links: <br><br><ul><li>  Family.Show, WPF application: <a href="https://familyshow.codeplex.com/">https://familyshow.codeplex.com/</a> </li><li>  Snoop - The WPF Spy: <a href="https://snoopwpf.codeplex.com/">https://snoopwpf.codeplex.com/</a> </li><li>  WPF Inspector: <a href="http://www.wpftutorial.net/Inspector.html">http://www.wpftutorial.net/Inspector.html</a> </li><li>  Visual Studio Community: <a href="https://www.visualstudio.com/en-us/products/visual-studio-community-vs.aspx">https://www.visualstudio.com/en-us/products/visual-studio-community-vs.aspx</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/276027/">https://habr.com/ru/post/276027/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../276015/index.html">HPE Proactive Care Advanced - a new service for a new type of IT</a></li>
<li><a href="../276017/index.html">Adjusted sliding exam, coclassifiers, fractal classifiers and local error probability</a></li>
<li><a href="../276019/index.html">Fuzzy search in the dictionary with the universal Levenshtein automaton. Part 2</a></li>
<li><a href="../276023/index.html">Install / Update Veeam B & R v9 on Hyper-V Server</a></li>
<li><a href="../276025/index.html">SLES 12, Watchdog Timer and IBM / Lenovo Servers</a></li>
<li><a href="../276031/index.html">From Phone to Cloud: Azure Mobile Services. Where to begin?</a></li>
<li><a href="../276033/index.html">BPG format can replace animated gif and not only</a></li>
<li><a href="../276035/index.html">BEM methodology: how it all began and why it is all needed</a></li>
<li><a href="../276037/index.html">Prime numbers: history and facts</a></li>
<li><a href="../276039/index.html">The largest hackathon in the history of software development with a prize fund of $ 140,000</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
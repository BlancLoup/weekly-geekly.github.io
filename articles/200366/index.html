<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Selecting and editing custom primitives in MultiCAD.NET</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In one of the previous articles, we talked about how you can create custom primitives using the MultiCAD.NET API, taking the example of CustomObjects ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Selecting and editing custom primitives in MultiCAD.NET</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/738/9bb/e51/7389bbe51333eb99e4dc1f83bb00d2f3.png"><br><br>  In one of the previous <a href="http://habrahabr.ru/company/nanosoft/blog/184482/">articles,</a> we talked about how you can create custom primitives using the MultiCAD.NET API, taking the example of CustomObjects from the SDK as a basis.  In this article, we will pay attention to the procedure for searching and selecting user objects and expand the existing example by adding the ability to select one or several primitives using the MultiCAD.NET toolkit for further editing.  Details - under the cut. <a name="habracut"></a><br><br>  So, we have a custom primitive, which is a rectangular frame with a text string inside.  Let's consider the task of selecting several objects in the drawing and change the text in each of the selected primitives. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/e46/9c5/b5d/e469c5b5d358f4a84b26ff52f524410e.png"><br><br>  To select a single object in the drawing in MultiCAD.NET, the SelectObject () object manager method is used: <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> McObjectId </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SelectObject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sPromt</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> McObjectId </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SelectObject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sPromt, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Point3d pnt</span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br>  Both options allow the user to select an object, while displaying a hint on the command line.  The second method, in addition to the prompt line, also contains a parameter - the point at which the click was made. <br><br>  To select multiple objects, use the <code>SelectObjects()</code> method: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> List </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SelectObjects</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ObjectFilter filter</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> McObjectId[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SelectObjects</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sPromt</span></span></span><span class="hljs-function">)</span></span>;</code> </pre><br>  The first option is used to select drawing objects based on a given filter, the second one displays a hint to the console and allows the user to select objects himself. <br><br>  The filter is an object of class <code>ObjectFilter</code> , which defines the criteria for selecting objects: documents, layers, sheets, on which objects of a given type will be searched.  For example, in the following example, using the <code>SelectCircles</code> command, <code>SelectCircles</code> will get a list of objects of the "circle" type, which are located on the current sheet and intersect the specified rectangular area: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">CommandMethod(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"SelectCircles"</span></span></span><span class="hljs-meta">, CommandFlags.NoCheck | CommandFlags.NoPrefix)</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SelectCirclesCmd</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { ObjectFilter filter = ObjectFilter.Create(<span class="hljs-literal"><span class="hljs-literal">true</span></span>).AddType(DbCircle.TypeID); filter.Bound = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BoundBlock(Point3d.Origin, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3d(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3d(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3d(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)); List&lt;McObjectId&gt; ids = filter.GetObjects(); }</code> </pre><br><br>  To select all the circles in the drawing (not only on the current sheet), add a drawing document as a search area: <br><br><pre> <code class="cs hljs">ObjectFilter filter = ObjectFilter.Create(<span class="hljs-literal"><span class="hljs-literal">false</span></span>).SetCurentDocument().AddType(DbCircle.TypeID);</code> </pre><br><br>  Register a new command <code>TextInBoxEdit</code> and add the ability to custom select objects.  Then, from the entire set of selected objects, we select only user primitives of the <code>TextInBox</code> type: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">CommandMethod(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"TextInBoxEdit"</span></span></span><span class="hljs-meta">, CommandFlags.NoCheck | CommandFlags.NoPrefix)</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TextInBoxEditCmd</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { McObjectId[] idSelecteds = McObjectManager.SelectObjects(<span class="hljs-string"><span class="hljs-string">"Select TextInBox primitives to edit"</span></span>); McObjectId[] idSelectedTextinBox = Array.FindAll(idSelecteds, (s =&gt; (s.GetObject()) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> TextInBox)); }</code> </pre><br><br><img src="https://habrastorage.org/getpro/habr/post_images/e5d/75c/5d5/e5d75c5d56a6ce285d57c7f945d5835b.png"><br><br>  If at least one of the primitives has been selected, for each of them we will set the new value to the <code>Text</code> property: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (idSelectedTextinBox == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || idSelectedTextinBox.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>) { MessageBox.Show(<span class="hljs-string"><span class="hljs-string">"No TextInBox primitives selected!"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (McObjectId currID <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> idSelectedTextinBox) { (currID.GetObject() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> TextInBox).Text = <span class="hljs-string"><span class="hljs-string">"Changed text"</span></span>; }</code> </pre><br><br>  Thus, the text will be replaced in all selected primitives. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/80a/ad2/e51/80aad2e51257d03b035d5db67a385736.png"><br><br>  Discussion of the article is also available on our forum: <a href="http://forum.nanocad.ru/index.php%3Fshowtopic%3D6514">forum.nanocad.ru/index.php?showtopic=6514</a> . <br><br>  English version of the article: <a href="http://developer.nanocad.com/blog/2014/03/28/selecting-and-editing-custom-entities-in-multicad-net/">Selecting and editing custom entities in MultiCAD.NET</a> . </div><p>Source: <a href="https://habr.com/ru/post/200366/">https://habr.com/ru/post/200366/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../200354/index.html">Custom Annotation Preprocessor - the creation of Android-based applications and configuration in IntelliJ IDEA</a></li>
<li><a href="../200356/index.html">Development of client-server infrastructure in javascript (part 2 - server and location)</a></li>
<li><a href="../200358/index.html">Mobile Internet in Russia and the world: platforms, consumption, trends</a></li>
<li><a href="../200362/index.html">Moving to Fusion Drive (Mac OS X Mavericks)</a></li>
<li><a href="../200364/index.html">Experience from Yandex. How to make your report for autotests</a></li>
<li><a href="../200376/index.html">Publish Ruby, Python, Node.js, Perl and Java web applications to Azure Cloud Services</a></li>
<li><a href="../200378/index.html">At the G20 summit, Russia gave diplomats flash drives with "bookmarks"</a></li>
<li><a href="../200382/index.html">Creating a module for Drupal 7. Part 2</a></li>
<li><a href="../200386/index.html">SSD-VDS and SSD hosting in the Netherlands and the USA</a></li>
<li><a href="../200388/index.html">My Opera closes in March 2014</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
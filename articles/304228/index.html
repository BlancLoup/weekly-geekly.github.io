<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MQTT and Modbus: a comparison of the protocols used in IoT gateways</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the development of the Internet of things, not only completely new technologies are important. An invaluable role here is played by the possibility...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MQTT and Modbus: a comparison of the protocols used in IoT gateways</h1><div class="post__text post__text-html js-mediator-article">  In the development of the Internet of things, not only completely new technologies are important.  An invaluable role here is played by the possibility of integration with the developments of past years.  And the key point of such integration is communication.  There are many protocols that allow a huge number of various "things" to connect to the Internet and interact with each other. <br><br> <a href="https://habrahabr.ru/company/intel/blog/304228/"><img src="https://habrastorage.org/getpro/habr/post_images/526/85e/0ba/52685e0ba427d254de5afdc35ec1599b.png" alt="image"></a> <br><br>  Today we will talk about a pair of complementary protocols that have found application in IoT.  The first is Modbus.  It serves to organize communication between devices located close to each other.  The second is MQTT.  It has much more features, supports work in local networks and on the Internet.  With it, you can organize the exchange of data between "things" on a global scale. <br><a name="habracut"></a><br>  <b>Modbus</b> is a serial data exchange protocol that appeared in 1979 and became the de facto standard for organizing communication between industrial devices.  MQTT appeared 20 years later, but, despite the difference in age, the joint use of these two protocols allows to give highly specialized integrated devices all the features that are available when connected to the Internet. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The figure below shows the scheme of interaction between these protocols, as well as the device that allows organizing such interaction - a gateway for the Internet of things. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b1d/4a3/3d0/b1d4a33d0fb04a8ea1bf377d82d0261a.png"></div><br>  <i><font color="#999999">Gateway for the Internet of Things allows you to combine the capabilities of MQTT and Modbus</font></i> <br><br>  Let's take a closer look at Modbus and MQTT, examine their features and the possibility of sharing them in IoT solutions. <br><br><h2>  <font color="#0071c5">Modbus</font> </h2><br>  Over the decades of its existence, Modbus has evolved into a wide range of protocols using various methods of physical communication of devices (for example, RS-485 interface).  At the heart of all these implementations is a serial protocol built on the master-slave model.  The master sends the slave a request, and the slave responds to the request.  In the standard Modbus network, there is one main, leading node and up to 247 subordinate ‚Äì knowledgeable ones.  However, it should be noted that a two-byte addressing system can significantly relax this restriction. <br><br>  Using the RS-485 interface, communication between master and slave devices is accomplished using packets that contain function code and data.  This code indicates what action should be taken, for example, the need to read discrete input data, read data from the FIFO queue, perform a diagnostic operation.  The slave device, receiving the command and executing it, responds by sending a packet, the structure of which is very simple.  Due to the low computational load that Modbus interaction creates, very different devices can ‚Äúcommunicate‚Äù with its use: from intelligent controllers to ordinary sensors. <br><br>  From the description it is possible to judge the extreme simplicity of Modbus, but its openness has made this protocol standard de facto for industrial and SCADA systems. <br><br><h2>  <font color="#0071c5">MQTT</font> </h2><br>  MQTT (Message Queuing Telemetry Transport) is a simple, open protocol designed specifically for IoT and used to exchange data between devices.  An MQTT network includes an MQTT broker that mediates the interaction of MQTT agents ‚Äî publishers and subscribers.  Publishers publish information intended for subscribers. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/962/5f8/874/9625f8874c5f3f773b5cd16e8c71a7ff.png"></div><br>  <i><font color="#999999">Broker, publisher and subscriber in the MQTT network</font></i> <br><br>  MQTT is designed for low-power embedded devices, so the computational requirements for its implementation are minimal.  In addition to the very low system load, MQTT is characterized by high communication efficiency even in low bandwidth networks.  At the same time, there is very little overhead information in the structure of data transmitted with its help, that is, in comparison with many other protocols, for example, with HTTP, it almost does not load the network with the transfer of information, which is needed only for the operation of the protocol.  According to measurements made in 3G networks, the bandwidth of MQTT is 93 times higher than the REST (Representational State Transfer) protocol that runs over HTTP. <br><br>  MQTT implements the publisher-subscriber model using a minimum number of methods.  They serve to indicate the actions to be performed.  These actions boil down to interacting with a broker and working with topics and posts.  Agents connect to the broker, and then either publish the topics and posts in them, or subscribe to the threads and receive messages in these topics published.  Upon completion, the agent disconnects from the broker.  Here are the MQTT methods: <br><br><ul><li>  Connect - establish a connection with a broker. </li><li>  Disconnect - break connection to the broker. </li><li>  Publish - publish the topic on a broker. </li><li>  Subscribe - subscribe to the topic on the broker. </li><li>  Unsubscribe - unsubscribe from the topic on the broker. </li></ul><br>  Here is a simplified diagram of the interaction between the subscriber and the publisher using the MQTT broker. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/717/a6f/97c/717a6f97caf7a513667a7fc03df19256.png"></div><br>  <i><font color="#999999">Subscriber / Publisher Interaction</font></i> <br><br>  The publisher, which is the source of some data, connects to the broker.  The subscriber, the consumer of information, does the same and subscribes to a topic that is presented here as ‚Äú/ home / alarms / 1 / status‚Äù.  In this example, this topic publishes information about changes in the state of the home alarm system in some ‚Äúzone number 1‚Äù.  When the publisher has new data, he contacts the broker and publishes a message in this thread.  The broker, in turn, transmits the published message to everyone who has signed on this topic. <br><br>  Pay attention to the hierarchical structure of the theme name from our example.  It is similar to the file system path.  It simplifies the organization of topics.  In addition, similar hierarchical naming structures of resources are popular in other protocol architectures, for example, in REST. <br><br>  MQTT, in addition, allows the use of wildcard characters, which simplifies the subscription process.  If the subscriber, for example, wants to know about the status of all alarm sensors, he can subscribe to a topic like the following: "/ home / alarms / + / status".  As a result, he will be notified of alarms in all zones, and not only in ‚Äúzone No. 1‚Äù, as in the above example.  You can subscribe to an entire subtree of topics using a template with a ‚Äú#‚Äù sign.  For example, a subscription to ‚Äú/ home / #‚Äù will allow you to receive messages about everything that happens in the topics below the node ‚Äú/ home‚Äù. <br><br><h2>  <font color="#0071c5">Quality of service</font> </h2><br>  MQTT supports the indication of the quality of service (QoS).  Namely, there are three such levels: <br><br><ul><li>  QoS 0. This level employs the ‚Äúone-time message delivery maximum‚Äù strategy.  The receiver of the message does not confirm their receipt, the sender, accordingly, transmits the message only once, without attempting to re-transmit them.  This is the ‚Äúsend and forget‚Äù method. <br><br></li><li>  QoS 1. This is the ‚Äúone-time message delivery‚Äù approach.  It is guaranteed that the receiver will receive the message at least once.  In this case, the subscriber may receive the same message several times.  And the sender will make repeated attempts to send until he receives confirmation of the successful delivery of the message. <br><br></li><li>  QoS 2. This level of quality of service corresponds to the slowest procedure for delivering messages, but at the same time it is the most reliable.  Its main feature is the implementation of the ‚Äúsingle message delivery‚Äù strategy.  When using it, a four-step procedure for confirming message delivery is used. <br></li></ul><br>  The choice of a specific level of quality of service depends on the characteristics of the transmitted data and on how important it is that they are delivered. <br><br><h2>  <font color="#0071c5">Intel MQTT Brokers and Gateways for the Internet of Things</font> </h2><br>  The growing popularity of MQTT as an important element in the construction of IoT projects has led to the fact that many open source MQTT implementations have been created, it is used in a variety of hardware developments.  <a href="https://software.intel.com/ru-ru/iot/hardware/gateways">Intel's Internet Gateway</a> is one of the industry-leading advanced solutions that MQTT supports. <br><br>  This product family allows you to establish secure connections between sensors, IoT devices, and cloud services.  Gateways are thoroughly tested and are ready to install on them the software necessary for the operation of a specific project.  They are distinguished by excellent handling, high security and a wide range of supported methods of communication with the outside world.  Among these methods, in addition to traditional wired Ethernet and wireless Wi-Fi, you can find ZigBee, support for cellular networks, and USB, and, of course, MQTT and Modbus. <br><br>  If we talk about network capabilities, then there are three options for Intel Internet gateways of things, they have different configurations of input / output subsystems.  This division is based on market needs.  Among such needs, which can be taken into account both individually and in combinations, are the creation of stationary industrial-class solutions, economical energy consumption, the development of solutions for mobile objects.  But even with different characteristics, all gateways support management and configuration functions, ensure the security of data transmission and storage, and provide an environment for the execution of applications.  At the same time, the standard OS of gateways is a secure and stable Wind River Linux. <br><br>  A very important advantage of Intel Gateways for the Internet of Things is its support for McAfee Embedded Control security technologies.  In particular, thanks to these technologies, it becomes possible to track changes in the state of a device based on the security policy.  Such a monitoring of the state of the device, tracking of all events occurring with it, allows you to organize a completely transparent, continuously operating audit system, reports of which can be trusted. <br><br><h2>  <font color="#0071c5">Conclusion</font> </h2><br>  MQTT and Modbus are very different technologies, but together they help build robust IoT solutions.  Modbus is used as a local interface for interacting with devices, the role of MQTT is the organization of global connections between system components.  Each of them plays an important role.  At the same time, Intel Gateways for the Internet of Things support both of these protocols, in addition to other communications and technologies that ensure the stability and security of projects.  With the help of such gateways, you can quickly create reliable modern <a href="http://iotsolutionsalliance.intel.com/solutions-directory/intel_technologies/947">IoT solutions</a> that will remain relevant in the future. </div><p>Source: <a href="https://habr.com/ru/post/304228/">https://habr.com/ru/post/304228/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../304214/index.html">How the principal component method (PCA) works with a simple example</a></li>
<li><a href="../304218/index.html">Harvard CS50 course in Russian: second lecture appeared</a></li>
<li><a href="../304220/index.html">Building a chain of trust in PKI, is it all so simple</a></li>
<li><a href="../304222/index.html">Organization of access to the Moscow metro WI-FI network from a security point of view</a></li>
<li><a href="../304226/index.html">How to become a specialist in the field of "big data"?</a></li>
<li><a href="../304230/index.html">Game of Thrones. Search for dialog authors in books</a></li>
<li><a href="../304232/index.html">How does a little bird find a golden ‚Äúcage‚Äù? Advice to freelancers in finding employment in the office</a></li>
<li><a href="../304234/index.html">In the wake of WWDC 2016. Practical Guide</a></li>
<li><a href="../304236/index.html">Azure Service Fabric: Second Steps</a></li>
<li><a href="../304238/index.html">Decide in your mind: What you need to know when starting a business in e-commerce</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Retrieving deleted data in iOS. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a continuation of the article , which is the author's translation of Chapter 6 Retrieving remote data from the book iOS7 in Action . 

 Advanc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Retrieving deleted data in iOS. Part 2</h1><div class="post__text post__text-html js-mediator-article">  <i>This is a continuation of the <a href="http://habrahabr.ru/post/270049/">article</a> , which is the author's translation of Chapter 6 <b>Retrieving remote data</b> from the book <a href="https://www.manning.com/books/ios-7-in-action">iOS7 in Action</a> .</i> <br><br><h4>  Advanced HTTP requests </h4><br>  So far we have only used the GET method, but other methods are available: <br><ul><li>  POST </li><li>  PUT </li><li>  DELETE </li><li>  OPTIONS </li><li>  HEAD </li><li>  TRACE </li><li>  CONNECT </li></ul><br>  We will focus on the two most popular methods: GET and POST. <br><br>  GET is the simplest HTTP request method, and it is the browser that uses it to load web pages.  It is used to request content located at a specific URL.  The content may be, for example, a web page, a drawing or an audio file.  By convention, GET requests are read only and, in accordance with the W3C standard, should not be used in operations that change the server side.  For example, we will not use a GET request to send a form or send a photo, because these operations require some changes on the server side (we will use POST in these cases). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      POST sends data for further processing to the URL.  Parameters are included in the body of the request, using the same format as GET.  For example, if we want to post a form that contains two fields, a name and an age, then we will send something similar to name = Martin &amp; age = 29 in the request body. <br><br>  This method of sending parameters is widely used in web pages.  The most popular cases are forms.  When we fill out the form on the site and click Submit, most likely the request will be POST. <br><a name="habracut"></a><br>  Let's go back to our application and use some of the knowledge gained.  Namely, let's use POST for rating jokes.  We will send votes (or +1 or -1) to a remote server. <br><br>  First we write the necessary interface.  Add two buttons for voting voteUp and voteDown, which respectively will raise or lower the rating of the current joke.  We will also add the ‚ÄúChuck Who?‚Äù Button, which we will fill with functionality in the section about web view.  In THSViewController + Interface.h we will add declarations of these methods. <br><br>  THSViewController + Interface.h <br><pre><code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"THSViewController.h"</span></span></span><span class="hljs-meta"> @interface THSViewController (Interface) - (void)addLabel; - (void)addButtonVoteUp; - (void)addButtonVoteDown; - (void)addButtonChuckWho; @end</span></span></code> </pre> <br><br>  In THSViewController + Interface.m we implement these methods. <br><br>  THSViewController + Interface.m <br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) addButtonVoteUp { <span class="hljs-built_in"><span class="hljs-built_in">UIButton</span></span> *voteUpButton = [<span class="hljs-built_in"><span class="hljs-built_in">UIButton</span></span> buttonWithType:<span class="hljs-built_in"><span class="hljs-built_in">UIButtonTypeSystem</span></span>]; [voteUpButton setTitle:<span class="hljs-string"><span class="hljs-string">@"Vote Up"</span></span> forState:<span class="hljs-built_in"><span class="hljs-built_in">UIControlStateNormal</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">CGFloat</span></span> x = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view.frame.size.width / <span class="hljs-number"><span class="hljs-number">2.0</span></span> - <span class="hljs-number"><span class="hljs-number">50.0</span></span>f; <span class="hljs-built_in"><span class="hljs-built_in">CGFloat</span></span> y = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view.frame.size.height / <span class="hljs-number"><span class="hljs-number">2.0</span></span> + <span class="hljs-number"><span class="hljs-number">0.0</span></span>f; voteUpButton.frame = <span class="hljs-built_in"><span class="hljs-built_in">CGRectMake</span></span>(x, y, <span class="hljs-number"><span class="hljs-number">100.0</span></span>f, <span class="hljs-number"><span class="hljs-number">50.0</span></span>f); [voteUpButton addTarget:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> action:<span class="hljs-keyword"><span class="hljs-keyword">@selector</span></span>(voteUp) forControlEvents:<span class="hljs-built_in"><span class="hljs-built_in">UIControlEventTouchUpInside</span></span>]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view addSubview:voteUpButton]; } -(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) addButtonVoteDown { <span class="hljs-built_in"><span class="hljs-built_in">UIButton</span></span> *voteDownButton = [<span class="hljs-built_in"><span class="hljs-built_in">UIButton</span></span> buttonWithType:<span class="hljs-built_in"><span class="hljs-built_in">UIButtonTypeSystem</span></span>]; [voteDownButton setTitle:<span class="hljs-string"><span class="hljs-string">@"Vote Down"</span></span> forState:<span class="hljs-built_in"><span class="hljs-built_in">UIControlStateNormal</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">CGFloat</span></span> x = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view.frame.size.width / <span class="hljs-number"><span class="hljs-number">2.0</span></span> - <span class="hljs-number"><span class="hljs-number">50.0</span></span>f; <span class="hljs-built_in"><span class="hljs-built_in">CGFloat</span></span> y = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view.frame.size.height / <span class="hljs-number"><span class="hljs-number">2.0</span></span> + <span class="hljs-number"><span class="hljs-number">50.0</span></span>f; voteDownButton.frame = <span class="hljs-built_in"><span class="hljs-built_in">CGRectMake</span></span>(x, y, <span class="hljs-number"><span class="hljs-number">100.0</span></span>f, <span class="hljs-number"><span class="hljs-number">50.0</span></span>f); [voteDownButton addTarget:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> action:<span class="hljs-keyword"><span class="hljs-keyword">@selector</span></span>(voteDown) forControlEvents:<span class="hljs-built_in"><span class="hljs-built_in">UIControlEventTouchUpInside</span></span>]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view addSubview:voteDownButton]; } - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)addButtonChuckWho { <span class="hljs-built_in"><span class="hljs-built_in">UIButton</span></span> *chuckWhoButton = [<span class="hljs-built_in"><span class="hljs-built_in">UIButton</span></span> buttonWithType:<span class="hljs-built_in"><span class="hljs-built_in">UIButtonTypeSystem</span></span>]; [chuckWhoButton setTitle:<span class="hljs-string"><span class="hljs-string">@"Chuck Who?"</span></span> forState:<span class="hljs-built_in"><span class="hljs-built_in">UIControlStateNormal</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">CGFloat</span></span> x = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view.frame.size.width / <span class="hljs-number"><span class="hljs-number">2.0</span></span> - <span class="hljs-number"><span class="hljs-number">50.0</span></span>f; <span class="hljs-built_in"><span class="hljs-built_in">CGFloat</span></span> y = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view.frame.size.height / <span class="hljs-number"><span class="hljs-number">2.0</span></span> + <span class="hljs-number"><span class="hljs-number">150.0</span></span>f; chuckWhoButton.frame = <span class="hljs-built_in"><span class="hljs-built_in">CGRectMake</span></span>(x, y, <span class="hljs-number"><span class="hljs-number">100.0</span></span>f, <span class="hljs-number"><span class="hljs-number">50.0</span></span>f); [chuckWhoButton addTarget:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> action:<span class="hljs-keyword"><span class="hljs-keyword">@selector</span></span>(chuckWho) forControlEvents:<span class="hljs-built_in"><span class="hljs-built_in">UIControlEventTouchUpInside</span></span>]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view addSubview:chuckWhoButton]; }</code> </pre><br><br>  In THSViewController.h we add action declarations for these buttons.  voteUp for addButtonVoteUp, voteDown for addButtonVoteDown and chuckWho for addButtonChuckWho. <br><br>  THSViewController.h <br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><span class="hljs-meta"> @interface THSViewController : UIViewController @property (nonatomic, strong) UILabel *jokeLabel; - (void)voteUp; - (void)voteDown; - (void)chuckWho; @end</span></span></code> </pre><br><br>  In THSViewController.m add stubs of these methods. <br><br>  THSViewController.m <br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)voteUp { } - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)voteDown { } - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)chuckWho { }</code> </pre><br><br>  Finally, in the viewDidLoad method of THSViewController.m, we call methods that implement our interface. <br><br>  THSViewController.m <br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)viewDidLoad { [<span class="hljs-keyword"><span class="hljs-keyword">super</span></span> viewDidLoad]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> addLabel]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> addButtonVoteUp]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> addButtonVoteDown]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> addButtonChuckWho]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> retrieveRandomJokes]; }</code> </pre><br><br>  We start our application and see the interface as in Fig.  one <br><br><img src="https://habrastorage.org/files/83c/aa4/2fd/83caa42fdfcc4ee18765f7a431531472.png"><br>  <i>Pic.1 Interface of our application with added voting buttons</i> <i><br></i> <br>  Now we implement the necessary functionality. <br><br>  First, we implement the functionality for making POST requests in the class responsible for all our HTTP operations: THSHTTPCommunication class.  To do this, we will add a new postURL: params: successBlock method to THSHTTPCommunication.m, which is similar to the previous retrieveURL: successBlock method. <br><br>  THSHTTPCommunication.m <br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)postURL:(<span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *)url params:(<span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span> *)params successBlock:(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>(^)(<span class="hljs-built_in"><span class="hljs-built_in">NSData</span></span> *))successBlock { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.successBlock = successBlock; <span class="hljs-comment"><span class="hljs-comment">//      POST  NSMutableArray *paramsArray = [NSMutableArray arrayWithCapacity:[params count]]; //       key=value  for (NSString *key in params) { [paramsArray addObject:[NSString stringWithFormat:@"%@=%@", key, params[key]]]; } //    ,   ,   &amp; NSString *postBodyString = [paramsArray componentsJoinedByString:@"&amp;"]; //  NSString  NSData ,      NSData *postBodyData = [NSData dataWithBytes:[postBodyString UTF8String] length:[postBodyString length]]; NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url]; //     POST [request setHTTPMethod:@"POST"]; //  content-type  form encoded [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"]; //    POST    [request setHTTPBody:postBodyData]; NSURLSessionConfiguration *conf = [NSURLSessionConfiguration defaultSessionConfiguration]; NSURLSession *session = [NSURLSession sessionWithConfiguration:conf delegate:self delegateQueue:nil]; NSURLSessionDownloadTask *task = [session downloadTaskWithRequest:request]; [task resume]; }</span></span></code> </pre><br><br>  POST request data can be structured using different formats.  Parameters are usually formatted in accordance with the form-url-coding standards (in accordance with the W3C HTML standard).  This format is default and is widely used in many browsers.  Our method takes an NSDictionary as an argument, but we cannot send an NSDictionary over an HTTP connection, because it is an internal Objective-C type.  To send over an HTTP connection, we need to create a recognizable dictionary representation.  It is like communicating with a foreigner.  We translate our message into a universal language, and it translates from a universal language into its native language as shown in Fig.  2. The universal language in HTTP is the W3C standard, our language is Objective-C, the language of the recipient is unknown to us. <br><br>  The W3C standard defines rules that define what a recognizable representation means for each case.  In our case, we need to provide the parameters following the form-url-coded part of the standard (for example, param1 = var1¬∂m2 = var2). <br><br><img src="https://habrastorage.org/files/b58/130/366/b58130366b584b948a04a0ecf35e04c3.png"><br>  <i>Fig.2 Message Metaphor</i> <br><br>  Let's return to our method and see how you can translate all of the above into code.  First, we will create an array containing all the key-value pairs, which we then connect using &amp;.  The resulting string converted to an instance of the NSData class is what we send to the server responsible for storing the vote.  To perform a POST request using an instance of the NSURLRequest class, we will set the HTTPMethod to POST in the same way as the content-type. <br><br>  We need to make this method available in order to use it in the THSViewController class. <br><br>  THSHTTPCommunication.h <br><pre> <code class="objectivec hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">@interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">THSHTTPCommunication</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSObject</span></span></span><span class="hljs-class"> &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSURLSessionDownloadDelegate</span></span></span><span class="hljs-class">&gt; - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class">)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">retrieveURL</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSURL</span></span></span><span class="hljs-class"> *)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">url</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">successBlock</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class">(^)(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSData</span></span></span><span class="hljs-class"> *))</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">successBlock</span></span></span><span class="hljs-class">; - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class">)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">postURL</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSURL</span></span></span><span class="hljs-class"> *)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">url</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">params</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSDictionary</span></span></span><span class="hljs-class"> *)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">params</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">successBlock</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class">(^)(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSData</span></span></span><span class="hljs-class"> *))</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">successBlock</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre><br><br>  Now the THSHTTPCommunication class includes a method for performing a POST request, we need to call it from the main THSViewController.  It is time to implement the methods of raising or lowering the rating, as shown in the following listing. <br><br>  THSViewController.m <br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)voteUp { <span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *url = [<span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> URLWithString:<span class="hljs-string"><span class="hljs-string">@"http://example.com/rater/vote"</span></span>]; THSHTTPCommunication *http = [[THSHTTPCommunication alloc] init]; <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span> *params = @{<span class="hljs-string"><span class="hljs-string">@"joke_id"</span></span>:jokeID, <span class="hljs-string"><span class="hljs-string">@"vote"</span></span>:@(<span class="hljs-number"><span class="hljs-number">1</span></span>)}; [http postURL:url params:params successBlock:^(<span class="hljs-built_in"><span class="hljs-built_in">NSData</span></span> *response) { <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Voted Up"</span></span>); }]; } - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)voteDown { <span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *url = [<span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> URLWithString:<span class="hljs-string"><span class="hljs-string">@"http://example.com/rater/vote"</span></span>]; THSHTTPCommunication *http = [[THSHTTPCommunication alloc] init]; <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span> *params = @{<span class="hljs-string"><span class="hljs-string">@"joke_id"</span></span>:jokeID, <span class="hljs-string"><span class="hljs-string">@"vote"</span></span>:@(<span class="hljs-number"><span class="hljs-number">-1</span></span>)}; [http postURL:url params:params successBlock:^(<span class="hljs-built_in"><span class="hljs-built_in">NSData</span></span> *response) { <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Voted Down"</span></span>); }]; }</code> </pre><br><br>  Create an NSURL object with a url, which will be used in the request.  Create a THSHTTPCommunication object.  We define the parameters for the request.  Make a POST request and set the successBlock callback. <br><br>  These functions are very similar to each other.  First, we define the full URL that we will use for the request, and then create an instance of the THSHTTPCommunication class.  We did the same thing before the GET request.  Now we create an NSDictionary for storing parameters.  We translate these parameters into the previously studied format (for example, joke_id = &amp; vote = 1) in order to be able to include them in the POST request.  As we saw earlier, the method responsible for this transformation is postURL: params: successBlock from an instance of the THSHTTPCommunication class.  And make the request by calling this method. <br><br>  We launch our application and check that when voting for a joke or against it, the console displays messages: <br><br> <code>2015-11-08 14:51:20.724 Test[1248:80442] Voted Up <br></code> <br><br>  or <br><br> <code>2015-11-08 14:51:57.896 Test[1273:81833] Voted Down <br></code> <br><br>  indicating a successful POST request to the server. <br><br>  We wrote an application to get jokes using the icndb API and the HTTP verb GET.  We were able to show these jokes on UIView and every joke can be appreciated.  These actions send a POST request to the remote server, which should save our evaluation. <br><br><h4>  Using web views to display remote pages </h4><br>  We learned to make requests to a remote server.  This is what browsers do before displaying a web page.  The only difference is in the content of the answer.  Web pages are formatted using the HTML standard, which defines a set of rules on how to graphically define various markup tags.  These rules seem simple, but displaying the whole page, following the W3C standard is a complex task.  Fortunately, iOS has a built-in UIWebView component that uses the well-known WebKit engine and interprets HTML / CSS / JavaScript and displays entire web pages within UIView. <br><br>  Let's return to our application.  We will add a webView to display the Wake page on Chuck Norris.  She gets tangled by pressing a button. <br><br>  First, create the THSWebViewController class, which is a subclass of UIViewController. <br><br>  THSWebViewController.h <br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><span class="hljs-meta"> @interface THSWebViewController : UIViewController @property (nonatomic, strong) UIWebView *webView; - (void)dismissView; //     - (void)back; //         - (void)forward; //   @end</span></span></code> </pre><br><br>  THSWebViewController.m <br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"THSWebViewController.h"</span></span></span><span class="hljs-meta"> #import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"THSWebViewController+Interface.h"</span></span></span><span class="hljs-meta"> @interface THSWebViewController () @end @implementation THSWebViewController - (void)viewDidLoad { [super viewDidLoad]; [self addWebView]; [self addNavBar]; [self addTabBar]; } - (void)dismissView { //  } - (void)back { //  } - (void)forward { //  } @end</span></span></code> </pre><br><br>  Create a category THSWebViewController + Interface, into which we brought the code to implement the web view interface: <br><br>  THSWebViewController + Interface.h <br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"THSWebViewController.h"</span></span></span><span class="hljs-meta"> @interface THSWebViewController (Interface) - (void)addWebView; - (void)addNavBar; - (void)addTabBar; @end</span></span></code> </pre><br><br>  THSWebViewController + Interface.m <br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"THSWebViewController+Interface.h"</span></span></span><span class="hljs-meta"> @implementation THSWebViewController (Interface) - (void)addWebView { self.webView = [[UIWebView alloc] initWithFrame:self.view.frame]; [self.view addSubview:self.webView]; } - (void)addNavBar { CGFloat width = self.view.frame.size.width; CGRect frame = CGRectMake(0.0f, 0.0f, width, 64.0f); UINavigationBar *navBar = [[UINavigationBar alloc] initWithFrame:frame]; self.navigationItem.title = @</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Chuck Norris"</span></span></span><span class="hljs-meta">; [navBar pushNavigationItem:self.navigationItem animated:NO]; self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Back"</span></span></span><span class="hljs-meta"> style:UIBarButtonItemStylePlain target:self action:@selector(dismissView)]; [self.view addSubview:navBar]; } - (void)addTabBar { CGFloat width = self.view.frame.size.width; CGRect frame = CGRectMake(0.0f, self.view.frame.size.height - 44.0f, width, 44.0f); UIToolbar *toolBar = [[UIToolbar alloc] initWithFrame:frame]; frame = CGRectMake(0.0f, 0.0f, 50.0f, 30.0f); UIBarButtonItem *backBtn = [[UIBarButtonItem alloc] initWithTitle:@</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;"</span></span></span><span class="hljs-meta"> style:UIBarButtonItemStylePlain target:self action:@selector(back)]; UIBarButtonItem *forwardBtn = [[UIBarButtonItem alloc] initWithTitle:@</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&gt;"</span></span></span><span class="hljs-meta"> style:UIBarButtonItemStylePlain target:self action:@selector(forward)]; [toolBar setItems:@[backBtn, forwardBtn]]; [self.view addSubview:toolBar]; } @end</span></span></code> </pre><br><br>  Now in THSViewController.m we add the implementation of the chuckWho method, the declaration of which we made earlier.  Do not forget to also import the THSWebViewController.h file. <br><br>  THSViewController.m <br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"THSViewController.h"</span></span></span><span class="hljs-meta"> #import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"THSViewController+Interface.h"</span></span></span><span class="hljs-meta"> #import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"THSHTTPCommunication.h"</span></span></span><span class="hljs-meta"> #import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"THSWebViewController.h"</span></span></span><span class="hljs-meta"> ‚Ä¶ - (void)chuckWho { THSWebViewController *webViewController = [[THSWebViewController alloc] init]; [self presentViewController:webViewController animated:YES completion:nil]; }</span></span></code> </pre><br><br>  Now, when clicking on the Chuck Who button, we see an empty web view as in Fig.3. <br><br><img src="https://habrastorage.org/files/de6/715/502/de67155022124434bce654e3e2914031.png"><br>  <i>Fig.3.</i>  <i>Empty web view in modal window</i> <br><br>  We fill it with functionality.  To do this, add the following code to the viewDidLoad class THSWebViewController. <br><br>  THSWebViewController.m <br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)viewDidLoad { [<span class="hljs-keyword"><span class="hljs-keyword">super</span></span> viewDidLoad]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> addWebView]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> addNavBar]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> addTabBar]; <span class="hljs-comment"><span class="hljs-comment">//   NSURLRequest  URL       NSURLRequest *request = [NSURLRequest requestWithURL: [NSURL URLWithString:@"http://en.wikipedia.org/wiki/Chuck_Norris"]]; //       webView [self.webView loadRequest:request]; }</span></span></code> </pre><br><br>  As before, we created an NSURLRequest object, but instead of sending a request using NSURLSession, we use the loadRequest method of the UIWebView class, which does all the work for us. <br><br>  Finally, it remains to implement the functional methods dismissView, back and forward. <br><br>  THSWebViewController.m <br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)dismissView { <span class="hljs-comment"><span class="hljs-comment">//  webView  ,    close [self dismissViewControllerAnimated:YES completion:nil]; } - (void)back { //     ,    back [self.webView goBack]; } - (void)forward { //     ,    forward [self.webView goForward]; }</span></span></code> </pre><br><br>  Now that everything is complete, it is important to know a few more things about UIWebView. <br><br>  There are several cases where you want to control the flow of navigation.  For example, you want to know when certain content or a specific URL is loaded. <br><br>  Or maybe you are implementing a safe browser for children, you want to block the user from loading pages that fall under certain criteria, like sex or drugs.  For all these types of customization, you create an instance of a class that implements the UIWebViewDelegate protocol as a delegate to the UIWebView.  You can implement the following methods: <br> <code>webView:shouldStartLoadWithRequest:navigationType: <br> webViewDidStartLoad: <br> webViewDidFinishLoad: <br> webView:didFailLoadWithError: <br></code> <br><br>  With the first method, you can control the flow of navigation by allowing or blocking specific requests.  The other three methods are informational events (method names will give you a good idea of ‚Äã‚Äãthe event). <br><br>  That's all!  Fig.  4 demonstrates how the web view should look like in your application. <br><br><img src="https://habrastorage.org/files/cad/a6d/1af/cada6d1af192483ebd103c96f0e09464.png"><br>  <i>Fig.</i>  <i>4. The final view of our web view</i> </div><p>Source: <a href="https://habr.com/ru/post/270429/">https://habr.com/ru/post/270429/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../270415/index.html">Solving the problem of storing music for Internet radio</a></li>
<li><a href="../270417/index.html">PyNSK # 4 - the fourth meeting of the Novosibirsk Python community</a></li>
<li><a href="../270421/index.html">Thinstation Server Overview</a></li>
<li><a href="../270423/index.html">RuTracker can be blocked for users from the Russian Federation, as in the Netherlands are struggling with similar problems?</a></li>
<li><a href="../270425/index.html">Universal toCamelCase () function for Java</a></li>
<li><a href="../270433/index.html">The system of counting visitors to the store: as Google Analytics, only on infrared sensors - and tricky statistics that you can not see</a></li>
<li><a href="../270435/index.html">Forcing open_basedir + realpath_cache to work together</a></li>
<li><a href="../270437/index.html">(Archive) Matreshka.js - Three possibilities</a></li>
<li><a href="../270439/index.html">Linux containers: when containers gets bigger</a></li>
<li><a href="../270441/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ184 (November 2 - 8, 2015)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
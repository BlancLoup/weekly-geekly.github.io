<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using the KOMPAS-3D API ‚Üí Lesson 16 ‚Üí Control Characters</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue the series of articles on working with the CAD API KOMPAS-3D. Control characters have already met several times in previous lessons of the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using the KOMPAS-3D API ‚Üí Lesson 16 ‚Üí Control Characters</h1><div class="post__text post__text-html js-mediator-article">  We continue the series of articles on working with the CAD API KOMPAS-3D.  Control characters have already met several times in previous lessons of the cycle.  Then each time it was said that the output lines should not contain them, since COMPASS processes them in a special way.  Now it's time to get to know them better. <br><br>  Having mastered working with them, you will understand that the creation of complex compound lines is a trivial task, which in most cases does not require writing a large amount of code. <br><br>  In the lesson we will look at how to use special characters and font characters using control characters, talk about how to create fractions and deviations with their help, and also consider their use in conjunction with paragraphs. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/5c/cs/bd/5ccsbdc8ufpd1vavz6hzfbqasas.png"><br><a name="habracut"></a><br><blockquote><h4>  Content of the cycle of lessons ‚ÄúWorking with the KOMPAS-3D API‚Äù </h4><br><ol><li>  <a href="https://habrahabr.ru/company/ascon/blog/328088/">The basics</a> </li><li>  <a href="https://habrahabr.ru/company/ascon/blog/330588/">Drawing design</a> </li><li>  <a href="https://habrahabr.ru/company/ascon/blog/332554/">Correct connection to COMPAS</a> </li><li>  <a href="https://habrahabr.ru/company/ascon/blog/337288/">Title block</a> </li><li>  <a href="https://habrahabr.ru/company/ascon/blog/342030/">Graphic primitives</a> </li><li>  <a href="https://habrahabr.ru/company/ascon/blog/346772/">Save the document in various formats</a> </li><li>  <a href="https://habrahabr.ru/company/ascon/blog/350512/">Getting to know the settings</a> </li><li>  <a href="https://habr.com/company/ascon/blog/350516/">More sophisticated writing methods</a> </li><li>  <a href="https://habr.com/company/ascon/blog/359232/">Reading the caption cells</a> </li><li>  <a href="https://habr.com/company/ascon/blog/414701/">Special characters including string</a> </li><li>  <a href="https://habr.com/company/ascon/blog/417723/">Simple text lettering</a> </li><li>  <a href="https://habr.com/company/ascon/blog/424509/">Compound strings</a> </li><li>  <a href="https://habr.com/company/ascon/blog/434336/">Paragraphs</a> </li><li>  <a href="https://habr.com/ru/company/ascon/blog/434576/">Multiline text</a> </li><li>  <a href="https://habr.com/ru/company/ascon/blog/449706/">Paragraph-based compound lines</a> </li><li>  <b>Control characters</b> </li></ol></blockquote><br><h2>  <font color="#00B2FF">Quick review</font> </h2><br>  The control characters are @, $, &amp;,;, ~, ^ and #.  Unfortunately in the KOMPAS SDK there is very little information on how to use them.  More detailed information is given in the KOMPAS help, in the section <i>‚Äú9.</i>  <i>KOMPAS-3D settings / Storing system settings / Service files / Custom menu file / File syntax "</i> . <br><br><img src="https://habrastorage.org/webt/ya/jc/cx/yajccx87d-06xfzy5rjhfdlc2wa.png"><br><br>  All control characters can be divided into two groups: basic and auxiliary.  Auxiliary characters are used only in conjunction with the main and, by themselves, do not describe any component.  The table below provides a brief description of the control characters. <br><br><img src="https://habrastorage.org/webt/bg/tj/ap/bgtjapszut_xvfq_u2vq0l3rak4.png"><br><br>  Consider them in more detail. <br><br><h2>  <font color="#00B2FF">Insert Special Characters</font> </h2><br>  We have already considered special characters (see lessons <a href="https://habr.com/ru/company/ascon/blog/337288/">4</a> and <a href="https://habr.com/ru/company/ascon/blog/414701/">10</a> ).  Then a separate copy of the <b>ksTextItemParam</b> interface was used to insert one special character.  With the help of control characters, you can insert as many special characters into the string as you see fit without repeatedly using the <b>ksTextItemParam</b> interface. <br>  The syntax for inserting special characters is: <br><br>  <i><b>AA</b> @ <b>YXXXX</b> ~ <b>BB</b></i> <br><br>  Where <br>  <b>AA</b> - a string to be placed before the special character, <br>  <b>Y</b> - modifier of the special character code representation, <br>  <b>XXXX</b> is the code of the special character to be inserted. <br>  <b>BB</b> is a string that appears after the special character. <br><br>  The code of the inserted special character is specified between <i>@</i> and <i>~</i> .  In this case, depending on the value of the <b>Y</b> modifier, it can be specified in decimal or hexadecimal notation.  Valid values ‚Äã‚Äãfor the <b>Y</b> modifier are shown in the table below. <br><br><img src="https://habrastorage.org/webt/pk/td/jq/pktdjqgmgj8ftldxtei4-614ct0.png"><br><br>  <i>Note:</i> as shown by my experiments, KOMPAS normally handles the absence of the <i>~</i> character.  In this special characters are inserted as needed.  However, I highly recommend not to rely on this behavior and always complete the insert operation with the <i>~</i> character. <br><br>  Below is an example of a program that demonstrates the output of special characters. <br><br><pre><code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" @+51~ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str); str = SysAllocString(OLESTR(" @*33~ ")); document2D-&gt;ksText(100.0,90.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre> <br>  In this example, the same character (Œ± alpha) is displayed twice.  The first time its code is set in decimal notation, the second time - in hexadecimal.  The figure below shows the result of the program. <br><br><img src="https://habrastorage.org/webt/o3/4b/3i/o34b3igkqgkvdrmze1ky6w4a1es.png"><br><br>  Control characters allow you to display several special characters in one line.  Thus, the following example demonstrates the output of the first three letters of the Greek alphabet in one call to the <b>ksText</b> method. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR("@+51~ @+52~ @+53~")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  The figure below shows the result of this program. <br><br><img src="https://habrastorage.org/webt/mg/_v/xv/mg_vxv17mpco689p7gm6fzhp-ms.png"><br><br>  Modifier + is the default modifier.  Therefore, the above line can be written as: <br><br>  <i>‚Äú@ 51 ~ @ 52 ~ @ 53 ~‚Äù</i> <br><br>  The result of the program will remain the same. <br><br>  If there is an invalid character after <i>@</i> , then the line between <i>@</i> and <i>~</i> is output as is.  At the same time, the characters <i>@</i> and <i>~ are</i> omitted.  For example, with the line: <br><br>  <i>‚ÄúBefore @ T51 ~ After‚Äù</i> <br><br>  The document will display: <br><br>  <i>To T51 After</i> <br><br>  <i>Note:</i> this behavior of KOMPAS is undocumented and may vary in different versions of the program. <br><br>  <i>Note:</i> control characters are not suitable for inserting special characters containing a string.  The fact is that to limit their actions, you need to use the SPECIAL_SYMBOL_END flag (for more details, see the <a href="https://habr.com/ru/company/ascon/blog/414701/">10th</a> cycle <a href="https://habr.com/ru/company/ascon/blog/414701/">lesson</a> ), but the control characters do not allow the use of flags. <br><br><h2>  <font color="#00B2FF">Insert font characters</font> </h2><br>  In addition to special characters, you can insert ordinary characters by their code.  Control characters <i>^</i> and <i>~</i> are used for this.  Their syntax is below. <br><br>  <i><b>AA</b> ^ ( <b>FNAME</b> ) <b>YXXXX</b> ~ <b>BB</b></i> <br><br>  Where <br>  <b>AA</b> - a line before the inserted character, <br>  <b>FNAME</b> - the name of the font from which the character is taken, <br>  <b>Y</b> - the modifier of the representation of the character code (similar to @), <br>  <b>XXXX</b> is the numeric code of the character being inserted, <br>  <b>BB</b> is a string after the inserted character. <br><br>  According to its purpose, the control character <i>^</i> is similar to <i>@</i> .  They even have a similar syntax.  But between them there are two important differences: <br><br><ol><li>  <i>^</i> inserts not a special character, but a font character by its code; </li><li>  for the character to be inserted, you can specify the font in the <b>FNAME</b> field (@ this does not allow). </li></ol><br>  Character codes can be viewed using the charmap application (Character Map) included with the Windows operating system. <br><br>  If the font is not specified, the default font is used.  The following is an example of using the symbol <i>^</i> . <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" ^(Arial)*B1~  ^*39~ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  In this example, two characters are inserted into the resulting string, for the first one we select the <i>Arial</i> font, for the second we leave the default font.  The figure below shows the line that is displayed in the document. <br><br><img src="https://habrastorage.org/webt/lj/8i/5k/lj8i5kqw_acqwuvq0lulgnmgolw.png"><br><br>  Note: the font is set only for the displayed character.  As my experiments show, KOMPAS normally handles the absence of the trailer <i>~</i> .  However, I do not recommend relying on this behavior and always putting a trailer. <br><br>  If after <i>^ an</i> invalid character is specified (or an invalid code), then <i>^</i> and <i>~ are</i> omitted, and the line between them is displayed as is with the use of the default font.  For example, with the line <br><br>  <i>‚ÄúBefore ^ Q (Arial) * B1 ~ After‚Äù</i> <br><br>  The document will display: <br><br>  <i>‚ÄúBefore Q (Arial) * B1 After‚Äù</i> <br><br>  If an incorrect font name is specified in the <b>FNAME</b> field, KOMPAS will select the font and output the character in it. <br><br>  If the line does not have a closing parenthesis, then such a line will not be completely displayed.  For example, with the line: <br><br>  <i>‚ÄúBefore ^ Q (Arial * B1 ~ After‚Äù</i> <br><br>  Only document will be displayed in the document. <br><br>  <i>"Before "</i> <br><br>  <i>Note:</i> the above behavior with incorrect syntax of control characters is valid for KOMPAS-3D V17 and is not documented.  In other versions it may differ. <br><br><h2>  <font color="#00B2FF">Additional ways to insert characters</font> </h2><br>  The symbols <i>@</i> and <i>^</i> have analogues - <i>&amp;</i> and <i>#,</i> respectively.  They have a similar syntax: <br><br>  <i><b>AA</b> &amp; <b>XX</b> ~ <b>BB</b></i> <i><br></i>  <i><b>AA</b> # ( <b>FNAME</b> ) <b>XX</b> ~ <b>BB</b></i> <br><br>  Where <br><br>  <b>AA</b> - the line output before the inserted character <br>  <b>XX</b> - code of the symbol to be inserted (for &amp; - special character, for # - font character), <br>  <b>BB</b> - the line output after the inserted character <br>  <b>FNAME</b> - font name. <br><br>  There are only two differences between the characters <i>@</i> and <i>^</i> , and their analogues: <br><br><ol><li>  There is no Y modifier in the &amp; and # characters. The character code is always in decimal notation. </li><li>  The code of the character to be inserted is given in up to two digits. </li></ol><br>  The following is the source code of a program that demonstrates working with <i>&amp;</i> and <i>#</i> characters. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" &amp;51~ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str); str = SysAllocString(OLESTR(" #(Arial)37~  #37~ ")); document2D-&gt;ksText(100.0,90.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  The figure below shows the result of this program. <br><br><img src="https://habrastorage.org/webt/xq/ku/tw/xqkutwd7x225k5zx8dd-lsriorg.png"><br><br><h2>  <font color="#00B2FF">Multiline text</font> </h2><br>  With the help of control characters you can display multi-line text.  To do this, in the place of transfer to a new line you need to insert the sequence: <i>@ /</i> .  Note: the <i>@</i> symbol is used without a trailer <i>~</i> .  Below is the source code of a program that demonstrates the output of multi-line text using control characters. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" @/ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  Note: thanks to the use of control characters, we output two-line text with just one call to the <b>ksText</b> method.  The figure below shows the result of this program. <br><br><img src="https://habrastorage.org/webt/tp/-3/fm/tp-3fmwgsjpyrgrhhw9icccok70.png"><br><br><h2>  <font color="#00B2FF">Inserting Control Characters</font> </h2><br>  We figured out how to insert arbitrary special characters and Unicode characters.  But what if you want to insert the control character itself?  Here you can go two ways.  The first way is to use the <i>^</i> character and insert them as normal font characters.  But there is a simpler way. <br><br>  Symbol <i>;</i>  is auxiliary and can be inserted directly into the text.  To insert other control characters, you need to duplicate them.  That is, a pair of <i>@@</i> characters inserts one <i>@</i> character into the text.  The same is true for other control characters. <br><br>  The following is an example of a program that demonstrates inserting control characters into a string. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" : @@ $$ &amp;&amp; ; ~~ ^^ ##")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  The figure below shows the result of this program. <br><br><img src="https://habrastorage.org/webt/4t/jv/rx/4tjvrxux7i2epcfivimh8aai-2g.png"><br><br><h2>  <font color="#00B2FF">Upper and lower deviations</font> </h2><br>  The following syntax is used to insert deviations: <br><br>  <i><b>AA</b> $ <b>XX</b> ;</i>  <i><b>YY</b> $ <b>BB</b></i> <br><br>  Where <br><br>  <b>AA</b> - text output before deviations; <br>  <b>XX</b> - upper deviation; <br>  <b>YY</b> - lower deviation; <br>  <b>BB</b> - text output after deviations. <br><br>  Please note: the whole structure is limited to <i>$</i> characters, and the symbol ‚Äú <i>;</i>  ¬ªServes as a separator between upper and lower deviations. <br><br>  If there is no separator between <i>$</i> characters " <i>;</i>  ", Then the entire line between them is interpreted as an upper deviation.  If component <b>XX is</b> missing, that is, after the first <i>$</i> immediately goes " <i>;</i>  ", Then the entire subsequent line to the nearest <i>$ is</i> interpreted as the lower deviation. <br><br>  <i>Note: the</i> text of the upper deviation should not begin with the letters <i>b</i> , <i>d</i> , <i>s</i> , <i>m</i> and <i>l</i> (lowercase <i>L</i> ).  The reason for this will be explained later. <br><br>  Below is an example of a program that demonstrates the output of text with deviations. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" $;$ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  The figure below shows the result of this program: <br><br><img src="https://habrastorage.org/webt/-w/hr/ql/-whrqlu38elpopxgq22zblob6tm.png"><br><br>  Note, KOMPAS processes only one character ‚Äú <i>;</i>  ".  The second character is " <i>;</i>  "Can be interpreted as the finalizer of the whole structure.  For example, with the line " <i>11 $ 22; 33; 44 $</i> " the following will be displayed: <br><br><img src="https://habrastorage.org/webt/pf/22/0i/pf220i_rer29nw_nsx2h88ja_le.png"><br><br>  <i>Note:</i> this behavior of KOMPAS is not documented, therefore it is impossible to rely on it. <br><br><h2>  <font color="#00B2FF">Fraction</font> </h2><br>  The fraction syntax is similar to the deviation syntax and has two equivalent options: <br><br>  <i><b>AA</b> $ <b>bXX</b> ;</i>  <i><b>YY</b> $ <b>BB</b></i> <i><br></i>  <i><b>AA</b> $ <b>dXX</b> ;</i>  <i><b>YY</b> $ <b>BB</b></i> <br><br>  Where <br><br>  <b>AA</b> - text displayed before the fraction; <br>  <b>XX</b> - numerator; <br>  <b>YY</b> is the denominator; <br>  <b>BB</b> - text displayed after the fraction. <br><br>  Note: the only thing that distinguishes a fraction from the output of deviations is the presence of the letter <i>d</i> or <i>b</i> immediately after the first <i>$</i> sign.  In all other respects, their syntaxes are identical. <br><br>  If between the characters <i>$ d</i> ( <i>$ b</i> ) and <i>$</i> there is no symbol ‚Äú <i>;</i>  "Then the entire line between them will be interpreted as a numerator.  If component <b>XX is</b> missing, that is, after <i>$ d</i> ( <i>$ b</i> ) immediately goes " <i>;</i>  ", Then the entire subsequent line to the nearest <i>$ is</i> interpreted as a denominator. <br><br>  <i>Note:</i> the numerator text must not begin with the letters <i>s</i> , <i>m</i> or <i>l</i> (lowercase <i>L</i> ).  The reason for this will be explained later. <br><br>  Below is an example of a program that demonstrates the output of fractions using control characters. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" $d;$ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  The figure below shows the result of this program. <br><br><img src="https://habrastorage.org/webt/ha/sm/dd/hasmddwd9o67w8t747vhwceoae0.png"><br><br>  Note that KOMPAS handles ‚Äúextra‚Äù characters ‚Äú <i>;</i>  ¬ªAs in the case of deviations.  This behavior is undocumented and cannot be relied upon. <br><br><h2>  <font color="#00B2FF">Manage the size of deviations and fractions</font> </h2><br>  At the very beginning of the construction of the construction of deviations or fractions can be one of the letters: <i>s</i> , <i>m</i> or <i>l</i> (lowercase <i>L</i> ).  They set the size of the deviations and elements of the fraction (numerator and denominator).  Their purpose is described in the table below. <br><br><img src="https://habrastorage.org/webt/mp/ez/1u/mpez1un_2njdu3jxixivvwqbdz4.png"><br><br>  If none of these letters is specified, then <i>l is</i> used for a fraction, and <i>m is</i> used for deviations.  Below is an example of a program that demonstrates the use of these letters. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR(" $d;$ ")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str); str = SysAllocString(OLESTR(" $dl;$ ")); document2D-&gt;ksText(100.0,85.0,0.0,0.0,0.0,0,str); SysFreeString(str); str = SysAllocString(OLESTR(" $dm;$ ")); document2D-&gt;ksText(100.0,70.0,0.0,0.0,0.0,0,str); SysFreeString(str); str = SysAllocString(OLESTR(" $ds;$ ")); document2D-&gt;ksText(100.0,60.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  The figure below shows the result of this program. <br><br><img src="https://habrastorage.org/webt/z2/2_/dj/z22_djahn5b1uiugptca_0doqui.png"><br><br>  Although in this example, the letters <i>s</i> , <i>m,</i> and <i>l</i> are used for a fraction, their use for deviations is no different. <br><br>  Note that if between the beginning of a fraction or a deviation ( <i>$</i> , <i>$ d</i> or <i>$ b</i> ) and the letter <i>s</i> , <i>m</i> or <i>l</i> there is at least one ‚Äúextraneous‚Äù character (for example, a space), then COMPASS will not ‚Äúsee‚Äù the letters and the fraction or the deviation will have a default size. <br><br><h2>  <font color="#00B2FF">Nested control characters</font> </h2><br>  When displaying fractions and deviations, the lines in their composition are processed recursively.  This means that when forming the numerator and denominator, control characters can also be used.  This approach is demonstrated in the following example. <br><br><pre> <code class="plaintext hljs">BSTR str = SysAllocString(OLESTR("@54~$s2$ + $d@+51~;@+52~$ - ^(Symbol)*70~")); document2D-&gt;ksText(100.0,100.0,0.0,0.0,0.0,0,str); SysFreeString(str);</code> </pre><br>  The figure below shows the result of this program. <br><br><img src="https://habrastorage.org/webt/qq/f_/9a/qqf_9au_d7ijxvxhvopiuzlhpbk.png"><br><br>  To insert the letters of the Greek alphabet, we use the control characters @ and ^ (for the letter pi).  The degree in the first addendum is derived from the deviations.  It is output by the substring <i>$ s2 $</i> .  The letter <i>s</i> indicates a small deviation size, and due to the absence of a separator ‚Äú <i>;</i>  ¬ªOnly upper deviation is displayed. <br><br>  To form a fraction, the combination <i>$ d; $ is used</i> .  Moreover, the numerator and denominator include control characters that provide the output of letters of the Greek alphabet. <br><br>  The last subtracted (œÄ pi) is displayed as a symbol of the Symbol font using the control characters <i>^</i> and <i>~</i> . <br><br>  Unfortunately, the possibilities of such a ‚Äúrecursion‚Äù are severely limited.  We can not fraction and deviations to invest in each other.  The problem is that they are both formed using the <i>$</i> control character.  Because of this, KOMPAS cannot correctly make out which <i>$</i> element belongs to. <br><br><h2>  <font color="#00B2FF">Paragraph control characters</font> </h2><br>  Partially bypassing the constraint with embedded control characters is possible with the help of paragraphs.  Sharing control characters and paragraphs allows you to build even more complex structures.  The example below demonstrates the construction of a 4-level fraction. <br><br><div class="spoiler">  <b class="spoiler_title">Program code for building a 4-level fraction</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">//   DynamicArrayPtr dynamicArray; dynamicArray = static_cast&lt;DynamicArrayPtr&gt;(kompas-&gt;GetDynamicArray(TEXT_ITEM_ARR)); dynamicArray-&gt;ksClearArray(); TextItemParamPtr textItemParam; textItemParam = static_cast&lt;TextItemParamPtr&gt;(kompas-&gt;GetParamStruct(ko_TextItemParam)); //     BSTR str = SysAllocString(OLESTR("  ")); textItemParam-&gt;set_s(str); dynamicArray-&gt;ksAddArrayItem(-1, textItemParam); SysFreeString(str); //     TextItemFontPtr textItemFont; textItemFont = static_cast&lt;TextItemFontPtr&gt;(textItemParam-&gt;GetItemFont()); textItemFont-&gt;set_bitVector(NUMERATOR); str = SysAllocString(OLESTR("1 + $d@+51~;2$")); textItemParam-&gt;set_s(str); dynamicArray-&gt;ksAddArrayItem(-1, textItemParam); SysFreeString(str); //    textItemFont-&gt;set_bitVector(DENOMINATOR); str = SysAllocString(OLESTR("1 + $d@+56~;2$")); textItemParam-&gt;set_s(str); dynamicArray-&gt;ksAddArrayItem(-1, textItemParam); SysFreeString(str); //  textItemFont-&gt;set_bitVector(END_FRACTION); str = SysAllocString(OLESTR("  ")); textItemParam-&gt;set_s(str); dynamicArray-&gt;ksAddArrayItem(-1, textItemParam); SysFreeString(str); //   textItemFont.Unbind(); textItemParam.Unbind(); //    ksTextLineParam TextLineParamPtr textLineParam; textLineParam = static_cast&lt;TextLineParamPtr&gt;(kompas-&gt;GetParamStruct(ko_TextLineParam)); textLineParam-&gt;Init(); textLineParam-&gt;SetTextItemArr(dynamicArray); dynamicArray.Unbind(); //  ParagraphParamPtr paragraphParam; paragraphParam=static_cast&lt;ParagraphParamPtr&gt;(kompas-&gt;GetParamStruct(ko_ParagraphParam)); paragraphParam-&gt;Init(); paragraphParam-&gt;set_x(100.0); paragraphParam-&gt;set_y(100.0); document2D-&gt;ksParagraph(paragraphParam); document2D-&gt;ksTextLine(textLineParam); document2D-&gt;ksEndObj(); //   textLineParam.Unbind(); paragraphParam.Unbind();</code> </pre><br></div></div><br>  In this example, control characters are used to build fractions in the numerator and denominator of the main fraction, as well as to insert the letters of the Greek alphabet.  The figure below shows the result of this program. <br><br><img src="https://habrastorage.org/webt/ji/x6/lo/jix6loqqynqpondf3g47pvhopj0.png"><br><br><h2>  Conclusion </h2><br>  In this lesson, we met with control characters and learned how to draw special characters and font characters using them.  As you can see, they provide a simple syntax for creating strings that include special characters, fractions, deviations.  Unfortunately, they are poorly suited for inserting special characters containing strings.  But such special characters are extremely rare.  This is one of the limitations of control characters.  Also with their help it is impossible to create sublines and substrings, and there are limitations when working with special characters that include strings.  But this does not detract from their merits.  This concludes the consideration of control characters. <br><br>  <b>To be continued, stay tuned to the blog.</b> <br><br> <a href=""><img src="https://habrastorage.org/web/595/eee/f27/595eeef271b24830b3578751fcb52716.png"></a>  Sergey Norseev, Ph.D., author of the book ‚ÄúDevelopment of applications for COMPAS in Delphi‚Äù. </div><p>Source: <a href="https://habr.com/ru/post/457702/">https://habr.com/ru/post/457702/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../457692/index.html">Reflections on the national standard NB-Fi and billing systems</a></li>
<li><a href="../457696/index.html">Danger of using multi-character constants</a></li>
<li><a href="../457698/index.html">Experiment: use a proxy as a tool to combat DoS attacks</a></li>
<li><a href="../4577/index.html">Google strikes back. Personal search engine with Google CSE</a></li>
<li><a href="../457700/index.html">Node.js authentication guide without passport.js and third-party services</a></li>
<li><a href="../457704/index.html">How do GPUs handle branching</a></li>
<li><a href="../457706/index.html">Robot is testing SAP ERP</a></li>
<li><a href="../457710/index.html">The amazing capabilities of neural networks in 2019</a></li>
<li><a href="../457712/index.html">How Verizon and BGP Optimizer made a big offline</a></li>
<li><a href="../457718/index.html">HyperCard, the lost link in the evolution of the Web</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
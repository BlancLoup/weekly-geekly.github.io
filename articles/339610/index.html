<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Translation of two articles: ‚ÄúHow to commit changes to a Docker image‚Äù and ‚ÄúGuide for Moving Docker Containers‚Äù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="(Translator's note: to start Docker from under the current user, the following commands are needed: 
 sudo usermod -aG docker $ (whoami) 
 sudo usermo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Translation of two articles: ‚ÄúHow to commit changes to a Docker image‚Äù and ‚ÄúGuide for Moving Docker Containers‚Äù</h1><div class="post__text post__text-html js-mediator-article">  (Translator's note: to start Docker from under the current user, the following commands are needed: <br>  <i>sudo usermod -aG docker $ (whoami)</i> <i><br></i>  <i>sudo usermod -aG docker your_current_username</i> ) <br><br><h2>  <a href="http://www.techrepublic.com/article/how-to-commit-changes-to-a-docker-image/">How to commit changes to a Docker image</a> </h2><br>  <b>Jack Wallen, April 27, 2017</b> <br><br>  If you like to use docker images as templates for efficient container deployment, Jack Wallen will show you how to commit changes to a running container to create a new docker image. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/d90/622/9b8/d906229b86c9f4bc8ed69ce240d25730.jpg" alt="image" width="600"><br><a name="habracut"></a><br>  One way your company can handle docker containers is to create template images for use in your containers.  Let's say, for example, you use containers for development purposes and want to be sure that all secured containers start with the same basic toolbox.  You can pull the image, launch the container, modify it to suit your needs, and then start developing with this container, but you will have to repeat the same process every time you need to deploy this container. <br><br>  Or, you can make a pull of the image, run the container, modify it to meet the basic needs of your developers, and commit these changes to the new image.  Now, all your developers need is to launch a new container based on a modified image, and they can do it.  They do not need to modify the source image for this. <br><br>  If all this looks like a process that you want to implement, luck is on your side - it's really quite simple.  Let's say you need an image based on the latest version of nginx, with PHP, build-essential and nano installed.  I will guide you through the process of pulling an image, launching a container, connecting to it, adding software, and committing changes to a new image that can easily be used as a base for your containers. <br><br><h4>  Pull the image and launch the container </h4><br>  The first step is to pull the last nginx image.  This is accomplished with the command: <br><br>  <i>docker pull nginx</i> <br><br>  Once the image is loaded, we can launch it, so that we can use the terminal window like this: <br><br>  <i>docker run --name nginx-template-base -p 8080: 80 -e TERM = xterm -d nginx</i> <br><br>  I called it nginx-template-base, since this will be what our template will be based on. <br><br><h4>  Container connection and modification </h4><br>  Next we need to access the container.  When you run the docker run command, it will show you a long identifier.  Run the command: <br><br>  <i>docker exec -it CONTAINER_ID bash</i> <br><br>  Where CONTAINER_ID is the ID shown on the screen when you run the run command. <br><br>  After running this command, you will appear from the terminal of the running container.  Now let's add the necessary software to the template.  To do this, run the following commands. <br><br>  <i>apt-get install nano</i> <i><br></i>  <i>Apt-get install build-essential</i> <i><br></i>  <i>Apt-get install php5</i> <br><br>  Note: for the official image, nginx PHP 7 is not available for installation without adding a repository. <br><br><h4>  Exit the container and commit the changes. </h4><br>  Now, since we have modified the container, we need to commit the changes.  First, exit the container with the exit command.  To commit changes and create a new image based on the changes above, run the command: <br><br>  <i>docker commit CONTAINER_ID nginx-template</i> <br><br>  Where CONTAINER_ID is the ID given to you when you initially launched the container. <br><br>  If you run the docker images command, you will see a new container (Figure B): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ab5/efb/d61/ab5efbd613eb65de8a9391b3465b65e7.jpg" alt="image"><br>  <i>Illustration B. A freshly created pattern image ready for use.</i> <br><br>  At this point, you can prepare to launch a new container, using a new image, having all the modifications in place.  Remember.  when you launch a new container, the command will look something like this: <br><br>  <i>docker run --name nginx-dev -p 8080: 80 -e TERM = xterm -d nginx-template</i> <br><br>  If you enter this new container (using the docker exec command), you will see that everything is in place and ready to use. <br><br><h4>  Easy way to container templates </h4><br>  If you are looking for a way to make working with Docker containers a little more efficient, this is enough for you for a long time.  Once you create image templates, developing with Docker containers will become much easier. <br><br><h2>  <a href="https://www.fir3net.com/Containers/Docker/the-essential-guide-in-transporting-your-docker-containers.html">Guide to Moving Docker Containers</a> </h2><br>  <b>Rick Donato, October 28, 2016.</b> <br><br>  Docker provides various commands / methods for moving containers.  In this article, you will see all these commands needed to move your Docker containers between your hosts and repositories, in the examples. <br><br><h3>  From repository to repository </h3><br>  Let's take a look at how we get the image from the repository, and how we deliver our local image to the remote repository. <br><br><h4>  PULL </h4><br>  The <i>docker pull command is</i> used to get an image from the repository. <br><br>  <b>$ docker pull busybox</b> <b><br></b>  <b>Using default tag: latest</b> <b><br></b>  <b>latest: Pulling from library / busybox</b> <b><br></b>  <b>Digest: sha256: 29f5d56d12684887bdfa50dcd29fc31eea4aaf4ad3bec43daf19026a7ce69912</b> <b><br></b>  <b>Status: Up to date for busybox: latest</b> <br><br>  Tip: by default, Docker will pull from docker.io.  For a pool from another repository, add the host name of your registry to the <i>docker pull command</i> , i.e.  <i>docker pull registry.fir3net.com/busybox</i> ([1]). <br><br><h4>  Push </h4><br>  To move images from the repository to the repository, <i>docker push is used</i> .  Below are the steps that affect the push image to the repository. <br><br><ol><li>  Authentication - if it is required by the repository, it is performed by the <i>docker login command.</i> </li><li>  Tagging - provided by the <i>docker tag command</i> </li><li>  Push - <i>docker push</i> command is used for this </li></ol><br>  Here is an example: <br><br>  <b>// LOGIN</b> <b><br></b>  <b>$ docker login <a href="https://registry.fir3net.com/">registry.fir3net.com</a></b> <b><br></b>  <b>Username: felix001</b> <b><br></b>  <b>Password:</b> <b><br></b>  <b>Login Succeeded</b> <b><br><br></b>  <b>// TAG</b> <b><br></b>  <b>$ docker tag busybox registry.fir3net.com/busybox-v0.0.1</b> <b><br><br></b>  <b>// PUSH</b> <b><br></b>  <b>$ docker push registry.fir3net.com/busybox-v0.0.1</b> <b><br></b>  <b>The push refers to a repository [registry.fir3net.com/busybox-v0.0.1] (len: 1)</b> <b><br></b>  <b>Sending image list</b> <b><br></b>  <b>Pushing repository registry.fir3net.com/busybox-v0.0.1 (1 tags)</b> <b><br></b>  <b>d3a1f33e8a5a: Image successfully pushed</b> <b><br></b>  <b>c22013c84729: Image successfully pushed</b> <b><br></b>  <b>d74508fb6632: Image successfully pushed</b> <b><br></b>  <b>91e54dfb1179: Image successfully pushed</b> <b><br></b>  <b>Pushing tag for rev [91e54dfb1179] on {https://registry.fir3net.com/v1/repositories/busybox-v0.0.1/tags/latest}</b> <br><br><h3>  From host to host </h3><br>  We can take a local image or container and then load it or import it into another Docker environment. <br><br><h4>  EXPORT or SAVE </h4><br>  Well, let's take a look at the <i>docker export</i> and <i>docker save</i> commands.  <i>docker export</i> saves a running (paused) instance ([2]) of the container to a tar file.  <i>docker save</i> saves the image to a tar file. <br><br>  Below are examples of these two commands: <br><br>  <i>Export</i> <br><br>  <b>$ docker ps</b> <b><br></b>  <b>CONTAINER ID IMAGE COMMAND</b> <b><br></b>  <b>5e8f397be6fa busybox "sh"</b> <b><br><br></b>  <b>$ docker export 5e8f397be6fa -o busybox-container.tar</b> <br><br>  <i>Save</i> <br><br>  <b>$ docker images</b> <b><br></b>  <b>REPOSITORY TAG IMAGE ID</b> <b><br></b>  <b>busybox latest e02e811dd08f</b> <b><br><br></b>  <b>$ docker save -o busybox-image.tar busybox</b> <br><br><h4>  IMPORT or LOAD </h4><br>  Finally, the <i>docker import</i> and <i>docker load</i> commands are applied to the tar files that were originally created. <br><br>  <i>docker import is</i> used to import a tar file (that is, a container) created through <i>docker export</i> .  <i>docker load</i> to load the tar file (i.e. image) created via <i>docker save</i> . <br><br>  <b>// SAVE</b> <b><br></b>  <b>$ docker import busybox-container.tar</b> <b><br></b>  <b>sha256: 94f13e1b4a26cd15a6c6d33da835e7319491a9c1dbeca16583750f7b96235403</b> <b><br><br></b>  <b>// LOAD</b> <b><br></b>  <b>$ docker load --input busybox-image.tar</b> <b><br></b>  <b>Loaded image: busybox: latest</b> <br><br>  <b>References:</b> <br>  [1] <a href="http://stackoverflow.com/questions/33054369/how-to-change-the-default-docker-registry-from-docker-io-to-my-private-registry">stackoverflow.com/questions/33054369/how-to-change-the-default-docker-registry-from-docker-io-to-my-private-registry</a> <br>  [2] <a href="https://blog.giantswarm.io/moving-docker-container-images-around/">blog.giantswarm.io/moving-docker-container-images-around</a> </div><p>Source: <a href="https://habr.com/ru/post/339610/">https://habr.com/ru/post/339610/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../339594/index.html">Expansion of analytical capabilities of the linear programming method with Python tools</a></li>
<li><a href="../339596/index.html">The history of hacking all the games in Telegram</a></li>
<li><a href="../339602/index.html">Service control panel. Part 1: Introduction</a></li>
<li><a href="../339606/index.html">Railway-oriented programming. Functional style error handling</a></li>
<li><a href="../339608/index.html">The digest of interesting materials for the mobile developer # 224 (October 2 - October 8)</a></li>
<li><a href="../339612/index.html">PGP offline key storage strategies</a></li>
<li><a href="../339614/index.html">Migrating business critical applications to the cloud: VMware tools overview</a></li>
<li><a href="../339616/index.html">At the bottom: what threatens underwater internet cables</a></li>
<li><a href="../339618/index.html">Aftertaste from Kotlin, part 3. Korutiny - we divide the processor time</a></li>
<li><a href="../339620/index.html">What to do if Instagram did not give access to the API? Addition</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
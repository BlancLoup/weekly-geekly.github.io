<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Kotlin and the cost of developing the game (+ a little offtopic)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. Today I want to talk about the development of the game using the programming language Kotlin. I will also give a small example of working wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Kotlin and the cost of developing the game (+ a little offtopic)</h1><div class="post__text post__text-html js-mediator-article">  Good day.  Today I want to talk about the development of the game using the programming language Kotlin.  I will also give a small example of working with RxJava at the end of the article. <br><br>  The first commit for this game happened on June 4 of this year, that is, I reached the open beta in about 3 and a half 4 weeks.  I can't say that this is the first game or program for Android that I am developing, but I am not an experienced Android developer either.  My previous experience was mainly Enterprise development. <br><br>  I want to identify several topics in this article and run through them shortly.  I will try to expand the Kotlin topic in detail, for the rest additional articles are possible if there is such a request from you (well, plus clarifying questions in the comments will help improve the presentation of the material).  So to the list: this is a cost comparison of development on Kotlin vs Java, where to get the graphics for your game.  A little about money (for now about costs, because there are no statistics on income yet).  I also think it is very important to touch on the motivation part.  Let's start with the end. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Motivation</b> <div class="spoiler_text">  Why do I start this article with such seemingly trifles as motivation?  After all, if I want to create an application, then I am already motivated.  And everything is fine, and success awaits me.  The problem is that when we start working we often do not realize our true motivation: whether we are waiting for money, whether there is a personal need, whether we want to create an example for our portfolio.  There may be many options.  It would seem, what's the difference if I'm still motivated?  But taking a portfolio for example is a seemingly good investment.  You will be able to show your potential employers a finished product, and of course they will be impressed and will immediately assign a huge salary.  So, as you develop, as you invest your time and energy, the value of the portfolio begins to fade into the background (especially if you cannot achieve visual appeal).  I already want to get some money, and if initially there were no plans to monetize the application, then every next day requires more and more willpower.  So what's the problem?  It would seem that he started working with one motivation, and in the middle of the development process he added monetization, put it on Google Play and earned 100,500 rubles.  Unfortunately this does not work.  Users do not want to spend time on a buggy, raw or uninteresting application.  That is, you can not put the project in the middle of development.  If you do, most likely it will simply lead to a drop in the rating and the lack of download.  That is, all your work will essentially go to the trash. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you initially consider monetization as one of your interests, even before the start of work, you should understand what you will earn money on.  The simplest and most ineffective banner ads.  Slightly more complicated or about as simple as displaying ads on the whole screen.  Next comes the store.  But in order for the store to work, you need to hook the user with something.  The sooner you get to view ads, the more it will fuel your motivation to continue to work on. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Graphics</b> <div class="spoiler_text">  The question of graphics for the programmer is probably the main problem.  I mean games of course.  When I first started developing, I thought that the most important thing was to write code, and finding graphics was not such a big problem.  Maybe even order. <br><br>  There is a significant amount of resource sinks where graphics are sold, there are resources with free images.  And in principle, yes, indeed, the way it is.  There is only one problem - these resources are made in different artistic style and the combination of them gives extremely strange results.  Therefore, if you are developing your first game, I strongly advise you - do not look for graphics for your ideas.  Look for ready-made sets of graphics for the game, and based on the graphics decide what you can implement.  There are such sets, there are not so many of them, but at least for the first second time you will have enough. <br><br>  In my case, it turned out that I spent 2 weeks on development, bought some resources in the markets, but naturally they were not enough to realize my idea.  Frankly speaking, the purchased graphics made up less than 30% of the required.  But there are no unsolvable issues, you can find artists who draw what you need.  And here we are surprised to learn that it is not so simple.  Especially if we are interested in quality results.  What did I do - I looked through the drains, found interesting specimens in terms of graphics, switched to the description of the author and tried to contact. <br><br>  Already at this stage you should have a list of items that you want to order, and already at this stage, most likely your pink elephants will add trunks.  But for now this is only a hunch.  You send a letter asking ‚Äúcan I apply for ordering graphics‚Äù and depending on the performer‚Äôs professionalism (and the people I approached were professionals with the exception of one), you will receive an immediate answer that ‚ÄúYes you can, an hourly rate of $ 25 / hour‚Äù Your request will be completed within 30-40 hours, not including rework on the comments (free time for ordering will be in a month and a half).  Or "I can do for a month and a half, it will cost 50 thousand rubles."  Or ‚ÄúNo, I have too much work and I don‚Äôt take additional orders.‚Äù  These are all professional answers.  And the worst thing that happened to me is the following: <br><br>  - And how much are you willing to pay?  (That is, a person does not assess the resource intensity or complexity of the task, but tries to adapt to the customer‚Äôs solvency) <br>  - from 10,000 to 20,000 rubles (This was the first artist with whom I contacted and at that moment I believed that this amount is quite suitable for a small, I thought, a little work) <br>  The man did not show much interest, but he seemed to agree.  He himself appointed a term when he would give a description of what he could give me for this amount ... and disappeared.  This is not even a bell, it is a bell that further work with such a person for you will end in failure.  Nevertheless, 3 days after the date he voiced, he contacted me and said that he would do everything I needed for 15,000 rubles.  I am very wary of generalizations, so I asked to list what will be included in this ‚Äúall‚Äù point by point.  After that, the person disappears and I believe that this is a happy ending to the story. <br></div></div><br><h4>  Kotlin </h4><br>  Development of a personal project is significantly different from the worker.  There are several differences, but I will focus on the most significant (for me).  This is related to the cost of development.  In most cases, the employer determines the requirements, often the tool.  He also has financial responsibility.  There is testing or not, which libraries and which technology stack.  In a personal project, all rights and all responsibilities are on you personally.  Want to use the new framework - for God's sake.  But the time that you spend on its development you will ‚Äúpay‚Äù from your pocket.  And yes, do not think that you work for free.  Throw this idea out of your head, write your bet per hour on a sticker and it is highly desirable that it corresponds at least to the average cost of a specialist of your qualifications in the city.  Do not underestimate your price. <br><br>  Thus, the question of the effectiveness of your work comes to the fore.  And did I do something useful for these 8 hours, for which otherwise I would receive (for example) 4000 rubles?  That is the question of Kotlin vs Java, I propose to solve exclusively from a financial point of view.  Both languages ‚Äã‚Äãare turing-complete and it means that any program written in Kotlin can be implemented in Java and vice versa.  Due to what we can get the difference in the cost of development / cost of ownership of the product? <br><br>  The cost of development is the amount of money to implement the functionality.  Cost of ownership = cost of development + cost of support.  In some cases, the cost of support is disproportionately higher than the cost of development.  This is especially characteristic of write-only languages ‚Äã‚Äã(RegExp example. It is much easier to write a new expression than to understand where the error is in the existing one). <br><br>  Ideally, the language should be cheap in development and in support.  Reducing the boilerplate code unequivocally reduces the cost of development.  Syntactic sugar reduces the cost of development, but it can (let me emphasize it can, but is not obliged to) lead to an increase in the cost of ownership.  Syntactic salt increases development costs but reduces the cost of ownership.  Below I give examples of code for Kotlin and Java and describe which option is cheaper and why I‚Äôm looking.  Some examples will be from my project, some will not. <br><br><pre><code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Car</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> id: String) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> speed: <span class="hljs-built_in"><span class="hljs-built_in">Double</span></span> = <span class="hljs-number"><span class="hljs-number">0.0</span></span> }</code> </pre> <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> class </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Car</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String id; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Double speed; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Car</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String id)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.id = id; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.speed = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; } }</code> </pre><br>  * For DTO classes there is no need for getters / setters. <br>  ** Getters / setters only make sense if and only if they change behavior when working with fields <br><br>  In this comparison, we see that the code on Kotlin is more readable and, most importantly, it is protected from the ‚Äúbillion-plus error‚Äù - NPE.  Both id and speed in Kotlin cannot be null. <br><br><pre> <code class="hljs vhdl">var car: Car = Car(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) // compile <span class="hljs-literal"><span class="hljs-literal">error</span></span> car.speed = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> // compile <span class="hljs-literal"><span class="hljs-literal">error</span></span></code> </pre><br>  The second, no less important point in the above example is mutability. <br><br><pre> <code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toRoman</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(value: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: String { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> singles = arrayOf(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"I"</span></span>, <span class="hljs-string"><span class="hljs-string">"II"</span></span>, <span class="hljs-string"><span class="hljs-string">"III"</span></span>, <span class="hljs-string"><span class="hljs-string">"IV"</span></span>, <span class="hljs-string"><span class="hljs-string">"V"</span></span>, <span class="hljs-string"><span class="hljs-string">"VI"</span></span>, <span class="hljs-string"><span class="hljs-string">"VII"</span></span>, <span class="hljs-string"><span class="hljs-string">"VIII"</span></span>, <span class="hljs-string"><span class="hljs-string">"IX"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> tens = arrayOf(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"X"</span></span>, <span class="hljs-string"><span class="hljs-string">"XX"</span></span>, <span class="hljs-string"><span class="hljs-string">"XXX"</span></span>, <span class="hljs-string"><span class="hljs-string">"XL"</span></span>, <span class="hljs-string"><span class="hljs-string">"L"</span></span>, <span class="hljs-string"><span class="hljs-string">"LX"</span></span>, <span class="hljs-string"><span class="hljs-string">"LXX"</span></span>, <span class="hljs-string"><span class="hljs-string">"LXXX"</span></span>, <span class="hljs-string"><span class="hljs-string">"XC"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> hundreds = arrayOf(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"C"</span></span>, <span class="hljs-string"><span class="hljs-string">"CC"</span></span>, <span class="hljs-string"><span class="hljs-string">"CCC"</span></span>, <span class="hljs-string"><span class="hljs-string">"CD"</span></span>, <span class="hljs-string"><span class="hljs-string">"D"</span></span>, <span class="hljs-string"><span class="hljs-string">"DC"</span></span>, <span class="hljs-string"><span class="hljs-string">"DCC"</span></span>, <span class="hljs-string"><span class="hljs-string">"DCCC"</span></span>, <span class="hljs-string"><span class="hljs-string">"CM"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> thousands = arrayOf(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"M"</span></span>, <span class="hljs-string"><span class="hljs-string">"MM"</span></span>, <span class="hljs-string"><span class="hljs-string">"MMM"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> roman = thousands[value / <span class="hljs-number"><span class="hljs-number">1000</span></span>] + hundreds[value % <span class="hljs-number"><span class="hljs-number">1000</span></span> / <span class="hljs-number"><span class="hljs-number">100</span></span>] + tens[value % <span class="hljs-number"><span class="hljs-number">100</span></span> / <span class="hljs-number"><span class="hljs-number">10</span></span>] + singles[value % <span class="hljs-number"><span class="hljs-number">10</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> roman }</code> </pre><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toRoman</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String[] singles = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[] { <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"I"</span></span>, <span class="hljs-string"><span class="hljs-string">"II"</span></span>, <span class="hljs-string"><span class="hljs-string">"III"</span></span>, <span class="hljs-string"><span class="hljs-string">"IV"</span></span>, <span class="hljs-string"><span class="hljs-string">"V"</span></span>, <span class="hljs-string"><span class="hljs-string">"VI"</span></span>, <span class="hljs-string"><span class="hljs-string">"VII"</span></span>, <span class="hljs-string"><span class="hljs-string">"VIII"</span></span>, <span class="hljs-string"><span class="hljs-string">"IX"</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String[] tens = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[] { <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"X"</span></span>, <span class="hljs-string"><span class="hljs-string">"XX"</span></span>, <span class="hljs-string"><span class="hljs-string">"XXX"</span></span>, <span class="hljs-string"><span class="hljs-string">"XL"</span></span>, <span class="hljs-string"><span class="hljs-string">"L"</span></span>, <span class="hljs-string"><span class="hljs-string">"LX"</span></span>, <span class="hljs-string"><span class="hljs-string">"LXX"</span></span>, <span class="hljs-string"><span class="hljs-string">"LXXX"</span></span>, <span class="hljs-string"><span class="hljs-string">"XC"</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String[] hundreds = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[] { <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"C"</span></span>, <span class="hljs-string"><span class="hljs-string">"CC"</span></span>, <span class="hljs-string"><span class="hljs-string">"CCC"</span></span>, <span class="hljs-string"><span class="hljs-string">"CD"</span></span>, <span class="hljs-string"><span class="hljs-string">"D"</span></span>, <span class="hljs-string"><span class="hljs-string">"DC"</span></span>, <span class="hljs-string"><span class="hljs-string">"DCC"</span></span>, <span class="hljs-string"><span class="hljs-string">"DCCC"</span></span>, <span class="hljs-string"><span class="hljs-string">"CM"</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String[] thousands = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[] { <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"M"</span></span>, <span class="hljs-string"><span class="hljs-string">"MM"</span></span>, <span class="hljs-string"><span class="hljs-string">"MMM"</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String roman = thousands[value / <span class="hljs-number"><span class="hljs-number">1000</span></span>] + hundreds[value % <span class="hljs-number"><span class="hljs-number">1000</span></span> / <span class="hljs-number"><span class="hljs-number">100</span></span>] + tens[value % <span class="hljs-number"><span class="hljs-number">100</span></span> / <span class="hljs-number"><span class="hljs-number">10</span></span>] + singles[value % <span class="hljs-number"><span class="hljs-number">10</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> roman; }</code> </pre><br>  Not much difference, is it?  Nevertheless, final modifiers look extremely inappropriate and visually clog up the program.  This leads to the fact that final is used in Java much less frequently than it should.  But immutebl much cheaper in development and in possession. <br><br>  Here is an example of data transformation: <br><br><pre> <code class="hljs haskell"><span class="hljs-title"><span class="hljs-title">val</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class">:</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Int</span></span></span><span class="hljs-class">&gt; = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ArrayList</span></span></span><span class="hljs-class">() val sum = </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class">.filter { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class"> &gt; 0 }.sum()</span></span></code> </pre><br><pre> <code class="java hljs">List&lt;Integer&gt; data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Integer[] sum = { <span class="hljs-number"><span class="hljs-number">0</span></span> }; <span class="hljs-comment"><span class="hljs-comment">//Variable used in lambda expression should be final or effectively final data.stream().filter(value -&gt; value &gt; 0).forEach(value -&gt; sum[0] += value);</span></span></code> </pre><br>  There are two points.  Kotlin runs on jvm 6, Java requires jvm 8 for streams.  And for android, this is for a minute 24 API.  On June 5, it is only 9.5% of devices.  And the second point is final or effectively final variables in lambdas of Java. <br><br><pre> <code class="hljs scala">  <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> buttonGroup = <span class="hljs-type"><span class="hljs-type">ButtonGroup</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Button</span></span>&gt;().apply { setMinCheckCount(<span class="hljs-number"><span class="hljs-number">0</span></span>) }</code> </pre><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ButtonGroup&lt;Button&gt; buttonGroup = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ButtonGroup&lt;&gt;(); ‚Ä¶ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">constructor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(...)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ buttonGroup.setMinCheckCount(<span class="hljs-number"><span class="hljs-number">0</span></span>); ‚Ä¶ }</code> </pre><br>  Initialization of an object in Kotlin is possible in one place, which reduces the context for the programmer and reduces the cost of investment <br><br>  In principle, from what I tried at Kotlin, these are the most serious things that affect the cost of ownership of a product.  I don‚Äôt want to talk about data classes, operator overloading, string template, lazy properties, etc.  All these things are interesting, but they can both reduce and increase the cost of ownership. <br><br>  In conclusion, a small example of Kotlin + RxJava + Jackson.  I want to have a dto class, which allows not only to store data, but also to notify about changes.  The example is simplified for a more visual demonstration. <br><br><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Property</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value: T <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rx: Observable&lt;T&gt; } <span class="hljs-keyword"><span class="hljs-keyword">open</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProperty</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;</span></span>(defaultValue: T) : Property&lt;T&gt; { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value: T = defaultValue <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>(value) { field = value _rx.onNext(field) } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> _rx = PublishSubject.create&lt;T&gt;() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rx: Observable&lt;T&gt; = _rx <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> field.startWith(value) } }</code> </pre><br>  Here I want to draw attention to the overload val rx.  When you subscribe to Observable, the current value immediately comes.  This is important because  deserialization from json'a happens before screen layout and linking graphic elements to a property.  And with startWith, we immediately initialize the graphic element with the current value and change it as the play progresses. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Car { private val _speed = BaseProperty(<span class="hljs-number"><span class="hljs-number">0.0</span></span>) var speed: <span class="hljs-type"><span class="hljs-type">Double</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = _speed.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) { _speed.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> } @JsonIgnore val rxSpeed: Observable&lt;<span class="hljs-type"><span class="hljs-type">Double</span></span>&gt; = _speed.rx } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Police { val cars: List&lt;Car&gt; = listOf(Car("1st"), Car("2nd"), Car("3rd")) init { cars.<span class="hljs-keyword"><span class="hljs-keyword">forEach</span></span> { car -&gt; car.rxSpeed .map { speed -&gt; speed &gt; <span class="hljs-number"><span class="hljs-number">60</span></span> } //  <span class="hljs-type"><span class="hljs-type">double</span></span>   <span class="hljs-type"><span class="hljs-type">boolean</span></span>  .distinctUntilChanged() .<span class="hljs-keyword"><span class="hljs-keyword">filter</span></span> { aboveLimit -&gt; aboveLimit == <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> } .subscribe { writeTicket(car) } } } private fun writeTicket(car: Car) { // <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">some</span></span> stuff } }</code> </pre><br>  The Car class is perfectly serialized / deserialized by Jackson, it can be used as a classic dto class, but at the same time allows you to handle changes of properties in the reagent style. <br><br>  Below is an example of a Label garter to an object property: <br><br><pre> <code class="hljs pgsql">Label("", assets.skin, "progress-bar-time-indicator").apply { setAlignment(Align.center) craft.rx(DURATION).subscribe { setText(TimeFormat.format(it)) } })</code> </pre><br>  Conclusion: <br><br>  Unfortunately, I can not provide objective figures how much the cost of ownership of a product on Kotlin'e is cheaper than Java.  And this very statement I‚Äôm sure will be challenged more than once in the comments.  I can only say in my subjective judgment, the figure of 1.5 - 2 times is real for me.  Moreover, the reduction in the cost of ownership by one and a half times is typical for the start of the transition from Java to Kotlin, after about a week or two, I think it turned out to be a double efficiency.  Mainly due to NPE-proof, immutable, lambda &amp; higher order functions. <br><br>  <b>Upd:</b> <br>  <a href="https://habrahabr.ru/post/331988/">Article on schedule</a> </div><p>Source: <a href="https://habr.com/ru/post/331976/">https://habr.com/ru/post/331976/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331962/index.html">Compare #NotPetya and #Petya - is it possible to decrypt your files? Updated</a></li>
<li><a href="../331966/index.html">How to start a fire before our fire or our list of general IT security principles</a></li>
<li><a href="../331968/index.html">Enterprise Software Update: Option for PDM / PLM Systems</a></li>
<li><a href="../331972/index.html">Benefits of interactive prototyping</a></li>
<li><a href="../331974/index.html">Phantom: large garbage collection</a></li>
<li><a href="../331978/index.html">Day after the Petya virus</a></li>
<li><a href="../331982/index.html">We use Laravel IoC container at full capacity</a></li>
<li><a href="../331986/index.html">Football as an exact science: how ITMO University helps the organizers of the Confederations Cup and the 2018 World Cup</a></li>
<li><a href="../331988/index.html">Graphics for indie games. What to do if the roundels and sticks do not suit you</a></li>
<li><a href="../331990/index.html">Tale about NePetu, or rather not about Petya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
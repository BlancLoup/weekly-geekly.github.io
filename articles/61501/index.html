<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Localization using entities</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are quite a few ways to localize XSLT templates, some methods are described by Lebedev‚Äôs studio, but today I‚Äôll talk about localization using en...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Localization using entities</h1><div class="post__text post__text-html js-mediator-article">  There are quite a few ways to localize XSLT templates, some methods are <a href="http://www.artlebedev.ru/tools/technogrette/xslt/">described</a> by Lebedev‚Äôs studio, but today I‚Äôll talk about localization using entities. <br><br><h4>  ENTITY </h4><br>  C started on what ‚Äúentities‚Äù are, without delving into the DTD.  Entities are peculiar constants in an XML document, described using a DTD, and used as abbreviations.  An example of such a replacement is the lettering of characters that are not present on the standard keyboard layout (¬©, ¬Æ, ‚Ç§, etc.).  Entities are described as follows: <br><a name="habracut"></a><br> <code>&lt;!ENTITY - "-"&gt;</code> <br> <br>  Or a more complete description for XSLT: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;!</font> <font color="#800000">DOCTYPE</font> <font color="#ff0000">xsl:stylesheet</font> [ <br> <font color="#0000ff">&lt;!</font> <font color="#ff0000">ENTITY</font> <font color="#ff0000">-</font> <font color="#0000ff">"-"</font> <font color="#0000ff">&gt;</font> <br> ] <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the XML table, the entities are substituted as follows: <b>&amp;</b> entity-name <b>;</b> <br>  As an example, I will give a description of the well-known nbsp entity (non-breaking space): <br><br> <code>&lt;!ENTITY nbsp "&amp;amp;#160;"&gt;</code> <br> <br>  You can look at many ‚Äústandard‚Äù entities in the HTML DTD: <a href="">www.w3.org/TR/xhtml1/DTD/xhtml-lat1.ent</a> <br><br>  If for (X) HTML all entities of special characters are described by default, then only three entities are defined for XST: amp (&amp; amp;), lt (&amp; amp; lt;), and gt (&amp; amp; gt;).  If you want to use nbsp, you will have to either use a ready-made table, with a description of special characters, or describe the entity yourself. <br><br><h4>  Localization (start) </h4><br>  Now let's try to make the simplest localization for the XSLT template using entities: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;!</font> <font color="#800000">DOCTYPE</font> <font color="#ff0000">xsl:stylesheet</font> [ <br> <font color="#0000ff">&lt;!</font> <font color="#ff0000">ENTITY</font> <font color="#ff0000">labelHello</font> <font color="#0000ff">", !"</font> <font color="#0000ff">&gt;</font> <br> ] <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:stylesheet</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">xmlns:xsl</font> <font color="#0000ff">="http://www.w3.org/1999/XSL/Transform"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:output</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> <font color="#ff0000">method</font> <font color="#0000ff">="xml"</font> <font color="#0000ff">/&gt;</font> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:template</font> <font color="#ff0000">match</font> <font color="#0000ff">="/"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">xsl:text</font> <font color="#0000ff">&gt;</font> <font color="#ff0000">&amp;labelHello;</font> <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:text</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:template</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:stylesheet</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  The result, I think, is obvious.  But in this example there is one big drawback: when changing the language, we need to replace all the entities in all the templates, which means there is little use from such localization.  Now suppose that our site is small, and all language constants can be collected in one place.  Let this place be the file lang.dtd, where only ‚Äúlanguage‚Äù entities are described.  Here is an example of such a DTD file: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;!</font> <font color="#800000">ENTITY</font> <font color="#ff0000">labelHello</font> <font color="#0000ff">", !"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;!</font> <font color="#800000">ENTITY</font> <font color="#ff0000">labelLogin</font> <font color="#0000ff">""</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;!</font> <font color="#800000">ENTITY</font> <font color="#ff0000">labelRegister</font> <font color="#0000ff">""</font> <font color="#0000ff">&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Now it‚Äôs easy to attach this file to an XSLT template: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;!</font> <font color="#800000">DOCTYPE</font> <font color="#ff0000">xsl:stylesheet</font> <font color="#ff0000">SYSTEM</font> <font color="#0000ff">"lang.dtd"</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  The last option is already quite working;  to change the language, it is enough to replace only one file.  But in some cases this is still not enough. <br><br><h4>  Localization at the CMS level </h4><br>  Suppose that we have a CMS, where all language files are represented as arrays or are in the database at all.  The easiest way to link system localization and XSLT templates is to automatically generate DTD <b>files</b> with ‚Äúlanguage‚Äù entities.  The option, of course, is not the worst, but there is a little different - to generate a DTD "on the fly."  This has two advantages: firstly, there is no longer a need to update the language DTD files when changes are made to localization;  secondly, we can easily change the localization, giving the language of the essence of the language that is installed CMS. <br><br>  Suppose that we wrote a script that delivers content, as in the lang.dtd file, we include it in the XSLT template: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;!</font> <font color="#800000">DOCTYPE</font> <font color="#ff0000">xsl:stylesheet</font> <font color="#ff0000">SYSTEM</font> <font color="#0000ff">"http://localhost/lang.php"</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  This raises a problem that would seem to be solved in any way - binding to the domain.  But if our CMS is written in PHP (I‚Äôm not responsible for other languages), then it‚Äôs too early to despair :) <br><br>  In PHP, starting from version 4.3, you can implement your own protocols.  For example, you can implement support for the file (file: //) protocol or any other.  The developer is responsible for implementing custom protocols.  I will not dwell on this in detail, because  this is another topic.  You can read about the implementation of your protocols in the PHP documentation <a href="http://www.php.net/manual/en/class.streamwrapper.php">here</a> , and you can see the finished example in the SVN of my project <a href="http://code.google.com/p/explay-cms/source/browse/trunk/explay/classes/LangStream/LangStream.php">here</a> . <br><br>  Now apply this in XSLT.  We implement the protocol, for example, lang and correct the pattern: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;!</font> <font color="#800000">DOCTYPE</font> <font color="#ff0000">xsl:stylesheet</font> <font color="#ff0000">SYSTEM</font> <font color="#0000ff">"lang://modulename"</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> </div><p>Source: <a href="https://habr.com/ru/post/61501/">https://habr.com/ru/post/61501/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../61493/index.html">Strange problems with the Presidential Library named after B.N. Yeltsin</a></li>
<li><a href="../61494/index.html">Is there a plugin / widget for service links?</a></li>
<li><a href="../61496/index.html">Tetris is 25 years old!</a></li>
<li><a href="../61497/index.html">Windows + Google Android in Acer netbooks</a></li>
<li><a href="../61499/index.html">You can eat my cookies anytime</a></li>
<li><a href="../61503/index.html">50+ juicy memorable modern day infographic concepts</a></li>
<li><a href="../61507/index.html">5 places to get inspiration when designing your logo</a></li>
<li><a href="../61509/index.html">I resent Beeline - kidalovo</a></li>
<li><a href="../61513/index.html">Reminder of attached documents in e-mail</a></li>
<li><a href="../61518/index.html">Six ways Google Wave will change your business, career and life</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
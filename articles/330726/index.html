<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to scale bitcoin blockchain</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In one of our previous materials, we noted that the main advantages of the blockchain are openness, security and safety. However, any technology alway...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to scale bitcoin blockchain</h1><div class="post__text post__text-html js-mediator-article">  In <a href="https://habrahabr.ru/company/bitfury/blog/326340/">one</a> of our previous materials, we noted that the main advantages of the blockchain are openness, security and safety.  However, any technology always has certain disadvantages. <br><br>  Bitcoin, as the largest, most popular and reliable blockchain is also not without such, but the community is actively solving them.  Therefore, in the framework of today's post, we will address the following questions: <br><br><ul><li>  What is the biggest disadvantage of bitcoin blockchain? </li><li>  What solutions did the world community offer? </li><li>  Which of them will become part of the bitcoin network? </li></ul><br> <a href="https://habrahabr.ru/company/bitfury/blog/330726/"><img src="https://habrastorage.org/web/790/d74/fe2/790d74fe217847eb91592c7abaff40eb.jpg"></a> <a name="habracut"></a>  <i>/ image by <a href="https://www.flickr.com/photos/susivinh/">Susana Fernandez</a> <a href="https://creativecommons.org/licenses/by-nd/2.0/">CC</a></i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Today, banks, energy companies, Internet of Things and government organizations are actively eyeing the blockchain.  For example, Bank of America and Microsoft have <a href="https://news.microsoft.com/2016/09/27/microsoft-and-bank-of-america-merrill-lynch-collaborate-to-transform-trade-finance-transacting-with-azure-blockchain-as-a-service/">begun to</a> jointly develop a financial blockchain platform, while Chronicled has launched a blockchain platform for the Internet of things, which creates secure digital identifiers that are compatible with many other systems.  However, the environment and conditions in which Bitcoin operates are significantly different from what they were at the time of the birth of cryptocurrency.  The number of users increased to several tens of millions of people ( <a href="https://blockchain.info/charts/my-wallet-n-users">more than</a> 13 million), which caused an increase in the number of daily transactions ( <a href="https://blockchain.info/charts/n-transactions%3Ftimespan%3Dall">about</a> 400 thousand). <br><br>  The amount of resources that have to be spent on the work of the software and storing the Bitcoin registry with the list of transactions performed is quite large.  The entire transaction chain of bitcoin blockchain can be traced, starting with the very first operation <a href="https://blockchain.info/tx/f4184fc596403b9d638783cf57adfe4c75c605f6356fbc91338530e9831e9e16">conducted</a> on January 12, 2009 by the creator of bitcoin Satoshi Nakamoto.  To date, the size of the bitcoin blockchain is about 120 GB and continues to grow. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/697/b69/3a0/697b693a0b8c234b3b2195016d5cd914.png"><br><br>  All these features of the functioning of the system led to the problem of scaling Bitcoin and limited its theoretical size.  A blockchain is a sequence of blocks, each of which is a set of transactions protected by cryptographic algorithms.  At the same time, Satoshi Nakamoto (about a year after the creation of Bitcoin) limited the block size to one megabyte.  This was done in order to prevent possible DoS-attacks of intruders when they create large (in theory unlimited) blocks to paralyze the network. <br><br>  However, such a security measure had a negative effect on the network capacity in general (in the long term).  Today, bitcoin can <a href="https://en.bitcoin.it/wiki/Scalability">process</a> about 7 transactions per second (TPS).  At the same time, the actual load on the Bitcoin network <a href="https://blockchain.info/ru/charts">is</a> 3.5 TPS.  For comparison, the TPS indicator in the Visa system is 2,000 (at the moments of peak activity - 50,000). <br><br><h2>  <b>Early Problem Solving Suggestions</b> </h2><br>  The first proposals to improve Bitcoin were presented in 2015 ( <a href="http://gtf.org/garzik/bitcoin/BIP100-blocksizechangeproposal.pdf">BIP 100</a> and <a href="https://cointelegraph.com/news/bitcoin-block-battle-top-corporations-support-bip-101-as-debate-rages-on">BIP 101</a> ) by core developers Jeff Garzik and Gavin Andresen.  Both solutions proposed to increase the block size, but were hard forks, that is, they did not have backward compatibility.  This meant that when they were implemented, the old software would become incompatible with the new network.  In the BIP 100 it was proposed to adjust the block size by the decision of miners, and in BIP 101 - to simultaneously increase the block size to 8 megabytes. <br><br>  At that time, <a href="https://due.com/blog/can-the-blockchain-scale/">an increase</a> in the block size was the simplest solution from a technical point of view, but none of the schemes was implemented.  Refusal to implement turned out to be associated more with political (within the Bitcoin ecosystem) problems than with technical ones.  The presence of large blocks <a href="https://www.quora.com/Is-scalability-a-big-problem-for-blockchain-adoption-given-that-a-blockchain-size-is-growing-forever-and-updates-are-permeated-to-so-many-parties">could lead</a> to the centralization of Bitcoin, since their storage and processing would require even more computing power, and only large companies can allocate such amounts of resources.  Thus, there would be a contradiction with the main idea of ‚Äã‚ÄãBitcoin blockchain as user-controlled cryptocurrency. <br><br><h2>  <b>Segregated Witness</b> </h2><br>  At the end of 2015, developer Peter Wullet (Pieter Wuille) presented a proposal called Segregated Witness, which increases network bandwidth.  The approach did not change the size of the block, but the method of storing transactions.  One of the advantages of the solution was the possibility of its implementation through softfork (that is, ensuring backward compatibility).  After the release of the technical description of Segregated Witness, the proposed solutions to the scalability problem were divided into two groups: some sought to increase the block size, and others to leave the unit unchanged, optimizing other aspects of the protocol.  No consensus could be reached on this issue.  Until recently. <br><br>  On May 20, the key players in the Bitcoin industry were able to find points of contact.  Hong Kong Bitcoin Roundtable Consensus conference participants (including BitFury) <a href="https://cointelegraph.com/news/bitcoin-price-hits-2150-following-rapid-progress-in-segwit-scaling-talks">agreed to</a> support several bitcoin protocol upgrades.  One of them is Segregated Witness activation upon reaching a support level of 80% (miner capacity).  The second is associated with an increase in the size of the block to 2 MB.  This decision even affected the cost of bitcoin.  The interest in cryptocurrency and the new opportunities for blockchain scaling have led to the fact that the price for bitcoin has <a href="https://price.bitcoin.com/">exceeded the</a> mark of 2.5 thousand dollars. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/75c/ca3/fa3/75cca3fa37950cd919cf8b5af6118dad.png"><br><br>  We can say that transactions in Bitcoin consist of two components.  The first component frees Bitcoins blocked in previous transactions using so-called inputs.  Inputs include <a href="https://habrahabr.ru/company/bitfury/blog/330316/">scripts</a> (ScriptSigs);  Each such script contains a set of instructions for opening Bitcoins (for example, a digital signature).  The second transaction component contains a set of pins (ScriptPubKeys scripts) that lock in the freed bitcoins (or slightly less).  Each locking script determines the conditions under which the corresponding bitcoins can be spent (for example, provided you know a certain private key).  It turns out that bitcoins are moving from inputs to transactions and from one transaction to another. <br><br>  Bitcoin locking and unlocking is <a href="https://bitcoinmagazine.com/articles/segregated-witness-part-how-a-clever-hack-could-significantly-increase-bitcoin-s-potential-1450553618/">done by</a> transaction senders, and is transmitted over the network in the form of information packets.  Bitcoin conclusions, as a rule, contain instructions, the meaning of which is to make sure that the user knows the necessary private key corresponding to the specified public key. <br><br>  Technology Segregated Witness modifies this chain of interactions.  The newly created conclusions begin to use a different type of locking script, which is called ‚Äúanyone can spend‚Äù, because it does not require digital signatures, and at first glance it can be spent by anyone.  The trick is that the locking script of the type can cant contains a specific sequence of bytes that binds to the script the ‚Äúreal‚Äù conditions of spending bitcoins. <br><br>  A similar technique is <a href="https://github.com/bitcoin/bips/blob/master/bip-0016.mediawiki">used</a> in P2SH (Pay to Script Hash).  As in the case of SegWit, with P2SH, the bitcoins are still locked in the script, but not the locking script itself is added to the exit of the transaction, but its hash.  In order to spend bitcoins locked in such a scenario, you need to know not only the ‚Äúreal‚Äù locking script (as it may seem when you first read scriptPubKey), but also the unlocking scriptSig for this script (for example, a digital signature). <br><br>  Segregated Witness essentially <a href="http://learnmeabitcoin.com/faq/segregated-witness">separates</a> scriptSig (transaction signatures) into a separate data structure - witness (proof).  Thus, SegWit is an addon that is completely ignored by the old nodes, but is recognized as new.  Both old and new nodes consider transactions with SegWit to be correct: the first ones see the ‚Äúanyone spends‚Äù scripts and consider the transaction to be correct (albeit strange from the point of view of semantics), and the second refer to the signature in witness.  Due to this technology allows you to eliminate the fusibility of transactions (tx malleability), save disk space and optimize the speed of verification of signatures. <br><br>  There is, however, a small difficulty: if the signatures do not affect the transaction hashes, it can no longer be evidence that valid signatures exist in nature for the transactions included in the block.  To get around this feature, the miner writes a hash to a specific location of the block, depending on all witness in transactions, which is calculated similarly to the transaction hash of the block, that is, using Merkle trees. <br><br>  Another advantage of SegWit is the fact that it contains version bytes.  They precede the script and indicate its type.  This makes it possible to designate the requirements necessary for the release of bitcoins.  In fact, this allows you to lock Bitcoins in many different ways.  The potential of this function can be realized by <a href="https://en.wikipedia.org/wiki/Schnorr_signature">Schnorr‚Äôs signatures</a> , which are more compact and verified faster than the current <a href="https://ru.wikipedia.org/wiki/ECDSA">ECDSA</a> signatures, as well as more complex types of multi- <a href="https://en.wikipedia.org/wiki/Schnorr_signature">signature</a> transactions and even smart contracts like Ethereum. <br><br>  In practice, locking scripts in SegWit look similarly (this example is taken from a <a href="">real transaction</a> , not in Bitcoin, but in another technically very similar blockchain - a lightcoin; SegWit is already activated on it): <br><br><pre><code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"scriptPubKey"</span></span>: { <span class="hljs-string"><span class="hljs-string">"asm"</span></span>: <span class="hljs-string"><span class="hljs-string">"0 07389b37ea077e9431a2e64530649f8a61befa54"</span></span>, <span class="hljs-string"><span class="hljs-string">"hex"</span></span>: <span class="hljs-string"><span class="hljs-string">"001407389b37ea077e9431a2e64530649f8a61befa54"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"witness_v0_keyhash"</span></span> }</code> </pre> <br>  The script consists of a script version byte (0), followed by 20 bytes corresponding to the usual address in the bitcoin network (public key hash).  Viewed from the point of view of a node that knows nothing about SegWit, this script can be spent by anyone, for example, with an empty unlocking scriptSig.  In fact, scriptPubKey only adds data to the stack and does not perform any checks for data pushed to the stack by scriptSig before. <br><br>  When viewed from the point of view of a node that knows about SegWit, this script signals that the witness of the spending transaction should contain a digital signature of the transaction along with the public key, the hash of which is specified in the script.  The scriptSig field must be empty. <br><br>  How exactly it is worth checking the SegWit script, the node determines on the basis of the version byte and the length of the next scriptPubKey element (in the example above, it is 20).  So far, two types of scenarios are defined in SegWit: based on the public key (our example) and more complex for arbitrary checks (for example, multisignatures).  In the second case, a 32-byte hash of the ‚Äúreal‚Äù locking script is written to the scriptPubKey.  When spending money, this scenario, along with a suitable unlocking scenario, must be provided in the witness field.  In this case, the hash of the locking script must match the value specified in the scriptPubKey. <br><br><h2>  <b>Lightning network</b> </h2><br>  As part of this material, I would like to <a href="https://bitcoinmagazine.com/articles/understanding-the-lightning-network-part-building-a-bidirectional-payment-channel-1464710791/">mention the</a> Lightning Network (LN) scaling technology, which in many respects becomes possible due to SegWit, and in the development of which BitFury is actively involved.  Lightning Network is based on ordinary Bitcoin transactions, only these transactions are not transferred to the Bitcoin network (at least, immediately).  Instead, they are stored locally on LN nodes. <br><br>  The main feature of the Lightning Network is bi-directional ‚Äúnon-trustworthy‚Äù payment channels that allow you to exchange bitcoins directly, bypassing the blockchain.  Only blocking and closing transactions are broadcast on the blockchain, even if there are millions of payments between them.  This allows you to seriously "unload" the blockchain and increase its bandwidth, as well as to carry out microscopic payments (for example, pay for digital content or Internet connection per second).  Moreover, LN allows payments to be made through one or more intermediate nodes of a network without the risk that these nodes will steal funds.  This provides LN scalability to millions of nodes.  In more detail about the principles of work of LN we plan to tell in the subsequent materials. <br><br>  <i>PS Our <a href="https://hh.ru/employer/1865709">jobs at HH</a> and the English-language <a href="https://medium.com/%40BitFuryGroup">blog at Medium</a> .</i> <i><br><br></i>  <i>PPS Additional materials on the topic:</i> <i><br><br></i> <ul><li>  <i><a href="http://www.forbes.ru/tehnologii/344801-valeriy-vavilov-bitfury-group-blokcheyn-industriya-na-trilliony-dollarov">Valery Vavilov, BitFury Group: ‚ÄúBlockchain is an industry for trillions of dollars‚Äù</a></i> </li><li>  <i><a href="https://habrahabr.ru/company/bitfury/blog/330316/">Another use of blockchains: Smart contracts</a></i> </li><li>  <i><a href="https://habrahabr.ru/company/bitfury/blog/330370/">What is exclusive blockchains?</a></i> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/330726/">https://habr.com/ru/post/330726/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../330714/index.html">‚ÄúCloser to the people‚Äù: how to make IaaS more accessible</a></li>
<li><a href="../330716/index.html">‚ÄúThe biggest competitor is those who do everything themselves‚Äù - Petr Zaitsev about the creation and development of the Percona company</a></li>
<li><a href="../330720/index.html">Reform SQL-based approach in DAO</a></li>
<li><a href="../330722/index.html">Preparing git reset correctly</a></li>
<li><a href="../330724/index.html">Turing Completeness Generic Java Types</a></li>
<li><a href="../330728/index.html">The digest of interesting materials for the mobile developer # 207 (June 05-12)</a></li>
<li><a href="../330730/index.html">Win32 / Industroyer: A New Threat to Industrial Control Systems</a></li>
<li><a href="../330732/index.html">A very rude approach to determining a person‚Äôs language (or how to understand a person‚Äôs language from a normal corporate base)</a></li>
<li><a href="../330736/index.html">Crazy Artificial Intelligence</a></li>
<li><a href="../330738/index.html">Neuroclot: Part 4 - Final Model and Product Code</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
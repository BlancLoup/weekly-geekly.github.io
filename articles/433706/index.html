<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sandbox in Windows</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The sandbox is a new lightweight tool in Windows that allows you to run applications in a secure, isolated environment. 

 Have you ever been in a sit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sandbox in Windows</h1><div class="post__text post__text-html js-mediator-article">  The sandbox is a new lightweight tool in Windows that allows you to run applications in a secure, isolated environment. <br><br>  Have you ever been in a situation where you need to run some program, but you are not quite sure about the source of its origin?  Or another example - the need to check something on a ‚Äúclean‚Äù version of Windows.  In all such cases, there used to be only one way out - install the OS on a separate physical or virtual machine and conduct the necessary experiment.  But this is no longer the case. <br><br>  Microsoft has developed a new mechanism called the <b>Sandbox</b> (eng. Windows Sandbox).  This is an isolated temporary environment in which you can run suspicious software without the risk of harming your PC.  Any software installed in the Sandbox remains only in the Sandbox and cannot interact with the main OS.  As soon as you close the Sandbox - all its contents are irretrievably destroyed. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Here are the main features of the Sandbox: <br><br><ul><li>  <b>This is part of Windows.</b>  If you have Windows 10 Pro or Enterprise, then you can already start using it. </li><li>  <b>From scratch.</b>  Each time you start the Sandbox, you get the same, clean, unchanging environment.  Exactly what your OS was right after its installation. </li><li>  <b>No trace.</b>  When you close the Sandbox, all applications installed in it, all files created there, are destroyed.  The Sandbox was closed - there were no traces of its existence. </li><li>  <b>Security.</b>  Hardware virtualization is used, which uses the hypervisor to run a separate OS kernel and isolates it from your main OS. </li><li>  <b>Efficiency.</b>  Uses integrated task scheduler, smart memory management, virtual GPU. </li></ul><a name="habracut"></a><br><h3>  System requirements </h3><br><ul><li>  Windows 10 Pro or Enterprise, build 18305 or higher </li><li>  AMD64 architecture </li><li>  BIOS Virtualization Enabled </li><li>  Minimum 4 GB (recommended 8 GB) RAM </li><li>  At least 1 GB of free disk space (SSD recommended) </li><li>  Dual core processor (4 recommended with hyper-threading support) </li></ul><br><h2>  Fast start </h2><br>  <b>1.</b> Install Windows 10 Pro or Enterprise, build 18305 or higher <br><br>  <b>2.</b> Enable virtualization: <br><br><ul><li>  If you are working on a physical machine - do it in the BIOS </li><li>  If you are running a virtual machine, use the following PowerShell command: <br><br><pre><code class="bash hljs">Set-VMProcessor -VMName &lt;VMName&gt; -ExposeVirtualizationExtensions <span class="hljs-variable"><span class="hljs-variable">$true</span></span></code> </pre> </li></ul><br>  <b>3.</b> Open (via the Control Panel) the list of installed Windows components and turn on the Sandbox.  Click OK.  If you see a request to restart the computer - confirm it. <br><br><img src="https://gxcuf89792.i.lithium.com/t5/image/serverpage/image-id/62785i7A89663EBE5E0521/image-size/medium?v=1.0&amp;px=400" alt="image"><br><br>  <b>4.</b> Run the Sandbox from the Start menu.  Allow elevation of rights for its process. <br><br>  <b>5.</b> Copy (via the clipboard) to the Sandbox the binary you want to run. <br><br>  <b>6.</b> Run the binary in the Sandbox.  If this is an installer, go through the installation procedure and run the installed application. <br><br>  <b>7.</b> Use the application as intended. <br><br>  <b>8.</b> When done - just close the Sandbox.  All its contents will be deleted. <br><br>  <b>9.</b> Optionally - you can make sure that nothing has changed in your main OS. <br><br><img src="https://gxcuf89792.i.lithium.com/t5/image/serverpage/image-id/62786i559AE3EDA7C968A4/image-size/large?v=1.0&amp;px=999" alt="image"><br><br><h2>  What is under the hood of the Sandbox </h2><br>  The Windows sandbox is built on a technology called Windows Containers.  Containers were developed (and used for a long time) to work in the cloud.  Microsoft has already taken a fairly mature and tested technology and finalized it for users of desktop Windows. <br><br>  Among the key adaptations include: <br><br><h3>  Dynamically generated image </h3><br>  The sandbox is a lightweight, but still virtual machine.  And, like any virtual machine, it needs an image from which it can boot.  The most important feature of the Sandbox is that you do not need to download or create this image from somewhere.  It will be created on the fly from your current Windows files. <br><br>  We want to always get the same ‚Äúclean‚Äù environment for the Sandbox.  But there is a problem: some system files may vary.  The solution was to create a ‚Äúdynamically generated image‚Äù: for modified files, their original versions will be included in it, but physically unchanged files will not be included in this image.  Instead, links to real files on the disk will be used.  As practice has shown, such links will be most of the files in the image.  Only a small part of them (about 100 MB) will be included in the image completely - this will be its size.  Moreover, when you do not use the Sandbox, these files are stored in a compressed form and take about 25 MB.  When running the Sandbox, they unfold into that same ‚Äúdynamic image‚Äù about 100 MB in size. <br><br><img src="https://gxcuf89792.i.lithium.com/t5/image/serverpage/image-id/62787i9053915B9D0FABFC/image-size/large?v=1.0&amp;px=999" alt="image"><br><br><h3>  Smart memory management </h3><br>  Sandbox memory management is another important improvement.  The hypervisor allows you to run multiple virtual machines on a single physical machine, and this, in general, works well on servers.  But, unlike servers, the resources of ordinary user machines are much more limited.  To achieve an acceptable level of performance, Microsoft has developed a special memory mode in which the main OS and the Sandbox can in some cases use the same memory pages. <br><br>  In fact: since the main OS and the Sandbox launch the same OS image, most of the system files in them will be the same, which means there is no point in loading the same libraries into memory twice.  You can do this once in the main OS, and when the same file is needed in the Sandbox memory, you can give it a link to the same page.  Of course, some additional measures are required to ensure the security of this approach, but Microsoft has taken care of this. <br><br><img src="https://gxcuf89792.i.lithium.com/t5/image/serverpage/image-id/62788i128C6F57EFF45C5F/image-size/large?v=1.0&amp;px=999" alt="image"><br><br><h3>  Integrated scheduler </h3><br>  In the case of using conventional virtual machines, the hypervisor controls the operation of the virtual processors working in them.  For the Sandbox, a new technology was developed called the ‚Äúintegrated scheduler‚Äù, which allows the main OS to decide when and how much resources to allocate to the Sandbox.  It works like this: Virtual Sandbox processors work like threads inside the Sandbox process.  As a result, they have the same ‚Äúrights‚Äù as the rest of the threads in your main OS.  If, for example, some high-priority threads are working for you, then the Sandbox will not take a lot of time from them to perform their tasks, which have normal priority.  This will allow the Sandbox to be used without slowing down the work of critical applications and retaining sufficient responsiveness of the main operating system UI, similar to how <a href="https://en.wikipedia.org/wiki/Kernel-based_Virtual_Machine">Linux KVM</a> works. <br><br>  The main task was to make the Sandbox, on the one hand, just an ordinary application, and on the other hand, to guarantee its isolation at the level of classic virtual machines. <br><br><h3>  Using "snapshots" </h3><br>  As mentioned above, the Sandbox uses the hypervisor.  We essentially run one copy of Windows inside another.  This means that it will take some time to load.  We can spend it every time the Sandbox runs, or do it only once, after saving, after loading, all the state of the virtual OS (changed files, memory, processor registers) on the disk.  After this we will be able to launch the Sandbox from this snapshot, saving at the same time the time it starts. <br><br><h3>  Graphics virtualization </h3><br>  Graphics hardware virtualization is the key to a smooth and fast user interface, especially for graphics-intensive applications.  However, classic virtual machines are initially limited in the ability to directly use all the resources of the GPU.  And here the important role played by the means of virtualization graphics, which allow to overcome this problem and in some form to use hardware acceleration in a virtual environment.  An example of such a technology might be, for example, Microsoft <a href="https://docs.microsoft.com/en-us/windows-server/remote/remote-desktop-services/rds-remotefx-vgpu">RemoteFX</a> . <br><br>  In addition, Microsoft actively worked with graphics and driver manufacturers to integrate graphics virtualization capabilities directly into DirectX and WDDM (the driver model in Windows). <br><br>  As a result, the graphics in the Sandbox works as follows: <br><br><ul><li>  The application in the Sandbox uses the graphical functions in the usual way, not knowing who will execute them and how </li><li>  Sandbox graphics subsystem, receiving graphics rendering commands, sends them to the main OS </li><li>  The main OS, receiving commands for drawing graphics, perceives them as if they came from a locally running application and executes them accordingly, allocating and managing the necessary resources. </li></ul><br>  This process can be represented as: <br><br><img src="https://gxcuf89792.i.lithium.com/t5/image/serverpage/image-id/62790i61A67D5F66C1E3E4/image-size/medium?v=1.0&amp;px=400" alt="image"><br><br>  This allows the virtual environment to get full access to hardware accelerated graphics, which gives both performance gains and savings of some resources (for example, battery power for laptops), due to the fact that heavy calculations on the CPU are no longer used for drawing graphics. <br><br><h3>  Battery use </h3><br>  The sandbox has access to information about the battery charge and can optimize their work to save it. <br><br><h2>  Feedback and Problem Reports </h2><br>  Any new technology may have bugs.  Microsoft asks to send messages about them and offers new features via the <a href="https://aka.ms/windowssandbox-fb">Feedback Hub</a> . </div><p>Source: <a href="https://habr.com/ru/post/433706/">https://habr.com/ru/post/433706/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../433694/index.html">Enter on "My Circle" search by users "Toaster"</a></li>
<li><a href="../433696/index.html">The history of a single request</a></li>
<li><a href="../433698/index.html">CSS philosophy</a></li>
<li><a href="../433700/index.html">Filter Bloom in Java using Guava</a></li>
<li><a href="../433704/index.html">An excerpt from the novel "Endless Joke" about videophones and masks for photo and video - years before their real appearance</a></li>
<li><a href="../433708/index.html">Welcome to the fifth Industrial Cybersecurity Meetup</a></li>
<li><a href="../433710/index.html">Placeholder for image using padding-top and percent</a></li>
<li><a href="../433712/index.html">Conversations with the "Higher Mind". Information in the brain</a></li>
<li><a href="../433714/index.html">RKN: Using analytics can lead to site blocking.</a></li>
<li><a href="../433716/index.html">Google showed a new generation of backpacks Street View Trekker</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
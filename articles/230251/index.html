<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Wiren Board Smart Home batch production experience</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Brief background 
 On the basis of our Wiren Board platform (a compact industrial computer with Linux and different interfaces), we made a fancy contr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Wiren Board Smart Home batch production experience</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/9e4/8a9/98e/9e48a998e7f48ffbc8b429e46dfd9d94.png"><br><br><h4>  Brief background </h4><br>  On the basis of our Wiren Board platform (a compact industrial computer with Linux and different interfaces), we made a fancy controller for Wiren Board Smart Home Home automation to which you can connect a bunch of wired and wireless devices from different systems and manufacturers.  The device has ARM9 64MB RAM, GSM / GPRS, Ethernet, Wi-Fi, USB, 2xRS-485 / Modbus, CAN, 2 relays, ASK / FSK radio module 433MHz, NRF24L01 - full description <a href="http://habrahabr.ru/company/contactless/blog/213243/">here</a> . <br><br>  At the end of February, we presented a prototype and opened a pre-order for the controller.  How was the pre-order, how we made a batch of devices and what we will do next - read under the cut. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Preorder </h4><br>  Start selling devices on pre-order was for us a very difficult decision.  Users have to buy the device, not seeing it live, we - very hard to try to justify the enormous trust.  To convince future buyers of the capabilities of the device, we even made a <a href="http://habrahabr.ru/company/contactless/blog/214381/">video</a> about his work. <br><br>  The second launch of the device, which we considered, was a pre-order without payment - once we carried it out when we launched the usual Wiren Board.  In theory, this method allows us to estimate the demand and the required lot volume.  But this method is not very accurate - last time the number of real buyers was less than a third, so this time we decided to check the real demand. <br><br>  In general, we were very worried, but the result was not bad - we collected more than a hundred paid (!) Pre-orders, and decided to prepare a batch of 200 devices. <br><br><h4>  Launch party </h4><br>  We organized the production of a batch not for the first time - earlier we had already collected 55 pieces of Wiren Board rev.  2.8.  But then the task was much simpler: though the boards were assembled at the factory, but by manual installation;  we generally purchased processor modules.  This time we assembled the entire device ourselves, with automatic installation. <br><br><h5>  Components </h5><br>  The first thing to do was purchase components and order printed circuit boards. <br>  The purchase of most components was done in Elitan, a little in China, memory chips and modems in MT-Systems.  Processors had to be bought from abroad.  And our biggest miscalculation happened to them - the managers of the usually ideally working company Farnell could not at first form an order for processors subject to minimal export restrictions, and while coordinating all the permitting papers, they went on vacation, they simply did not respond.  Having suffered an extra month with them, we made an order for Digikey, signed all the papers for the day, and on the third day our order flew from the States to Russia. <br>  It was an unpleasant story with processors that served as the main reason for the failure of our shipment deadlines - during the pre-order we promised to send the first devices in early May, but could only do this at the end of the month. <br><br><h5>  Fees </h5><br>  Printed circuit boards ordered in <a href="http://pcb.hqew.net/">HQEW</a> .  Before that, they were not ordered from them, but the COOLRF comrades wrote about them <a href="http://habrahabr.ru/company/coolrf/blog/206430/">well</a> .  Judging by the status of orders on their website, they made them quickly, and then they delayed the dispatch rather unreasonably.  I had to write angry letters to the managers both to the post office and to Skype, which they amicably ignored (it should be noted that <i>before</i> we paid them the money, they responded instantly). <br>  In the end, they still answered, apologized and sent the order. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eb6/fef/73e/eb6fef73ed58549fc580bb4df0ae91c7.png"></div><br><br><h6>  Board quality </h6><br>  The site declared a very high precision manufacturing.  But in fact, for some reason, they removed the mask between the contact pads with a step of 0.5 mm (0.15 mm bridge mask) - although the same Resonite and Seeed Studio made them.  This did not cause major problems with installation, but the sediment remained. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d19/947/507/d199475079c8b9c17b96ba16f75c7a56.png"></div><br>  On the left - the board from Rezonit, on the right - from China.  Pay attention to the cleaned soldering mask around the pads in the second photo. <br><br><h5>  Installation </h5><br>  Automatic installation was done in Tula - the company <a href="http://www.exlab.ru/">MT-electro</a> .  They asked to mount quickly - they did it very quickly, although it affected the cost. <br>  Output installation was first done by the forces of its employee - it took only 20 minutes to pay.  But he quickly got tired of this business, and had to hire a third-party installer. <br><br><h5>  Housing </h5><br>  A dozen cases in the desktop version made from two plates of plexiglass on the racks (the first photo in the article).  We used the services of laser cutting at Seeed Studio. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8bb/4a3/cb7/8bb4a3cb7e29818ddbd6d5dc5284827b.png"></div><br>  Plastic housing for DIN-rail bought standard - Gainta D6MG.  He demanded a little improvement - we needed slots for SIM and microSD cards, a button, and a little trimming for a USB connector.  It was possible to order a revision, but why?  If in the corner of dust cnc machine :).  Put the spindle horizontally, make stops for the body - and mill the neat holes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/88c/c02/d31/88cc02d314f20a764e0369990d51d3c9.png"></div><br><br><h5>  Testing </h5><br>  To test the assembled devices, they wrote a script that interrogated the chips, clicked the relyushki, checked the data transfer via RS-485, etc.  It turned out that in the batch of RS-485 transceivers up to 20% of the marriage (and there are two such transceivers on the board).  I was lucky that the defective chips were in the SOIC-8 package and it was easy and quick to change them. <br>  We bought these transceivers in Platane; they never answered our angry letter.  There were no such problems with the other components. <br><br><h4>  Production stages with terms </h4><br><ul><li>  March 1 ordered fees </li><li>  March 20, fees arrived mediator at the border </li><li>  May 5 delivered to us </li><li>  May 7 sent for installation </li><li>  May 17 received collected fees. </li><li>  May 25 dispatch of devices started </li><li>  June 15, pre-order mailing is completed </li></ul><br><br><h4>  Before production </h4><br>  During the testing process, a couple of serious bugs were discovered: <br><br><ul><li>  Processor modules sometimes did not pass the memory test. <br>  The problem was solved by correctly setting timings for memory.  They were looking for a problem for a very long time (more than a week) and because of this they delayed the order of payments.  It was aggravated by the fact that errors in the test sometimes appeared after dozens of minutes of testing, and everything influenced these errors in general, therefore, we initially sinned in any hints.  It turned out that the new model of memory chips has slightly different timings, and it is necessary to correct them in the code. </li><li>  The controller rebooted every 7 hours. <br>  For cheaper, we replaced the LTC4002 power chip with its almost complete Chinese equivalent EUP8207, which works exactly the same, but turns off every 7 hours :) According to the documentation, the LTC4002 also turns off every three hours (battery charge cycle), but these shutdowns do not affect operation ( the chip turns off, the output voltage drops to 4.0 V and the chip restarts the cycle).  The Chinese clone turned off completely, and braked with the inclusion (almost hundreds of milliseconds).  Dancing with a tambourine and capacitors did not help, I had to go back to the previous version. <br></li><li>  And after receiving the batch, they found a very ‚Äúwonderful‚Äù bug: When the controller was turned on using a button with a certain probability (from 10 to 95% for different boards), the processor was dead shut. <br>  And this was never observed, if you include a plugging power plug. <br>  Here the well-known problem of the IMX233 processor was manifested - moodiness to power. <br>  When the button was turned on, there was a slight disturbance on line 5B, which caused it to hang.  The problem was easily solved by replacing the capacitor from 10 ŒºF to 1 ŒºF in the right place, but as they say, the sediment remained. <br></li></ul><br><br><h4>  Now </h4><br>  The first buyers have already managed to work with the controllers - we can say that the iron part turned out more or less well. <br><br>  With software, things are getting worse now: out-of-the-box support for external Modbus devices is not yet ready, various Oregon Scientific sensors and Noolite devices are supported from 433 MHz radio devices.  The controller has a native simple web interface where you can control the connected devices and watch the sensor readings.  In addition, there is a gate to the Ninja Blocks cloud system, where you can create scripts and rules, watch history, etc. <br>  We are going to finish the support of the local (non-cloud) system with the rules and history soon, the work with Domoticz will be implemented in the first place. <br><br><h4>  What's next </h4><br>  We receive invaluable help from our users on the forum, who are testing updates, and helping us with device support with radio dumps. <br>  But, unfortunately, although all the software is open to us, so far none of the users have participated in software development. <br><br>  Now we have some problem in that we ourselves can implement and test the operation of the device with all possible peripherals.  We are constantly working on it, but we hope for help from the habrasoobshchestva. <br><br></div><p>Source: <a href="https://habr.com/ru/post/230251/">https://habr.com/ru/post/230251/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../230239/index.html">Java Agent on JVM service</a></li>
<li><a href="../230241/index.html">ESA will observe the crash of a space truck in the atmosphere of the Earth from inside the ship</a></li>
<li><a href="../230243/index.html">Lean Big Data on 6 Google services</a></li>
<li><a href="../230247/index.html">6 tools available usability testing for websites</a></li>
<li><a href="../230249/index.html">Are you afraid of gradle as I fear it?</a></li>
<li><a href="../230253/index.html">An animator from Russia is working on creating a 3D version of the intro to Futurama.</a></li>
<li><a href="../230255/index.html">How to discuss money at the interview: the negotiation strategy for the applicant</a></li>
<li><a href="../230257/index.html">Best ways to use Angular.js</a></li>
<li><a href="../230259/index.html">Microsoft fires 18,000 employees</a></li>
<li><a href="../230261/index.html">VMware vCloud Connector Part 1. Product Overview and Base Version Installation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
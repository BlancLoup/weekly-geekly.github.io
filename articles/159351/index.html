<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mash the brain with Forth?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sometimes there is a desire to stretch your brain, which is steeped in object-oriented programming, with something new and unusual. Of course, any fun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mash the brain with Forth?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/93f/edb/9ed/93fedb9edc015b6a14ec3a9f19c4f6cd.jpg" alt="image"><br><br>  Sometimes there is a desire to stretch your brain, which is steeped in object-oriented programming, with something new and unusual.  Of course, any functional programming language such as Haskell, Erlang, Lisp, or OCaml can come to the rescue in this situation.  But now even they can hardly surprise anyone.  No, I want something completely different.  In such a situation, Forth is a stack-based programming language to help us. <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I will consider programming on Forth within the framework of the Ubuntu operating system.  A list of compilers for other operating systems can be found <a href="http://www.forth.org/compilers.html">here</a> .  You can also use the <a href="http://forthfreak.net/jsforth80x25.html">online interpreter</a> Forth, but it does not work very well, but is tolerable.  I will use gforth, which can be set as follows: <br><br><pre><code class="bash hljs">sudo apt-get install gforth</code> </pre> <br>  Everything, as soon as we installed it, can be launched in the Forth terminal interactively by running the command: <br><br><pre> <code class="bash hljs">gforth</code> </pre><br>  But before I write ‚ÄúHello world‚Äù I would like to talk a little about the differences between the syntax of this language and the usual one.  Surely, many of you are accustomed to the infix notation (when the operation sign stands between operands), some will not be scared by the prefix notation (when the operator is standing before the operands), but the Fort has gone its own way - it uses the reverse Polish notation, that is, the postfix notation.  For example, to add two numbers, you need to write this: <br><br><pre> <code class="cpp hljs"><span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> +</code> </pre><br>  As a result of this operation, we get 3. But this is not all features of the Fort.  Initially, the core of this language is a kind of dictionary: a set of words with which we can perform some subset of operations on data.  In this case, the main unit of the language itself is the WORD.  We can use existing words (DUP - duplicate the element lying on top of the stack, SWAP - swap the top two elements of the stack, and so on), and define our own.  In general, it is the definition of one‚Äôs words, through the available, and then more and more new and new words - this is the main mechanism of programming on Forte. <br><br>  Unusually it all sounds right?  At first glance, it looks very difficult, but in fact the Fort is one of the simplest programming languages ‚Äã‚Äãin terms of compiler implementation, and in terms of syntax elements of the language too. <br><br>  Okay, the introductory voice seems to be voiced and now you can look at Hello world in this language: <br><br><pre> <code class="cpp hljs">.<span class="hljs-string"><span class="hljs-string">" Hello world"</span></span></code> </pre><br>  If we execute this command interactively, then in response we will receive: <br><br><pre> <code class="bash hljs">Hello world</code> </pre><br>  But in reality this shows nothing at all!  In principle, like any other Hello world in any other programming language.  Let's take a look at a few basic principles of writing a Forth program. <br><br>  Forth is a stack language, which means that all passed values ‚Äã‚Äãare put on the stack, and when we perform some operations on them, they are removed from the stack.  For example, put four elements on the stack by doing the following in the interactive shell Forth: <br><br><pre> <code class="cpp hljs"><span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span></code> </pre><br>  Now with the help of the operator to retrieve the top element from the stack (".").  We will pull all items from the stack: <br><br><pre> <code class="cpp hljs"> . . . .</code> </pre><br>  We get the following output: <br><br><pre> <code class="bash hljs">4 3 2 1 ok</code> </pre><br>  That is, we saw the FILO principle in action: the first element put on the stack was last removed from the stack.  Let's now try to perform the following arithmetic operation: (2 + 4) * 5/10. As a result, we should get 3. At Forte, we can write this operation as follows: <br><br><pre> <code class="cpp hljs"><span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> + <span class="hljs-number"><span class="hljs-number">5</span></span> * <span class="hljs-number"><span class="hljs-number">10</span></span> / .</code> </pre><br><br>  We need a point at the end of the expression in order to output the top element of the stack.  At the time of the "point", this element will be the result we need. <br><br>  But only such calculations will not go far.  Let's see how you can define your own words using the example of a word for squaring a number.  To do this, we need to recall the word duplication of the top element of the DUP stack: <br><br><pre> <code class="cpp hljs">: POW DUP * . ;</code> </pre><br>  Everything, we have defined our own word, which can be used like this: <br><br><pre> <code class="cpp hljs"><span class="hljs-number"><span class="hljs-number">4</span></span> POW</code> </pre><br>  As a result, we get 16. Let's take a closer look at what we wrote here.  First, after the colon, we need to give a name to our word, then after the space we begin to describe the body of our word.  First we say that we need to duplicate the top element of the stack, and then multiply the two top elements.  Here, in fact, we got the word for the exponentiation, you just need to remember that everything in Forte needs to be separated by a space, for example, such a record will not work: <br><br><pre> <code class="cpp hljs">:POW DUP * . ;</code> </pre><br>  In fact, the mechanism for defining words is very flexible, with the help of it you can create very complex words that can be used to produce even more complex words. <br><br>  The Forte also has a branch statement (if) and a loop (do ... loop), but they can only be used in the definition of words.  And there is one feature in using if.  Let's try to write something using branching: <br><br><pre> <code class="cpp hljs"> : testif dup <span class="hljs-number"><span class="hljs-number">1</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> .<span class="hljs-string"><span class="hljs-string">" One"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> dup <span class="hljs-number"><span class="hljs-number">2</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> .<span class="hljs-string"><span class="hljs-string">" Two"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> dup <span class="hljs-number"><span class="hljs-number">3</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> .<span class="hljs-string"><span class="hljs-string">" Three"</span></span> then then then drop ;</code> </pre><br>  By the way, the Fort is case-insensitive, so dup and DUP are one and the same. <br><br>  As can be seen from the code, each time before comparing an element we make a copy of it.  This is necessary due to the fact that during the comparison the item is removed from the stack, that is, we cannot use it again.  This can be verified by sequentially executing three commands: <br><br><pre> <code class="cpp hljs"><span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span></code> </pre><br><pre> <code class="cpp hljs">&lt;</code> </pre><br><pre> <code class="cpp hljs">.S</code> </pre><br>  Here we first put two numbers on the stack, then perform the operation of comparing the two top elements of the stack.  She takes them out, compares and puts the result on the stack.  The third command displays the entire contents of the stack, which will be a single number: -1.  Minus one in Forth is a boolean "truth" and zero is a "lie." <br><br>  Therefore, we duplicate the top element so that it can be used for comparison in the next branch.  Basically, if we write this: <br><br><pre> <code class="cpp hljs">: testif dup <span class="hljs-number"><span class="hljs-number">1</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> .<span class="hljs-string"><span class="hljs-string">" One"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> dup <span class="hljs-number"><span class="hljs-number">2</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> .<span class="hljs-string"><span class="hljs-string">" Two"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> .<span class="hljs-string"><span class="hljs-string">" Three"</span></span> then then then ;</code> </pre><br>  we will get the same result, but this option is not accepted, as we deteriorate the readability of the code.  Although we have reduced the code by two words (dup and drop (removal of the top element of the stack)), but it will worsen readability. <br><br>  Now let's look at the cycle: <br><br><pre> <code class="cpp hljs"> : doloop <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> cr .<span class="hljs-string"><span class="hljs-string">" Some text"</span></span> loop ;</code> </pre><br>  Here we print the text 10 times.  First we define the word, then in the reverse order (we have the stack language), we indicate the stack boundaries (10 0 do), then we perform some actions (in our case, we print the text each time), and then we indicate that this is a cycle ( loop). <br><br>  In general, we now own a certain set of syntax elements of the Fort language in order to write something more or less complicated. <br><br>  Let's define a word that calculates the factorial of a given number: <br><br><pre> <code class="cpp hljs">: FACTORIAL recursive dup <span class="hljs-number"><span class="hljs-number">1</span></span> &gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> dup <span class="hljs-number"><span class="hljs-number">1</span></span> - FACTORIAL * <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> drop <span class="hljs-number"><span class="hljs-number">1</span></span> endif ; : OURLOOP swap <span class="hljs-number"><span class="hljs-number">1</span></span> + swap <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> i . i .<span class="hljs-string"><span class="hljs-string">" ! = "</span></span> i FACTORIAL . cr loop ;</code> </pre><br>  And now let's try our word in action in action: <br><br><pre> <code class="cpp hljs"><span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> OURLOOP</code> </pre><br>  If this language has interested you, then you can safely delve into it further, studying the literature and resources devoted to it.  For example, I used the book ‚ÄúStarting FORTH‚Äù by Leo Brodie, which is available as a <a href="http://www.forth.com/starting-forth/">web-resource</a> and, by the way, is very nice to read for this article. <br><br>  This language is not bad knead the brain, pushing the scope of ideas about programming is no worse than Haskell, for example.  And finally, a joke about Forth: <br><br>  "Yoda Jedi Master's Speech is a mystery revealed - there is just an old programmer on Forte" </div><p>Source: <a href="https://habr.com/ru/post/159351/">https://habr.com/ru/post/159351/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../159341/index.html">Terminal with pictures on python: proof of concept</a></li>
<li><a href="../159343/index.html">Siklu - wireless gigabit without frequencies. Installation experience</a></li>
<li><a href="../159345/index.html">About the dangers of part time employment</a></li>
<li><a href="../159347/index.html">Russian look at the Power of Community conference in Seoul</a></li>
<li><a href="../159349/index.html">RDS-like service for PostgreSQL</a></li>
<li><a href="../159353/index.html">Bundle Transformer 1.6.10 released</a></li>
<li><a href="../159355/index.html">Big Trouble (or "How I Gathered Geese in the Server Room")</a></li>
<li><a href="../159357/index.html">iTunes Music Store in Russia is already at the testing stage</a></li>
<li><a href="../159359/index.html">Approaches to the implementation of the adaptive menu</a></li>
<li><a href="../159365/index.html">IBM conducted a neurocomputer simulation comparable to that of a human brain.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
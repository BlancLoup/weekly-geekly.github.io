<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to make Linux kernels from Windows?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Practical experience in the development of protective equipment applied 
 We are starting to publish a series of practical articles on the particular ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to make Linux kernels from Windows?</h1><div class="post__text post__text-html js-mediator-article"><h5>  Practical experience in the development of protective equipment applied </h5><br>  We are starting to publish a series of practical articles on the particular issues of the implementation of the imposed remedies, namely, embedding in software systems.  On the example of the <a href="http://ru.wikipedia.org/wiki/Linux">Linux kernel,</a> the methods and tools used to modify, extend and supplement its functionality will be discussed. <br><br>  The first article will be introductory with a brief overview of key embedding methods.  Next, we take a closer look at the individual methods of embedding, paying attention to technical details. <br><br><a name="habracut"></a><br><h4>  Approaches to building remedies </h4><br>  In accordance with common practice, a model including categories of confidentiality, integrity and availability is used as a standard model of information security.  At the same time, protected systems are systems that are assigned the functions of implementing this model.  Being the basic element of such a system, the core of the operating system (OS) plays a crucial role in the process of ensuring the protection of information; therefore, the issue of enhancing its security is of paramount importance. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There are two approaches to building remedies: built-in tools and cash-on tools.  Built-in tools are characterized by the initial presence in the protected system, while the imposed funds are introduced into the protected system during its operation, prior to its operation. <br><br>  Each approach has its strengths and weaknesses that define the limits of applicability.  Often the forte of one approach is a weak point of the other.  So, the advantages of the built-in protection include the absence of the need to verify the authenticity of the protected system;  the same is a lack of funds imposed - how to determine what is protected authentic?  On the other hand, the integration of the built-in protection into the protected system carries with it a restriction on the choice of the supplier of the operating system components and the protection itself.  This problem is particularly acute in the Russian market, where the certification of systems plays an important role, and the built-in protection tools do not always meet the requirements determined by regulators (see the requirements of the <a href="http://fstec.ru/">FSTEC of</a> Russia). <br><br><h4>  Goals and objectives of embedding in software systems </h4><br>  Like any software system, the core of an operating system is a set of interrelated software modules (components) that make up a common computing system.  The implementation of the imposed means of protecting the OS kernel, and in particular the Linux kernel, implies the need to be embedded in the mechanisms of its subsystems.  At the same time, embedding refers to the process of introducing additional (third-party) program elements, carried out in such a way that, on the one hand, the functioning of the system itself remains, and on the other, its functionality is expanded or changed. <br><br>  Speaking of embedding, we will consider the following practical problem.  Let there be some target component of the software system, functioning in accordance with a given (basic) algorithm.  It is necessary to modify the operation of this component so as to be able to make specific changes to this basic algorithm. <br><br>  Thus, the main purpose of embedding is to obtain the ability to control, modify and expand the functions of the components of the software system, whereas the main task of embedding is to ensure implementation into the existing software system while maintaining its functionality.  Successfully performed embedding is characterized by the preservation of the functioning of the software system in the presence of a new component in its composition. <br>  Being a central part of modern software systems, the OS kernel acts as an intermediary between applications and devices that perform data processing at the hardware level.  In this case, its main task is the effective management of resources. <br><br><h4>  About embedding in the Linux kernel </h4><br>  By its architecture, the Linux kernel is a monolithic kernel with support for the possibility of extending functionality through modules that are loaded as needed in the process.  Given this feature, there is an opportunity for the Linux kernel to develop extensions that, being actually part of the kernel, can redefine / supplement its various functions, i.e.  actually change the order of its subsystems. <br><br>  Considering the components of the software systems as various kinds of application and system programs running on the corresponding hardware, it is possible to establish a link between embedding and obtaining the possibility of intercepting control during the execution of sections of these programs.  In this case, the program code that handles such situations is called an intercept code or, more simply, a hook.  The terms interception (control) and embedding are considered to be similar and, if this is not specified separately, are used to denote the same.  However, one should keep in mind the existing distinction between them: embedding is an implementation process in a general sense, while interception rather points to a specific methodical technique. <br><br>  A distinctive feature of dynamic embedding methods is that there is no need to reboot the target system in order for the expected changes to take effect.  As a rule, interception objects are functions - elements of the kernel code that implement one or another algorithm.  Less commonly, embedding occurs in such system mechanisms as exception handlers and, in particular, the system call manager. <br><br>  Intercepting kernel functions is a basic method that allows you to redefine / supplement its various mechanisms.  Based on the fact that the Linux kernel is written almost entirely in C, with the exception of small architecture-specific parts, it can be argued that to implement embedding in most of the kernel components, it is enough to be able to intercept the corresponding functions. <br><br>  Exception handling underlies the functioning of a variety of system mechanisms.  As a result, intercepting exception handlers of the Linux kernel allows you to increase the degree of control over the system, while intercepting the system call manager allows you to regulate application software requests to Linux kernel services. <br><br>  Traditional methods of embedding are based on <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D0%25B0%25D1%2582%25D1%2587">patching</a> (eng., Patching), a technique for making changes to a code or data that allows you to modify the behavior of the target algorithm as required.  Technically, the result of the patch is to change the contents of the cells in the RAM.  However, code modification, in contrast to data modification, has its own characteristics, related primarily to the fundamental difference between code and data. <br>  The implementation of interception using the patching technique requires qualification, as well as an understanding of the principles of operation not only of the kernel itself, but also of the features of the used hardware platform.  When modifying the code, it is worth paying special attention to the correctness of embedding in the case of multiprocessor systems, because as a result of the changes the coherence should not be violated.  In addition, it is necessary to take into account the need to bypass the mechanisms for protecting the kernel code from modification, as well as the features of searching and using hidden and non-exported characters.  Anyway, in most cases, patching allows you to solve the problem of embedding. <br><br>  The lack of patching can be considered a necessary violation of the integrity of the components of the target system.  Making changes to the code can easily be detected, which in some contexts is a fundamental limitation.  An example of such restrictions is, in particular, the Windows kernel protection mechanism - <a href="http://en.wikipedia.org/wiki/Kernel_Patch_Protection">Kernel Patch Protection</a> , better known as PatchGuard.  One of its features is the implementation of integrity monitoring of key components of the OS kernel, which negates most standard embedding methods based on code modification.  In this case, disabling this tool to install the overlay is an extreme option, since  in the absence of redundant functionality in an embedded security feature, the overall security of the system is obviously reduced. <br><br>  To implement embedding while preserving the integrity of the target components, methods should be used that are free from such restrictions.  As a rule, some of these methods use the hardware capabilities of the platform (for example, hardware breakpoints), which in principle cannot be universal, considering at least the limitations on the number of interceptions to be installed.  On the other hand, it is always possible to use all sorts of virtual functions and other dynamically replaceable pointers that allow you to redefine the behavior of the system within certain limits.  The latter, in particular, is common for intercepting operations carried out within the virtual file system ( <a href="http://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B8%25D1%2580%25D1%2582%25D1%2583%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2584%25D0%25B0%25D0%25B9%25D0%25BB%25D0%25BE%25D0%25B2%25D0%25B0%25D1%258F_%25D1%2581%25D0%25B8%25D1%2581%25D1%2582%25D0%25B5%25D0%25BC%25D0%25B0">VFS</a> ), when virtual object tables are used for operations with objects, which can be replaced without modifying the code.  However, this approach also has a number of limitations, the most important of which is that there is no possibility to control the control of which is not provided. <br><br><h4>  Conclusion </h4><br>  Thus, there are ways for embedding in the OS kernel, the use of which for a specific task is more or less expedient.  Patching is a basic method of embedding and can be applicable if there are no restrictions on the preservation of integrity (code).  Otherwise, depending on the situation, architecture-specific solutions (such as using hardware breakpoints), overloading of virtual functions, and other methods can be applied. <br><br>  Anyway, the implementation of embedding into the core allows modifying the logic of its components, and at the same time increasing the degree of its protection by embedding the mezhanizm intended for this. <br><br>  <b>In the next article, we will examine in detail one of the most common methods of embedding - the method of intercepting kernel functions.</b> </div><p>Source: <a href="https://habr.com/ru/post/230697/">https://habr.com/ru/post/230697/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../230685/index.html">Geek Picnic 2014 and my last year picnic experience</a></li>
<li><a href="../230687/index.html">The easiest way to organize video broadcast on the site</a></li>
<li><a href="../230689/index.html">Dedicated servers based on Intel Avoton processors</a></li>
<li><a href="../230693/index.html">IconBIT DVR QX PRO Review: A Curious Recorder with 1080p Shooting 60 FPS</a></li>
<li><a href="../230695/index.html">Two-factor authentication: again about the risks of using SMS and voice calls</a></li>
<li><a href="../230699/index.html">Android NDK, Revision 10 supports Intel 64-bit architecture</a></li>
<li><a href="../230701/index.html">Social networks in Russia, summer 2014: numbers, trends, forecasts</a></li>
<li><a href="../230703/index.html">Using the principles of psychology to increase the conversion of sites. Part 4: The Fitts Act</a></li>
<li><a href="../230705/index.html">Browser robot on Sikuli IDE for the game MusicWars</a></li>
<li><a href="../230711/index.html">We make a desktop device for the manufacture of printed circuit boards in one click</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Desktop Virtualization with Microsoft RemoteFX</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In previous articles we talked about the consolidation , virtualization and optimization of CAD-systems. The solutions proposed there are designed for...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Desktop Virtualization with Microsoft RemoteFX</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/819/fee/712/819fee712cdb75909e347dab2d800966.png" align="left">  In previous articles we talked about the <a href="http://habrahabr.ru/company/depocomputers/blog/131078/">consolidation</a> , <a href="http://habrahabr.ru/blogs/virtualization/134979/">virtualization</a> and <a href="http://habrahabr.ru/company/depocomputers/blog/138070/">optimization of</a> CAD-systems.  The solutions proposed there are designed for use with demanding 3D applications.  In addition, there are a lot of design and graphical tasks that do not need a powerful video subsystem, but which do not have enough performance of standard desktop virtualization systems.  The solution to this spectrum of problems is the topic of this article. <br><br>  Microsoft RemoteFX is a software layer under Microsoft Windows Server 2008 R2 that allows you to distribute video card resources between virtual machines.  This allows applications running in a virtual environment to get better performance when performing graphical tasks of the initial level of complexity. <br><br>  Solution structure: The basis of the solution is a professional dual-processor graphic station.  Depending on the required number of virtual desktops, you need to select the number of video cards and processors.  The <a href="http://www.depocomputers.ru/config_depo_c1765_i138295_m2.aspx%3Futm_source%3Dtopic_020512%26utm_medium%3D%25D0%25A1770R1Ulink%26utm_campaign%3Dhabrahabr">DEPO Race C770R1U model</a> supports up to 2 video cards, and the <a href="http://www.depocomputers.ru/config_depo_c1613_i132890_m2.aspx%3Futm_source%3Dtopic_020512%26utm_medium%3DG790Rlink%26utm_campaign%3Dhabrahabr">DEPO Race G790R</a> model <a href="http://www.depocomputers.ru/config_depo_c1613_i132890_m2.aspx%3Futm_source%3Dtopic_020512%26utm_medium%3DG790Rlink%26utm_campaign%3Dhabrahabr">supports</a> up to 4.  The client side is the <a href="http://www.depocomputers.ru/config_depo_c1808_i139378_m2.aspx%3Futm_source%3Dtopic_020512%26utm_medium%3Dskylink%26utm_campaign%3Dhabrahabr">DEPO Sky 163</a> thin client installed with MS Windows Embedded Standard 7. The terminal communicates with the host using the RDP 7.1 protocol 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><h5>  Server part </h5><img src="https://habrastorage.org/storage2/f4d/1b4/596/f4d1b4596e509879daf2cc3e340ee9b8.jpg" align="left"><br>  As a virtualization server, we chose a graphic station <a href="http://www.depocomputers.ru/config_depo_c1765_i138295_m2.aspx%3Futm_source%3Dtopic_020512%26utm_medium%3D%25D0%25A1770R1Ulink%26utm_campaign%3Dhabrahabr">DEPO Race C770R1U</a> with MS Windows Server 2008 R2 installed and in the following configuration: Intel Xeon X5660 processor, 48GB of RAM (ECC Reg), 3x1TB (RAID5), AMD FirePro V7800P. <br><br><h5>  Client part </h5><br><br><img src="https://habrastorage.org/storage2/a17/448/01a/a1744801a24fd14da9b73188c38d0926.jpg" align="left"><img src="https://habrastorage.org/storage2/952/3b2/ca9/9523b2ca9e5f0fa7128ec31270e80c5c.jpg" align="left"><br>  The role of the terminal is performed by the <a href="http://www.depocomputers.ru/config_depo_c1808_i139378_m2.aspx%3Futm_source%3Dtopic_020512%26utm_medium%3Dskylink%26utm_campaign%3Dhabrahabr">DEPO Sky 163</a> thin client in the configuration: Intel Atom D525 processor, 2GB of RAM, SATA DOM 4GB.  MS Windows Embedded Standard 7 is installed on the thin client to support RDP version 7.1. <br>  The terminal has a compact size and easily attached to the monitor.  The terminal has a single video output, although in principle RemoteFX technology can provide multiple monitors via remote access. <br><br><h5>  Installation and Setup </h5><br><br>  We install Microsoft Windows Server 2008 R2 SP1 on the virtualization server and perform the update.  Then, we raise the role of Hyper-V and Remote Desktop Services.  Next, the RemoteFX service and all the necessary components are added.  After creating the virtual machines and installing the OS with updates, we add a 3D RemoteFX video adapter to the virtual machines.  Further, to optimize performance, it is necessary to configure policies both on the host side and on the client side. <br><br><h5>  Test progress </h5><br>  To assess application performance in a virtual environment, we selected the following products. <br><br><h6>  3DMark 2006 </h6><br>  Testing was conducted in several modes: <br>  1. 15 virtual machines raised, all turned on, 3DMark 2006 test launched on 5 of them <br>  2. 15 virtual machines raised, all included, 1 of them launched the 3DMark 2006 test <br>  3. 15 virtual machines raised, 1 enabled and 3DMark 2006 running on it <br><br>  3DMark 2006 performance in a RemoteFX environment <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/K4AxQqC1Tz4%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhinkj81eCZjRFZ9MrHGMR8kuMV-jA" frameborder="0" allowfullscreen=""></iframe><br><br>  The result of the first mode was different from the result (9740) of the third mode by one and a half times. <br><img src="https://habrastorage.org/storage2/94b/0b5/238/94b0b52381a7dd47634160b6020c9d4c.jpg"><br>  But, analyzing the system load during testing, I concluded that the performance decreased due to the disk subsystem - three disks could not cope with one-time requests.  As for the video, RemoteFX allocates isolated resources to each machine, and the load on one does not affect the performance of the other. <br><br><h6>  Video playback </h6><br>  Watching video through remote access showed good results. <br>  HD video playback in a RemoteFX environment <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/oQHeMB65cGU%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhjsDV1G6sgl2H0k8JSC5IpJImHntA" frameborder="0" allowfullscreen=""></iframe><br><br>  Of course, you should not use this technology exclusively for viewing HD-content, but for work related to video processing, this solution is quite suitable.  The performance of the video subsystem of the virtual machine is enough to ensure the work in video processing, raster and vector graphics in Adobe software products. <br><br><h6>  3DsMAX performance </h6><br>  We are well aware that RemoteFX desktop virtualization is not designed for heavy 3D applications, including due to the support of maximum DirectX 9 and OpenGL 1.3.  But we still could not resist and tested the system in 3DsMAX 12, and the result did not disappoint us. <br>  We checked the performance with the native Nitrous driver, in different modes - including realistic.  Performance is adequate when performing tasks of the initial level of complexity (up to 10M polygons). <br><br>  3DsMAX performance when working with animated objects <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/G-59ZQ6K2fE%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhiTU228f33A91whBAxQkUnRk_h62g" frameborder="0" allowfullscreen=""></iframe><br><br>  3DsMAX performance in Realistic mode <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/1_Ughzv_Lsc%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhhneeAPDbB2J1ZHA77rGiro72wqhg" frameborder="0" allowfullscreen=""></iframe><br><br><h6>  Windows Aero Performance </h6><br>  Aero works, although not as smoothly as with local work. <br>  Windows Aero in the RemoteFX environment <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/eAXIunZWcAA%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhgrF2g0ZjinjRUm4vZu9m2QmLQ6IQ" frameborder="0" allowfullscreen=""></iframe><br><br><h6>  Found spit on a stone ... </h6><br>  The daunting task for RemoteFX turned out to be ... yes, yes - "Solitaire" <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/Sz3jPLJgJgM%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhh2eCJ6DKB7RVl6uXo4dinuTYFHVQ" frameborder="0" allowfullscreen=""></iframe><br><br>  If someone has real problems that are suitable for testing in the RemoteFX environment, and there is interest, then we ask you to share the materials, and we in turn will share the results. <br><br>  Configuring hardware and software: <a href="http://habrahabr.ru/users/mortred/" class="user_link">Mortred</a> <br>  Testing and article preparation: <a href="http://habrahabr.ru/users/usikoff/" class="user_link">Usikoff</a> </div><p>Source: <a href="https://habr.com/ru/post/143157/">https://habr.com/ru/post/143157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../143152/index.html">What overcomes the power of innovation?</a></li>
<li><a href="../143153/index.html">Dr. Web: server can not be punished pardon</a></li>
<li><a href="../143154/index.html">Karmavyeuer as a weakly bundled module to HabrAjax</a></li>
<li><a href="../143155/index.html">The official release of the mobile platform Tizen 1.0 Larkspur</a></li>
<li><a href="../143156/index.html">The use of computers in the formula 1 (Part 1)</a></li>
<li><a href="../143158/index.html">Introduction to CSS3 Multicolumn. We work with speakers</a></li>
<li><a href="../143159/index.html">JavaFX on Raspberry Pi</a></li>
<li><a href="../143160/index.html">Meet May and 2GIS 3.6</a></li>
<li><a href="../143161/index.html">RIM puts everything on BlackBerry 10</a></li>
<li><a href="../143162/index.html">Realtime monitoring system of user activity on the site. Now on Node.js + Socket.IO</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
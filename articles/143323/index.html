<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using the Microsoft Bing Translator API in Your Application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! 

 Sometimes there is a need to translate data entered by the user on the site (to generate CNC on sites, with multilingual content, etc.). ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using the Microsoft Bing Translator API in Your Application</h1><div class="post__text post__text-html js-mediator-article">  Good day! <br><br>  Sometimes there is a need to translate data entered by the user on the site (to generate CNC on sites, with multilingual content, etc.).  Since the Google Translate API is currently only available for money, the Bing Translator API can be used as a solution. <br><a name="habracut"></a><br>  Microsoft's official website has instructions for use ( <a href="http://msdn.microsoft.com/en-us/library/dd576287.aspx">http://msdn.microsoft.com/en-us/library/dd576287.aspx</a> , <a href="http://www.microsoft.com/web/post/using-the-free-bing-translation-apis">http://www.microsoft.com/web/post/using-the-free-bing -translation-apis</a> ), but, in my opinion, they are quite confusing and verbose, I will describe a simple algorithm for connecting and using the service. <br><br>  To use Microsoft's services, you usually need Windows Live Id.  Previously, to use the Bing Translator API, it was enough to get the Bing App ID of the application by registering it at <a href="https://ssl.bing.com/webmaster/developers/appids.aspx">https://ssl.bing.com/webmaster/developers/appids.aspx</a> .  Now this mechanism <a href="http://social.msdn.microsoft.com/Forums/en-US/microsofttranslator/thread/02054a7c-090c-46a0-a8d1-2d57e236eb4d">is considered obsolete and is no longer supported</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At this point, to use the translator API in your application, you need to do the following. <br><br>  1. Get Windows Live Id (by registering at <a href="">https://accountservices.passport.net/reg.srf</a> ) <br><br>  2. Log in to Live Id at datamarket.azure.com and register there, then select Microsoft Data in the Data Translator section.  There will be a list of tariffs on the right, we need the lowest one - free, we subscribe to it (Sign up). <br><br>  3. Go to the <a href="https://datamarket.azure.com/developer/applications">"application"</a> section, register a new application.  Client ID is filled randomly, Client secret is already generated.  Redirect URI specify any, it is not used. <br><br>  4. Now you can start using.  The general concept of working with the API is as follows.  A client accesses https to Microsoft's OAuth service, passing its client_id and client_secret in a POST request.  A json-serialized object is returned in response, which has an access_token field.  The token is valid for 10 minutes, then you need to re-request it. <br>  After the access_token is received, you can send a GET request to the translator by signing a token.  One way of signing is to pass the getIt parameter appId = Bearer TOCEN VALUE (along with a space).  In the same gett request the data that needs to be transferred is transmitted.  If successful, the answer is the translated string. <br><br>  I will give an example of a php-class that translates text. <br><br><blockquote>  <font color="#000000">&lt;? php</font> <br>  <font color="#000000">class</font> translate <font color="#009900">{</font> <br><br>  protected <font color="#000088">$ msData</font> <font color="#339933">,</font> <font color="#000088">$ accessToken</font> <font color="#339933">;</font> <br><br>  <font color="#000000">public</font> <font color="#000000">function</font> __construct <font color="#009900">(</font> <font color="#000088">$ msData</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#666666">// client_id and client_secret are stored in the msdata array</font> <br>  <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">msData</font> <font color="#339933">=</font> <font color="#000088">$ msData</font> <font color="#339933">;</font> <br>  <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">initAccessToken</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  protected <font color="#000000">function</font> initAccessToken <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#666666">// get accessToken</font> <br>  <font color="#000088">$ curl</font> <font color="#339933">=</font> <font color="#990000">curl_init</font> <font color="#009900">(</font> <font color="#0000ff">" <a href="https://datamarket.accesscontrol.windows.net/v2/OAuth2-13/%2522">datamarket.accesscontrol.windows.net/v2/OAuth2-13/"</a></font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">curl_setopt_array</font> <font color="#009900">(</font> <font color="#000088">$ curl</font> <font color="#339933">,</font> <font color="#990000">array</font> <font color="#009900">(</font> <br>  CURLOPT_POST <font color="#339933">=&gt;</font> <font color="#009900">true</font> <font color="#339933">,</font> <font color="#666666">//</font> create <font color="#666666">a POST request to get a token</font> <br>  CURLOPT_POSTFIELDS <font color="#339933">=&gt;</font> <font color="#990000">http_build_query</font> <font color="#009900">(</font> <font color="#990000">array</font> <font color="#009900">(</font> <br>  <font color="#0000ff">'client_id'</font> <font color="#339933">=&gt;</font> <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">msData</font> <font color="#009900">[</font> <font color="#0000ff">'clientid'</font> <font color="#009900">]</font> <font color="#339933">,</font> <br>  <font color="#0000ff">'client_secret'</font> <font color="#339933">=&gt;</font> <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">msData</font> <font color="#009900">[</font> <font color="#0000ff">'clientsecret'</font> <font color="#009900">]</font> <font color="#339933">,</font> <br>  <font color="#0000ff">'scope'</font> <font color="#339933">=&gt;</font> <font color="#0000ff">'http://api.microsofttranslator.com'</font> <font color="#339933">,</font> <font color="#666666">// this value is indicated in the documentation</font> <br>  <font color="#0000ff">'grant_type'</font> <font color="#339933">=&gt;</font> <font color="#0000ff">"client_credentials"</font> <font color="#666666">// this value is indicated in the documentation</font> <br>  <font color="#009900">)</font> <font color="#009900">)</font> <br>  CURLOPT_SSL_VERIFYPEER <font color="#339933">=&gt;</font> <font color="#009900">false</font> <font color="#339933">,</font> <br>  CURLOPT_RETURNTRANSFER <font color="#339933">=&gt;</font> <font color="#009900">true</font> <font color="#339933">,</font> <br>  <font color="#009900">)</font> <font color="#009900">)</font> <br>  <font color="#000088">$ response</font> <font color="#339933">=</font> <font color="#990000">curl_exec</font> <font color="#009900">(</font> <font color="#000088">$ curl</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ err</font> <font color="#339933">=</font> <font color="#990000">curl_errno</font> <font color="#009900">(</font> <font color="#000088">$ curl</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$ err</font> <font color="#009900">)</font> <br>  throw <font color="#000000">new</font> Exception <font color="#009900">(</font> <font color="#0000ff">"curl err <font color="#006699">$ err</font> "</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ r_obj</font> <font color="#339933">=</font> <font color="#990000">json_decode</font> <font color="#009900">(</font> <font color="#000088">$ response</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#339933">!</font> <font color="#990000">isset</font> <font color="#009900">(</font> <font color="#000088">$ r_obj</font> <font color="#009900">)</font> <font color="#009900">)</font> <br>  throw <font color="#000000">new</font> Exception <font color="#009900">(</font> <font color="#0000ff">"illegal response: <font color="#006699">$ response</font> "</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">accessToken</font> <font color="#339933">=</font> <font color="#000088">$ r_obj</font> <font color="#339933">-&gt;</font> <font color="#004000">access_token</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> <font color="#000000">function</font> translate <font color="#009900">(</font> <font color="#000088">$ text</font> <font color="#339933">,</font> <font color="#000088">$ lang_to</font> <font color="#339933">,</font> <font color="#000088">$ lang_from</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000088">$ query_arr</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <br>  <font color="#0000ff">'appId'</font> <font color="#339933">=&gt;</font> <font color="#0000ff">'Bearer'</font> <font color="#339933">.</font>  <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">accessToken</font> <font color="#339933">,</font> <br>  <font color="#0000ff">'text'</font> <font color="#339933">=&gt;</font> <font color="#000088">$ text</font> <font color="#339933">,</font> <br>  <font color="#0000ff">'from'</font> <font color="#339933">=&gt;</font> <font color="#000088">$ lang_from</font> <font color="#339933">,</font> <br>  <font color="#0000ff">'to'</font> <font color="#339933">=&gt;</font> <font color="#000088">$ lang_to</font> <font color="#339933">,</font> <br>  <font color="#0000ff">'contentType'</font> <font color="#339933">=&gt;</font> <font color="#0000ff">'text / plain'</font> <br>  <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ query</font> <font color="#339933">=</font> <font color="#990000">http_build_query</font> <font color="#009900">(</font> <font color="#000088">$ query_arr</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ url</font> <font color="#339933">=</font> <font color="#0000ff">'http://api.microsofttranslator.com/V2/Http.svc/Translate?'</font>  <font color="#339933">.</font>  <font color="#000088">$ query</font> <font color="#339933">;</font> <br>  <font color="#000088">$ curl</font> <font color="#339933">=</font> <font color="#990000">curl_init</font> <font color="#009900">(</font> <font color="#000088">$ url</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">curl_setopt</font> <font color="#009900">(</font> <font color="#000088">$ curl</font> <font color="#339933">,</font> CURLOPT_RETURNTRANSFER <font color="#339933">,</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ response</font> <font color="#339933">=</font> <font color="#990000">curl_exec</font> <font color="#009900">(</font> <font color="#000088">$ curl</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ err</font> <font color="#339933">=</font> <font color="#990000">curl_errno</font> <font color="#009900">(</font> <font color="#000088">$ curl</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$ err</font> <font color="#009900">)</font> <br>  throw <font color="#000000">new</font> Exception <font color="#009900">(</font> <font color="#0000ff">"curl err <font color="#006699">$ err</font> "</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ xml</font> <font color="#339933">=</font> <font color="#000000">new</font> SimpleXMLElement <font color="#009900">(</font> <font color="#000088">$ response</font> <font color="#009900">)</font> <font color="#339933">;</font>  <font color="#666666">// get the translation string from the xml-response</font> <br>  <font color="#b1b100">return</font> <font color="#009900">(</font> string <font color="#009900">)</font> <font color="#000088">$ xml</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> </blockquote><br><br>  I hope this post will be useful to those who decide to connect the online translator to their application. </div><p>Source: <a href="https://habr.com/ru/post/143323/">https://habr.com/ru/post/143323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../143317/index.html">We write our API for the site using Apache, PHP and MySQL</a></li>
<li><a href="../143318/index.html">Multitasking in Continuation Based Microcontrollers</a></li>
<li><a href="../143320/index.html">Backing up Mikrotik to Subversion via SSH / SFTP</a></li>
<li><a href="../143321/index.html">Apple and Samsung share the revenue of almost the entire mobile market.</a></li>
<li><a href="../143322/index.html">Writing complex interfaces with Spine.js</a></li>
<li><a href="../143324/index.html">Installing iOS 4.2 simulator in Xcode 4.3</a></li>
<li><a href="../143325/index.html">What does the Titanium SDK update to version 2.0 carry?</a></li>
<li><a href="../143327/index.html">A little paranoia for online storage</a></li>
<li><a href="../143330/index.html">I am looking for a team of like-minded people</a></li>
<li><a href="../143331/index.html">PHP vulnerability in CGI mode</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
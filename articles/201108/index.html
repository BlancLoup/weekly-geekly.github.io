<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Web performance: how Swish.com got 40% faster</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Users do not like to wait. Study by study demonstrates that the speed of the site significantly affects visitors: for slow sites, visits are shorter, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Web performance: how Swish.com got 40% faster</h1><div class="post__text post__text-html js-mediator-article">  Users do not like to wait.  <a href="http://www.websiteoptimization.com/speed/tweak/psychology-web-performance/">Study</a> by <a href="http://www.strangeloopnetworks.com/resources/infographics/web-performance-and-ecommerce/impact-of-1-second-delay/">study</a> demonstrates that the speed of the site significantly affects visitors: for slow sites, visits are shorter, users browse pages less and even less often make purchases on slow sites.  Every site owner should take its productivity seriously, as it significantly affects business results. <br><br>  We are pleased to announce that it has become easier to test the performance of sites, thanks to the new F12 tools designed to find and fix related problems.  In this case, we used the <a href="http://www.modern.ie/report">Modern.ie scanner</a> and the <a href="http://www.modern.ie/en-us/article/performance-measurement-with-f12-developer-tools">UI profiler</a> from the new F12 set in IE11.  We showed these tools to the developers at the <a href="http://www.swish.com/">swish.com</a> team to find out how a popular site can use them to optimize the performance of typical usage scenarios.  The result - the site loading has become 2 seconds faster: a 40% increase in productivity thanks to several simple changes in the code. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/SkgEVVzsm7w%3Ffeature%3Doembed&amp;xid=17259,1500004,15700021,15700186,15700191,15700253&amp;usg=ALkJrhiEoSeV3sPZBZthS0qqee10J6XGFA" frameborder="0" allowfullscreen=""></iframe>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is important to note that the performance problems of the site, in most cases, manifested themselves in the same way in all browsers.  Almost all modern browsers performed the same operations.  Good tools for web developers just help find bottlenecks and improve overall performance.  These improvements will help speed up the site in all browsers, not only in Internet Explorer. <br><br><a name="habracut"></a><br><br><h2>  Here's how we did it. </h2><br><h4>  Swish.com Analysis </h4><br>  Swish.com collects the most interesting pre-order items from Kickstarter, Indiegogo, Amazon, Outgrow.me, Dragon Innovation, and Crowd Supply, giving you the opportunity to see the most impressive technical innovations in one place. <br>  Like many similar sites, swish.com uses both static elements and content downloaded via AJAX queries from the database.  The result is displayed in a grid with large images of products. <br><br>  The performance of swish.com at the start of the project was satisfactory, but we noticed a significant delay in the initial loading of the site.  Our task was to find simple ways to optimize the site code, which would allow users to quickly move to search for products. <br><br><h4>  We look at the tab ‚ÄúUser Interface Response‚Äù </h4><br>  We started testing with the ‚ÄúUser Interface Response‚Äù tab in the F12 tools of Internet Explorer 11. Below is the result we got before starting the optimization: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/6b1/989/376/6b1989376b4b66de6d2994828da67f1d.png"></a> <br><br>  The ‚ÄúUser Interface Response‚Äù tab is a new tool in the F12 suite, and it definitely deserves attention.  The graphics in the upper part of the window shows all the activities that occur during the page loading.  Color coding shows which tasks the CPU was used for: blue ‚Äî file downloads, red ‚Äî JavaScript, etc.  The same colors are used in the diagram below. <br><br>  You can select any part of the graph with the mouse to see which events took place at that moment.  The selected area is highlighted in white, with the details displayed in the diagram below.  The panel on the right serves to display additional information for each selected event. <br><br>  From the graph it can be understood that when loading the site there are periods of very low activity (white gaps between the colored columns).  This means that the page is waiting for content to arrive from the server.  There are also some moments when the page is actively executing JavaScript and can not do anything other than that.  We will try to use the knowledge of these two facts to optimize the page. <br><br><h4>  Let's dig deeper: Network tab </h4><br>  Many optimization options are associated with changing the order of loading files.  See which files the page loads and in what order in the ‚ÄúNetwork‚Äù tab: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/85b/3db/38c/85b3db38ce2deb22a3063d4401cda188.png"></a> <br><br>  Typically, Internet Explorer caches files locally and tries to avoid wasting time requesting files from the server.  For optimization purposes, of course, we need to simulate the situation when a user visits the site for the first time, and there are no files in the cache yet.  To do this, click the ‚Äúalways update from server‚Äù button at the top of the window before you start recording.  After that, you need to click on the "enable collection of network traffic" and refresh the page. <br><br>  Tasks in the received network activity graph are also color coded: red - the time between creating a request and actually sending it, yellow - waiting from the moment the request is sent until the first byte of the result is received, and blue means the time to load the result. <br><br>  Large white spans that are not occupied by any activities (for example, a space after loading load_templates.js) mean moments when the network is not actually used.  They coincide with the spaces we saw above in the ‚ÄúUser Interface Response‚Äù tab.  Approaching these areas, we can understand exactly where optimization is possible. <br><br><h4>  First results </h4><br>  The information we received from the IE11 developer tools is enough to create a site load optimization plan.  What we saw on swish.com is also easy to find on many other sites, so the tips below can be widely used for optimization. <br><br><h5>  Download CSS first, then JavaScript </h5><br>  Most browsers, when loading a page, perform ‚Äúspeculative downloading‚Äù - the procedure for scanning HMTL code and searching for items that you can go to download immediately in order to maximize the connection capacity.  The correct order of different file types, especially scripts and CSS, is extremely important to maximize download speeds.  A good tip is to load external CSS files as early as possible, because the browser will not be able to correctly display the page without CSS.  Javascript can wait. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/8bb/303/b1e/8bb303b1e37bed25460cbcac1336f09e.png"></a> <br><br>  In this case, the ‚ÄúNetwork‚Äù tab shows that on swish.com JavaScript is requested before CSS, before the scripts are needed to display the page.  The request for the jquery.min.js and url.js files can be moved down to the closing tag.  In the extreme case, external scripts can be at the end of the head section, but always after all the CSS. <br><br><h5>  Use Gzip to compress files. </h5><br>  Using Gzip to compress files containing mostly text (HTML, CSS, JavaScript) can significantly reduce their size and, therefore, speed up the download.  If we select the HTML page and look in the ‚ÄúDetails‚Äù tab of the ‚ÄúNetwork‚Äù tab, we will see that Gzip compression is not used (a page using compression will have a corresponding header).  It turned out that Gzip compression was used earlier when the site was on a different server, but was not turned on after the move. <br><br> <a href=""><img src="http://img-fotki.yandex.ru/get/6713/25193168.19/0_703fb_e7b7fcfd_XL.png"></a> <br><br><h5>  Consider using embedded fonts. </h5><br>  CSS styles can load other external CSS files using the @ ‚Äçimport directive.  These nested style embeddings can dramatically decrease performance because they interfere with the browser‚Äôs ability to preload (prefetch) content.  If the external style is specified directly in HTML, the browser can immediately send a request to download it, which will reduce the overall page load time.  If the external style has the nested @ import directive, the browser cannot start loading it until the style itself is loaded and processed. <br><br>  In our case, bootstrap.min.css has a nested @ ‚Äçimport directive that loads some fonts.  In the record of network activity, we see that @ ‚Äçimport starts only after bootstrap.min.css is loaded, which causes a significant delay. <br><br> <a href=""><img src="http://img-fotki.yandex.ru/get/4910/25193168.19/0_703fc_ee935375_XL.png"></a> <br><br>  In this case, the @ ‚Äçimport directives were required solely for loading special fonts, so we decided to use built-in fonts instead.  In the general case, the correct solution would be to transfer the link to the files directly into HTML or include the content directly into CSS. <br><br><h5>  Avoid scripts in templates </h5><br>  In the footer template, we found a link to the script.  The F12 tools make this easy to notice, as they show the sources of all requests in the network activity report.  The source of this jquery-cookie.js request is XMLHttpRequest, which is unusual and significantly reduces performance. <br><br> <a href=""><img src="http://img-fotki.yandex.ru/get/9515/25193168.19/0_703fd_d7634e37_XL.png"></a> <br><br>  We do not recommend using scripts in HTML templates.  When jQuery processes scripts inside HTML, the scripts are executed immediately before control returns to the HTML insert script.  In case the script is external, this results in a significant delay caused by waiting for the script to be received from the server.  The situation is very similar to the problem with @ ‚Äçimport for CSS, described above, where additional levels of nesting lead to a delay in getting the content. <br><br>  Solving the problem is also similar to the @ ‚Äçimport situation described above.  Scripts must be inserted directly into the HTML file, so that the browser can preload them.  If possible, you should also combine them and use compression to save network connection resources. <br><br><h5>  Do not rush to download third-party code </h5><br>  Third-party widgets and counters caused a significant part of the delays in downloading and executing the swish.com code.  However, they are not required by the user at the initial stage of working with the site: it is unlikely that someone will want to share something on facebook or twitter - at least a few seconds should be required to read the page.  The JavaScript profiler in IE11 showed that it was third-party code that was the main cause of CPU utilization, which delayed the entire page. <br><br>  In the ‚ÄúNetwork‚Äù tab you can see that the Facebook and Google analytics scripts load even earlier than the page header and footer.  We recommended downloading these scripts after a timeout of a few seconds after the main elements of the page are loaded. <br><br> <a href=""><img src="http://img-fotki.yandex.ru/get/9313/25193168.19/0_703fe_f63e41dd_XL.png"></a> <br><br><h5>  Squeeze pictures </h5><br>  Graphics can be a significant part of downloadable content, especially for a visually rich site like swish.com.  Available online tools such as modern.ie or webpagetest.org help determine which images can be compressed.  You can use tools similar to kraken.io in order to minimize the weight of images, without significant loss of quality.  Before optimization, swish.com received images directly from the original source, and these images were not always optimized.  Using optimized images from their own server, they were able to achieve much faster loading of the site. <br><br>  The good news is that these problems were very easy to solve - almost all of them were fixed.  Here is the record of network activity after optimization: <br><br> <a href=""><img src="http://img-fotki.yandex.ru/get/4905/25193168.19/0_703ff_55f9dd88_XL.png"></a> <br><br><h4>  Before and after: what we won </h4><br>  There are several ways to estimate page loading speed.  Due to the complexity of modern websites, simple measurements, such as time to window.onload, can no longer be an objective indicator.  The performance optimization guru, Steve Souders, explained the reasons and suggested more relevant metrics for measurement on his blog <a href="http://www.stevesouders.com/blog/2013/05/13/moving-beyond-window-onload/">www.stevesouders.com/blog/2013/05/13/moving-beyond-window-onload</a> <br><br>  The website <a href="http://webpagetest.org/">webpagetest.org</a> allows you to see the storyboard video download site, which shows how the user sees it.  We tried this tool to visually assess the download speed of swish.com before and after optimization. <br><br>  Below is a storyboard of loading the page with a breakdown of 0.5 seconds.  It is seen that the appearance of the skeleton of the page occurs after 3 seconds, and the whole page becomes visible only after 5.5 seconds of loading. <br><br> <a href=""><img src="http://img-fotki.yandex.ru/get/9092/25193168.19/0_70400_91341035_XL.png"></a> <br><br>  Our site optimization work, made using the Internet Explorer 11 developer tools, allows you to see the entire site and start using it in 3.5 seconds: <br><br> <a href=""><img src="http://img-fotki.yandex.ru/get/4912/25193168.19/0_70401_70ac2131_XL.png"></a> <br><br><h2>  Happy end </h2><br>  The updated <a href="http://www.modern.ie/en-us/article/performance-measurement-with-f12-developer-tools">developer tools in Internet Explorer 11</a> and the <a href="http://www.modern.ie/report">modern.ie scanner allow</a> you to quickly and easily find and eliminate the bottlenecks that prevent the site from loading quickly.  New analytic tools, such as the ‚Äú <a href="http://msdn.microsoft.com/en-us/library/ie/dn255009(v%3Dvs.85).aspx">User Interface Response</a> ‚Äù tab, allow you to see which particular aspects of performance have the most effect on page load and save time on their search.  We managed to achieve a faster loading of the site for two seconds, and give users a faster interface right after entering the site. </div><p>Source: <a href="https://habr.com/ru/post/201108/">https://habr.com/ru/post/201108/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../201098/index.html">How to create a world, hide the corpse and scour the Persian. Stacks of sandwiched keys. Virtual FMS and Federal Drug Control Service (or who resolves 228 and "powders the nose")</a></li>
<li><a href="../201100/index.html">The basis of AI is human language</a></li>
<li><a href="../201102/index.html">GimBall - a flying robot that bounces off walls like a ball</a></li>
<li><a href="../201104/index.html">Data Center risks: we built, built and finally built ... Or actions on the construction site</a></li>
<li><a href="../201106/index.html">Megaphone has disabled sending sms with an alphabetic addressee</a></li>
<li><a href="../201110/index.html">Airlike - BUMP without striking cams</a></li>
<li><a href="../201112/index.html">Is Wi-Fi Beacon an Alternative to QR Codes?</a></li>
<li><a href="../201114/index.html">Hardware support for the AES algorithm with modern processors</a></li>
<li><a href="../201116/index.html">Google will link the phone number and photo from Google+</a></li>
<li><a href="../201118/index.html">Educational resources and materials on open data</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
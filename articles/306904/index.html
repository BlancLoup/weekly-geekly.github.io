<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We work with a hybrid cloud: VMware vCloud Connector, part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hybrid cloud helps to scale the company's resources at the expense of the service provider‚Äôs capacity. The cloud provider is accessed when it is neces...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We work with a hybrid cloud: VMware vCloud Connector, part 1</h1><div class="post__text post__text-html js-mediator-article">  Hybrid cloud helps to scale the company's resources at the expense of the service provider‚Äôs capacity.  The cloud provider is accessed when it is necessary to quickly obtain additional computing resources, for example, during the delivery of financial statements.  External resources will be useful for remote storage of backups.  In the cloud service provider, you can also configure replication and automatic recovery of virtual machines in the event of an emergency on the main site. <br><br>  In this and the next posts we will tell about the solution of these problems using a hybrid cloud based on VMware. <br>  Today we will talk about <b>VMware vCloud Connector</b> - a solution for managing a distributed virtual infrastructure from a single interface. <br><br><img src="https://habrastorage.org/files/83f/a61/e50/83fa61e50d1c485da54083e431463c2c.png" alt="image"><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  What it is? </h2><br>  <b>VMware vCloud Connector</b> helps you create a hybrid cloud based on the local virtual infrastructure and cloud service provider resources.  With this solution, the owner of the hybrid infrastructure will be able to manage virtual machines located in different infrastructures in one interface: <br><ul><li>  move disabled virtual machines, vApp containers, vApp templates from one infrastructure to another; </li><li>  turn the machine on and off; </li><li>  manage virtual machines through the console; </li><li>  synchronize directories; </li><li>  expand virtual data center with remote infrastructures through VXLAN technology (available if vSphere Distributed Switch is installed in the vSphere infrastructure not higher than version 5.1.); </li></ul><br><br><h2>  What does vCloud Connector consist of? </h2><br>  <b>vCloud Connector Node (vCCN)</b> is a server responsible for transferring data from one virtual infrastructure to another.  It is installed in all infrastructures that connects vCloud Connector.  If we combine the local vSphere and the public cloud based on the vCloud Director, then we deploy the vCloud Connector Node in each of these infrastructures.  One vCloud Connector Node is installed on one organization in vCloud Director. <br><br>  <b>vCloud Connector Server (vCCS)</b> is a management server that controls the vCloud Connector Nodes nodes.  Deployed inside the infrastructure from which we will connect to the service provider cloud. <br><br>  <b>vCloud Connector Client (UI)</b> - management interface.  It will have a list of virtual machines from all the infrastructures connected to vCloud Connect. <br><br><img src="https://habrastorage.org/files/237/608/8fe/2376088fe7ef45a88a6f42790b227e88.png" alt="image"><br>  <i>Workflow of vCloud Connector on the example of vSphere-based infrastructure and vCloud Director-based public cloud</i> <br>  1. In the management interface, the user gives the command to transfer the vApp to the external infrastructure. <br>  2. vCloud Connector Server addresses this command to vCloud Connector Nodes. <br>  3. vCloud Connector Node via the VIM API sends a command to the vCenter Server to export data. <br>  4. During export, the following processes run in parallel: <br><ul><li>  data is transferred from storage to the vCloud Connector Node cache on the internal infrastructure side. </li><li>  data is transferred from the internal infrastructure vCloud Connector Node to the external infrastructure vCloud Connector Node. </li><li>  vCloud Connector Node on the side of the external infrastructure via the vCloud Director API sends a command to import. </li><li>  data is transferred from the vCloud Connector Node cache to the vCloud Director transfer store. </li></ul><br>  5. vCloud Director gives the command vCenter of external infrastructure to import data. <br>  6. Data from the vCloud Director transfer storage is transferred to the vCenter of the external infrastructure.  After that, vApp becomes available in the vCloud Director directory. <br><br><h2>  Installation Instructions </h2><br><br>  In this guide, we will show how to deploy the vCloud Connector if you want to integrate into a vSphere infrastructure and resources in a vCloud Director-based public cloud. <br><br>  1. <b>Access rights.</b>  Accounts in vSphere and vCloud Director must have administrative rights. <br>  2. <b>Ports</b> .  For correct interaction between vCloud Connector Server and vCloud Connector Node, the following ports must be open in the Firewall: <br>  <b>- 443 port</b> for interaction between vCloud Connector Server and vCloud Connector Node, between the vCloud Connector Node nodes themselves, if SSL protocol support is <b><u>enabled</u></b> . <br>  <b>- port 80</b> for interaction between vCloud Connector Server and vCloud Connector Node, between the vCloud Connector Node nodes themselves, if <u><b>the</b></u> SSL protocol is <u><b>disabled</b></u> . <br>  <b>- Port 5480</b> for logging into the vCloud Connector Server web interface and vCloud Connector Node. <br><br><h4>  We deploy vCloud Connector Server in the internal infrastructure (vSphere) </h4><br>  1. <a href="">Download</a> and deploy the vCloud Connector Server template. <br><img src="https://habrastorage.org/files/0f1/7ea/7ff/0f17ea7ff90d45e798a816fed4ee83ec.png" alt="image"><br><br>  2. Set the network parameters of vCloud Connector Server and click <i>Next</i> : <br><ul><li>  <b>Default Gateway</b> - standard gateway; </li><li>  <b>DNS</b> - DNS server addresses separated by commas; </li><li>  <b>Network 1 IP address</b> - internal IP address </li><li>  <b>Network mas</b> k - subnet mask, for example, 255.255.255.0; </li></ul><br><img src="https://habrastorage.org/files/8e6/491/cc3/8e6491cc36ab4f5bb889f484294d28df.png" alt="image"><br><br>  3. Check all settings and click <i>Finish</i> . <br><img src="https://habrastorage.org/files/83a/1d4/b83/83a1d4b83ce04ffb90dba5a8034e07e6.png" alt="image"><br><br>  4. The vCloud Connector Server virtual machine appears in the vSphere Client interface.  For further configuration, select the virtual machine and click on the <i>Power On</i> icon. <br><img src="https://habrastorage.org/files/c3b/b32/8e1/c3bb328e1c9a4990b69a6d3703b1be0e.png" alt="image"><br><br>  5. In the console that opens, you will see the login information for the vCloud Connector Server web interface: URL, login and password. <br>  In the <b>Internet Explorer browser,</b> enter the specified address and log in. <br><img src="https://habrastorage.org/files/bc3/f29/d1e/bc3f29d1e3e8451d8d53ab2da0ef5dab.png" alt="image"><br><br>  6. From the main page, go to the subsection <i>Time Zone</i> and adjust the settings. <br><img src="https://habrastorage.org/files/6d7/00a/ce8/6d700ace873742a29572f5c2353674e4.png" alt="image"><br><br>  7. Adjust the host name if necessary.  Check the correctness of the network settings section <i>Network - Address</i> . <br><img src="https://habrastorage.org/files/773/fae/9d2/773fae9d233846d684a5ddc5c863007c.png" alt="image"><br><br>  8. Change the password in the section <i>Server - General</i> . <br><img src="https://habrastorage.org/files/ebd/e22/441/ebde22441b974f87a7cedbf88dcf343d.png" alt="image"><br><br>  9. If necessary, activate the SSL certificate.  <a href="http://pubs.vmware.com/hybridcloud-27/index.jsp%3Ftopic%3D%252Fcom.vmware.vcc.install.doc%252FGUID-D660208B-901C-41FD-86B3-FF2AD5911953.html">Here is a</a> detailed description of what to do. <br><img src="https://habrastorage.org/files/934/7de/657/9347de657e4f4a8785e119962d8b9c9f.png" alt="image"><br><br>  10. To register the vCloud Connector Server with the vSphere Client, go to the Server-vSphere Client section.  We register: <br><ul><li>  vCloud Connector Server URL - you can use an IP address or domain name; </li><li>  The IP address or domain name of the vCenter Server; </li><li>  username and password of a user with administrator rights in vCenter; </li><li>  If you have previously registered vCloud Connector Server with vCenter, but you want to register a new server, check the Overwrite existing registration box. </li></ul><br>  The tab with the control panel vCloud Connector Server is not closed.  She still useful. <br><img src="https://habrastorage.org/files/7a5/97c/1b8/7a597c1b833f4726aaa9f2347d1b95f8.png" alt="image"><br><br>  11. After installing vCloud Connector Server, the <i>vCloud Connector UI</i> icon appears in the vSphere Client interface.  Through this interface, you will manage the virtual machines in both infrastructures. <br><img src="https://habrastorage.org/files/cea/47a/45d/cea47a45db9642dbb681fc24ca32d240.png" alt="image"><br><br><h4>  We deploy vCloud Connector Node in the internal infrastructure (vSphere) </h4><br><br>  1. <a href="">Download</a> and deploy vCloud Connector Node by analogy with vCloud Connector Server.  The result is a virtual machine with the following parameters: <br><img src="https://habrastorage.org/files/593/76e/535/59376e53524d41e8b0daf9bd45dc7c28.png" alt="image"><br><br>  2. Run the vCloud Connector Node virtual machine: select and click on <i>Power On</i> . <br><img src="https://habrastorage.org/files/ad7/940/fd0/ad7940fd032744429f6085565bb4cbda.png" alt="image"><br><br>  3. Using the URL and credentials, we connect to the vCloud Connector Node administration panel. <br><img src="https://habrastorage.org/files/df1/d9e/b08/df1d9eb08366498684c99a2ad2cef721.png" alt="image"><br><br>  4. Configure Time Zone similarly with vCloud Connector Server.  In the <i>Network - Address</i> section we check the network settings. <br><img src="https://habrastorage.org/files/d2f/f79/cd8/d2ff79cd8c68478198d2c84ed1184a41.png" alt="image"><br><br>  5. Change the password in the <i>Node - General</i> section. <br><img src="https://habrastorage.org/files/f83/59d/fe6/f8359dfe627e45f0a55dd20b084b2845.png" alt="image"><br><br>  6. We register vCloud Connector Node in vSphere infrastructure in the <i>Node - Cloud</i> section. <br><img src="https://habrastorage.org/files/175/819/7bc/1758197bc2f24ea9a34d2078a622c28f.png" alt="image"><br><br>  7. Return to the vCloud Connector Server panel.  In the Nodes section, register the created vCloud Connector Node.  Click <i>Register Node</i> . <br>  Set the name, external IP-address or domain name (Node URL). <br>  In the <i>Cloud Credentials</i> block, select the vSphere and enter the account administrator. <br><img src="https://habrastorage.org/files/357/8f5/450/3578f545008444e8bdfd0126b1bfe542.png" alt="image"><br><br>  8. The registered vCloud Connector Node appears in the list. <br><img src="https://habrastorage.org/files/470/357/0fd/4703570fd1614dbb928f77686609a03e.png" alt="image"><br><br>  <b>Important points when creating vCloud Connector Node:</b> <br>  ‚Ä¢ If an internal address is configured on vCloud Connector Node (RFC 1918), then you need to pre-configure NAT ( <a href="http://www.dtln.ru/help/1402">instructions</a> for vCloud Director) <br>  ‚Ä¢ Disk size vCloud Connector Node 40 GB.  If you plan to move virtual machines with a large disk between the two infrastructures, additionally expand the disk with vCloud Connector Node.  <a href="http://pubs.vmware.com/hybridcloud-27/topic/com.vmware.vcc.install.doc/GUID-531B8675-1543-46C8-846F-9D578B810E5D.html">Here are instructions</a> on how to do this. <br>  ‚Ä¢ If a large bandwidth channel is configured between the vCloud Connector Node of the two infrastructures, then enable the UDT protocol and, if necessary, encryption (Encryption). <br><img src="https://habrastorage.org/files/dcd/b7b/c09/dcdb7bc092b9497fbbd4cff96c989899.png" alt="image"><br><br><h4>  We deploy vCloud Connector Node in an external infrastructure (vCloud Director) </h4><br><br>  1. Add a template to your organization from the Public Catalog and deploy. <br><img src="https://habrastorage.org/files/f98/fd9/403/f98fd940370547a6a3f9368626457a42.png" alt="image"><br><br>  2. Set a name, description and select a virtual data center.  Click <i>Next</i> . <br><img src="https://habrastorage.org/files/3bd/10e/610/3bd10e6101e443668cd6d354a05dd754.png" alt="image"><br><br>  3. Select the type of storage. <br><img src="https://habrastorage.org/files/439/58d/b09/43958db0901b47a78536395485db6d8c.png" alt="image"><br><br>  4. Set the <i>IP Static-Manual</i> selection mode. <br><img src="https://habrastorage.org/files/68d/fc8/7ea/68dfc87ea9184c31934cf79766afcb5a.png" alt="image"><br><br>  5. Set the network parameters of the virtual machine. <br><img src="https://habrastorage.org/files/00a/0fa/f62/00a0faf6219c4157af550c763d5248fa.png" alt="image"><br><br>  6. On the <i>Customize Hardware</i> tab, we recommend not changing anything when the virtual machine is deployed.  This can be done later. <br><img src="https://habrastorage.org/files/6a8/d41/cbd/6a8d41cbd9194eecb5aae647df0d8f03.png" alt="image"><br><br>  7. On the Ready to Complete tab, we check once again all the parameters and click <i>Finish</i> . <br><br>  8. After creating the virtual machine, click on it with the right mouse button and go to <i>Properties - Hardwar</i> e.  In the <i>NICs</i> block <i>,</i> we tick the <i>Connected</i> box and once again register the IP address. <br><img src="https://habrastorage.org/files/b2e/825/efd/b2e825efd3944f41970ec5851f2bb3ba.png" alt="image"><br><br>  9. Run vCloud Connector Node on the vCloud Director side. <br><img src="https://habrastorage.org/files/cc5/0c1/099/cc50c1099c474aa6a7a58517c8373f59.png" alt="image"><br><br>  10. We make the same settings (time zone, network, password) as for the vCloud Connector Node on the vSphere side. <br>  We register vCloud Connector Node in the Node section. <br><img src="https://habrastorage.org/files/9fa/a27/79c/9faa2779cb174470a25e37a7326c71f0.png" alt="image"><br><br>  11. We register the second vCloud Connector Node server with vCloud Connector Server. <br><img src="https://habrastorage.org/files/081/da6/bce/081da6bcefa041ea86630edc84e5ed35.png" alt="image"><br><br><h4>  Connect to the "public" vCloud Connector Node (vCloud Director) </h4><br><br>  Usually vCloud Connector Node is deployed at the level of its organization.  Your provider can deploy vCloud Connector Node at the level of the entire vCloud Director.  In this case, you do not need to deploy anything in your organization.  It remains only to register this "public" Node with vCloud Connector Server. <br>  The procedure is the same as when registering ordinary Node, just be sure to tick the <i>Public</i> . <br><img src="https://habrastorage.org/files/acf/4cd/4b0/acf4cd4b04654016abf442dc0d71eea1.png" alt="image"><br><br><h4>  We register vCloud Connector Nodes in the interface vCloud Connector </h4><br><br>  1. Go to the vSphere Client interface and click on the vCloud Connector icon. <br><img src="https://habrastorage.org/files/cea/47a/45d/cea47a45db9642dbb681fc24ca32d240.png" alt="image"><br><br>  2. We register vCloud Connector Node from an internal infrastructure (vSphere). <br><img src="https://habrastorage.org/files/cd3/2d1/32c/cd32d132c1834d64ab9e3c2e0f892fc0.png" alt="image"><br><br>  3. We register vCloud Connector Node from an external infrastructure (vCloud Director).  In this case, we used vCloud Connector Node, which we installed independently in our organization. <br><img src="https://habrastorage.org/files/bd4/102/23e/bd410223efc54014b89c68dfe2ef267b.png" alt="image"><br><br>  4. To speed up the process, click on Reload. <br><img src="https://habrastorage.org/files/f5e/de6/aaa/f5ede6aaad1e4755866f4b2c24685ea6.png" alt="image"><br><br>  vCloud Connector is ready to go.  In the <a href="https://habrahabr.ru/company/dataline/blog/308418/">next post we</a> will explain how to move virtual machines between infrastructures, synchronize directories and work with VXLAN. </div><p>Source: <a href="https://habr.com/ru/post/306904/">https://habr.com/ru/post/306904/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../306894/index.html">A small script to track prices avito from Google Spreadsheet</a></li>
<li><a href="../306896/index.html">Optical fiber in industrial communication systems</a></li>
<li><a href="../306898/index.html">SMAS: ‚ÄúSorted Multi Array Struct‚Äù ‚Äîan alternative to a binary search tree</a></li>
<li><a href="../306900/index.html">Monitoring applications in IT. Easier than a burger</a></li>
<li><a href="../306902/index.html">Hamlet's smuggling with a cat</a></li>
<li><a href="../306906/index.html">Shake dust from the globe: check the project NASA World Wind</a></li>
<li><a href="../306908/index.html">It doesn't matter if you are big or small. The main thing is not small. Stuffing Material Design</a></li>
<li><a href="../306912/index.html">Moscow Institute of Physics and Technology: the reception of applications to the online magistracy in modern combinatorics is ending</a></li>
<li><a href="../306914/index.html">Understanding Go: io Package</a></li>
<li><a href="../306916/index.html">Stylization of images using neural networks: no mysticism, just matan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
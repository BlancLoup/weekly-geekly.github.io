<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cryptography in Java. Keytool utility</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! I present to your attention the translation of the 10th article "Java Keytool" by Jakob Jenkov from the series of articles for beginners who...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cryptography in Java. Keytool utility</h1><div class="post__text post__text-html js-mediator-article"><p>  Hi, Habr!  I present to your attention the translation of the 10th article "Java Keytool" by Jakob Jenkov from the <a href="http://tutorials.jenkov.com/java-cryptography/index.html">series of articles for beginners</a> who want to learn the basics of cryptography in Java. </p><a name="habracut"></a><br><h2 id="oglavlenie">  Table of contents: </h2><br><ol><li>  <a href="https://habr.com/ru/post/444764/">Java cryptography</a> </li><li>  <a href="https://habr.com/ru/post/444814/">Java cipher</a> </li><li>  <a href="https://habr.com/ru/post/444974/">MessageDigest</a> </li><li>  <a href="https://habr.com/ru/post/445228/">Mac</a> </li><li>  <a href="https://habr.com/ru/post/445330/">Signature</a> </li><li>  <a href="https://habr.com/ru/post/445560/">KeyPair</a> </li><li>  <a href="https://habr.com/ru/post/445560/">KeyGenerator</a> </li><li>  <a href="https://habr.com/ru/post/445560/">KeyPairGenerator</a> </li><li>  <a href="https://habr.com/ru/post/445786/">KeyStore</a> </li><li>  Keytool </li><li>  <a href="https://habr.com/ru/post/446888/">Certificate</a> </li><li>  <a href="https://habr.com/ru/post/446888/">CertificateFactory</a> </li><li>  <a href="https://habr.com/ru/post/446888/">Certpath</a> </li></ol><br><h2 id="utilita-keytool">  Keytool utility </h2><br><p> Java Keytool is a command line tool that can generate public key / private key pairs and store them in <a href="https://habr.com/ru/post/445786/">the keystore</a> .  The executable file of the utility is distributed along with the Java SDK (or JRE), so if you have an SDK installed, it means you will also have it pre-installed. <br>  The executable file is called <code>keytool</code> .  To execute it, open a command prompt (cmd, console, shell, etc.).  and change the current directory to the <code>bin</code> directory in the Java SDK installation directory.  Type <code>keytool</code> , and then press <code>Enter</code> .  You should see something like this: </p><br><pre> <code class="plaintext hljs">C:\Program Files\Java\jdk1.8.0_111\bin&gt;keytool Key and Certificate Management Tool Commands: -certreq Generates a certificate request -changealias Changes an entry's alias -delete Deletes an entry -exportcert Exports certificate -genkeypair Generates a key pair -genseckey Generates a secret key -gencert Generates certificate from a certificate request -importcert Imports a certificate or a certificate chain -importpass Imports a password -importkeystore Imports one or all entries from another keystore -keypasswd Changes the key password of an entry -list Lists entries in a keystore -printcert Prints the content of a certificate -printcertreq Prints the content of a certificate request -printcrl Prints the content of a CRL file -storepasswd Changes the store password of a keystore Use "keytool -command_name -help" for usage of command_name C:\Program Files\Java\jdk1.8.0_111\bin&gt;</code> </pre> <br><p>  As you can see, the <code>keytool</code> utility supports a set of commands for working with keys, certificates and keystores.  This guide will cover the most frequently used of these commands. </p><br><h3 id="skripty-keytool">  Keytool Scripts </h3><br><p>  <code>Keytool</code> utility commands take many arguments, the installation of which can be difficult to remember.  Therefore, it is recommended to create several CMD or Shell scripts with a sequence of <code>Keytool</code> commands.  These scripts make it easy to re-execute commands, and also allow you to go back and see how the keystore was created. </p><br><h3 id="generaciya-klyuchevoy-pary">  Key pair generation </h3><br><p>  Generating a key pair (public key / private key) is one of the most common tasks for which the <code>Keytool</code> utility is used.  The generated key pair is inserted into the <a href="https://habr.com/ru/post/445786/">KeyStore</a> file as a self-signed key pair.  Here is a common command line format for generating a key pair: </p><br><pre> <code class="plaintext hljs">-genkeypair -alias alias -keyalg keyalg -keysize keysize -sigalg sigalg -dname dname -keypass keypass -validity valDays -storetype storetype -keystore keystore -storepass storepass -providerClass provider_class_name -providerArg provider_arg -v -protected -Jjavaoption</code> </pre> <br><p>  The arguments are explained in the Keytool Arguments section.  Not all of these arguments are needed and many are optional.  The utility will inform you if you have missed a required argument.  Here is an example of a command that imports a certificate in <a href="https://habr.com/ru/post/445786/">KeyStore</a> .  Remember to remove line breaks when entering commands at the command prompt. </p><br><pre> <code class="plaintext hljs">"C:\\Program Files\Java\jdk1.8.0_111\bin\keytool" -importcert -alias testkey -keypass 123456 -storetype JKS -keystore keystore2.jks -file cert.cert -rfc -storepass abcdef</code> </pre> <br><h3 id="spisok-zapisey-hranilischa">  List of vault records </h3><br><p>  To list the entries in the keystore, you can use the <code>list</code> command.  Below is the format for the <code>list</code> command.  Line breaks are intended only to simplify reading.  Remove line breaks before executing the command: </p><br><pre> <code class="plaintext hljs">-list -alias alias -storetype storetype -keystore keystore -storepass storepass -providerName provider_name -providerClass provider_class_name -providerArg provider_arg -v -rfc -protected -Jjavaoption</code> </pre> <br><p>  Here is an example of the <code>list</code> command.  Do not forget to remove line breaks! </p><br><pre> <code class="plaintext hljs">"C:\\Program Files\Java\jdk1.8.0_111\bin\keytool" -list -storetype JKS -keystore keystore.jks -storepass abcdef</code> </pre> <br><p>  This command will list all entries in the given keystore.  The output will look something like this: </p><br><pre> <code class="plaintext hljs">Keystore type: JKS Keystore provider: SUN Your keystore contains 1 entry testkey, 19-Dec-2017, PrivateKeyEntry, Certificate fingerprint (SHA1): 4F:4C:E2:C5:DA:36:E6:A9:93:6F:10:36:9E:E5:E8:5A:6E:F2:11:16</code> </pre> <br><p>  If you include the <code>alias</code> argument in the <code>list</code> command, only the entry corresponding to this alias will be listed.  Here is an example of a <code>list</code> command with an <code>alias</code> argument: </p><br><pre> <code class="plaintext hljs">"C:\\Program Files\Java\jdk1.8.0_111\bin\keytool" -list -alias testkey -storetype JKS -keystore keystore.jks -storepass abcdef</code> </pre> <br><p>  The result of the above command: </p><br><pre> <code class="plaintext hljs">testkey, 15-Dec-2017, PrivateKeyEntry, Certificate fingerprint (SHA1): 71:B0:6E:F1:E9:5A:E7:F5:5E:78:71:DC:08:80:47:E9:5F:F8:6D:25</code> </pre> <br><h3 id="udalenie-zapisi-hranilischa-klyuchey">  Deleting a keystore entry </h3><br><p>  Also in the <code>keytool</code> utility there is a command that can delete an entry from the keystore: <code>delete</code> .  Here is the format of this command: </p><br><pre> <code class="plaintext hljs">-delete -alias alias -storetype storetype -keystore keystore -storepass storepass -providerName provider_name -providerClass provider_class_name -providerArg provider_arg -v -protected -Jjavaoption</code> </pre> <br><p>  Here is an example of calling the <code>delete</code> command.  Remember to remove line breaks before starting! </p><br><pre> <code class="plaintext hljs">"C:\\Program Files\Java\jdk1.8.0_111\bin\keytool" -delete -alias testkey -storetype JKS -keystore keystore.jks -storepass abcdef</code> </pre> <br><p>  This command deletes the storage entry with the <code>testkey</code> alias stored in the <code>keystore.jks</code> file. </p><br><h3 id="generaciya-zaprosa-na-sertifikat">  Certificate Request Generation </h3><br><p>  The <code>keytool</code> utility can generate a certificate request using the <code>certreq</code> .  A certificate request is a request to a certification authority (CA) to create a public certificate for your organization.  After creating a certificate request, it must be sent to a certification authority in which you want to create a certificate (for example, Verisign, Thawte, or some other certification authority).  Before you can generate a certificate request for a private key and a pair of public keys, you must generate this private key and a pair of public keys in the keystore (or import it).  How to do this can be viewed in the relevant chapter.  Here is the command format for generating the certificate request.  Remember to remove all line breaks when using this command: </p><br><pre> <code class="plaintext hljs">-certreq -alias alias -sigalg sigalg -file certreq_file -keypass keypass -storetype storetype -keystore keystore -storepass storepass -providerName provider_name -providerClass provider_class_name -providerArg provider_arg -v -protected -Jjavaoption</code> </pre> <br><p>  Here is an example of the <code>-certreq</code> : </p><br><pre> <code class="plaintext hljs">"C:\\Program Files\Java\jdk1.8.0_111\bin\keytool" -certreq -alias testkey -keypass 123456 -storetype JKS -keystore keystore.jks -storepass abcdef -file certreq.certreq</code> </pre> <br><p>  This command will generate a certificate request for a key saved with the <code>testkey</code> alias in the <code>testkey</code> file and write the certificate request to a file called <code>certreq.certreq</code> . </p><br><h3 id="argumenty-utility-keytool">  Arguments of the keytool utility </h3><br><p>  Below is a list of arguments that accept various <code>keytool</code> .  Remember that not all commands accept all these arguments.  Look at a specific command to see which arguments it takes. </p><br><ul><li>  <code>-alias</code> Alias ‚Äã‚Äãentry in the keystore.  Remember alias <br>  may indicate only one key. </li><li>  <code>-keyalg</code> The name of the algorithm used to generate the key.  Usually used RSA. </li><li>  <code>-keysize</code> key size in bits.  Usually key sizes are multiples.  In addition, various algorithms can only support certain predefined key sizes. </li><li>  <code>-sigalg</code> Signature algorithm used to sign key pairs. </li><li>  <code>-dname</code> A unique name from the X.500 standard.  This name will be associated with <br>  the alias for this key pair in the keystore is also <br>  used as the ‚ÄúIssuer‚Äù and ‚ÄúSubject‚Äù fields in the self-signed <br>  certificate. </li><li>  <code>-keypass</code> Key pair password required for <br>  access to this particular key pair in the keystore. </li><li>  <code>-validity</code> Number of days during which the certificate is, <br>  attached to a pair of keys must be valid. </li><li>  <code>-storetype</code> The file format in which the keystore should be saved.  The default is jks.  Another option is the PKCS11 format. </li><li>  <code>-keystore</code> The file name of the repository to store the generated pair. <br>  keys.  If the file does not exist, it will be created. </li><li>  <code>-file</code> File name to read or write a certificate or certificate request. </li><li>  <code>-storepass</code> Password from the keystore for everyone who wants to work <br>  with him, you will need this password.  Difference of <code>storepass</code> from <code>keypass</code> in <br>  the first provides access to the repository, and the second to a separate <br>  a pair of keys.  You will need both passwords to access any key <br>  stored in the repository. </li><li>  <code>-rfc</code> If you enable this flag, the utility will use a text format, not a binary format, for example, to export or import certificates.  Value -rfc <br>  refers to the standard RFC 1421. </li><li>  <code>-providerName</code> The name of the cryptographic API provider that you want to use when creating a key pair.  The provider name must be specified in the Java security properties files. </li><li>  <code>-providerClass</code> The name of the root class of the cryptographic API provider that you want to use.  Used when the provider name is not specified in the Java security properties files. </li><li>  <code>-providerArg</code> Arguments that are passed to their own cryptographic provider during initialization (if necessary by the provider). </li><li>  <code>-v</code> Abbreviated from verbose, the Keytool utility will output a lot of additional information to the command line in a readable format. </li><li>  <code>-protected</code> Specifies whether the keystore password must be supplied by some external mechanism, such as a hardware token.  Valid values ‚Äã‚Äãare true and false. </li><li>  <code>-Jjavaoption</code> option string for a Java VM that generates a key pair and creates a repository. </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/446322/">https://habr.com/ru/post/446322/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../446306/index.html">Nuclear wars of the distant past?</a></li>
<li><a href="../446308/index.html">Is referral recruitment alive in IT?</a></li>
<li><a href="../446314/index.html">Do you remember how it all started. It was the first time and again.</a></li>
<li><a href="../446316/index.html">Simply space! Huge titanium detail in 6.5 days</a></li>
<li><a href="../446320/index.html">How the 3D-scanner allowed to refuse the full-scale control assembly of the bridge</a></li>
<li><a href="../446324/index.html">Navigating DataGrip with Yandex.Navigator</a></li>
<li><a href="../446326/index.html">Solving problems with traffic rules</a></li>
<li><a href="../446328/index.html">Why do we need SMS reception services and what do they eat?</a></li>
<li><a href="../446330/index.html">Spaghetti Automatic Machines</a></li>
<li><a href="../446332/index.html">IBM System i (aka AS / 400) - How we did auto tests for green screen applications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
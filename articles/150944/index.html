<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Neutrino - a tiny js framework with full inheritance and events</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In projects with a small frontend, it is not always wise to use heavy frameworks like backbone, ember or knockout. Nevertheless, the need to use model...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Neutrino - a tiny js framework with full inheritance and events</h1><div class="post__text post__text-html js-mediator-article">  In projects with a small frontend, it is not always wise to use heavy frameworks like backbone, ember or knockout.  Nevertheless, the need to use models, inheritance and qualitative interaction between them remains.  I bring to your attention the <a href="https://github.com/alevkon/neutrino/wiki">Neutrino</a> framework, which does all of the above, while its size does not exceed 100 lines of code. <br><a name="habracut"></a><br>  Any feedback on the framework is welcome. <br>  A simple demo with inheritance and events can be viewed <a href="http://alevkon.github.com/neutrino/">here</a> . <br><br><h4>  Class creation </h4><br>  To create a class, call the <b>extend</b> method of the <b>_neutrino.Root</b> object.  As an argument, we give it an object that contains the methods and static elements of the future class. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Model = _n.Root.extend({ <span class="hljs-comment"><span class="hljs-comment">//methods and static members });</span></span></code> </pre> <br>  The <b>extend</b> method returns a class constructor. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Creating Class Instances </h5><br>  To create an instance of a class, we simply call its constructor with the keyword <b>new</b> and pass only one argument.  This argument must be an object containing all the necessary data.  The contents of the object will be recorded in the <b>data</b> field of the newly created object. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> model = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Model({ <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }); alert(model.data.id); <span class="hljs-comment"><span class="hljs-comment">//1</span></span></code> </pre><br><br><h5>  Default values </h5><br>  For any property of the data object, we can set the default value: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Model = _n.Root.extend({ <span class="hljs-attr"><span class="hljs-attr">defaults</span></span>: { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-string"><span class="hljs-string">"default id"</span></span> } }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> model = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Model(); alert(model.data.id); <span class="hljs-comment"><span class="hljs-comment">//"default id"</span></span></code> </pre><br><br><h5>  Constructors </h5><br>  We can set a pseudo-constructor for any class.  The pseudo-constructor function is called <b>construct</b> .  Its behavior is completely equivalent to the usual constructor ‚Äî it is called when the object is created, and can return a value that will be returned as the result of the operation of the <b>new</b> operator.  In the pseudo-constructor code, the parent method must be called using <b>this._superCall ();</b> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Model = _n.Root.extend({ <span class="hljs-attr"><span class="hljs-attr">construct</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._superCall(); alert(<span class="hljs-string"><span class="hljs-string">"Hello world"</span></span>); } });</code> </pre><br><br><h4>  Inheritance </h4><br>  Neutrino supports full inheritance: <br><ul><li>  You can create child classes using the <b>extend</b> method of the base class; </li><li>  The constructor of any class contains the <b>superclass</b> property, which directly points to the constructor of the parent class; </li><li>  From any method, you can easily call the nearest available parent method; </li><li>  The <b>defaults</b> field is automatically merged with all parent data. </li></ul><br>  Let's look at a simple example: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Parent = _n.Root.extend({ <span class="hljs-attr"><span class="hljs-attr">defaults</span></span>: { <span class="hljs-attr"><span class="hljs-attr">a</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span> }, <span class="hljs-attr"><span class="hljs-attr">construct</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._superCall(); alert(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getSum()); }, <span class="hljs-attr"><span class="hljs-attr">getSum</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data.a + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data.b; } }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Child = Parent.extend({ <span class="hljs-attr"><span class="hljs-attr">defaults</span></span>: { <span class="hljs-attr"><span class="hljs-attr">a</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">c</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> }, <span class="hljs-attr"><span class="hljs-attr">getSum</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.superCall() + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data.c; } }); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Parent(); <span class="hljs-comment"><span class="hljs-comment">//alert(1 + 2); new Child(); //alert(10 + 2 + 3);</span></span></code> </pre><br><br><h5>  Call parent methods </h5><br>  From the inside of a method, there are two ways to call the nearest parent method.  If you need to call the parent method with the same parameters as the current method was called, you can use <b>this._superCall ();</b> <br><br><pre> <code class="javascript hljs">... someMethod: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b, c</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._superCall(); <span class="hljs-comment"><span class="hljs-comment">//call closest parent method with a,b,c parameters } ...</span></span></code> </pre><br><br>  If the parent method needs to be called with other parameters, you need to use a direct link to the nearest parent method - <b>this._superMethod;</b> <br><br><pre> <code class="javascript hljs">... someMethod: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b, c</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._superMethod(a + <span class="hljs-number"><span class="hljs-number">1</span></span>, b + <span class="hljs-number"><span class="hljs-number">1</span></span>, c + <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-comment"><span class="hljs-comment">//call closest parent method with changed parameters } ...</span></span></code> </pre><br><br>  In fact, <b>this.superCall ();</b>  this is the abbreviated equivalent of <b>this._superMethod.apply (this, arguments)</b> ; <br><br><h4>  Developments </h4><br>  Events are a distinct way to organize the interaction of models ... Models in Neutrino can generate events and subscribe to events of other models. <br><br><h5>  Event generation </h5><br>  To generate an event in a model, you need to call its <b>fireEvent</b> method.  It needs to pass two parameters - the name of the event is <b>eventName</b> and (optionally) an <b>info</b> object containing any additional information. <br><br><pre> <code class="javascript hljs"> model.fireEvent(<span class="hljs-string"><span class="hljs-string">"item-added"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">item</span></span>: item <span class="hljs-comment"><span class="hljs-comment">//some additional information });</span></span></code> </pre><br><br><h5>  Handling your own events </h5><br>  When a model generates an event, its own <b>onOwnEvent</b> method is <b>called first</b> , which receives the <b>eventName</b> and <b>info</b> parameters. <br><br><pre> <code class="javascript hljs"> <span class="hljs-comment"><span class="hljs-comment">/* Model class initialization*/</span></span> ... onOwnEvent: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">eventName, info</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(eventName) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"item-added"</span></span>: <span class="hljs-comment"><span class="hljs-comment">//increase items counter //render info.item break; } } ... model.fireEvent("item-added", { item: item });</span></span></code> </pre><br><br><h5>  Subscribe to events </h5><br>  To subscribe to an event of a model, you need to call its <b>subscribe</b> method and pass it two parameters ‚Äî a handler function and the name of the event you want to subscribe to.  If you do not specify the name of the event (or pass an asterisk <b>*</b> as the name of the event), your handler will be called when any event is generated, Otherwise, only at the event to which you subscribed. <br><br>  Naturally, the handler will receive the <b>eventName</b> and <b>info</b> parameters when it is called. <br><br><pre> <code class="javascript hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">commonHandler</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">eventName, info</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(eventName) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"e1"</span></span>: alert(<span class="hljs-string"><span class="hljs-string">"e1 fired"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">specificHandler</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">eventName, info</span></span></span><span class="hljs-function">) </span></span>{ alert(<span class="hljs-string"><span class="hljs-string">"e1 fired"</span></span>); } model.subscribe(commonHandler); model.subscribe(specificHandler, <span class="hljs-string"><span class="hljs-string">"e1"</span></span>); model.fireEvent(<span class="hljs-string"><span class="hljs-string">"e1"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//info in handlers will be set to undefined</span></span></code> </pre><br><br><h5>  Event handling by model methods </h5><br>  Usually, there is a need to handle the event of one model by the method of some other model.  To keep <b>this</b> context and possibly some other data relevant at the time of subscription, you can, of course, use a closure: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* class initialization stuff */</span></span> ... processItem: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; item.subscribe(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">eventName, info</span></span></span><span class="hljs-function">) </span></span>{ self.onItemEvent(eventName, info, item); }); }, <span class="hljs-attr"><span class="hljs-attr">onItemEvent</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item, eventName, info</span></span></span><span class="hljs-function">) </span></span>{ ... }</code> </pre><br><br>  However, <b>Neutrino</b> provides an easier way to do this. <br><br><pre> <code class="javascript hljs">item.subscribe(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.onItemEvent.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, item));</code> </pre><br><br>  A bind () function is attached to each model method in Neutrino, which will call your method with the correct <b>this</b> context and any additional parameters. <br><br>  A simple example will help clarify understanding: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> binding = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.onItemEvent.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)); setTimeout(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ binding(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-comment"><span class="hljs-comment">//your method onItemEvent will be called with arguments 1, 2, 3, 4. });</span></span></code> </pre><br>  Using <b>bind ()</b> , you first specify the desired context (usually this), then any number of additional parameters (a, b).  When we call the result function of the binding with parameters (c, d), then in the end, we come to the call of our method with parameters (a, b, c, d). <br><br>  Any feedback on the framework is welcome. </div><p>Source: <a href="https://habr.com/ru/post/150944/">https://habr.com/ru/post/150944/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../150936/index.html">Games of operators of communication with fire: for what and how does FAS penalize</a></li>
<li><a href="../150940/index.html">Delivery of fresh press using Python directly to the mailbox</a></li>
<li><a href="../150941/index.html">Ruby NoName Podcast S04E17</a></li>
<li><a href="../150942/index.html">Notes on MODX Revo from newbie</a></li>
<li><a href="../150943/index.html">Where should Delphi develop instead of where it is developing now?</a></li>
<li><a href="../150946/index.html">Add Bundling and Minification to ASP.NET Web Pages</a></li>
<li><a href="../150947/index.html">Nokia Lumia 920 and 820 with wireless charging and Windows Phone 8</a></li>
<li><a href="../150950/index.html">Building Command Line Applications (CLI)</a></li>
<li><a href="../150951/index.html">How to get your web screenshots service - version 1.1</a></li>
<li><a href="../150954/index.html">Combing "Similar posts"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Customize the appearance of the UIPopoverController</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="UIPopoverController or pop-up window (hereinafter simply ‚Äúpopover‚Äù) element is not new. On Habr√© there is one introductory article on this topic and s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Customize the appearance of the UIPopoverController</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/1c0/f7e/6b3/1c0f7e6b39dad6fd87517eef4692ca80.jpg" align="left">  <code>UIPopoverController</code> or pop-up window (hereinafter simply ‚Äúpopover‚Äù) element is not new.  On Habr√© there is one <a href="http://habrahabr.ru/blogs/macosxdev/91094/">introductory article</a> on this topic and several mentions in other topics.  Most often, poppers are used ‚Äúas is‚Äù and do not require any modifications, but in some projects there is a need to change the appearance of this element.  Just about how to do it and this article will be. <br><br>  The article is not just a translation or retelling of Apple documentation.  I ran into a problem in a real project, skipped the material through myself (in a good sense of the word), prepared a thoroughly chewed explanation and, finally, spiced it all up with a concrete implementation that could be useful to you. <br><a name="habracut"></a><br><br><h4>  Why do you need it? </h4><br>  As I wrote above, I was faced with such a need on the example of a specific project.  Initially, the application was written under the iPhone and ‚Äúcompleted‚Äù in red, namely, the <code>appearance</code> method of the <code>UINavigationBar</code> class was used 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cpp hljs">[[UINavigationBar appearance] setTintColor: [UIColor colorWithRed:<span class="hljs-number"><span class="hljs-number">0.481</span></span> green:<span class="hljs-number"><span class="hljs-number">0.065</span></span> blue:<span class="hljs-number"><span class="hljs-number">0.081</span></span> alpha:<span class="hljs-number"><span class="hljs-number">1.000</span></span>]]; [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@<span class="hljs-string"><span class="hljs-string">"navbar"</span></span>] forBarMetrics:UIBarMetricsDefault];</code> </pre><br>  The result was something like this: <br><div style="text-align:center;"><img src="https://habrastorage.org/storage2/b24/b82/c55/b24b82c5545e4549b153782924103317.jpg"></div><br>  When, on the basis of an existing application, they began to make a version for iPad, it was necessary to place the <code>UINavigationController</code> inside the popover. <br><div style="text-align:center;"><img src="https://habrastorage.org/storage2/c75/10b/43f/c7510b43fb89d622285eb86d3ca3b4d9.jpg"></div><br>  You can, of course, return the default appearance to the <code>UINavigationBar</code> class, if it is displayed inside the popover <br><pre> <code class="cpp hljs">[[UINavigationBar appearanceWhenContainedIn:[UIPopoverController <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">], </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nil</span></span></span><span class="hljs-class">] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">setBackgroundImage</span></span></span><span class="hljs-class">:</span></span>nil forBarMetrics:UIBarMetricsDefault]; [[UINavigationBar appearanceWhenContainedIn:[UIPopoverController <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">], </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nil</span></span></span><span class="hljs-class">] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">setTintColor</span></span></span><span class="hljs-class">:</span></span>[UIColor clearColor]];</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/storage2/c96/ba3/90c/c96ba390c0b533b1e4295f887c93b858.jpg"></div><br>  In principle, it is not deadly, but, let's say, the customer (and he is always right) said that this will not work and ‚Äúrepaint the popovers!‚Äù.  This is <code>popoverBackgroundViewClass</code> property of the <code>popoverBackgroundViewClass</code> class <code>UIPopoverController</code> .  Our task is to inherit the <code>UIPopoverBackgroundView</code> class, strictly following the documentation. <br><br><h4>  Inheritance of <code>UIPopoverBackgroundView</code> </h4><br>  Documentation, of course, describes in detail what and how to do, which methods to override and for what.  In addition, practical recommendations are given - it is better to use images and the <code>UIImageView</code> class for drawing the background and arrows.  All this is ‚Äúin words,‚Äù I personally find it easier to read the text if it includes illustrations, so I will try to fill this ‚Äúgap‚Äù.  In parallel, we will start writing the implementation of our specific subclass <code>UIPopoverBackgroundView</code> .  The first thing we will do is simply inherit it and leave it so far without implementation. <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;UIKit/UIPopoverBackgroundView.h&gt; @interface MBPopoverBackgroundView : UIPopoverBackgroundView @end</span></span></span></span></code> </pre> <br><br><h5>  Anatomy of a <code>UIPopoverController</code> </h5><br><img src="https://habrastorage.org/storage2/ef6/055/8a5/ef60558a5e5eb8626eda700590155f77.png"><br>  <code>UIPopoverController</code> consists of an arrow (Arrow), a background (Background), content or content (Content View), and a UIView in which all this stuff is contained and drawn. <br><br><h6>  Arrow </h6><br><img src="https://habrastorage.org/storage2/3b6/4b3/f76/3b64b3f767d4cb066790a2c6ace9ffa1.jpg" align="right">  In essence, the ‚Äúarrow‚Äù in this context is a purely figurative term.  We are limited only by our own imagination and common sense choosing the look of the arrow.  This can be a dotted line, a curve, an arbitrary picture.  We can just use a <code>UIView</code> with an overridden <code>draw</code> method and draw with <code>gl***</code> functions, we can use an animated <code>UIImageView</code> , etc.  The only thing to remember is the width of the base of the arrow ( <code>arrowBase</code> ) and its height ( <code>arrowHeight</code> ) remain unchanged for all instances of our class.  Although this limitation can be bypassed to some extent, this will be discussed later. <br><br>  Now choose <code>UIImageView</code> to represent the arrow, following Apple's advice.  Also pay attention to the class <code>+(CGFloat)arrowBase</code> and <code>+(CGFloat)arrowHeight</code> .  By default, they both throw an exception, so we have to override them in our subclass. <br><br>  For simplicity, just agree that the image of the arrow we have and it is stored in the file "popover-arrow.png".  Now you can safely code it all <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@interface</span></span> MBPopoverBackgroundView () <span class="hljs-comment"><span class="hljs-comment">// image view   @property (nonatomic, strong) UIImageView *arrowImageView; @end @implementation MBPopoverBackgroundView @synthesize arrowImageView = _arrowImageView; //   (arrow base) + (CGFloat)arrowBase { //    return [UIImage imageNamed:@"popover-arrow.png"].size.width; } //   (arrow height) + (CGFloat)arrowHeight { //    return [UIImage imageNamed:@"popover-arrow.png"].size.height; } //  - (id)initWithFrame:(CGRect)frame { self = [super initWithFrame:frame]; if (!self) return nil; //  image view   self.arrowImageView = [[UIImageView alloc] initWithImage:@"popover-arrow.png"]; [self addSubview:_arrowImageView]; return self; } @end</span></span></code> </pre> <br><br>  But this is not all about the arrow.  Our responsibilities also include redefining two properties. <br><pre> <code class="cpp hljs">@property (nonatomic, readwrite) UIPopoverArrowDirection arrowDirection; @property (nonatomic, readwrite) CGFloat arrowOffset;</code> </pre><br>  otherwise, we will catch the same exception if we try to call a setter or getter for any of them. <br><br>  The direction of the arrow ( <code>arrowDirection</code> ) tells us where the arrow points (up, down, left, right) and where it is actually located.  The offset of the arrow ( <code>arrowOffset</code> ) is the distance from the center of our view to the line passing through the center of the arrow, in general, look at the illustration, everything is clearly shown there, the displacements are marked in blue.  The up and left offsets are negative. <br><div style="text-align:center;"><img src="https://habrastorage.org/storage2/1ce/53d/8a6/1ce53d8a60973845743491afedea291c.png"></div><br><br>  The documentation recommends implementing setter and getter for these properties.  But I found out in practice that it is possible to declare these properties and synthesize the necessary methods. <br><br><pre> <code class="cpp hljs">@<span class="hljs-function"><span class="hljs-function">interface </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MBPopoverBackgroundView</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">//       @property (nonatomic, readwrite) UIPopoverArrowDirection arrowDirection; @property (nonatomic, readwrite) CGFloat arrowOffset; @end @implementation MBPopoverBackgroundView @synthesize arrowDirection = _arrowDirection; @synthesize arrowOffset = _arrowOffset; @end</span></span></span></span></code> </pre><br><br>  Changing any of these properties is a signal that you need to change the size and location of the arrow and the background.  We will use the Key-Value Observing mechanism for this purpose.  As soon as the property has changed, we <code>MBPopoverBackgroundView</code> let our <code>MBPopoverBackgroundView</code> that it‚Äôs time to put things in order and place the children (subviews) in places, i.e.  call <code>setNeedsLayout</code> .  This, in turn, will lead to a call to <code>layoutSubviews</code> at the next right moment (when the operating system solves).  About the implementation of <code>layoutSubviews</code> will be discussed in detail a little later. <br><br><pre> <code class="cpp hljs">- (id)initWithFrame:(CGRect)frame { <span class="hljs-comment"><span class="hljs-comment">// ***   *** [self addObserver:self forKeyPath:@"arrowDirection" options:0 context:nil]; [self addObserver:self forKeyPath:@"arrowOffset" options:0 context:nil]; return self; } - (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context { //         //         setNeedsLayout [self setNeedsLayout]; } - (void)dealloc { [self removeObserver:self forKeyPath:@"arrowDirection"]; [self removeObserver:self forKeyPath:@"arrowOffset"]; // ***  "" *** [super dealloc]; }</span></span></code> </pre><br><br><h6>  Background </h6><br>  Much of what has been said about the arrow applies to the background.  We will also select a <code>UIImageView</code> for a specific implementation.  But, while the arrow does not change its size, the background behaves completely differently.  In your application, you will use popovers for a variety of purposes and stuff contents of various sizes inside.  The background should look equally good both for a small tooltip and an unimaginable popover on the floor of the screen.  Apple recommends using stretchable images; the <code>UIImageView</code> class provides the <code>resizableImageWithCapInsets:(UIEdgeInsets)capInsets</code> method for these purposes <code>resizableImageWithCapInsets:(UIEdgeInsets)capInsets</code> .  For example, I created a simple background, a rectangle of size 128x128 with rounded corners and filled with one color without gradients, shadows and other effects.  Name the file "popover-background.png". <br><br><pre> <code class="cpp hljs">@property (nonatomic, strong) UIImageView *backgroundImageView; <span class="hljs-comment"><span class="hljs-comment">// *** @synthesize backgroundImageView = _backgroundImageView; - (id)initWithFrame:(CGRect)frame { // *** UIEdgeInsets bgCapInsets = UIEdgeInsetsMake(12, 12, 12, 12); UIImage *bgImage = [[UIImage imageNamed:@"popover-backgroung.png"] resizableImageWithCapInsets:bgCapInsets]; self.backgroundImageView = [[UIImageView alloc] initWithImage:bgImage]; [self addSubview:_backgroundImageView]; // *** }</span></span></code> </pre><br><br>  <code>UIEdgeInsets</code> options are specified using indents ( <code>UIEdgeInsets</code> ).  Specific values ‚Äã‚Äãdepend on the selected image.  In my case, for example, the radius of the rounding of corners is 10, so, in theory, the indent could be taken equal to 10 from all borders, but this is not significant. <br><div style="text-align:center;"><img src="https://habrastorage.org/storage2/520/0ab/1c0/5200ab1c06daa830c0e515f15202dabd.png"></div><br><br><h6>  Content </h6><br>  Content or content is what is displayed inside the popover.  In the context of <code>UIPopoverBackgroundView</code> we have no influence on the content and its size, on the contrary, it is the size of the content that determines the size of the popover, and hence the size of the <code>UIPopoverBackgroundView</code> . <br><br>  This is how it happens.  When the <code>UIPopoverController</code> ready to render the popover, it knows exactly the content size and position from which to draw the popover, it only remains to find out how much more to add along the edges to fit the arrow and the background, in other words, to calculate the <code>frame</code> property for our <code>MBPopoverBackgroundView</code> . <br><br>  It is for these purposes that the <code>+(CGFloat)arrowHeight</code> and <code>+(UIEdgeInsets)contentViewInsets</code> .  The first tells the height of the arrow, the second tells how much background is more content, returning indents from the edges of the content to the edges of the background.  Using all this information, <code>UIPopoverController</code> chooses the direction for the arrow and initializes an object of the <code>UIPopoverBackgroundView</code> class (or rather our particular subclass), setting it with specific dimensions, after which we should place our arrow and background as it should. <br><br>  Redefine <code>contentViewInsets</code> .  For example, we indent 10 at all edges.  You can also set negative indents, I don‚Äôt think that something good will turn out, but you can ... <br><pre> <code class="cpp hljs">+ (UIEdgeInsets)contentViewInsets { <span class="hljs-comment"><span class="hljs-comment">//        return UIEdgeInsetsMake(10, 10, 10, 10); }</span></span></code> </pre><br>  Now around our content will be a frame of the background thickness of 10 pixels. <br><div style="text-align:center;"><img src="https://habrastorage.org/storage2/4e9/f14/464/4e9f14464c53d5b21f23d98d8f374bd7.png"></div><br><br><h5>  Layout </h5><br>  Finally, the last stage is to correctly position the arrow and the background, taking into account the direction of the arrow, its offset, and the specific dimensions of our <code>UIPopoverBackgroundView</code> . <br>  To do this, we implement the <code>layoutSubviews</code> method. <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> mark - Subviews Layout </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//  ,     setNeedsLayout    - (void)layoutSubviews { //          //  CGRect bgRect = self.bounds; //   ,       ""  // ,  / ,    BOOL cutWidth = (_arrowDirection == UIPopoverArrowDirectionLeft || _arrowDirection == UIPopoverArrowDirectionRight); //     ,       bgRect.size.width -= cutWidth * [self.class arrowHeight]; BOOL cutHeight = (_arrowDirection == UIPopoverArrowDirectionUp || _arrowDirection == UIPopoverArrowDirectionDown); //     ,       bgRect.size.height -= cutHeight * [self.class arrowHeight]; // ,   origin point (  ) //      ( )   ( ) if (_arrowDirection == UIPopoverArrowDirectionUp) { bgRect.origin.y += [self.class arrowHeight]; } else if (_arrowDirection == UIPopoverArrowDirectionLeft) { bgRect.origin.x += [self.class arrowHeight]; } //        _backgroundImageView.frame = bgRect; //  -    (arrowDirection)   (arrowOffset)    //   ,     image view      //      (  transformations),      // :          CGRect arrowRect = CGRectZero; UIEdgeInsets bgCapInsets = UIEdgeInsetsMake(12, 12, 12, 12); //      switch (_arrowDirection) { case UIPopoverArrowDirectionUp: _arrowImageView.transform = CGAffineTransformMakeScale(1, 1); //  -  // :  frame,   bounds,   bounds     arrowRect = _arrowImageView.frame; //     origin arrowRect.origin.x = self.bounds.size.width / 2 + _arrowOffset - arrowRect.size.width / 2; arrowRect.origin.y = 0; break; case UIPopoverArrowDirectionDown: _arrowImageView.transform = CGAffineTransformMakeScale(1, -1); //    () arrowRect = _arrowImageView.frame; //     origin arrowRect.origin.x = self.bounds.size.width / 2 + _arrowOffset - arrowRect.size.width / 2; arrowRect.origin.y = self.bounds.size.height - arrowRect.size.height; break; case UIPopoverArrowDirectionLeft: _arrowImageView.transform = CGAffineTransformMakeRotation(-M_PI_2); //   90     arrowRect = _arrowImageView.frame; //     origin arrowRect.origin.x = 0; arrowRect.origin.y = self.bounds.size.height / 2 + _arrowOffset - arrowRect.size.height / 2; //   -        //       ,      // ,    bgCapInsets.bottom,      //    arrowRect.origin.y = fminf(self.bounds.size.height - arrowRect.size.height - bgCapInsets.bottom, arrowRect.origin.y); //           arrowRect.origin.y = fmaxf(bgCapInsets.top, arrowRect.origin.y); break; case UIPopoverArrowDirectionRight: _arrowImageView.transform = CGAffineTransformMakeRotation(M_PI_2); //   90     arrowRect = _arrowImageView.frame; arrowRect.origin.x = self.bounds.size.width - arrowRect.size.width; arrowRect.origin.y = self.bounds.size.height / 2 + _arrowOffset - arrowRect.size.height / 2; //     UIPopoverArrowDirectionLeft arrowRect.origin.y = fminf(self.bounds.size.height - arrowRect.size.height - bgCapInsets.bottom, arrowRect.origin.y); arrowRect.origin.y = fmaxf(bgCapInsets.top, arrowRect.origin.y); break; default: break; } //       _arrowImageView.frame = arrowRect; }</span></span></span></span></code> </pre><br><br><h4>  Finishing touches </h4><br>  All the above code copes with the task, namely, it allows you to create an alternative appearance for popovers.  However, in this code there are a number of drawbacks, for example, the file names for the arrow and the background are tightly written in the code.  To use green popover instead of red, you will have to create another subclass and override methods that depend on specific file names.  The same applies to the parameters used to stretch the background and indents from the edges of the content. <br><br>  I would like to have more flexibility, which I tried to do. <br>  I added several class methods, with speaking names. <br><br><pre> <code class="cpp hljs">@interface MBPopoverBackgroundView : UIPopoverBackgroundView <span class="hljs-comment"><span class="hljs-comment">//     + (void)initialize; //  (  ) + (void)cleanup; //    (  ) + (void)setArrowImageName:(NSString *)imageName; //       + (void)setBackgroundImageName:(NSString *)imageName; //      + (void)setBackgroundImageCapInsets:(UIEdgeInsets)capInsets; //      + (void)setContentViewInsets:(UIEdgeInsets)insets; //      @end</span></span></code> </pre><br><br>  Of course, all objects of this class will draw the same arrow and background, but you have the opportunity to use the same code in different projects without changing it.  If, within the framework of one application, you need popovers of different colors and shades, simply inherit <code>MBPopoverBackgroundView</code> , one heir for each appearance, or call <code>set***</code> for <code>MBPopoverBackgroundView</code> each time before creating a popover different from the previous one.  In short, flexibility ... <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   @interface MBPopoverBackgroundViewBlue : MBPopoverBackgroundView @end //    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { //  [MBPopoverBackgroundView initialize]; //     [MBPopoverBackgroundView setArrowImageName:@"popover-arrow-red.png"]; [MBPopoverBackgroundView setBackgroundImageName:@"popover-background-red.png"]; [MBPopoverBackgroundView setBackgroundImageCapInsets:UIEdgeInsetsMake(12, 12, 12, 12)]; [MBPopoverBackgroundView setContentViewInsets:UIEdgeInsetsMake(10, 10, 10, 10)]; //     "" [MBPopoverBackgroundViewBlue setArrowImageName:@"popover-callout-dotted-blue.png"]; [MBPopoverBackgroundViewBlue setBackgroundImageName:@"popover-background-blue.png"]; [MBPopoverBackgroundViewBlue setBackgroundImageCapInsets:UIEdgeInsetsMake(15, 15, 15, 15)]; [MBPopoverBackgroundViewBlue setContentViewInsets:UIEdgeInsetsMake(20, 20, 20, 20)]; // *** } //    { UIPopoverController *popoverCtl = ...; popoverCtl.popoverBackgroundViewClass = [MBPopoverBackgroundView class]; //  popoverCtl.popoverBackgroundViewClass = [MBPopoverBackgroundViewBlue class]; //   // *** }</span></span></code> </pre><br><h4>  Visual result </h4><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/Kf_CavsYAD0%3Ffeature%3Doembed&amp;xid=17259,1500004,15700021,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhh7P1-V7UIG0ZDS_qs2te04Y32EsA" frameborder="0" allowfullscreen=""></iframe><br><br>  <code>MBPopoverBackgroundView</code> sources and usage examples <a href="https://github.com/mgrebenets/mbpopoverbackgroundview">are on github</a> . <br>  The implementation <b>does not</b> use ARC, so do not forget to hang the <code>-fno-objc-arc</code> flag if you use it in a project with ARC enabled, or remove those multiple <code>autorelease</code> , <code>retain</code> , <code>release</code> and <code>dealloc</code> calls that are in the code.  In the latter case, I have no idea how long the <code>s_customValuesDic</code> static dictionary will live because the <code>retain</code> is not explicitly sent to it, although according to the ARC logic it will not touch the static object until the application is completed.  And I don‚Äôt even think that storing values ‚Äã‚Äãin this way is the best solution, even though it works stably and reliably. <br><br><h4>  Used materials </h4><br><ul><li>  <a href="https://developer.apple.com/library/ios/">UIPopover Class Reference</a> </li><li>  <a href="https://developer.apple.com/library/ios/">UIPopoverBackgroundView Class Reference</a> </li><li>  <a href="https://developer.apple.com/library/ios/">View Controller Catalog for iOS - Popovers</a> </li><li>  <a href="https://developer.apple.com/library/ios/">iPad Specific Controllers</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/137851/">https://habr.com/ru/post/137851/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../137842/index.html">Share your experience and listen to Java-guru at Siclum Java Subbotnik February 11</a></li>
<li><a href="../137843/index.html">Nginx share has grown up a bit again.</a></li>
<li><a href="../137847/index.html">How do we take screenshots of pages</a></li>
<li><a href="../137848/index.html">Fourth Kiev Habravstrecha</a></li>
<li><a href="../137849/index.html">Path service was found to download the entire iPhone address book on its servers</a></li>
<li><a href="../137852/index.html">Simplify.js - JavaScript library to simplify broken lines</a></li>
<li><a href="../137854/index.html">Interesting bugfix, or break Skype completely</a></li>
<li><a href="../137855/index.html">Hero numbers - Build Manager</a></li>
<li><a href="../137856/index.html">Jelastic is now in Russia</a></li>
<li><a href="../137857/index.html">Node.js daemon for FreeBSD: forever + rc.d</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
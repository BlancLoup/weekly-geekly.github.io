<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Calculation of the fractal dimension of Minkowski for a flat image</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day reader. Today's post will be devoted to the calculation of the approximate value of the fractal dimension of a flat image, which is closely r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Calculation of the fractal dimension of Minkowski for a flat image</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/d56/7a9/637/d567a96377af150dbda68615c2b8b532.jpg" align="right">  Good day reader.  Today's post will be devoted to the calculation of the approximate value of the <a href="http://en.wikipedia.org/wiki/Fractal_dimension">fractal dimension of a</a> flat image, which is closely related to the <a href="http://en.wikipedia.org/wiki/Minkowski%25E2%2580%2593Bouligand_dimension">dimension of Minkowski</a> .  This is interesting for at least two reasons.  First, it turns out that the <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B7%25D0%25BC%25D0%25B5%25D1%2580%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C_%25D0%25BF%25D1%2580%25D0%25BE%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D0%25BD%25D1%2581%25D1%2582%25D0%25B2%25D0%25B0">dimension of a</a> bounded set in a metric space can be not only an integer, but also any non-negative one.  Secondly, the value of the dimension of the contour of the image (and this is a limited set in the metric space) is a good <a href="http://en.wikipedia.org/wiki/Feature_extraction">sign</a> .  In today's post, there is no study on the robustness of this feature, but let's consider an illustrative example.  <a href="http://archive.ics.uci.edu/ml/datasets/Breast%2BCancer%2BWisconsin%2B%2528Diagnostic%2529">Many different characteristics of cells of breast tumors</a> , resulting from the analysis of images of fine needle puncture biopsy.  A lot of data consists of 30 signs (fields of the table) marked as a malignant or benign tumor, and one of the signs is just the fractal dimension of the nuclei of the tumor cells.  Under the cat you will find an explanation of the meaning of the fractal dimension of the set, as far as possible in accessible language, an algorithm for calculating the approximate value of this dimension, its implementation in c # and a number of examples with pictures.  Perhaps you opened this post just because of the image on the right, I borrowed this image from <a href="http://instagram.com/jenselter">Jennifer Selter</a> 's <a href="http://instagram.com/jenselter">instagram</a> , and at the end we will calculate the fractal dimension, so to speak, of the Jennifer filet.  I would like to ask you to answer a couple of questions at the end of the post. <br><br><a name="habracut"></a><br><br><h4>  Dimension </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As usual, in order to understand the meaning of the algorithm, you need to plunge into theory.  <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B7%25D0%25BC%25D0%25B5%25D1%2580%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C_%25D0%25BF%25D1%2580%25D0%25BE%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D0%25BD%25D1%2581%25D1%2582%25D0%25B2%25D0%25B0">Wikipedia tells us</a> that the dimension in physics (and most likely most people perceive the meaning of dimension in this way) is the number of independent parameters needed to describe the state of an object, or the number of degrees of freedom of a physical system.  But in mathematics, everything is a little different, here we have a number of definitions of dimension, which often depend on the working space.  Within the framework of the general topology, several definitions of the dimension are given, and of them we will be interested in the <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B7%25D0%25BC%25D0%25B5%25D1%2580%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C_%25D0%25A5%25D0%25B0%25D1%2583%25D1%2581%25D0%25B4%25D0%25BE%25D1%2580%25D1%2584%25D0%25B0">Hausdorff</a> <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B7%25D0%25BC%25D0%25B5%25D1%2580%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C_%25D0%259C%25D0%25B8%25D0%25BD%25D0%25BA%25D0%25BE%25D0%25B2%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B3%25D0%25BE">dimension, the Minkowski dimension</a> and the <a href="http://en.wikipedia.org/wiki/Fractal_dimension">fractal dimension</a> . <br><br>  To begin, let us recall the formal meaning of those dimensions that are intuitive for us, in the <a href="http://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B5%25D0%25BA%25D1%2582%25D0%25BE%25D1%2580%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D0%25BD%25D1%2581%25D1%2582%25D0%25B2%25D0%25BE">vector space</a> that surrounds us.  By the basis of a vector space, we mean the maximum set of linearly independent vectors.  The number of these vectors we call the dimension of the vector space, or its rank.  And any element of a vector space can be represented as a linear combination of basis vectors. <br><br><h4>  Hausdorff dimension </h4><br><br>  The Hausdorff dimension generalizes the concept of the dimension of a real vector space, and is a natural way to determine the dimension of a subset in a metric space.  For example, the Hausdorff dimension of an <b>n-</b> dimensional (dimension in the sense of a vector space) unitary space (a special case of a vector space) will also be equal to <b>n</b> .  A good mathematical description of the <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B7%25D0%25BC%25D0%25B5%25D1%2580%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C_%25D0%25A5%25D0%25B0%25D1%2583%25D1%2581%25D0%25B4%25D0%25BE%25D1%2580%25D1%2584%25D0%25B0">Hausdorff dimension is given in the Russian Wikipedia</a> ; it is also important for us to understand the meaning of this dimension intuitively.  We represent the complete <a href="http://en.wikipedia.org/wiki/Cover_(topology)">coverage of a set</a> <b>X by</b> balls of radius at most <b>r</b> , denote the number of these balls by <b>N (r)</b> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/155/16f/ed5/15516fed51c9bace587be1c7de0994ff.png"><img src="https://habrastorage.org/getpro/habr/post_images/67b/19d/e84/67b19de8477ba77c7f6051132aea7018.png"><br><br>  The value of <b>N (r)</b> will increase with decreasing <b>r</b> (more and more balls will be required for full coverage).  The Hausdorff dimension of a <i>good</i> set <b>X</b> will be such a unique number <b>d</b> that <b>N (r)</b> will grow as <b>1 / r <sup>d</sup></b> as <b>r</b> tends to zero.  A good set is understood to be smooth sets without features, such as fractals, for example.  Examples of good sets can be any idealized geometric objects such as a cube, a sphere, and so on. <br><br><h4>  Fractal dimension </h4><br><br>  We describe one simple way of defining the fractal dimension, although for example the Minkowski dimension is also one of the fractal dimensions, and it is closely related to the Hausdorff dimension, but more on that later.  Here it is a simple way to set the fractal dimension: <br><ul><li>  Take some <b>D</b> -dimensional geometric structure and iteratively divide its sides into <b>M</b> equal parts (in the next iteration, we divide each part obtained in the previous iteration into <b>M</b> parts as well) </li><li>  Each level will consist of <b>M <sup>D</sup></b> parts of the previous level. </li><li>  Denote as follows the number of parts obtained <b>N = M <sup>D</sup></b> </li></ul><br>  Perform the following transformation to calculate the formula for the value of the fractal dimension <b>D</b> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b2f/cb3/e1c/b2fcb3e1c6d8f68522b3c0b2f903759f.gif"><br><br>  Let's look at simple examples that I learned from a very <a href="http://www.complexityexplorer.org/online-courses/3">steep course in complex systems</a> .  Take a segment (one-dimensional bounded set), divide it into two equal parts, in the same way we will deal with each received part.  In this way, we will create a full set coverage. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/619/b50/ee3/619b50ee35dcaf4b71ec070448dde3ed.png"><br><br>  Those.  <b>M = 2</b> and <b>N = 2</b> , since  from each part two new pieces of the segment are produced, we calculate <b>D</b> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/904/428/9e6/9044289e6445ed509091ad84a7637b6e.gif"><br><br>  If we divide the segment not into 2 parts, but into 3, then <b>D</b> will still be equal to 1, since  <b>M = 3</b> and <b>N = 3</b> .  This dimension coincides with the Hausdorff dimension for a <i>good</i> set. <br><br>  Let's look at a similar procedure for a square. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ae6/2fd/4d2/ae62fd4d27ca961eb887e3df72b94608.png"><br><br>  We get <b>M = 2</b> and <b>N = 4</b> , since  dividing the sides into 2 equal parts, we get 4 new ones, we calculate the fractal dimension <br><br><img src="https://habrastorage.org/getpro/habr/post_images/084/c17/2bd/084c172bd2d7ac403ba9cc4094fc88d2.gif"><br><br>  And again, the obtained dimension coincided with the Hausdorff dimension.  The same result can be obtained if the sides are divided into 3 equal parts, etc. <br><br>  Benoit Mandelbrot in the study of real objects made the obvious remark: <br><br><blockquote>  it‚Äôs not a smooth line </blockquote><br><br>  In the real world, we rarely deal with idealized objects, what will happen if we consider a <i>not-quite-good</i> geometric object, such as <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D1%2580%25D0%25B8%25D0%25B2%25D0%25B0%25D1%258F_%25D0%259A%25D0%25BE%25D1%2585%25D0%25B0">the Koch curve</a> (not to be confused with a stick), let us recall the algorithm for generating such a set.  At each iteration, each piece of the curve, which is a straight segment, is divided into three equal parts, then the middle piece is removed, and in its place becomes a structure resembling an inverted letter <b>V</b> , each edge of which is equal to the removed part of the segment (as well as the remaining ). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/78f/845/020/78f8450203054b792f9638fae5d81308.svg" alt="image"><br><br>  In other words, <b>M = 3</b> , since  the segment is divided into three equal parts, and <b>N = 4</b> , since  each part is converted into 4 parts equal to 1/4 of the original.  Then the fractal dimension of such a set at infinite iteration will be equal to the following value: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ff/0d6/278/2ff0d6278b46b6832d962da4f2fc7c00.gif"><br><br>  As another example, let's look at <a href="http://ru.wikipedia.org/wiki/%25D0%25A2%25D1%2580%25D0%25B5%25D1%2583%25D0%25B3%25D0%25BE%25D0%25BB%25D1%258C%25D0%25BD%25D0%25B8%25D0%25BA_%25D0%25A1%25D0%25B5%25D1%2580%25D0%25BF%25D0%25B8%25D0%25BD%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B3%25D0%25BE">the Sierpinski triangle.</a> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fb9/a5d/4d9/fb9a5d4d9851f484bc35aedb94350a96.png" alt="image"><br><br>  At each iteration, one side is divided into 2 parts, i.e.  <b>M = 2</b> , and the result is 3 parts, i.e.  <b>N = 3</b> , then <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ef/88f/017/0ef88f017bff250f7207a4ceb1f86644.gif"><br><br>  Of course, the question arises, so we got some numbers, well, the dimension became fractional, so what?  Does this make any sense, or is it just math stuff.  There is no strict wording describing the meaning of fractionality of dimensionality, but it can be interpreted as follows, at some intuitive level.  Fractal dimension is sensitive <br><br><blockquote>  to all kinds of imperfections of real objects, allowing us to distinguish and individualize what was previously impersonal and indistinguishable ( <a href="http://ilab.xmedtest.net/%3Fq%3Dnode/4037">source</a> ) </blockquote><br><br>  The following interpretation is mentioned in the course on the analysis of complex systems: fractional dimension is a kind <i>of self-similarity density</i> . <br><br>  But speaking about real objects, the reader will immediately say, but then the Koch curve and the Sierpinski triangle are far from reality, what to do then?  As I mentioned above, the above definition of fractal dimension is simple, and one of several.  Let's move on to a more complex definition of fractal dimension.  In the meantime, take a look, for example, at Romanesco broccoli, this is the reality. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8e3/d8e/9a1/8e3d8e9a18250befcaca56248f368a47.jpg"><br><br><h4>  Minkowski dimension </h4><br><br>  The Minkowski dimension is one of the ways of defining the fractal dimension of a bounded set in a metric space, defined as follows: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/52b/569/bde/52b569bdef3df13199731903cdcf9808.gif"><br><br><ul><li>  where <b>N (Œµ) is the</b> minimum number of sets of diameter <b>Œµ</b> with which you can cover the original set. </li></ul><br><br>  If the limit does not exist, then consider the upper and lower limits, and say, respectively, of the upper and lower dimensions of Minkowski.  The upper and lower Minkowski dimensions are closely related to the Hausdorff dimension, intuitively it is easy to grasp by the way the dimension is specified.  Usually the three dimensions mentioned coincide, and only in very specific cases it makes sense to distinguish them, but these are not our cases. <br><br>  The Minkowski dimension also has another name - the <b>box-counting dimension</b> , due to the alternative method of its definition, which by the way gives a hint to the method of calculating this dimension itself.  Consider the two-dimensional case, although a similar definition extends to the n-dimensional case.  Take a bounded set in a metric space, for example, a black and white picture, draw a uniform grid with a step <b>Œµ</b> on it, and paint over those grid cells that contain at least one element of the desired set. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/95b/ec2/307/95bec230760ff31f16815c9b56482a33.png"><br><br>  Next, we begin to reduce the size of the cells, i.e.  <b>Œµ</b> , then the Minkowski dimension will be calculated using the above formula, examining the rate of change of the ratio of logarithms.  This phrase may not be immediately clear, but I think it will be clarified by the algorithm used to calculate the approximate value of the Minkowski dimension. <br><br><h4>  Box-counting algorithm </h4><br><br>  The algorithm is derived as follows; for <b>D <sub>bc</sub></b> , we denote the approximate value of the Minkowski dimension.  We write the definition of this dimension, removing the limit, we will simulate it in iterations, in which the size of the cells will change. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/918/a16/f6a/918a16f6a0963350f7cbaba2dc7d4920.gif"><br><br>  If we fix the cell sizes <b>Œµ</b> and treat <b>D <sub>bc</sub></b> as unknown, it is easy to see that the expression given is a line formula.  We can start a cycle on various cell sizes <b>Œµ</b> and record the result.  Let's plot these results and plot <a href="http://en.wikipedia.org/wiki/Linear_regression">the regression line</a> for the obtained set of data, this value will be an approximation of the fractal dimension of Minkowski. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/123/519/59a/12351959aa27385f21c40754708d9e10.png"><br><br>  <a href="http://en.wikipedia.org/wiki/List_of_fractals_by_Hausdorff_dimension">Here is the way a list of objects with their fractal dimensions</a> . <br><br>  I hope I managed to convey the connection between the natural dimension, and the way and why people came to different definitions of dimension.  Let's go to the code, and then to the examples. <br><br><h4>  Box-counting algorithm, C # code </h4><br><br>  To calculate the Minkowski dimension, we will need two procedures, starting with linear regression.  In general, the linear regression problem can be solved in various ways; most often, the gradient descent method and the least squares method are used for this (Normal equations).  The first works well on large and wide data, the second is weak on wide data because of the need to calculate the inverse matrix, whose width is equal to the width of the data array.  In our case, the width is only 2, so this is our case.  In vectorized form, the linear regression solution is written as follows: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ba0/494/a48/ba0494a48f1f5526a4fa5d942f915596.gif"><br><br>  The inverse matrix will be searched by the following formula: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6d7/d80/211/6d7d802118df6e04102af9359b1a36e5.png"><br><br><div class="spoiler">  <b class="spoiler_title">Normal equations</b> <div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function">[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NormalEquations2d</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] x</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//x^t * x double[,] xtx = new double[2, 2]; for (int i = 0; i &lt; x.Length; i++) { xtx[0, 1] += x[i]; xtx[0, 0] += x[i] * x[i]; } xtx[1, 0] = xtx[0, 1]; xtx[1, 1] = x.Length; //inverse double[,] xtxInv = new double[2, 2]; double d = 1/(xtx[0, 0]*xtx[1, 1] - xtx[1, 0]*xtx[0, 1]); xtxInv[0, 0] = xtx[1, 1]*d; xtxInv[0, 1] = -xtx[0, 1]*d; xtxInv[1, 0] = -xtx[1, 0]*d; xtxInv[1, 1] = xtx[0, 0]*d; //times x^t double[,] xtxInvxt = new double[2, x.Length]; for (int i = 0; i &lt; 2; i++) { for (int j = 0; j &lt; x.Length; j++) { xtxInvxt[i, j] = xtxInv[i, 0]*x[j] + xtxInv[i, 1]; } } //times y double[] theta = new double[2]; for (int i = 0; i &lt; 2; i++) { for (int j = 0; j &lt; x.Length; j++) { theta[i] += xtxInvxt[i, j]*y[j]; } } return theta; }</span></span></code> </pre> <br></div></div><br><br>  The zero element of the output vector contains the angular coefficient (this will be the desired Minkowski dimension), and the next element is the offset.  And actually key function which returns dataset on which it is necessary to calculate the angular coefficient <br><br><div class="spoiler">  <b class="spoiler_title">Box counting</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> Box-counting algorithm </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="bw"&gt;</span></span></span><span class="hljs-comment">black-white bitmap</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="startSize"&gt;</span></span></span><span class="hljs-comment">initial size of square of grid</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="finishSize"&gt;</span></span></span><span class="hljs-comment">final size of square of grid</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="step"&gt;</span></span></span><span class="hljs-comment">step of changing of the grid</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;returns&gt;</span></span></span><span class="hljs-comment">baList.Add(Math.Log(1d/b), Math.Log(a)), where b is swuare length size, a is the number of intersection of image with grid squares</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/returns&gt;</span></span></span><span class="hljs-comment"> public static IDictionary</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;double, double&gt;</span></span></span><span class="hljs-comment"> BowCountingDimension(BwBitmap bw, int startSize, int finishSize, int step = 1, string dataPath = "") { //length size - number of boxes IDictionary</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;double, double&gt;</span></span></span><span class="hljs-comment"> baList = new Dictionary</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;double, double&gt;</span></span></span><span class="hljs-comment">(); for (int b = startSize; b </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;= finishSize; b += step) { int hCount = bw.Height/b; int wCount = bw.Width/b; bool[,] filledBoxes = new bool[wCount + (bw.Width &gt;</span></span></span><span class="hljs-comment"> wCount*b ? 1 : 0), hCount + (bw.Height &gt; hCount*b ? 1 : 0)]; for (int x = 0; x </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt; bw.Width; x++) { for (int y = 0; y &lt; bw.Height; y++) { if (bw.GetBwPixel(x, y)) { int xBox = x/b; int yBox = y/b; filledBoxes[xBox, yBox] = true; } } } int a = 0; for (int i = 0; i &lt; filledBoxes.GetLength(0); i++) { for (int j = 0; j &lt; filledBoxes.GetLength(1); j++) { if (filledBoxes[i, j]) { a++; } } } baList.Add(Math.Log(1d/b), Math.Log(a)); if (dataPath.Length &gt;</span></span></span><span class="hljs-comment"> 0) { if (dataPath[dataPath.Length - 1] != '\\') { dataPath += '\\'; } if (Directory.Exists(dataPath)) { XBitmap bmp = new XBitmap(bw); for (int i = 0; i </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt; filledBoxes.GetLength(0); i++) { bmp.DrawLine(i * b, 0, i * b, bmp.Height, Color.HotPink); } for (int j = 0; j &lt; filledBoxes.GetLength(1); j++) { bmp.DrawLine(0, j * b, bmp.Width, j * b, Color.HotPink); } for (int i = 0; i &lt; filledBoxes.GetLength(0); i++) { for (int j = 0; j &lt; filledBoxes.GetLength(1); j++) { if (filledBoxes[i, j]) { bmp.FillRectangle(i * b, j * b, i * b + b, j * b + b, Color.Red, 2); } } } bmp.ConvertToNativeBitmap().Save(dataPath + b + ".bmp"); } } Logger.Instance.Log("BoxCounting: b is " + b + " of " + finishSize); } if (dataPath.Length &gt;</span></span></span><span class="hljs-comment"> 0) { using (StreamWriter sw = new StreamWriter(dataPath + "ba.csv")) { sw.WriteLine("NumberOfBoxes,LengthOfSideInv"); foreach (double bInv in baList.Keys) { sw.WriteLine(baList[bInv] + "," + bInv); } sw.Close(); } } return baList; }</span></span></code> </pre><br></div></div><br><br>  It remains only to link the two procedures: <br><br><pre> <code class="cs hljs">IDictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt; baList = BowCountingDimension(bwContour, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, dir + <span class="hljs-string"><span class="hljs-string">"boxing\\"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[] y = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[baList.Count]; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[] x = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[baList.Count]; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">double</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> baList.Keys) { y[c] = baList[key]; x[c] = key; c++; } <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[] theta = NormalEquations2d(y, x);</code> </pre><br><br><h4>  Examples </h4><br><br><h5>  Letter </h5><br><br>  Consider a simple image without <i>features</i> , i.e.  with smooth edges.  In computer vision, it is often not the entire image that is analyzed, but its outline. <br><br><img src="https://habrastorage.org/storage3/60c/425/4f0/60c4254f07d976d78c8f50af57b980d3.png"><img src="https://habrastorage.org/getpro/habr/post_images/8c5/cbe/83d/8c5cbe83d7e45c22facbcc2d8f502c31.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c0b/f18/074/c0bf18074f180b21b28fa2f3fcd1cdb3.gif"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ce2/587/e07/ce2587e077d849d0a3a07e805592dd68.png"><br><br>  The fractal dimension in the area of ‚Äã‚Äãthe unit tells us that the figure is really without features, and quite smooth. <br><br><h5>  Curve Koch </h5><br><br><img src="https://habrastorage.org/getpro/habr/post_images/28b/314/b8a/28b314b8a600303a7c6685eba0c4df5d.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/7fc/6b6/557/7fc6b6557edfdf6ccc50f580f393636c.gif"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/123/519/59a/12351959aa27385f21c40754708d9e10.png"><br><br>  The value is almost the same as when calculating the fractal dimension analytically, it is obvious that with increasing image resolution, the approximated value will approach the calculated one analytically. <br><br><h5>  JanSetler </h5><br><br><img src="https://habrastorage.org/getpro/habr/post_images/7fc/ca7/2ef/7fcca72ef158b183d7a7785f620a26e8.jpg"><img src="https://habrastorage.org/getpro/habr/post_images/cfa/8eb/6df/cfa8eb6df09dac3e693a224f55c12c03.png"><img src="https://habrastorage.org/getpro/habr/post_images/48e/f3d/32f/48ef3d32fbf9e3e7d63ffef801205f7b.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/cd8/b14/f5f/cd8b14f5f73edfc1d5448a2d8e27d932.gif"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f7c/964/869/f7c9648695e22d212e99100c57c8b765.png"><br><br><h5>  Map of Russia </h5><br><br>  Take something more rugged, such as a map of our country. <br><br><img src="https://habrastorage.org/storage3/130/b85/6ed/130b856ed695a21df08fefcc069d837d.png"><img src="https://habrastorage.org/getpro/habr/post_images/aaf/c6b/f6d/aafc6bf6dcd617534737ec39aa416c3e.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/400/9b4/6ef/4009b46ef72aa6446f2ba6745cca193f.gif"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/a5a/6d8/d70/a5a6d8d708ad1d3ab776c2237d85880d.png"><br><br>  It turns out that the priest Jennifer is a little more interesting than the contour of Russia, so what can we do. <br><br><h5>  Fractal </h5><br><br>  Will there be a significant difference in the value of the dimension for the fractal?  Let's check.  Consider one of the <a href="http://habrahabr.ru/post/206516/">sets of Julia</a> , or rather its boundary.  Gifku had to cut, because  the program did not cope with high resolution, and scaling overwritten the grid. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a55/582/4cc/a555824cca4df0f1f642bda9766b2b29.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d64/9f4/e0d/d649f4e0da15a73ec731b139b1173fa7.gif"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/40e/8b2/0df/40e8b20df77ff8738f650d64e6374844.png"><br><br>  As you can see, the fractal is even more interesting than the priest Jennifer. <br><br><h4>  Links </h4><br><br>  You will find all the information on the links above, at the end I will repeat only about two courses, the second by the way started only a couple of days ago, so I advise everyone. <br><br><ul><li>  <a href="http://www.complexityexplorer.org/online-courses/3">Introduction to Complexity</a> </li><li>  <a href="http://www.complexityexplorer.org/online-courses/4">Introduction to Dynamical Systems and Chaos</a> </li></ul><br><br>  As I sent a letter to the Habr‚Äôs administrators with a request to create a machine learning hub, I received the following answer: ‚ÄúIf there are 15-20 posts that simply have to be in this hub, we will think.‚Äù  In general, there are more than 15-20 such posts for a long time, I have only a minimum of 10 of them. I understand that the administration is more busy with hubs and politicians, but we can try to draw their attention to really important hubs. </div><p>Source: <a href="https://habr.com/ru/post/208368/">https://habr.com/ru/post/208368/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../208352/index.html">Automatic tagging of cache in Yii</a></li>
<li><a href="../208354/index.html">Holidays for "wimps"</a></li>
<li><a href="../208356/index.html">Reboot iOS. Simple and tasteful</a></li>
<li><a href="../208358/index.html">Turning your smartphone into a gaming console Dendy, Sega, PS</a></li>
<li><a href="../208364/index.html">Get ROOT rights on any * phone</a></li>
<li><a href="../208370/index.html">Koreans made a nanobot to fight cancer</a></li>
<li><a href="../208374/index.html">Intel announced support for Steam Machines and announced Dual OS officially + response from AMD</a></li>
<li><a href="../208376/index.html">How I made the API work in Yiinitializr Advanced</a></li>
<li><a href="../208378/index.html">Creating zip modules in python</a></li>
<li><a href="../208384/index.html">The official openSUSE forum is hacked</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
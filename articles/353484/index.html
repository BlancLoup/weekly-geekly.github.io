<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Organizer catalog for Heroes III cards and more than 7,700 cards in addition</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have been playing Heroes of Might and Magic since the time of the King of Peas, Queen Lamanda, and during this time so many cards have accumulated f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Organizer catalog for Heroes III cards and more than 7,700 cards in addition</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/yz/oc/5x/yzoc5xmawjugm7awkp40hnu0k0u.jpeg"></div><br>  I have been playing Heroes of Might and Magic since the time of the <s>King of Peas,</s> Queen Lamanda, and during this time so many cards have accumulated for 3 Heroes that I decided to sort and structure them somehow. <br><br>  The objectives were as follows: <br><br><ol><li>  Get rid of duplicate cards </li><li>  Know exactly whether I played this card or not; if I did, then know the status: won, lost or missed </li><li>  Have the ability to upload new cards to the organizer with a check for uniqueness </li><li>  Write your personal comment to the card </li><li>  Have the ability to instantly sort the map catalog by the following parameters: <br>  name, status, version, encoding, map size, dungeon presence, difficulty level and file size <br></li></ol><a name="habracut"></a><br><h2>  <font color="#cc0000">Screenshots</font> </h2><br>  Screenshots are clickable 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/webt/l_/4w/xa/l_4wxafklyxsvuuk96xhiifsln4.png"></div><br>  Full card catalog <br><br> <a href=""><img src="https://habrastorage.org/webt/ra/uy/tn/rauytnnyymolrsxxv95em1dzkhq.png"></a> <br>  Work with filters.  Here I sorted maps that I didn‚Äôt play, SOD (The Shadow of Death) versions, ascii encoding, Extra Large size, there is a dungeon on the maps, Impossible difficulty level.  Green icon - to download the map from the catalog to the local computer. <br><br> <a href=""><img src="https://habrastorage.org/webt/ro/7k/ye/ro7kye3xazhnqjffzyq_ew_vivu.png"></a> <br>  Work with the map, if you click on the icon with a pen.  In the modal window, everything is obvious and visible when I last played this map. <br><br> <a href=""><img src="https://habrastorage.org/webt/re/-h/rw/re-hrw57pmdu3erwav25mydkpec.png"></a> <br>  Attempt to download a map that is already in the directory. <br><br><h2>  <font color="#cc0000">Install and Run</font> </h2><br><ol><li>  Download and unpack the archive with the virtual machine: <br>  <a href="https://yadi.sk/d/O7_bt5UW3VkrTu">Download from yadisk 1.44GB</a> <br></li><li>  Download and install <a href="https://www.vmware.com/products/workstation-player.html">VMware Workstation Player</a> (Skip this item if VMware-Workstation is installed). </li><li>  We start the virtual machine.  We wait for it to load, and look at the IP address that VMware assigned to it: <br><br><img src="https://habrastorage.org/webt/n3/lx/v3/n3lxv3-7uyrf7h8hyoaoxr98nwe.png"><br><br><div class="spoiler">  <b class="spoiler_title">If IP is not assigned</b> <div class="spoiler_text">  Then either reboot the virtual machine with vmware, or log in <br>  Login: root <br>  Password: hero <br><br>  And enter the command: <br>  ifconfig <br>  See the current IP. <br>  And with the help of the command: <br>  nmtui <br>  You can fix it so that it does not change by adjusting the statics. <br></div></div><br>  We drive this address into the browser and get into the organizer with all the cards, as in the screenshots. </li></ol><br><h2>  <font color="#cc0000">Details for programmers and for those interested.</font> </h2><br>  All this "farm" is written in python3. <br>  I chose <a href="https://habr.com/post/346306/">Flask</a> as a framework. <br>  Database: MongoDB. <br><br>  Frontend: bootstrap3 and <a href="https://datatables.net/">DataTables</a> <br><br>  You can parse the Heroes III map using standard python modules: gzip and struct.  The gzip module unpacks the file, as it is stored in a compressed form.  The struct module provides the unpack () function for working with binary variable-length record formats, and the calcsize function returns the size of the structure.  Code "I" for four byte without signed numbers.  The code "&lt;" indicates that standard-size numbers and bytes are written in the order of "first low" (little-endian). <br><br>  The following code gets the Heroes version of the file named Zyconia.h3m <br><br><pre><code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>h3m_versions = {<span class="hljs-number"><span class="hljs-number">0x0E</span></span>: <span class="hljs-string"><span class="hljs-string">"RoE"</span></span>, <span class="hljs-number"><span class="hljs-number">0x15</span></span>: <span class="hljs-string"><span class="hljs-string">"AB"</span></span>, <span class="hljs-number"><span class="hljs-number">0x1C</span></span>: <span class="hljs-string"><span class="hljs-string">"SoD"</span></span>, <span class="hljs-number"><span class="hljs-number">0x33</span></span>: <span class="hljs-string"><span class="hljs-string">"WoG"</span></span>} &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> gzip &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> struct &gt;&gt;&gt; h3m_data = gzip.open(<span class="hljs-string"><span class="hljs-string">'Zyconia.h3m'</span></span>) &gt;&gt;&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s)</span></span></span><span class="hljs-function">:</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> struct.unpack(s, h3m_data.read(struct.calcsize(s))) ... &gt;&gt;&gt; print(h3m_versions[r(<span class="hljs-string"><span class="hljs-string">"&lt;I"</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>]]) RoE</code> </pre> <br><ul><li>  RoE - The Restoration of Erathia </li><li>  AB - Armageddon's Blade </li><li>  SoD - The Shadow of Death </li><li>  WoG - In the Wake of Gods </li></ul><br>  The full code of the parser can be viewed on github. <br>  Using work with binary data, I got to the following data: <br><br><ul><li>  Card size </li><li>  The presence of the cave </li><li>  Card name </li><li>  Map Description </li><li>  Level of difficulty </li></ul><br>  The unique identifier for each card (file) is considered the usual md5. <br><br><pre> <code class="python hljs">tmp = res[<span class="hljs-string"><span class="hljs-string">'Version'</span></span>] + res[<span class="hljs-string"><span class="hljs-string">'underground'</span></span>] + res[<span class="hljs-string"><span class="hljs-string">'mapsize'</span></span>] + res[<span class="hljs-string"><span class="hljs-string">'name'</span></span>].lower() + res[<span class="hljs-string"><span class="hljs-string">'difficulty'</span></span>] res[<span class="hljs-string"><span class="hljs-string">'_id'</span></span>] = hashlib.md5(str(tmp).encode(<span class="hljs-string"><span class="hljs-string">'utf-8'</span></span>)).hexdigest()</code> </pre><br>  I put all the data in the md5-hash, except for the description, because sometimes the name of the site is added to the description of the site from which it was downloaded and a duplicate is obtained, this is one of the reasons why it is impossible to just take and calculate the hash amount of the file with the card to check for uniqueness . <br><br><ul><li>  <a href="https://github.com/Alexmod/heroes3manager-maps">Github link</a> </li><li>  <a href="https://yadi.sk/d/jPFJEAWP3VrpHv">Separate archive with maps</a> </li><li>  <a href="">Mongodb database dump</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/353484/">https://habr.com/ru/post/353484/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../353472/index.html">PostgreSQL 10 partitioning and more</a></li>
<li><a href="../353476/index.html">Aitracking, Emotions and VR: Technology Convergence and Current Research</a></li>
<li><a href="../353478/index.html">Beautiful listing of files and directories in nginx</a></li>
<li><a href="../353480/index.html">Dangerous pickles - malicious serialization in Python</a></li>
<li><a href="../353482/index.html">4. Check Point for maximum. Checking Anti-Virus with Kali Linux</a></li>
<li><a href="../353486/index.html">Why game servers and chat must exist separately</a></li>
<li><a href="../353488/index.html">Issue # 18: IT training - current issues and challenges from leading companies</a></li>
<li><a href="../353490/index.html">And again about translating PHP documentation</a></li>
<li><a href="../353492/index.html">GeekBrains starts training performance marketing specialists</a></li>
<li><a href="../353494/index.html">IntelliJ IDEA 2018.1 - Improved code analysis, support for Git partial commits, Android Studio 3.0, and more.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
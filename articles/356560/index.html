<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Chinese traffic routing error in Russia</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In September last year, the third largest Russian mobile operator, Vimpelcom, and China Telecom signed an agreement on the direct connection of intern...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Chinese traffic routing error in Russia</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/da2/748/3ee/da27483ee9564023958fc028d586f9fe.png"></div><br><br>  In September last year, the third largest Russian mobile operator, Vimpelcom, and China Telecom <a href="http://www.comnews.ru/node/76819">signed</a> an agreement on the direct connection of international and long-distance communication networks and interconnection, the amount of this contract was $ 2.2 million.  The goal of this deal for the Russian side was to reach the Far East. <br><br>  Over the past year, the Chinese telecom operator has tried several times to play Ivan Susanin.  Doug Madori <a href="http://research.dyn.com/2014/11/chinese-routing-errors-redirect-russian-traffic/">writes</a> about this in detail in the DynResearch company blog. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Translated from the language of ordinary people into the language of specialists, the deal concluded means that the two companies have agreed to share information on dynamic routing using the BGP protocol.  And as it often happens in such situations, one of the parties may issue routing data from other providers, which will put its communication lines in the path of the traffic of the second company.  Specifically with these two companies, this has happened more than a dozen times over the past year.  This phenomenon happens, but is poorly described in the BGP literature. <br><br>  In general, BGP peering is a frequent occurrence in the world of large network providers, and this action has several meanings.  Specifically, in this case, it means routing in such a way that traffic is exchanged freely, without paying one of the parties.  Without a transit provider, you can save a lot, even if you spend money on servicing these peer-to-peer schemes. <br><br>  In any case, the routing information received by one of the providers from another under the peering agreement usually remains within the network of this operator.  In the example below, provider A sends information about the routing of its customers' data to provider B, as a result of which traffic from provider B‚Äôs clients goes through the peering connection to provider A.‚Äôs clients. This is normal operation. <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4bd/ec2/d72/4bdec2d7275444bb8b687bbcd602692e.gif"></div><br><br>  Something can go wrong in several different ways.  Provider B can take routes from provider A and send them to other providers, as shown below.  Thus, provider B puts itself in the path of external traffic destined for provider A. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ae8/c67/2cb/ae8c672cbf3a4e97bf59432203ff32dd.gif"></div><br><br>  If provider B provides a route received from providers to which it has a connection, to provider A, then the latter‚Äôs traffic will follow these paths through provider B, even if it usually does not have to go through provider B. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1fa/842/c6b/1fa842c6b872443582d37e67a39ae9ae.gif"></div><br><br>  Unlike other major and well-known incidents, the situations described above can occur often, and their appearance does not cause such a surge of attention.  The response grows and packet routes change, and this is harder to notice than the complete lack of a network, so these problems may remain unresolved for a long time.  In any case, the traffic is not going where it should, which negatively affects network performance and information security. <br><br>  So, over the past year, incorrect information about the routing from China Telecom has hit the VimpelCom network several times.  This happened, for example, on August 5 of this year, when China Telecom (AS4134) briefly submitted to VimpelCom almost its entire BGP table (326,622 entries), which resulted in a sharp increase in the response for users of Russian providers.  Still, only about 120 ms are needed for traveling from Russia to China.  Routing even within Russia was carried out through China Telecom networks. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b3e/350/a9f/b3e350a9fcab4ecfbe5f57931672d248.png"></div><br><br>  This was the result of the traceroute: the information began its journey in Virginia (USA), then it was sent to California via NTT networks, where it was transmitted to China Telecom.  From there she went to Shanghai, and then to Frankfurt and only later to Russia, to Omsk. <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><code>trace from Reston, VA to Omsk, Russia at 12:00 Aug 05, 2014</code> <br> <code>1 *</code> <br> <code>2 129.250.204.153 (NTT America, Ashburn, US) 1.010ms</code> <br> <code>3 129.250.4.40 (NTT America, Ashburn, US) 0.934ms</code> <br> <code>4 *</code> <br> <code>5 129.250.5.13 (NTT America, San Jose, US) 74.649ms</code> <br> <code>6 129.250.8.6 xe-0.chinanet.snjsca04.us.bb.gin.ntt.net 70.909ms</code> <br> <code>7 202.97.90.33 (China Telecom, San Jose, US) 71.451ms</code> <br> <code>8 202.97.58.237 (China Telecom, Shanghai, CN) 341.819ms</code> <br> <code>9 202.97.58.66 (China Telecom, Frankfurt, DE) 641.424ms</code> <br> <code>10 118.85.204.58 (China Telecom, Frankfurt, DE) 608.965ms</code> <br> <code>11 79.104.245.250 pe-r.Omsk.gldn.net 632.054ms</code> <br> <code>12 195.239.162.178 (Vimpelcom, Omsk, RU) 687.536ms</code> <br> <code>13 89.179.76.25 vpn2-gi0-0.omsk.corbina.net 682.153ms</code> <br> <code>14 128.73.155.213 128-73-155-213.broadband.corbina.ru 707.525ms</code> </div> </div><br><br>  For a more visual illustration of the abnormality of this situation, let‚Äôs take a look at the VimpelCom traceroute to Germany.  Traffic goes from VimpelCom networks to Frankfurt, then enters China Telecom networks, which deliver it to Shanghai before returning Chello Broadband, which has a peering agreement with China Telecom in Los Angeles.  Then Chello Broadband takes him to New York, from there to Frankfurt again, and only then to Germany.  For half a second traffic at least once rounds the globe. <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"> <code>trace from Moscow, Russia to Marburg an der Lahn, Germany at 14:29 Aug 05, 2014</code> <br> <code>1 *</code> <br> <code>2 194.154.89.125 (Vimpelcom, Moscow, RU) 0.908ms</code> <br> <code>3 79.104.235.74 mx01.Frankfurt.gldn.net 40.695ms</code> <br> <code>4 118.85.204.49 beeline-gw2.china-telecom.net 48.799ms</code> <br> <code>5 202.97.58.61 (China Telecom, Shanghai, CN) 290.810ms</code> <br> <code>6 202.97.58.202 (China Telecom, Los Angeles, US) 514.115ms</code> <br> <code>7 202.97.90.62 (China Telecom, Los Angeles, US) 537.933ms</code> <br> <code>8 213.46.190.217 213-46-190-217.aorta.net (New York) 414.365ms</code> <br> <code>9 84.116.135.122 (UPC Austria GmbH, Vienna, AT) 420.591ms</code> <br> <code>10 213.46.160.205 uk-lon02a-rd1-pos-4-0-0.aorta.net 421.530ms</code> <br> <code>11 84.116.133.65 (UPC Austria GmbH, Frankfurt, DE) 421.557ms</code> <br> <code>12 81.210.129.234 7111a-mx960-01-ae1.fra.unity-media.net 420.867ms</code> <br> <code>13 80.69.107.214 7111a-mx960-02-ae0.fra.unity-media.net 418.427ms</code> <br> <code>14 80.69.107.185 7211a-mx960-01-ae1.gie.unity-media.net 420.454ms</code> <br> <code>15 88.152.128.0 (Unitymedia, Marburg an der Lahn, DE) 423.105ms</code> </div> </div><br><br>  Even the internal Russian traffic, which usually goes to Moscow, went through the equipment of China Telecom.  In the following example, traffic from Moscow is sent to Frankfurt, then China Telecom is processed there as well and only after it returns to Megafon networks.  Thanks for the fact that not through Shanghai.  (An illustration of this particular situation is shown on the map of Europe before the kata.) <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"> <code>trace from Moscow, Russia to Yaroslavl, Russia at 13:13 Aug 05, 2014</code> <br> <code>1 *</code> <br> <code>2 194.154.89.125 (Vimpelcom, Moscow, RU) 0.542ms</code> <br> <code>3 79.104.235.74 mx01.Frankfurt.gldn.net 37.006ms</code> <br> <code>4 118.85.204.57 beeline-gw4.china-telecom.net 39.505ms</code> <br> <code>5 213.248.84.185 ffm-b10-link.telia.net 41.481ms</code> <br> <code>6 62.115.137.180 ffm-bb2-link.telia.net 42.227ms</code> <br> <code>7 80.91.251.159 s-bb4-link.telia.net 42.894ms</code> <br> <code>8 213.155.133.105 s-b2-link.telia.net 41.528ms</code> <br> <code>9 80.239.128.234 megafon-ic-151430-s-b2.c.telia.net 42.707ms</code> <br> <code>10 *</code> <br> <code>11 78.25.73.42 (MegaFon, Volga,RU) 49.992ms</code> <br> <code>12 213.187.127.98 ysu1-ccr1036-1.yar.ru 50.301ms</code> <br> <code>13 213.187.117.230 (NETIS Telecom, Yaroslavl', RU) 54.769ms</code> </div> </div><br><br>  Of course, when planning the network level of the organization of the Internet, its security was poorly thought out, and these peer-to-peer leaks can hardly be avoided.  But this not only leads to performance problems, but also makes you very worried about security. <br><br>  All this is somewhat amusing if we recall that several weeks ago it became officially known about the desire of the Russian government to have greater control over the security of the Russian Internet segment.  Is it really impossible to deal with specific issues, because they constitute the security of our network segment? </div><p>Source: <a href="https://habr.com/ru/post/356560/">https://habr.com/ru/post/356560/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../356468/index.html">Comparison of employee activity monitoring systems: the struggle for working hours</a></li>
<li><a href="../356472/index.html">There are no vulnerabilities in Sberbank online</a></li>
<li><a href="../356554/index.html">When is the PIN code requested when paying?</a></li>
<li><a href="../356556/index.html">Russian authorities have prepared a "plan to protect the Russian segment of the Internet from external influence"</a></li>
<li><a href="../356558/index.html">Protected anonymous service ProtonMail from CERN developers began sending invites</a></li>
<li><a href="../356562/index.html">At Harvard, surveillance cameras were secretly installed in the classrooms to keep a record of student attendance.</a></li>
<li><a href="../356564/index.html">Details of a recent FBI operation on mass closure of onion sites ‚Äî how hidden services are revealed</a></li>
<li><a href="../356566/index.html">Mozilla will help the Tor project and all users who want privacy.</a></li>
<li><a href="../356568/index.html">Adaptive A3 Antivirus independently detected and fixed ShellShock vulnerability in 4 minutes</a></li>
<li><a href="../356570/index.html">Criminal liability will be imposed for stealing bank passwords.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
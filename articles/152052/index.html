<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Manually flash AVR</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Picture to attract attention - xkcd 

 Imagine that you are on a desert island. And you vital need to program the microcontroller. Why, you ask? Well,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Manually flash AVR</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/f2d/21d/7b2/f2d21d7b24beb91f997e89a576e64c1f.png" title="This has already become a habit: you see a picture with xkcd - you hover your mouse to see the title. After all, it has all the salt!"><br>  <i>Picture to attract attention - <a href="http://xkcd.com/731/">xkcd</a></i> <br><br>  Imagine that you are on a desert island.  And you vital need to program the microcontroller.  Why, you ask?  Well, let's say, to fix an emergency radio beacon, without which the chances of rescue fall sharply. <br><br>  Rejoicing that you have not yet forgotten the assembly course, you somehow wrote a program with a stick in the sand.  Among the surviving things, by some miracle, there was a printout of documentation for the controller (well, that you have not had time to put it on the kindling!), And the program was converted into machine codes.  It remains the very nonsense - to flash it into the controller.  But within a radius of 500 kilometers there is not a single programmer, not to mention computers.  You have only a power source (a battery of coconut <s>potatoes</s> ) and a couple of pieces of wire. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      How to flash the MK with bare hands? <br><a name="habracut"></a><br>  As the experimental will be MK ATtiny13 company Atmel.  The described method works with almost any controller of the AVR family, except that the command codes may differ slightly. <br><br><h1>  Interface </h1>  The most common and convenient interface for AVR firmware is the <b>SPI</b> (Serial Peripheral Interface).  To connect via SPI you need only four wires, not including ground: <br><ul><li>  <b>SCK</b> - clock signal, synchronizes all data exchange operations; </li><li>  <b>MOSI</b> (Master Out Slave In) - data line from master to slave; </li><li>  <b>MISO</b> (Master In Slave Out) - data line, on the contrary, from the slave to the master; </li><li>  <b>RESET</b> - to enable SPI firmware, you must apply a logical "0" to this output. </li></ul><br>  Thus, we need to form three signals and (optionally) read one.  Here is the simplest scheme for this: <br><img src="https://habrastorage.org/storage2/ec1/05b/011/ec105b01158875c5ef0eb32ca909cf67.png"><br>  <i>Fig.</i>  <i>1. The simplest SPI connection scheme.</i> <br><br>  For your own convenience, you can add an indication of the input signals.  The scheme is complicated, but not excessive: <br><img src="https://habrastorage.org/storage2/c03/b40/875/c03b408750978a60e85748d7570ba209.png"><br>  <i>Fig.</i>  <i>2. Scheme with indication of signals.</i> <br><br><h2>  Chatter protection </h2><br>  Unfortunately, simply using the buttons to form SPI signals, we will not achieve a good result.  The reason for this is an unpleasant phenomenon called <b>contact bounce</b> .  During the closure, the mechanical contacts collide, bounce off each other, and instead of one impulse, several are obtained.  To suppress the chatter, you will have to assemble a simple circuit of a pair of logical elements: <br><img src="https://habrastorage.org/storage2/a75/9e0/5de/a759e05de18fed412ef34d6b64aa5708.png"><br>  <i>Fig.</i>  <i>3. RS trigger for chatter suppression.</i> <br><br>  This is an RS trigger that switches to state ‚Äú1‚Äù at the moment of closing the lower contact of the switch and ignores other bounce pulses.  Resetting the trigger back to ‚Äú0‚Äù occurs when the upper contact is closed, that is, when the button is released. <br><br>  ‚ÄúLook, run away!‚Äù The reader will say, ‚ÄúI‚Äôm sitting on a desert island.  Where am I going to get the triggers? ‚ÄùWell, you can get rid of the bounce and without electronic circuits.  It is only necessary to replace the ‚Äúdry‚Äù contact with a <s>wet</s> liquid.  The switch will be two electrodes, lowered into the conductive liquid. <br><br>  MOSI and RESET signals do not require chatter suppression, unlike SCK: here the signal level only has the signal level at the time of the sample, and not its edges. <br><br><h1>  How does SPI work </h1><br><img src="https://habrastorage.org/storage2/0b8/fab/448/0b8fab448e9ed037c8b053df7e433569.png"><br>  <i>Fig.</i>  <i>4. Timing diagram of SPI.</i> <br><br>  SPI is a synchronous interface: all operations are synchronized with clock edges (SCK), which is generated by the master.  The maximum transfer rate is limited to 1/4 of the clock frequency of the controller.  There is no limit on the minimum speed: without a clock signal, data exchange is ‚Äúfrozen‚Äù, and the interface can remain in a static state for an arbitrarily long time. <br><br>  Transmission over SPI is done in full duplex mode, one bit per clock per direction.  On the rising edge of the SCK signal, the slave device reads the next bit from the MOSI line, and on the falling edge it outputs the next bit to the MISO line.  All attention to Figure 4. <br><br><h1>  Firmware protocol </h1>  All communication of the programmer with the MC consists of sending 32-bit commands and receiving controller responses.  A full list of commands is in the datasheet, and here we will list what operations need to be performed for the MK firmware: <br><ol><li>  Putting the controller into programming mode; </li><li>  (optional) Read device identifier; </li><li>  Erasing; </li><li>  Record in flash; </li><li>  (optional) Check recorded; </li></ol><br>  Consider each step in detail. <br><br><h2>  Enable programming mode </h2><br>  Programming mode is activated by applying ‚Äú0‚Äù to RESET leg.  But there are some subtleties.  Atmel recommends that you first put a low level on the RESET and SCK outputs, and only then supply power to the controller.  If this is not possible, after powering up, apply ‚Äú0‚Äù to SCK, and then a positive impulse to RESET: <br><br><img src="https://habrastorage.org/storage2/26d/4d1/732/26d4d1732ae8fec3603dad08977166d9.png"><br>  <i>Fig.</i>  <i>5. Transfer MK in programming mode.</i> <br><br>  But that's not all.  Next, you need to send a command to actually enable the programming mode: <b>10101100 01010011 xxxxxxxx xxxxxxxx</b> <br><br><img src="https://habrastorage.org/storage2/232/54e/c39/23254ec399b6d0d3a06932a0844e4b41.png"><br>  <i>Fig.</i>  <i>6. ‚ÄúProgram Enable‚Äù command.</i> <br><br>  Bits labeled <b>x</b> can be any.  During the transmission of the third byte, the controller must send back the second byte ( <b>01010011</b> ).  If this happens, then all is well, the command is accepted, the controller is waiting for further instructions.  If the answer is different, you need to restart the MC and try it all over again. <br><br><h2>  ID verification </h2><br><br><img src="https://habrastorage.org/storage2/e6b/b2b/540/e6bb2b5404d08b1d8359b9d64799de6b.png"><br>  <i>Fig.</i>  <i>7. Team "Read Signature Byte".</i> <br><br>  Before you write anything in the memory of the MK, you need to make sure that we have exactly the model we need.  Each controller model has its own three-byte identifier (Signature).  You can read it with commands like <br>  <b>00110000 000xxxxx xxxxxxbb xxxxxxxx</b> <br>  Instead of <b>bb</b> (third byte of the command), substitute <b>00</b> for the first byte of the identifier, <b>01</b> for the second and <b>10</b> for the third.  The corresponding identifier byte will be transmitted by the controller when sending the 4th byte of the command. <br><br>  For ATtiny13, the identifier value is <b>00011110 10010000 00000111</b> ( <b>0x1E 90 07</b> ). <br><br><h2>  Controller cleaning </h2><br><br><img src="https://habrastorage.org/storage2/9ef/5dc/e20/9ef5dce200d0806c17e67fed697d9a23.png"><br>  <i>Fig.</i>  <i>8. Team "Chip Erase".</i> <br><br>  The next step is to clear the memory MK, which is carried out by sending the command "Chip Erase" <br>  <b>10101100 100xxxxx xxxxxxxx xxxxxxxx</b> <br>  This command will erase the contents of Flash and EEPROM (all cells will contain FF), as well as removing lock bits, if they are set. <br><br><h2>  Write to flash memory </h2><br>  The program memory (Flash) in ATtiny13 consists of 512 double-byte words (1K bytes).  The word address is 9 bits wide.  Flash-memory is divided into pages, each page has a size of 16 words (a total of 32 pages).  Recording in flash is carried out in two stages. <br><br>  First you need to load data into the page buffer, for this you use the command ‚ÄúLoad Program Memory Page‚Äù <br>  <b>01000000 000xxxxx xxxxbbbb iiiiiiii</b> - to load the low byte of the word, and <b>01001000 000xxxxx xxxxbbbb iiiiiiii</b> - to load the high byte. <br>  The 4 low bits of the 3rd byte of the <b>bbbb command</b> are the address of the word on the page, <b>iiiiiiii</b> is the download byte.  First, the low byte of the word must always be loaded, and then the high byte of the same word. <br><br><img src="https://habrastorage.org/storage2/431/aba/4f5/431aba4f553d8b0fbd3a4cb602a03461.png"><br>  <i>Fig.</i>  <i>9. ‚ÄúLoad Program Memory Page‚Äù command.</i> <br><br>  After the page buffer has been loaded, the ‚ÄúWrite Program Memory Page‚Äù <b>01001100 0000000a bbbbxxxx xxxxxxxx command must be executed</b> to write the page directly to the controller's memory. <br>  The <b>low</b> bit of the second byte and the high 4 bits of the third <b>a: bbbb</b> is the five-bit page number to write. <br><br><img src="https://habrastorage.org/storage2/27f/93b/b04/27f93bb04ac703c170d0d2ca4abde7a6.png"><br>  <i>Fig.</i>  <i>10. ‚ÄúWrite Program Memory Page‚Äù command.</i> <br><br>  It all looks rather confusing, but nothing complicated.  The address of any byte of program memory consists of 10 bits: <b>ppppp: bbbb: w</b> , where <br>  <b>ppppp</b> - page number (used in the ‚ÄúWrite Program Memory Page‚Äù command); <br>  <b>bbbb</b> - the address of the word on the page (in the command ‚ÄúLoad Program Memory Page‚Äù); <br>  <b>w</b> - a bit that identifies the high or low byte in the word (encrypted in the first byte of the ‚ÄúLoad Program Memory Page‚Äù command). <br><br><h2>  Reading flash </h2><br><br><img src="https://habrastorage.org/storage2/84b/a59/1e7/84ba591e7eeea9da5ee3961eff244d53.png"><br>  <i>Fig.</i>  <i>11. The ‚ÄúRead Program Memory‚Äù command.</i> <br><br>  After writing the firmware to the MC, it would be nice to check what was written, since no data integrity check was performed.  The only way to check is to read the entire amount of flash-memory and compare with the original. <br><br>  Reading the program memory is easier than writing to it.  Forget about page organization, reading is performed byte-by-byte.  The ‚ÄúRead Program Memory‚Äù command looks like this: <br>  <b>00100000 0000000a bbbbbbbb xxxxxxxx</b> is for reading the low byte of a word, and <b>00101000 0000000a bbbbbbbb xxxxxxxx</b> is for the high byte. <br>  The <b>low</b> bit of the second byte and the entire third byte of <b>a: bbbbbbbb</b> is the address of the word in memory.  The read byte is returned during the transmission of the 4th byte of the command. <br><br><h2>  Programming completion </h2><br>  Perhaps the easiest operation.  To complete the programming and put the MC into operation, it is sufficient to submit the logical level ‚Äú1‚Äù to the RESET.  The controller will start and will work on the new program. <br><br><h1>  Practice </h1>  It is time to take advantage of the knowledge gained in practice.  The victim of the experiment - ATtiny13 - is plugged into a mock-up board, a signal conditioner is assembled nearby, everything is ready: <br><img src="https://habrastorage.org/storage2/23c/e4e/be6/23ce4ebe6fc77687c87e5a16db94b734.jpg"><br>  <i>Fig.</i>  <i>12. Experimental scheme.</i> <br><br>  We will sew a program of the form ‚Äúthere is no place easier‚Äù: <br><pre><code class="hljs objectivec">ldi R24, <span class="hljs-number"><span class="hljs-number">0x02</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> DDRB, R24 <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> PORTB,R24 L1: rjmp L1</code> </pre> <br>  All she does is give a unit to PB1‚Äôs leg and go into an infinite loop.  In machine codes, it takes only four words: <br><pre> <code class="hljs objectivec">E082 BB87 BB88 <span class="hljs-built_in"><span class="hljs-built_in">CFFF</span></span></code> </pre> <br>  To flash it to the controller, type the following commands: <br><pre> <code class="hljs sql">1010 1100 0101 0011 0000 0000 0000 0000 // program enable 1010 1100 1000 0000 0000 0000 0000 0000 // chip erase 0100 0000 0000 0000 0000 0000 1000 0010 // <span class="hljs-keyword"><span class="hljs-keyword">load</span></span> addr<span class="hljs-number"><span class="hljs-number">.0000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">low</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> <span class="hljs-number"><span class="hljs-number">82</span></span> <span class="hljs-number"><span class="hljs-number">0100</span></span> <span class="hljs-number"><span class="hljs-number">1000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">1110</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> // <span class="hljs-keyword"><span class="hljs-keyword">load</span></span> addr<span class="hljs-number"><span class="hljs-number">.0000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">high</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> E0 <span class="hljs-number"><span class="hljs-number">0100</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0001</span></span> <span class="hljs-number"><span class="hljs-number">1000</span></span> <span class="hljs-number"><span class="hljs-number">0111</span></span> // <span class="hljs-keyword"><span class="hljs-keyword">load</span></span> addr<span class="hljs-number"><span class="hljs-number">.0001</span></span> <span class="hljs-keyword"><span class="hljs-keyword">low</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> <span class="hljs-number"><span class="hljs-number">87</span></span> <span class="hljs-number"><span class="hljs-number">0100</span></span> <span class="hljs-number"><span class="hljs-number">1000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0001</span></span> <span class="hljs-number"><span class="hljs-number">1011</span></span> <span class="hljs-number"><span class="hljs-number">1011</span></span> // <span class="hljs-keyword"><span class="hljs-keyword">load</span></span> addr<span class="hljs-number"><span class="hljs-number">.0001</span></span> <span class="hljs-keyword"><span class="hljs-keyword">high</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> BB <span class="hljs-number"><span class="hljs-number">0100</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0010</span></span> <span class="hljs-number"><span class="hljs-number">1000</span></span> <span class="hljs-number"><span class="hljs-number">1000</span></span> // <span class="hljs-keyword"><span class="hljs-keyword">load</span></span> addr<span class="hljs-number"><span class="hljs-number">.0010</span></span> <span class="hljs-keyword"><span class="hljs-keyword">low</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> <span class="hljs-number"><span class="hljs-number">88</span></span> <span class="hljs-number"><span class="hljs-number">0100</span></span> <span class="hljs-number"><span class="hljs-number">1000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0010</span></span> <span class="hljs-number"><span class="hljs-number">1011</span></span> <span class="hljs-number"><span class="hljs-number">1011</span></span> // <span class="hljs-keyword"><span class="hljs-keyword">load</span></span> addr<span class="hljs-number"><span class="hljs-number">.0010</span></span> <span class="hljs-keyword"><span class="hljs-keyword">high</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> BB <span class="hljs-number"><span class="hljs-number">0100</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0011</span></span> <span class="hljs-number"><span class="hljs-number">1111</span></span> <span class="hljs-number"><span class="hljs-number">1111</span></span> // <span class="hljs-keyword"><span class="hljs-keyword">load</span></span> addr<span class="hljs-number"><span class="hljs-number">.0011</span></span> <span class="hljs-keyword"><span class="hljs-keyword">low</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> FF <span class="hljs-number"><span class="hljs-number">0100</span></span> <span class="hljs-number"><span class="hljs-number">1000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0011</span></span> <span class="hljs-number"><span class="hljs-number">1100</span></span> <span class="hljs-number"><span class="hljs-number">1111</span></span> // <span class="hljs-keyword"><span class="hljs-keyword">load</span></span> addr<span class="hljs-number"><span class="hljs-number">.0011</span></span> <span class="hljs-keyword"><span class="hljs-keyword">high</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> CF <span class="hljs-number"><span class="hljs-number">0100</span></span> <span class="hljs-number"><span class="hljs-number">1100</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> <span class="hljs-number"><span class="hljs-number">0000</span></span> // write page</code> </pre> <br>  The key to start, let's go! <br><iframe width="560" height="315" src="https://www.youtube.com/embed/UJHeDvr_doM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Only 425 clicks, and MK comes to life.  Now you will surely be found and rescued from this damned island. </div><p>Source: <a href="https://habr.com/ru/post/152052/">https://habr.com/ru/post/152052/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../152046/index.html">WEB interface for documenting administration units. Stage one, information gathering and design</a></li>
<li><a href="../152047/index.html">What sports do you do, habrauzer?</a></li>
<li><a href="../152048/index.html">JavaScript - useful materials</a></li>
<li><a href="../152050/index.html">How it's assembed - Robotic machine. Step one</a></li>
<li><a href="../152051/index.html">Bundle Transformer 1.6.2 released or what has changed in six months?</a></li>
<li><a href="../152053/index.html">Black Box vs White Box in system administration</a></li>
<li><a href="../152055/index.html">How to improve the look of 3 good old articles in the footer?</a></li>
<li><a href="../152056/index.html">Breaking the BIOS: Enable VT-x Virtualization Support on Acer Aspire One Netbook</a></li>
<li><a href="../152058/index.html">Dark prospects for the development of Russian Internet censorship</a></li>
<li><a href="../152059/index.html">Articles excluded from the Wikipedia section in Russian, may they appear to the world in Russian-language wikiprojects</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Emoji.prototype.length - a story about emotional characters in Unicode</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Habr is rather hostile to Emoji (they are simply not displayed here), considering them to be something of a “Padonkaff” language. Not for serious peop...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">🔎</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">📜</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">⬆️</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">⬇️</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Emoji.prototype.length - a story about emotional characters in Unicode</h1><div class="post__text post__text-html js-mediator-article">  <i>Habr is rather hostile to Emoji (they are simply not displayed here), considering them to be something of a “Padonkaff” language.</i>  <i>Not for serious people.</i>  <i>After all, both appeared about the same time.</i>  <i>And if the “Olbansky” yezyg quickly went into oblivion, then Emoji evolved from simple semicolons and parentheses to full-fledged characters in Unicode.</i>  <i>The author of this article proposes to look at the fact that these small entities are “under the hood” (hereinafter, the notes of the translator are in italics).</i> <br><br><img width="100%" src="https://habrastorage.org/getpro/habr/post_images/7fe/09c/543/7fe09c5431d1e7e1180c70691c0b1621.png" alt="EmojiFamilyHeader"><br>  <i><a href="https://www.contentful.com/blog/2016/12/06/unicode-javascript-and-the-emoji-family/" title="Original article">The original article was</a> written for <a href="https://www.contentful.com/" title="Contentful">Contentful</a> site <a href="https://www.contentful.com/" title="Contentful">by</a> <b>Stefan Judis</b> ( <a href="https://twitter.com/stefanjudis">Twitter</a> , <a href="https://github.com/stefanjudis">GitHub</a> ).</i> <br><br>  Emoji is the basis of the textual communication of our day.  Without these little symbols, many conversations in chat rooms today would be filled with awkward silence or misunderstanding.  I still remember the good old days when SMS was a cool thing. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The offer to chat in a chat without emoticons is likely to lead to the message "Are you kidding?".  Everyone quickly realized that humor and sarcasm (by the way, it would not hurt us to be less sarcastic) is not easy to convey, using only written signs.  At some point, the first Emoji came into being, and they quickly became one of the fundamental components of any conversation in text format. <br><br>  Even though I use Emoji every day, I never wondered how they work.  Obviously, they are somehow related to Unicode, but I had no idea what was going on under the hood.  And I, frankly, did not care. <br><br>  Everything changed when I came across a <a href="https://twitter.com/wesbos/status/769229581509332992" title="Twitter">Wes Bos tweet</a> in which he showed several JavaScript operations on a line containing the Emoji family. <br><br><div class="oembed"><script type="text/javascript" src="https://gist.github.com/bd78c6c90493fc894ad17af83a73bdb0.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-6a0c0e7fc2e433191d469ef5051df9f8.css"><div id="gist45052091" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-emoji-code-01-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-emoji-code-01-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-emoji-code-01-js-LC1" class="blob-code blob-code-inner js-file-line">[<span class="pl-k">...</span><span class="pl-s"><span class="pl-pds">'</span>👨‍👩‍👦<span class="pl-pds">'</span></span>]   <span class="pl-c"><span class="pl-c">//</span> ["👨", "", "👩", "", "👦"]</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-01-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-emoji-code-01-js-LC2" class="blob-code blob-code-inner js-file-line">‘👨‍👩‍👦’.<span class="pl-c1">length</span> <span class="pl-c"><span class="pl-c">//</span> 8</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">emoji-code-01.js</a>
        hosted with ❤ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><a name="habracut"></a><br>  Suppose that the use of a <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator" title="MDN">spread-operator</a> in such a line did not surprise me much, but the fact that one visible character was divided into three characters and two empty lines, somewhat puzzled me.  And the fact that the property of the <code>length</code> string returned the value of 8 surprised me even more, since there were 5 values ​​in the array that returned the spread-operator, but not 8 in any way. <br><br>  Without thinking twice, I opened the console, and made sure that everything happens exactly as Wes described.  So what happens here?  I decided to dig deeper into Unicode, JavaScript, and the Emoji family to figure it all out. <br><br><h2>  Unicode to the rescue </h2><br>  To understand why JavaScript processes Emoji in this way, we need to look deeper into Unicode itself. <br><br>  <a href="https://ru.wikipedia.org/wiki/%25D0%25AE%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25BE%25D0%25B4" title="Wiki">Unicode</a> is an international standard for character encoding in the IT industry.  It establishes a correspondence between each letter, character or symbol and a numerical value.  Thanks to Unicode, we can share documents that contain, for example, special German characters ( <a href="https://ru.wikipedia.org/wiki/%25D0%25A3%25D0%25BC%25D0%25BB%25D0%25B0%25D1%2583%25D1%2582" title="Umlaut">umlauts</a> ) ß, ä, ö, with people whose systems do not use them.  Thanks to Unicode, the encodings work on different platforms and environments. <br><br>  In Unicode, 1 114 112 different characters are defined, and they are usually represented using <code>U+</code> followed by a number in <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B5%25D1%2581%25D1%2582%25D0%25BD%25D0%25B0%25D0%25B4%25D1%2586%25D0%25B0%25D1%2582%25D0%25B5%25D1%2580%25D0%25B8%25D1%2587%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2581%25D0%25B8%25D1%2581%25D1%2582%25D0%25B5%25D0%25BC%25D0%25B0_%25D1%2581%25D1%2587%25D0%25B8%25D1%2581%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F">hexadecimal notation</a> .  The range of Unicode characters begins with <code>U+0000</code> and ends with <code>U+10FFFF</code> . <br><br>  The entire code space (more than one million characters) is divided into 17 tons.  “Planes”, and each plane includes over 65,000 characters.  The most important is the zero, “Basic Multilingual Plane” (“Basic Multilingual Plane”, BMP).  Its range is from <code>U+0000</code> to <code>U+FFFF</code> . <br><br>  The base plane contains symbols of almost all modern languages, plus a large number of other symbols.  The remaining 16 planes are called optional and are used for various purposes, such as - you yourself could guess - the definition of most of the characters of Emoji. <br><br><h2>  How are Emoji defined? </h2><br>  As we know, Emoji is defined by at least one character from the Unicode set.  If you look at all the Emoji presented in <a href="http://unicode.org/emoji/charts/full-emoji-list.html" title="Full Emoji Data">the Emoji Complete List</a> , you will notice that there are a lot of them.  And the word "many" I mean really a lot.  You may ask yourself how many different Emoji is defined in Unicode today?  The answer to this question, as it often happens in IT, is “It depends on ...”, and we have to deal with this before we get the answer. <br><br>  As I wrote above, Emoji is defined by <strong>at least</strong> one character.  This means that there are some Emoji that are defined by a combination of several other Emoji and characters.  These combinations are called sequences.  Thanks to the sequences, you can change the neutral Emoji (usually displayed with yellow skin) and make it more personal. <br><br><h3>  Sequence modifier for different skin colors </h3><br>  I still remember that moment when I noticed that I can change the thumb up icon in the chat so that it matches my skin color.  It gave me a sense of belonging, and I felt that this thumb was closer to me than all my previous posts. <br><br>  In Unicode, there are five modifiers for modifying a neutral Emoji and representing the whole variety of human skin colors.  Modifiers range from <code>U+1F3FB</code> to <code>U+1F3FF</code> and are based on <a href="https://en.wikipedia.org/wiki/Fitzpatrick_scale" title="Fitzpatrick scale">the Fitzpatrick scale</a> . <br><br>  With the help of these modifiers, we can turn a neutral Emoji into the same, but with a different skin color.  Let's look at an example: <br><br><div class="oembed"><script type="text/javascript" src="https://gist.github.com/c8d548e638cef7a948da0223dd07477f.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-6a0c0e7fc2e433191d469ef5051df9f8.css"><div id="gist45060120" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-emoji-code-02-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-emoji-code-02-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-emoji-code-02-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> U+1F467 + U+1F3FD</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-02-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-emoji-code-02-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> 👧 + 🏽</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-02-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-emoji-code-02-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">&gt;</span> 👧🏽</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">emoji-code-02.js</a>
        hosted with ❤ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br>  When we took Emoji's girl, the symbol of which is <code>U+1F467</code> and applied a skin color modifier ( <code>U+1F3FD</code> ) to it, we automatically got a girl with this skin color for those systems that support this sequence. <br><br><h3>  ZWJ sequences for even more variety. </h3><br>  Skin color is not the only thing that distinguishes people from each other.  When we recall the example of a family, it becomes clear that not every family consists of a man, a woman, and a boy. <br><br>  In Unicode, there is a symbol to describe an ordinary family ( <code>U+1F46A</code> - <img src="https://habrastorage.org/getpro/habr/post_images/ffd/e18/65c/ffde1865cd24669db79ed1f19c675167.png" alt="Emoji family">  ), but not every family looks like that.  We can create any family using the so-called Zero-Width-Joiner (ZWJ) sequence. <br><br>  This is how it works: there is a special character called a zero-width combiner ( <code>U+200D</code> ). This symbol works like glue, indicating that two characters should be displayed as one when possible. <br><br>  Logically, what could we put together to show the family?  The answer is simple - two adults and a child.  Using ZWJ sequences, we can easily map different families. <br><br><div class="oembed"><script type="text/javascript" src="https://gist.github.com/50239ffe91e45bd0b7f10182b5ba4668.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-6a0c0e7fc2e433191d469ef5051df9f8.css"><div id="gist45059992" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-emoji-code-03-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-emoji-code-03-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-emoji-code-03-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span>  </span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-emoji-code-03-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> U+1F46A</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-emoji-code-03-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">&gt;</span> 👪</td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-emoji-code-03-js-LC4" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-emoji-code-03-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> ZWJ-:  (, , )</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-emoji-code-03-js-LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> U+1F468 + U+200D + U+1F469 + U+200D + U+1F466</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-emoji-code-03-js-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> 👨‍ + U+200D + 👩‍ + U+200D + 👦</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-emoji-code-03-js-LC8" class="blob-code blob-code-inner js-file-line"><span class="pl-k">&gt;</span> ‍👨‍👩‍👦</td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-emoji-code-03-js-LC9" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-emoji-code-03-js-LC10" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> ZWJ-:  (, , )</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-emoji-code-03-js-LC11" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> U+1F469 + U+200D + U+1F469 + U+200D + U+1F467</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-emoji-code-03-js-LC12" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> 👩‍ + U+200D + 👩‍ U+200D + 👧</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-emoji-code-03-js-LC13" class="blob-code blob-code-inner js-file-line"><span class="pl-k">&gt;</span> ‍👩‍👩‍👧</td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-emoji-code-03-js-LC14" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-emoji-code-03-js-LC15" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> ZWJ-:  (, , , )</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-emoji-code-03-js-LC16" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> U+1F469 + U+200D + U+1F469 + U+200D + U+1F467 + U+200D + U+1F467</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-emoji-code-03-js-LC17" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> 👩‍ + U+200D + 👩‍ + U+200D + 👧‍ + U+200D + 👧</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-03-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-emoji-code-03-js-LC18" class="blob-code blob-code-inner js-file-line"><span class="pl-k">&gt;</span> ‍👩‍👩‍👧‍👧</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">emoji-code-03.js</a>
        hosted with ❤ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br>  If you look at the <a href="http://unicode.org/emoji/charts/emoji-zwj-sequences.html" title="Emoji xwj sequences">list of all possible sequences</a> , you can see that there are even more options, for example, one father with two girls.  Unfortunately, at the time of this writing, the support for these sequences is not very good, but the ZWJ sequences degrade gradually ( <a href="https://htmlacademy.ru/blog/6-graceful-degradation" title="Gradual degradation in the HTML Academy blog">Graceful degradation</a> ), returning the sequence of individual Emoji.  This allows you to maintain semantic. <br><br><div class="oembed"><script type="text/javascript" src="https://gist.github.com/9e40c8657b4245b758b490db6d8377f5.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-6a0c0e7fc2e433191d469ef5051df9f8.css"><div id="gist45060746" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-emoji-code-04-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-emoji-code-04-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-emoji-code-04-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> ZWJ-:  (, , )</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-04-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-emoji-code-04-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> U+1F468 + U+200D + U+1F467 + U+200D + U+1F467</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-04-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-emoji-code-04-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> 👨‍ + U+200D + 👧 + U+200D + 👧</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-04-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-emoji-code-04-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-k">&gt;</span>  ‍👨‍👧‍👧   <span class="pl-c"><span class="pl-c">//</span>     </span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">emoji-code-04.js</a>
        hosted with ❤ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br>  Another cool thing is that the principles of association apply not only to the family of Emoji.  For example, let's take the famous Emoji David Bowie (the real name is “singer”).  This is also a ZWJ sequence consisting of a male ( <code>U+1F468</code> ), a ZWJ combiner and a microphone ( <code>U+1F3A4</code> ). <br><img width="100%" src="https://habrastorage.org/getpro/habr/post_images/73c/32e/eca/73c32eecaec13edf0b55f707014b5074.png" alt="image"><br>  And, as you might have guessed, if we replace a man ( <code>U+1F468</code> ) with a woman ( <code>U+1F469</code> ), we get a singer (or the female version of David Bowie).  You can also add a skin color modifier, then we get a black singer.  Great! <br><br><div class="oembed"><script type="text/javascript" src="https://gist.github.com/e772def6c2221e99316f75ab126565b2.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-6a0c0e7fc2e433191d469ef5051df9f8.css"><div id="gist45060818" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-emoji-code-05-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-emoji-code-05-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-emoji-code-05-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> ZWJ-: -</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-05-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-emoji-code-05-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> U+1F469 + U+1F3FF + U+200D + U+1F3A4</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-05-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-emoji-code-05-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> 👩 + 🏿 + U+200D + 🎤</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-05-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-emoji-code-05-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-k">&gt;</span> 👩🏿🎤   <span class="pl-c"><span class="pl-c">//</span>         </span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">emoji-code-05.js</a>
        hosted with ❤ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br>  Unfortunately, at the time of writing, support for these new characters also leaves much to be desired. <br><br><h3>  Different amount of Emoji </h3><br>  So, the answer to the question of how much Emoji exists today depends on what you think of Emoji.  Is it the number of characters that were used to display Emoji?  Or will we consider all the variants of Emoji that can be displayed? <br><br>  If we count all the variants of Emoji that can be displayed (including sequences and variations), we get 2 198. If you are interested in the counting process, then here is <a href="http://www.unicode.org/reports/tr51/index.html" title="Emoji Properties and Data Files">a whole section</a> about it on <a href="http://unicode.org/" title="unicode.org">unicode.org</a> . <br><br>  Also to the question "How to count" you can add the fact that new Emoji and Unicode characters are added to the specification all the time, which makes tracking their exact number even more difficult. <br><br><h3>  Returning to strings in javascript and 16-bit encoding </h3><br>  In UTF-16, the string format used in JavaScript, one 16-bit code value (2 bytes) is used to represent most characters.  This means that just over 65,000 different code values ​​can fit into one JavaScript character.  This is exactly the same as the Base Multilingual Plane (BMP).  So let's try to match Unicode characters with a few characters defined in BMP. <br><br><div class="oembed"><script type="text/javascript" src="https://gist.github.com/8f2bbb5ae283545c0aa067ed84ac8d31.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-6a0c0e7fc2e433191d469ef5051df9f8.css"><div id="gist45060871" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-emoji-code-06-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-emoji-code-06-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-emoji-code-06-js-LC1" class="blob-code blob-code-inner js-file-line">‘ﾂ’.<span class="pl-c1">length</span>  <span class="pl-c"><span class="pl-c">//</span> 1 -&gt; U+FF82</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-06-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-emoji-code-06-js-LC2" class="blob-code blob-code-inner js-file-line">‘⛷’.<span class="pl-c1">length</span> <span class="pl-c"><span class="pl-c">//</span> 1 -&gt; U+26F7</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-06-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-emoji-code-06-js-LC3" class="blob-code blob-code-inner js-file-line">‘☃’.<span class="pl-c1">length</span> <span class="pl-c"><span class="pl-c">//</span> 1 -&gt; U+9731</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">emoji-code-06.js</a>
        hosted with ❤ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br>  When we apply the <code>length</code> property to these strings, we get one, and this fully meets our expectations.  But what happens if I want to use a symbol in javascript that is outside the bmp range? <br><br><h3>  Surrogate couples rush to the rescue </h3><br>  Two characters defined in the Base Plane can be combined to display another character that lies outside of it.  This combination is called a surrogate pair. <br><br>  The characters lying in the range from <code>U+D800</code> to <code>U+DBFF</code> are reserved for the so-called senior or "leading" surrogates, and the characters in the range from <code>U+DC00</code> to <code>U+DFFF</code> for the younger or "closing". <br><br>  These two symbols must always be used in pairs, starting with the eldest and ending with the minor surrogate.  Then a special formula is applied to decode characters that are out of range. <br><br>  Let's look at an example: <br><br><div class="oembed"><script type="text/javascript" src="https://gist.github.com/17a4ad333ddd455fbcec8742b22679e3.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-6a0c0e7fc2e433191d469ef5051df9f8.css"><div id="gist45060956" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-emoji-code-07-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-emoji-code-07-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-emoji-code-07-js-LC1" class="blob-code blob-code-inner js-file-line">‘👨’.<span class="pl-c1">length</span>          <span class="pl-c"><span class="pl-c">//</span> 2</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-07-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-emoji-code-07-js-LC2" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-emoji-code-07-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-emoji-code-07-js-LC3" class="blob-code blob-code-inner js-file-line">‘👨’.<span class="pl-c1">charCodeAt</span>(<span class="pl-c1">0</span>)   <span class="pl-c"><span class="pl-c">//</span> 55357  -&gt; U+D83D  -    </span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-07-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-emoji-code-07-js-LC4" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-emoji-code-07-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-emoji-code-07-js-LC5" class="blob-code blob-code-inner js-file-line">‘👨’.<span class="pl-c1">charCodeAt</span>(<span class="pl-c1">1</span>)   <span class="pl-c"><span class="pl-c">//</span> 56424  -&gt; U+DC68</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-07-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-emoji-code-07-js-LC6" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-emoji-code-07-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-emoji-code-07-js-LC7" class="blob-code blob-code-inner js-file-line">‘👨’.<span class="pl-en">codePointAt</span>(<span class="pl-c1">0</span>)  <span class="pl-c"><span class="pl-c">//</span> 128104 -&gt; U+1F468 -    </span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-07-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-emoji-code-07-js-LC8" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-emoji-code-07-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-emoji-code-07-js-LC9" class="blob-code blob-code-inner js-file-line">‘👨’.<span class="pl-en">codePointAt</span>(<span class="pl-c1">1</span>)  <span class="pl-c"><span class="pl-c">//</span> 56424  -&gt; U+DC68</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">emoji-code-07.js</a>
        hosted with ❤ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br>  An ordinary man in Emoji is represented by the symbol <code>U+1F468</code> .  This character cannot be represented by a single 16-bit JavaScript character.  Therefore, to display one character outside BMP ( <code>U+1F468</code> ), a surrogate pair consisting of two characters included in the BMP ( <code>U+D83D</code> and <code>U+DC68</code> ) should be used. <br><br>  There are two methods for analyzing characters in JavaScript.  We can use <code>charCodeAt</code> , which returns surrogate pseudo-character codes if they are used to compose a common character.  The second method is <code>codePointAt</code> , which will return the code of the combined pair of surrogate characters if we “hit” the “leading” surrogate symbol or return the code of the “closing” surrogate symbol if we “hit" it. <br><br>  Do you think this is terribly confusing?  I also think so, and I highly recommend that you carefully read the articles on MDN about these two methods ( <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt" title="MDN">charCodeAt</a> , <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/codePointAt" title="MDN">codePointAt</a> ) <i>(you can also read about this at <a href="https://learn.javascript.ru/es-string">learn.javascript.ru</a> ).</i> <br><br>  Let's take a closer look at the character of the man in Emoji and calculate.  Using charCodeAt, we can get the codes of "surrogate" pseudo-characters used in the surrogate pair. <br><br>  The first character is 55357, which corresponds to D83D in hexadecimal notation.  This is the “leading” pseudo-symbol.  The second value 56424 corresponds to DC68 and is a “trailing” pseudo-character.  This is a classic surrogate couple, which as a result of the calculation by the formula will give the result 128104, which corresponds to the character of a man in Emoji. <br><br><div class="oembed"><script type="text/javascript" src="https://gist.github.com/ebcd8526c3e7e91acd8b76ccd49e7b10.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-6a0c0e7fc2e433191d469ef5051df9f8.css"><div id="gist45061204" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-emoji-code-08-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-emoji-code-08-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-emoji-code-08-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span>   </span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-08-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-emoji-code-08-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">0x1F468</span> <span class="pl-k">=</span> (<span class="pl-c1">0xD83D</span> <span class="pl-k">-</span> <span class="pl-c1">0xD800</span>) <span class="pl-k">*</span> <span class="pl-c1">0x400</span> <span class="pl-k">+</span> <span class="pl-c1">0xDC68</span> <span class="pl-k">-</span> <span class="pl-c1">0xDC00</span> <span class="pl-k">+</span> <span class="pl-c1">0x10000</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-08-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-emoji-code-08-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span>   </span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-08-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-emoji-code-08-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">128104</span> <span class="pl-k">=</span> (<span class="pl-c1">55357</span> <span class="pl-k">-</span> <span class="pl-c1">55296</span>) <span class="pl-k">*</span> <span class="pl-c1">1024</span> <span class="pl-k">+</span> <span class="pl-c1">56424</span> <span class="pl-k">-</span> <span class="pl-c1">56320</span> <span class="pl-k">+</span> <span class="pl-c1">65536</span><span class="pl-k">&lt;</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">emoji-code-08.js</a>
        hosted with ❤ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br><h3>  The number of characters and the length property </h3><br>  Having dealt with Unicode codes and characters, we can proceed to the strange behavior of the <code>length</code> property.  It turns out that it returns the number of Unicode code values, and not the characters that we see, as we thought at the beginning.  This can lead to difficulties in catching bugs when working with Unicode in javascript strings - so be careful when you are dealing with characters outside of BMP. <br><br><h2>  Conclusion </h2><br>  Let's go back to the example of the Weight that started it all. <br><br><div class="oembed"><script type="text/javascript" src="https://gist.github.com/cc041d679e1035594df30cd6dfbbab2a.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-6a0c0e7fc2e433191d469ef5051df9f8.css"><div id="gist45061011" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-emoji-code-09-js" class="file">
    

  <div itemprop="text" class="blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tbody><tr>
        <td id="file-emoji-code-09-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-emoji-code-09-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> ZWJ-:  (, , )</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-09-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-emoji-code-09-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> U+1F468 + U+200D + U+1F469 + U+200D + U+1F466</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-09-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-emoji-code-09-js-LC3" class="blob-code blob-code-inner js-file-line">[<span class="pl-k">...</span><span class="pl-s"><span class="pl-pds">'</span>👨‍👩‍👦<span class="pl-pds">'</span></span>]   <span class="pl-c"><span class="pl-c">//</span> ["👨", "‍", "👩", "‍", "👦"]</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-09-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-emoji-code-09-js-LC4" class="blob-code blob-code-inner js-file-line">‘👨‍👩‍👦’.<span class="pl-c1">length</span> <span class="pl-c"><span class="pl-c">//</span> 8 </span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-09-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-emoji-code-09-js-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-emoji-code-09-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-emoji-code-09-js-LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span>  </span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-09-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-emoji-code-09-js-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-c"><span class="pl-c">//</span> U+1F46A</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-09-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-emoji-code-09-js-LC8" class="blob-code blob-code-inner js-file-line">[<span class="pl-k">...</span>’👪’]   <span class="pl-c"><span class="pl-c">//</span> [’👪’]</span></td>
      </tr>
      <tr>
        <td id="file-emoji-code-09-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-emoji-code-09-js-LC9" class="blob-code blob-code-inner js-file-line">’👪’.<span class="pl-c1">length</span> <span class="pl-c"><span class="pl-c">//</span> 2</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">emoji-code-09.js</a>
        hosted with ❤ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br>  The Emoji family we see here consists of a man, a woman, and a boy.  The spread operator will return individual Emoji characters.  Blank lines are not really empty - they are ZWJ combiners.  The <code>length</code> property, in this case, returns 2 for each character of Emoji and 1 for ZWJ combiners.  As a result, we get 8. <br><br>  I really enjoyed my immersion in Unicode.  If you are also interested in this topic, I would recommend a <a href="https://twitter.com/FakeUnicode" title="Twitter">@fakeunicode</a> Twitter account.  There are many interesting things about what Unicode is capable of.  By the way, did you know that there are even <a href="http://podcast.emojiwrap.com/">podcasts</a> and <a href="http://2016.emojicon.co/">conferences</a> about Emoji?  I will continue to follow all this, because I am very interested to learn more about these little symbols that we use everywhere.  Perhaps this topic interested you. </div><p>Source: <a href="https://habr.com/ru/post/322446/">https://habr.com/ru/post/322446/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../322434/index.html">IOS Localization Guide</a></li>
<li><a href="../322438/index.html">Neural networks in pictures: from one neuron to deep architectures</a></li>
<li><a href="../322440/index.html">Full automation of the “development” environment using docker-compose</a></li>
<li><a href="../322442/index.html">MIPSfpga and in-circuit debugging</a></li>
<li><a href="../322444/index.html">Tete-a-tete: ask the right questions</a></li>
<li><a href="../322448/index.html">About spaghetti, or how to explore the business processes of an organization</a></li>
<li><a href="../322450/index.html">Immunitable data in C ++. Part 2</a></li>
<li><a href="../322452/index.html">How to conduct A / B testing on Twitch</a></li>
<li><a href="../322454/index.html">Four non-secret advice Stirlitz</a></li>
<li><a href="../322458/index.html">After stealth: how to preserve the freshness of horror games</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
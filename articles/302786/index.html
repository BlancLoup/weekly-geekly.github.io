<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Screwing the Gantt chart</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When developing a workflow system, it became necessary to display data in the form of a Gantt chart . After a brief search, a suitable free component ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Screwing the Gantt chart</h1><div class="post__text post__text-html js-mediator-article">  When developing a workflow system, it became necessary to display data in the form of <a href="https://ru.wikipedia.org/wiki/%25D0%2594%25D0%25B8%25D0%25B0%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B0_%25D0%2593%25D0%25B0%25D0%25BD%25D1%2582%25D0%25B0">a Gantt chart</a> .  After a brief search, a suitable free component was found that needed to be screwed to the ‚Äúengine‚Äù <a href="http://easla.com/">easla.com</a> . <br><img src="https://habrastorage.org/files/749/a33/4cf/749a334cf43a4dd8892fd90838cb2b24.png"><br>  My experience of screwing JS-components to the engine on Yii with a description, code and examples under the cut. <br><a name="habracut"></a><br>  First of all, I would say that given the specifics of the workflow system being developed, the first thought was to develop the components from scratch on its own.  But, having reduced all requirements to a long list, having estimated the amount of work, the amount of code in PHP and in JavaScript, it has cooled down a bit.  And, like <a href="https://habrahabr.ru/company/devexpress/blog/103836/">many others</a> realized that it is wiser to search for ready-made components with the necessary functionality, even if they turn out to be paid. <br><br>  Component requirements were as follows: <br><ul><li>  Display Gantt charts in <a href="http://easla.com/">easla.com</a> style </li><li>  Feedback by changing the tasks with the mouse </li><li>  Many events </li><li>  Work speed </li></ul><br>  Given that the Gantt chart is a very popular method of displaying information, the component on the Internet turned out to be very much.  I looked through and selected them probably the whole day.  Of course, at first, I abandoned the simplest ones, which represent exclusively basic functionality, and gradually formed a short list of the most powerful and advanced components. <br>  I carefully studied only a couple of components, one of which was <a href="http://docs.dhtmlx.com/gantt/">DHTMLX Gantt</a> .  On it and stopped. <br><br><h4>  Task </h4><br>  The requirements for integration of the components were as follows: <br><ul><li>  Integration into easla.com as a component </li><li>  Displaying data page by page / full </li><li>  Filter and sort by <a href="http://easla.com/">easla.com</a> </li><li>  Displaying a chart heading as well as in other views (tables) </li><li>  Feedback when changing tasks in the chart. </li></ul><br>  The first point raised a number of questions.  The component is 100% client, i.e.  everything is written in javascript, but it is necessary that it be initialized with PHP and take many input parameters.  Fortunately, <a href="http://docs.dhtmlx.com/gantt/">DHTMLX Gantt is</a> written very well and with the help of input parameters it can be configured exactly as it should. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Page by page is the next headache.  At the developer‚Äôs forum there were questions about ‚Äúpage-by-page‚Äù, but in response only bewilderment like: ‚ÄúWhy is this necessary?  This also violates the ideology of the Gantt chart! ‚ÄùHowever, in my case, there is no‚Äú page-by-page ‚Äùin any way, therefore the implementation scheme was also found before implementation. <br><br>  Filtering and sorting is the same difficult question as paging.  Sorting in the component has its own, but it can only be used when displaying all the data in the table at once.  In other words, in paging, inline sorting will not work.  The filter works in a similar way.  I had to spend a couple of days studying the implementation of the render in the component in order to understand whether it would be possible to draw the cap in its own way.  Like that: <br><img src="https://habrastorage.org/files/e3d/352/d20/e3d352d20c6c41668053f129902ce5d8.png"><br><br>  Fortunately, I didn‚Äôt see any problems with the feedback.  The component is full of events, and there is also a dataProcessor, through which you can update data.  By the way, with the component they offer a whole crowd of classes for integration, but they were not useful to me. <br><br><h4>  PHP implementation </h4><br>  First of all, the question arose which class to inherit in order to create its own component.  I really wanted to inherit the <a href="http://www.yiiframework.com/doc/api/1.1/CGridView">CGridView</a> class, but after a couple of attempts it became clear that it is redundant.  At the same time, it became obvious that the inherited class should have a basic set of methods for render and pagination.  Ultimately, I stopped at <a href="http://www.yiiframework.com/doc/api/1.1/CBaseListView">CBaseListView</a> . <br>  The created class AlxdDhtmlxGantt really wanted to make it look like a CGridView, so as not to ‚Äúreinvent the wheel‚Äù and not create difficulties, so I started copying all the necessary properties directly from CGridView along with comments to the new class.  Currently, the following properties have been added to AlxdDhtmlxGantt from unique properties: <br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $onTaskSelected; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $onTaskOpened; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $onTaskClosed; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $onTaskDragStart; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $onTaskDrag; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $onBeforeTaskDrag; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $onBeforeTaskChanged; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $onAfterTaskDrag; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $itemsTag = <span class="hljs-string"><span class="hljs-string">'div'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $dataProcessorUrl; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $itemsStyle=<span class="hljs-string"><span class="hljs-string">'height:500px;'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $taskAttributes = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $scales; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $tree = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>;</code> </pre> <br>  As is obvious from the names, all <i>on *</i> are event handlers, used primarily for additional checkboxes. <br><br>  <i>taskAttributes</i> is one of the important properties that should contain a list of attributes of the displayed model that will be used by the diagram for the name, the start and end dates of the task.  The format is as follows: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $taskAttributes = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'text'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'description'</span></span>, <span class="hljs-string"><span class="hljs-string">'start_date'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'plan_start_date'</span></span>, <span class="hljs-string"><span class="hljs-string">'end_date'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'plan_end_date'</span></span> );</code> </pre><br>  Instead of <i>end_date,</i> you can specify <i>duration</i> .  The main thing that must be specified or attribute the end of the task, or its duration.  Read more in the <a href="http://docs.dhtmlx.com/gantt/desktop__loading.html">documentation</a> . <br><br>  <i>The scales</i> are another important property that should describe the timeline of the Gantt chart.  In my opinion, the developers of the components are a little wise with the settings of the timeline, highlighting the parameters of the main scale in <a href="http://docs.dhtmlx.com/gantt/api__gantt_scale_unit_config.html">scale_unit</a> and <a href="http://docs.dhtmlx.com/gantt/api__gantt_date_scale_config.html">date_scale</a> , and the parameters are add.  scales in <a href="http://docs.dhtmlx.com/gantt/api__gantt_subscales_config.html">subscales</a> .  But, I hope, they knew better there.  I combined the scale setting into one class property, which should take an array of all timelines.  One scale is necessary - it means there will be only one scale in the array.  Two are necessary - it means two, etc.  The format is as follows: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">Public</span></span> $scales = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'unit'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'year'</span></span>, <span class="hljs-string"><span class="hljs-string">'step'</span></span>=&gt;<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'date'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'%Y'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'unit'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'month'</span></span>, <span class="hljs-string"><span class="hljs-string">'step'</span></span>=&gt;<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'date'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'%F, %Y'</span></span>) );</code> </pre><br>  In my opinion it is easier. <br><br>  Similar to the CGridView in AlxdDhtmlxGantt, you need to initialize the columns.  Their initialization is one-to-one as in a CGridView.  Frankly, the method is simply copied and slightly corrected. <br><div class="spoiler">  <b class="spoiler_title">initColumns</b> <div class="spoiler_text"><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initColumns</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;columns===<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;dataProvider <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> CActiveDataProvider) <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;columns=<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;dataProvider-&gt;model-&gt;attributeNames(); <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;dataProvider <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> IDataProvider) { <span class="hljs-comment"><span class="hljs-comment">// use the keys of the first row of data as the default columns $data=$this-&gt;dataProvider-&gt;getData(); if(isset($data[0]) &amp;&amp; is_array($data[0])) $this-&gt;columns=array_keys($data[0]); } } $id=$this-&gt;getId(); foreach($this-&gt;columns as $i=&gt;$column) { if(is_string($column)) $column=$this-&gt;createDataColumn($column); else { if(!isset($column['class'])) { $column['class'] = 'CDataColumn'; } $column=Yii::createComponent($column, $this); } if(!$column-&gt;visible) { unset($this-&gt;columns[$i]); continue; } if($column-&gt;id===null) $column-&gt;id=$id.'_c'.$i; $this-&gt;columns[$i]=$column; } $tree_initiated = false; foreach($this-&gt;columns as $column) { $column-&gt;init(); if ($column instanceof CDataColumn &amp;&amp; $this-&gt;tree &amp;&amp; !$tree_initiated) { $this-&gt;tree_column_name = $column-&gt;name; $tree_initiated = true; } } }</span></span></code> </pre><br></div></div><br>  Having decided on the input parameters, it is time to resolve the issue of displaying data.  After weighing all the pros and cons, he came to the conclusion that it is more convenient to do the initial filling of the diagram with js and provide feedback via ajax.  Overlapped by the renderItems method.  He now almost nothing render'it: <br><div class="spoiler">  <b class="spoiler_title">renderItems</b> <div class="spoiler_text"><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">renderItems</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;dataProvider-&gt;getItemCount()&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> || <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;showTableOnEmpty) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> CHtml::openTag(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;itemsTag, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'class'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;itemsCssClass, <span class="hljs-string"><span class="hljs-string">'style'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;itemsStyle)); <span class="hljs-comment"><span class="hljs-comment">//render container only //content render in javascript echo CHtml::closeTag($this-&gt;itemsTag); } else $this-&gt;renderEmptyText(); }</span></span></code> </pre><br></div></div><br>  The array of values ‚Äã‚Äãfor the component is formed using the <i>getData</i> method, which <i>iterates</i> over the data (all or for the active page) and transmits them as an array. <br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $ret = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'data'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>()); $data = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;dataProvider-&gt;getData(); $n = count($data); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($n &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>($row=<span class="hljs-number"><span class="hljs-number">0</span></span>; $row &lt; $n; ++$row) $ret[<span class="hljs-string"><span class="hljs-string">'data'</span></span>][] = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getDataRow($row); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $ret; }</code> </pre><br>  The sad fact is that the <i>public</i> method <a href="http://www.yiiframework.com/doc/api/1.1/CGridColumn">renderDataCell draws the</a> value along with the <i>td</i> tag.  I had to use the <i>protected</i> method <a href="">renderDataCellContent</a> , calling it using <a href="http://php.net/manual/ru/class.reflectionmethod.php">ReflectionMethod</a> .  Like that: <br><pre> <code class="php hljs">$r = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReflectionMethod($column, <span class="hljs-string"><span class="hljs-string">'getDataCellContent'</span></span>); $r-&gt;setAccessible(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); $value = $r-&gt;invoke($column, $row, $data); $ret[$column-&gt;name] = $value;</code> </pre><br>  Full initialization of components for display is done in the <i>registerClientScript</i> method.  It also loads all the necessary scripts and display styles, including the localization script. <br><div class="spoiler">  <b class="spoiler_title">registerClientScript</b> <div class="spoiler_text"><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">registerClientScript</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $id = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getId(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;ajaxUpdate===<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) $ajaxUpdate=<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> $ajaxUpdate=array_unique(preg_split(<span class="hljs-string"><span class="hljs-string">'/\s*,\s*/'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;ajaxUpdate.<span class="hljs-string"><span class="hljs-string">','</span></span>.$id,<span class="hljs-number"><span class="hljs-number">-1</span></span>,PREG_SPLIT_NO_EMPTY)); $itemsSelector = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;itemsTag; $itemsCssClass = explode(<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;itemsCssClass,<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_array($itemsCssClass)) { $itemsSelector .= <span class="hljs-string"><span class="hljs-string">'.'</span></span>.$itemsCssClass[<span class="hljs-number"><span class="hljs-number">0</span></span>]; } $options=<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'ajaxUpdate'</span></span>=&gt;$ajaxUpdate, <span class="hljs-string"><span class="hljs-string">'ajaxVar'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;ajaxVar, <span class="hljs-string"><span class="hljs-string">'pagerClass'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;pagerCssClass, <span class="hljs-string"><span class="hljs-string">'loadingClass'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;loadingCssClass, <span class="hljs-string"><span class="hljs-string">'filterClass'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;filterCssClass, <span class="hljs-comment"><span class="hljs-comment">// 'tableClass'=&gt;$this-&gt;itemsCssClass, // 'selectableRows'=&gt;$this-&gt;selectableRows, 'enableHistory'=&gt;$this-&gt;enableHistory, 'updateSelector'=&gt;$this-&gt;updateSelector, 'filterSelector'=&gt;$this-&gt;filterSelector, 'itemsSelector'=&gt;$itemsSelector, ); if($this-&gt;ajaxUrl!==null) $options['url']=CHtml::normalizeUrl($this-&gt;ajaxUrl); if($this-&gt;ajaxType!==null) $options['ajaxType']=strtoupper($this-&gt;ajaxType); if($this-&gt;enablePagination) $options['pageVar']=$this-&gt;dataProvider-&gt;getPagination()-&gt;pageVar; foreach(array('beforeAjaxUpdate', 'afterAjaxUpdate', 'ajaxUpdateError', 'onTaskSelected', 'onTaskOpened', 'onTaskClosed', 'onTaskDragStart', 'onTaskDrag', 'onBeforeTaskDrag', 'onBeforeTaskChanged', 'onAfterTaskDrag', /*, 'selectionChanged'*/) as $event) { if($this-&gt;$event!==null) { if($this-&gt;$event instanceof CJavaScriptExpression) $options[$event]=$this-&gt;$event; else $options[$event]=new CJavaScriptExpression($this-&gt;$event); } } $options['config'] = array( //The default date format for JSON and XML data is "%d-%m-%Y" http://docs.dhtmlx.com/gantt/desktop__loading.html#loadingfromadatabase 'xml_date'=&gt;'%Y-%m-%d', 'columns'=&gt;array_map(function($column){ if ($column instanceof CCheckBoxColumn) { $ret = array('name'=&gt;$column-&gt;name); } elseif ($column instanceof AlxdStatusrefColumn) { $ret = array('name'=&gt;$column-&gt;name.($column-&gt;format ? '.'.$column-&gt;format : '')); } elseif ($column instanceof AlxdAttributerefColumn) { $ret = array('name'=&gt;$column-&gt;name.($column-&gt;attribute ? '.'.$column-&gt;attribute : '')); } else { $ret = array('name'=&gt;$column-&gt;name); } $r = new ReflectionMethod($column, 'renderHeaderCellContent'); $r-&gt;setAccessible(true); ob_start(); $r-&gt;invoke($column); $ret['label'] = ob_get_contents(); ob_end_clean(); if ($column instanceof CCheckBoxColumn) { $ret['width'] = 36; } else { $headerHtmlOptions = $column-&gt;headerHtmlOptions; if (isset($headerHtmlOptions['style'])) { $styles = explode(';', rtrim($headerHtmlOptions['style'], ';')); foreach ($styles as $style) { $pair = explode(':', $style, 2); if (count($pair) == 2 &amp;&amp; strtolower(trim($pair[0])) == 'width') { $l = strlen($pair[1]); if (strtolower(substr($pair[1], $l-2, 2)) == 'px') { $ret['width'] = substr($pair[1], 0, $l - 2); } } } } if ($this-&gt;tree &amp;&amp; $column-&gt;name == $this-&gt;tree_column_name) { $ret['tree'] = $this-&gt;tree; } } return $ret; }, $this-&gt;columns), 'filters'=&gt;array_map(function($column){ $r = new ReflectionMethod($column, 'renderFilterCellContent'); $r-&gt;setAccessible(true); ob_start(); $r-&gt;invoke($column); $filter = ob_get_contents(); ob_end_clean(); return array( 'name'=&gt;$column-&gt;name, 'control'=&gt;$filter ); }, $this-&gt;columns), 'data'=&gt;$this-&gt;getData(), ); $options['config']['scale_unit'] = $this-&gt;scales[0]['unit']; $options['config']['date_scale'] = $this-&gt;scales[0]['date']; if (count($this-&gt;scales) &gt; 1) { $options['config']['subscales'] = array_slice($this-&gt;scales, 1); } if ($this-&gt;filter !== null) { $options['config']['scale_height_auto'] = true; $options['config']['filter'] = true; } if (isset($this-&gt;dataProcessorUrl)) { $options['dataProcessorUrl'] = $this-&gt;dataProcessorUrl; } $options=CJavaScript::encode($options); $cs=Yii::app()-&gt;getClientScript(); if ($this-&gt;_assets == null) { $path = dirname(__FILE__) . DIRECTORY_SEPARATOR . 'assets'; $this-&gt;_assets = Yii::app()-&gt;assetManager-&gt;publish($path); } $cs-&gt;registerCoreScript('jquery'); $cs-&gt;registerCoreScript('bbq'); if($this-&gt;enableHistory) $cs-&gt;registerCoreScript('history'); $cs-&gt;registerCssFile($this-&gt;_assets . DIRECTORY_SEPARATOR . 'dhtmlxgantt.css'); $cs-&gt;registerScriptFile($this-&gt;_assets . DIRECTORY_SEPARATOR . 'dhtmlxgantt.js', CClientScript::POS_BEGIN); $cs-&gt;registerScriptFile($this-&gt;_assets . DIRECTORY_SEPARATOR . 'locale/locale_'.Yii::app()-&gt;language.'.js', CClientScript::POS_BEGIN); $cs-&gt;registerScriptFile($this-&gt;_assets . DIRECTORY_SEPARATOR . 'alxd.dhtmlxgantt.js', CClientScript::POS_BEGIN); $cs-&gt;registerScript(__CLASS__.'#'.$id,"jQuery('#$id').alxdDhtmlxGantt($options);", CClientScript::POS_READY); }</span></span></code> </pre><br></div></div><br><h4>  JavaScript implementation </h4><br>  My first attempts to write a component without creating a separate js module were not successful, and for the better.  Having suffered it became clear that you need to write a full-fledged js-module that will handle the DHTML Gantt initialization process, event binding and page switching and filter handling.  Moreover, as it turned out later, I had to block a couple of methods for correctly rendering the header and chart data.  It had to look something like this (montage on the picture to show both the filter and the context menu): <br><img src="https://habrastorage.org/files/e11/98c/0eb/e1198c0eb7874053b120b13fabd76e68.png"><br><br>  Having rummaged in the source code of the component, I found two methods: <i>_render_grid_header</i> and <i>_render_grid_item</i> .  I tried to surgically block them, but nothing happened, and eventually they completely blocked them by copying the source code and making the necessary edits. <br><div class="spoiler">  <b class="spoiler_title">_render_grid_header and _render_grid_item</b> <div class="spoiler_text"><pre> <code class="javascript hljs">gantt._render_grid_header = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> columns = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getGridColumns(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> filters = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.config.filters; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title_cells = []; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> filter_cells = []; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> width = <span class="hljs-number"><span class="hljs-number">0</span></span>, labels = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.locale.labels; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lineHeigth = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.config.scale_height - <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; columns.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> last = i == columns.length - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> col = columns[i]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> colWidth = col.width*<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (last &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._get_grid_width() &gt; width + colWidth) col.width = colWidth = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._get_grid_width() - width; width += colWidth; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sort = (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._sort &amp;&amp; col.name == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._sort.name) ? (<span class="hljs-string"><span class="hljs-string">"&lt;div class='gantt_sort gantt_"</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._sort.direction + <span class="hljs-string"><span class="hljs-string">"'&gt;&lt;/div&gt;"</span></span>) : <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cssClass = [<span class="hljs-string"><span class="hljs-string">"gantt_grid_head_cell"</span></span>, (<span class="hljs-string"><span class="hljs-string">"gantt_grid_head_"</span></span> + col.name), (last ? <span class="hljs-string"><span class="hljs-string">"gantt_last_cell"</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.templates.grid_header_class(col.name, col)].join(<span class="hljs-string"><span class="hljs-string">" "</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> style = <span class="hljs-string"><span class="hljs-string">"width:"</span></span> + (colWidth - (last ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>)) + <span class="hljs-string"><span class="hljs-string">"px;"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> label = (col.label || labels[<span class="hljs-string"><span class="hljs-string">"column_"</span></span> + col.name]); label = label || <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title_cell = <span class="hljs-string"><span class="hljs-string">"&lt;div class='"</span></span> + cssClass + <span class="hljs-string"><span class="hljs-string">"' style='"</span></span> + style + <span class="hljs-string"><span class="hljs-string">"' column_id='"</span></span> + col.name + <span class="hljs-string"><span class="hljs-string">"'&gt;"</span></span> + label + sort + <span class="hljs-string"><span class="hljs-string">"&lt;/div&gt;"</span></span>; title_cells.push(title_cell); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (filters.length &gt;= i) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> filter = filters[i]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> filter_cell = <span class="hljs-string"><span class="hljs-string">"&lt;div class='"</span></span> + cssClass + <span class="hljs-string"><span class="hljs-string">"' style='"</span></span> + style + <span class="hljs-string"><span class="hljs-string">"'&gt;"</span></span> + filter.control + <span class="hljs-string"><span class="hljs-string">"&lt;/div&gt;"</span></span>; filter_cells.push(filter_cell); } } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$grid_scale.innerHTML = <span class="hljs-string"><span class="hljs-string">"&lt;div class='gantt_grid_scale_row'&gt;"</span></span> + title_cells.join(<span class="hljs-string"><span class="hljs-string">""</span></span>) + <span class="hljs-string"><span class="hljs-string">"&lt;/div&gt;"</span></span> + (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.config.filter ? <span class="hljs-string"><span class="hljs-string">"&lt;div class='gantt_grid_scale_row'&gt;"</span></span> + filter_cells.join(<span class="hljs-string"><span class="hljs-string">""</span></span>) + <span class="hljs-string"><span class="hljs-string">"&lt;/div&gt;"</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$grid_scale.style.width = (width - <span class="hljs-number"><span class="hljs-number">1</span></span>) + <span class="hljs-string"><span class="hljs-string">"px"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.config.scale_height_auto == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> $grid_scale = $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$grid_scale); $grid_scale.removeAttr(<span class="hljs-string"><span class="hljs-string">"style"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.config.scale_height = $grid_scale.height(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$grid_scale.style.height = (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.config.scale_height - <span class="hljs-number"><span class="hljs-number">1</span></span>) + <span class="hljs-string"><span class="hljs-string">"px"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$grid_scale.style.lineHeight = <span class="hljs-string"><span class="hljs-string">"1.42857143"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$grid_scale.style.height = (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.config.scale_height - <span class="hljs-number"><span class="hljs-number">1</span></span>) + <span class="hljs-string"><span class="hljs-string">"px"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$grid_scale.style.lineHeight = lineHeigth + <span class="hljs-string"><span class="hljs-string">"px"</span></span>; } }; gantt._render_grid_item = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> btn_cell_width = <span class="hljs-number"><span class="hljs-number">20</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!gantt._is_grid_visible()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> columns = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getGridColumns(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cells = []; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> width = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; columns.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> last = i == columns.length - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> col = columns[i]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cell; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> actions = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (col.template) value = col.template(item); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> value = item[col.name]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value.actions) { actions = value.actions; value = value.content; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>) value = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.templates.date_grid(value, item); value = <span class="hljs-string"><span class="hljs-string">"&lt;div class='gantt_tree_content'&gt;"</span></span> + value + <span class="hljs-string"><span class="hljs-string">"&lt;/div&gt;"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> css = <span class="hljs-string"><span class="hljs-string">"gantt_cell"</span></span> + (last ? <span class="hljs-string"><span class="hljs-string">" gantt_last_cell"</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tree = <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (col.tree) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; item.$level; j++) tree += <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.templates.grid_indent(item); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> has_child = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._has_children(item.id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (has_child) { tree += <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.templates.grid_open(item); tree += <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.templates.grid_folder(item); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { tree += <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.templates.grid_blank(item); tree += <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.templates.grid_file(item); } } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> style = <span class="hljs-string"><span class="hljs-string">"width:"</span></span> + (col.width - (actions ? btn_cell_width : <span class="hljs-number"><span class="hljs-number">0</span></span>) - (last ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>)) + <span class="hljs-string"><span class="hljs-string">"px;"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.defined(col.align)) style += <span class="hljs-string"><span class="hljs-string">"text-align:"</span></span> + col.align + <span class="hljs-string"><span class="hljs-string">";"</span></span>; cell = <span class="hljs-string"><span class="hljs-string">"&lt;div class='"</span></span> + css + <span class="hljs-string"><span class="hljs-string">"' style='"</span></span> + style + <span class="hljs-string"><span class="hljs-string">"'&gt;"</span></span> + tree + value + <span class="hljs-string"><span class="hljs-string">"&lt;/div&gt;"</span></span>; cells.push(cell); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (actions) { cells.push(actions); } } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> css = item.$index % <span class="hljs-number"><span class="hljs-number">2</span></span> === <span class="hljs-number"><span class="hljs-number">0</span></span> ? <span class="hljs-string"><span class="hljs-string">""</span></span> : <span class="hljs-string"><span class="hljs-string">" odd"</span></span>; css += (item.$transparent) ? <span class="hljs-string"><span class="hljs-string">" gantt_transparent"</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span>; css += (item.$dataprocessor_class ? <span class="hljs-string"><span class="hljs-string">" "</span></span> + item.$dataprocessor_class : <span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.templates.grid_row_class) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> css_template = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.templates.grid_row_class.call(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, item.start_date, item.end_date, item); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (css_template) css += <span class="hljs-string"><span class="hljs-string">" "</span></span> + css_template; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getState().selected_task == item.id) { css += <span class="hljs-string"><span class="hljs-string">" gantt_selected"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> el = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">"div"</span></span>); el.className = <span class="hljs-string"><span class="hljs-string">"gantt_row"</span></span> + css; el.style.height = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.config.row_height + <span class="hljs-string"><span class="hljs-string">"px"</span></span>; el.style.lineHeight = (gantt.config.row_height) + <span class="hljs-string"><span class="hljs-string">"px"</span></span>; el.setAttribute(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.config.task_attribute, item.id); el.innerHTML = cells.join(<span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> el; };</code> </pre><br></div></div><br>  Actually, the <a href="">alxd.dhtmlxgantt.js</a> code <a href="">was</a> partially borrowed from <a href="">jquery.yiigridview.js</a> again, in order to maintain the continuity of the final class. <br><br><h4>  Styles </h4><br>  Of course, because of the cheeky overlap and changes to the DHTML Gantt render code, I had to adjust the styles a bit.  I did not attach them to my source code just because they are stored in a separate less-file in the <a href="http://easla.com/">easla.com</a> project.  The changes are as follows: <br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">btn</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">cell</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">width</span></span>: <span class="hljs-number"><span class="hljs-number">20px</span></span>; <span class="hljs-selector-class"><span class="hljs-selector-class">.gantt-loading</span></span> { .gantt_container { <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">'../images/loading.gif'</span></span>) no-repeat center center <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; &gt; .gantt_grid, &gt; .gantt_task { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0.5</span></span>; } } } <span class="hljs-selector-class"><span class="hljs-selector-class">.gantt_grid_scale</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.gantt_task_scale</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: inherit; <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: @primary-color; } <span class="hljs-selector-class"><span class="hljs-selector-class">.gantt_grid_head_cell</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">8px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">text-align</span></span>: inherit; <span class="hljs-attribute"><span class="hljs-attribute">overflow</span></span>: inherit; <span class="hljs-attribute"><span class="hljs-attribute">white-space</span></span>: normal; } <span class="hljs-selector-class"><span class="hljs-selector-class">.gantt_row</span></span> { .btn-group { <span class="hljs-attribute"><span class="hljs-attribute">vertical-align</span></span>: inherit; } <span class="hljs-selector-class"><span class="hljs-selector-class">.btn-cell</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: @btn-cell-width; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; .btn { <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: inherit; <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: inherit; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border-radius</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border</span></span>: none; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; span.caret { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: none; } } <span class="hljs-selector-tag"><span class="hljs-selector-tag">i</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">14px</span></span>; } } } <span class="hljs-selector-class"><span class="hljs-selector-class">.alxdgrid</span></span> { .gantt.table-footer { <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: -<span class="hljs-number"><span class="hljs-number">1px</span></span>; } }</code> </pre><br><br><h4>  Application </h4><br>  You can also use the resulting component as a <i>CGridView</i> , just need to specify the <i>taskAttributes</i> .  In my case, the code looks like this: <br><pre> <code class="php hljs">$cnt = $viewpub-&gt;provider-&gt;totalItemCount; $template = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); $template[] = <span class="hljs-string"><span class="hljs-string">'{items}'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($cnt &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($viewpub-&gt;getShowAll()) { $isShowAll = <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($_GET[<span class="hljs-string"><span class="hljs-string">'showall'</span></span>]) &amp;&amp; $_GET[<span class="hljs-string"><span class="hljs-string">'showall'</span></span>] == <span class="hljs-number"><span class="hljs-number">1</span></span>; $params = array_merge((<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>)<span class="hljs-string"><span class="hljs-string">''</span></span>, $_GET); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($isShowAll) { <span class="hljs-keyword"><span class="hljs-keyword">unset</span></span>($params[<span class="hljs-string"><span class="hljs-string">'showall'</span></span>]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $params[<span class="hljs-string"><span class="hljs-string">'showall'</span></span>] = <span class="hljs-number"><span class="hljs-number">1</span></span>; } $templateShowAll = CHtml::link( $isShowAll ? <span class="hljs-string"><span class="hljs-string">'&lt;i class="fa fa-files-o"&gt;&lt;/i&gt;'</span></span> : <span class="hljs-string"><span class="hljs-string">'&lt;i class="fa fa-file-o"&gt;&lt;/i&gt;'</span></span>, $params, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'id'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'Viewpub_page_to_all'</span></span>, <span class="hljs-string"><span class="hljs-string">'class'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'btn btn-primary btn-outline pull-right show-all'</span></span>, <span class="hljs-string"><span class="hljs-string">'title'</span></span>=&gt;$isShowAll ? Yii::t(<span class="hljs-string"><span class="hljs-string">'Viewpub'</span></span>,<span class="hljs-string"><span class="hljs-string">'Page-by-page'</span></span>) : Yii::t(<span class="hljs-string"><span class="hljs-string">'Viewpub'</span></span>,<span class="hljs-string"><span class="hljs-string">'All at once'</span></span>) ) ); $template[] = <span class="hljs-string"><span class="hljs-string">'&lt;div class="gantt table-footer clearfix"&gt;'</span></span> . $templateShowAll . <span class="hljs-string"><span class="hljs-string">'{pager}{summary}&lt;/div&gt;'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $template[] = <span class="hljs-string"><span class="hljs-string">'&lt;div class="gantt table-footer clearfix"&gt;{pager}{summary}&lt;/div&gt;'</span></span>; } } $options = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'viewpub_grid_'</span></span> . $suffix, <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; BsHtml::GRID_TYPE_STRIPED, <span class="hljs-string"><span class="hljs-string">'dataProcessorUrl'</span></span>=&gt;Yii::app()-&gt;createUrl(<span class="hljs-string"><span class="hljs-string">'viewpub/ganttDataProcessor'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'viewpub_id'</span></span>=&gt;$viewpub-&gt;id, <span class="hljs-string"><span class="hljs-string">'user_id'</span></span>=&gt;$user-&gt;id)), <span class="hljs-string"><span class="hljs-string">'dataProvider'</span></span> =&gt; $viewpub-&gt;provider, <span class="hljs-string"><span class="hljs-string">'filter'</span></span> =&gt; $viewpub-&gt;objectref, <span class="hljs-string"><span class="hljs-string">'columns'</span></span> =&gt; array_merge( $cntCommands ? <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>($checkBoxColumn) : <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(), $viewpub-&gt;columns ), <span class="hljs-string"><span class="hljs-string">'taskAttributes'</span></span>=&gt; $viewpub-&gt;getTaskAttributes(), <span class="hljs-string"><span class="hljs-string">'itemsCssClass'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'gantt-mono-primary'</span></span>, <span class="hljs-string"><span class="hljs-string">'summaryCssClass'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'hidden-xs table-summary'</span></span>, <span class="hljs-string"><span class="hljs-string">'pagerCssClass'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'table-pagination'</span></span>, <span class="hljs-string"><span class="hljs-string">'loadingCssClass'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'gantt-loading'</span></span>, <span class="hljs-string"><span class="hljs-string">'enableSorting'</span></span> =&gt; $viewpub-&gt;getSorting(), <span class="hljs-string"><span class="hljs-string">'tree'</span></span> =&gt; $viewpub-&gt;getTree(), <span class="hljs-string"><span class="hljs-string">'scales'</span></span> =&gt;$viewpub-&gt;getScales(), <span class="hljs-string"><span class="hljs-string">'template'</span></span> =&gt; implode(<span class="hljs-string"><span class="hljs-string">''</span></span>, $template), <span class="hljs-string"><span class="hljs-string">'pager'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'CLinkPager'</span></span>, <span class="hljs-string"><span class="hljs-string">'maxButtonCount'</span></span> =&gt; $isMobileClient ? <span class="hljs-number"><span class="hljs-number">3</span></span> : <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">'firstPageLabel'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' &lt;i class="fa fa-angle-double-left"&gt;&lt;/i&gt; '</span></span>, <span class="hljs-string"><span class="hljs-string">'header'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'hiddenPageCssClass'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'disabled'</span></span>, <span class="hljs-string"><span class="hljs-string">'lastPageLabel'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' &lt;i class="fa fa-angle-double-right"&gt;&lt;/i&gt; '</span></span>, <span class="hljs-string"><span class="hljs-string">'nextPageLabel'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' &lt;i class="fa fa-angle-right"&gt;&lt;/i&gt; '</span></span>,<span class="hljs-comment"><span class="hljs-comment">//'&gt;', 'selectedPageCssClass' =&gt; 'active', 'prevPageLabel' =&gt; ' &lt;i class="fa fa-angle-left"&gt;&lt;/i&gt; ',//'&lt;', 'htmlOptions' =&gt; array('class' =&gt; 'pagination') ), 'updateSelector' =&gt; ($viewpub-&gt;getShowAll() ? '{page}, {sort}, a.show-all' : '{page},{sort}'), 'ajaxUpdateError'=&gt;'function(request, textStatus, errorThrow, errorMessage){ EaslaAlert.add(request.status == 501 ? request.responseText : request.statusText+": "+extractExceptionText(request.responseText), {type: "danger"});}' ); if ($cntCommands) { $options['afterAjaxUpdate'] = 'function() { $(":checkbox").uniform();}'; $options['onTaskSelected'] = $options['onTaskOpened'] = $options['onTaskClosed'] = $options['onTaskDrag'] = 'function(id) { $(":checkbox").uniform();}'; } $renderViewpub = $this-&gt;widget('ext.AlxdDhtmlxGantt.AlxdDhtmlxGantt', $options, true);</span></span></code> </pre><br>  In <a href="http://easla.com/">easla.com</a> , the <i>$ viewpub</i> variable stores a class that generates all the necessary parameters to display the view.  But in general: <br>  <i>dataProvider</i> can be either a <a href="http://www.yiiframework.com/doc/api/1.1/CActiveDataProvider">CActiveDataProvider</a> or a <a href="http://www.yiiframework.com/doc/api/1.1/CArrayDataProvider">CArrayDataProvider</a> ; <br>  <i>columns have</i> the same <a href="http://www.yiiframework.com/doc/api/1.1/CGridView">columns</a> as in a regular CGridView. <br>  Showall is a parameter that is processed on the provider side and sets the <i>pagination = false</i> parameter, thus excluding pagination and requiring the display of all data. <br><br><h4>  Results </h4><br>  The component is currently used in <a href="http://easla.com/">easla.com</a> as one of the ways to display information for task management processes.  In more detail about task management was described in my <a href="https://habrahabr.ru/company/easla/blog/301944/">article</a> . <br>  All this pleasure looks like this: <br><img src="https://habrastorage.org/files/1c5/539/d69/1c5539d69da24cdc98d79ba1060cd74a.png"><br>  In fact, it turned out Microsoft Project, only, as <a href="https://habrahabr.ru/users/garbageintegrator/" class="user_link">GarbageIntegrator</a> aptly remarked, without imposed business processes, with an unlimited number of fields and statuses, and most importantly, without annoying bugs. <br><br>  The current version of AlxdDhtmlxGantt can be found on <a href="https://github.com/Alxdhere/AlxdDhtmlxGantt">github</a> .  I would be glad if it is useful to someone. </div><p>Source: <a href="https://habr.com/ru/post/302786/">https://habr.com/ru/post/302786/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302776/index.html">C / C ++ compiler based on LLVM for multicellular processors: to be or not to be?</a></li>
<li><a href="../302778/index.html">Simply the Best. Top Posts in Intel Blog History</a></li>
<li><a href="../302780/index.html">Installing, configuring, and running DevStack from 'A' to 'Z'</a></li>
<li><a href="../302782/index.html">The book "Career Programmer. 6th edition</a></li>
<li><a href="../302784/index.html">Freelancer and entrepreneur</a></li>
<li><a href="../302788/index.html">As a programmer, I bought a car</a></li>
<li><a href="../302792/index.html">Google fixed multiple vulnerabilities in Android</a></li>
<li><a href="../302794/index.html">Gloves for those who complicate things</a></li>
<li><a href="../302796/index.html">Unity3D Speed ‚Äã‚Äãup drawing 2D animations at times? Easy</a></li>
<li><a href="../302798/index.html">How to build a competent testing system? Insights from QA experts: video and presentations from the meeting in Wrike</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
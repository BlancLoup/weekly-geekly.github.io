<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Programming on PyQt4. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This series of articles is the work of one very creative and intelligent person with the nickname Liksys . Thanks to good people, he received an invit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Programming on PyQt4. Part 1</h1><div class="post__text post__text-html js-mediator-article">  This series of articles is the work of one very creative and intelligent person with the nickname <a href="http://habrahabr.ru/users/liksys/" class="user_link">Liksys</a> .  Thanks to good people, he received an invite and the continuation of this series of articles will certainly be!  ;) <br><br><img src="http://smages.com/i/9f/48/9f481549ceff580a494504b798a40dd3.gif" alt="image"><br><br><h4>  Part number 1 </h4><br>  When people talk about Qt, many of us immediately recall KDE with its abundance of settings.  Programmers follow the source code written in C ++ with a very elegant approach to solving the problem.  And this is quite justified: KDE is perhaps the most famous Qt project, and Qt itself is written in C ++ and is intended primarily for it.  For a long time, the existence of this toolkit has become a kind of standard in Linux for writing graphical applications along with GTK, wxWidgets, etc.  The power of C ++ has made it possible to create many great programs, and the Qt style is a role model for many programmers. <br><a name="habracut"></a><br>  But not everything is so simple.  The irony lies in the fact that the tricked out and functionality of C ++ for final programs is very often redundant.  For writing a small application, you have to perform a lot of actions, and the use of pointers and other ‚Äúfrills‚Äù C ++ in the code, along with Qt tools, does not look very good.  After all, the program is not always comparable in complexity to the same KDE, which uses all the features of Qt (by the way, there are few of them, and KDE‚Äôs have written many extensions).  Do not forget even the time that is spent on compiling the program - because of this, the productivity of work is greatly reduced. <br>  However, in the world of OpenSource there is always an alternative, and here it is also there.  This is Python.  Python, unlike C ++, is much simpler to learn, has an intuitive and logical syntax, and its dynamic typing, automatic memory management, and a rich set of built-in high-level types make it possible to write highly efficient and compact code.  The combination of Python and Qt4 allows you to quickly create convenient applications. <br>  with graphical interface. <br>  Another undoubted advantage of Python is its implementation.  You might think that Python is an interpretable language, but that‚Äôs not quite true.  When the program starts, the files ".pyc" are created <br>  the modules used are Python compiled bytecode.  Compiling into a buy-code occurs automatically (if possible) and takes very little time, unlike compiling into executable files with C ++ - you can replace a couple of lines and immediately start the program - no need to wait until the program has finished building, everything happens completely unnoticed.  It is very convenient <br>  for the programmer. <br>  And finally, the question of speed.  Python is quite fast, so the user doesn‚Äôt even notice the difference, and if you still want to speed up the program, you can use the Psyco module - it includes JIT compilation, and the performance of a program that performs many calculations immediately increases. <br>  If some of these terms are incomprehensible to you - do not be upset, as I read, I will explain everything to you.  So let's get started. <br>  We will use Qt4, because it will displace Qt3 soon, and it has many innovations compared to it, and writing programs is much more pleasant. <br>  Qt4 implementation for Python is called PyQt4 (logical, isn't it?) And is produced by Riverbank.  It is distributed in the same way as Qt4: under a proprietary license and under the GPL.  Download the latest version can usually be from the repository of your distribution, but if it was not there, then it can be done on the website <a href="http://www.riverbankcomputing.co.uk/">www.riverbankcomputing.co.uk</a> .  There are implementations of PyQt4 not only for Linux, but also for MacOSX, Windows.  I, for example, often <br>  I am writing Python programs for Windows (although I don‚Äôt like it, but nobody cares).  Programs written in Python and Qt4 are readable - they can be easily run on another platform. <br>  even without recompilation! <br>  PyQt4 is a ‚Äúwrapper‚Äù to the Qt4 library, made using the SIP toolkit for creating bindings to libraries.  Therefore, Qt4 itself is required for PyQt4 to work.  It can also be installed from the repository or from the Trolltech website: <a href="http://www.trolltech.com/">www.trolltech.com</a> . <br>  Installing PyQt4 should not be a problem, even if you are installing from source.  However, I would still recommend searching your repositories for your distribution. <br>  After installation, you can immediately start creating programs.  I think that I have already provoked you enough, so let's write a couple of simple programs - one in C ++, and the second in Python, using Qt4.  At the same time, we compare the ease of writing so that my statements do not look unfounded. <br>  Let's start with C ++.  We will work in the console, so you, as a real jigit, need to be able to curb it.  Typical actions are to create a project directory, create source files, <br>  Create a Qt project file, create a Makefile from it (a script file for GNU make) and start the build.  Then, if your prayers to heaven have been heard, you will receive a ready-made executable file named like the directory of your project.  The description looks scary (I'm not talking about how to do all this with the files created by autotools, but this is irrelevant).  So, open the console. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>	 [liksys @ max ~] $ mkdir helloqt
	 [liksys @ max ~] $ cd helloqt
	 [liksys @ max helloqt] $ cat&gt; main.cpp
	 #include &lt;QApplication&gt;
	 #include &lt;QLabel&gt;
	 int main (int argc, char ** argv)
	 {
		 QApplication app (argc, argv);
		 QLabel * label = new QLabel ("Hello, Qt4!");
		 label-&gt; show ();
		 return app.exec ();
	 }
	 &lt;Ctrl + D&gt;
	 [liksys @ max helloqt] $ qmake-qt4 -project
	 [liksys @ max helloqt] $ qmake-qt4
	 [liksys @ max helloqt] $ make
	 -There are the compiler messages, I hope everything went well,
	 [liksys @ max helloqt] $ ./helloqt
</pre><br>  Here is our first Qt4 application.  If you received messages in the spirit of: <br><br><pre>	 main.cpp: 1: 24: error: QApplication: There is no such file or directory
	 main.cpp: 2: 18: error: QLabel: There is no such file or directory
	 main.cpp: In function 'int main (int, char **)':
	 main.cpp: 5: error: no 'QApplication' declaration in this scope
	 ...
	
</pre><br><br>  then you used Qt3 utilities, not Qt4.  So clarify the paths to them and try again and use qmake-qt4 than just qmake (it most likely belongs to Qt3). <br>  The process is a bit scary, but now calm down and write the same thing in Python.  We need to know only one thing - the path to the Python interpreter, this can be done using the which command.  Going to <br>  home directory, do the following: <br><br><pre>	 [liksys @ max helloqt] $ which python
	 / usr / bin / python
	 [liksys @ max ~] $ mkdir hellopyqt
	 [liksys @ max ~] $ cd hellopyqt
	 [liksys @ max hellopyqt] $ cat&gt; hellopyqt
	 #! / usr / bin / python
	 from PyQt4 import Qt
	 import sys
	 if __name__ == "__main__":
		 app = Qt.QApplication (sys.argv)
		 label = Qt.QLabel ("Hello, PyQt4!")
		 label.show ()
		 app.exec_ ()
	 [liksys @ max hellopyqt] $ chmod + x hellopyqt
	 [liksys @ max hellopyqt] $ ./hellopyqt
</pre><br><br>  As you can see, in the case of Python, everything is much simpler.  Just find out the path to the interpreter, create a file with a Python program and make it executable.  Everything!  Now you can run the program like any other. <br>  Let's take a closer look at everything that we have done, and begin, perhaps, from the console. <br>  First we learned the path to the interpreter.  For what?  Well, if you are an ac console and are familiar with writing shell scripts, you will immediately understand what the matter is.  For those who do not know, I will explain.  The system does not know how <br>  run the file for execution.  In UNIX, there is no binding to the file extension; instead, ‚ÄúMagic Numbers‚Äù are used that uniquely identify the file type.  Linux executable binaries have at the very beginning a certain magic number, according to which the system finds out what kind of file it is.  Then how to deal with scripts (another term that would be nice to remember, is this any interpreted file, often for example you can hear shell scripts)?  For this was provided a special sequence of characters - "#!", Also called "shibeng".  After this sequence of characters indicate the path to the program that executes the script.  In this case, it is Python.  The program can also be launched and directly calling the interpreter (while your program is desirable, it should have the .py extension, at least for readability): <br><br><pre>	 [liksys @ max ~] $ python myprog.py
</pre><br><br>  Next, we created a directory for the program.  Generally speaking, for such a simple program like ‚ÄúHello‚Äù, it was not necessary to do this, but for large projects it is simply necessary.  Python looks for modules other than system (and user-defined) paths in the current directory, so it would be nice to limit it somehow. <br>  After creating the file, we made it executable and launched.  These are standard actions, and if you have previously written shell scripts, you will recognize this sequence of commands. <br>  Let's take a closer look at the program itself.  The difference with the analogue in C ++ is immediately visible - visually the program looks simpler and takes up a little less space. <br>  About the first line has already been said - we set the path to the interpreter.  The next two lines import the necessary modules - this is PyQt4 and sys.  The sys module is imported completely, but from PyQt4 only part is imported - Qt.  QtGui, QtCore, etc. modules are automatically imported into it.  Of course, you can import each part of PyQt4 separately, but you can do it easier, thus creating fewer problems for yourself (it‚Äôs not necessary to remember which module contains the required class).  By importing Qt, we also get rid of the compatibility problem - our own classes will not conflict with the library ones.  The fourth line of the program may not be entirely clear to those who have recently been in Python.  The Python module can be executed by itself (for example, when debugging), so we include the code by the condition: if the file is executed, then we do certain actions.  If this file is simply imported, then these actions will not be performed.  For this magic is responsible variable __name__, which contains the name of the function.  In our ‚ÄúHello‚Äù this was not necessary, but a good style requires the decoration of the main () function (as in many other languages, for example, in C ++). <br>  Then comes the code responsible for the interface.  First, an instance object QApplication is created that manages all the resources of the application.  Qt itself handles some command line options, so as a parameter, we pass to the sys.argv constructor - the list of options with which the program was launched. <br>  The next line creates a label widget ‚Äî an instance object of the QLabel class.  This is a text label containing an inscription.  A widget is another term that you will often encounter.  is he <br>  denotes any user interface element, such as a text label or button.  Some widgets can contain other widgets - for example, the QMainWindow, which contains the other controls, is often the main window.  But no one forces to use QMainWindow, which we did in the previous example - Qt allows you to use any widget as a window. <br>  If you know HTML (which is generally desirable when working with Qt), then you can have a little fun and replace the label text in the QLabel constructor with " <em>Hello, <font color="green">PyQt4</font> !</em> ".  Almost all Qt widgets that work with text in some way or other support simplest HTML formatting tools. <br>  The next short line - ‚Äúlabel.show ()‚Äù, makes our widget visible.  In Qt, all default widgets are created invisible to allow their settings - and then they are displayed on the screen.  This avoids flicker and other unpleasant effects.  In a large application, you only need to make one main widget visible, and all the widgets it contains will become visible automatically. <br>  And the last line is the transfer of control to the application6, namely the QApplication instance object.  At this point, the program enters the event loop, waiting for action from the user.  However, we see a slight difference - in C ++ the function was called exec (), and in Python it was called exec_ ().  Why is this so?  In Python, the exec keyword exists, so the PyQt4 developers have adopted a simple rule: if the name of the original Qt4 function matches the Python keyword, then the function name is followed by the symbol "_".  This rule applies to all PyQt4 functions. <br>  As you can see, the Python program is easier.  No header files for each class separately, no pointers, and other C ++ tricks.  Of course, you have to get a little used to the different wisdom of Python, but one thing is clear - for programs with a graphical interface, Python fits very well.  You can create programs faster and shorter using the full power of Qt4 for C ++ and the convenience of Python.  Not for nothing, this approach is popular with many developers, both OpenSource and commercial companies, the benefit of Python is distributed on a large number of licenses for every taste, to pay commercial companies that produce products with closed source texts, only for Qt4 and PyQt4.  But we are just learning, right?  Therefore, we can fully use these libraries under the terms of the GPL license, releasing all our creations in clear text.  And closed software is a business of commercial companies that can afford it. <br>  I hope I managed to interest you, because then it will be even more interesting!  We will learn how to create our own applications on PyQt4, our own widgets, I will tell you how to properly locate modules, use modern technologies such as internationalization.  We will talk about how to organize an application. <br>  in terms of ergonomics and design, because the interface is the most important part of the product, it is the user who sees it in front of him.  As we study, we will write a lot of simple applications that illustrate this or that concept, and in the end we will try to write something interesting using all the knowledge. <br><img src="http://smages.com/i/0b/33/0b333cb5d91e0d524240affd1ed1af53.jpg" alt="image"><br><h5>  Wait part number 2.  I hope you have learned a lot, thank you for your attention;) </h5><br><br></div><p>Source: <a href="https://habr.com/ru/post/44692/">https://habr.com/ru/post/44692/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../44691/index.html">calendar of conferences and exhibitions for November-December</a></li>
<li><a href="../446912/index.html">How much does web application security cost (for example Barracuda WAF-as-a-Service)</a></li>
<li><a href="../446914/index.html">Why do you need to learn Go</a></li>
<li><a href="../446916/index.html">Hierarchical address book release, updated Zimbra Docs and other new features in Zimbra 8.8.12</a></li>
<li><a href="../446918/index.html">These 6 lessons of working with cloudformation I learned for life</a></li>
<li><a href="../446920/index.html">Reverse Development of April Fools' Snake by Google</a></li>
<li><a href="../446922/index.html">Cat under the hood. Part 2</a></li>
<li><a href="../446924/index.html">Representation of arbitrary polynomials in the form of finite differences with an arbitrary step</a></li>
<li><a href="../446926/index.html">‚ÄúSo I realized that I am now a data engineer, and in a different way I can position myself on the market‚Äù</a></li>
<li><a href="../44693/index.html">Preparing a layout for the client. Part II: If ironing, how?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
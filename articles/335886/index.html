<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Built-in buttons in Telegram Bot API</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, dear readers, let's consider what the main types of built-in buttons telegram chat bots offer and what are their features. The article...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Built-in buttons in Telegram Bot API</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon, dear readers, let's consider what the main types of built-in buttons telegram chat bots offer and what are their features.  The article will be useful to anyone who wants to understand the possibilities of interaction with telegram users in version bot API 2.0. <br><a name="habracut"></a><br>  For an overview of the possibilities, we will need to install 3 point 2 Python ªa and a couple of spoons of <a href="https://github.com/eternnoir/pyTelegramBotAPI">pyTelegramBotAPI</a> .  We will not consider the features of setting up and registering a chat bot, since  There are many articles on this topic. <br><br>  And so, what is the built-in buttons (keyboard) in the Telegram messenger?  These are buttons that are displayed in the internal chat area and are tied to a specific message.  They are rigidly connected with the message (if you delete the message, the internal buttons are also deleted along with it.).  They make it possible to dynamically modify it. <br><br>  There are currently three types of built-in buttons: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <a href="https://core.telegram.org/bots/2-0-intro">URL buttons</a> </li><li>  <a href="https://core.telegram.org/bots/2-0-intro">Callback buttons</a> </li><li>  <a href="https://core.telegram.org/bots/2-0-intro">Switch buttons</a> </li></ul><br><h2>  URL buttons </h2><br><img src="https://habrastorage.org/web/632/7cb/2bb/6327cb2bbd5944c5817fb643bd40c92e.png"><br><br>  To create a button, use the <a href="https://core.telegram.org/bots/api">InlineKeyboardMarkup</a> type, let's create the ‚ÄúOur site‚Äù button: <br><br><pre><code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@bot.message_handler(commands = ['url']) def url(message): markup = types.InlineKeyboardMarkup() btn_my_site= types.InlineKeyboardButton(text=' ', url='https://habrahabr.ru') markup.add(btn_my_site) bot.send_message(message.chat.id, "       .", reply_markup = markup)</span></span></code> </pre> <br>  Here the name speaks for itself, this type of buttons is intended to redirect the user by reference, with a corresponding warning.  The button has a corresponding tab in the upper right corner to let the user know that this is a link. <br><br><h2>  Switch buttons </h2><br>  This type of buttons is designed to redirect the user to any chat, with the subsequent activation of the (built-in) inline-mode of communication with the bot.  This mode can be activated manually: in the chat, enter: "@ bot name", but the switch-buttons will automatically do this (helping newcomers to get acquainted with the inline mode). <br><br>  In order to create such a switch, you must specify the argument <i>switch_inline_query,</i> either empty or with some text. <br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@bot.message_handler(commands = ['switch']) def switch(message): markup = types.InlineKeyboardMarkup() switch_button = types.InlineKeyboardButton(text='Try', switch_inline_query="Telegram") markup.add(switch_button) bot.send_message(message.chat.id, " ", reply_markup = markup)</span></span></code> </pre><br>  Now, if we press a button and select a chat, this is what happens: <br>  <b>Step 1:</b> <br><img src="https://habrastorage.org/web/07d/7a8/ac7/07d7a8ac7488453394d5f197e6346ac0.png"><br>  <i>Push the button.</i> <br><br>  <b>Step 2</b> : <br><img src="https://habrastorage.org/web/8f4/561/2db/8f45612dbde9455ab756207783c761ba.png"><br>  <i>Choose a chat.</i> <br><br>  <b>Step 3:</b> <br><img src="https://habrastorage.org/web/5b7/6c0/85b/5b76c085b7754da4a71e2caf3b97c801.png"><br>  <i>The built-in inline mode has been activated.</i> <br><br><h2>  Callback buttons </h2><br>  Finally, the most interesting thing is the feedback buttons: they allow you to dynamically update the message / built-in buttons (without clogging the tape), as well as display a notification at the top of the chat bot or a modal window. <br><br>  For example, they can be used to view a long message, similarly to the pagination of pages on websites, or for example to make a calendar.  I will not reinvent the wheel, but through a search on GitHub, I will find the <a href="https://github.com/unmonoqueteclea/calendar-telegram">calendar-telegram</a> library.  Following these instructions, we get a ready-made calendar, which can be dynamically changed by clicking on the appropriate buttons: <br><img src="https://habrastorage.org/web/2f1/bcd/a1f/2f1bcda1fc174eeeb579f95497f90bee.png"><br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@bot.message_handler(commands=['calendar']) def get_calendar(message): now = datetime.datetime.now() #  chat_id = message.chat.id date = (now.year,now.month) current_shown_dates[chat_id] = date #     markup = create_calendar(now.year,now.month) bot.send_message(message.chat.id, ",  ", reply_markup=markup)</span></span></code> </pre> <br><br>  You can also add a notification by clicking on the date, for this it is enough to specify a message in the answer: <br><br><pre> <code class="python hljs">bot.answer_callback_query(call.id, text=<span class="hljs-string"><span class="hljs-string">" "</span></span>)</code> </pre> <br><img src="https://habrastorage.org/web/dbc/19a/929/dbc19a9294a74193a52bbc7ca6b77c97.png"><br>  <i>(Example in the desktop version)</i> <br><br><img src="https://habrastorage.org/web/901/7c9/903/9017c99031d244928503aea603362792.png"><br>  <i>(Example in the mobile version)</i> <br><br>  If we change <i>show_alert</i> to <i>True</i> , then we get a modal window: <br><pre> <code class="python hljs">bot.answer_callback_query(call.id, show_alert=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, text=<span class="hljs-string"><span class="hljs-string">" "</span></span>)</code> </pre> <br><img src="https://habrastorage.org/web/8d6/c5f/b13/8d6c5fb13efb4398b260cc3c6bccdd3a.png"><br><br><h2>  Conclusion </h2><br>  According to the latest data, more than 600k users are registered daily in the sensational Telegram messenger.  That is why it is important to pick up the trend and deal with its main features, because  Various methods of interacting with bots make life easier for developers and users. <br><br><img src="https://habrastorage.org/web/b23/455/1f0/b234551f06c54dea8081a7222c09a513.png"><br><br>  Thank you for your interest in this topic. </div><p>Source: <a href="https://habr.com/ru/post/335886/">https://habr.com/ru/post/335886/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../335876/index.html">Traveling over the hill and back: how not to get a job abroad</a></li>
<li><a href="../335878/index.html">Pragmatic functional programming</a></li>
<li><a href="../335880/index.html">Nodebackup - saving data from containers (docker) and the rest</a></li>
<li><a href="../335882/index.html">Counting the number of links to an entry in the table via Foreign Keys</a></li>
<li><a href="../335884/index.html">New application for solving the problem P vs. NP</a></li>
<li><a href="../335890/index.html">‚ÄúTo each according to a quantum‚Äù: Will quantum computing become a commercial product?</a></li>
<li><a href="../335892/index.html">Show your passport. Part 1</a></li>
<li><a href="../335896/index.html">Avito Office: work hard, play hard</a></li>
<li><a href="../335898/index.html">Linux History (1993‚Äì2003): Testing Distributions</a></li>
<li><a href="../335900/index.html">Mountebank: flexible mocking web API</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
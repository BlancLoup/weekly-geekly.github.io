<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How Wikipedia works (part 2)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 

 At the main work they gave me a couple of days off, and besides important personal matters I decided to devote them to continuing the ser...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How Wikipedia works (part 2)</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr! <br><img src="https://habrastorage.org/getpro/habr/post_images/052/4f3/807/0524f38073b3a7f85bdc3ff37342786f.jpg" alt="image" align="right"><br>  At the main work they gave me a couple of days off, and besides important personal matters I decided to devote them to continuing the series of posts about Wikipedia. <br><br>  The first part of the series was perceived positively, so I will try to make the second one even more interesting for the local audience: today it will be devoted to some technical aspects of the project. <br><a name="habracut"></a><br>  As you know, Wikipedia is a project of volunteers, and this principle is not completely canceled even in such a matter as technical support for its work.  In principle, any participant with a sufficiently small amount of effort can <a href="https://bugzilla.wikimedia.org/buglist.cgi%3Fbug_status%3DNEW%26bug_status%3DREOPENED%26columnlist%3Dproduct%252Ccomponent%252Cchangeddate%252Cbug_severity%252Cpriority%252Cshort_desc%26keywords%3Deasy%26keywords_type%3Dallwords%26list_id%3D329865%26order%3Dchangeddate%2520DESC%252Ccomponent%26product%3DMediaWiki">choose a simple bug</a> and send his patch, <a href="http://tools.wmflabs.org/gerrit-patch-uploader/">even without using</a> Gerrit. <br><br>  But a much more common form of participation is the development of additional tools, settings and robots for Wikipedia. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Bots </h4><br>  In order to perform some routine or voluminous tasks, participants often launch bots or ask other, more technically savvy participants to do so.  MediaWiki provides access to the <a href="http://ru.wikipedia.org/w/api.php">API</a> , and for accounts with the bot's flag, this access is even wider (for example, a bot can display not 5000 entries, but 5000 entries through the API).  In addition, the bot flag for the account allows you to hide edits from other users, which protects participants from thousands of minor edits that would clutter up the lists of fresh edits. <br><br><h5>  Pywikibot </h5><br>  The most popular of the existing frameworks is <a href="https://www.mediawiki.org/wiki/Pywikipediabot">pywikibot</a> , which already includes a large set of ready-made scripts - for example, deleting pages on the list, transferring articles from one category to another, and much more.  <a href="https://git.wikimedia.org/blob/pywikibot%252Fcore.git/HEAD/CREDITS">About 100 people</a> have already participated in the development of this framework, in terms of using this script is also extremely simple: even an ordinary Windows user can install Python, download the distribution kit, enter the login and password into the config and run one of the ready-made scripts. <br><br>  Previously, the popular assignment for pywikibot was the placement of links between articles in different language sections: for example, someone creates an article about <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25BB%25D0%25BB%25D0%25B8">Rally</a> in Russian Wikipedia, knows that there is a similar <a href="https://en.wikipedia.org/wiki/Rallying">Rallying</a> in English Wikipedia, and <a href="https://en.wikipedia.org/wiki/Rallying">links</a> to it.  Then comes the bot, which sees that in the English section there are links to 20+ different language sections, and in the Russian section there are no links to them: therefore, the bot adds a link to a new Russian article in each of the sections, and in the Russian article updates the full list similar interwiki links. <br><br>  As we can see, the work is really not the most interesting for a person, but very voluminous, and it was done by dozens of bots, which resulted in millions of edits.  For example, <a href="https://tools.wmflabs.org/quentinv57-tools/tools/sulinfo.php%3Fusername%3DRubinbot">my bot</a> now has about 990+ thousand edits, 80 percent of which are just like interwiki edits.  Not so long ago, the Wikipedia engine was reworked, and such edits in each of the sections are no longer needed, but the number of routine tasks is still not reduced. <br><br>  But let's go back to pywikibot - the framework has 2 branches: <br><ul><li>  Core - a new branch where the code was rewritten, it became more structured and efficient. </li><li>  Compat is an old direction, but there is a wider set of scripts in it, it works better in third-party projects of MediaWiki, and even more familiar with it. </li></ul><br>  The bugs and suggestions of new features are collected in the <a href="https://bugzilla.wikimedia.org/buglist.cgi%3Flist_id%3D330070%26product%3DPywikibot%26query_format%3Dspecific">bugtracker</a> that is common with MediaWiki, development is now going through <a href="https://www.mediawiki.org/wiki/Gerrit/Getting_started">Git / Gerrit</a> , which made it easier to attract new developers, add new patches and their reviews.  Previously, the development went through SVN, but in the end, to unify resources with MediaWiki and expand the circle of developers, it was decided to move to Git / Gerrit: there are even <a href="http://habrahabr.ru/post/68341/">a Habr√© topic</a> about the advantages of Git over SVN. <br><br>  I will not describe the <a href="">entire set of existing functions of the</a> framework, those who wish can walk around the repository and see: I can only say that it is actively being filled, and existing scripts require minimal setup for running in any language section. <br><br><h5>  AutoWikiBrowser </h5><br>  If the bot described above works in the console, then AWB (AutoWikiBrowser) is a friendlier tool for the simple user. <br> <a title="By John at en.wikipedia [GPL (http://www.gnu.org/licenses/gpl.html)], from Wikimedia Commons" href=""><img width="240" alt="Awbscreenshot" src="https://habrastorage.org/getpro/habr/post_images/2c0/c37/f38/2c0c37f3859d49f4ca8efeaa4e4e3b52.jpg" align="right"></a> <br>  AWB has a full-fledged interface, automatic update, and it works only on Windows (unofficially - and under Wine).  Typical AWB functions: replacing text with regular expressions, other edits to a specific list of articles.  AWB can recursively bypass <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B0%25D1%2582%25D0%25B5%25D0%25B3%25D0%25BE%25D1%2580%25D0%25B8%25D1%258F:%25D0%2592%25D1%2581%25D1%2591">Wikipedia categories</a> , compare lists, highlight unique elements or intersections, and even handle <a href="http://dumps.wikimedia.org/backup-index.html">Wikipedia dumps</a> .  At the same time, there are also restrictions for working with accounts that do not have the administrator or bot flag - lists for such participants are limited to 25,000 lines.  If you have a bot flag, then the restrictions are completely removed <a href="https://en.wikipedia.org/wiki/Wikipedia:AutoWikiBrowser/NoLimits_plugin">when loading a special plug-in</a> .  Important caveat:  potentially using AWB, you can quickly make a number of non-constructive edits, including vandal, then its use is technically limited to users <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B8%25D0%25BA%25D0%25B8%25D0%25BF%25D0%25B5%25D0%25B4%25D0%25B8%25D1%258F:AutoWikiBrowser/CheckPage">approved by administrators</a> : if the user name is not specified on this page, then AWB will refuse to work. <br><br>  In the general case, when saving each edit, you need to manually click on the ‚ÄúSave‚Äù button, autosave is possible only if AWB is running from an account with a bot flag.  Therefore, AWB is difficult to use for really large-scale tasks, but for small tasks it is very convenient, as it allows you to automate certain actions and quickly implement what you want without having to contact participants with more advanced bots (for example, see above).  Personally, I often use AWB to compile lists, and then quickly run pywikibot with the necessary task: pywikibot also has a special page generator that can do all this, but personally I can make it easier and clearer to do everything through a program with a <a href="https://ru.wikipedia.org/wiki/%25D0%2593%25D1%2580%25D0%25B0%25D1%2584%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D0%25B8%25D0%25BD%25D1%2582%25D0%25B5%25D1%2580%25D1%2584%25D0%25B5%25D0%25B9%25D1%2581_%25D0%25BF%25D0%25BE%25D0%25BB%25D1%258C%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BB%25D1%258F">GUI</a> . <br><br>  The AWB source code is <a href="https://en.wikipedia.org/wiki/Wikipedia:AutoWikiBrowser/Documentation">open</a> , the program is written in C # and is supported by a limited number of developers.  When you start the program itself checks for updates and installs them, the distribution is also laid out on <a href="http://sourceforge.net/projects/autowikibrowser/">SourceForge</a> .  In case of critical errors during the work, AWB makes a bug-report and helps <a href="https://en.wikipedia.org/wiki/Wikipedia_talk:AutoWikiBrowser/Bugs">to pass it on to the developers</a> . <br><br><h5>  Other </h5><br>  There are bots running on <a href="http://search.cpan.org/~bricas/WWW-Wikipedia-2.01/">Perl</a> , <a href="http://dotnetwikibot.sourceforge.net/">.NET</a> , <a href="http://jwbf.sourceforge.net/">JAVA</a> , but they are more often supported by individual enthusiasts, and are not widely distributed.  I personally once ran wiki scripts in PHP, but the massive pywikibot support, the active bugtracker and the responsiveness of a large number of developers completely inclined me to work with this bot, so I am not able to tell in detail about other frameworks :) <br><br><h4>  Toolserver </h4><br>  The section above was devoted to scripts and bots that are mostly launched from the participant‚Äôs computer or from its server.  But besides this, there is the possibility of running scripts from Wikimedia organizations: Earlier, Tulserver, which was supported by the German branch of Wikimedia, existed since June 30, 2014, because Labs was created, but in order. <br> <a href=""><img alt="Kennisnet Wikipedia serverroom.jpg" src="https://habrastorage.org/getpro/habr/post_images/95d/aaa/349/95daaa349750e9e64277ca25f687a14e.jpg" height="145" width="193" align="right"></a> <br>  The history of Tulserver began in 2005, when Sun Microsystems donated a V40z server (2 * Opteron 848, 2.2 GHz, 8 GB RAM, 6 * 146 GB disk, 12 * 400 GB external RAID) for use at Wikisource Conference in Frankfurt.  After the conference, one of the participants in the German section took him home and made a coffee table out of it;  after some time, it was decided to install it in Amsterdam on the basis of <a href="https://en.wikipedia.org/wiki/Kennisnet">Kennisnet</a> , where about fifty servers of the Wikimedia Foundation were installed. <br><br>  After that, Tulserver starts to run various scripts and tools (revision counters, various article analyzers, file upload tools, etc.), and Tulserver‚Äôs power began to increase: at the time of closing, <a href="https://wiki.toolserver.org/view/Servers">17 servers</a> were <a href="https://wiki.toolserver.org/view/Servers">running</a> , more than 3 million calls to Tulserver were registered day traffic reached 40 MB / s.  Each of the servers had from 24 to 64 GB of RAM, mostly they worked on Solaris 10 (and gradually switched to Linux), the total disk space was 8 TB. <br><br>  What were the main advantages of Tulserver as a platform? <br><ul><li>  Replication with Wikimedia Foundation servers ‚Äî more details below. </li><li>  Openness - in the presence of reasonable goals and skills, the account was <a href="https://wiki.toolserver.org/view/Account_approval_process">easy to get</a> . </li><li>  Sufficient closeness of its code: if the new Labs requires a code under an open license, and the files themselves are mostly open for viewing by all Labs participants (with the exception of passwords, logins, etc.), then Tulserver was much more democratic in this regard. </li></ul><br>  There were also disadvantages: <br><ul><li>  the system worked in the ‚Äúas is‚Äù mode, since  funding was limited, and the capabilities of the admins supporting the system were limited: many system errors were not corrected over the years; </li><li>  in the event of a developer‚Äôs inactivity, his code and work were lost, and Wikipedia was often deprived of tools that it had long been used to;  at Labs, due to the openness and availability of code, any project can be started by another developer; </li><li>  At some point, severe restrictions were imposed on the consumption of system resources, which led to the shutdown of some useful but costly tools. </li></ul><br>  But let's go back to the main advantage - replication: without it, Tulserver would be no different from regular hosting, where you can run your processes.  With the help of replication on Tulserver, there were always actual Wikipedia databases, so the tools could work directly with the database, rather than make huge API requests, sometimes processing irrelevant dumps, etc. <br><br>  An exemplary replication scheme is shown in the picture below: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d85/c4f/27d/d85c4f27df6746eacf436712d11732a8.png"></div><br><br>  Tampa on the scheme - this is the main database of the Foundation, located in the United States;  clusters s1-s4 are responsible for the database: for example, s1 is English Wikipedia, s2 is some large sections, etc.  The data from Tampa is replicated to the Tulserver DB in Amsterdam, and already there the Tulserver users and their tools access it.  Naturally, there was always some kind of replication lag, and due to the use of different clusters there could be a situation when the lag for processing the data of English Wikipedia was 1 minute, and for Russian Wikipedia it was 2-3 days.  For example, on June 21 (shortly before shutdown) the lag <a href="http://www.peeep.us/fcc0b4bc">was up to 28 seconds</a> . <br><br>  This availability of up-to-date data was the main advantage of Tulserver: it was possible to analyze almost online which files were not used, how many edits and actions any participant made in all Fund projects and a lot of other information that Wikipedia does not provide directly. <br><br><h4>  Conclusion </h4><br>  Tulserver‚Äôs support was heavy for the German branch, the system had some limitations, and from July 1, Tulserver was completely replaced by the new Labs project, which is fully supported by the Wikimedia Foundation itself.  This is a new big project, I will write about it in the next post, but I can publish the June Labs statistics for a seed :) <br><ul><li>  213 projects are working </li><li>  3 356 users are registered </li><li>  1 714 312 MB RAM is used </li><li>  occupied 19,045 GB of disk space </li></ul><br>  See you soon! </div><p>Source: <a href="https://habr.com/ru/post/230219/">https://habr.com/ru/post/230219/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../230199/index.html">Space junk can make space inaccessible to humans: infographics</a></li>
<li><a href="../230201/index.html">How to block IP addresses via ufw</a></li>
<li><a href="../230205/index.html">Installing an autorun with SAE J1939 interface on a car without CAN bus</a></li>
<li><a href="../230209/index.html">Hakatony- good! Yes, son, not bad!</a></li>
<li><a href="../230215/index.html">Master plan of the village based on Yandex api v2 or how to relate the coordinates of the picture and map</a></li>
<li><a href="../230221/index.html">Digest photo news # 7: the best materials of the beginning of July</a></li>
<li><a href="../230223/index.html">Miranda NG 0.95 has added support for full-fledged meta contacts in the kernel. What's next?</a></li>
<li><a href="../230227/index.html">Good and bad procrastination</a></li>
<li><a href="../230229/index.html">The task of the location of the figures in the game "Tetris"</a></li>
<li><a href="../230231/index.html">How we managed the training project</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Break the web c '#!' (hash-bang)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Below is a translation of an article that draws attention to, in my opinion, a rather acute problem in the era of web 2.0, namely, the purity of URLs....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Break the web c '#!' (hash-bang)</h1><div class="post__text post__text-html js-mediator-article">  <i>Below is a translation of an article that draws attention to, in my opinion, a rather acute problem in the era of web 2.0, namely, the purity of URLs.</i> <i><br><br></i>  <i>On the example of the site Lifehacker.com it is shown what problems can blindly follow state-of-the-art technologies, the pursuit of SEO and the negation of the principle of ‚Äúprogressive enhancement‚Äù (progressive enhancement) can turn into.</i> <br><br>  Last week, on Monday, Lifehacker.com was unavailable due to inactive JavaScript.  Lifehacker.com, along with the rest of the company Gawker, displayed an empty home page without content, advertising and everything else.  The transition from Google search results to subpages sent back to home. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Javascript-dependent URLs </h4><br>  Gawker, like Twitter before it, rebuilt its sites to be completely dependent on JavaScript, including the URLs of its pages.  JavaScript could not load, leading to missing content and broken URLs. <br><br>  The new page addresses now look like this: <code>http://lifehacker.com/#!5753509/hello-world-this-is-the-new-lifehacker</code> .  Until Monday, the address was the same, only without #! .. <br><br><a name="habracut"></a><h4>  Fragment IDs </h4><br>  # Is a special URL character that tells the browser that the next part of the address is a link to an HTML element with such an id or a named anchor of the current page.  In the case of lifehacker.com, the current page is the main page. <br><br>  It turns out that until Monday the site consisted of a million pages, and now it‚Äôs 1 page with a million fragment identifiers. <br><br>  What for?  I dont know.  Twitter answered this question when it switched to the same technology that Google would be able to index tweets like that.  This is true, but the same could be achieved with the previous correct address structure, with less cost. <br><br><h4>  Solution to the problem </h4>  Syntax addresses with #!  (hash-bang) first entered the arena of web development when Google announced a way for a web developer to make a website accessible for indexing by a robot. <br><br>  Prior to this, it was not well known about the correct solutions and sites with beautiful technologies like Ajax for content uploading observed a low level of indexation or ranking on the relevant keywords due to the fact that the bot could not detect the content hidden behind JavaScript calls. <br><br>  Google spent a lot of time to solve this problem, did not succeed in this and decided to <a href="http://googlewebmastercentral.blogspot.com/2009/10/proposal-for-making-ajax-crawlable.html">go from the other end</a> .  Instead of trying to find this mythical content, let the site owners themselves report about it.  For this <a href="http://code.google.com/web/ajaxcrawling/docs/specification.html">specification</a> was developed. <br><br>  We must pay tribute to the fact that Google carefully paid attention to the developers, that they should make sites with ‚Äúprogressive improvement‚Äù (progressive ethancement) and not rely on JavaScript as part of the content: <br><br><blockquote>  If you‚Äôre starting out of scratch, you can use your HTML  Then, you can spice up your design with the Ajax.  Googlebot will be your Ajax bonuses. </blockquote><br><br>  Those.  address syntax with #!  It was specifically designed for sites laying with the device on the fundamental principle of web development, and gave such a site a breath of life for their content to be discovered by the bot. <br><br>  And now, this lifeline seems to be accepted as the Only True Web Development Path by engineers on Facebook, Twitter and now Lifehacker.com <br><br><h4>  Net URLs </h4>  In the Google specification, #! - addresses are called as ‚ÄúprettyURLs‚Äù, and they are transformed by the bot into something more grotesque. <br><br>  Last Sunday, Lifehacker's address looked like this: <code>http://lifehacker.com/5753509/hello-world-this-is-the-new-lifehacker</code> . <br><br>  Good.  The 7-digit code in the middle is the only incomprehensible fragment, but it is required by CMS to unambiguously identify the article.  Therefore, it is practically a ‚Äúclean‚Äù address. <br><br>  Today, the same article is available at: <code>http://lifehacker.com/#!5753509/hello-world-this-is-the-new-lifehacker</code> Now the address is less ‚Äúclean‚Äù than the previous one, since the addition of #!  fundamentally changes the address structure: <ul><li>  The address / 5753509 / hello-world-this-is-the-new-lifehacker becomes easy / </li><li>  Added new fragment identifier! 5753509 / hello-world-this-is-the-new-lifehacker is added to the address. </li></ul>  Have we achieved anything?  Not.  But the mangling of the address does not end there. <br><br>  The Google specification says that the address will be converted into an address with parameters, i.e.  at: <code>http://lifehacker.com/?_escaped_fragment_=5753509/hello-world-this-is-the-new-lifehacker</code> . <br><br>  Thus, it is this address that returns the content, i.e.  This address is canonical, i.e.  what the bot will index. <br><br>  Looks like: <code>http://example.com/default.asp?page=about_us</code> <br><br>  Lifehacker.com with Gawker just scored on 10 years of experience at clean addresses and came back to the typical ASP site (How many more will go from Frontpage?). <br><br><h4>  What is the problem? </h4>  The main problem is that the Lifehacker.com addresses do not indicate content.  Each URL points to the main page.  If you are lucky and you are fine with JavaScript, the necessary content will be relied on the main page. <br><br>  More complicated than usual address, more error prone and more fragile approach. <br><br>  It turns out that by requesting an address bound to the content, the requester does not receive the content.  Those.  breakage laid in the design.  Lifehacker.com deliberately prevents bots from following links for interesting content.  Of course, if you do not jump over the hoop invented by Google. <br><br>  So why do you need this hoop? <br><br><h4>  Assignment #! </h4>  So why use #! - addresses if this synthetic address, which must also be converted to another, that will directly give the content? <br>  Of all the reasons, the strongest is ‚ÄúBecause it's so cool!‚Äù.  I said the strongest, not the strongest. <br><br>  Engineers will mumble something about state preservation in Ajax applications.  And frankly, this is an idiotic reason for breaking an address in this way.  The address in the href attribute can still be a well-formed link to the content.  Since you still use JavaScript, you can spoil it later, in your handler, clicking on the link, adding #! To the right place! .. So it turns out that there is state maintenance, and without unnecessary closing of the site from bots and in general not-Javascript ' ovogo. <br><br><h4>  Disable all bots (except Googlebot) </h4>  All non-browser agents (spiders, aggregators, indexing scanners) that fully support both HTTP / 1.1 and the URL specification (RFC-2396, for example) cannot walk on Lifehacker.com, of course, except for Googlebot. <br><br>  Therefore, the following consequences should be considered: <ol><li>  Caching no longer works, because intermediate servers have no canonical presentation of content and, accordingly, do not cache anything.  This leads to the fact that Lifehacker opens longer, Gawker bears more losses due to increased traffic. </li><li>  HTTP / 1.1 and RFC-2396 compatible crawlers see nothing but an empty home page.  Those.  Applications and services that are built on such kraulerah get the appropriate effect. </li><li>  The potential use of microformats is significantly reduced, i.e.  only browser and google aggregators will be able to see microformat data. </li><li>  Facebook Like widgets that use page identifiers will require additional actions for the page to be Like (by default, since the main page is the only one pointed to by direct URLs, and all the ‚Äúcurves‚Äù with #! Will be understood as a link to the main page again ). </li></ol><h4>  Dependence on perfect javascript </h4>  If the content can not be obtained by URL, it turns out that the site is broken.  Gawker deliberately took this step with breaking links.  They left the availability of their site at the mercy of all sorts of JavaScript errors. <ul><li>  The inability to download JS resulted in 5 hours of unavailability of all Gawker services last Monday (07/02/2011). </li><li>  Omitting a semicolon (;) at the end of an object or array declared as a literal will cause an error in Internet Explorer. </li><li>  Accidentally left console.log () again will cause the user to fall unarmed with developer toolbars. </li><li>  Ad inserts are constantly with errors.  Error in the ad unit - no site.  And experienced web developers know that the most dull code is just in ad banners. </li></ul>  Such fragility without a real cause and benefits that do not outweigh all the disadvantages.  There are much better methods than the one used by Lifehacker.  Even HTML5 and its History API would be the best solution. <br><br><h4>  Architecture nightmare </h4>  Gawker / Lifehacker violated the principle of "gradual improvement" and paid for it immediately by dropping their stack on the launch day.  Every mistake in JavaScript will lead to a fall and directly affect the income of Gawker and the trust of their audience. <br><br><h5>  additional literature </h5><ul><li>  http://www.tbray.org/ongoing/When/2014/2011/02/09/Hash-Blecch </li><li>  http://blog.benward.me/post/3231388630 </li></ul></div><p>Source: <a href="https://habr.com/ru/post/113842/">https://habr.com/ru/post/113842/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113833/index.html">GTD without tension (David Allen and his 52 principles)</a></li>
<li><a href="../113835/index.html">Japan is developing its own robot for the ISS</a></li>
<li><a href="../113836/index.html">"Attack on the bank client ...". View from the bank employee</a></li>
<li><a href="../113837/index.html">We solve JavaScript sudoku</a></li>
<li><a href="../113841/index.html">Intel @ MWC2011</a></li>
<li><a href="../113846/index.html">Digital pictures: buy or download?</a></li>
<li><a href="../113847/index.html">Do you know who is calling to your online store?</a></li>
<li><a href="../113849/index.html">Download TTF fonts in flash</a></li>
<li><a href="../113850/index.html">HTML5 Camp: the final version of the event program is published</a></li>
<li><a href="../113851/index.html">All HTC mobile abundance in 4x videos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
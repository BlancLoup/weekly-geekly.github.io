<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Load testing site using WCAT</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Having once again gone all the way from choosing a CMS to testing, I thought that this whole way is well described. Here, it is very difficult to find...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Load testing site using WCAT</h1><div class="post__text post__text-html js-mediator-article">  Having once again gone all the way from choosing a CMS to testing, I thought that this whole way is well described.  Here, it is very difficult to find intelligible information about testing, without an offer, to put all the money on it or not to do it at all.  I hope my article will encourage testing professionals to correct this situation and write about testing.  Especially about testing in a project whose budget is small. <br>  Those habrovchane who have long been engaged in the development of sites may (I hope) will find my article quite banal and for granted.  But users who take only the first steps will be able to learn for themselves a bit of useful. <br>  What we get by following the steps below can be found <a href="http://www.kurilo.su/wcat/report.html">here</a> . <a name="habracut"></a><br><br><h4>  A couple of words about CMS </h4><br>  The site should be supported by editors who have learned about the existence of computers quite recently and even the Word interface causes them a slight shock.  HTML, the basics of the site, the basics of programming and much more, which turns the work in the CMS from creativity and research into work on the site using the tool - this is not my case. <br>  At the same time the site is filled with forms, buttons, javascript'ami, moving elements and other-other. <br>  Therefore, the content management system should be as customizable as possible, but very convenient for the editor. <br>  I rummaged through a huge number of existing free and some paid CMSs and found nothing more appropriate in my case than Umbraco. <br>  The .NET platform on which Umbraco is written is more of a trick than a challenge for me. <br><br><h4>  Stress Testing </h4><br>  Errors on the site can be corrected, the content can be added, the design is completely changed.  But if the site does not withstand the anticipated load, then you will have to redo it completely.  Therefore, load testing is extremely important when developing a site.  I advise you to do it more than once and to do the first runs already at the stage of developing prototypes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Why WCAT </h5><br>  WCAT is a free utility from Microsoft for load testing a site. <br>  Actually, the key for me was free and Microsoft.  Microsoft - only for reasons that the site is on MS-solutions. <br>  Plus, the system (or utility) is very well described by Microsoft and is really convenient. <br><br><h5>  Test system configuration </h5><br>  At the prototype stage, testing can be performed directly on the development environment.  But the closer the launch, the more you want to drive the system under load on the target system.  What we have is the target system: A virtual server at the hoster with decent parameters.  All the machines with which we can create the load are located in the office.  In principle, too much load on the site is not expected, so you can use only one machine to create a load.  I emphasize - we are testing not a local, but a remote system. <br><br><h5>  How to test </h5><br>  WCAT makes it very easy and simple to create a load in the style: warm-up, load, waste.  But I really wanted to get the graphs of the system, depending on the load created. <br>  And the task of processing WCAT logs is solved by writing a small utility for processing logs. <br><br><h4>  Testing </h4><br><h5>  Training </h5><br>  Downloading: <br>  <a href="http://www.iis.net/community/default.aspx%3Ftabid%3D34%26i%3D1466%26g%3D6">WCAT</a> <br>  <a href="http://www.joeware.net/freetools/tools/cpau/index.htm">CPAU</a> is a utility of type runas, but with the ability to transfer a password on the command line. <br>  We create the settings.ubr and umbraco.ubr files (the names are not fundamental) in the image and subtlety of the nested WCAT \ samples folder. <br>  In the umbraco.ubr file there is an enumeration of requests that the test client should make.  Personally, I did just.  I restarted IIS, wandered around the site, imitating the user, then simply transferred the requests from the log to the file, adding the necessary environment.  WCAT is a very serious utility and allows you to configure all the necessary authentication and advanced parameters for the request.  How to do this is very detailed in the documentation.  But in my case, everything is simple and trite.  Requests without authentication and almost everywhere 200 OK in response. <br>  We are ready by writing a command like: <br>  wcctl.exe -t umbraco.ubr -f settings.ubr -v 10 -s <a href="http://www.example.com/">www.example.com</a> -p 80 -c 1 -o report.xml -r report.xsl -x <br>  and then the team <br>  wcclient.exe <br>  and start testing.  But I wanted to test the behavior of the system under different loads. <br>  In addition, we are waiting for a big ambush.  We will not be able to connect to the counters of the target system (via WMI) and will only be able to see the response time, without knowing what is going on inside. <br>  Therefore, further begins Voodooism. <br>  Create a pair of bat files. <br>  1) test.bat <br> <code><a href="http://www.example.com/"></a> @echo OFF <br> cd   <br> wcctl.exe -t umbraco.ubr -f settings.ubr -v %1 -s www.example.com -p 80 -c 1 -o report%1.xml -r report.xsl -x</code> <br>  2) rem_test.bat <br> <code>@echo OFF <br> net use \\IP-\ipc$ /user:  \administrator "" <br> for /L %%c in (1, 10, 301) DO ( <br> ping 127.0.0.1 -n 60 &gt; NUL <br> cpau -u   \administrator -p "" -ex "test.bat %%c" <br> ping 127.0.0.1 -n 60 &gt; NUL <br> wcclient.exe <br> ) <br> net use /DELETE \\IP-\ipc$</code> <br> <br>  The first file is clear and primitive. <br>  About the second more: <br>  We connect to the target machine with the rights of its user, but on our own we remain with the rights of the local user.  With runas, this launch takes place with the / netonly key. <br>  ping 'and needed for the delay - first we wait until the kernel starts, and then it will be unloaded. <br><br>  <i>Some lyrics: by the way, with the help of runas, you can make Windows Home work in a domain with domain user rights.</i>  <i>It is enough to pay off the explorer and run it with the runas command with the domain user and the / netonly key.</i> <br><br><h5>  Testing </h5><br>  So, run rem_test.bat and get a bunch of files like report11.xml.  They can be opened and viewed (do not forget to report report.xsl from the WCAT folder to report) <br>  But we need graphics.  In this pile of files we will understand a very long time. <br>  What to do? <br>  Everything is very simple. <br>  Download Microsoft Visual C # Express Edition and write a simple utility. <br>  Perhaps I will not include its code here.  Who wants - can download the project, as well as all the files described by me - <a href="">here</a> . <br><br><h4>  Conclusion </h4><br>  Thus, the cost of testing was 1 day for setting up, configuring and testing and not a penny more. <br>  I still hope to find developers and stop developing on my own, especially since this is not included in the list of my current interests.  If you know Umbraco well and want to apply knowledge to yours and not only good - write me in a personal or on dima (at) kurilo.su. <br><br>  PS While writing the post, I thought that I would receive comments like: ‚Äújudging by the schedule, you tested the bandwidth of your ISP channel in the office‚Äù or ‚Äúyou cannot test it this way, you need to make a stand for load tests‚Äù.  But I received a number of comments that there are simpler utilities, I learned the opinion of a professional tester (judging by the site) that it is better to pay money to the bourgeois office (I do not argue that it is better and, probably, I will use the advice later).  And a bunch of cons without explanation. <br>  Apparently, the topic of testing the site in non-industrial conditions is irrelevant.  Judging by the trend, everyone works with highly loaded systems, no-SQL databases and other functional languages.  I'll take note. </div><p>Source: <a href="https://habr.com/ru/post/105230/">https://habr.com/ru/post/105230/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../105224/index.html">What is considered someone else's post?</a></li>
<li><a href="../105225/index.html">You can now disable email conversations in Gmail.</a></li>
<li><a href="../105226/index.html">Acer Liquid E Communicator Review</a></li>
<li><a href="../105227/index.html">Non-standard way to record Skype conferences</a></li>
<li><a href="../105228/index.html">Nintendo 3DS News</a></li>
<li><a href="../105232/index.html">Calling native code from C #. Marshaling structures</a></li>
<li><a href="../105233/index.html">Mozilla will release hardware accelerated Firefox for Mac OS X</a></li>
<li><a href="../105234/index.html">Reputation technologies to combat the growing number of threats</a></li>
<li><a href="../105235/index.html">Cisco introduced a new solution for transport systems</a></li>
<li><a href="../105236/index.html">SQL Server 2008 Service Pack 2 Released and some more updates.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
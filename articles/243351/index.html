<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Code that does not exist</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, habravchane! 

 About a year ago, Habr was overwhelmed by a wave of posts on the topic "% string% in N lines on JavaScript" . I don‚Äôt even remembe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Code that does not exist</h1><div class="post__text post__text-html js-mediator-article">  Hi, habravchane! <br><br>  About a year ago, Habr was overwhelmed by a wave of posts on the topic <a href="https://www.google.com/search%3Fq%3Dhabrahabr%2Bjavascript%2B%25D1%2581%25D1%2582%25D1%2580%25D0%25BE%25D0%25BA%26oq%3Dhabrahabr%2Bjavascript%2B%25D1%2581%25D1%2582%25D1%2580%25D0%25BE%25D0%25BA%26aqs%3Dchrome..69i57j69i59j69i60j69i64.463j0j7%26sourceid%3Dchrome%26es_sm%3D93%26ie%3DUTF-8">"% string% in N lines on JavaScript"</a> .  I don‚Äôt even remember how it all ended, but it all started with <a href="http://habrahabr.ru/post/202304/">‚ÄúExcel in 30 lines‚Äù</a> .  A lot of other interesting variations appeared on this topic, even a <a href="http://habrahabr.ru/post/203048/">game of zero lines on JS</a> , but this is a completely different story ... <br><br>  No matter how hard I tried to think of something more compact, nothing came of it.  Then it was decided to look at the problem from a different angle.  At about this moment, the question flashed in my head: is it possible to ‚Äúcollapse‚Äù the code so that it does not exist <i>at all</i> ?  <s>And then David Blaine called me.</s> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I tried to add some magic and that's what I did. <br><br><img src="https://habrastorage.org/files/93e/471/415/93e471415bf243a1b8163255f2992b0e.jpg" alt="image"><br><a name="habracut"></a><br><h2>  The "Dispeller" code </h2><br>  The task is to write code, which ... no matter how.  He must also be able to do something.  Obviously, any manipulations need to be accompanied by some kind of function that could interpret these manipulations, and therefore hide the code <i>altogether</i> , alas, will not work, but it is easy to shorten the latter to a <i>couple of lines</i> . <br><br>  Many people know or have heard that non-printing characters exist in computer typography, i.e.  virtually invisible.  And this is not some kind of bug or chip, but a completely normal behavior - to be invisible.  Currently, one of the generally accepted and standardized text encodings is <b>UTF-8</b> , it is used on almost any modern website.  It is also valuable that there is a whole <a href="http://www.fileformat.info/info/charset/UTF-8/list.htm">bunch of invisible characters</a> !  For example, one of them is <b>Zero Width Space (U + 200B)</b> .  Here it is: "".  Do you see?  Not?  And he is. <br><br><h2>  David Blaine Method </h2><br>  For those who want to touch it, I quote a link to an example of a year ago: a <a href="http://jsfiddle.net/nikitaka/L5AFB/">working demo to watch for free online</a> .  Already then, several months later after a note in Habr's sandbox, I accidentally came across a <a href="http://habrahabr.ru/post/112530/">post</a> where this idea was viewed (method number three), but without a raisin. <br><br>  In my version, the encoding was done in the most primitive way.  Minus - the file size increases greatly, plus - you need only two characters for encoding.  It looked like this: <br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> code = <span class="hljs-string"><span class="hljs-string">'1101101111110111111111111111110101101101111101111'</span></span>;</code> </pre> <br>  After quite a long time, I returned to this topic within the framework of one project I was engaged in.  An attempt was made to go further and began by saying that now each character is encoded not by ones and zeros, but by four characters: <br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"f"</span></span>.charCodeAt(<span class="hljs-number"><span class="hljs-number">0</span></span>).toString(<span class="hljs-number"><span class="hljs-number">16</span></span>); <span class="hljs-comment"><span class="hljs-comment">// "66" //    "f" - 0x0066 String.fromCharCode("0x0066"); // "f"</span></span></code> </pre><br>  As a result, having a set of 16 characters, you can reduce the excess code excess: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Symbols = [<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//    "f": var bar = invisibleJS("f"); // bar = "";</span></span></code> </pre><br>  The increase in the volume occupied by the code in this example has decreased to <b>4x</b> (4 characters to encode one), but in theory, if you don‚Äôt need Russian and / or some other non-Latin characters, you can achieve <b>2x</b> . <br><br><h2>  Examples in the studio </h2><br>  Let it be this code: <br><pre> <code class="javascript hljs">alert(<span class="hljs-string"><span class="hljs-string">"Hello world!"</span></span>);</code> </pre><br>  After feeding the code to the obfuscator (I will not bring and analyze the code, there is nothing interesting in it), the output is something like: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> helloworld = <span class="hljs-string"><span class="hljs-string">"‚Å°‚Å°‚Ä´‚Äå‚Å°‚Å°‚Ä´‚Å¨‚Å°‚Å°‚Ä´‚Ä™‚Å°‚Å°‚Ä¨‚Äç‚Å°‚Å°‚Ä¨‚Äè‚Å°‚Å°‚Äç‚Ä≠‚Å°‚Å°‚Äç‚Äç‚Å°‚Å°‚Äè‚Ä≠‚Å°‚Å°‚Ä´‚Ä™‚Å°‚Å°‚Ä´‚Å¨‚Å°‚Å°‚Ä´‚Å¨‚Å°‚Å°‚Ä´‚ÅØ‚Å°‚Å°‚Äç‚Å°‚Å°‚Å°‚Ä¨‚Ä¨‚Å°‚Å°‚Ä´‚ÅØ‚Å°‚Å°‚Ä¨‚Äç‚Å°‚Å°‚Ä´‚Å¨‚Å°‚Å°‚Ä´‚Äè‚Å°‚Å°‚Äç‚Äå‚Å°‚Å°‚Äç‚Äç‚Å°‚Å°‚Äç‚ÄÆ"</span></span>;</code> </pre><br>  Note that the semicolon is inside the quotation marks, although in reality this is not the case (you can check it in almost any text editor, for example, <i>Sublime</i> ).  On the one hand, it adds +5 to obfuscation, is misleading and threatens with a light <i>brain-fuck</i> , and on the other hand, the ‚Äúright‚Äù editor will not use characters that affect the direction of the text (from left to right, right to left). <br><br>  This is what the decoding function looks like: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> revealJS = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">s</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s.match(<span class="hljs-regexp"><span class="hljs-regexp">/(.{4})/g</span></span>).map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">b</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b.split(<span class="hljs-string"><span class="hljs-string">''</span></span>).map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.apply(<span class="hljs-literal"><span class="hljs-literal">null</span></span>,{<span class="hljs-attr"><span class="hljs-attr">length</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>}).map(<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>.call,<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>).concat(<span class="hljs-string"><span class="hljs-string">'abcdef'</span></span>.split(<span class="hljs-string"><span class="hljs-string">''</span></span>))[<span class="hljs-string"><span class="hljs-string">'‚Å°‚Äå‚Äç‚Äé‚Äè‚Ä™‚Ä´‚Ä¨‚Ä≠‚ÄÆ‚Å™‚Å´‚Å¨‚Å≠‚ÅÆ‚ÅØ'</span></span>.split(<span class="hljs-string"><span class="hljs-string">''</span></span>).indexOf(i)]})}).map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.fromCharCode(<span class="hljs-number"><span class="hljs-number">0</span></span>+<span class="hljs-string"><span class="hljs-string">"x"</span></span>+c.join(<span class="hljs-string"><span class="hljs-string">''</span></span>))}).join(<span class="hljs-string"><span class="hljs-string">''</span></span>)}</code> </pre><br>  I am more than sure that the code could be better, smaller and more elegant, but such a task is not worthwhile in this post.  I note that at the end of the line, the code again goes from right to left.  In general, this nuance can be eliminated if you pick up a few other invisible characters. <br><br>  Now you can "show" invisible code: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> helloworld = <span class="hljs-string"><span class="hljs-string">"‚Å°‚Å°‚Ä´‚Äå‚Å°‚Å°‚Ä´‚Å¨‚Å°‚Å°‚Ä´‚Ä™‚Å°‚Å°‚Ä¨‚Äç‚Å°‚Å°‚Ä¨‚Äè‚Å°‚Å°‚Äç‚Ä≠‚Å°‚Å°‚Äç‚Äç‚Å°‚Å°‚Äè‚Ä≠‚Å°‚Å°‚Ä´‚Ä™‚Å°‚Å°‚Ä´‚Å¨‚Å°‚Å°‚Ä´‚Å¨‚Å°‚Å°‚Ä´‚ÅØ‚Å°‚Å°‚Äç‚Å°‚Å°‚Å°‚Ä¨‚Ä¨‚Å°‚Å°‚Ä´‚ÅØ‚Å°‚Å°‚Ä¨‚Äç‚Å°‚Å°‚Ä´‚Å¨‚Å°‚Å°‚Ä´‚Äè‚Å°‚Å°‚Äç‚Äå‚Å°‚Å°‚Äç‚Äç‚Å°‚Å°‚Äç‚ÄÆ"</span></span>; revealJS(helloworld); <span class="hljs-comment"><span class="hljs-comment">// "alert("Hello world!")" eval(revealJS(helloworld)); // !</span></span></code> </pre><br>  You can copy from here to the console or <a href="http://jsfiddle.net/nikitaka/mxfv0n91/">look here</a> . <br><br>  ( <i>The example ‚Äúmanifesto‚Äù code cited as an example is sharpened specifically for certain symbols used in the ‚Äúdisappear‚Äù function. Swapping these symbols and / or using others, the number of variants of the ‚Äúcode table‚Äù soars far to infinity.</i> ) <br><br>  All this has one big drawback: you can peep the code executed with the help of <code>eval()</code> .  Moreover, the console will even indicate the file / line from where this code is running: <br><img src="https://habrastorage.org/files/52e/559/744/52e5597446f6402b9dc7e2fee57938fa.bmp"><br><br>  You can correct this misunderstanding.  If you use all four characters for encoding (as I said above), then there is the possibility of obfuscation inside obfuscation.  <s><i>Xzibit</i> is delighted</s> : <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  ... alert("Hello world!"); // ... window["alert"]("Hello world!"); // ... window[revealJS("‚Å°‚Å°‚Ä´‚Äå‚Å°‚Å°‚Ä´‚Å¨‚Å°‚Å°‚Ä´‚Ä™‚Å°‚Å°‚Ä¨‚Äç‚Å°‚Å°‚Ä¨‚Äè")](revealJS("‚Å°‚Å°‚Äè‚Ä≠‚Å°‚Å°‚Ä´‚Ä™‚Å°‚Å°‚Ä´‚Å¨‚Å°‚Å°‚Ä´‚Å¨‚Å°‚Å°‚Ä´‚ÅØ‚Å°‚Å°‚Äç‚Å°‚Å°‚Å°‚Ä¨‚Ä¨‚Å°‚Å°‚Ä´‚ÅØ‚Å°‚Å°‚Ä¨‚Äç‚Å°‚Å°‚Ä´‚Å¨‚Å°‚Å°‚Ä´‚Äè‚Å°‚Å°‚Äç‚Äå")) // ...   : "‚Å°‚Å°‚Ä¨‚Ä¨‚Å°‚Å°‚Ä´‚ÄÆ‚Å°‚Å°‚Ä´‚ÅÆ‚Å°‚Å°‚Ä´‚Äè‚Å°‚Å°‚Ä´‚ÅØ‚Å°‚Å°‚Ä¨‚Ä¨‚Å°‚Å°‚Ä™‚Å´‚Å°‚Å°‚Ä´‚Äå‚Å°‚Å°‚Ä¨‚Äé‚Å°‚Å°‚Ä´‚ÅØ‚Å°‚Å°‚Äç‚Ä≠‚Å°‚Å°‚Äç‚Äç‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Å°‚Å¨‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Ä´‚Å¨‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Äç‚Å™‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å¨‚Äç‚Å°‚Å°‚Å≠‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å¨‚Äç‚Å°‚Å°‚ÅØ‚Å°‚Å°‚Äç‚Äç‚Å°‚Å°‚Äç‚ÄÆ‚Å°‚Å°‚Ä™‚Å≠‚Å°‚Å°‚Äç‚Ä≠‚Å°‚Å°‚Ä´‚Äå‚Å°‚Å°‚Ä¨‚Äé‚Å°‚Å°‚Ä´‚ÅØ‚Å°‚Å°‚Äç‚Ä≠‚Å°‚Å°‚Äç‚Äç‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Å°‚ÅØ‚Äç‚Å°‚Äç‚Å≠‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Äç‚Å™‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Ä´‚Å¨‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Ä´‚Å¨‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Ä´‚ÅØ‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Å°‚Å≠‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å¨‚Äç‚Å°‚Äç‚Å¨‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Ä´‚ÅØ‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å¨‚Äç‚Å°‚Å°‚Å≠‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Ä´‚Å¨‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Å°‚ÅØ‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Å°‚Å≠‚Äç‚Å°‚Å°‚Å¨‚Å°‚Å°‚Äç‚Äç‚Å°‚Å°‚Äç‚ÄÆ‚Å°‚Å°‚Äç‚ÄÆ"</span></span></code> </pre><br>  <a href="http://jsfiddle.net/nikitaka/h8sefmg6/">You can watch here</a> .  By the way, no one bothers to obfuscate the code at least three times, at least four times. <br><br>  Now the resulting code looks like this: <br><img src="https://habrastorage.org/files/3c4/427/475/3c442747545b4a50abdd32e860d33042.bmp"><br><br>  Already better, but something else can be done.  At the beginning of the article, I identified the task of hiding the code as if it were not there.  Now, you can just open the console and everything is immediately clear that it is not good.  Eliminating this nuance was quite simple: instead of <code>eval()</code> you should use: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> script = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">"script"</span></span>); script.innerHTML = revealJS(<span class="hljs-string"><span class="hljs-string">"‚Å°‚Å°‚Ä¨‚Ä¨‚Å°‚Å°‚Ä´‚ÄÆ‚Å°‚Å°‚Ä´‚ÅÆ‚Å°‚Å°‚Ä´‚Äè‚Å°‚Å°‚Ä´‚ÅØ‚Å°‚Å°‚Ä¨‚Ä¨‚Å°‚Å°‚Ä™‚Å´‚Å°‚Å°‚Ä¨‚Äç‚Å°‚Å°‚Ä´‚Ä™‚Å°‚Å°‚Ä¨‚Ä´‚Å°‚Å°‚Ä´‚Ä™‚Å°‚Å°‚Ä´‚Äå‚Å°‚Å°‚Ä´‚Å¨‚Å°‚Å°‚Äè‚Å™‚Å°‚Å°‚Ä™‚Äé‚Å°‚Å°‚Äç‚Ä≠‚Å°‚Å°‚Äç‚Äç‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Å°‚Å¨‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Ä´‚Å¨‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Äç‚Å™‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å¨‚Äç‚Å°‚Å°‚Å≠‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å¨‚Äç‚Å°‚Å°‚ÅØ‚Å°‚Å°‚Äç‚Äç‚Å°‚Å°‚Äç‚ÄÆ‚Å°‚Å°‚Ä™‚Å≠‚Å°‚Å°‚Äç‚Ä≠‚Å°‚Å°‚Ä¨‚Äç‚Å°‚Å°‚Ä´‚Ä™‚Å°‚Å°‚Ä¨‚Ä´‚Å°‚Å°‚Ä´‚Ä™‚Å°‚Å°‚Ä´‚Äå‚Å°‚Å°‚Ä´‚Å¨‚Å°‚Å°‚Äè‚Å™‚Å°‚Å°‚Ä™‚Äé‚Å°‚Å°‚Äç‚Ä≠‚Å°‚Å°‚Äç‚Äç‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Å°‚ÅØ‚Äç‚Å°‚Äç‚Å≠‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Äç‚Å™‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Ä´‚Å¨‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Ä´‚Å¨‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Ä´‚ÅØ‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Å°‚Å≠‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å¨‚Äç‚Å°‚Äç‚Å¨‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Ä´‚ÅØ‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å¨‚Äç‚Å°‚Å°‚Å≠‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Ä´‚Å¨‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Äç‚Å´‚Äç‚Å°‚Å°‚ÅØ‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Ä´‚Äå‚Äç‚Å°‚Å°‚Å≠‚Äç‚Å°‚Å°‚Å¨‚Å°‚Å°‚Äç‚Äç‚Å°‚Å°‚Äç‚ÄÆ‚Å°‚Å°‚Äç‚ÄÆ"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByTagName(<span class="hljs-string"><span class="hljs-string">'body'</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>].appendChild(script); <span class="hljs-comment"><span class="hljs-comment">//      ,      document.getElementsByTagName('body')[0].removeChild(script);</span></span></code> </pre><br>  Unfortunately, when executing this code on <a href="http://jsfiddle.net/nikitaka/zv47cvoj/">jsFiddle, the</a> code still appears.  There is a suspicion that this is somehow related to the fact that the code in the JavaScript window also turns into <code>eval()</code> or the same.  When testing on a local project where there are no ‚Äúmiracles‚Äù, everything works as it should, the function performed does not manifest itself: <br><img src="https://habrastorage.org/files/223/60e/476/22360e476a89423391756ddd89573ebf.bmp" alt="image"><br><br><h2>  Areas of use </h2><br>  <b>1</b> .  For fun. <br>  <b>2</b>  Means obfuscation code. <br>  <b>3</b>  Use in conjunction with other code minification / obfuscation methods.  For example, <i>Google Closure Compiler</i> or <i>UglifyJS</i> . <br>  <b>4</b>  The possibility of secretive communication in open areas. <br>  <b>5</b>  ‚ÄúSleeping‚Äù scripts, ‚Äúbookmarks‚Äù in articles, posts on forums, bulletin boards, contextual advertising, in general, anywhere, where they give something to write and this then gets into users' browsers. <br><br>  With the last two points is not so simple, but could not mention them.  I will reveal a little thought.  When browsing through it, it was discovered that, for example, <i>Gmail</i> and <i>Yandex.Mail</i> do not delete such characters.  Some are transformed into the <code>&amp;zwj; &amp;#8234; &amp;lrm;</code> <code>&amp;zwj; &amp;#8234; &amp;lrm;</code>  , but the part remains invisible.  I think that the situation in email clients is similar (I checked <i>Thunderbird</i> ) - nothing is visible.  So in the letter, you can send a hidden message that, during a ‚Äúvisual inspection‚Äù, does not show itself in any way and with all this, even in the case of detection of obscure hidden characters, only those who have a decryption algorithm (which, in general, can decipher this message) you can keep it in your head and write the code directly in the browser console: <br><pre> <code class="javascript hljs">,  ‚Å°‚Å°‚Äç‚Å¨‚Å°‚Å°‚Äç‚Å°‚Å°‚Äè‚Äè‚Äå‚Å°‚Äè‚Äé‚Ä™‚Å°‚Äè‚Äé‚Äé‚Å°‚Äè‚Äé‚ÅÆ‚Å°‚Äè‚Äé‚Äè‚Å°‚Äè‚Äé‚Å≠‚Å°‚Äè‚Äè‚ÅØ‚Å°‚Å°‚Äç‚Å°‚Å°‚Äè‚Äé‚Äç‚Å°‚Å°‚Äç‚Å°‚Å°‚Äè‚Äé‚ÅØ‚Å°‚Äè‚Äè‚ÅØ‚Å°‚Äè‚Äè‚Äç‚Å°‚Äè‚Äè‚Å¨‚Å°‚Å°‚Äç‚Å¨‚Å°‚Å°‚Äç‚Å°‚Å°‚Äè‚Äé‚ÅØ‚Å°‚Äè‚Äè‚Å°‚Å°‚Äè‚Äé‚Ä≠‚Å°‚Äè‚Äè‚Ä™‚Å°‚Äè‚Äé‚ÅÆ‚Å°‚Äè‚Äé‚Äè‚Å°‚Äè‚Äé‚Ä≠‚Å°‚Å°‚Äç‚Å°‚Å°‚Äè‚Äé‚ÅÆ‚Å°‚Äè‚Äé‚Äè‚Å°‚Äè‚Äé‚Ä≠‚Å°‚Äè‚Äé‚Å≠?</code> </pre><br>  But in fact (it is necessary to apply the <code>revealJS()</code> to the part that is between the letter ‚Äúa‚Äù and the question mark): <br><pre> <code class="javascript hljs">  <span class="hljs-comment"><span class="hljs-comment">/*,   ,  */</span></span>?</code> </pre><br><img src="https://habrastorage.org/files/de1/5d3/b28/de15d3b28483429cb3b5c8600f58d6cb.jpg" alt="image"><br><br>  Thus, there is the possibility of covert communication in open areas.  At the same time, no one will suspect anything.  (Unless they will purposefully search, but this is a different conversation).  In general, one of the main advantages (and maybe the only one) is that the content goes through "visual control" (but even this is not so smooth: you can change the encoding and everything will be exposed).  It is like a stealth man and a video surveillance system.  Who knows, maybe the whole Internet has long been stuffed with such messages?  :) <br><br>  As for the hidden scripts, everything is obvious here: if malicious js-code containing ‚Äúmanifester‚Äù and ‚Äúlauncher‚Äù gets into your browser in any way (for example, many load libraries from outside, take the same <i>jQuery</i> , which <a href="http://habrahabr.ru/post/238031/">not so long ago cracked</a> , or some common plugin, such as <i>AdBlock</i> ), then the code hidden on the page will be launched with a certain degree of probability.  That is, in this case, the scheme is this: a lot of different "vectors", each of which is directed in its own way and one single "activator", which is quite tiny. <br><br>  Thanks for attention. <br><br>  <b>P.S.</b>  Little nishtyachok: if in the script at the beginning of the line you put the character <b>U + 202E</b> (Right-To-Left Override) in quotes, then there will be fun.  The efficiency of the code is preserved: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"‚ÄÆ"</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> revealJS = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">s</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s.match(<span class="hljs-regexp"><span class="hljs-regexp">/(.{4})/g</span></span>).map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">b</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b.split(<span class="hljs-string"><span class="hljs-string">''</span></span>).map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.apply(<span class="hljs-literal"><span class="hljs-literal">null</span></span>,{<span class="hljs-attr"><span class="hljs-attr">length</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>}).map(<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>.call,<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>).concat(<span class="hljs-string"><span class="hljs-string">'abcdef'</span></span>.split(<span class="hljs-string"><span class="hljs-string">''</span></span>))[<span class="hljs-string"><span class="hljs-string">'‚Å°‚Äå‚Äç‚Äé‚Äè‚Ä™‚Ä´‚Ä¨‚Ä≠‚ÄÆ‚Å™‚Å´‚Å¨‚Å≠‚ÅÆ‚ÅØ'</span></span>.split(<span class="hljs-string"><span class="hljs-string">''</span></span>).indexOf(i)]})}).map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.fromCharCode(<span class="hljs-number"><span class="hljs-number">0</span></span>+<span class="hljs-string"><span class="hljs-string">"x"</span></span>+c.join(<span class="hljs-string"><span class="hljs-string">''</span></span>))}).join(<span class="hljs-string"><span class="hljs-string">''</span></span>)}</code> </pre></div><p>Source: <a href="https://habr.com/ru/post/243351/">https://habr.com/ru/post/243351/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../243337/index.html">Semaphores, or how to steer access to resources in a DBMS Cach√©</a></li>
<li><a href="../243339/index.html">Review of the most interesting materials on data analysis and machine learning ‚Ññ22 (10 - 16 November 2014)</a></li>
<li><a href="../243343/index.html">Some interesting and useful things for web developer # 33</a></li>
<li><a href="../243345/index.html">Test iOS8 apps with Xcode 6.1 without Apple Developer Program Membership (Jailbreak) (Updated for Xcode 6.4)</a></li>
<li><a href="../243347/index.html">Repair through the ass or why you need debug-thinking</a></li>
<li><a href="../243353/index.html">Autoregistered Unity .net repositories for EF Code first</a></li>
<li><a href="../243355/index.html">QML: animated sandwich icon in Material Design style in 20 minutes</a></li>
<li><a href="../243357/index.html">Inertial measurement of air temperature by ultrasound</a></li>
<li><a href="../243359/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ134 (November 10 - 16, 2014)</a></li>
<li><a href="../243361/index.html">Yii2 test on HHVM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
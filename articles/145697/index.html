<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The second practical task from unity3dstudent.com</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuing the analysis of tasks with unity3dstudent.com , consider the second one. Here is an analysis of the first task . 

 Link to the original ta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The second practical task from unity3dstudent.com</h1><div class="post__text post__text-html js-mediator-article">  Continuing the analysis of tasks with <a href="http://unity3dstudent.com/">unity3dstudent.com</a> , consider the second one.  Here is an <a href="http://habrahabr.ru/post/145678/">analysis of the first task</a> . <br><img src="https://habrastorage.org/storage2/792/1b4/c10/7921b4c1024a7a72f041b079c463e909.png" alt="image"><br>  Link to the original task: <a href="http://www.unity3dstudent.com/2010/07/challenge-c02-beginner/">www.unity3dstudent.com/2010/07/challenge-c02-beginner</a> <br><br>  The bottom line: you need to create a scene in which, by pressing a space in the player‚Äôs field of view, the box will begin to fall, eventually launching another box towards the target.  After hitting the target should disappear with some sound.  The launch of the box is based on a lever: one box is already on one side, another one is falling on the other side of the lever. <br><br>  <b>UPD: the <a href="http://habrahabr.ru/post/146301/">third task</a></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><h4>  Part 1: Scene. </h4><br>  First, we will create a standard plane, a light source, and arrange the camera so that ‚Äúeverything is clearly visible‚Äù (this is in the <a href="http://habrahabr.ru/post/145678/">analysis of the</a> previous problem). <br><br>  Now add a target: create a cube and stretch it to a size appropriate for a decent target.  We move the target so that it is perpendicular to the OX axis (the directions of the axes can be viewed from the top right in the Scene tab).  Immediately, in any editor, we sketch a simple texture, remotely resembling a target (we will make it square) and save it in the Materials folder on the Project panel (after creating this folder): <br><br><img src="https://habrastorage.org/storage2/68c/5e9/eb0/68c5e9eb0732c103be7bd343ad6cae99.png"><br><br>  Now let's add the targetMaterial material to the project (again in the Materials folder) and drag the newly added texture into its Texture field (in the Inspector panel).  The material is dragged onto the target (let's call its object in the Hierarchy panel ‚Äútarget‚Äù). <br><br>  Now let's do the lever-catapult.  Add a cube to the scene, call it plank1 and stretch it ‚Äúto the board‚Äù: <br><br><img src="https://habrastorage.org/storage2/e0d/bc5/414/e0dbc5414f64b6b0fb42a0865d59c722.png"><br><br>  Now add to plank1 the component Hinge Joint (Component-&gt; Physics-&gt; Hinge Joint) - translated as ‚Äúhinge‚Äù.  In the screenshot above, it has already been added - an orange vector has appeared.  It shows which axis the object will rotate.  Now this direction coincides with the axis OX.  It is possible to rotate the board relative to OX to test it and start the scene. <br><br>  So, we are not satisfied with the axis of rotation - after all, with a sharp turn of the board, it is necessary for the box to fly from one edge to the target.  In the Inspector panel, we find the Hinge Joint component for plank1 and find the Axis field group.  This is the axis of rotation.  The default values ‚Äã‚Äãare: <br>  X: 1 <br>  Y: 0 <br>  Z: 0 <br><br>  This shows the axial orientation of the OX axis.  We will approach the axis parallel to OZ.  Set the Z in the unit, the rest - zeros.  Note how the orange vector has changed direction from the center of plank1 on the stage. <br><br><img src="https://habrastorage.org/storage2/8de/757/5cd/8de7575cd96aad8196823178bc6fd1b5.png"><br><br>  With the lever almost finished.  Now the problem is that there is not enough stop for the dice.  Add it: add a cube (let's call it plank2), compress (see the screenshot below) and move it so that it slightly intersects with plank1, forming a grip (so far only virtual): <br><br><img src="https://habrastorage.org/storage2/95f/280/fdd/95f280fdd4e95aeda903613ac3c741b2.png"><br><br><img src="https://habrastorage.org/storage2/5c5/2e1/bf9/5c52e1bf930a9d7c26de4821e5439eaf.png"><br><br>  Add the Rigidbody component to plank2 (this component has already been automatically added to plank1 when Hinge Joint is added).  Let us inform the physics engine that plank1 and plank2 are stapled.  Object plank1 add component Fixed Joint (Component-&gt; Physics-&gt; Fixed Joint).  In the Connected Body field in the Inspector panel is now set to None (Rigidbody).  Drag plank2 into its place from the hierarchy panel. <br><br>  Now, running the scene, we will see how our lever down one edge.  It already pleases.  Add a cube to the scene and place it so that it is just above the lever at its left (closest to the camera) end.  At the same time, we will reduce all cube sizes by 2 times: <br><br><img src="https://habrastorage.org/storage2/b09/e09/d13/b09e09d13c38de72e8e97c1b3a31960f.png"><br><br>  Add the Rigidbody component to it.  If you start the scene now, when the lever is lowered, the cube falls on its end (lowering).  The design is ready for a ‚Äúshot‚Äù, it remains to prepare a counterweight, the fall of which will be sent to the flight just added cube. <br><br>  Add a prefab to the project, let's call it dropcube.  Create a new cube in the scene and drag it from the hierarchy panel to the prefab.  Add the prefab component Rigidbody, and remove the cube from the scene.  We set the mass of the prefab to 30 (for the location of objects on the stage I created, this value allows the launching cube to reach the target). <br><br>  Now add an empty object to the scene (Game Object-&gt; Create Empty) with the name dropper.  Place it above the end of the lever far from the camera in the camera‚Äôs field of view (this can be checked by selecting the Main Camera object and selecting Game Object -&gt; Align View to Selected) - from there will appear cubes later (the same as dropcube): <br><br><img src="https://habrastorage.org/storage2/3c4/c7b/59a/3c4c7b59ac76224efce5f5ab74c234c5.png"><br><br><h4>  Part 2: Scripts. </h4><br>  Let's do the scripting part. <br><br>  First, the target should disappear after hitting the cube.  From the previous task (LINK) we take the Selfdestroyer script (I‚Äôll use one project for all tasks, so I didn‚Äôt even have to add a new script - everything is already in the Project panel) and attach it to the target object.  Here is the complete code for this script (very small): <br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Selfdestroyer</span></span></span><span class="hljs-class"> :</span></span> MonoBehaviour { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnCollisionEnter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collision obj)</span></span></span><span class="hljs-function"> </span></span>{ Destroy(gameObject); } }</code> </pre> <br><br>  Now let's add a Boxdropper C # script to the project.  He must create a cube at the point where the object is attached to (more precisely, create the dropcube prefab Instance) by clicking on the space bar. <br><br>  Once all that is required is a response to pressing the keys - we leave the Update method, the Start method (if it was automatically generated) is deleted.  To implement our plans, at a minimum, we will need to transfer a prefab to the script.  Add a public variable of type GameObject to the class: <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject cubePrefab;</code> </pre><br>  Change the Update method: <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetButtonDown(<span class="hljs-string"><span class="hljs-string">"Jump"</span></span>)) { GameObject.Instantiate(cubePrefab, transform.position, transform.rotation); } }</code> </pre><br><br>  A couple of comments about this code: <br><br>  - first, instead of Input.GetButtonDown ("Jump"), you can use Input.GetKeyDown (KeyCode.Space).  The second option is strictly linked to the space key code, and the first to the key, which in the game control settings plays the role of a jump key (the default is a space).  These settings can be seen by assembling a project and running the resulting executable file (if this is unclear, I can describe the process in more detail). <br><br>  - It is also worth noting that, unlike the script in the <a href="http://habrahabr.ru/post/145678/">first task</a> , when calling GameObject.Instantiate, the result of the function is not saved because we simply do not need it.  If last time we, after creating an object, additionally acted on it by force, then here it is not required. <br><br>  - here the overloaded Instantiate function is called, which has 3 parameters, whereas there is an option with one: Instantiate (Object original).  The latter will set the position and rotation parameters (the second and third parameters respectively in the Instantiate call with three parameters) are the same as those of the object passed by the actual parameter.  It is important to remember that these parameters are <b>not</b> taken from the corresponding values ‚Äã‚Äãfor the object to which the script is attached! <br><br>  Now drag the Boxdropper script from the Project panel onto the dropper object in the hierarchy panel. <br>  Well, the task is almost completed.  If you start the scene and press the spacebar, a cube will fall and a small cube (which is already lying on the shoulder of the lever) will fly to the target.  There is only one minor discrepancy with the wording: there is no sound when destroying the target. <br><br>  First of all, we need the sound itself, that is, the file with some sound.  I took the first sound that had any relation to the sound of an explosion, from one of my past projects.  Add sound to the project (I have it named onDestroySound). <br><br>  A small lyrical digression about sound in Unity.  The sound here is mono and 3D (3D Sound).  In fact, it shows 1 or 2 channels in audio.  For effects that have a sufficiently clear spatial position (explosion, impact sound, etc.), it is recommended to use mono sound, since its actual volume (heard by the player) will depend on the source‚Äôs distance from the listener (determined by the presence of the Audio Listener component, default is the Main Camera object). <br><br>  If your sound turned out to be 3D (there is a tick "3D Sound" in the Inspector panel), do not despair.  Remove the ‚Äútick‚Äù from the ‚Äú3D Sound‚Äù item, select the ‚ÄúForce to mono‚Äù item in the same panel and click ‚ÄúApply‚Äù.  Now we modify the Selfdestroyer script.  We will need a public variable for the sound to be played: <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> AudioClip onDestroy;</code> </pre><br>  Now, in the OnCollisionEnter method, in addition to calling the Destroy method, we will add sound playback: <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnCollisionEnter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collision obj)</span></span></span><span class="hljs-function"> </span></span>{ AudioSource.PlayClipAtPoint(onDestroy, transform.position); Destroy(gameObject); }</code> </pre> <br><br>  Such a call to the AudioSource.PlayClipAtPoint method will play the onDestroy sound as if the sound source is at the location of the object to which this script is attached (transform.position). <br><br>  It remains to select the target object on the stage or in the hierarchy panel and drag a sound file (onDestroySound) into the ‚ÄúOn Destroy (Audio Clip)‚Äù field of the Inspector panel from the project. <br><br>  Note: you can add an Audio Source component to any object and then access it as ‚Äúaudio‚Äù from scripts.  There is even a special method that will play the transmitted sound at the location of the object: <br><br><pre> <code class="hljs mel">audio.PlayOneShot(AudioClip <span class="hljs-keyword"><span class="hljs-keyword">clip</span></span>);</code> </pre><br><br>  However, in our case, the sound is played immediately before the object is destroyed, and if you use audio.PlayOneShot, then after the deletion, the sound will stop playing.  This means that we will not hear him.  You can check it yourself (it is even useful). <br><br>  So, the task is completed. <br><br><h4>  Part 3. Aesthetic. </h4><br>  It would seem, what else?  But I was tormented by one detail: if you throw several dice at a time (press the space several times in a row), the two ‚Äúboards‚Äù that form the lever (plank1 and plank2) begin to move relative to each other.  You can see, for example, in this screenshot (here another light source is added to the scene): <br><br><img src="https://habrastorage.org/storage2/f9d/8ef/5bd/f9d8ef5bd59abaeaccb93ab1ca8e781d.png"><br><br>  Then I thought about the simplest solution: since we only need to connect plank1 and plank2 just once, why not get rid of it after it has already played its role?  Just destroy plank2?  Ugly. <br><br>  Again, select plank1 in the hierarchy panel and find the Fixed Joint component in the Inspector panel.  We notice a curious field: <br><br>  Break Force: Infinity <br><br>  Exactly what is needed!  In my case, the value of the force required to break the connections approached 10 (I hope that Newtons).  By ‚Äúfit,‚Äù I mean that at the moment when the cube is lifted from the surface of the lever, plank2 is detached from plank1 and sent to flight: <br><br><img src="https://habrastorage.org/storage2/19c/e4d/d15/19ce4dd1549aebb746dd7264ef2760c4.png"><br><br>  As it turned out, Hinge Joint is subject to the same problem - the strange behavior of plank1 is again observed with a large number of falling cubes.  We will solve the problem in the same way - we set the value in the Break Force field to 30. As a result, the entire design of the lever after the first launch is destroyed, and quite physically. <br><br>  This is the scene after the first launch: <br><br><img src="https://habrastorage.org/storage2/58b/f79/d27/58bf79d2729ef0733db3ab3955bd5ac7.png"><br><br>  PS For greater beauty, you can add materials to all objects in the scene: a lever, all cubes (large and small), floor.  How this is done is described at the beginning of the article. <br><br><h4>  Conclusion </h4><br>  This time, the code is slightly larger (although there are still less than 10 ‚Äúsemantic‚Äù lines, except for curly brackets and code generated automatically), and the task is more meaningful.  Some kind of physics controlled by us (in the form of compounds) and a sound that has been turned on at certain events in the scene have already appeared. </div><p>Source: <a href="https://habr.com/ru/post/145697/">https://habr.com/ru/post/145697/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145689/index.html">Dirty stress test nginx vs apache</a></li>
<li><a href="../145690/index.html">Twitter introduces trend personalization</a></li>
<li><a href="../145693/index.html">T (ether) allows you to edit virtual objects in the real world</a></li>
<li><a href="../145694/index.html">A simple implementation of the now playing section for Icecast2 using JSON</a></li>
<li><a href="../145695/index.html">Authorization on the site through the social networking API with integration into Spring Security</a></li>
<li><a href="../145699/index.html">Proposed a new HTTP status code for censorship.</a></li>
<li><a href="../145700/index.html">OVH opened a large data center in America</a></li>
<li><a href="../145701/index.html">How to record screencasts</a></li>
<li><a href="../145702/index.html">New office Zynga</a></li>
<li><a href="../145703/index.html">Implementing a Verilog Digital IIR Filter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
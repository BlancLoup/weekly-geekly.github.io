<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Continuing to explore Tizen: C # components turned out to be of high quality.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today I return to the project Tizen. In my recent post ‚ÄúError Testing in Tizen C # Component Code‚Äù in our blog, I conducted a superficial analysis and...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Continuing to explore Tizen: C # components turned out to be of high quality.</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/getpro/habr/post_images/e0b/b34/0a7/e0bb340a7ad6456890ca40675900512d.png" alt="Picture 1" align="left"></p>  Today I return to the project Tizen.  In my recent post ‚ÄúError Testing in Tizen C # Component Code‚Äù in our blog, I conducted a superficial analysis and concluded that it makes sense to check all the C # code of components of this project for errors using the PVS-Studio analyzer and write about it an article.  Without delay, I did this work and want to share its results with you.  I‚Äôll say right away that in C # code, the PVS-Studio analyzer showed itself weakly.  But first things first: let's see what the analyzer was able to find, and then let's look at the statistics and summarize. <br><a name="habracut"></a><br><h2>  Introduction </h2><br>  My colleague Andrei Karpov recently published two epic articles on the analysis of the Tizen project code written in C and C ++ languages: <br><br><ol><li>  <a href="https://www.viva64.com/ru/b/0519/">27000 errors in the Tizen operating system</a> </li><li>  <a href="https://www.viva64.com/ru/b/0520/">Let's talk about micro-optimizations on the example of Tizen code</a> </li></ol><br>  When I noticed that the Tizen project included code in C #, I wanted to do a similar article about testing components written in that language.  Unfortunately, this time the analyzer was unable to demonstrate striking successes, but let's not hurry and examine the issue in detail. <br><br><h2>  What I checked </h2><br>  The Tizen source code is available for download at the <a href="https://build.tizen.org/project/show/Tizen:Unified">link</a> .  The repository contains about 1,000 projects, each of which consists of an archive with source code, as well as auxiliary files.  By the names of the archives or the description is not always possible to understand what is inside.  Therefore, it was necessary to download, unpack and examine archives for the entire repository. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the previous <a href="https://www.viva64.com/ru/b/0518/">article,</a> I gave the total number of C # source code files (4,929, excluding * .Designer.cs) and the lines of code in them (about 691,000) contained in the Tizen project.  Now we need a more detailed analysis.  First, let's try to find files with the .sln or .csproj extension.  The presence of such files will allow analysis in Visual Studio IDE, which will greatly simplify the work. <br><br>  So, during the search, 227 solutions (* .sln) and 166 C # projects (* .csproj) were found.  From the decision files, I chose those that contained C # projects.  There were only 3 such solutions: <br><br><ul><li>  Tizen.Xamarin.Forms.Extension.sln </li><li>  Xamarin.Forms.Tizen.sln </li><li>  Xamarin.Forms.sln </li></ul><br>  The first two solutions are a Tizen add-on over a third-party Xamarin.Forms component, and the third one contains the component itself.  Just over a year ago we wrote <a href="https://www.viva64.com/ru/b/0400/">an article</a> about checking Xamarin.Forms.  In my work, I will consider these results and try to find new errors. <br><br>  Next, by excluding the project files (* .csproj) included in these solutions, I received 107 C # projects that were not associated with any decisions.  Almost all of them are in top-level folders with names like "csapi- *".  Eliminating from this number 11 test projects, as well as 9 projects that had an unsupported Visual Studio format, I received 87 projects in the remainder.  Each of them I checked separately. <br><br>  For the purity of the research, I decided to separate the results obtained for the internal C # components of Tizen (the same 87 projects) from the results of testing components based on Xamarin.Forms.  At first I didn‚Äôt want to take into account Xamarin.Forms, but, on reflection, I came to the conclusion that since Tizen uses this component for its own purposes, then Xamarin.Forms errors can have an effect on Tizen. <br><br>  Also, I will not describe the errors that have already been cited in the previous <a href="https://www.viva64.com/ru/b/0518/">article</a> . <br><br><p><img src="https://habrastorage.org/getpro/habr/post_images/54c/7be/8c7/54c7be8c77b663aa9aeb49b65d6ea7a1.png" alt="Picture 6"></p><br><br><h2>  Test results </h2><br><h3>  Tizen internal C # components </h3><br>  During the verification of this part of the Tizen project, the PVS-Studio analyzer issued 356 warnings, 18 of them - High confidence level, 157 - Medium confidence level and 181 - Low confidence level.  About 325,000 lines of code were analyzed. <br><br>  I did not consider the warnings of the Low confidence level, since the percentage of false positives is usually high there.  However, unfortunately, many false positives this time are not only at the Low level.  Among 175 warnings of the High and Medium levels I managed to detect only 12 errors.  Let's take a look at the most interesting. <br><br>  PVS-Studio <a href="http://www.viva64.com/ru/w/V3008/">warning</a> : <a href="http://www.viva64.com/ru/w/V3008/">V3008</a> The '_scanData' variable is assigned values ‚Äã‚Äãtwice successively.  Perhaps this is a mistake.  Check lines: 138, 137. Tizen.Network.Bluetooth BluetoothLeAdapter.cs 138 <br>  CWE-563.  Assignment to Variable without Use ('Unused Variable') <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BluetoothLeDevice</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BluetoothLeScanData scanData</span></span></span><span class="hljs-function">)</span></span> { _scanData = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BluetoothLeScanData (); _scanData = scanData; .... }</code> </pre> <br>  The <i>_scanData field is</i> assigned a value twice.  Looks very suspicious.  Just in case, take a look at the <i>BluetoothLeScanData</i> class declaration and its constructor.  Perhaps the constructor call contains some additional actions.  The class is small, so I‚Äôll quote it entirely, formatting the original code a bit: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BluetoothLeScanData</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> RemoteAddress { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> BluetoothLeDeviceAddressType AddressType { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Rssi { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> AdvDataLength { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] AdvData { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ScanDataLength { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] ScanData { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre> <br>  As you can see, the class does not contain an overridden default constructor, therefore, apparently, double assignment of the value to the <i>_scanData</i> field is an error. <br><br>  PVS-Studio Warning: <a href="http://www.viva64.com/ru/w/V3009/">V3009</a> This is the same way that this method returns.  Tizen.Applications.WidgetApplication WidgetType.cs 47 <br>  CWE-393.  Return of Wrong Status Code <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnCreate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { WidgetBase b = Activator.CreateInstance(ClassType) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> WidgetBase; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br>  The method always returns 0, regardless of the result of its work.  Probably made a mistake that can be fixed, for example, like this: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnCreate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { WidgetBase b = Activator.CreateInstance(ClassType) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> WidgetBase; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre> <br>  PVS-Studio warnings: <ul><li>  <a href="http://www.viva64.com/ru/w/V3022/">V3022</a> Expression '! LeftBoundIsForward' is always false.  clipper_library clipper.cs 838 </li><li>  <a href="http://www.viva64.com/ru/w/V3022/">V3022</a> Expression '! LeftBoundIsForward' is always true.  clipper_library clipper.cs 863 </li></ul>  CWE-570 / CWE-571 Expression is Always False / True <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> TEdge </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProcessBound</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TEdge E, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> LeftBoundIsForward</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (LeftBoundIsForward) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!LeftBoundIsForward) Result = Horz.Prev; .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!LeftBoundIsForward) Result = Horz.Next; .... } .... }</code> </pre> <br>  This code snippet immediately contains 2 of the same type of erroneous checks.  In this case, in the first case, the <i>Result</i> variable will never get the value of <i>Horz.Prev</i> , and in the second case, the same <i>Result</i> variable will always get the value of <i>Horz.Next</i> .  The author should carefully study this code and correct the error on its own. <br><br>  PVS-Studio <a href="http://www.viva64.com/ru/w/V3022/">warning</a> : <a href="http://www.viva64.com/ru/w/V3022/">V3022</a> Expression 'e.OutIdx&gt; = 0' is always true.  clipper_library clipper.cs 3144 <br>  CWE-571 Expression is Always True <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoMaxima</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TEdge e</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(....) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( e.OutIdx &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; eMaxPair.OutIdx &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.OutIdx &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) AddLocalMaxPoly(e, eMaxPair, e.Top); .... } .... }</code> </pre> <br>  Another piece of code with erroneous verification.  It is possible if the operator "||" was used in the condition <i>e.OutIdx&gt; = 0 &amp;&amp; eMaxPair.OutIdx&gt; = 0</i> , then checking <i>e.OutIdx&gt; = 0</i> in the nested <i>if</i> block would make sense.  Now it looks suspicious. <br><br>  PVS-Studio <a href="http://www.viva64.com/ru/w/V3110/">warning</a> : <a href="http://www.viva64.com/ru/w/V3110/">V3110</a> Possible infinite recursion inside 'InsertBefore' method.  ElmSharp Toolbar.cs 288 <br>  CWE-674 Uncontrolled Recursion <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ToolbarItem </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InsertBefore</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ToolbarItem before, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> label</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> InsertBefore(before, label); }</code> </pre> <br>  Calling the <i>InsertBefore</i> method generates infinite recursion.  Probably an error was made due to calling the wrong method overload.  There is another method in the code named <i>InsertBefore</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ToolbarItem </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InsertBefore</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ToolbarItem before, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> label, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> icon</span></span></span><span class="hljs-function">)</span></span> { .... }</code> </pre> <br>  Perhaps these are all interesting errors of this section.  There are some more suspicious parts of the code, but I will not dwell on them.  The code from Samsung Electronics, written in C #, demonstrates good quality.  Why am I so sure that the verified code is Samsung authorship?  Yes, because each of the scanned files contained in its heading a comment like "Copyright ¬© 2016 Samsung Electronics Co., Ltd All Rights Reserved". <br><br><h3>  Tizen components based on Xamarin.Forms </h3><br>  The add-on used in Tizen over Xamarin.Forms contains about 242,000 lines of code.  During its verification, the PVS-Studio analyzer issued 163 warnings, of which 10 were High confidence levels, 46 were Medium confidence levels and 107 were Low confidence levels (not considered). <br><br>  As promised, I will try to find errors that were not described in the previous <a href="https://www.viva64.com/ru/b/0400/">article</a> about checking Xamarin.Forms.  By the way, I did not find some of the errors listed there during the new check.  Apparently, they were corrected after the authors got acquainted with the article. <br><br>  Despite the small number of warnings issued, I managed to find several new errors among them. <br><br>  PVS-Studio <a href="http://www.viva64.com/ru/w/V3095/">warning</a> : <a href="http://www.viva64.com/ru/w/V3095/">V3095</a> The 'context' object was verified against null.  Check lines: 16, 18. Xamarin.Forms.Xaml XamlServiceProvider.cs 16 <br>  CWE-476 NULL Pointer Dereference <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">XamlServiceProvider</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">INode node, HydratationContext context</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (node != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; node.Parent != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; context.Values.TryGetValue(node.Parent, <span class="hljs-comment"><span class="hljs-comment">// &lt;= out targetObject)) IProvideValueTarget = new XamlValueTargetProvider(....); if (context != null) // &lt;= IRootObjectProvider = new XamlRootObjectProvider(context.RootElement); .... }</span></span></code> </pre> <br>  The <i>context</i> variable is first used, and only then it is checked for <i>null</i> equality. <br><br>  PVS-Studio <a href="http://www.viva64.com/ru/w/V3095/">warning</a> : <a href="http://www.viva64.com/ru/w/V3095/">V3095</a> The 'type' object was verified against null.  Check lines: 147, 149. Xamarin.Forms.Xaml ExpandMarkupsVisitor.cs 147 <br>  CWE-476 NULL Pointer Dereference <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> INode </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Parse</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> xmltype = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> XmlType(namespaceuri, type.Name, <span class="hljs-literal"><span class="hljs-literal">null</span></span>); <span class="hljs-comment"><span class="hljs-comment">// &lt;= if (type == null) throw new NotSupportedException(); .... }</span></span></code> </pre> <br>  Another example of a possible throw exception is a <i>NullReferenceException</i> .  The <i>type</i> variable is used to create an instance of the <i>XmlType</i> class, and then it is checked for <i>null</i> equality. <br><br>  Other similar errors: <br><br><ul><li>  V3095 The 'e.NewElement' object was used against it.  Check lines: 32, 46. Xamarin.Forms.Platform.Tizen MasterDetailPageRenderer.cs 32 </li><li>  V3095 The 'e.NewItems' object was used against it.  Check lines: 557, 567. Xamarin.Forms.Core Element.cs 557 </li><li>  V3095 The 'e.OldItems' object was verified against null.  Check lines: 561, 574. Xamarin.Forms.Core Element.cs 561 </li><li>  V3095 The 'part' object was used against it.  Check lines: 135, 156. Xamarin.Forms.Core BindingExpression.cs 135 </li></ul><br>  PVS-Studio Warning: <a href="http://www.viva64.com/ru/w/V3125/">V3125</a> The 'e.NewItems' object was used against null.  Check lines: 999, 986. Xamarin.Forms.Core TemplatedItemsList.cs 999 <br>  CWE-476 NULL Pointer Dereference <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnProxyCollectionChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.NewStartingIndex &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; e.NewItems != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-comment"><span class="hljs-comment">// &lt;= maxindex = Math.Max(maxindex, e.NewStartingIndex + e.NewItems.Count); .... for (int i = e.NewStartingIndex; i &lt; _templatedObjects.Count; i++) SetIndex(_templatedObjects[i], i + e.NewItems.Count); // &lt;= .... }</span></span></code> </pre> <br>  And here - the opposite situation.  The <i>e.NewItems</i> variable <i>is</i> checked for <i>null</i> equality before first use.  However, when reused, this is forgotten. <br><br><h2>  Statistics </h2><br>  As my colleague Andrei Karpov wrote in one of the previous articles, the PVS-Studio analyzer reveals about 0.4 errors per 1000 lines of C / C ++ Tizen project code.  Let's calculate what we get for C # code. <br><br>  In total, about 567,000 lines of C # code were tested. <br><br>  In my opinion, only 15 code fragments have been found, about which it can be said that they contain errors. <br><br>  It turns out that the analyzer detects 0.02 errors per 1000 lines of code.  Or, in other words, it finds 1 error per 50,000 lines of code.  Not much. <br><br><p><img src="https://habrastorage.org/getpro/habr/post_images/93c/72f/a29/93c72fa29a35f01f0744a27c99bcaba4.png" alt="Picture 11"></p><br><br>  We have to admit that in this case the analyzer was unable to demonstrate its usefulness.  Why it happened - it's hard to say.  When checking other open projects, the analyzer often showed good results.  <a href="https://www.viva64.com/ru/b/0423/">For example</a> , when checking open components of Unity3D, the density of detected errors was 0.5 errors per 1000 lines of code.  Those.  the rate was 25 times better. <br><br>  It is possible that the components that have been tested today are of very high quality, perhaps the analyzer cannot find the types of errors inherent in this project.  Maybe the reason for that is Tizen's complex infrastructure.  Often, projects that did not contain all the necessary environment were checked, many links were missing, which did not allow some diagnostics to work out.  Some projects I could not check. <br><br><h2>  findings </h2><br>  So, the result of the check was not the same as I expected for this amount of code.  To be honest, I assumed to find at least several hundred errors, but there were about fifteen. <br><br>  However, it is important that the PVS-Studio analyzer coped with the task of analyzing the C # code of the Tizen project.  So, it may be useful, if not now, then later, when new components written using C # language will appear in Tizen.  The potential benefit is confirmed by the huge number of errors that the analyzer has already found in other open source projects (see the <a href="https://www.viva64.com/ru/inspections/">list of articles</a> ). <br><br>  Moreover, as we are not tired of repeating, the script of single checks using the analyzer is not optimal - errors are already embedded in the version control system, which, you see, is bad.  It is much more efficient to use a static analyzer on a regular basis, which will make it possible to correct errors at the stage of writing code, until it reaches the version control system, because in this case the cost and complexity of correcting them is much lower. <br><br><p><img src="https://habrastorage.org/getpro/habr/post_images/443/1c3/d24/4431c3d243e7915df4dfcc1e505cc883.png" alt="Picture 17"></p><br>  <a href="https://www.viva64.com/ru/pvs-%250Astudio/">Download and try PVS-Studio</a> <br><br><h2>  Additional links </h2><br><ol><li>  <a href="https://www.viva64.com/ru/b/0518/">An experiment to find errors in the C # code of Tizen components</a> </li><li>  <a href="https://www.viva64.com/ru/b/0400/">Microsoft opened the source Xamarin.Forms.</a>  <a href="https://www.viva64.com/ru/b/0400/">We could not miss the chance to check them with PVS-Studio</a> </li><li>  <a href="https://www.viva64.com/ru/b/0508/">PVS-Studio team is ready to work on the Tizen project (open letter)</a> </li><li>  <a href="https://www.viva64.com/ru/b/0510/">We provide the PVS-Studio analyzer to security experts</a> </li><li>  <a href="https://www.viva64.com/ru/b/0514/">How can PVS-Studio help in finding vulnerabilities?</a> </li><li>  <a href="https://www.viva64.com/ru/b/0519/">27000 errors in the Tizen operating system</a> </li><li>  <a href="https://www.viva64.com/ru/b/0520/">Let's talk about micro-optimizations on the example of Tizen code</a> </li></ol><br><br><div style="text-align:center;"> <a href="http://www.viva64.com/en/b/0521/"><img src="https://habrastorage.org/files/8d2/41b/5bf/8d241b5bf34747169141ed7c1997143b.png"></a> </div><br><br>  If you want to share this article with an English-speaking audience, then please use the link to the translation: Sergey Khrenov.  <a href="http://www.viva64.com/en/b/0521/">We Continue Exploring Tizen: C # Components Proved to be High Quality</a> <br><br><div class="spoiler">  <b class="spoiler_title">Read the article and have a question?</b> <div class="spoiler_text">  Often our articles are asked the same questions.  We collected answers to them here: <a href="http://www.viva64.com/ru/a/0085/">Answers to questions from readers of articles about PVS-Studio, version 2015</a> .  Please review the list. </div></div></div><p>Source: <a href="https://habr.com/ru/post/333694/">https://habr.com/ru/post/333694/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../333684/index.html">What is DevOps: an approach that can change everything</a></li>
<li><a href="../333686/index.html">EBU R128 / BS.1770-3: Packet volume normalization of audio / video files, P2</a></li>
<li><a href="../333688/index.html">Google plans to introduce cloud computing service for quantum computing.</a></li>
<li><a href="../333690/index.html">"Friday format": How to extinguish the flame or 8 sure ways to ruin the development</a></li>
<li><a href="../333692/index.html">Procedural generation in Distrust</a></li>
<li><a href="../333696/index.html">The book "subject-oriented design: patterns, principles and methods"</a></li>
<li><a href="../333698/index.html">Features of a great product manager</a></li>
<li><a href="../333702/index.html">Generics and Converters in Nim</a></li>
<li><a href="../333704/index.html">Corporate governance: how is a company legally built?</a></li>
<li><a href="../333706/index.html">Come on, girls! Ada lovelace dedicated</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
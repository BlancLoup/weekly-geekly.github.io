<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Accelerate JavaScript using Set data type</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The author of the material, the translation of which we are publishing today, says that he is sure that many JavaScript developers use mostly data typ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Accelerate JavaScript using Set data type</h1><div class="post__text post__text-html js-mediator-article"> The author of the material, the translation of which we are publishing today, says that he is sure that many JavaScript developers use mostly data types such as <code>Number</code> , <code>String</code> , <code>Object</code> , <code>Array</code> and <code>Boolean</code> .  In most cases, this is enough.  But if you need to make the code as fast and scalable as possible, the use of these data types is not always justified. <br><br> <a href="https://habr.com/ru/company/ruvds/blog/447578/"><img src="https://habrastorage.org/webt/o4/ib/r_/o4ibr_dcy23melkuz-4r3ijjhr0.jpeg"></a> <br><br>  In this article we will talk about how, using the <code>Set</code> data type, which allows you to work with collections of unique values, make the code faster.  This is especially true for large-scale project code.  The <code>Array</code> and <code>Set</code> types have a lot in common, but the use of the <code>Set</code> data type is able to give the programmer such opportunities, which are clearly manifested during the execution of programs that the <code>Array</code> type does not. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">What is the difference between the Array and Set data types?</font> </h2><br>  The main feature of the <code>Array</code> data type (we will call objects of this type ‚Äúarrays‚Äù) is that arrays are indexed collections of values.  This means that the data in the arrays is stored using indexes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> arr = [A, B, C, D]; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(arr.indexOf(A)); <span class="hljs-comment"><span class="hljs-comment">// : 0 console.log(arr.indexOf(C)); // : 2</span></span></code> </pre> <br>  Unlike arrays, objects of type <code>Set</code> (we will call them "collections") are collections containing data in key / value format.  Instead of using indexes, collections store items using keys.  Elements stored in the collection can be iterated in the order they are added to the collection, and the collection cannot store the same elements.  In other words, all elements of the collection must be unique. <br><br><h2>  <font color="#3AC1EF">What are the main strengths of the collections?</font> </h2><br>  If we compare collections and arrays, then collections can reveal some advantages over arrays, especially noticeable in situations in which program performance is important: <br><br><ul><li>  Search for items.  The array methods <code>indexOf()</code> and <code>includes()</code> , used to search for elements and check whether there is a certain element in the array, are slow. </li><li>  Removing items.  In the collection item can be deleted, based on its value.  In an array, the equivalent of such an action would be using the <code>splice()</code> method, based on the index of the element.  As with the search for items, deleting items using indexes is a slow operation. </li><li>  Insert item.  It is much faster to add an item to a collection than using methods like <code>push()</code> and <code>unshift()</code> to an array. </li><li>  Work with <code>NaN</code> value.  The <code>indexOf()</code> method cannot be used to search for <code>NaN</code> values ‚Äã‚Äãin an array, while using the <code>has()</code> collection method to find out if there is a <code>NaN</code> in it. </li><li>  Remove duplicate items.  Objects of type <code>Set</code> store only unique values.  If you need to avoid storing duplicate elements in a certain data structure, this is their significant advantage over arrays.  When working with arrays to remove duplicate elements would have to write additional code. </li></ul><br>  A complete list of the built-in methods of <code>Set</code> type objects can be found <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set">here</a> <br><br><h2>  <font color="#3AC1EF">On the time complexity of algorithms</font> </h2><br>  The methods that arrays use to search for elements have linear time complexity - O (N).  In other words, the search time for an element is proportional to the size of the array. <br><br>  Unlike arrays, the methods used by collections to find, delete, and add items have a time complexity of O (1).  This means that the size of the collection has virtually no effect on the working hours of such methods. <br><br>  <a href="https://medium.com/%40bretcameron/ace-your-coding-interview-by-understanding-big-o-notation-and-write-faster-code-6b60bd498040">Here</a> you can read details about the time complexity of the algorithms. <br><br><h2>  <font color="#3AC1EF">How much faster are arrays?</font> </h2><br>  Although a variety of factors strongly influence the performance of JavaScript code, in particular, they depend on the system on which the code is run, on the code execution environment used, on the size of the data being processed, I hope my test results will give you the opportunity to compare arrays and collections from a practical point of view, and understand how collection is faster than arrays.  Now we will look at three simple tests and analyze their results. <br><br><h3>  <font color="#3AC1EF">‚ñç Preparation for tests</font> </h3><br>  Before performing any tests, let's create an array with a million elements and the same collection.  For the sake of simplicity, we will use a cycle, the first value of the counter of which will be 0, and the last - 999999: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr = [], set = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>(), n = <span class="hljs-number"><span class="hljs-number">1000000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; i++) { arr.push(i); set.add(i); }</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçTest ‚Ññ1: checking the presence of an element in the array and in the collection</font> </h3><br>  First, <code>123123</code> check the presence of the element <code>123123</code> in the array and in the collection, knowing in advance that there is such an element in these data structures. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> result; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.time(<span class="hljs-string"><span class="hljs-string">'Array'</span></span>); result = arr.indexOf(<span class="hljs-number"><span class="hljs-number">123123</span></span>) !== <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.timeEnd(<span class="hljs-string"><span class="hljs-string">'Array'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.time(<span class="hljs-string"><span class="hljs-string">'Set'</span></span>); result = set.has(<span class="hljs-number"><span class="hljs-number">123123</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.timeEnd(<span class="hljs-string"><span class="hljs-string">'Set'</span></span>);</code> </pre> <br>  Here are the results of this test: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>: <span class="hljs-number"><span class="hljs-number">0.173</span></span>ms <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>: <span class="hljs-number"><span class="hljs-number">0.023</span></span>ms</code> </pre> <br>  The collection is 7.54 times faster than an array. <br><br><h3>  <font color="#3AC1EF">‚ñçTest number 2: insert item</font> </h3><br>  Now let's try adding items to arrays and collections. <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.time(<span class="hljs-string"><span class="hljs-string">'Array'</span></span>); arr.push(n); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.timeEnd(<span class="hljs-string"><span class="hljs-string">'Array'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.time(<span class="hljs-string"><span class="hljs-string">'Set'</span></span>); set.add(n); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.timeEnd(<span class="hljs-string"><span class="hljs-string">'Set'</span></span>);</code> </pre> <br>  Here's what happened: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>: <span class="hljs-number"><span class="hljs-number">0.018</span></span>ms <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>: <span class="hljs-number"><span class="hljs-number">0.003</span></span>ms</code> </pre> <br>  The collection is 6.73 times faster than an array. <br><br><h3>  <font color="#3AC1EF">‚ñçTest number 3: delete item</font> </h3><br>  Now let's remove the element from each data structure (for example, the one that was added in the previous test).  Arrays do not have a built-in method for deleting elements, so we will create an auxiliary function in order to keep our code in fair condition: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> deleteFromArr = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arr, item</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = arr.indexOf(item); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> index !== <span class="hljs-number"><span class="hljs-number">-1</span></span> &amp;&amp; arr.splice(index, <span class="hljs-number"><span class="hljs-number">1</span></span>); };</code> </pre> <br>  And here is the test code: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.time(<span class="hljs-string"><span class="hljs-string">'Array'</span></span>); deleteFromArr(arr, n); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.timeEnd(<span class="hljs-string"><span class="hljs-string">'Array'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.time(<span class="hljs-string"><span class="hljs-string">'Set'</span></span>); set.delete(n); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.timeEnd(<span class="hljs-string"><span class="hljs-string">'Set'</span></span>);</code> </pre> <br>  The result is the following: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>: <span class="hljs-number"><span class="hljs-number">1.122</span></span>ms <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>: <span class="hljs-number"><span class="hljs-number">0.015</span></span>ms</code> </pre> <br>  In this case, the collection was 74.13 times faster than the array! <br><br>  In general, it can be noted that code performance can be significantly increased by using collections instead of arrays.  Consider a few practical examples. <br><br><h2>  <font color="#3AC1EF">Example # 1: removing duplicate values ‚Äã‚Äãfrom an array</font> </h2><br>  If you need to quickly remove duplicate values ‚Äã‚Äãfrom an array, you can convert it to a collection.  This is perhaps the easiest way to get rid of duplicate values: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> duplicateCollection = [<span class="hljs-string"><span class="hljs-string">'A'</span></span>, <span class="hljs-string"><span class="hljs-string">'B'</span></span>, <span class="hljs-string"><span class="hljs-string">'B'</span></span>, <span class="hljs-string"><span class="hljs-string">'C'</span></span>, <span class="hljs-string"><span class="hljs-string">'D'</span></span>, <span class="hljs-string"><span class="hljs-string">'B'</span></span>, <span class="hljs-string"><span class="hljs-string">'C'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//       let uniqueCollection = new Set(duplicateCollection); console.log(uniqueCollection) // : Set(4) {"A", "B", "C", "D"} //        let uniqueCollection = [...new Set(duplicateCollection)]; console.log(uniqueCollection) // : ["A", "B", "C", "D"]</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Example # 2: a challenge with an interview at Google</font> </h2><br>  In one of my <a href="https://medium.com/%40bretcameron/4-ways-to-solve-a-google-interview-question-in-javascript-12e6eec87576">material,</a> I considered four options for answering the question asked by the interviewer from Google.  Interviews were conducted using C ++, but if JavaScript were used instead of this language, the <code>Set</code> data structure would necessarily be used to solve the problem. <br><br>  If you want to more deeply understand the answer to this question - read the above article.  Here I just show you the solution. <br><br><h3>  <font color="#3AC1EF">‚ñçTask</font> </h3><br>  Given an unsorted array of integers and the value of <code>sum</code> .  Write a function that returns <code>true</code> if, as a result of the addition of any two elements of this array, we get the value of <code>sum</code> .  If there are no such elements in the array, the function should return <code>false</code> . <br><br>  It turns out, for example, that if we are given an array <code>[3, 5, 1, 4]</code> and the value of <code>sum</code> is equal to <code>9</code> , then the function should return <code>true</code> , since <code>4+5=9</code> . <br><br><h3>  <font color="#3AC1EF">‚ñçDecision</font> </h3><br>  The solution to this problem can be approached using the following idea: you need to iterate over the array, creating as it iterates, the <code>Set</code> data structure, to which values ‚Äã‚Äãwill be added that complement the found values ‚Äã‚Äãto the <code>sum</code> value. <br><br>  Let us analyze this idea by the example of the above array.  When we meet <code>3</code> , we can add the number <code>6</code> to the collection, since we know that we need to find two numbers that are <code>9</code> in total.  Then, every time we encounter a new value from the array, we can check the collection and see if it is there.  When we meet the number <code>5</code> , we will add <code>4</code> to the collection.  And when, finally, we get to the number <code>4</code> , we find it in the collection and we can return <code>true</code> . <br><br>  Here's what the solution to this problem might look like: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> findSum = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arr, val</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> searchValues = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>(); searchValues.add(val - arr[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>, length = arr.length; i &lt; length; i++) {   <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> searchVal = val - arr[i];   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchValues.has(arr[i])) {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>;   } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {     searchValues.add(searchVal);   } }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; };</code> </pre> <br>  And here is a more concise solution: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> findSum = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arr, sum</span></span></span><span class="hljs-function">) =&gt;</span></span> arr.some((<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">set</span></span></span><span class="hljs-function"> =&gt;</span></span> n =&gt; set.has(n) || !set.add(sum - n))(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>));</code> </pre> <br>  Since the time complexity of the <code>Set.prototype.has()</code> method is O (1), using the <code>Set</code> data structure to store numbers that complement the numbers found in the array to a given value allows you to find a solution in linear time (O (N)). <br><br>  If the solution would depend on the <code>Array.prototype.indexOf()</code> method or on the <code>Array.prototype.includes()</code> method, the time complexity of each of which is O (N), then the total time complexity of the algorithm would be O (N <sup>2</sup> ).  As a result, it would become much slower. <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  If you have not previously encountered the <code>Set</code> data type in JavaScript, then we hope that you, having got an idea about it, will be able to use it in your projects with use. <br><br>  <b>Dear readers!</b>  How would you apply a <code>Set</code> data structure in your code? <br><br><div style="text-align:center;"> <a href="https://ruvds.com/turbo_vps/"><img src="https://habrastorage.org/webt/b4/fn/f5/b4fnf52x9i3mn80tttdafqtvkfe.jpeg"></a> </div></div><p>Source: <a href="https://habr.com/ru/post/447578/">https://habr.com/ru/post/447578/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../447566/index.html">Scientists first showed the real "photo" of the black hole</a></li>
<li><a href="../447568/index.html">Interview with cosmonaut Alexander Laveykin about space cinema, overload in 20 units and soft landing</a></li>
<li><a href="../447570/index.html">GoLand 2019.1: Code Performance Analysis, Smart Step Into, Extract Interface Refactoring, Nilness Analyzer, and more</a></li>
<li><a href="../447574/index.html">Notes freelancer: the development of the first React Native-application</a></li>
<li><a href="../447576/index.html">Responsible approach to JavaScript development, part 1</a></li>
<li><a href="../447580/index.html">Threat Hunting, or How to defend against 5% of threats</a></li>
<li><a href="../447582/index.html">Rusatom: 3D metal printing in Russia</a></li>
<li><a href="../447584/index.html">Anatomy of the "Space Data Center". Sky-high server: look under the hood</a></li>
<li><a href="../447586/index.html">Advanced string interpolation in Swift 5.0</a></li>
<li><a href="../447588/index.html">How to make the application more stable with the help of 2 types of unit tests</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
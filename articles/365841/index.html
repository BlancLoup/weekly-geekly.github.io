<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>My smart switch or how I made a device for a smart home without electronics development experience, living in a village in Indonesia</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="They say that laziness is the mother of progress. In my case, it was so. I now live in sunny Indonesia, where people light their homes at night to sca...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>My smart switch or how I made a device for a smart home without electronics development experience, living in a village in Indonesia</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/3c6/91a/ffe/3c691affeab74e1fb4e81791b2f525de.jpg"><br><br>  They say that laziness is the mother of progress.  In my case, it was so.  I now live in sunny Indonesia, where people light their homes at night to scare off thieves (and ghosts).  It so happened that my order was to turn this lighting on and off.  Every morning and evening you have to go around the house and click all the external switches.  It is especially difficult not to forget about this in the morning, since the included light bulbs are not noticeable in daylight.  After a week of such walking, I wanted a better life.  I decided to make a remote switch and automate the control of the light.  Thus, laying the first virtual bricks of his smart home.  There was only one little problem - I had no idea how to design electronics and dilute the board. <br><br>  In the title photo you see the result of my work.  The switch consists of two inserts in the wall.  In one there is a physical switch, and in the other its ‚Äúbrain‚Äù.  The virtual switch works in OpenHab2, launched in turn on the RaspberryPi2. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  <b>Design / Wishes</b> <br><br>  So, how do you start developing such a device?  I wanted the virtual switch to work together, not instead of the physical one, and that turning off the physical switch does not turn off the virtual one.  Here, such a design is called a "hotel switch". <br><br><img src="https://habrastorage.org/files/01f/02e/c34/01f02ec346da41ff9156c0197804ae2f.jpg"><br><br>  And what about the body?  In no case should my device be a ‚Äúwall wart‚Äù.  On the contrary, it should smoothly merge with the physical switch without giving out its existence.  This means that the board should be placed in one of the widespread wall boxes.  Below, the photo shows a copy of such a box, it is from the line of switches and sockets of Panasonic.  On its basis, I developed my device. <br><br><img src="https://habrastorage.org/files/5d0/66c/44e/5d066c44ee5b430a8276d06fea388314.jpg"><br><br>  Ok, but what about ‚Äúsmart‚Äù features?  I wanted a switch that knows whether it is on or not.  I didn‚Äôt just know the status of rela, but I really knew if the current flows through the system.  I also wanted this state to persist for a long time, and for example, in the event of a power failure, the light did not turn on / off suddenly after power was restored. <br><br>  Finally, I wanted a beautiful control panel for the virtual switch.  I needed a good solution to control the smart home where I could connect.  I didn‚Äôt want to write another cool smartphone app, damn it! <br><br><img src="https://habrastorage.org/files/121/248/10a/12124810ab124fbf8d10574f6aa259eb.jpg"><br><br>  <b>First Prototype</b> <br><br>  So, I wanted to build an electronic device, but did not know how to do it at all.  I was familiar with microcontrollers, knew how to use a multi-mitter and soldered a couple of non-residential boards of someone else's design.  But I could not design my scheme at all.  Therefore, at first I decided to assemble my switch from ready-made modules.  Here is what I have collected: <br><br><img src="https://habrastorage.org/files/862/503/ea6/862503ea6bc74ea9b3d7d61f33277e97.jpg"><br><br>  To reduce 220V to 5V, I used a charger from the phone.  Immediately take a good charger, for example the one that was attached to the phone with the purchase.  Do not buy Chinese aftermarket in the market, they are usually curves.  I took mine from some old Samsung. <br><br>  I picked it up as a whale (‚Äúbeefcake‚Äù kit from SparkFun).  It was large, with a loud click and had all the necessary strapping (transistor, protective diode, etc.) to wield the microcontroller‚Äôs foot. <br><br>  To measure the current, I took one of the Allegro ACS712 modules on a small board.  There was all the kit, it was only necessary to connect the power and read the analog output. <br><br>  The above made up my power module.  For the logical part, I took: <br><br>  Dev board on PIC24F from <a href="https://www.circuitsathome.com/">Circuits @ Home</a> .  It was made to create USB Host devices, but I only needed the giant PIC that stood on it.  Also, I took a PickIt3 programmer / debager for it.  In hell there is a reserved place for the man who, for the first time, dared to call this crap a debager. <br><br>  The wifi module was originally a CC3000 on the breakout board.  But not for long.  The CC3000 could have been the very workhorse for internet irons, but only before TI priced it up (from $ 10 to $ 30) and stopped producing samples.  Just as I was about to dive into his study, another chip came out about which you might have heard - ESP8266.  Ultra cheap wifi module driven by weird AT commands. <br><br>  AT commands for a long time did not give me rest.  Who in their right mind can pull on the construction of such a strange syntax?  Then, of course, I realized that these AT commands were not invented by Espressif (the company producing ESP8266), but were used because the same AT commands in the same performance were used earlier in other similar products, such as GSM modems, for example.  And even earlier, GSM modems, someone else used them, and so on to the very first dialup modem.  It was expected that people who had previously written under the AT command will be able to quickly connect the ESP8266.  Only it was not me;) <br><br>  <b>Software for the microcontroller.</b> <br><br>  Programming is another thing, I can!  Using my kompashku modules I wrote most of the firmware for the PIC.  I decided, somewhat arbitrarily, that my device would be available via JSON RPC over TCP.  RPC (remote procedure call) seemed to me the most logical way to organize communication between the central server and my device.  The device will open a connection to the server, and the server will use the established channel to call the methods ‚Äúon‚Äù, ‚Äúoff‚Äù, ‚Äústatus‚Äù and receive some data in response.  And I took JSON in order not to invent my syntax and parser for it. <br><br>  I found a little C for JSON parsing - <a href="https://bitbucket.org/zserge/jsmn/wiki/Home">JSMN</a> .  It is easy to use, but there were no easy ways to walk through a JSON tree.  No problem, the necessary functionality was easily <a href="https://bitbucket.org/azimoff/jsmn/">added</a> .  Over JSMN, I wrote my <a href="http://kacangbawang.com/json-rpc-lib-for-microcontrollers-released/">JSONRPC server</a> .  The module is initialized by an array of function pointers and string function names (approximately how JNI methods are registered in Android).  Thus, the server knows which function to run when it encounters its name in a JSONRPC request.  When a call is made, an automatic check of the type of arguments takes place, a check of the type of return will be added in the future.  Take a look if you're interested. <br><br>  Oh yes, there is one more thing worth mentioning before we go any further.  Each microcontroller project should start with a good UART console.  Well, it's actually quite simple to send a couple of bytes over the UART and then spin in a loop, waiting for an answer, did you mean that?  No, this is a bad UART console.  A good one would be non-blocking, using interrupts, ring buffers and all that.  Unfortunately, I did not find the open version of the sorta version, and was forced to port one of the vendor-specific ones to fit my needs.  I am going to write my own, from scratch, and let it out, but my hands still cannot reach. <br><br>  Also, we need an interface to the ESP8266.  I decided to write a module that called 'at-socket'.  The user interface is socket-like: open / close / send / receive / joinap / quitap / etc, but under the hood these functions perform sequences of valid AT commands and return binary statuses.  It was much harder than it might seem.  Facing AT teams for the first time, I didn‚Äôt know if there were any established conventions, and if the authors of this AT implemented them.  For example, nothing was said about synchronization (is it possible to read an asynchronous AT command in the middle of a synchronous call?).  The control words sometimes change in different commands (eg ERROR and FAIL), and sometimes single characters are used without any EOL markers (eg '&gt;'), and therefore one cannot simply read and read line by line from the buffer.  Do not forget to parse the size of incoming data from the string in the int.  Taken together, these little things strongly interfere.  In the end, by the method of experiments, I got something good, but you can probably imagine how the code written in this way looks from the inside.  Therefore, I will not offer it to your attention.  Maybe after I rewrite it, knowing the main pitfalls, but not earlier.  One thing is not clear to me - where are all these legacy AT commands that keep this syntax afloat? <br><br>  <b>The second run on the iron / make boards</b> <br><br>  Up to this point, I had successfully compensated for my ignorance of electronics using ready-made modules, but now it looked right into my face.  The alpha version of the firmware for the micra was ready and exploded for new hardware.  I understood that the production of boards would take time, so I wanted to start the process as quickly as possible, and at this time pick the central server of the smart home. <br><br>  My attempts to get an electronic friend interested were not successful.  I was alone.  I decided that at least I would draw a scheme, in the end, I already had all the modules of a loner and a scheme was usually attached to them, or it was in a datasheet.  All that was required of me was to combine everything into one big scheme, and with it it was already possible to competently ask for help. <br><br>  With the help of YouTube and search engines I learned how to use electronic CAD (I started with Eagle, and yes, it is terrible).  As each module is added to my master drawing, I just could not help but wonder how it works.  Prior to this, electronic circuits were misleading.  They were big and I didn‚Äôt even know which way to start looking at them.  And here, everything was elegantly broken into small pieces, and you could think about what this or that resistor and capacitor gives.  I asked questions on <a href="http://stackoverflow.com/">stackoverflow</a> and <a href="https://toster.ru/">toster</a> , and gradually began to understand what was happening - current limiting resistors, pull ups, pull downs, filtering caps, protection diodes, voltage dividers, and so on.  And I also understood that for each microchip there are usually examples of layout in the datasheet, and even if not everything is clear, you can start using and asking questions.  Thus, I even dared to add a few goodies to my large circuit which was not in the modules.  And finally, I realized what it is - the minimum binding for the microprocessor.  On this topic, I suggest you an interesting story. <br><br><div class="spoiler">  <b class="spoiler_title">How I stupidly burned the first prototype and looked for parts in a local, village shop</b> <div class="spoiler_text">  As soon as I finished the first pass through the firmware, I had a small incident.  I kept my foot in a peroscid treatment bath (tropical fangus, fu, do not ask) and, like a fool, without getting up, with my outstretched hand, I incorrectly plugged the power into the first prototype.  These were 12V and not 5. The white dummy spun on the board.  I disassembled the unit, and began to check the components.  Everything was bad.  Everything burned down ... except the programmer, but then I did not know.  Now I definitely had to make my pay.  While I was finishing the circuit, I decided to try to solder a new virgin board for the PIC, since I had a couple of chips left and I already found the minimum weight in the datasheet.  I needed only a few ceramic capacitors, resistors, and maybe a crystal and a linear source.  I made a list and headed to the local electronics store. <br><br>  Let me tell you a little about Indonesian e-shops.  This is usually a semi-dark, cramped room with an open wall to the street and minimal windows.  Travel products are speakers and amplifiers for numerous mosques and some cheap Chinese LED shny crafts that local people like to mount somewhere on the bumper of their car or moped.  All electronic fines lie in dusty boxes behind the counter with yellowed stickers.  Do not even think about the catalog, say what you need and we will check whether we have it or not.  That evening I went to Digikey, poked into the search box and wept quietly.  Once I saw a couple of schoolchildren buying transistors, LEDs and some other trifle.  I asked them what they were collecting, because before that I had never seen anyone here interested in collecting electronics.  They told me what they are doing flip-flop.  Suddenly I had hope!  There are still those who are interested in electronics.  Maybe I will hire them when they finish school, or arrange a hackathon for them, or ... but not for a long time the music played.  It turned out that they were collecting flip-flop for the school assignment, and about this, all the electronics in the school began and ended. <br><br>  So, I was at one of these electronics stores with my list.  To my question about ceramic capacitors in response, I got a dull look and clapping eyes.  After 15 minutes of explanation, I left the store getting a resistor at 10K, a crystal at 12MHz and a pair of 8nF capacitors to it.  They had no other ceramic capacitors, and they didn‚Äôt want to accept my descriptions of the ungraved board.  Until you learn the local keywords (the non-etched board turned out to be 'PCB polos'), you will be looked upon as a macaque who escaped from the zoo. <br><br>  My adventures with the search for details were delayed for a couple of weeks before we went to the nearest "metropolis".  In it the shops were the same as in the village, but with a little more choice.  Knowing the keywords I was able to quickly check the availability of the right products.  I got the ceramic capacitors at 0.1uF, but not higher.  I also took a tantalum capacitor (last, dusty) at 25uF, which later turned out to be broken and ruined my virgin board.  They also had PCB polos!  But only one-sided, that life does not seem raspberries. <br><br>  A few days later I soldered my board using a thin wire (which, in turn, was removed from the burned transformer from the soldering station) for the tracks. <br><br><img src="https://habrastorage.org/files/119/efc/80a/119efc80a2d4494bae96746b32020c30.jpg"><br><br>  The moment of inclusion was a disappointment.  The programmer did not want to recognize the chip.  The reason for this was a broken tantalum capacitor, but I did not know this yet, and it was not clear if the programmer burned out or I incorrectly collected the board.  To finish the story, I will tell you that later I rebuilt the virgin board on the breadboard with giant (by physical dimensions) thin film capacitors and it all worked.  The programmer was alive. <br></div></div><br><br>  So where did we stay?  Oh, yes - I drew the master scheme and pondered the next move.  I didn‚Äôt want to do the board layout myself.  That would be my first pay and jambs were guaranteed.  In addition, the power supply module used 220V and the shoals became fire hazardous.  I did what any person should do in this situation - I filled the order for <a href="http://freelansim.ru/">freelance</a> .  Three performers responded, and so I met <a href="http://freelansim.ru/freelancers/Vinograd5535">Danil</a> .  He perfectly set up the power and logic modules, and even lured me to the side of Altium-a (Altium vs. Eagle is just like Photoshop vs. MSPaint). <br><br>  While Danil worked on the board, I helped to draw footprints and select the main components.  I satisfied my impulses of ‚Äúdrawing too‚Äù in Altium-e by repeating tutorials from YouTube and official documentation, which is very good.  I liked <a href="https://www.youtube.com/playlist%3Flist%3DPLXvLToQzgzdcyHW7qScRZOlYaK3VimeLE">this dude</a> .  With my new knowledge, I could look at the options for boards from Daniel, and give a full feedback.  In general, learn CAD, it is not as difficult as it seems.  Looking ahead, here are the fees: <br><br><img src="https://habrastorage.org/files/65a/527/fd1/65a527fd1adb45b2b0de0b415d045946.jpg"><br><br>  Having gotten the files into the shaking Gerber pens, I had to find a place to print them and buy the components.  I know only two places where you can get a small batch of motherboards at a low price - <a href="https://oshpark.com/">oshpark</a> and <a href="http://dirtypcbs.com/">cheapdirtypcbs</a> .  I chose oshpark because I really like their web interface and I have already seen their product and it is really solid.  The only problem is they are in America and I am in Indonesia.  Do you know that there is another big problem?  Order delivery to Indenozia, [censored].  There are no local outlets of large distributors like Digikey / Mouser / Element14 / etc.  I was thinking of ordering outlets in nearby countries - Mouser has a Malaysian website, and Element14 has Singapore.  Happy pricing for shipping.  In my opinion, Mouser on their Malaysian website was written with three exclamation marks that - at last they make delivery to Indonesia !!!  For a low, low price of $ 70.  OK.  Go ahead.  In the end, I found a re-shipper in America, and they got all my boards and components and sent them to me in one batch.  Shipment now cost $ 23.  A month later (or another) I had a parcel.  Who wants to open a large electronic store inside Indonesia with me?  (Seriously) <br><br>  Before going through the quest ‚ÄúIndiana Johns and a Variable Temperature Soldering Iron‚Äù (and do not even dare to ask me about the sting of the correct shape), I proceeded to soldering.  A little backward soldered diodes later, I had a power source.  There were a few bugs (mine), I will tell only about one interesting / funny.  The module with the microcontroller was more difficult.  It turned out that I painted the landing pad for the ESP8266 exactly in mirror image (facepalm).  It was lucky that he did not burn after such a connection.  With the help of a hair dryer, I took it off and turned it face down.  It worked. <br><br>  The next adventure was with a linear regulator.  I do not know how I didn‚Äôt see it, but it turned out that my 5V was an extreme, low entry value.  When I connected the load (read: turned on the ESP8266) 3.3V output sagged to 2.7V, which caused a brown out reset on the PIC-e.  I immediately ordered a replacement (MCP1825, I recommend) on Aliexpress.  AliExpress is very good for single components - the price is about the same as in America, free shipping with the purchase of such units is ten.  But at the same time, I do not see myself ordering the whole BOM in this way. <br><br>  The last bug in the logic module was the wrong choice of legs under the UART.  I was already pricked at using microchip remappable peripherals, but did not notice that many of these pins are suitable only for input.  And as one would expect both pins for UART, I chose these.  Well, nothing repaired.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I cut the tracks and laid them "bypassing" a thin wire. A drop of hot glue to hold, and you're done. </font></font><br><br><img src="https://habrastorage.org/files/364/eec/8f7/364eec8f7418470aac9625335b3183e6.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It started! I was able to drive the firmware through all the tests, including current measurement. I sent JSONRPC commands manually and received responses. Wifi and TCP worked. Here is the second prototype: The </font></font><br><br><img src="https://habrastorage.org/files/118/ceb/9d3/118ceb9d3c644be09c782968c43d333a.jpg"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">central server of the smart home</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The central server is the most tasty morsel of the entire smart home ecosystem. Control over it gives full control over the compatibility of devices, you can start the entire metric through your cloud service (and then send ads to diapers when you see that one of the rooms has been repainted), integrate with some Evil Corporation (to improve the experience, of course), or some meanness. So, young Umnodomovtsy - think about who you want to put on this role. I hope your answer will be ‚Äúourselves‚Äù, but lately I don‚Äôt even know what to expect. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I decided to quickly try (install and run) all the home automation solutions I could find. Here is a </font></font><a href="http://habrahabr.ru/post/227435/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">good list.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(at the end), but recently such projects are growing like mushrooms after rain, so it may already be not complete. Of those that I tried, I did not like one. My discontent usually fell into one of these groups: the half-dead status of a project; obscene, unfinished documentation; gross security breaches (project on the basis of a local site ‚Äî directories with 777 rights belonging to the user under which the web server is running, shell calls), cloud service bindings, and in all cases a disgusting interface. I honestly tried to install and run everything, but it worked only about half the time. From the working half, I stopped at </font></font><a href="https://github.com/openhab/openhab2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenHab</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- it has the most detailed documentation, active development, a fairly large community and open source. I also liked that it was written in Java. Among the shortcomings is the sophisticated code, the malformed interface (now much better in OpenHab2), and the lack of space for asking questions. Now, OpenHab2 is in the alpha stage, and it offers us a reorganized code (much clearer than the first) and a beautiful PaperUI interface that looks good on both pischki and on phones. In addition, there are all the functions for connecting your interface if you risk writing it.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenHab is organized in core, ui and bindings. Binding is a kind of driver for each device. In OpenHab, there are a couple of generalizing buyings, such as http or tcp, and at first I tried to use them, but I quickly realized that their usefulness is extremely limited to the simplest cases. I also have a couple of red words in the direction of ‚Äúbinding notation‚Äù. In general, if you need your own logic, then the only way is to write your own binding.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We were lucky, the structure of the banding was much improved between the first and second OpenHabs, and with a little persistence I figured out the binding API and wrote my own. My buying finds new devices, keeps records of connections, disconnects and statuses of all devices. I plan to write a separate post devoted to creating my own binding, so now I will not dwell on this and will describe the architecture in more general terms.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The OpenHab binary runs on any machine with a Java VM and raises the web on the host. Our binding starts the listening TCP socket and waits until a new switch is connected to it. The switch is initially programmed with some parameters from the user - wifi name / password and aypishnik or hostname where to find the central server. That is, as soon as the switch establishes a connection with the AP, it enters the server. When a TCP connection is established, the user is notified that a new device has been found and that he should be added to the control panel. And that's all, no config files and binding configuration strings. In the control panel, the device looks like a normal switch, but hey, this is a smart switch! Its status (ON / OFF) indicates the true state of the system. If you turn it on, and a light bulb burns out there,the status will quickly return back to OFF, because if the current does not flow through the switch, as a result, the light cannot work.</font></font><br><br><img src="https://habrastorage.org/files/a0c/a99/6f6/a0ca996f69544fc7ba5a274023b91d04.jpg"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Putting it all together</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> After several iterations of ‚Äústraighten the banding-screw up the micro-controller‚Äù, the whole system was ready for launch. Debugging takes place on such a portable unit. </font></font><br><br><img src="https://habrastorage.org/files/db5/8f9/eb8/db58f9eb8c1b41e09ac7a773ea2e6b73.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The production server I have consists of RaspberryPi2 on which the assembled OpenHab2 is spinning. Raspberry is connected to the home network via LAN, and you can pick up an additional AP, onto which all switches should be installed for separation and additional security. </font></font><br><br><img src="https://habrastorage.org/files/7b4/e41/5f5/7b4e415f57274b318bb18c9dee2fae76.jpg"><br><br><img src="https://habrastorage.org/files/495/b69/9a5/495b699a565340ec912103804cc68957.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And now let's play an electrician. Armed with a test screwdriver (lights up red if you touch the "hot" wire) and turning off the breaker, I took up the wiring. </font></font><br><br><img src="https://habrastorage.org/files/7d6/618/1bb/7d66181bbd2f40f1b2fb42ec46b3efaa.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is quite difficult to wield thick copper wires.</font></font> We collect. <br><br><img src="https://habrastorage.org/files/03c/8ad/868/03c8ad868aba48f48156edc82fc56b14.jpg"><br><br><img src="https://habrastorage.org/files/c4a/cef/948/c4acef94855943629ebd85effedb7d32.jpg"><br><br><img src="https://habrastorage.org/files/175/b1c/548/175b1c548c7842699c70fce2007123cd.jpg"><br><br><img src="https://habrastorage.org/files/c07/4ad/a55/c074ada557a848e6aa9d2bbd20423c1d.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For three weeks I have been driving this specimen with good results, and I am preparing to install another one on the street. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Goodbye</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This is where my story ends. </font><font style="vertical-align: inherit;">Until I decided what to do next. </font><font style="vertical-align: inherit;">Heart pulls to send my switch to the hardware incubator, maybe they will take it - home automation is now popular. </font><font style="vertical-align: inherit;">And the brain says that incubators will never be interested in such a project, too one is unimportant to be turned off in this world - they would be better off if they have something social. </font><font style="vertical-align: inherit;">It would be very interesting to hear from people with similar experience. </font><font style="vertical-align: inherit;">And yes, if I apply, I will need a piece of iron and maybe "peoples' person." </font><font style="vertical-align: inherit;">Who wants with me?</font></font><br><br>  <b>Update</b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At the request of the viewers, I decided to publish the scheme. </font><font style="vertical-align: inherit;">Look </font></font><a href="https://bitbucket.org/azimoff/my-smart-switch/downloads"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div><p>Source: <a href="https://habr.com/ru/post/365841/">https://habr.com/ru/post/365841/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../365831/index.html">Some methods of manufacturing products from composites</a></li>
<li><a href="../365833/index.html">Japanese scientists have created a flexible speaker and microphone</a></li>
<li><a href="../365835/index.html">Streaming Steam Games on Raspberry PI</a></li>
<li><a href="../365837/index.html">Xbox Live and PlayStation Network are under DDoS</a></li>
<li><a href="../365839/index.html">Foreign language: 15 obstacles</a></li>
<li><a href="../365843/index.html">GMAT and GRE: Similarities and Differences</a></li>
<li><a href="../365845/index.html">In the Moscow State University will create a bank of biomaterials "Noah's Ark"</a></li>
<li><a href="../365851/index.html">Vacuum cleaner manufacturer Hoover has uploaded to the Network 3D models of parts for its devices</a></li>
<li><a href="../365853/index.html">Smart helmet received a grant of 14.7 million rubles from the Ministry of Education</a></li>
<li><a href="../365855/index.html">"What the world can not be at all ..."</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Game client download tracking system. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article we will talk about the GeoIP service, which determines the geodata by IP address of the request, web sockets, polling server implement...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Game client download tracking system. Part 2</h1><div class="post__text post__text-html js-mediator-article">  In this article we will talk about the GeoIP service, which determines the geodata by IP address of the request, web sockets, polling server implementations, AngularJS, Highcharts and will conduct a brief analysis of the game client download tracking system. <br><br><img src="https://habrastorage.org/files/3cd/829/a6f/3cd829a6f1604911aac9e1a2c0a3b4b8.jpg"><br><a name="habracut"></a><br>  <a href="http://habrahabr.ru/company/plarium/blog/267707/">Game client download tracking system.</a>  <a href="http://habrahabr.ru/company/plarium/blog/267707/">Part 1.</a> <br><br>  <b>GeoIP service</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Part of the project was the development of a service for determining geodata.  He had to determine the geodata by IP-address of the request, as well as find geo-information by coordinates.  There are many similar online services available, but we needed a locally running and monitored service that can handle a large number of simultaneous and daily requests.  As a result, the <a href="https://db-ip.com/">DB-IP</a> base was acquired and its service was written.  The base of this service contains about 7 million address ranges (both IPv4 and IPv6) and is updated monthly.  The database is distributed in CSV format. <br><br>  Already used in our project, MongoDB perfectly suited for storing and monthly updating of the database of IP addresses.  It was decided to distribute the ranges of IP-addresses for different collections.  As a result, the search does not occur from all the data, but only from a specific collection, which together with the indexing gave a good search speed: 2‚Äì8 milliseconds. <br><br>  In addition, it was necessary to find geodata by geographic coordinates.  This time, MongoDB was pleased with the opportunity to easily and conveniently work <a href="http://docs.mongodb.org/manual/applications/geospatial-indexes/">with coordinates and geographical objects.</a>  GeoJson2DGeographicCoordinates and the GeoSpatialSpherical index were used to store the coordinates.  The base is able to find the nearest data by coordinates, for which it suffices to specify the source coordinates and the distance to search in measures. <br><br>  Search example: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> queryList = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;IMongoQuery&gt; { Query.Near(<span class="hljs-string"><span class="hljs-string">"Coordinates"</span></span>, lng, lat, distanceInMeters, <span class="hljs-literal"><span class="hljs-literal">true</span></span>) ‚Ä¶    }; MongoCursor&lt;HighChartRegion&gt; result = GeoDataCollection .Find(Query.And(queryList))</code> </pre> <br><br>  <b>Web sockets (WebSockets), implementation of polling server</b> <br><br>  Since the system was designed for corporate use, it was not necessary to support all web browsers.  This allowed us to use the <a href="https://ru.wikipedia.org/wiki/WebSocket">WebSocket</a> technology without any problems.  The technology itself is not new, but has not yet received widespread use, and not all browsers are supported by it and there are not so many ready-made solutions for .net.  Of the most popular - <a href="http://www.supersocket.net/">Supersocket</a> , <a href="https://github.com/statianzo/Fleck">Fleck</a> , <a href="http://xsockets.net/">XSockets</a> , <a href="http://www.asp.net/signalr">SignalR</a> , and each has its advantages and disadvantages.  Alternatively, you can use the <a href="https://msdn.microsoft.com/ru-ru/library/system.net.websockets.websocket%2528v%3Dvs.110%2529.aspx">WebSocket-</a> class from Microsoft to write your socket server. <br><br>  When choosing, you should pay attention to the possibility of working under the IIS process, as well as to support secure connection (WSS).  For example, SignalR requires IIS8, and XSockets is a paid enterprise solution. <br><br>  The idea of ‚Äã‚Äãuse is that instead of periodic requests to the server, respectively, initialization of new and new requests, a connection is established and data is exchanged between the client and the server.  In addition, the use of web sockets allows us to solve the problem when several clients often request the same data, thereby loading the server in complex calculations. <br>  In our case, we used a Fleck socket server, on the basis of which we wrote a wrapper - PollerWebSocketServer.  PollerWebSocketServer can handle incoming requests, as well as register subscribers and send push notifications. <br><br>  For the client to communicate with the server, its own communication protocol was developed so that the client could request various data, subscribe to receive data or unsubscribe.  The WebSocketMessage class handling the request from the client looks like this: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">WebSocketMessage</span></span> : <span class="hljs-title"><span class="hljs-title">RequestFilters</span></span>, <span class="hljs-title"><span class="hljs-title">IWebSocketMessage</span></span> { [Json(<span class="hljs-string"><span class="hljs-string">"id"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [JsonSkip] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Guid SocketId { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [Json(<span class="hljs-string"><span class="hljs-string">"command"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> WebSocketCommand Command { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [Json(<span class="hljs-string"><span class="hljs-string">"type"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> WebSocketCommandType CommandType { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [JsonSkip] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Hash { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> GetHash(); } }</code> </pre><br><br>  Hash is created based on the requested data (filters) and is used to track unique requests.  A group of such subscribers is sent once generated data. <br>  In response to such a request, the ID and the command of the request, the time of the next push notification and data are returned. <br><br>  The initialization of the PollerWebSocketServer is as follows: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> wss = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebSocketServer(Settings.SocketPort, Settings.Certificate != <span class="hljs-literal"><span class="hljs-literal">null</span></span>); wss.SupportedSubProtocols = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] { <span class="hljs-string"><span class="hljs-string">"map"</span></span>, <span class="hljs-string"><span class="hljs-string">"stats"</span></span>}; wss.ServerSettings = SettingsProvider.WebSockerServerSettings; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (SettingsProvider.Certificate != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) wss.Certificate = SettingsProvider.Certificate; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dataProvider = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebSocketJsonDataProvider(); _pollerWebSocketServer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PollerWebSocketServer&lt;WebSocketMessage&gt;(wss, dataProvider, OnProblemDetected);</code> </pre><br>  where OnProblemDetected is a handler that is called if the server has detected a problem situation. <br><br>  To start the server, you need to set delegates for three events: <br><br><pre> <code class="cs hljs">_webSocketServer.Start(socket =&gt; { socket.OnOpen = () =&gt; OpenSocket(socket); socket.OnClose = () =&gt; CloseSocket(socket); socket.OnMessage = message =&gt; ProcessSocketMessage(socket, message); });</code> </pre><br>  Of interest is the handler WebSocketMessage: <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProcessSocketMessage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IWebSocketConnection socket, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsValidOrigin(socket)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; TM wsMessage; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { wsMessage = message.FromJsonStr&lt;TM&gt;(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { ReturnError(socket, ex, <span class="hljs-string"><span class="hljs-string">"Fail to parse socket message"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (wsMessage == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { ReturnError(socket, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"Message is null"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (wsMessage.CommandType) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> WebSocketCommandType.Subscribe: wsMessage.SocketId = socket.ConnectionInfo.Id; _subscriptions.AddOrUpdate(wsMessage.Id ?? Guid.NewGuid().ToString(<span class="hljs-string"><span class="hljs-string">"N"</span></span>), wsMessage, (guid, connection) =&gt; wsMessage); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> WebSocketCommandType.Unsubscribe: Unsubscribe(wsMessage); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = _webSocketJsonDataProvider.GetJsonData(wsMessage); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> response = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebSocketResponseMessage(wsMessage.Id, wsMessage.Command, data, NextPollingInSec); socket.Send(response.JsonData); }</code> </pre><br>  Processing the mailing event essentially groups all subscribers by Hash, for each unique request it receives data from the JSON provider and sends it to subscribers: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnPollingTimerExecution</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> hashGroupedSubs = _subscriptions.GroupBy(s =&gt; s.Value.Hash); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> hashGroup <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> hashGroupedSubs) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> requestMessage = hashGroup.First().Value; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = _webSocketJsonDataProvider.GetJsonData(requestMessage); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> msg <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> hashGroup) { IWebSocketConnection socket; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_activeSockets.TryGetValue(msg.Value.SocketId, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> socket)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> response = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebSocketResponseMessage(msg.Value.Id, requestMessage.Command, data, NextPollingInSec); socket.Send(response.JsonData); } } } }</code> </pre><br><br>  WebSocket-north can be launched either in a separate application or service, or under a web service.  Note that the protocol works on top of the TCP protocol and the instance needs a separate port.  When running under a web service, you need to pay attention to the features of restarting the web service (disable restarting with overlapping for the pool) and correctly handle restarting the WebSocket server or synchronization between processes. <br><br>  As mentioned above, each message has a specific format. <br>  Example: <br><pre> <code class="cs hljs">{ id: ‚ÄúmessageId‚Äù, command: <span class="hljs-number"><span class="hljs-number">100</span></span>, type: <span class="hljs-number"><span class="hljs-number">1</span></span>, nextDataTime: <span class="hljs-number"><span class="hljs-number">30</span></span>, data: ‚Äú...‚Äù, ... }.</code> </pre><br>  Consider more: <br>  ‚óè command is an internal command to perform an action or get data.  It is sent both from the client and from the server; <br>  ‚óè id - a unique identifier of the message that is sent from the client and the server always sends it back when responding.  This is a very important part, as you can easily identify each message and not be afraid that a request with a specific command will cause a ‚Äúforeign‚Äù handler.  Thus, there may be several subscribers to the same team, and they will not conflict; <br>  ‚óè type - type of request.  It can take 3 values: 0 - executed once, 1 - subscribe to receive updated data, 2 - unsubscribe from receiving data (transmitted from the client); <br>  ‚óè nextDataTime - time until the next data update.  Used to display the countdown in the form of a progress bar.  It comes only from the server; <br>  ‚óè data - data specific to each command; <br>  ‚óè Additional fields, such as countryCode, appIds, fromTime, toTime etc, which act as filters.  Sent from the client. <br><br>  <b>AngularJS and the use of the Highcharts library on the client side</b> <br><br>  To work with web sockets on the client side, the WS service is used, a wrapper over the standard <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket">WebSocket-</a> class. <br>  The connection is established at the start of the application.  At the same time, the service subscribes to standard web socket events (open, close, message, error) and then reacts to them, implementing its own logic of operation.  Also, when the application starts, the dictionaries needed for further work (countries, regions, etc.) are loaded. <br><br>  If the connection is broken, the service will automatically try to restore it with a certain timeout. <br>  The service provides 4 basic methods: connect, disconnect, createSubscriber and get.  If the functionality of the first two methods is clear from the names, then the last two will take a closer look.  The createSubscriber method allows you to create a subscriber object that can subscribe to receive data from a given command based on certain filters, unsubscribe from receiving data, and also change the set of filters. <br>  Call example: <br><br><pre> <code class="cs hljs"> WS.createSubscriber(command, filters, callback);</code> </pre><br><br>  The callback is executed when new data arrives (only data from the data field is passed to this function). <br>  It would be possible to return a promise, but since it cannot be resolved several times, this option is not suitable.  But you can use the notify method, which will be called when the data arrives.  Perhaps in the future we will try to use this approach. <br>  There is also an important nuance.  When you disconnect and successfully reconnect, the WS service will automatically re-subscribe all active subscribers. <br>  The get method allows you to get data once, emulating the get $ http method of the service, but within a socket connection.  Returns promise: <br><br>  WS.get (command, filters) .then (function (data) {...}); <br><br>  From the interesting moments on sockets on the client it is all. <br><br>  To display charts, we use the <a href="http://www.highcharts.com/">Highcharts</a> library and <a href="http://www.highcharts.com/products/highmaps">Highmaps</a> for cards.  A map of the world, as well as detailed maps of countries are used to display detailed information. <br>  Components for maps are wrapped in directives that display data. <br><br>  The loading of geoJSON data for maps is rendered into a separate service, the methods of which return promises. <br>  Call examples: <br><br><pre> <code class="cs hljs"> GeoJSON.getCountry(countryCode).then(function(data) { ... }); GeoJSON.getWorld(isHighRes).then(function(data) { ... });</code> </pre><br><br>  The service will automatically build a link to retrieve data and upload it.  Exceptions are also regulated here: for example, for France we use a more detailed map, the link for which differs from the standard scheme. <br><br>  There was a need to display on the map of individual countries a large number of points (1000 and more).  But rendering in this case is very slow, as the points are added to the DOM, and this is not always fast.  The amount of RAM used by the browser, in this case, also greatly increases, so temporarily abandoned the idea.  Perhaps to accelerate it is worth using canvas, but this imposes certain restrictions. <br><br>  <b>Brief system analysis</b> <br><br>  The tracker processes ~ 6‚Äì7 thousand requests per minute and ~ 14 thousand requests at peak load, with geodata being determined for each request.  The time of geodata determination is 2‚Äì8 milliseconds.  Data in MongoDB is stored cyclically for a month.  The service displays the status of downloads in real time with periodic updates.  In the event of mass errors, they are displayed on the map as an indication of the color of the country.  You can also view statistics in detail on areas and types of errors for a selected period of time and specified criteria.  When abnormalities occur, notifications are automatically sent and a warning is displayed. <br><br>  How it looks on the client: <br><br><img src="https://habrastorage.org/files/c66/5f0/6d9/c665f06d91ed433f946904742348a3f4.png"><br><br><img src="https://habrastorage.org/files/20e/2e9/625/20e2e96254b648f4b987873e5dff5af7.png"><br><br><img src="https://habrastorage.org/files/70f/1f4/bdf/70f1f4bdfbc148358e482dd174e29a6e.png"></div><p>Source: <a href="https://habr.com/ru/post/267729/">https://habr.com/ru/post/267729/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267719/index.html">Algorithms in the real world</a></li>
<li><a href="../267721/index.html">Apache vs Nginx: a practical look</a></li>
<li><a href="../267723/index.html">Bots in the city of Innopolis</a></li>
<li><a href="../267725/index.html">Card Design: How and Why</a></li>
<li><a href="../267727/index.html">PHP: programming culture</a></li>
<li><a href="../267731/index.html">13 basic principles of game design. Direction and behavior</a></li>
<li><a href="../267733/index.html">Greenplum db</a></li>
<li><a href="../267735/index.html">Android Data Binding in RecyclerView</a></li>
<li><a href="../267737/index.html">ICQuery is a fictional program that communicates with the user and performs tasks described in the natural language of communication.</a></li>
<li><a href="../267743/index.html">Planning resources for Veeam Backup & Replication 8.0: calculating the required place in the repository</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IPTV head station</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! 

 I want to tell you about the device IPTV headend on the example of our provider. 
 I hope that after reading the article you will have a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IPTV head station</h1><div class="post__text post__text-html js-mediator-article">  Good day! <br><br>  I want to tell you about the device IPTV headend on the example of our provider. <br>  I hope that after reading the article you will have a good understanding of the work of the IPTV headend. <br><br><img src="https://habrastorage.org/storage2/92b/c16/e6a/92bc16e6a9e89c7dfffd846b2bb0a49f.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, what we have: <br><br><ul><li>  7 satellite dishes on 11 satellites </li><li>  Multiswitches in the right amount </li><li>  ~ 80 satellite receivers </li><li>  Video Gateways (Streamers) </li><li>  Middleware Servers </li><li>  Video server (VOD, NPVR) </li><li>  Streaming server encryption </li><li>  Monitoring system </li></ul><br><br><img src="https://habrastorage.org/storage2/aeb/42d/16d/aeb42d16d208e3c565925fde0de4675e.jpg"><br><br><a name="habracut"></a><br><br><h4>  Roof </h4><br><br><img src="http://clickscreen.ru/i/0f5c0868726aa9a6183c54877ec3.png" alt="image"><br><br>  Well, everything is quite simple.  Antennas are installed on the roof, tuned to the main satellites (Yamal, ABS, HotBird, Astra, W4 ... there are a total of 11).  By all the rules, the system is grounded, securely bolted.  From the roof go RF-cables to the hardware. <br><br><h4>  Server </h4><br><br><h5>  Multiswitch </h5><br><br><img src="https://habrastorage.org/storage2/171/682/4f9/1716824f92799cc048197facd3be827d.jpg"><br><br>  The cables from the roof are connected to the multiswitch inputs, the task of which is to switch (distribute) signals of different polarization from the antenna systems directly to the receivers. <br><br><h5>  Receivers </h5><br><br><img src="https://habrastorage.org/storage2/9b2/b54/74e/9b2b5474e49d332f4d41b8631a4b796f.jpg"><br><img src="http://clickscreen.ru/i/e3aebdd31499e6e7f1ad9f766f81.png" alt="image"><br><br>  We use professional receivers of the company <a href="http://www.harmonicinc.com/pr_IRD.cfm">Harmonic</a> <br><br>  Receivers are configured on the necessary transponders, decode the signal, if it is encrypted. <br>  Most professional receivers work with the front end of DVB-S and can decode only 2 TV channels at a time. <br><br>  If we take more than two encrypted TV channels from one transponder, then we connect receivers in a chain using ASI outputs / inputs.  Usually, no more than 1-2 receivers are connected through the chain.  Also, receivers filter out unnecessary TV channels to reduce the load on the video gateway. <br><br><h5>  Video gateway </h5><br><br>  Next, using ASI or IP (unicast), we send the filtered and decrypted stream to the video gateway. <br><br>  The video gateway receives streams from receivers via ASI or IP (it has a total of 16 ASI ports).  It converts the received streams into multicast and broadcasts it to the network. <br><br><h6>  How the video gate works </h6><br>  The gateway has: <br><ul><li>  physical ASI ports; it takes streams from them. </li><li>  physical Ethernet ports (for management, input streams, output streams). </li><li>  virtual IP ports (for streaming, for streaming) </li></ul><br><br>  To release a stream, it is necessary to ‚Äúcross‚Äù the service from the input port with the virtual IP port. <br><br>  These are the flows that the gateway sees, for example, on the first ASI input: <br><img src="http://clickscreen.ru/i/3344bf5f96d5b39a0d6e8d214837.png" alt="image"><br><br>  For example, to put the Kinopokaz HD channel into the network, you need to create a virtual port with the specified IP address and port, and then ‚Äúcross-link‚Äù the channel to the created virtual port. <br><br>  As a result, we will see that a channel has appeared on the virtual IP output: <br><img src="http://clickscreen.ru/i/7ed8ef873fded09238778ea59cd8.png" alt="image"><br><br>  Well, the stream is already delivered to subscribers using the IGMP router.  But not everything is so easy because the channels are encrypted. <br><br><h5>  Encryption server </h5><br><br>  Yes, Verimatrix. <br>  Like the vast number of IPTV providers, we use this system.  Paid, closed. <br>  By the way, this system is approved by all the largest film studios in the world.  Therefore, we have no problems in concluding contracts with copyright holders of video content. <br>  Using the ordered servers, we encrypt the stream by specifying the IP address of the input stream and the IP address of the output stream in the web admin.  Servers encrypt TV channels in realtime. <br><br><img src="https://habrastorage.org/storage2/ad5/14c/df6/ad514cdf60583917d165b030a45a6014.jpg"><br><br><h5>  Server video </h5><br><br>  In total, we have 2 servers, one is engaged in nPVR, the other is VOD.  They have powerful network storage, allowing you to give content to hundreds of users simultaneously.  We use the platform - Espial MediaBase. <br><br>  The first server records the TV programs selected by subscribers on the allowed TV channels.  Therefore, the subscriber can press the pause button on his remote at any time, move to the kitchen and make popcorn, return to the TV and continue watching from the same place.  Or program the recording of the program in VCR mode.  And then watch it at a convenient time. <br><br>  The second server contains a movie library for ‚Äúvideo on demand‚Äù.  Custom STBs display a video stream with a frequency of 25 Hz and an aspect ratio for a 16x9 picture, so all movies are converted to H.264 1080i / 50 Hz before being added to the video server.  Also formed Dolby Digital 5.1 soundtrack. <br><br><h5>  Middleware </h5><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c54/709/cc7/c54709cc731ff5600787b4c7b9a68c53.jpg" alt="image"><br><br>  We have the most loaded servers. <br>  To ensure fault tolerance, the entire software and hardware platform, the system is built according to a cluster scheme.  Two powerful Middleware servers work, load balancing is configured.  Under the database we use a separate server MSSQL. <br><br>  Middleware is an intermediate software connecting the interface of the subscriber STB with the rest of the complex. <br><br>  In the base of Middleware tariff plans are formed. <br>  All consoles are activated through the Middleware server to gain access to the encrypted content. <br>  Middleware controls the purchase of movies. <br>  TV program gives subscribers the same Middleware. <br>  Reading tweets from the TV also allows Middleware! <br>  News feeds, Yandex.Probki, the status of applications on the website Gosuslugi - also handles Middleware. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/266/062/8e1/2660628e13ed8d2b9c2cfa6efecb26e2.jpg" alt="image"><br><br><h5>  Monitoring </h5><br><br><img src="http://clickscreen.ru/i/38a2acd7a4259920bb23e5d606e3.png" alt="image"><br><br>  Traffic flow monitoring is handled by <a href="http://www.bridgetech.tv/product_vb220.php">Bridgetech's VB220</a> . <br><br>  The levels of satellite signals are also monitored using Zabbix, which takes data via SNMP from receivers. <br><br><img src="http://clickscreen.ru/i/c42b413bd83b7a95f309aeef6881.png" alt="image"><br><br>  If the channel stops being decoded, the SNMP receiver reports this to the NOC service, which in turn informs the administrator on duty. <br><br>  In addition to hardware monitoring, on-duty operators regularly visually watch all TV channels, checking the quality of the image and sound. <br><br><h4>  Total </h4><br><br>  Build everything into a logical chain: <br><br>  Satellite antenna -&gt; receiver -&gt; video gateway -&gt; encryption server -&gt; provider‚Äôs IP network -&gt; Subscriber‚Äôs Set-Top-Box -&gt; TV. <br><br>  And vice versa: <br><br>  Subscriber -&gt; Set-Top-Box -&gt; Middleware + IGMP Query. <br><br>  This concludes a brief description of the main components of the head station. <br>  The article just returned from draft - removed it to correct inaccuracies and add real photos. </div><p>Source: <a href="https://habr.com/ru/post/141694/">https://habr.com/ru/post/141694/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../141688/index.html">Dropbox chat</a></li>
<li><a href="../141690/index.html">Load Testing with Visual Studio 2010</a></li>
<li><a href="../141691/index.html">Practical use of a thermistor with Arduino</a></li>
<li><a href="../141692/index.html">What part of your life does a computer take?</a></li>
<li><a href="../141693/index.html">EnerGenie EG-PMS-LAN Surge Protector with LAN</a></li>
<li><a href="../141695/index.html">Yii discrete projects based on a common core</a></li>
<li><a href="../141696/index.html">"Let's cut off Susanin's foot?" (C)</a></li>
<li><a href="../141697/index.html">Will interstellar travel become a reality? Orientation problem</a></li>
<li><a href="../141698/index.html">Shellcodes, exploits ... Tulsa under Win</a></li>
<li><a href="../141699/index.html">Identify all the classes that the Java application uses.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>VCloud Tools: IT GRAD Experience</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The essence of cloud services is that the user is given a choice of server capacities, such as a processor, memory, amount of disk space, type of netw...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>VCloud Tools: IT GRAD Experience</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/company/it-grad/blog/279225/"><img src="https://habrastorage.org/files/790/72a/81d/79072a81d61347788cb3c46bfa6b4bfb.png" width="700"></a> <br><br>  The essence of cloud services is that the user is given a choice of server capacities, such as a processor, memory, amount of disk space, type of network adapter and others.  Cloud computing itself can be divided into three levels, namely: <br><br><ul><li>  Infrastructure as a Service (IaaS); </li><li>  Platform as a Service (PaaS); </li><li>  Software as a Service (SaaS). </li></ul><br>  For providing Infrastructure as a service (IaaS), <a href="https://habrahabr.ru/company/it-grad/blog/277971/">the</a> vCloud <a href="https://habrahabr.ru/company/it-grad/blog/277971/">family</a> is responsible.  The two main components of vCloud are VMware vSphere and vCloud Director.  VMware vSphere is the virtualization platform itself, where cloud infrastructure services are deployed, and vCloud Director is the cloud infrastructure management center with which the administrator manages these services. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Using VMware vCloud Director, you can create and manage virtual machines, migrate them from another cloud, flexibly manage access rights to a pool of virtual resources, create VPN connections, configure load balancing between virtual machines and much more. <br><br>  However, often the company-customer, transferring its IT infrastructure to the cloud, gets to the existing functionality a number of tools, the existence and functionality of which is not always known.  An example would be VMware vShield Edge, part of VMware vCloud Director. <br><br>  For a start, it is worth noting that VMware vShield Edge is an integral part of any cloud infrastructure built on VMware vCloud.  As a security product, vShield Edge acts as a network gateway.  Depending on custom policies, vShield Edge can allow or deny certain connections, monitor VPN sessions, perform network address translation, inspect data by source or destination port, and load balancing. <br><br>  In other words, VMware vShield Edge allows you to configure services such as Stateful Firewall, VPN, DHCP, NAT, Web Load Balancing, etc. For example, here is one of the real situations: you need to combine several remote sites into a single routed network.  To do this, you need to configure the VPN-tunnel, and this will help VMware vShield Edge. <br><br>  The scenario is as follows: client companies need access to <a href="https://habrahabr.ru/company/it-grad/blog/276807/">virtual machines</a> in the IT-GRAD cloud using Site-to-Site VPN.  Each site has a VMware EDGE server with direct Internet access. <br><br><img src="https://habrastorage.org/files/1a6/eac/171/1a6eac17118a44c38f47d44d93568aec.jpg" width="700"><br><br>  Site A is a client company: it uses the subnet 10.64.20.0/24. <br>  Site B is the site of IT-GRAD company: subnet 172.16.16.0/24. <br><br>  In order to raise the tunnel, we will use the vCloud Director web console, which is accessible when the IaaS provider is connected to the cloud.  In the settings, activate the VPN, set the name of the tunnel and its description.  Then we indicate the option of connecting to the network (in our case, remote), set the subnets to which you need to organize a tunnel, and write the IP addresses of the EDGE interfaces. <br><br>  An important point when configuring Site-to-Site VPN is the choice of encryption protocol.  Recall that to ensure secure communication in private virtual networks, the IPSec protocol suite is used. <br><br>  IPSec allows authentication and provides integrity checking and encryption of IP packets.  The IKE protocol included in it is the link that unites all IPSec components into a single system, and implements the initial authentication of the parties and the exchange of their common keys. <br><br>  Installation and maintenance of a VPN tunnel takes place in two stages (in two phases of IKE operation).  IKE first creates a <a href="https://habrahabr.ru/company/it-grad/blog/277977/">secure</a> channel between the two nodes, called the IKE Security Association (IKE SA), and the first phase begins. <br><br>  Here IKE works in the main mode - these are three bilateral exchanges between the sender and receiver.  During the first exchange, the encryption algorithms and hashing functions are matched by matching the IKE SA of each node.  During the second exchange, the Deffie-Hellman algorithm is used when the parties pass each other a common secret key. <br><br>  Also at this stage, the nodes check each other by sending and confirming a sequence of pseudo-random numbers.  During the third exchange on the encrypted IP address, the identity of the opposite side is verified. <br><br>  Then the second phase begins, during which key data is generated, and the nodes agree on the policy used.  This mode is set only after the first stage, when all packets of the second phase are encrypted.  If the second phase is completed correctly, we can assume that the tunnel is established. <br><br>  This is just one of the additional features of VMware vShield Edge.  In addition, vShield Edge allows you to ‚Äúraise‚Äù the software firewall, which, like any other, checks the traffic and, depending on the parameters set in the corresponding rules, blocks or allows its transmission.  The order of applying the rules can be changed by simply dragging the corresponding rule with the mouse in the vCloud Director console. <br><br>  The vShield Edge feature also integrates the dynamic node configuration protocol functionality.  It allows you to automate the mechanism for assigning IP addresses to virtual machines connected to virtual organization networks.  You can configure and manage ranges of IP addresses directly through the vCloud Director console. <br><br>  Another worth noting is the DHCP service, which seriously simplifies the process of assigning IP addresses and minimizes administrative costs and errors.  In the DHCP console, it is possible to create a so-called address pool, which is a container with IP addresses stored in it for issuing to virtual machines. <br><br>  IP addresses are issued for a certain period: there are two parameters in the vShield Edge settings: the default lease time is 3600 seconds and the maximum time is 7200 seconds by default.  If the IP address was leased to a virtual machine, it is considered busy and cannot be assigned to another node until the lease expires. <br><br>  All these functions are managed from a single vCloud Director console.  Detailed guides on configuring Site-to-Site IPsec VPN, Firewall, NAT, DHCP, static routing and network load balancing can be found in our blog. <br><br>  Another useful VMware product is VMware vSphere Power CLI - this tool automates the routine tasks of an administrator when working with ESX servers and virtual machines.  There are a lot of examples of using Power CLI: from searching for a user who deleted a virtual machine to full-featured diagnostic programs for VMware vSphere virtual infrastructure.  For example, it can be used to track processor performance problems. <br><br>  One of the important performance parameters is the intensity of consumption of processor resources.  Suppose that in the vSphere environment too many virtual machines are running with high-load applications running on them ‚Äî all of which can lead to insufficient processor resources.  Sometimes the reason for this shortage is another point, connected, for example, with inefficient use or non-optimal configuration of virtual machines. <br><br>  And so, the lack of CPU resources leads to serious performance problems and affects the operation of business-critical services.  For example, a high Co-stoptime indicator indicates the presence of more vCPU than necessary, and this often causes additional resource consumption and reduces the performance of the virtual machine. <br><br>  The Guest CPU Saturation parameter indicates the CPU load of the virtual machine: if the virtual machine application uses 90% or more CPU resources, there is a performance problem.  These and many other parameters VMware vSphere Power CLI allows you to track. <br><br>  When investigating problems with CPU performance, you should pay attention to the following counters: <br><br><ul><li>  Demand - the number of virtual machine CPUs required for operation. </li><li>  Ready - an indicator of the time during which the virtual machine is ready to start, but cannot due to lack of physical resources. </li><li>  Usage - the number of virtual machine processors allowed for use at the moment. </li></ul><br><img src="https://habrastorage.org/files/e79/d56/6d5/e79d566d511c45708546ed5a057df5cd.png" width="700"><br><br>  The image above shows how much CPU resources are required to run the virtual machine and how much is actually used.  In this particular case, it is required (Demand) significantly more than is used (Use). <br><br>  Also pay attention to the Ready Time indicator, equal to 9977 ms - this is another indicator that you should pay attention to when looking for performance problems.  If this value is greater than 10%, then there is a high probability of performance problems.  To convert values ‚Äã‚Äãfrom milliseconds to percents, you can use the following formula: <br><br><img src="https://habrastorage.org/files/9c0/bde/f41/9c0bdef419494fcdaa241f71d57f7c8b.png" width="500"><br><br>  It is important to remember that setting up virtual machines with a large number of virtual CPUs can lead to an increase in resource utilization, potentially affecting the performance of heavily loaded systems.  And even if the guest operating system does not use all the dedicated virtual processors, such a machine will consume the host resources at the physical level.  Detailed guidance on monitoring processor performance can be found in our corporate blog ( <a href="http://goo.gl/YAOTwR">1</a> , <a href="http://goo.gl/vK7Iiv">2</a> ). <br><br>  In this article, I would like to touch on another tool that has (albeit indirectly) related to the vCloud Director.  It's about Veeam Backup.  With it, the administrator can make <a href="https://habrahabr.ru/company/it-grad/blog/279223/">backup copies of</a> metadata and attributes of virtual services and restore virtual services and virtual machines directly in vCD. <br><br>  The topic of backup was, is and will be relevant at all times.  Every year, the amount of data stored on both physical and cloud platforms of various companies is constantly increasing, and this drastically changes the appearance of the backup systems market. <br><br>  Veeam Cloud Connect offers a fast and reliable way to transfer backups to remote cloud sites, as well as data recovery.  This decision is subject to the so-called rule "3-2-1", according to which to ensure reliable data <a href="http://iaas-blog.it-grad.ru/arenda-netapp-ontap-storage-virtual-machine-svm-virtualnaya-shd-v-oblake-iaas/">storage</a> , these conditions must be met: <br><br><ul><li>  Have three backups; </li><li>  Use two types of storage media; </li><li>  Store one copy remotely. </li></ul><br>  Veeam Cloud Connect technology provides reliable storage of backups at remote sites of cloud service providers, comprehensive monitoring with guaranteed ability to recover data stored at remote sites directly from the backup console, the ability to use backup archiving tasks using built-in WAN acceleration and long-term policies storage. <br><br>  To start using the benefits of Veeam Cloud Connect, you first need to decide on the cloud service provider Veeam, whose platform will be used as a reliable backup storage of virtual machines - such providers have the competence of <a href="http://www.it-grad.ru/kompaniya/novosti/2014/my-poluchili-novyy-partnerskiy-status-veeam-cloud-provider-gold/">Veeam Cloud Provider</a> (VCP).  In this case, any customer who has opted for backup to the cloud will need a subscription to the services from the cloud provider. <br><br>  The second stage is the client-side deployment of Veeam Backup &amp; Replication, infrastructure planning and configuration, selection and connection to remote sites of Veeam cloud providers, and so on.  You can see the whole process in detail in our <a href="http://iaas-blog.it-grad.ru/veeam-cloud-connect-rezervnoe-kopirovanie-v-oblako/">blog</a> . </div><p>Source: <a href="https://habr.com/ru/post/279225/">https://habr.com/ru/post/279225/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../279213/index.html">Pandasql vs Pandas for solving data analysis tasks</a></li>
<li><a href="../279215/index.html">We study the source tree of Windows 10: from telemetry to open source</a></li>
<li><a href="../279219/index.html">Information Security Risks for Web Applications</a></li>
<li><a href="../279221/index.html">One interesting bug in Lucene.Net</a></li>
<li><a href="../279223/index.html">Disaster-resistant IaaS, as well as replication and backups</a></li>
<li><a href="../279227/index.html">PCI DSS Certification: What it is and what it is eaten with</a></li>
<li><a href="../279229/index.html">Few of the containers</a></li>
<li><a href="../279231/index.html">The story of the development of Cosmos on Unity</a></li>
<li><a href="../279233/index.html">Unlimited nesting and URL section tree</a></li>
<li><a href="../279237/index.html">Stack of mean. Usage example</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
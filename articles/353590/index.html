<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Control of complexity and architecture of UDF</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Complexity is the main enemy of the developer. There is such a hypothesis, although I would attribute it to the axioms that the complexity of any soft...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Control of complexity and architecture of UDF</h1><div class="post__text post__text-html js-mediator-article"><img align="right" src="https://habrastorage.org/getpro/habr/post_images/46f/bf2/27c/46fbf227cf367c52d25c5c10f8f52787.png"><br>  Complexity is the main enemy of the developer.  There is such a hypothesis, although I would attribute it to the axioms that the complexity of any software product over time, in the process of adding a new functionality, inevitably grows.  It grows until it reaches the threshold at which any change is guaranteed, i.e.  with a probability close to 100%, will introduce an error.  There is also an addition to this hypothesis - if such a project is continued and further supported, then sooner or later it will reach such a level of complexity that it will be impossible to make the necessary change at all.  It is impossible to come up with a solution that does not contain any crutches, notorious anti-patterns. <br><a name="habracut"></a><br><h4>  Source of difficulty </h4><br>  The complexity is inevitably introduced by the input requirements, it is impossible to avoid this kind of complexity.  For example, in any accounting program you have a task to make payments to a person, and among the calculation of these payments there is such a requirement that a person who has worked in a company for more than a certain period will receive an additional amount for length of service.  Application code will inevitably contain something like this: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(qualifiedForExtraPayment(employee)) { calculateThatExtraPayment(...) }</code> </pre> <br>  This if is the element of complexity introduced into the application by a business requirement. <br>  But there is a complexity that is not defined by the requirements, and is contributed directly by the developer.  Most of all, this ‚Äúartificial‚Äù complexity comes from some particular understanding of the <a href="https://ru.wikipedia.org/wiki/Don%25E2%2580%2599t_repeat_yourself">DRY</a> principle by developers. <br><br>  For example, in the already mentioned hypothetical accounting program you need to make two almost identical pages, on both you need to count the payments to the person, and show the detailed information on these payments.  But one page is purely informational, to see how many people will receive money, and the second page is already executive, with a third action present - to make the actual money transfer. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The example is of course fictional, but I regularly come across such things in the code of other developers. <br><br>  How to solve it. <br><br>  On the first page, the pseudocode will be <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> payment = calculatePayment(employee); displayPayment(payment);</code> </pre><br>  On the second page <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> payment = calculatePayment(employee); displayPayment(payment); proceedWithPayment(payment);</code> </pre><br>  How it is sometimes decided. <br><br>  Instead of creating the second method, in the first one an additional parameter is entered. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> payment = calculatePayment(employee); displayPayment(payment); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(isOnlyInformation) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } proceedWithPayment(payment);</code> </pre><br>  And here we see another if, another element of complexity in our application.  This item of complexity does not come from the requirements, but comes from the way the problem is solved by the developer. <br>  Where the code is already sufficiently decomposed, it turns out that the two methods ‚Äústuck together‚Äù into one due to the fact that they only matched two lines.  But initially, at the stage when the code is first written on the forehead, the implementation of these methods (calculatePayment and displayPayment) may not yet be rendered into separate methods, but written directly in the body of this, and the picture looks like the two methods are the same, say , 100 first lines.  In this case, here is such a ‚Äúgetting rid of code duplication‚Äù, it may even seem like a good solution.  But this is obviously not the case.  In my last article about the <a href="https://habrahabr.ru/post/275939/">dry anti-pattern,</a> I have already given examples of how using the DRY principle carries complexity that you can avoid in your application.  With ways to write the same code, but without using a pattern, without adding complexity to the application that does not come from requirements. <br><br>  Thus, we come to the fact that in the hands of one developer, the complexity of the application grows linearly, in proportion to the complexity of the requirements, or at least tends to this, in the hands of another developer, the complexity grows exponentially. <br><br><h4>  Principle of sole responsibility </h4><br>  ‚ÄúEvenly distributed‚Äù complexity is not so harmful and dangerous, for all its inevitability, but it becomes a developer‚Äôs terrible dream when concentrated in one place.  If you have an if function, then you add a second branch, if there are two, and no matter if it is nested or not, then there will be at least 4 possible options for passing through the method, the third if will make 8. And if you have two separate , successfully decomposed, not affecting each other functions, in each of which there are 4 branches of execution, then each of them potentially needs to be written four tests, total 8. If it was not possible to decompose, and all this logic is in one method, then the tests you need to write 4 * 4 =&gt; 16, and each such test will be more difficult than tes  of the first eight.  The number and complexity of tests just the same and reflect the final complexity of the application, which, with the same number of elements of complexity, will more than double. <br><br>  The widely known principle of designing a code, hereinafter referred to as SRP, the first paragraph of the collection of SOLID principles, is aimed at combating such a heap of complexity.  And if the remaining letters of this abbreviation contain rules for the most part refer to object-oriented programming, then SRP is universal, and applies not only to any programming paradigm, but also to architectural solutions, but what can I say, and to other engineering fields too.  The principle, unfortunately, contains some understatement, it is not always clear, but how to determine right now the only responsibility for something or not.  For example, here is a god-class in a million lines, but it has the only responsibility - it manages the satellite.  He doesn't do anything else, is everything okay?  Obviously not.  The principle can be rephrased somewhat - if a certain element of your code, and this can be both a function, a class, and a whole layer of your application, is too much responsibility, it means you need to decompose, break into pieces.  And the fact that it is too much can be determined just by such signs - if the test for this is too complicated, contains many steps, or if you need a lot of tests, it means that there is too much responsibility and you need to decompose.  Sometimes this can be determined even without looking at the code.  According to the so-called  code-smell, if I go into a file with one class and I see 800 lines of code there, I don‚Äôt even need to read this code to see that this class has too much responsibility.  If there is a whole page of dependencies in the file (imports, yuzings, etc.), I do not need to scroll down and start reading this code in order to come to the same conclusion.  There are of course different tricks, IDE indulge citizens coders, collapsing imports "under the plus sign", there are tricks of the city of coders themselves who put the widescreen monitor vertically.  Again, I don‚Äôt even need to read the code of such a developer in order to understand that I‚Äôll probably not like it. <br><br>  But decomposition does not have to reach the absolute, ‚Äúthe other end of this stick‚Äù - a million methods, each with one operand may be no better than one method with a million operands.  Again, when excessive decomposition inevitably arises the first of those two playful "most difficult tasks in programming" - the naming of functions and cache invalidation.  But before you get to this, the average developer must first learn how to decompose it at least minimally, at least slightly away from the end, with a class of 800 lines. <br><br>  By the way, there is one more such jokingly-philosophical thought - a class, as a concept, carries in itself too much responsibility - behavior and state.  It can be divided into two entities - functions for behavior and ‚Äúplain‚Äù objects (POJO, POCO, etc., or structures in C) for the state.  Hence, the OOP paradigm is untenable.  Live with it. <br><br><h4>  Architecture as a struggle with complexity </h4><br>  As I have already said, complexity, like multiplication of complexity, is not specific to programming; they exist in all aspects of life.  And the solution to this problem was proposed by Caesar - divide and conquer.  The two problems linked with each other are more difficult to defeat than both of these problems one by one, as well as the more difficult to defeat the two barbarian tribes united to fight the Romans.  If, however, they are somehow separated from each other, then defeating one tribe separately, then the other is much easier.  At a low level, when writing already specific code, this is decomposition and SRP.  At a high level, at the design level of the application, architectural solutions serve this. <br><br>  From here on, I concentrate on UI / frontend specificity. <br><br>  For the development of applications containing a UI, architectural solutions such as MVC, MVP, MVVM have long been used.  All these solutions have two common features, the first - M, "model".  They even give it some kind of definition, I will manage here with such a simplification - the rest of the program.  The second is V, "view" or view.  This layer is separated from the rest of the application, the sole responsibility of which is a visual representation of the data coming from the model.  These architectures differ in the way M and V communicate with each other.  I will not consider them, of course, I will only pay attention once again that all the forces spent on developing these architectures were directed at separating one problem from another, and, as you might guess, to reduce the complexity of the application. <br><br>  And, saying that the visual presentation is the sole responsibility of this layer, I mean the fundamental principle of these architectures - there should be no logic in the presentation layer.  Totally.  It is for this that these architectures are conceived.  And if we talk about the MVC architecture, then there was still such a term ‚Äúthin controller‚Äù.  Using this architecture, people came to the conclusion that the logic controller should not contain either.  Totally.  For logic, this will be the second responsibility of this layer, and we must strive to ensure that it is one. <br><br><h2>  Unidirectional Data Flow Architecture </h2><br><h4>  Motivation </h4><br>  The purpose of this architecture, like the goal of the previously mentioned architectures, is exactly the same - reducing the complexity of the application, by separating the problems between themselves, and building a logical barrier between them.  The advantage of this architecture, why it should be preferred to other architectures in the following.  Applications are not limited to one ‚Äúview‚Äù and one ‚Äúmodel‚Äù, in any application you will have several.  And some kind of connection between them should be.  As an example, I will take the following - you need to calculate some amount on the table.  In one view, a person enters data in the table, another model subscribes to this data, calculates the amount, tells his view what needs to be updated.  Further, the example is expanded by the fact that then a third model is signed for this amount, in which you need to make the ‚ÄúApply‚Äù button active.  And sometimes the developer may be confused that this is the last action - the responsibility of the presentation, and we can see in the markup something like this: <code>&lt;div *ngIf="otherModel.sumOfItems === 100"&gt;</code> . <br><br>  This is already a mistake, the comparison of two numbers is already logic, which the model should be in charge of strictly, the markup should operate with flags strictly counted for it - <br>  <code>&lt;div *ngIf="myModel.canProceed"&gt;</code> . <br><br>  In particularly neglected cases, it is in the view that this connection is written between the two models, the data from the foreign model is checked, and the method is called that carries side effects in its model.  In any case, between the models appears a graph of the distribution of changes. <br><br><img src="https://habrastorage.org/webt/u0/l9/6h/u0l96huudyprh4i3ybd_tzrhh3s.png"><br><br>  Sooner or later, this graph becomes uncontrollable and, making changes, it is not easy for the developer to track what consequences this will incur in the side-effects occurring lower in the graph.  In the Facebook presentation, it was called downstream effects, this is not a term.  Also, another developer trying to fix an error arising lower in the graph will have difficulty in tracking the root-cause of this problem, lying one or even several steps higher in this graph.  In some places, this graph can get stuck in cycles, and the condition for exiting this cycle can be broken by a harmless change at a completely different point of the graph, as a result, your application hangs and you cannot understand why.  It is easy to see that the distribution graph of changes does not come from customer requirements.  They only dictate the sequential actions to be performed, and the fact that these actions are scattered throughout the code as {substitute the necessary epithet}, and subscriptions, event throws, etc. are inserted between them.  This is on the conscience of the developer. <br><br>  A little more about this can be found in the <a href="https://redux.js.org/introduction/motivation">motivation of Redux</a> . <br>  The architecture of the UDF is a conveyor, on which two principal limitations are imposed 1) the next stage of the conveyor has no right to influence the previous one, or the results of its execution.  2) "Looping" of the pipeline can only produce input from the user.  Hence the name of the architecture - the application itself moves data only in one direction, towards the user, and only external influence can go in the opposite direction to this main stream. <br><br>  The main stages in the pipeline two, the first is responsible for the state, the second for the display.  In some ways, this is similar to the model and representation in the above-mentioned architectures, the difference as well as between those architectures - in the interaction of the model with the representation.  And in addition to this in the interaction of models with each other.  The entire state of the application is concentrated in a certain stor, and when some external event occurs, such as user input, the entire state change from point A (to external stimulus) to point B (after stimulus) should occur in one action.  That is, in the same script above, the code will look something like this, using the redux reducer as an example: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">userInputHappened</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">prev, input</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> table = updateRow(prev.table, input); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> total = calculateTotal(prev.total, table); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> canProceed = determineCanProceed(prev.canProceed, total); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...prev, table, total, canProceed }; }</code> </pre><br>  Here is illustrated the key principle, the main difference from the usual construction of logic.  There are no subscriptions to one another, no abandoned events between two successive operations.  All actions that need to be performed on a given external stimulus must be written in sequence.  And when making changes to such a code, all the consequences of changes are foreseeable.  And, as a result, this artificially introduced complexity is minimized. <br><br><h4>  Redux </h4><br>  Initially, the front-end UDF architecture was proposed by Facebook as part of a bundle of two react and flux libraries, and redux came to replace flux a bit later, offering a couple of very important changes.  The first is that state control is now supposed to be written with pure code; in fact, all our state management can now be described with one simple formula. <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>S</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mi>F</mi><mo stretchy=&quot;false&quot;>(</mo><mi>S</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo>&amp;#x2212;</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><mi>A</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="30.82ex" height="2.66ex" viewBox="0 -832 13269.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-53" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-74" x="645" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-61" x="1007" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-74" x="1536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-65" x="1898" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMAIN-28" x="2364" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-6E" x="2754" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMAIN-29" x="3354" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMAIN-3D" x="4021" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-46" x="5078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMAIN-28" x="5827" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-53" x="6217" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-74" x="6862" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-61" x="7224" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-74" x="7753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-65" x="8115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMAIN-28" x="8581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-6E" x="8971" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMAIN-2212" x="9793" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMAIN-31" x="10794" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMAIN-29" x="11295" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMAIN-2C" x="11684" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-41" x="12129" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMAIN-29" x="12880" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>S</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>F</mi><mo stretchy="false">(</mo><mi>S</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo stretchy="false">(</mo><mi>n</mi><mo>‚àí</mo><mn>1</mn><mo stretchy="false">)</mo><mo>,</mo><mi>A</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> State (n) = F (State (n-1), A) </script></p><br>  The next state is equal to the pure function of the previous state and some stimulus. <br><br>  Second, the presentation layer is now another pure function. <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>H</mi><mi>T</mi><mi>M</mi><mi>L</mi><mo>=</mo><mi>F</mi><mo stretchy=&quot;false&quot;>(</mo><mi>S</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="19.865ex" height="2.66ex" viewBox="0 -832 8553.1 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-48" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-54" x="888" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-4D" x="1593" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-4C" x="2644" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMAIN-3D" x="3603" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-46" x="4660" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMAIN-28" x="5409" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-53" x="5799" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-74" x="6444" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-61" x="6806" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-74" x="7335" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMATHI-65" x="7697" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/353590/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh7rRPKOg8rmKHAUf-u7inNzI8img#MJMAIN-29" x="8163" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>H</mi><mi>T</mi><mi>M</mi><mi>L</mi><mo>=</mo><mi>F</mi><mo stretchy="false">(</mo><mi>S</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> HTML = F (State) </script></p><br>  That is, the task of all UI components is to get an object as input, to produce a result markup. <br><br>  Thus, the following are achieved: <br><br>  1. ‚Äúunclean‚Äù, asynchronous code is shifted from the application to its edge, two large, I can even say the defining blocks of your application become clean. <br><br>  2. Very cool debasement instruments.  The first one is hot reload, which allows you to replace the pure render function on the fly without losing your state, that is, you can edit the UI layer ‚Äúhot‚Äù and immediately see the result.  without restarting the application each time, and also without the need to ‚Äúclick on‚Äù to the point where the bug is played.  The second tool is time travel, it allows you to remember all your states from State (1) to State (n), and walk back and forth on them, looking successively about what could go wrong.  Additionally, it is possible to reproduce the bug on one PC, export the timeline, and download it on another PC, that is, transfer the bug from the tester to the developer, even without a description of the steps to play this bug.  But this second tool imposes another requirement - the state and the action of the highest application must be serializable.  Those.  even base classes like Map or DateTime cannot be used.  Only POJO.  In addition, in redusers one cannot rely on the reference equality of objects, it is necessary to compare by value, for example, by id. <br><br>  3. reuse - ask yourself questions - did you encounter a case when some UI component climbs into the model itself, gets data for itself, processes it and displays it itself? <br>  Has it happened that a new task comes to use the same UI, but with a different data source, or in another scenario, with a different set of actions?  Sometimes reusing the same markup in another scenario is simply unrealistic. <br><br>  It is quite another thing to reuse the UI chunk, which accepts an object and produces the result markup.  Even if you have a different data design in the right place, you convert it into something that takes this component, insert it to yourself and give it this object.  As a result, you are fully confident that it will provide what you need and it will have absolutely no side effects. <br><br>  Same with state management.  You have a function that updates the line in the table.  Suppose it does something else inside itself, normalizes the table in some way, sorts it, etc.  What does it cost to call a clean function from another script?  Again you are sure that it will not have any side effects. <br><br>  It‚Äôs impossible to reuse the whole script.  Due to the fact that there is a complete decoupling of the presentation state.  And the entry points for such reuse will have to be duplicated, but the main ‚Äúmeat‚Äù at such entry points can and should be reused. <br><br>  Unfortunately there is no good and no blessing, Redux lost one important limitation.    , ¬´¬ª,     ,   FLUX     ‚Äî          Action,     .  UI ,   ,            .  ,  .  redux   . <br><br><h4>    Redux  UDF </h4><br>         ,    . <br><br> 1)     UI , UI        <br> 2) UI      (sick!)      . <br> 3) UI    *Adapter ( , *Injector, *Factory?) <br> 4) UI  ¬´¬ª,      ¬´¬ª      <br> 5) UI      ,     Action,   ¬´¬ª ,           <br><br>         .   , ,  UI ,   .     ‚Äî   UI ,   (          , , , , , code-smell   ,  )  ,      ,      ,     ,            .     ,    ,    api,        ,      ,        . <br><br>    ,         ,           ‚Äî      .   ‚Äî    , .    ,   ,   if,     3      . <br><br>         : <br><br><img src="https://habrastorage.org/webt/bv/54/_s/bv54_sazqx9lwfiizvr0a6ngoec.png"><br><br>  ,       redux,    ,   ¬´¬ª ,        4 ,       . <br><br>      ,   ,      ,     <a href="https://www.youtube.com/watch%3Fv%3DnYkdrAPrdcw%26feature%3Dyoutu.be%26t%3D656"></a>   Facebook. <br><br>  Total: <br><br> 1)   UDF,  redux     ,    fancy pub-sub. <br> 2)  coupling    <br> 3)   SRP ‚Äî     <br> 4)    ‚Äî /   . <br><br><h4>     </h4><br>    ,    UI ,   ¬´   ¬ª.   ,      ,   . <br>      ,        ,       ,   ,      . <br><br>       knockoutJS. <br><br>    tableVm,     table,  ,      <br><br><pre> <code class="javascript hljs">tableVm.table = ko.observable(someInitialData); tableVm.updateTable = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">input</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> current = tableVm.table(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> updated = ... <span class="hljs-comment"><span class="hljs-comment">// some code here tableVm.table(updated); }</span></span></code> </pre><br>     (   ) View-Model- <br><br><pre> <code class="javascript hljs">tableTotalVm.total = ko.computed(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> tableVm.table().map(...).sum());</code> </pre><br>   VM   <br><br><pre> <code class="javascript hljs">submitVm.canProceed = ko.computed(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> tableTotalVm.total() === <span class="hljs-number"><span class="hljs-number">100</span></span>);</code> </pre><br>    ,   ‚Äî ¬´back to square one¬ª,   ,   UDF   ‚Äî      ,      ..           . <br><br>       . <br><br>     ,         ,   UI      ,        ,    UI   ,        . <br><br><pre> <code class="javascript hljs">lowerVm.index = ko.observable(indexLoadedFromApi); upperVm.index = ko.computed( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> lowerVm.index() + <span class="hljs-number"><span class="hljs-number">1</span></span>), (newVal) =&gt; lowerVm.index(newVal - <span class="hljs-number"><span class="hljs-number">1</span></span>) );</code> </pre><br>   UI      , computed      .  Since   ,      ,    UI.       ‚Äî      ,       , -   ,  -  .      circular dependency detection        ¬´¬ª,       ,       ,     stack overflow. <br><br>          ,      .        .     Civilization   , ,   ,      100%,    ,      .   -     computed.  ,   . ,      computed    ,   observable,       .   ,       observable  . <br><br> <a href="https://habrahabr.ru/post/330466/"> </a>   ,     ,   ,   knockout,   ,      .      UDF ¬´  ¬ª,  .              UI ,    ,     .      ,         . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This misunderstanding can be seen by what the diagram is drawn, and it is drawn with a single model, the only view, where you don‚Äôt see what exactly the UDF should conquer the minds of the developers. Where all architectures look good, and in general it is not easy to understand the difference between them. And you need to draw a situation where there are a lot of these models and views. And where there are a lot of them with the use of reactive programming, the change distribution diagram looks like this:</font></font><br><br><img src="https://habrastorage.org/webt/_g/e1/tv/_ge1tvxxvqxs1nrdyyu5_qzogus.png"><br><br>           view1,      computed,    observable,  ,  computed5   ,  view3    .    knockout       ,   computed  N ,    .   ,  knockout   ,  ,         ,      . <br><br><h4>   UDF </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When I studied application examples on react / redux, I had the feeling that it was not fully worked out. </font><font style="vertical-align: inherit;">In particular, by the author redux himself, Den Abramov suggests directly in UI components, in the same files to write so-called. </font><font style="vertical-align: inherit;">dispatchToProps functions that are attached to the props ui components the following</font></font><br><br><pre> <code class="javascript hljs">(dispatch) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">someMethod</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">someData</span></span></span><span class="hljs-function">) =&gt;</span></span> { dispatch({<span class="hljs-attr"><span class="hljs-attr">type</span></span>: Actions.someAction, someData }); } } };</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sometimes these methods become more complex, their content expands, including asynchronous operations appear. </font></font><br><br><pre> <code class="javascript hljs">(dispatch) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> someMethod: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">someId</span></span></span><span class="hljs-function">) =&gt;</span></span> { dispatch({<span class="hljs-attr"><span class="hljs-attr">type</span></span>: Actions.startedLoadingAction }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> someData = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> api.loadSomeData(someId); dispatch({<span class="hljs-attr"><span class="hljs-attr">type</span></span>: Actions.someAction, someData }); } } };</code> </pre><br>  ,    .       ,   UI  -  .    ,     ,   ,      UDF.     ,   ,       ?  - ,  ,   ,  .        ‚Äî     N-        N-1.  ,   ,         ,        .    ,  backend,       .  ,     .      ,        . <br>    . <br><br><img src="https://habrastorage.org/webt/2-/zj/7p/2-zj7pop1ta1mhhxivxkghwlngg.png"><br><br>     /    ,        .      -.      UI  .     Action-     ¬´ ¬ª,     UI   ,   . <br><br>            .     ,     ,    . <br><br>       <br><br><pre> <code class="javascript hljs">&lt;button onClick={() =&gt; service.userClickedApply()} &gt;&lt;<span class="hljs-regexp"><span class="hljs-regexp">/button&gt;</span></span></code> </pre><br>    ui-   ,   ,  -      . <br><br>              ,        .            . <br><br><h4>      . </h4><br><img src="https://habrastorage.org/webt/zi/gc/xz/zigcxzu7a-zxb2kg50mnn0tbkms.png"><br><br>     UI ,     .     ,    ,           ,     Payments  UserData.   ,       UI   ,  ,    ,      . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If user input concerns a particular component, i.e. according to the requirements, this user input does not affect anything else on the screen, the service corresponding to this particular component is called, its method creates an Action lying next to the definition of its state, i.e. interface (implied by the typescript), and the actual editor. The service naturally does not have a direct connection with the reduser of this component, therefore the arrow is dashed. Action is fed to the central entry point, to the stop.</font></font><br><br>   ,    -      ,    UserData     ¬´    ¬ª     payments,    UserData    ¬´¬ª.         ,   Action,               ,    .    ,      .   ,        ,     , ,   ,       Action   ,    . ,            ,    ,             .      ,      ,  ,  ,     . <br><br><h4>    </h4><br>    ,      .        .      <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {store} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ... import {LeftPanel, RightPanel, Footer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ... export <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Page</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ componentWillMount() { store.subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState(store.getState())); } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;div&gt; &lt;h1&gt;Title here&lt;/h1&gt; &lt;LeftPanel state={this.state.leftPanel} /&gt; &lt;RightPanel state={this.state.rightPanel} /&gt; &lt;Footer state={this.state.footer /&gt; &lt;/div&gt; ); } }</code> </pre><br>          , ,     ‚Äî     ,  ,       ,     .              .   UserData     .                ,    ,         . <br><br>      <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {rightPanelService, userDataService} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ... import {UserData } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ... export <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RightPanel</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PureComponent</span></span></span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> state = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.state; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;div class=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"right-panel"</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;UserData state={state.userData} onLastYearClicked={(</span></span></span><span class="hljs-function">) =&gt;</span></span> rightPanelService.lastYearClicked()} onUserNameChanged={(userName) =&gt; userDataService.userNameChanged(userName)} /&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Payments</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">state</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{state.payments}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...etc.</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } }</code> </pre><br>    ,   PureComponent,  ,            rightPanel    ,       ,   ,         .           .   PureComponent     ,     ,        Redux,        .   ( 2, 4, 5...)      .     ,       @Input-   ( reference equality),  dirty check  ,   ,            ,       ,    . <br><br>    UserData <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UserData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{state, onLastYearClicked, onUserNameChanged}</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;div class=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"user-data"</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;input value={state.userName} onChange={(newVal</span></span></span><span class="hljs-function">) =&gt;</span></span> onUserNameChanged(newVal)} /&gt; ...etc. &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt; ); }</span></span></code> </pre><br><h4>   </h4><br>        .   ,  frontend-    ,      .       : <br><br> 1)   ‚Äî   ¬´¬ª      behavior- UI . <br> 2)           <br> 3)       ,    ,       ,  ..    . <br>  those.       ,    . <br><br>         nodeJS?   ,    ,      ,   ,   ,  -,           .     ,          (    ),            ,  . <br><br>         ,        ,    ,    .            ,        ,   overnight.   ,    behavior     unit-   ,     ,       ,        . <br><br>  ,       .          @Injectable,     backend     Http.    dependency injection    ¬´¬ª fetch  Http  Promise  Observable   ,         zone.js,   ,    async/await. <br><br><h4>  At last </h4><br>          ,     redux,         .     typescript, ..   ,        . </div><p>Source: <a href="https://habr.com/ru/post/353590/">https://habr.com/ru/post/353590/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../353576/index.html">Correct cryptographic answers: 2018</a></li>
<li><a href="../353580/index.html">From <blocked messenger> - to Matrix</a></li>
<li><a href="../353582/index.html">Color: from hex codes to eye</a></li>
<li><a href="../353584/index.html">Thunkable X - free browser-based mobile development environment for iOS and Android</a></li>
<li><a href="../353586/index.html">How to sign a message using Java GOST R 34.11 / 34.10-2001 algorithm</a></li>
<li><a href="../353592/index.html">Online course on iOS development for beginners from Redmadrobot and Contented</a></li>
<li><a href="../353594/index.html">Meat grinder, super-robots and scientific research institutes (Not Artificial Intelligence)</a></li>
<li><a href="../353596/index.html">Creating a game on Lua and L√ñVE - 7</a></li>
<li><a href="../353600/index.html">Digital events in Moscow from 16 to 22 April</a></li>
<li><a href="../353602/index.html">The perfect way to offline from online</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
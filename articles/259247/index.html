<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Remote control for photography with geotags based on LinkIt One</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="By the will of fate, I came across a sample of quite an interesting LinkIt One board from Mediatek. This is a single board computer with an impressive...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Remote control for photography with geotags based on LinkIt One</h1><div class="post__text post__text-html js-mediator-article">  By the will of fate, I came across a sample of quite an interesting LinkIt One board from Mediatek.  This is a single board computer with an impressive array of peripherals prepared for use in wearable devices and IoT projects. <br><br>  In order to get a ‚Äúcombat‚Äù experience with this controller, we have developed an uncomplicated console that connects to the SLR camera, takes pictures and records the coordinates of the shooting point. <br><br>  In this article I will talk about the resulting device and share our impressions of working with LinkIt One. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/b64/150/07b/b6415007b3ff4783849b9b347c02cf04.gif"><br><a name="habracut"></a><br><h2>  The idea of ‚Äã‚Äãcreating a remote </h2><br>  Everyone knows that in EXIF ‚Äã‚Äãphotos you can add a geotag with the coordinates of the location of the image.  This is now no surprise.  Any smartphone easily copes with this task.  On the other hand, not every (even professional) camera has this option.  It is clear that the smartphone has everything that is needed to determine geolocation, and the camera requires at least an additional GPS module.  Yes, and professional photographers rarely need this.  But what to do if you still need to shoot a lot and know where the pictures were taken? <br><br>  For this we made our remote.  It connects to the standard camera connector, which is specifically designed for this purpose.  The user presses a button, the remote closes the optocoupler for shooting and records the time and coordinates.  If the time on the camera is set correctly, then it will be easy to compare the pictures with the coordinates. <br><br>  But in practice, it is much easier to install an application on a smartphone that records a GPS track continuously while shooting, and then do the same thing as with the remote control.  Why then do a separate device? <br><br>  In fact, the main goal of the project is not even the remote control itself, but to gain real experience with the LinkIt One board, to which we will return later. <br><br><h2>  The hardware part of the remote for photography </h2><br>  The basis of the console is the LinkIt One board, for which I made a special shield for taking pictures. <br>  From the hardware point of view, the consoles for photographing are extremely simple.  They are connected to the camera with a jack-type connector with a diameter of 2.5 mm.  There are three contacts in it - earth, half press and full press.  In the console is a simple button that closes the signal contacts with the ground.  Therefore, on our shield for photography, first of all, there is a dual-channel optocoupler <a href="http://www.irf.com/product-info/datasheets/data/pvt322.pdf">PVT322</a> .  She closes these contacts. <br><br>  Secondly, I installed a three-color LED that allows you to understand the condition of the receiver.  That is, at the start he needs time until he finds satellites and at this time shooting is impossible.  The charge level is determined by the same LED. <br><br>  Also on the shield are two buttons for controlling the remote (shooting and battery control), a connector for connecting the camera and a GPS antenna from the LinkIt One kit. <br><br><img src="https://habrastorage.org/files/467/baf/280/467baf2808f84b5eb37ba434d8d3ecb2.gif"><br><br>  The scheme is extremely simple.  I can only say that I connected all the loads (RGB-LED and optocoupler) through BCR108E6327 logical transistors.  Schild's board attached at the end of the article, in case someone wants to repeat the device. <br><br><h2>  Housing for remote </h2><br>  We also managed to make an unplanned case for him unplanned.  When I was working on a project, I met an aspiring graphic designer who was interested in 3D printing and industrial design.  <a href="https://3dwarehouse.sketchup.com/user.html%3Fid%3Du9390e41e-4434-4b3f-a8bc-2ddd40fee540">Here is his profile</a> in SketchUp's warehouse.  Without hesitation, he agreed to help. <br><br>  He, like me, used SketchUp for this, but at his much higher level.  This program is quite simple, but armed with plug-ins, in the hands of a professional, it can work wonders.  Look at the body of the resulting remote can be in the online viewer <a href="https://3dwarehouse.sketchup.com/model.html%3Fid%3Dub838fb3f-6835-4273-9300-6f73de3f5562">here</a> . <br><br><img src="https://habrastorage.org/files/b68/cbf/593/b68cbf593b2f46c8bcdccb6c937cb821.gif"><br><br>  Of course, we printed it out, cleaned it up, painted it, collected it and got the following: <br><br><img src="https://habrastorage.org/files/3c8/b55/341/3c8b553411444b9fa9921d335044a52f.gif"><br><br><img src="https://habrastorage.org/files/c8d/f3a/c87/c8df3ac875c44d6aa88fd2fb48f84600.gif"><br><br>  With the hull, over, there are problems.  The fact is that the designer came to the rescue later than I did the electronics.  The photo connector is recessed deep into the console, and the toggle switches on the LinkIt One itself are not available when the remote is closed.  In general, the body was not perfect, but quite nice and usable. <br><br><h2>  Remote operation </h2><br>  Immediately after turning on, the remote determines its location.  At this time, the indicator LED flashes red and shooting is not possible.  After the position becomes known, the LED starts flashing green.  Pressing the right button takes a picture, coordinates are recorded in the memory, and the LED for this time lights up in blue. <br><br>  The second button is responsible for the battery.  After pressing it for one second a green or red LED lights up.  If green, then the charge is more than 20%, if red - then less. <br><br>  There are two problems due to the hull.  Firstly: you can get close to the power supply tumbler by opening the lid.  It may be easier not to turn it off, but we have not checked how long the battery is enough.  Secondly: the board has a switch responsible for the computer mode: either UART or Mass Storage.  And in the Mass Storage mode, the program does not start when disconnected from the PC.  This means that you need to switch this switch when you need to download data from the remote. <br><br>  All this is easier to see once: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/u25qu1BeuDk%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhD3sGju9DGOLVtorZW-zIUPC3U6Q" frameborder="0" allowfullscreen=""></iframe><br><br>  Remote parse NMEA messages that the receiver sends and saves them in kml format.  The recorded file can be downloaded by connecting the console to a computer, and you can view the content in Google Earth: <br><br><img src="https://habrastorage.org/files/583/8e1/24c/5838e124cd18409d9d7c159f763010a1.gif"><br><br>  And now a little more about the heart of the remote. <br><br><h2>  What is LinkIt One? </h2><br>  At first glance, this is just another Arduino clone, but when you start to understand, everything turns out to be much less prosaic. <br><br><img src="https://habrastorage.org/files/0c1/d81/047/0c1d810470584c4d992cc56fafcd30a4.gif"><br><br>  Details on technical specifications can be found on the <a href="http://www.seeedstudio.com/wiki/LinkIt_ONE">wiki</a> and in the <a href="http://labs.mediatek.com/fileMedia/download/5fed7907-b2ba-4000-bcb2-016a332a49fd">Developer's Guide</a> .  I just list the distinctive features: <br><ol><li>  260MHz ARM Processor with 16MB Flash and 4MB RAM </li><li>  Slot for installing an SD memory card up to 32GB </li><li>  Built-in modules with external antennas: WiFi, Bluetooth, GPS / GLONASS, GSM (there is a SIM card slot on the board) </li><li>  Powered by 1Ah battery.  This is done well: it charges from USB, and the API lets you know the remaining charge </li><li>  Audio jack.  Headphone and microphone </li><li>  Arduino compatibility.  More on this below. </li></ol><br>  In fact, there is a lot of pleasant things on the board that are already implemented in the API.  Work with GSM, GPS, Bluetooth, I2C, SPI, 3xUART, work as MP3 files, battery, etc.  The idea of ‚Äã‚Äãthe board itself is that it already has everything you need.  But because of this, LinkIt One is not very convenient in the context of controlling any external hardware in real time.  Specialized RTOS runs on it, but the timings are still floating.  Logic levels GPIO - 3.3V.  Three analog inputs, two PWM outputs (and only servos can be connected to them).  That is, there is a risk of iron that it is not compatible with some ready-made solutions. <br><br>  Working with it is supposed to be in the Arduino IDE.  To it you will need to install an additional SDK which implements some of the functions of the Processing / Wiring language and many special functions for LinkIt One.  In fact, all software for this board is developed in C ++.  Right in the environment you can see a lot of ready-made code examples.  Documentation is over, while relatively little.  For example, I could not find any description of the power supply circuit board, nor its overall dimensions.  And Google constantly gives when searching for links to LinkedIn. <br><br>  You can buy a fee on <a href="http://www.seeedstudio.com/depot/LinkIt-ONE-p-2017.html">Seeedstudio.com</a> for $ 79.  The board is sold in a nice box with instructions, three antennas and a battery. <br><br><div class="spoiler">  <b class="spoiler_title">Photos with a box</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/dd9/426/762/dd94267629574ab29291a23ba95df522.gif"><br><br><img src="https://habrastorage.org/files/771/406/fec/771406fec9aa458bb8b0462c109d1cd0.gif"><br><br><img src="https://habrastorage.org/files/8bc/868/b3d/8bc868b3d865495e875ecbdc665a8a78.gif"><br></div></div><br>  I also did a little benchmark. <br><br><div class="spoiler">  <b class="spoiler_title">LED flashing frequency</b> <div class="spoiler_text">  I understand that it is impossible to draw any conclusions about the hardware or software, according to the results of such a test, but I decided to check with what frequency the leg would twitch if I switch it with the digitalWrite function without delay. <br>  The author of <a href="http://habrahabr.ru/post/151544/">this post</a> checked that the MK with Arduin's firmware does it with a frequency of 210 kHz, and that programmed with normal means - 1.6 MHz.  Under the same conditions, LinkIt One showed me 312 kHz. <br></div></div><br>  Next, I will provide quick start instructions for Windows and Linux.  This may seem interesting only to those who really will work with her or are planning to do it. <br><br><h2>  Hello World for LinkIt One for Windows </h2><br>  First of all, you need to upgrade the Arduino IDE to work with LinkIt One.  Manufacturers recommend to download the SDK and the latest version of the Arduino IDE, and then run the SDK and specify the folder with the medium.  But with the move, I did not succeed.  Instead, I downloaded the <a href="https://github.com/Seeed-Studio/LinkIt-ONE-IDE">already deployed environment</a> for programming LinkIt One. <br><br>  At the top of the board there are three switches responsible for the mode of operation of the board.  The first switch sets the initialization method in the system (as a COM port or as USB Mass Storage).  The second sets the power mode: USB or battery.  The third is the connection to the SPI SD card or slot.  Before connecting the board to the computer, you must set these switches as shown in the photo: <br><br><img src="https://habrastorage.org/files/44d/1d5/c3c/44d1d5c3cc144b31ad525766a4c99ddc.gif"><br><br>  Then you can connect the board to the computer.  Immediately after connecting, two unknown devices will appear in the device manager: <br><br><img src="https://habrastorage.org/files/0a0/055/dec/0a0055dece5b45db8f13d8e709c9d834.gif"><br><br>  Now you need to install the driver.  The installer is in the folder ... \ Arduino-LinkIt-ONE-IDE-master \ drivers \ mtk.  Just run InstallDriver.exe and wait.  Two COM ports will appear in the device manager at once: <br><br><img src="https://habrastorage.org/files/fdc/66b/934/fdc66b9349f94a838c0e48d8d0030c8a.gif"><br><br>  This completes the installation.  Just in case I updated the firmware of the board to the latest version.  How to do this is described in the wiki (in short, you just need to run FirmwareUpdate.exe). <br><br>  You can start loading an example with a flashing LED.  Launch the Arduino IDE and select the LinkIt One board: <br><br><img src="https://habrastorage.org/files/d5f/05f/239/d5f05f239151422da149d57d468be077.gif"><br><br>  Now select the COM port.  It is necessary to specify the port that is displayed in the Device Manager as Debug Port! <br><br><img src="https://habrastorage.org/files/465/183/504/4651835049554088900d0b2b61151889.gif"><br><br>  Then open the finished Blink example and click on the ‚ÄúDownload‚Äù button.  If everything is done correctly, the environment will issue a corresponding message about it (note the percentage of used memory): <br><br><img src="https://habrastorage.org/files/4f9/524/20e/4f952420e406438197233c25670b2d7a.gif"><br><br>  After the download is complete, the user LED on the board will flash: <br><br><img src="https://habrastorage.org/files/8eb/459/35e/8eb45935e1954cce847317826c09e09f.gif"><br><br><h2>  Working with LinkIt One for Linux </h2><br>  Mediatek only supports Windows, but you can also work under Linux if you wish.  This will require: <br><ol><li>  Install Arduino IDE </li><li>  <a href="https://github.com/Seeed-Studio/LinkIt-ONE-SDK">Download the</a> SDK for LinkIt One (although it is written that it is only for Windows) and install it using wine.  In the folder, the installer checks for the presence of arduino.exe, it will suit an empty file with the same name </li><li>  Write your program and click "Check" </li><li>  After that, the compiler will produce some number of errors related to the fact that some source codes of libraries from the SDK include header files in the wrong case (for Windows, the register does not matter) </li><li>  Connect LinkIt One in memory card mode to computer </li><li>  Find the MRE folder on the removable disk and upload the * .vxp firmware file there.  The autostart.txt file in the root indicates the path to the firmware that will be executed. </li><li>  Switch the board to UART mode and restart with the button </li><li>  Watch the firmware run </li></ol><br>  This is all very inconvenient and seriously develop something in this mode does not work.  But for one project for the evening this decision. <br><br><h2>  Conclusion </h2><br>  Overall, the experience with LinkIt One is positive.  There are, of course, roughness.  The feeling is that you are working with something slightly unfinished, as always when mastering something new.  But on the other hand, it can really help to quickly launch even a relatively complex project. <br><br>  Files to download: <br><br>  <a href="">Shield for LinkIt One</a> <br>  <a href="">3D model of the case</a> <br>  <a href="">Sample kml file</a> <br>  <a href="">Source code of the console program</a> <br><br>  This is the only repository of articles from my site ( <a href="http://www.customelectronics.ru/linkit-one-byistryiy-start/">1</a> and <a href="http://www.customelectronics.ru/linkit-one-pult-dlya-fotosemki-s-geometkami/">2</a> ). </div><p>Source: <a href="https://habr.com/ru/post/259247/">https://habr.com/ru/post/259247/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../259231/index.html">‚ÄúWhen will there be courses in JavaScript ?!‚Äù or a second year at the Academy</a></li>
<li><a href="../259233/index.html">Run the direction of contextual advertising in web studios</a></li>
<li><a href="../259235/index.html">Analysis of the tasks of the 3rd qualification round of the Russian Code Cup 2015</a></li>
<li><a href="../259237/index.html">The open format initiative to publish publicly available data.</a></li>
<li><a href="../259243/index.html">Smart Internet of Things - who is he and what does he eat with?</a></li>
<li><a href="../259249/index.html">How we used design thinking when creating a new AdTrack</a></li>
<li><a href="../259251/index.html">Search for periodic security elements of the RF Passport using the Fourier transform</a></li>
<li><a href="../259253/index.html">10 ways to protect data in Office 365</a></li>
<li><a href="../259255/index.html">The implementation of weather effects. Precipitation</a></li>
<li><a href="../259257/index.html">Record of the webinar "What's new in Kerio Connect 8.5"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unexpected Cisco ASA Feint</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This morning I unexpectedly discovered something new, but not very pleasant. 
 For some, this may be obvious, but for some reason I have not come acro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unexpected Cisco ASA Feint</h1><div class="post__text post__text-html js-mediator-article">  This morning I unexpectedly discovered something new, but not very pleasant. <br>  For some, this may be obvious, but for some reason I have not come across before.  So, perhaps, this short post will warn someone against similar problems in the future. <br><br>  There is such a topology (well, of course, it is not at all like this, but it reflects the essence): <br><br><img src="https://habrastorage.org/storage3/740/7ec/bb7/7407ecbb79ff00d7f11897795af6356a.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  There is an ASA, in particular, an ASA 5520 with software 8.4 (4), which has many interfaces and subinterfaces. <br>  In the DMZ, there is a certain web server that listens to requests on port 8443 and is accessible, thanks to the NAT rule (see the figure) from all other ASA interfaces through port 443. <br><br>  Once, <s>last night</s> , it turned out that the interface inside2 (in fact, this is a 802.1q subinterface), we no longer need it and can remove it. <br>  This was successfully done (no interface inside2).  It would seem - well, one of the interfaces was deleted, and so what? <br><br>  This morning, it was suddenly discovered that the web server has become unavailable to the outside world. <br>  After a short troubleshooting and inspection of logs, it turned out that the translation rule for the web server in the DMZ was somehow self-destructive. <br><br>  As a result of the attempts to realize, by comprehending how the removal of the interface is connected with the evaporation of the NAT rule, I came to the conclusion that <br>  the any keyword in the translation rule itself. <br><br>  Those.  ASA saw that someone was going to deprive her of one of the interfaces.  Realizing this, she began to look for what NAT rules use this interface.  She did not find any such rule, but found a rule in which any was specified as the destination interface.  Well, since any includes all interfaces, it simply deleted the entire rule. <br><br>  The conclusion is: if you have translation rules in your config (in my case it was Auto Nat, but something seems to me that Manual Nat will give the same result), indicating as one of the interfaces participating in the broadcast, the key the word any, then after removing any of the interfaces, all such rules will disappear successfully. <br><br>  Again, probably somewhere written about it (I have not met), but for me it was a surprise. </div><p>Source: <a href="https://habr.com/ru/post/192616/">https://habr.com/ru/post/192616/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../192604/index.html">Jeff Dean from Google - Chuck Norris of our time</a></li>
<li><a href="../192608/index.html">An example of blog development on Zend Framework 2. Part 2. MyBlog module</a></li>
<li><a href="../192610/index.html">Jedi - autocompletion library for Python</a></li>
<li><a href="../192612/index.html">The course "DevOps for Internet Projects" will be held September 21-22</a></li>
<li><a href="../192614/index.html">Development cycle through Github</a></li>
<li><a href="../192618/index.html">How to write letters to be answered?</a></li>
<li><a href="../192622/index.html">Photo from the heart of the Chinese Internet giant Alibaba Group</a></li>
<li><a href="../192624/index.html">Big Calculator is out of control</a></li>
<li><a href="../192628/index.html">The official release of 3CX Phone System 12</a></li>
<li><a href="../192636/index.html">Pot, cook</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
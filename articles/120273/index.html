<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I Fought the Android NDK and NetBeans 6.8</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this post I want to share a bit the son of difficult mistakes - experience. You can‚Äôt tell otherwise, because some compilation errors, builds, etc....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I Fought the Android NDK and NetBeans 6.8</h1><div class="post__text post__text-html js-mediator-article"><img src="http://radikal.ua/data/upload/ba193/4efc3/74d4ba60aa.jpg" alt="image" align="left"><br>  In this post I want to share a bit the son of difficult mistakes - experience.  You can‚Äôt tell otherwise, because some compilation errors, builds, etc.  ate a lot of time.  Not every time I got to the bottom of the reasons, I wanted to get a working math as quickly as possible.  But somehow, I managed to find or read the right solution.  Therefore, I just want to draw the attention of those who will go the same way to some nuances.  Perhaps it will save you some time.  In the end I will give an example of the application for which all this was needed.  The picture from the title is a screen of the application. <br>  And so, I had the following task.  I wrote an application for Android, which turned out to be very demanding on resources.  ‚ÄúMathematics‚Äù (I mean working with containers, calculations, etc.) took a lot of time.  For comparison, a console application in pure C ++ counted the task within 3 seconds.  While the Android application on java, running on the emulator, the same thing counted 2.5 minutes.  So I decided to bring the algorithmic part to C ++.  I also want to note that I didn‚Äôt want to install Eclipse at all, so I struggled with what it was - NetBeans 6.8.  So suppose you already have an SDK, NDK, and NetBeans and go ahead. <a name="habracut"></a><br><br><h5>  Problem 1 </h5><br>  In the examples from the NDK archive, the source code is presented in ‚ÄúC‚Äù.  If you want to use ‚ÄúC ++‚Äù and write your code in * .cpp / * .h - do not forget to replace the function calls of the JNIEnv object of the form <code>(*env)-&gt;GetIntArrayElements(pixels, 0)</code> with <code>env-&gt;GetIntArrayElements(pixels, 0)</code> <br><br><h5>  Problem 2 </h5><br>  Compiling C ++ code in * .so.  I put Cygwin for these needs.  When installing it, do not forget to choose among the packages offered - make, by default it is not set.  In order not to copy-paste the configuration of Cygwin and an indication of where to put your C ++ code - just give a <a href="http://www.pocketmagic.net/%3Fp%3D1332">link</a> .  There, everything is described in sufficient detail and the main thing is all in one place, which is not unimportant. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Problem 3 </h5><br>  Compile and run apk on the emulator.  It looks like NetBeans 6.8 has serious problems with deploying and running applications with so-libraries on the emulator.  I was helped only by manual assembly (manual launch of ant compilation) and manual download of the application on the emulator.  It should be noted that after the application compiled in this way is loaded onto the emulator, if there is no need to change (recompile and re-upload) the NetBeans so-library normally compiles the main part of apk, uploads it to the emulator and runs in both debug and release modes.  Therefore, it turns out a tense situation.  It is necessary to debug and lay out the native part separately (with a large number of gestures), and then in the usual mode to debug the java-part (interface). <br>  The sequence of commands when compiling via ant is: <br>  1. "android update project --target --path path / to / your / project /" <br>  2. ‚Äúant debug‚Äù or ‚Äúant release‚Äù <br>  3. After that, in the bin folder of the project there will be application assemblies and you can start downloading the application to the adb-e install bin / Application.apk emulator.  The emulator should be running by this time. <br><br>  Once again, these actions are needed only when debugging native code in order to compile it with the interface part and download it to the emulator.  After that, there is no need to go beyond NetBeans to debug the java-interface part of the application.  Why it happens this way, can it be done somehow differently - I do not know, therefore it will be interesting to hear comments from the guru. <br><br>  <b>UPD: The</b> performance of the application with native code has increased 10 times.  If, by experimenting with different containers, the calculation of the test problem on the Java code was reduced to ~ 100s, then using the native code with the STL, it is considered to be ~ 7s. <br><br><h5>  application </h5><br>  Well, in conclusion, a few words about the application for which it was all necessary. <br>  This is a small paint editor for Android <a href="https://market.android.com/details%3Fid%3Dcom.PaintUp">PaintUp</a> that can build complex gradient fills.  Back at the university for a similar task, we came up with one smart algorithm, which as it turned out quite skillfully copes with color gradients.  And it became interesting to implement it on a mobile platform. <br>  The result was a drawing box, which can make a pretty and not always predictable picture by several color strokes. <br>  Description of the application on the android market <a href="https://market.android.com/details%3Fid%3Dcom.PaintUp">here</a> , below are a few examples (some with source code) and qr-code for installation. <br><br><img src="http://radikal.ua/data/upload/49112/4efc3/5404a9ffc0.jpg" alt="image"><br><img src="http://radikal.ua/data/upload/fb1a9/04012/1249321f20.jpg" alt="image"><br><img src="http://radikal.ua/data/upload/4efc3/04012/1d2870a351.jpg" alt="image"><br><img src="http://radikal.ua/data/upload/6895e/c2184/4e588cf673.jpg" alt="image"><br><img src="http://radikal.ua/data/upload/4efc3/4fa6c/8fd7e13203.jpg" alt="image"><br><img src="http://radikal.ua/data/upload/0fccf/4fa6c/0781d42638.jpg" alt="image"><img src="http://radikal.ua/data/upload/6895e/4fa6c/c82debcb1e.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/b26/f88/b84/b26f88b84e84e8add3f36879a85eaef5.png" alt="qrcode"></div><p>Source: <a href="https://habr.com/ru/post/120273/">https://habr.com/ru/post/120273/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../120266/index.html">DIY quadcopter: Part I</a></li>
<li><a href="../120267/index.html">Digest Wanted.VC # 4</a></li>
<li><a href="../120268/index.html">Designing visitor behavior for receiving a discount card in an online store</a></li>
<li><a href="../120269/index.html">Multiple inheritance in ActionScript. Traits Language in RASE Beta 10</a></li>
<li><a href="../120272/index.html">Use a bandler instead of practicing rvm gemset per project</a></li>
<li><a href="../120276/index.html">The results of the final ACM ICPC 2011</a></li>
<li><a href="../120277/index.html">Why do programmers live well in Megaplan?</a></li>
<li><a href="../120278/index.html">Tvil.ru - Search for accommodation for recreation and travel in Russia for the summer holidays</a></li>
<li><a href="../120279/index.html">We write an interpreter for your esoteric language (part 2)</a></li>
<li><a href="../120281/index.html">iChromy - browser in Chrome style for iPad</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
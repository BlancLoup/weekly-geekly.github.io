<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Manual monitoring of site availability (simple tools overview)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After purchasing a virtual and / or dedicated server, it is important to receive timely information about the unavailability of the service, that is, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Manual monitoring of site availability (simple tools overview)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/d33/7a6/7a7/d337a67a7aef4ebdb44405f787f85895.png"><br><br>  After purchasing a virtual and / or dedicated server, it is important to receive timely information about the unavailability of the service, that is, to monitor the main subsystems of the website. <br><br>  A reliable website should be easily accessible to users 7 days a week, so it should be constantly checked for availability and performance: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  regular <b>self-testing of</b> the website using <a href="https://drudesk.ru/blog/servisy-monitoringa-dostupnosti-sajta" rel="nofollow noopener noreferrer">free tools</a> ; </li><li>  <b>constant monitoring of the availability of the</b> site, which is optimal for the time interval: the majority of users will try to return to the site within 1-2 hours, more frequent checks do not guarantee a more prompt correction of problems faster than within an hour; </li><li>  <b>monitoring of project components and analysis of application metrics</b> : response speed, component errors, services, database response speed, non-indexed or slow query monitoring; </li><li>  website <b>performance monitoring</b> : slow loading of pages can cost customers losing, while monitoring results in timely notification of problems, allowing them to be eliminated promptly and minimized consequences; </li><li>  <b>Monitoring of problems</b> consists in tracking several parameters of a site with a frequency of at least once a minute from several geographic points in order to maximally cover the minute interval with checks and track possible problems related to the geography of users. </li></ul><a name="habracut"></a><br>  Among the possible verification criteria are the following problems: <br><br><ul><li>  with a <b>DNS server</b> (when the site address cannot be determined at certain intervals, although the site itself is physically accessible); </li><li>  with a <b>long response time</b> (when updating the cache, for example, or when performing "heavy" tasks on the server side); </li><li>  with the <b>planned execution of tasks</b> (as a result of which the site will not be available only at certain points in time); </li><li>  with <b>long latency times for static files</b> (for example, due to network infrastructure or problems with physical media); </li><li>  with <b>a database connection</b> . </li></ul><br>  Many external services now provide detailed information about problems, up to error logs on the client side (with appropriate configuration and maintenance of error logs from the server).  Such methods are especially good when you need to catch some kind of "floating" error - when you turn on the detailed logs of the error that occurs on the server side, you can effectively track and fix it. <br><br><h1>  Site work at the weekend / holiday season </h1><br>  There is a task: the website / server / service should work continuously for several days without human intervention.  What can go wrong? <br><br>  The usual malfunctions from time to time happen by themselves.  Only here the night crash from Tuesday to Wednesday is decided by reloading the backup on Wednesday morning.  And on weekends there are frequent failures "from Friday to Monday."  How much a site can be in such a case during holidays depends on the length of holidays of responsible employees. <br><br>  In general, the site is not good, but on weekdays the problem is solved quickly.  How much time would the decision take in May if it were not for monitoring?  Instead of a couple of hours it could be a couple of days, and this is not uncommon. <br><br>  Do not make major code changes before long weekends.  It is necessary to thoroughly test the system, as amended, in order for the changes to work properly.  It is recommended to postpone any major changes until the website has less traffic load. <br><br>  In addition to the usual problems, sites during the long absence of vigilant guards also like to catch other illnesses.  For example, a domain or certificate may expire.  Or decide to grow fat database.  Or he can please the DNSBL or Roskomnadzor lists. <br><br><h2>  DNSBL blacklists </h2><br>  An important function is to check domains in DNSBL blacklists (DNS blacklist or DNS blocklist) - lists of hosts stored using the DNS architecture system.  Usually used to combat spam. <br><br>  These lists are independent and are formed each according to their own algorithm, because of which, as a result of a random error, even a harmless site may turn out to be there.  An IP address from your subnet can be used for malicious purposes, for example, by spammers or other intruders, as a result of which the entire subnet may be blocked in the black list of the corresponding structure. <br><br>  How does this threaten you?  Letters from you will cease to come to clients, the site will become worse to appear in search engines, and so on in increasing terms.  Therefore, the function of control and notification of hit in the most popular black lists is very popular. <br><br>  Each administrator can configure their web server so that, for example, it does not receive emails from the servers listed in a specific list.  It helps to fight spam, the spread of malware, DDoS attacks and other problems. <br><br>  Online DNSBL blacklists, for example, <a href="http://antispamsniper.com/ru/dnsbl.php" rel="nofollow noopener noreferrer">antispamsniper.com</a> or <a href="http://www.syslab.ru/dnsbl" rel="nofollow noopener noreferrer">syslab.ru</a> , allow you to filter spam using DNS to access spam IP addresses databases. <br><br>  To check the presence of the specified IP address in the blacklists, enter the IP address (your current IP address is specified by default) and click the <b>Check</b> button. <br><br><h2>  DDoS protection </h2><br>  If a profit depends on the availability of a website, then you should prepare it for increasing loads (for example, during seasonal sales or Black Friday) and possible attacks by competitors and / or attackers who are counting on an increase in the response time of the website to incoming requests or partial / complete inaccessibility. <br><br><h2>  Technical planning </h2><br>  The server software on which the website or other resource is built must be periodically updated. <br><br>  Planning technical work allows you to achieve two goals: not to send error notifications and not to record errors during a certain time interval in the statistics.  At the same time, checks during technical work still go on and are regularly written to the log, and therefore can be useful for administrators: the log allows you to determine how long the update or reboot lasted, what errors were issued, what problems were observed and so on . <br><br>  It is recommended to carry out planned work during a noticeable reduction (reduction) of client traffic, as well as during the absence of peak bandwidth. <br><br><h2>  Monitoring domain expiration and SSL certificate </h2><br>  Problems with the renewal of domains and certificates occur even in large companies.  Therefore, the notification (via SMS or e-mail) that this domain needs to be renewed is extremely useful.  For example, <a href="https://ping-admin.ru/" rel="nofollow noopener noreferrer">ping-admin.ru</a> provides paid services for monitoring the results of monitoring. <br><br><h3>  Check domain expiration </h3><br>  You can check the domain for free using the <a href="https://www.nic.ru/dns/service/monitoring_dom.html" rel="nofollow noopener noreferrer">nic.ru</a> service. <br><br>  You can check the domain validity time for free using the <a href="http://r01.ru/domain/whois/" rel="nofollow noopener noreferrer">Whois Service</a> . <br><br><h3>  Validate SSL certificate validity </h3><br>  Run the following command from a Linux command line to find out the validity of an SSL certificate using openssl: <br><pre><code class="hljs pgsql">$ echo | openssl s_client -servername  -<span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> : <span class="hljs-number"><span class="hljs-number">2</span></span>&gt;/dev/<span class="hljs-keyword"><span class="hljs-keyword">null</span></span> | openssl x509 -noout -dates</code> </pre> <br>  In addition to the validity period, the SSL certificate contains a lot of interesting information.  Each SSL certificate contains information about who issued it, to whom it was issued, its validity and so on. <br><br>  All this data can be extracted from an SSL site certificate using the openssl program from the command line on Linux. <br><br>  Check who issued the SSL certificate: <br><pre> <code class="hljs javascript">$ echo | openssl s_client -servername site.com -connect site.com:<span class="hljs-number"><span class="hljs-number">443</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>&gt;<span class="hljs-regexp"><span class="hljs-regexp">/dev/</span></span><span class="hljs-literal"><span class="hljs-literal">null</span></span> | openssl x509 -noout -issuer issuer= <span class="hljs-regexp"><span class="hljs-regexp">/C=US/</span></span>O=Let<span class="hljs-string"><span class="hljs-string">'s Encrypt/CN=Let'</span></span>s Encrypt Authority X3</code> </pre><br>  Check who issued the SSL certificate: <br><pre> <code class="hljs pgsql">$ echo | openssl s_client -servername site.com -<span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> site.com:<span class="hljs-number"><span class="hljs-number">443</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>&gt;/dev/<span class="hljs-keyword"><span class="hljs-keyword">null</span></span> | openssl x509 -noout -subject subject= /CN=www.site.com</code> </pre><br>  Show all the above SSL certificate information with one command: <br><pre> <code class="hljs javascript">$ echo | openssl s_client -servername site.com -connect site.com:<span class="hljs-number"><span class="hljs-number">443</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>&gt;<span class="hljs-regexp"><span class="hljs-regexp">/dev/</span></span><span class="hljs-literal"><span class="hljs-literal">null</span></span> | openssl x509 -noout -issuer -subject -dates issuer= <span class="hljs-regexp"><span class="hljs-regexp">/C=US/</span></span>O=Let<span class="hljs-string"><span class="hljs-string">'s Encrypt/CN=Let'</span></span>s Encrypt Authority X3 subject= <span class="hljs-regexp"><span class="hljs-regexp">/CN=www.site.com notBefore=Mar 18 10:55:00 2017 GMT notAfter=Jun 16 10:55:00 2017 GMT</span></span></code> </pre><br><h2>  Monitoring site availability </h2><br>  For effective work of any visited website, the constant availability of its materials for visitors is necessary, as well as the opportunity for the project administrator to have access to the server part to make changes or any other actions. <br><br>  You can easily check the availability of the site from the command line in Linux and get the code from the server with the HTTP status using commands such as TELNET or CURL. <br><br><h3>  Website availability with CURL </h3><br>  Run the following command to check the availability of the site and receive a status message from the server: <br><br><pre> <code class="hljs ruby">$ curl -Is <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/www.site.com | head -1 HTTP/</span></span><span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span> OK</code> </pre><br>  The status code '200 OK' means that the request was successfully completed and the site is available. <br><br>  Here is another example that shows how curl displays different server responses: <br><br><pre> <code class="hljs ruby">$ curl -Is <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/site.com | head -n 1 HTTP/</span></span><span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-number"><span class="hljs-number">301</span></span> Moved Permanently</code> </pre><br>  Also, using curl, you can check the availability of a separate page on the site, for example: <br><br><pre> <code class="hljs ruby">$ curl -Is <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/www.site.com/en</span></span><span class="hljs-regexp"><span class="hljs-regexp">/Bash-Colors | head -n 1 HTTP/</span></span><span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span> OK</code> </pre><br><h3>  Website availability with TELNET </h3><br>  You can also check the availability of the site and receive status messages from the server using the telnet command: <br><br><pre> <code class="hljs vhdl">$ telnet www.site.com <span class="hljs-number"><span class="hljs-number">80</span></span> Trying <span class="hljs-number"><span class="hljs-number">91.206</span></span>.<span class="hljs-number"><span class="hljs-number">200.119</span></span>... Connected <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> www.site.com. Escape <span class="hljs-built_in"><span class="hljs-built_in">character</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> '^]'. HEAD / HTTP/<span class="hljs-number"><span class="hljs-number">1.0</span></span> HOST: www.site.com &lt; ENTER&gt; &lt; ENTER&gt;</code> </pre><br>  The conclusion that means that the site is available will look like this: <br><br><pre> <code class="hljs pgsql">HTTP/<span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span> OK <span class="hljs-keyword"><span class="hljs-keyword">Server</span></span>: nginx/<span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.10</span></span> <span class="hljs-type"><span class="hljs-type">Date</span></span>: Sun, <span class="hljs-number"><span class="hljs-number">26</span></span> May <span class="hljs-number"><span class="hljs-number">2017</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">29</span></span>:<span class="hljs-number"><span class="hljs-number">46</span></span> GMT ***</code> </pre><br>  In conclusion, I would like to note that there is always an option to write your own script to check uptime in PHP or Perl, or you can create a <a href="https://spark.ru/startup/glisa/blog/11008/push-uvedomleniya-v-telegram-dlya-chajnikov" rel="nofollow noopener noreferrer">telegram bot</a> to send notifications, but by calculating the daily income from websites and correlating it with the cost of monitoring, it is often cheaper to use paid services type <a href="https://www.pagerduty.com/why-pagerduty/it-operations" rel="nofollow noopener noreferrer">PagerDuty</a> . <br><br>  Useful articles with reviews of monitoring services: <br><br><ul><li>  <a href="http://great-world.ru/monitoring-dostupnosti-sajta-kak-uznat-aptajm-1" rel="nofollow noopener noreferrer">How to find out the site uptime?</a> </li><li>  <a href="https://habrahabr.ru/company/hosting-cafe/blog/312958" rel="nofollow noopener noreferrer">7 services for monitoring sites</a> </li><li>  <a href="https://habrahabr.ru/company/hosting-cafe/blog/313518" rel="nofollow noopener noreferrer">7 more services for monitoring sites</a> </li><li>  <a href="https://blog.selectel.ru/kratkoe-vvedenie-v-riemann-monitoring-i-analiz-sobytij" rel="nofollow noopener noreferrer">Introduction to Riemann</a> </li><li>  <a href="https://blog.selectel.ru/monitoring-servisov-s-prometheus" rel="nofollow noopener noreferrer">Service Monitoring with Prometheus</a> </li><li>  <a href="https://www.shellhacks.com/ru/tag/monitoring" rel="nofollow noopener noreferrer">Monitoring: shellhacks.com blog</a> </li><li>  <a href="https://blog.selectel.ru/netdata-monitoring-v-realnom-vremeni/" rel="nofollow noopener noreferrer">Netdata: real-time monitoring</a> </li><li>  <a href="https://blog.selectel.ru/monitoring-bezopasnosti-s-sysdig-falco" rel="nofollow noopener noreferrer">Security Monitoring with Sysdig Falco</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/331648/">https://habr.com/ru/post/331648/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331638/index.html">Headache from using math software</a></li>
<li><a href="../331640/index.html">Announcement of Mobius 2017 Moscow: the conquest of Moscow</a></li>
<li><a href="../331642/index.html">Business planning in the gaming industry</a></li>
<li><a href="../331644/index.html">The story of one application: mobile "1C: Management of our company"</a></li>
<li><a href="../331646/index.html">‚ÄúThere is no such problem in Tarantula as a strong degradation with time and under load‚Äù - Vasily Soshnikov</a></li>
<li><a href="../331650/index.html">How Pony Express Manages to Deliver</a></li>
<li><a href="../331652/index.html">Google Developers Group and Softline organize the first in Russia "Google Cloud Developer Meetup # 1"</a></li>
<li><a href="../331654/index.html">Warehouse management system using CQRS and Event Sourcing. Setting Requirements</a></li>
<li><a href="../331656/index.html">Protected workplace based on VDI Huawei FusionCloud Desktop Solution 6.1</a></li>
<li><a href="../331658/index.html">Ubuntu Mobile: Post-mortem Analysis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
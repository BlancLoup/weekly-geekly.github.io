<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Playing with keywords in javascript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article tells about the module that allows you to create a subset of javascript with any keywords. Strictly for uncontrollable fun. 
 In the wake ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Playing with keywords in javascript</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/e72/222/b7e/e72222b7e97cfbd18f5f6e40e488af74.png" alt="image"><br><p>  The article tells about the module that allows you to create a subset of javascript with any keywords.  Strictly for uncontrollable fun. <br>  In the wake of an article about <a href="https://habrahabr.ru/post/283072/">rucckuu.js,</a> I envied me and decided to publish my creation: a small ecosystem to create arbitrary javascript subsets.  If the idea that some keywords have a bad fit to the context of their application or the idea that javascript is too verbose (something happens) has long creeped in on you.  If you want to good-humoredly make fun of colleagues or just explain to your mom what you do at work at all, welcome to the cat. </p><a name="habracut"></a><br><p>  So, the task of transpilation itself is quite simple - to find and replace.  The very same transpilation in the world of modern frontend is an integral part of the integration of new technologies and specifications: everyone knows what a <a href="https://babeljs.io/">babel</a> or <a href="https://github.com/google/traceur-compiler">traceur-compiler is</a> , and every self-respecting front-end developer occasionally <a href="https://esdiscuss.org/">looks</a> at the <a href="https://esdiscuss.org/">esdiscuss</a> mailing <a href="https://esdiscuss.org/">list</a> .  The lightning-fast development of our technology stack is a pain and a miracle in one bottle, because the possibilities are breathtaking, and the number of possible variations in the performance of some give up.  Very lucky for those who have them go straight to their favorite or just the keyboard that came under them.  For such brave heroes, this article may be of little academic interest, so I warn you - all of the following is intended only to satisfy the unbridled passion for creating interesting pieces.  Yes. </p><br><p>  Returning to transpilation, the task of replacing values ‚Äã‚Äãin a string is very trivial.  However, the task of replacing words that are integrated with the context is somewhat more interesting.  Without affecting all the thousands of man-hours spent on the study and creation of a theoretical basis for creating parsers of various grammars, let us proceed immediately to the most important thing.  The grammar of a programming language very clearly defines the context for the use of a particular keyword, and this use can be interpreted only in one predetermined way.  Such determinism follows from the essence of the programs, I am sure that there is no one who would like to see two different results of the execution of the same program under the same initial conditions.  Based on this, any program can be interpreted as a very specific <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25B1%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D0%25BA%25D1%2582%25D0%25BD%25D0%25BE%25D0%25B5_%25D1%2581%25D0%25B8%25D0%25BD%25D1%2582%25D0%25B0%25D0%25BA%25D1%2581%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B5_%25D0%25B4%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B2%25D0%25BE">syntax tree</a> .  So, for programming languages, it is enough just to curb the syntactic monster and get an unambiguous definition of the context of use of any word.  With context in hand, you can literally do anything. </p><br><p>  I think many have heard about <a href="http://esprima.org/">esprima</a> , the ECMAScript parser.  A little less people know about <a href="http://zaa.ch/jison/">jison</a> .  Without the first, we would not see jsx so soon, and the second is due to its CoffeeScript appearance, both tools are powerful enough, but esprima specializes in exactly what we want to do - change the appearance of our programs. </p><br><p>  The mean entry is over, to the point. </p><br><h4>  Create MeowScript </h4><br><ul><li> <code>node</code> , <code>npm</code> by my assumption do not cause you horror </li><li>  <code>npm i your-script</code> to any convenient directory </li><li>  let's <code>node_modules/your-script/lexems</code> look at <code>node_modules/your-script/lexems</code> </li><li>  create a file <code>meowscript.lex</code> </li><li>  open <code>javascript.lex</code> from the same folder somewhere nearby </li><li>  in <code>meowscript.lex</code> replace the definition of keywords with something like: </li></ul><br><pre> <code class="hljs vbscript">VAR meow <span class="hljs-keyword"><span class="hljs-keyword">LET</span></span> meoww <span class="hljs-keyword"><span class="hljs-keyword">CONST</span></span> meOw <span class="hljs-keyword"><span class="hljs-keyword">FOR</span></span> meowwr ...</code> </pre> <br><ul><li> <code>any-name.js</code> </li> </ul><br><pre> <code class="javascript hljs">meowScript = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> translator({ <span class="hljs-attr"><span class="hljs-attr">to</span></span>: <span class="hljs-string"><span class="hljs-string">'meowscript'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> output = meowScript.parse(<span class="hljs-string"><span class="hljs-string">` var kitty = new Kitty(); if (kitty.isHungry()) {kitty.feed()} `</span></span>, { <span class="hljs-attr"><span class="hljs-attr">from</span></span>: <span class="hljs-string"><span class="hljs-string">'javascript'</span></span>, <span class="hljs-attr"><span class="hljs-attr">to</span></span>: <span class="hljs-string"><span class="hljs-string">'meowscript'</span></span> }); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(output); <span class="hljs-comment"><span class="hljs-comment">// stdout: // meow kitty = MEW Kitty(); meeow (kitty.isHungry()) {kitty.feed()}</span></span></code> </pre><br><p>  Well, that's all. <br>  The scope of the module is limited by your imagination.  Under the hood is just esprima, which I mentioned, with the exception that this version is patched (manually and with love) in order to support an arbitrary set of keywords.  I keep silent about the amount of labor that had to be done in order to manually find all hardcoded uses and replace them with the correct references.  After that, it was necessary only to add a loader to support arbitrary replacement of sets of keywords during execution.  The work is quite simple, but painstaking. <br>  In addition, the packaged packaged primitive keyword provider with the most primitive parser <code>.lex</code> .  All modules are lying around in the public domain and are available for kicking for everyone. </p><br><ul><li>  <a href="https://github.com/iamfrontender/esprima-custom-keywords">esprima-custom-keywords</a> </li><li>  <a href="https://github.com/iamfrontender/keywords-provider">keywords-provider</a> </li></ul><br><p>  In fact, with this toolkit, you can create arbitrary subsets of javascript in a few minutes.  The only limitation is the inability of the module to find the standard interfaces of the node or browser.  So alas, document.body.getBoundingClientRect, gentlemen.  Adding support for the transfiguration of interfaces is also not so difficult, you just need to define the rules for identifiers and replace them according to them. </p><br><p>  Finally, the picture in the post header is not accidental, as an example of using your-script, I wrote redscript - a Russian subset of javascript.  Well, as a result of using this parser: </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span>  = '<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>';</code> </pre> <br><p>  will be correctly transported to: </p><br><pre> <code class="hljs swift">  = '<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>';</code> </pre> <br><p>  The module itself <a href="https://www.npmjs.com/package/rscript">rolls</a> in npm.  For the seed, an example of a transpiled program: </p><br><pre> <code class="javascript hljs"> (, , ) {   = <span class="hljs-number"><span class="hljs-number">0</span></span>;   = {<span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>};   =  () { }  (! &gt; <span class="hljs-number"><span class="hljs-number">10</span></span>) {  (  = <span class="hljs-number"><span class="hljs-number">0</span></span>;  &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; ++) {  (j) {  <span class="hljs-number"><span class="hljs-number">0</span></span>:  = <span class="hljs-string"><span class="hljs-string">"zero"</span></span>; ;  <span class="hljs-number"><span class="hljs-number">1</span></span>:  = <span class="hljs-string"><span class="hljs-string">"one"</span></span>; ; }   =  &gt; <span class="hljs-number"><span class="hljs-number">5</span></span> ? <span class="hljs-string"><span class="hljs-string">" 5"</span></span> : <span class="hljs-string"><span class="hljs-string">" 5"</span></span>; } }  {   = <span class="hljs-number"><span class="hljs-number">0</span></span>;  {  ( &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>) {  ( ==  ||  &gt; <span class="hljs-number"><span class="hljs-number">5</span></span>) { a[] =  +  * <span class="hljs-number"><span class="hljs-number">12</span></span>; }  = ( &lt;&lt; <span class="hljs-number"><span class="hljs-number">2</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">4</span></span>; ++; }  { --; }  ( &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) }  (e) { alert(<span class="hljs-string"><span class="hljs-string">": "</span></span> + e.message); }  { (a, ); } } }</code> </pre> <br><p>  For advertising purposes, this is still the only module that allows you to make </p><br><pre> <code class="hljs"> () { (); }</code> </pre> <br><p>  In general, inventing alternatives is incredibly interesting.  If you come up with something cool - please leave in the comments.  Have a great weekend and lots and lots of fun, infinitely much pleasure from what you do :) </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/283108/">https://habr.com/ru/post/283108/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../283096/index.html">Talk about MVC and web application architecture</a></li>
<li><a href="../283100/index.html">The future is here: Will robots push out financial analysts from Wall Street</a></li>
<li><a href="../283102/index.html">Creating a continuous deployment system: the Instagram experience</a></li>
<li><a href="../283104/index.html">Various experiments with the reception and transmission of radio signals in the FPGA</a></li>
<li><a href="../283106/index.html">Swift and compile time</a></li>
<li><a href="../283112/index.html">We use undocumented site API captionbot.ai</a></li>
<li><a href="../283116/index.html">DNS disorder Vkontakte and other companies</a></li>
<li><a href="../283118/index.html">Victor Gamov on In-Memory Data Grids and Hazelcast on jug.msk.ru</a></li>
<li><a href="../283122/index.html">Slit survey: implementation on bash (ffmpeg + imagemagick)</a></li>
<li><a href="../283128/index.html">RxSwift: working with GUI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
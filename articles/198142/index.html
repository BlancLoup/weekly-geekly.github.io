<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>QtCreator: Qt cross-compiling from linux 64 to linux 32, win32, win64 and Mac OS X; upx, usb, dmg, etc</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The Qt library allows you to make truly cross-platform applications. Once written code can be compiled for many operating systems. But the problem is ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>QtCreator: Qt cross-compiling from linux 64 to linux 32, win32, win64 and Mac OS X; upx, usb, dmg, etc</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/05c/b48/43a/05cb4843a8af9a292502bf9419f5ee24.png"><br><br>  The <a href="http://qt-project.org/">Qt</a> library allows you to make truly cross-platform applications.  Once written code can be compiled for many operating systems.  But the problem is precisely the word "compile", because  it means that you need to reboot under the target system, have a customized development environment in it, an installed and configured library zoo.  Rescues cross-compilation - a compilation that produces executable code for a platform other than the one on which it is executed. <br><a name="habracut"></a><br><h5>  Cross compiling for Windows 64 </h5><br>  Usually one of the most requested problems is building a Windows version of your application, originally developed for Linux.  An example of solving this problem can be seen <a href="http://silmor.de/qtstuff.cross.php">here</a> or <a href="http://qtlinux.narod.ru/make_for_win.htm">in Russian</a> .  You need to create the mkspecs configuration, put the Qt files in the appropriate directories and that's it.  Compiling Qt in this case is not necessary, you can download the binaries from the official site. <br>  There are several drawbacks to this approach: 1) QtCreator does not know anything about the library installed in this way;  2) The official Qt build for Windows x64 does not exist.  And if the first problem can somehow be fought, then only the compilation will help against the second ... <br><br>  Before cross-compiling, do not forget to put the cross-compiler directly (it is searched in the package by the name manager ‚Äúmingw‚Äù).  And download the qt-everywhere source from the official site.  In the <i>mkspecs</i> directory of the unpacked archive, copy the <i>win32-g ++</i> folder to <i>win64-x-g ++</i> and adjust the contents of the <i>qmake.conf</i> file.  I got the following: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre><code class="hljs mel"># # qmake configuration <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> win64-x-g++ # # Written <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> MinGW # # Cross compile example <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i686-w64-mingw32-g++: # configure -xplatform win32-g++ -device-option CROSS_COMPILE=i686-w64-mingw32- # MAKEFILE_GENERATOR = MINGW load(device_config) equals(QMAKE_HOST.os, Windows): EXE_SUFFIX = .exe TEMPLATE = app CONFIG += qt warn_on release link_prl copy_dir_files debug_and_release debug_and_release_target precompile_header QT += core gui DEFINES += UNICODE #QT_LARGEFILE_SUPPORT QMAKE_COMPILER_DEFINES += __GNUC__ WIN WIN32 WIN64 QMAKE_EXT_OBJ = .o QMAKE_EXT_RES = _res.o QMAKE_CC = $${CROSS_COMPILE}gcc QMAKE_LEX = flex QMAKE_LEXFLAGS = QMAKE_YACC = byacc QMAKE_YACCFLAGS = -d QMAKE_CFLAGS = -pipe -m64 QMAKE_CFLAGS_DEPS = -M QMAKE_CFLAGS_WARN_ON = -Wall -Wextra QMAKE_CFLAGS_WARN_OFF = -w QMAKE_CFLAGS_RELEASE = -O2 QMAKE_CFLAGS_DEBUG = -g QMAKE_CFLAGS_YACC = -Wno-unused -Wno-parentheses QMAKE_CXX = $${CROSS_COMPILE}g++ QMAKE_CXXFLAGS = $$QMAKE_CFLAGS QMAKE_CXXFLAGS_DEPS = $$QMAKE_CFLAGS_DEPS QMAKE_CXXFLAGS_WARN_ON = $$QMAKE_CFLAGS_WARN_ON QMAKE_CXXFLAGS_WARN_OFF = $$QMAKE_CFLAGS_WARN_OFF QMAKE_CXXFLAGS_RELEASE = $$QMAKE_CFLAGS_RELEASE QMAKE_CXXFLAGS_DEBUG = $$QMAKE_CFLAGS_DEBUG QMAKE_CXXFLAGS_YACC = $$QMAKE_CFLAGS_YACC QMAKE_CXXFLAGS_THREAD = $$QMAKE_CFLAGS_THREAD QMAKE_CXXFLAGS_RTTI_ON = -frtti QMAKE_CXXFLAGS_RTTI_OFF = -fno-rtti QMAKE_CXXFLAGS_EXCEPTIONS_ON = -fexceptions -mthreads QMAKE_CXXFLAGS_EXCEPTIONS_OFF = -fno-exceptions QMAKE_INCDIR = /usr/x86_64-w64-mingw32/include QMAKE_INCDIR_QT = $$[QT_INSTALL_HEADERS] QMAKE_LIBDIR_QT = $$[QT_INSTALL_LIBS] QMAKE_RUN_CC = $(CC) -c $(CFLAGS) $(INCPATH) -o $obj $src QMAKE_RUN_CC_IMP = $(CC) -c $(CFLAGS) $(INCPATH) -o $@ $&lt; QMAKE_RUN_CXX = $(CXX) -c $(CXXFLAGS) $(INCPATH) -o $obj $src QMAKE_RUN_CXX_IMP = $(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $&lt; QMAKE_LINK = $${CROSS_COMPILE}g++ QMAKE_LINK_C = $${CROSS_COMPILE}gcc #QMAKE_LFLAGS = -m64 QMAKE_LFLAGS = -m64 -mthreads -static-libgcc -static -Wl,-enable-stdcall-fixup -Wl,-enable-auto-import -Wl,-enable-runtime-pseudo-reloc -mwindows QMAKE_LFLAGS_EXCEPTIONS_ON = -mthreads QMAKE_LFLAGS_EXCEPTIONS_OFF = QMAKE_LFLAGS_RELEASE = -Wl,-s QMAKE_LFLAGS_DEBUG = QMAKE_LFLAGS_CONSOLE = -Wl,-subsystem,console QMAKE_LFLAGS_WINDOWS = -Wl,-subsystem,windows QMAKE_LFLAGS_DLL = -shared QMAKE_LINK_OBJECT_MAX = <span class="hljs-number"><span class="hljs-number">10</span></span> QMAKE_LINK_OBJECT_SCRIPT= object_script QMAKE_PREFIX_STATICLIB = lib QMAKE_EXTENSION_STATICLIB = a QMAKE_LIBS = QMAKE_LIBS_CORE = -lole32 -luuid -lws2_32 -ladvapi32 -lshell32 -luser32 -lkernel32 QMAKE_LIBS_GUI = -lgdi32 -lcomdlg32 -loleaut32 -limm32 -lwinmm -lwinspool -lws2_32 -lole32 -luuid -luser32 -ladvapi32 QMAKE_LIBS_NETWORK = -lws2_32 QMAKE_LIBS_OPENGL = -lglu32 -lopengl32 -lgdi32 -luser32 QMAKE_LIBS_COMPAT = -ladvapi32 -lshell32 -lcomdlg32 -luser32 -lgdi32 -lws2_32 QMAKE_LIBS_QT_ENTRY = -lmingw32 -lqtmain !isEmpty(QMAKE_SH) { MINGW_IN_SHELL = <span class="hljs-number"><span class="hljs-number">1</span></span> QMAKE_DIR_SEP = / QMAKE_QMAKE ~= s,\\\\,/, QMAKE_COPY = cp QMAKE_COPY_DIR = cp -r QMAKE_MOVE = mv QMAKE_DEL_FILE = rm QMAKE_MKDIR = mkdir -p QMAKE_DEL_DIR = rmdir QMAKE_CHK_DIR_EXISTS = test -d } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { QMAKE_COPY = copy /y QMAKE_COPY_DIR = xcopy /s /q /y /i QMAKE_MOVE = <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> QMAKE_DEL_FILE = del QMAKE_MKDIR = mkdir QMAKE_DEL_DIR = rmdir QMAKE_CHK_DIR_EXISTS = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> not exist } QMAKE_MOC = $$[QT_INSTALL_BINS]$${DIR_SEPARATOR}moc$${EXE_SUFFIX} QMAKE_UIC = $$[QT_INSTALL_BINS]$${DIR_SEPARATOR}uic$${EXE_SUFFIX} QMAKE_IDC = $$[QT_INSTALL_BINS]$${DIR_SEPARATOR}idc$${EXE_SUFFIX} QMAKE_IDL = midl QMAKE_LIB = $${CROSS_COMPILE}ar -ru QMAKE_RC = $${CROSS_COMPILE}windres QMAKE_ZIP = zip -r <span class="hljs-number"><span class="hljs-number">-9</span></span> QMAKE_STRIP = $${CROSS_COMPILE}<span class="hljs-keyword"><span class="hljs-keyword">strip</span></span> QMAKE_STRIPFLAGS_LIB += --<span class="hljs-keyword"><span class="hljs-keyword">strip</span></span>-unneeded load(qt_config)</code> </pre> </div></div><br>  In fact, only the paths were replaced in the specification file. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I ran <i>configure</i> with the following parameters: <br> <code>./configure -xplatform win64-x-g++ CROSS_COMPILE=x86_64-w64-mingw32- -prefix /usr/local/qt4win64 -no-webkit -no-phonon -no-phonon-backend -no-script -no-scripttools -no-multimedia -no-qt3support -fast -nomake demos -nomake examples -nomake tools -device-option -little-endian -qt-zlib -qt-libpng -qt-libjpeg -openssl-linked -no-fontconfig -no-3dnow -no-ssse3 -continue</code> <br>  Here I collect the minimum version of Qt without webkit, phonon, multimedia, etc.  For a complete list of options, see the command <i>./configure --help</i> <br><br>  Accordingly, for such an assembly, <i>g ++ - mingw-w64-x86-64</i> package should be installed, containing <i>x86_64-w64-mingw32-</i> <b>g ++</b> (the package should be installed separately in the ubuntu package). <br><br>  Next <i>make &amp;&amp; sudo make install</i> .  At the first stage of compilation, the native system compiler is used; it collects the necessary linux utilities that will be used to build windows-binaries. <br>  After installing, I have a PE32 + DLL and several ELF 64-bit LSB executables in <i>/ usr / local / qt4win64 / bin</i> , including: <i>qmake, uic, moc, rcc</i> .  Here they will come in handy for QtCreator! <br><br>  After installation, <b>do not</b> delete the unpacked directory - it is used. <br><br><h5>  Cross compiling for Windows 32 </h5><br>  Similar to compiling for Win64.  Except for the fact that there is an official build, and the library itself is not necessary to compile!  It is enough to collect <i>qmake, uic, moc, rcc</i> . <br><br>  configure: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"> <code>./configure -xplatform win32-x-g++ -prefix /usr/local/qt4win32 CROSS_COMPILE=i686-w64-mingw32- -no-webkit -no-phonon -no-phonon-backend -no-script -no-scripttools -no-multimedia -no-qt3support -fast -nomake demos -nomake examples -nomake tools -device-option -little-endian -qt-zlib -qt-libpng -qt-libjpeg -openssl-linked -no-fontconfig -no-3dnow -no-ssse3 -continue</code> <br> </div></div><br>  qmake.conf <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="hljs mel"># # qmake configuration <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> win32-x-g++ # # Written <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> MinGW # # Cross compile example <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i686-w64-mingw32-g++: # configure -xplatform win32-g++ -device-option CROSS_COMPILE=i686-w64-mingw32- # MAKEFILE_GENERATOR = MINGW load(device_config) equals(QMAKE_HOST.os, Windows): EXE_SUFFIX = .exe TEMPLATE = app CONFIG += qt warn_on release link_prl copy_dir_files debug_and_release debug_and_release_target precompile_header QT += core gui DEFINES += UNICODE #QT_LARGEFILE_SUPPORT QMAKE_COMPILER_DEFINES += __GNUC__ WIN WIN32 QMAKE_EXT_OBJ = .o QMAKE_EXT_RES = _res.o QMAKE_CC = $${CROSS_COMPILE}gcc QMAKE_LEX = flex QMAKE_LEXFLAGS = QMAKE_YACC = byacc QMAKE_YACCFLAGS = -d QMAKE_CFLAGS = -pipe -m32 QMAKE_CFLAGS_DEPS = -M QMAKE_CFLAGS_WARN_ON = -Wall -Wextra QMAKE_CFLAGS_WARN_OFF = -w QMAKE_CFLAGS_RELEASE = -O2 QMAKE_CFLAGS_DEBUG = -g QMAKE_CFLAGS_YACC = -Wno-unused -Wno-parentheses QMAKE_CXX = $${CROSS_COMPILE}g++ QMAKE_CXXFLAGS = $$QMAKE_CFLAGS QMAKE_CXXFLAGS_DEPS = $$QMAKE_CFLAGS_DEPS QMAKE_CXXFLAGS_WARN_ON = $$QMAKE_CFLAGS_WARN_ON QMAKE_CXXFLAGS_WARN_OFF = $$QMAKE_CFLAGS_WARN_OFF QMAKE_CXXFLAGS_RELEASE = $$QMAKE_CFLAGS_RELEASE QMAKE_CXXFLAGS_DEBUG = $$QMAKE_CFLAGS_DEBUG QMAKE_CXXFLAGS_YACC = $$QMAKE_CFLAGS_YACC QMAKE_CXXFLAGS_THREAD = $$QMAKE_CFLAGS_THREAD QMAKE_CXXFLAGS_RTTI_ON = -frtti QMAKE_CXXFLAGS_RTTI_OFF = -fno-rtti QMAKE_CXXFLAGS_EXCEPTIONS_ON = -fexceptions -mthreads QMAKE_CXXFLAGS_EXCEPTIONS_OFF = -fno-exceptions QMAKE_INCDIR = /usr/i686-w64-mingw32/include QMAKE_INCDIR_QT = $$[QT_INSTALL_HEADERS] QMAKE_LIBDIR_QT = $$[QT_INSTALL_LIBS] QMAKE_RUN_CC = $(CC) -c $(CFLAGS) $(INCPATH) -o $obj $src QMAKE_RUN_CC_IMP = $(CC) -c $(CFLAGS) $(INCPATH) -o $@ $&lt; QMAKE_RUN_CXX = $(CXX) -c $(CXXFLAGS) $(INCPATH) -o $obj $src QMAKE_RUN_CXX_IMP = $(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $&lt; QMAKE_LINK = $${CROSS_COMPILE}g++ QMAKE_LINK_C = $${CROSS_COMPILE}gcc QMAKE_LFLAGS = -m32 -mthreads -static-libgcc -static -Wl,-enable-stdcall-fixup -Wl,-enable-auto-import -Wl,-enable-runtime-pseudo-reloc -mwindows QMAKE_LFLAGS_EXCEPTIONS_ON = -mthreads QMAKE_LFLAGS_EXCEPTIONS_OFF = QMAKE_LFLAGS_RELEASE = -Wl,-s QMAKE_LFLAGS_DEBUG = QMAKE_LFLAGS_CONSOLE = -Wl,-subsystem,console QMAKE_LFLAGS_WINDOWS = -Wl,-subsystem,windows QMAKE_LFLAGS_DLL = -shared QMAKE_LINK_OBJECT_MAX = <span class="hljs-number"><span class="hljs-number">10</span></span> QMAKE_LINK_OBJECT_SCRIPT= object_script QMAKE_PREFIX_STATICLIB = lib QMAKE_EXTENSION_STATICLIB = a QMAKE_LIBS = QMAKE_LIBS_CORE = -lole32 -luuid -lws2_32 -ladvapi32 -lshell32 -luser32 -lkernel32 QMAKE_LIBS_GUI = -lgdi32 -lcomdlg32 -loleaut32 -limm32 -lwinmm -lwinspool -lws2_32 -lole32 -luuid -luser32 -ladvapi32 QMAKE_LIBS_NETWORK = -lws2_32 QMAKE_LIBS_OPENGL = -lglu32 -lopengl32 -lgdi32 -luser32 QMAKE_LIBS_COMPAT = -ladvapi32 -lshell32 -lcomdlg32 -luser32 -lgdi32 -lws2_32 QMAKE_LIBS_QT_ENTRY = -lmingw32 -lqtmain !isEmpty(QMAKE_SH) { MINGW_IN_SHELL = <span class="hljs-number"><span class="hljs-number">1</span></span> QMAKE_DIR_SEP = / QMAKE_QMAKE ~= s,\\\\,/, QMAKE_COPY = cp QMAKE_COPY_DIR = cp -r QMAKE_MOVE = mv QMAKE_DEL_FILE = rm QMAKE_MKDIR = mkdir -p QMAKE_DEL_DIR = rmdir QMAKE_CHK_DIR_EXISTS = test -d } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { QMAKE_COPY = copy /y QMAKE_COPY_DIR = xcopy /s /q /y /i QMAKE_MOVE = <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> QMAKE_DEL_FILE = del QMAKE_MKDIR = mkdir QMAKE_DEL_DIR = rmdir QMAKE_CHK_DIR_EXISTS = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> not exist } QMAKE_MOC = $$[QT_INSTALL_BINS]$${DIR_SEPARATOR}moc$${EXE_SUFFIX} QMAKE_UIC = $$[QT_INSTALL_BINS]$${DIR_SEPARATOR}uic$${EXE_SUFFIX} QMAKE_IDC = $$[QT_INSTALL_BINS]$${DIR_SEPARATOR}idc$${EXE_SUFFIX} QMAKE_IDL = midl QMAKE_LIB = $${CROSS_COMPILE}ar -ru QMAKE_RC = $${CROSS_COMPILE}windres QMAKE_ZIP = zip -r <span class="hljs-number"><span class="hljs-number">-9</span></span> QMAKE_STRIP = $${CROSS_COMPILE}<span class="hljs-keyword"><span class="hljs-keyword">strip</span></span> QMAKE_STRIPFLAGS_LIB += --<span class="hljs-keyword"><span class="hljs-keyword">strip</span></span>-unneeded load(qt_config)</code> </pre> </div></div><br><br><h5>  Cross compilation for Mac OS X </h5><br>  Cross compilation for poppy is also very similar, except that you will need to compile and compiler.  I collected <a href="https://github.com/Tatsh/xchain">this instruction</a> .  It took a full day of time and a lot of nerves.  The process will need a working Mac OS X (at least on a virtual machine) with Xcode installed in order to take the necessary files from there.  When compiling your Qt applications running Mac OS X is not needed. <br><br>  configure: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"> <code>./configure -xplatform macx-x-g++ -prefix /usr/x86_64-apple-darwin11/usr/Qt CROSS_COMPILE=/usr/x86_64-apple-darwin11/usr/bin/x86_64-apple-darwin11- -no-webkit -no-phonon -no-phonon-backend -no-script -no-scripttools -no-multimedia -no-qt3support -fast -nomake demos -nomake examples -nomake tools -device-option -little-endian -qt-zlib -qt-libpng -qt-libjpeg -openssl-linked -no-fontconfig -no-3dnow -no-ssse3 -continue</code> </div> </div><br>  qmake.conf: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="hljs swift">#macx-x-g++ (different from g++.conf) # # qmake configuration <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> macx-g++ # # <span class="hljs-type"><span class="hljs-type">Mac</span></span> <span class="hljs-type"><span class="hljs-type">OS</span></span> <span class="hljs-type"><span class="hljs-type">X</span></span> + command-line compiler # <span class="hljs-type"><span class="hljs-type">MAKEFILE_GENERATOR</span></span> = <span class="hljs-type"><span class="hljs-type">UNIX</span></span> <span class="hljs-type"><span class="hljs-type">TARGET_PLATFORM</span></span> = macx <span class="hljs-type"><span class="hljs-type">TEMPLATE</span></span> = app <span class="hljs-type"><span class="hljs-type">CONFIG</span></span> += qt warn_on release app_bundle incremental global_init_link_order lib_version_first plugin_no_soname link_prl <span class="hljs-type"><span class="hljs-type">QT</span></span> += core gui <span class="hljs-type"><span class="hljs-type">QMAKE_INCREMENTAL_STYLE</span></span> = sublib #include(../common/mac.conf) # # qmake configuration <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> common <span class="hljs-type"><span class="hljs-type">Mac</span></span> <span class="hljs-type"><span class="hljs-type">OS</span></span> <span class="hljs-type"><span class="hljs-type">X</span></span> # #<span class="hljs-type"><span class="hljs-type">QMAKE_RESOURCE</span></span> = /<span class="hljs-type"><span class="hljs-type">Developer</span></span>/<span class="hljs-type"><span class="hljs-type">Tools</span></span>/<span class="hljs-type"><span class="hljs-type">Rez</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_EXTENSION_SHLIB</span></span> = dylib <span class="hljs-type"><span class="hljs-type">QMAKE_INCDIR</span></span> = /usr/x86_64-apple-darwin11/usr/include <span class="hljs-type"><span class="hljs-type">QMAKE_LIBDIR</span></span> = <span class="hljs-type"><span class="hljs-type">QMAKE_INCDIR_QT</span></span> = /usr/x86_64-apple-darwin11/usr/<span class="hljs-type"><span class="hljs-type">Qt</span></span>/include <span class="hljs-type"><span class="hljs-type">QMAKE_LIBDIR_QT</span></span> = /usr/x86_64-apple-darwin11/usr/<span class="hljs-type"><span class="hljs-type">Qt</span></span>/lib <span class="hljs-type"><span class="hljs-type">QMAKE_INCDIR_OPENGL</span></span> = /<span class="hljs-type"><span class="hljs-type">System</span></span>/<span class="hljs-type"><span class="hljs-type">Library</span></span>/<span class="hljs-type"><span class="hljs-type">Frameworks</span></span>/<span class="hljs-type"><span class="hljs-type">OpenGL</span></span>.framework/<span class="hljs-type"><span class="hljs-type">Headers</span></span> \ /<span class="hljs-type"><span class="hljs-type">System</span></span>/<span class="hljs-type"><span class="hljs-type">Library</span></span>/<span class="hljs-type"><span class="hljs-type">Frameworks</span></span>/<span class="hljs-type"><span class="hljs-type">AGL</span></span>.framework/<span class="hljs-type"><span class="hljs-type">Headers</span></span>/ <span class="hljs-type"><span class="hljs-type">QMAKE_FRAMEWORKDIR_QT</span></span>= /usr/x86_64-apple-darwin11/usr/<span class="hljs-type"><span class="hljs-type">QtFrameworks</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_FIX_RPATH</span></span> = install_name_tool -id <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_RPATH</span></span> = <span class="hljs-type"><span class="hljs-type">QMAKE_LIBS_DYNLOAD</span></span> = <span class="hljs-type"><span class="hljs-type">QMAKE_LIBS_OPENGL</span></span> = -framework <span class="hljs-type"><span class="hljs-type">OpenGL</span></span> -framework <span class="hljs-type"><span class="hljs-type">AGL</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_LIBS_OPENGL_QT</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_LIBS_OPENGL</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_LIBS_THREAD</span></span> = <span class="hljs-type"><span class="hljs-type">QMAKE_MOC</span></span> = $$[<span class="hljs-type"><span class="hljs-type">QT_INSTALL_BINS</span></span>]/moc <span class="hljs-type"><span class="hljs-type">QMAKE_UIC</span></span> = $$[<span class="hljs-type"><span class="hljs-type">QT_INSTALL_BINS</span></span>]/uic <span class="hljs-type"><span class="hljs-type">QMAKE_AR</span></span> = /usr/x86_64-apple-darwin11/usr/bin/x86_64-apple-darwin11-ar cq <span class="hljs-type"><span class="hljs-type">QMAKE_RANLIB</span></span> = /usr/x86_64-apple-darwin11/usr/bin/x86_64-apple-darwin11-ranlib -s <span class="hljs-type"><span class="hljs-type">QMAKE_TAR</span></span> = tar -cf <span class="hljs-type"><span class="hljs-type">QMAKE_GZIP</span></span> = gzip -9f <span class="hljs-type"><span class="hljs-type">QMAKE_COPY</span></span> = cp -f <span class="hljs-type"><span class="hljs-type">QMAKE_COPY_FILE</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_COPY</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_COPY_DIR</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_COPY</span></span> -<span class="hljs-type"><span class="hljs-type">R</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_MOVE</span></span> = mv -f <span class="hljs-type"><span class="hljs-type">QMAKE_DEL_FILE</span></span> = rm -f <span class="hljs-type"><span class="hljs-type">QMAKE_DEL_DIR</span></span> = rmdir <span class="hljs-type"><span class="hljs-type">QMAKE_CHK_DIR_EXISTS</span></span> = test -d <span class="hljs-type"><span class="hljs-type">QMAKE_MKDIR</span></span> = mkdir -p <span class="hljs-type"><span class="hljs-type">QMAKE_MACOSX_DEPLOYMENT_TARGET</span></span> = <span class="hljs-number"><span class="hljs-number">10.5</span></span> # overridden to <span class="hljs-number"><span class="hljs-number">10.5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-type"><span class="hljs-type">Cocoa</span></span> on the compiler command line # # qmake configuration <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> common unix # <span class="hljs-type"><span class="hljs-type">QMAKE_LEX</span></span> = flex <span class="hljs-type"><span class="hljs-type">QMAKE_LEXFLAGS</span></span> += <span class="hljs-type"><span class="hljs-type">QMAKE_YACC</span></span> = yacc <span class="hljs-type"><span class="hljs-type">QMAKE_YACCFLAGS</span></span> += -d <span class="hljs-type"><span class="hljs-type">QMAKE_YACCFLAGS_MANGLE</span></span> += -p $base -b $base <span class="hljs-type"><span class="hljs-type">QMAKE_YACC_HEADER</span></span> = $base.tab.h <span class="hljs-type"><span class="hljs-type">QMAKE_YACC_SOURCE</span></span> = $base.tab.<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_PREFIX_SHLIB</span></span> = lib <span class="hljs-type"><span class="hljs-type">QMAKE_PREFIX_STATICLIB</span></span> = lib <span class="hljs-type"><span class="hljs-type">QMAKE_EXTENSION_STATICLIB</span></span> = a #include(../common/gcc-base-macx.conf) # # <span class="hljs-type"><span class="hljs-type">This</span></span> file <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> used <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> a basis <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the following compilers: # # - <span class="hljs-type"><span class="hljs-type">The</span></span> <span class="hljs-type"><span class="hljs-type">QNX</span></span> qcc compiler # # <span class="hljs-type"><span class="hljs-type">The</span></span> only difference between this and gcc-base.conf <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> that -pipe <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> removed # <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> it's on by <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> qcc (and has an analogous -nopipe option) # <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS</span></span> += <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_DEPS</span></span> += -<span class="hljs-type"><span class="hljs-type">M</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_WARN_ON</span></span> += -<span class="hljs-type"><span class="hljs-type">Wall</span></span> -<span class="hljs-type"><span class="hljs-type">W</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_WARN_OFF</span></span> += -w <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_RELEASE</span></span> += -<span class="hljs-type"><span class="hljs-type">O2</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_DEBUG</span></span> += -g <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_SHLIB</span></span> += -fPIC <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_STATIC_LIB</span></span> += -fPIC <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_YACC</span></span> += -<span class="hljs-type"><span class="hljs-type">Wno</span></span>-unused -<span class="hljs-type"><span class="hljs-type">Wno</span></span>-parentheses <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_HIDESYMS</span></span> += -fvisibility=hidden <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_DEPS</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_DEPS</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_WARN_ON</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_WARN_ON</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_WARN_OFF</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_WARN_OFF</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_RELEASE</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_RELEASE</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_DEBUG</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_DEBUG</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_SHLIB</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_SHLIB</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_STATIC_LIB</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_STATIC_LIB</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_YACC</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_YACC</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_HIDESYMS</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_HIDESYMS</span></span> -fvisibility-inlines-hidden <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS</span></span> += <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_DEBUG</span></span> += <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_APP</span></span> += <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_RELEASE</span></span> += # # <span class="hljs-type"><span class="hljs-type">Base</span></span> qmake configuration <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-type"><span class="hljs-type">GCC</span></span> on <span class="hljs-type"><span class="hljs-type">Mac</span></span> <span class="hljs-type"><span class="hljs-type">OS</span></span> <span class="hljs-type"><span class="hljs-type">X</span></span> # # <span class="hljs-type"><span class="hljs-type">Before</span></span> making changes to this file, please read the comment <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> # gcc-base.conf, to make sure the change goes <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">right</span></span> place. # # <span class="hljs-type"><span class="hljs-type">To</span></span> verify that your change has the desired effect on the <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> configuration # you can use the manual test <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tests/manual/mkspecs. # <span class="hljs-type"><span class="hljs-type">QMAKE_COMPILER_DEFINES</span></span> += __APPLE__ __GNUC__ <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_X86</span></span> += -arch i386 <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_X86_64</span></span> += -arch x86_64 <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_PPC</span></span> += -arch ppc <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_PPC_64</span></span> += -arch ppc64 <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_DWARF2</span></span> += -gdwarf-<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_X86</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_X86</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_X86_64</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_X86_64</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_PPC</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_PPC</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_PPC_64</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_PPC_64</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_DWARF2</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_DWARF2</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_OBJECTIVE_CFLAGS</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_OBJECTIVE_CFLAGS_WARN_ON</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_WARN_ON</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_OBJECTIVE_CFLAGS_WARN_OFF</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_WARN_OFF</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_OBJECTIVE_CFLAGS_DEBUG</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_DEBUG</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_OBJECTIVE_CFLAGS_RELEASE</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_RELEASE</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_OBJECTIVE_CFLAGS_HIDESYMS</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_HIDESYMS</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_OBJECTIVE_CFLAGS_X86</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_X86</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_OBJECTIVE_CFLAGS_X86_64</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_X86_64</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_OBJECTIVE_CFLAGS_PPC</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_PPC</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_OBJECTIVE_CFLAGS_PPC_64</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_PPC_64</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_X86</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_X86</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_X86_64</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_X86_64</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_PPC</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_PPC</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_PPC_64</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_PPC_64</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS</span></span> += -headerpad_max_install_names <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_SHLIB</span></span> += -single_module -dynamiclib <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_PLUGIN</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_SHLIB</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_INCREMENTAL</span></span> += -undefined suppress -flat_namespace <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_SONAME</span></span> += -install_name$${<span class="hljs-type"><span class="hljs-type">LITERAL_WHITESPACE</span></span>} <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_VERSION</span></span> += -current_version$${<span class="hljs-type"><span class="hljs-type">LITERAL_WHITESPACE</span></span>} <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_COMPAT_VERSION</span></span> += -compatibility_version$${<span class="hljs-type"><span class="hljs-type">LITERAL_WHITESPACE</span></span>} # # <span class="hljs-type"><span class="hljs-type">Qmake</span></span> configuration <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the <span class="hljs-type"><span class="hljs-type">GNU</span></span> <span class="hljs-type"><span class="hljs-type">C</span></span>++ compiler # # <span class="hljs-type"><span class="hljs-type">Before</span></span> making changes to this file, please read the comment <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> # gcc-base.conf, to make sure the change goes <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">right</span></span> place. # # <span class="hljs-type"><span class="hljs-type">To</span></span> verify that your change has the desired effect on the <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> configuration # you can use the manual test <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tests/manual/mkspecs. # <span class="hljs-type"><span class="hljs-type">QMAKE_CC</span></span> = /usr/x86_64-apple-darwin11/usr/bin/x86_64-apple-darwin11-g++ <span class="hljs-type"><span class="hljs-type">QMAKE_LINK_C</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CC</span></span> -<span class="hljs-type"><span class="hljs-type">F</span></span>/usr/x86_64-apple-darwin11/usr/<span class="hljs-type"><span class="hljs-type">Frameworks</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_LINK_C_SHLIB</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CC</span></span> -<span class="hljs-type"><span class="hljs-type">F</span></span>/usr/x86_64-apple-darwin11/usr/<span class="hljs-type"><span class="hljs-type">Frameworks</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_RELEASE_WITH_DEBUGINFO</span></span> += -<span class="hljs-type"><span class="hljs-type">O2</span></span> -g <span class="hljs-type"><span class="hljs-type">QMAKE_CXX</span></span> = /usr/x86_64-apple-darwin11/usr/bin/x86_64-apple-darwin11-g++ <span class="hljs-type"><span class="hljs-type">QMAKE_LINK</span></span> = /usr/x86_64-apple-darwin11/usr/bin/x86_64-apple-darwin11-g++ -<span class="hljs-type"><span class="hljs-type">F</span></span>/usr/x86_64-apple-darwin11/usr/<span class="hljs-type"><span class="hljs-type">Frameworks</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_LINK_SHLIB</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CXX</span></span> -<span class="hljs-type"><span class="hljs-type">F</span></span>/usr/x86_64-apple-darwin11/usr/<span class="hljs-type"><span class="hljs-type">Frameworks</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_RELEASE_WITH_DEBUGINFO</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_RELEASE_WITH_DEBUGINFO</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_PCH_OUTPUT_EXT</span></span> = .gch <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_PRECOMPILE</span></span> = -x <span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-header -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> ${<span class="hljs-type"><span class="hljs-type">QMAKE_PCH_INPUT</span></span>} -o ${<span class="hljs-type"><span class="hljs-type">QMAKE_PCH_OUTPUT</span></span>} <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_USE_PRECOMPILE</span></span> = -include ${<span class="hljs-type"><span class="hljs-type">QMAKE_PCH_OUTPUT_BASE</span></span>} <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_PRECOMPILE</span></span> = -x <span class="hljs-built_in"><span class="hljs-built_in">c</span></span>++-header -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> ${<span class="hljs-type"><span class="hljs-type">QMAKE_PCH_INPUT</span></span>} -o ${<span class="hljs-type"><span class="hljs-type">QMAKE_PCH_OUTPUT</span></span>} <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_USE_PRECOMPILE</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_USE_PRECOMPILE</span></span> #include(../common/g++-macx.conf) # # <span class="hljs-type"><span class="hljs-type">Qmake</span></span> configuration <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the <span class="hljs-type"><span class="hljs-type">GNU</span></span> <span class="hljs-type"><span class="hljs-type">C</span></span>++ compiler on <span class="hljs-type"><span class="hljs-type">Mac</span></span> <span class="hljs-type"><span class="hljs-type">OS</span></span> <span class="hljs-type"><span class="hljs-type">X</span></span> # # <span class="hljs-type"><span class="hljs-type">Before</span></span> making changes to this file, please read the comment <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> # gcc-base.conf, to make sure the change goes <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">right</span></span> place. # # <span class="hljs-type"><span class="hljs-type">To</span></span> verify that your change has the desired effect on the <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> configuration # you can use the manual test <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tests/manual/mkspecs. # <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_RELEASE_WITH_DEBUGINFO</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_DWARF2</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_RELEASE_WITH_DEBUGINFO</span></span> += $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_DWARF2</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_RELEASE_WITH_DEBUGINFO</span></span> += -g $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_DWARF2</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_STATIC_LIB</span></span> += -all_load <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_X86_64</span></span> += -<span class="hljs-type"><span class="hljs-type">Xarch_x86_64</span></span> -mmacosx-version-<span class="hljs-built_in"><span class="hljs-built_in">min</span></span>=<span class="hljs-number"><span class="hljs-number">10.5</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_PPC_64</span></span> += -<span class="hljs-type"><span class="hljs-type">Xarch_ppc64</span></span> -mmacosx-version-<span class="hljs-built_in"><span class="hljs-built_in">min</span></span>=<span class="hljs-number"><span class="hljs-number">10.5</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_X86_64</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_X86_64</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_CXXFLAGS_PPC_64</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_PPC_64</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_OBJECTIVE_CFLAGS_X86_64</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_X86_64</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_OBJECTIVE_CFLAGS_PPC_64</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_PPC_64</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_X86_64</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_X86_64</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_LFLAGS_PPC_64</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_PPC_64</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_OBJCFLAGS_PRECOMPILE</span></span> = -x objective-<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-header -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> ${<span class="hljs-type"><span class="hljs-type">QMAKE_PCH_INPUT</span></span>} -o ${<span class="hljs-type"><span class="hljs-type">QMAKE_PCH_OUTPUT</span></span>} <span class="hljs-type"><span class="hljs-type">QMAKE_OBJCFLAGS_USE_PRECOMPILE</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_USE_PRECOMPILE</span></span> <span class="hljs-type"><span class="hljs-type">QMAKE_OBJCXXFLAGS_PRECOMPILE</span></span> = -x objective-<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>++-header -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> ${<span class="hljs-type"><span class="hljs-type">QMAKE_PCH_INPUT</span></span>} -o ${<span class="hljs-type"><span class="hljs-type">QMAKE_PCH_OUTPUT</span></span>} <span class="hljs-type"><span class="hljs-type">QMAKE_OBJCXXFLAGS_USE_PRECOMPILE</span></span> = $$<span class="hljs-type"><span class="hljs-type">QMAKE_CFLAGS_USE_PRECOMPILE</span></span> load(qt_config)</code> </pre> </div></div><br>  Remember, on Mac OS X, <b>links to the</b> .a library are not needed. <br><br><h5>  QtCreator setup </h5><br>  First you need to add to the list all installed compilers.  Tools - Options - Build and Run - Toolkits: <br><img src="https://habrastorage.org/getpro/habr/post_images/3b6/43c/2d6/3b643c2d6c6463b433a1158f235187ce.png"><br>  QtCreator normally defines ABI normally, but it's best to double-check.  You can also notice that the system x64 GCC in linux can also generate 32-bit applications.  However, this does not negate the fact that 32-bit versions of libraries are also needed. <br><br>  After compilers, you can add Qt profiles: <br><img src="https://habrastorage.org/getpro/habr/post_images/83c/531/88a/83c53188a915ae481097cdc957c98ce7.png"><br>  Here, when adding a profile, <i>qmake, uic, moc, rcc</i> collected earlier will be useful, because you need to select the directory with <i>qmake</i> .  A yellow icon with an exclamation mark to the left of the profile means warning, but QtCreator can use such a Qt profile.  But if the icon is red, then the profile is not working.  This can happen if the directory structure is incorrect.  Or if you delete the directory in which you compiled Qt. <br><br>  The following settings need to be done in each created project. <br>  To add a specific Qt profile, go to the ‚ÄúProjects‚Äù tab (Ctrl + 5) with the active project: <br><img src="https://habrastorage.org/getpro/habr/post_images/65c/330/cdc/65c330cdc80a8551e462568d3cae9d33.png"><br><br>  By default, only the Qt system profile is listed in the ‚ÄúEdit build configuration‚Äù list.  But in the list of the ‚ÄúAdd‚Äù button there are all Qt profiles added to the build parameters. <br><br>  In the main assembly settings, you need to check the compiler library pair.  So that both were from the same operating system. <br><br>  The ‚Äúqmake‚Äù and ‚ÄúBuild‚Äù build steps QtCreator installs by default.  And here I added the special stages "upx" and "dmgbuild" manually for the project.  The ‚Äúupx‚Äù stage is performed each time you click on the ‚ÄúBuild project‚Äù button.  However, if the executable file has not been changed, then <i>upx</i> will return an error that it has already processed the file.  In case of an error, the next stage is not called, i.e.  The dmg file will be updated only if upx worked successfully. <br><br>  For the <i>upx</i> stage to work, it must be installed in the system.  However, even working in a linux environment and delivered from the package manager <i>upx</i> can compress applications: linux32 / 64, win32, macos32 / 64.  Not for all projects, upx-compression is really needed, the stage is shown rather for example. <br><br>  For the ‚Äúdmgbuild‚Äù stage I used the <a href="http://confluence.concord.org/display/CCTR/Creating%2BMacOS%2Bdmg%2Bfiles%2Bin%2BLinux">make_dmg</a> script.  He needs <i>root</i> rights, so he added the script to the <i>/ etc / sudoers</i> file <br><br><h5>  Changes in the project file and use of third-party libraries </h5><br>  My project uses <i>libusb</i> , and this is not a part of Qt.  It was also necessary to enable the platform-dependent HID implementation.  The following lines were added to the project file: <br><br><pre> <code class="hljs nginx"><span class="hljs-section"><span class="hljs-section">macx</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">INCLUDEPATH</span></span> += $<span class="hljs-variable"><span class="hljs-variable">$PWD</span></span>/libusbx/ SOURCES += BootLoader/HIDAPI/mac/hid.c LIBS += -framework IOKit -framework CoreFoundation -lusb-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> ICON = AqPicFlash.icns } win32: { <span class="hljs-attribute"><span class="hljs-attribute">INCLUDEPATH</span></span> += $<span class="hljs-variable"><span class="hljs-variable">$PWD</span></span>/libusbx/ LIBS += -lsetupapi -lole32 SOURCES += BootLoader/HIDAPI/windows/hid.cpp RC_FILE = WinIcon.rc } win32: !win64-x-g++ { <span class="hljs-attribute"><span class="hljs-attribute">LIBS</span></span> += -L$<span class="hljs-variable"><span class="hljs-variable">$PWD</span></span>/libusbx/ -lusb-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">32</span></span>.dll } win64-x-g++ { <span class="hljs-attribute"><span class="hljs-attribute">LIBS</span></span> += -L$<span class="hljs-variable"><span class="hljs-variable">$PWD</span></span>/libusbx/ -lusb-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">64</span></span>.dll } unix: !macx { <span class="hljs-attribute"><span class="hljs-attribute">CONFIG</span></span> += link_pkgconfig PKGCONFIG += libusb-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> SOURCES += BootLoader/HIDAPI/linux/hid-libusb.c }</code> </pre> <br>  In Mac OS X and Linux, we link with the system libusb, in Windows, depending on the bit length, we link with <i>libusb-1.0-32.dll.a</i> or <i>libusb-1.0-64.dll.a</i> .  Remember that the <b>.a</b> file can be renamed, but the application will still depend on <i>libusb-1.0.dll</i> .  In Linux, the parameters for libusb are taken through the system utility pkgconfig.  In addition to libusb, we connect the necessary system libraries and icons for each operating system. <br><br>  It is convenient to post the resulting files for different operating systems on directories.  You can do it like this: <br><pre> <code class="hljs nginx"><span class="hljs-section"><span class="hljs-section">macx</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">DESTDIR</span></span> = mac OBJECTS_DIR = mac MOC_DIR = mac UI_DIR = mac RCC_DIR = mac } unix: !macx { <span class="hljs-attribute"><span class="hljs-attribute">DESTDIR</span></span> = linux OBJECTS_DIR = linux MOC_DIR = linux UI_DIR = linux RCC_DIR = linux } win32 { <span class="hljs-attribute"><span class="hljs-attribute">DESTDIR</span></span> = windows/release OBJECTS_DIR = windows MOC_DIR = windows UI_DIR = windows RCC_DIR = windows } win64-x-g++ { <span class="hljs-attribute"><span class="hljs-attribute">DESTDIR</span></span> = win64/release OBJECTS_DIR = win64 MOC_DIR = win64 UI_DIR = win64 RCC_DIR = win64 }</code> </pre> <br>  The target <i>win64-x-g ++</i> refers to <i>win32</i> , however in the project file it comes last and overwrites the settings. <br><br><h5>  Result </h5><br>  Now, to build an application for one or another operating system, just select the build type, as shown in the very first screenshot, and click "Build project" </div><p>Source: <a href="https://habr.com/ru/post/198142/">https://habr.com/ru/post/198142/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../198128/index.html">Free mobile phone calls via Tele2</a></li>
<li><a href="../198132/index.html">02 Collector: Friday content, 3D and typography</a></li>
<li><a href="../198134/index.html">The user selected the domain for "renewal of registration with malicious intent"</a></li>
<li><a href="../198138/index.html">A selection of useful CSS recipes, or what we do on bare Fridays.</a></li>
<li><a href="../198140/index.html">Python Meetup: Garbage Collector</a></li>
<li><a href="../198144/index.html">How I stopped worrying and fell in love with Hyper-V Server</a></li>
<li><a href="../198148/index.html">FreeBSD auto configuration</a></li>
<li><a href="../198150/index.html">Getting to know Go, part 2: writing a grabber of images with a balancer and perversions</a></li>
<li><a href="../198152/index.html">Bitcoin users may have discovered Ross Ulbricht‚Äôs personal wallet</a></li>
<li><a href="../198154/index.html">Localization of Node.js applications Part 2: Toolkit and Process</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
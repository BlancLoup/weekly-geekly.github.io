<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Planning computing resources and server selection for RUVDS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="RUVDS , as an official partner of Huawei, is implementing a new virtualization system to provide its customers with access to modern cloud technologie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Planning computing resources and server selection for RUVDS</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/bdc/b16/2ba/bdcb162babf640c7a808573364ca516b.jpg"><br><br>  <a href="https://ruvds.com/">RUVDS</a> , as an official partner of Huawei, is implementing a new virtualization system to provide its customers with access to modern cloud technologies with a high degree of reliability and security.  This is a new experience for us, and we continue to share it with the readers of our blog. <br>  You can read the beginning in the <a href="https://habrahabr.ru/company/ruvds/blog/280900/">first article</a> in this series.  Before you the second.  In it, we will plan the necessary computing resources and consider an example of how to calculate the required number of servers of a suitable configuration. <a name="habracut"></a><br>  In the RUVDS project, x64-based servers are used to create a cloud-based virtualization platform.  Physical servers are pooled computing resources, and services are migrated to the cloud platform during migration.  Sharing resources within a cloud platform allows for dynamic resource planning, maximizes the efficiency of their use and reduces hardware and maintenance costs.  Database components can be deployed on physical servers. <br><br>  When choosing servers for RUVDS, the following requirements were followed: <br>  ‚Ä¢ We need a server with a modern architecture that combines network support, management, power supply and heat dissipation in a single shelf.  It should provide the ability to jointly deploy multiple servers, simplify cabling required for implementing network connections of the project, maximize the use of space in the server rack, and also support hot swapping. <br>  ‚Ä¢ Each server must have at least 4 processors and at least 128 GB of RAM.  This requirement is caused by the fact that servers are used to create virtual resource pools. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Based on these requirements, we chose blade servers with at least 4 latest-generation Intel Xeon processors and at least 384GB of RAM for RUVDS project clients. <br><br>  <b>Example of planning the number of servers</b> <br>  <i>For calculation, the values ‚Äã‚Äãof SPECint2006 Rates are used.</i>  <i>SPEC values ‚Äã‚Äãare taken at <a href="http://www.spec.org/cgi-bin/osgresults%3Fconf%3Drint2006">www.spec.org/cgi-bin/osgresults?conf=rint2006</a> .</i> <i><br></i>  <i>The following are two methods of calculation: the method of estimating calculation based on the calculation of general requirements for the SPEC parameters and the exact method based on converting the SPEC value to the number of vCPUs and then converting the number of vCPUs to the number of servers.</i> <i><br></i>  <i>These calculations are given as an example to understand how the calculation of the number of servers.</i> <br><br>  <i><b>Method 1: Calculation Based on General SPEC Parameter Requirements</b></i> <br>  The essence of this method is as follows: all SPEC values ‚Äã‚Äãrequired for the original application systems are added up to calculate the total computing power, after which the SPEC values ‚Äã‚Äãfor the new servers are queried.  The number of servers is equal to the total computing power divided by the SPEC value for new servers. <br><br>  An example of the calculation is given below. <br>  The average CPU utilization rate for the 107 Dell PowerEdge 2950 servers (8 GB of memory and two E5420 CPUs with a 2.5 GHz core frequency and four cores) is 20%.  The SPEC value is 118 (it is obtained at <a href="http://www.spec.org/cgi-bin/osgresults%3Fconf%3Drint2006">www.spec.org/cgi-bin/osgresults?conf=rint2006</a> ). <br>  It is required to migrate application systems to RH5885 servers (each with four eight-core E7-4820 CPUs with a fundamental frequency of 2 GHz).  The SPEC value is 775. <br>  Therefore, the number of servers can be calculated by the following formulas: <br>  Computational power requirement = ‚àë (SPEC value for existing servers x CPU utilization ratio) x (1 + redundancy ratio) = 107 x 118 x 20% x (1 + 20%) = 3283 <br><br>  <i>Note: Typically, the reserve ratio is between 10% and 20%.</i>  <i>A value of 20% is recommended.</i> <br><br>  Available server computing power = SPEC value x CPU utilization factor x (1 - the number of hyper threads UVP / total number of hyper threads) = 775 x 70% x [1 - 2 / (4 x 8 x 2)] = 525 <br><br>  <i>Note: The number of hyper-threads used by the base hypervisor is 2. The CPU utilization rate is between 50% and 70%</i> . <br>  Total number of servers = rounding up (computational power / available computing power of the server) = rounding up (3283/525) = 7 servers <br><br>  <i>Note: When calculating the actual number of servers, you must consider redundancy.</i>  <i>To support the VM HA function, you must have at least one backup server per cluster.</i> <br>  In the case of 8 GB memory modules, the number of memory modules per server can be determined as follows: <br>  Number of memory modules per server = (total memory / number of servers + 8 GB) / 8 GB = (987 GB / 7 servers + 8 GB for virtualization) / 8 = 19 memory modules <br>  <i>Note: It is recommended to configure an even number of memory modules.</i>  <i>Make sure that the memory utilization rate does not exceed 80%.</i> <br><br>  <i><b>Method 2: calculate the number of vCPUs based on the SPEC value</b></i> <br>  The number of servers is determined by the number of vCPU VMs and the amount of memory.  Currently servers support memory modules of 16 GB and 32 GB.  Therefore, memory is not a factor limiting server performance. <br>  An example of the calculation is given below. <br>  The average CPU utilization rate of 107 Dell PowerEdge 2950 servers (8 GB of memory and two E5420 CPUs with 2.5 GHz core frequency and four cores) is 20%.  The SPEC value is 118 (it is obtained at <a href="http://www.spec.org/cgi-bin/osgresults%3Fconf%3Drint2006">www.spec.org/cgi-bin/osgresults?conf=rint2006</a> ). <br>  The migration of application systems to RH5885 servers (each with four eight-core E7-4820 CPUs with a main frequency of 2 GHz) is required.  The SPEC value is 775. <br>  Consequently, the computing power of a single server can be calculated using the following formulas: <br>  Computational power of a single server vCPU = SPEC CINT2006 Rates value x CPU utilization factor / (number of CPUs x number of cores x 2 - number of logical cores necessary for virtualization) = 775 x 70% / (4 x 8 x 2 - 2) = 8, 7 <br>  Required quantity vCPU = rounding up (118 x 20% / 8,7) = 3 <br>  Memory required: 8 GB <br><br>  <b>Virtual machine (VM) resources:</b> <br>  Total number of VM: 107 <br>  Total vCPU: 322 <br>  Total VM memory: 856 GB <br><br>  <b>Calculate the number of servers:</b> <br>  For reliable operation of a cloud platform VM and ensuring VM migration without interruption of service in case of server failure, it is necessary to reserve 20% (depending on a specific project) of CPU resources and memory of computing servers when deploying a system. <br>  Based on the above principles, the amount of computing resources required for the system can be calculated as follows. <br>  Number of vCPUs: 322 x 120% = 387 <br>  Memory capacity: 856 GB x 120% = 1028 GB <br>  According to the selected server model (four with eight cores) and redundancy ratio requirements (30%), the required number of servers can be determined as follows: <br>  Number of servers = number of vCPU / (number of CPUs x number of cores x 2 - 2) = 387 / (4 x 8 x 2 - 2) = 7 (rounding up) <br>  In the case of 8 GB memory modules, the number of memory modules per server can be determined as follows: <br>  Number of memory modules per server = (total memory / number of servers + 8 GB) / 8 GB = (1028 GB / 7 servers + 8 GB for virtualization) / 8 = 20 memory modules <br><br>  In the next article we will look at storage resource planning. </div><p>Source: <a href="https://habr.com/ru/post/281086/">https://habr.com/ru/post/281086/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281072/index.html">Secure cleaning of private data</a></li>
<li><a href="../281074/index.html">What's new in the Azure cloud after Build? Announcement Handbook</a></li>
<li><a href="../281076/index.html">Computer, no pain - Vulnerability Checklist</a></li>
<li><a href="../281078/index.html">PHDays online contests: battle for invites</a></li>
<li><a href="../281082/index.html">Matrix KVM Switching: Solution Comparison</a></li>
<li><a href="../281088/index.html">Five reasons why we refused the Russian translation of the conference ‚ÄúPiter Py‚Äù</a></li>
<li><a href="../281090/index.html">IBM Watson helps the US Air Force automate the procurement process</a></li>
<li><a href="../281092/index.html">Student JPoint - happy ticket to the future</a></li>
<li><a href="../281098/index.html">Browser development - physical fork</a></li>
<li><a href="../281100/index.html">Time, money and fan in MMO</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
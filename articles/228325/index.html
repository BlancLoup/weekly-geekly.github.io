<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>FnDelay awaiting function</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once I wrote a very simple function that seemed to me a crutch in that I don‚Äôt remember which project. But she performed her duty well. Then I called ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>FnDelay awaiting function</h1><div class="post__text post__text-html js-mediator-article">  Once I wrote a very simple function that seemed to me a crutch in that I don‚Äôt remember which project.  But she performed her duty well.  Then I called it a waiting function, and JavaScript called it fnDelay.  The fact is that in the application there can be a functional that works after changing a state.  But this change occurs (or may hypothetically occur) so often that the functional will work many times, although in fact we only need to execute it for an already changed state (or for several more intermediate states).  Otherwise there may be a sensitive issue in the performance of your application.  Well, enough empty words, let's look at a specific example. <br><a name="habracut"></a><br>  We have an asynchronous search, the text is entered by letter in the input field and the search results are automatically updated.  At first glance - nothing complicated, let's hang up the keyup event on the input, when triggered, a new search will be performed on a new phrase. <br><br><pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'search'</span></span>).addEventListener(<span class="hljs-string"><span class="hljs-string">'keyup'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//       search,   ,     search(); });</span></span></code> </pre> <br><br>  But while the request is being executed, the user may have time to type the next letter, then the results of the previous request will be irrelevant, and the new request will not be executed until the previous one ends (here I‚Äôve heard that the XHR request can be canceled, but this is a special case).  Imagine that a user enters quickly the phrase ‚ÄúCheap tickets to Cambodia‚Äù.  In this case, the search function will be called 25 times.  This is unnecessary.  On the other hand, if the user enters not so quickly, then it would be good to show him intermediate options, and it is still undesirable to have some delays before showing the results. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For this, the ‚ÄúWaiting Function‚Äù was originally invented.  She waits for her cyclical call to stop, i.e.  if the specified time elapses after its call, and this function will not be called again, it is executed, otherwise the action is passed to the next call. <br><br><pre> <code class="javascript hljs">fnDelay = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timer = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">callback, ms</span></span></span><span class="hljs-function">)</span></span>{ clearTimeout(timer); timer = setTimeout(callback, ms); }; })();</code> </pre> <br><br>  And immediately show you how to use it. <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'search'</span></span>).addEventListener(<span class="hljs-string"><span class="hljs-string">'keyup'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ fnDelay(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ search(); }, <span class="hljs-number"><span class="hljs-number">200</span></span>); });</code> </pre> <br><br>  The performance of this function is governed by the argument ms.  For each particular case, you need to look for your golden mean, so that the result will be responsive and the queue of outstanding tasks will not accumulate.  Now, if the user pauses at least 200 ms when entering, he will get new results.  Thus, we significantly reduce the number of calls to the search function. <br><br>  I didn‚Äôt stop at asynchronous search using the same function when I need to do something when resizing the page, since changing the window width by only 100 pixels, the resize event can be triggered dozens of times. <br><br>  I will also add a <a href="http://jsfiddle.net/pltvs/Af9q6/">link to a small Fiddle with an example</a> . </div><p>Source: <a href="https://habr.com/ru/post/228325/">https://habr.com/ru/post/228325/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../228311/index.html">Get & Check - we deliver content and send push notifications to mobile devices</a></li>
<li><a href="../228315/index.html">How I overcame DDoS in 15 minutes</a></li>
<li><a href="../228317/index.html">How to patch 11 different firmware and do not go crazy with diversity</a></li>
<li><a href="../228321/index.html">Samsung has introduced a high-capacity, productive SSD with a vertical structure of memory cells.</a></li>
<li><a href="../228323/index.html">Sony SmartWatch 2 Review</a></li>
<li><a href="../228327/index.html">We parse ACID in NoSQL</a></li>
<li><a href="../228331/index.html">Building your own communication network over I2P</a></li>
<li><a href="../228335/index.html">Installing the Eucalyptus 4.0 cloud system</a></li>
<li><a href="../228337/index.html">Jekyll 2 is coming on Github!</a></li>
<li><a href="../228339/index.html">Configuring ModSecurity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
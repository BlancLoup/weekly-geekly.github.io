<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Computer PC "Search". Electronmash</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today I would like to talk a little bit about the undeservedly deprived on Habr√© attention of the Soviet PC Search . What distinguishes this computer ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Computer PC "Search". Electronmash</h1><div class="post__text post__text-html js-mediator-article"><img align="right" src="https://habrastorage.org/getpro/habr/post_images/6bf/a20/b13/6bfa20b13dbd1b922081929015af4db9.jpg" alt="image">  Today I would like to talk a little bit about the undeservedly deprived on Habr√© attention of the Soviet <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25B8%25D1%2581%25D0%25BA_(%25D0%25BA%25D0%25BE%25D0%25BC%25D0%25BF%25D1%258C%25D1%258E%25D1%2582%25D0%25B5%25D1%2580)">PC Search</a> .  What distinguishes this computer from numerous Bytes, Irish, Corvettes, BK0010, Radio-P86 and others is that it was semi-compatible with the IBM XT / PC.  The machine was based on the domestic analogue of the Intel i8088 processor - KM1810VM88, operating at a slightly higher frequency - ~ 5 MHz, versus 4.7 MHz for the original XT.  However, in general, the computer was slower than the XT, because a full-fledged CGA video card was not implemented in the Search.  In fact, the text modes were emulated - the video adapter always worked in graphics mode, and the letters on the screen were drawn by the system BIOS pixel-by-pixel.  Naturally, it took a lot of CPU time.  Another difference from the present XT was the lack of DMA, which also affected the speed of work with memory is not for the better.  Yes, and the memory itself was far from 640Kb, which of course would be enough for everyone, but smaller, and not enough for everyone.  However, despite all the shortcomings, PC Search could run MS-DOS at the time and work with almost all popular applications and games at that time, ranging from Norton Commander and <a href="http://ru.wikipedia.org/wiki/Digger">Digger</a> to Windows and Office.  And the price, of course ... If only the organizations could afford the real XT-shku, the Search PC was more or less available for the average Soviet engineer (monthly salary).  But first things first‚Ä¶ <br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/post_images/27c/7d6/1e3/27c7d61e354c7299de742bee94242de8.jpg"><br><br><h5>  Foreword </h5><br>  Generally, strictly speaking, the Quest had several modifications.  The most important difference was the amount of onboard RAM.  The first Quest models had only 128 Kb, of which 32 Kb took up video memory.  The user had only 96 Kb of free memory.  The latest models already carried onboard 512 Kb, 32 Kb also went for video memory and the user had 480 Kb.  This already gave a chance to run something else besides DOS itself. <br><br>  However, I started talking about DOS early because a monoblock itself, a power supply unit and a pair of tapes with system programs and games were included in the standard delivery.  And that's all.  Thus, any controller, be it a drive controller (and, of course, the drive itself) or a joystick controller, the user had to purchase separately.  In the meantime, the user could work with a cassette recorder as a storage medium.  The cassette interface was copied from the IBM PCjr computer.  The recording format on the tape was identical to PCjr and another Soviet ‚Äúbrother in spirit‚Äù - <a href="http://ru.wikipedia.org/wiki/%25D0%25AD%25D0%25BB%25D0%25B5%25D0%25BA%25D1%2582%25D1%2580%25D0%25BE%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25B0_%25D0%259C%25D0%25A1_1502">Electronics MC-1502</a> , also x86 compatible, and also as Search, not without a twist from the creators.  And therefore, as long as we do not have a disk drive controller, I will begin with the cassettes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  The format of recording on tape and tape interface </h5><br>  The search is not so popular among fans of old computers, such as ZX-compatible and their clones, so there is simply no software for working with cassettes, and I decided to correct this injustice.  So, the data is written in the form of zeros and ones.  If the polarity has time to change from negative to positive for 1 millisecond - then this is a single bit.  If it does not have time - then zero.  Thus, zero is approximately 0.5 milliseconds, one is 1 millisecond.  Knowing this, you can easily decode the signal directly with your eyes.  For example: <br><img src="https://habrastorage.org/getpro/habr/post_images/610/0f8/47e/6100f847e90fe4aa39781d7e9e954d03.png" alt="image"><br>  Here, ‚Äúspanning‚Äù periods with a large interval are ones, short ones are zeros.  Total figure shows 1111 0000 1011 001. Each entry starts with a pilot tone, which consists of 256 bytes 0xFF, that is, 256 * 8 = 2048 unit bits, followed by the recorded bit '0', and then sync byte 0x16 (00010110 ).  All data is written in 256-byte blocks, followed by 2 bytes of checksum.  The checksum is calculated by the CRC-16 algorithm with the polynomial 0x1201, the initial value = 0xFFFF, after the calculation CRC = CRC xor 0xFFFF.  After the pilot of the tone, the zero bit and the 0x16 sync byte, there is a 256-byte header, in which there are important data such as the file name, file type, segment and offset where the program will be loaded. <br><pre><code class="php hljs">Poisk_hdr = Packed Record Magic : Byte; <span class="hljs-comment"><span class="hljs-comment">// A5h FName : Array [1..8] of Char; FType : Byte; FLen : Word; Seg : Word; Ofs : Word; End;</span></span></code> </pre> <br>  The header is padded with zeros up to 256 bytes.  Next comes its checksum - 2 bytes.  The sequence ends with 4 bytes of 0xFF.  Then the leader (pilot-tone) goes with the units again, the synchronization bit is 0, the synchronization byte is 0x16, and here the data blocks begin.  At the end, the sequence also ends with 4 bytes of 0xFF. <br><br>  The result of picking with the recording format was two small utilities: <a href="">CAS2WAV</a> and <a href="">WAV2CAS</a> .  The first one allows you to create a file from a binary .WAV file that can later be played on a regular mp3 player.  The second one, on the contrary, tries to create a binary file from a cassette recording.  Therefore, if someone has preserved the cassettes from the Search or from MC-1502, then digitize them, please, in WAV, for the collection and history.  You can download the most comprehensive set of cassette programs and search games here: <a href="">vizersprojects.ru/archive/sannata/apps.zip</a> <br><br><h5>  Cassette </h5><br>  Now, when it is possible to create WAV files, we convert cassette software and record it on an mp3 player.  We connect the player to the ‚ÄúMAGNETOPHONE‚Äù connector and turn on the power. <br><img src="https://habrastorage.org/getpro/habr/post_images/68e/590/bb3/68e590bb3f4d9471d5fb9bb131d877f7.jpg"><br><br>  In addition to the main interrupt handling functions, a small program, a monitor, was written in the Search BIOS, which made it possible to enter the file name and load it from the tape recorder into memory: <br><img src="https://habrastorage.org/getpro/habr/post_images/716/ac2/216/716ac22162fe304f45a97fc84fffca66.jpg"><br><br>  Programs and games, basically, represented the Russified versions of popular games and programs with IBM PC.  For example, BASIC is nothing like Microsoft Basic, which was embedded in the ROM of the IBM PCjr computer.  Find two differences: <br><img src="https://habrastorage.org/getpro/habr/post_images/dcf/846/cfe/dcf846cfe525221aefa8109b73f5d409.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/7cd/b1e/21c/7cdb1e21c43a164584f41dd716404693.png"><br><br><div class="spoiler">  <b class="spoiler_title">Look at the rest of the cassette toys.</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/fa0/133/a98/fa0133a98e57556fa85e572b70bf0ce3.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/8fc/f32/10c/8fcf3210c97d42e9ae7749ce542d06ff.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/a8d/794/8c2/a8d7948c254dcb9a909f11b3563fc7ae.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/dfd/5be/3ce/dfd5be3cec85211ddb837fa55d04e682.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/13d/8bd/f0e/13d8bdf0eeb1fb05a76a9ad954b00b83.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/833/cb3/d09/833cb3d09122deb92f99fc8d0133e728.png"><br></div></div><br><br>  However, in fairness, it is worth noting that there were their own games, for example, chess or reversi. <br><br><h5>  Additional controllers (adapters) </h5><br>  Yes, as previously mentioned, additional controllers or adapters could be connected to the Search, as stated in the instructions.  For this, the Search had four expansion slots, where it was possible to install up to four controllers simultaneously.  In fact, the bus is standard at the time ISA-8, but of course with a different connector and some one (or two) inverted signals.  Search Controllers were produced both at the factory, and were manufactured by cooperatives and even by amateurs. <br><br>  The first thing that was desired and necessary is the drive controller.  With it, the Search turned from a typewriter for BASIC and games into a serious DOS computer, which opens the user with the entire set (well, almost all) of x86 software existing at that time.  They didn‚Äôt do anything only with these controllers - they were turbocharged (they increased the read-write speed), they supported 800 Kb of floppy disk formats in the firmware, instead of 360 Kb.  In general, they were different, but on the whole they worked with floppy disks well and quickly.  This is my controller: <br><img src="https://habrastorage.org/getpro/habr/post_images/69f/584/d12/69f584d129dd3361546ad8b0c57f4326.jpg"><br><br>  And this is another drive controller: <br><img src="https://habrastorage.org/getpro/habr/post_images/543/aa3/45e/543aa345e2efe6eeebc1c6f7c8784188.jpg"><br><br>  For Search models with 128Kb of RAM, it was also necessary to purchase a ‚ÄúRAM expander‚Äù in order to run something else besides DOS itself.  ‚ÄúExpander RAM‚Äù was inserted into the slot, like a normal controller.  There were different models, at 256 Kb, 512 Kb and even according to rumors at 670Kb.  Sometimes they were combined with something else, for example with an LPT port.  On the copy I have, this is exactly what was done. <br><img src="https://habrastorage.org/getpro/habr/post_images/df9/4e0/d59/df94e0d5957ccb6bb5e710d2b1caac02.jpg"><br><br>  And of course the hard disk controller with MFM interface.  The beast is rare and expensive, just like the hard drive itself.  Allowed to connect to the search hard drive up to 68 Mb.  No less unique was the cable itself, which the controller connected to the hard disk. <br><img src="https://habrastorage.org/getpro/habr/post_images/f73/8db/8ea/f738db8ea188d8c572e77f92ae871d39.jpg"><br><br>  I had to tinker with it a bit.  First loop.  It is not standard, and I had to quickly sketch out an approximate scheme: <br><img src="https://habrastorage.org/getpro/habr/post_images/32b/9ba/d03/32b9bad03e1b141c71fb25b1c17cf2f3.png"><br><br>  And solder this adapter: <br><img src="https://habrastorage.org/getpro/habr/post_images/0cb/cb8/c1b/0cbcb8c1bea23cccff59f9e68139dc85.jpg"><br><br>  Further, I tried to make the controller work with my Robotron K5504.20 hard drive with 20MB.  Low-level formatting was completed without errors, but when I tried to start FDISK and partition the system partition, an error occurred: Error reading fixed drive.  I sinned on the cable, tried all the combinations of jumpers on the controller, changed it by editing the parameter controller firmware for this particular screw - it's useless.  FDISK did sometimes start up, but when I tried to write partitions to disk, it hung.  Moreover, I knew for sure that this Grobotron was completely working - it was formatted without problems, marked up and generally felt completely normal on my XT-shke.  Hero of the occasion: <br><img src="https://habrastorage.org/getpro/habr/post_images/fd4/b8a/145/fd4b8a145df73b0bcc47bec04ca54117.jpg"><br><br>  After ‚Äúdialing‚Äù and checking the cable, I spat a hundred thousandth time and nevertheless decided to connect my second MFM hard drive to the Seagate ST-225, which was in my XT-shke.  True, I had to pre-do backup on the null modem to the main computer.  And, lo and behold, it was formatted without any problems and earned the first time.  So I had to leave Seagate on the Search, and put the Grobotron on the XT, although I wanted the opposite. <br><br>  There was also a joystick controller and, accordingly, a joystick itself.  A funny device that is incompatible with anything but itself and unlike anything else.  The driver program allowed you to set the tilt correspondence to any key on the keyboard, thereby, when the joystick was tilted to the left, the ‚Äúleft‚Äù key was emulated, and so on.  Generally a good idea.  All this made it possible to play games with the joystick, even if the game did not support the joystick. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6f6/aef/25e/6f6aef25e85a99b91cbf63d609e40271.jpg"><br><br><h5>  Offal and repair </h5><br>  My search broke down long ago and was faulty.  The fault was a periodic sudden freeze or even a reboot.  It is logical to assume that the whole thing is in memory and, running the CheckIT program with the test, I saw the following sad picture: <br><img src="https://habrastorage.org/getpro/habr/post_images/3c3/682/016/3c3682016b60cfc8deb7c62b7e978a3a.jpg"><br><br>  We take in hands a <s>sledge</s> hammer, a screwdriver, unscrew several screws from below and remove the top cover with the keyboard.  You can see the whole motherboard: <br><img src="https://habrastorage.org/getpro/habr/post_images/e8f/cbc/6ac/e8fcbc6acfd1031ee5b79e21e1ad3310.jpg"><br><br>  In the center there is a ceramic processor, in the upper right corner on the ROM panel with BIOS, and at the bottom there are 16 soldered K565RU7G microcircuits - this is memory.  I did not want to get sixteen microcircuits, so I decided to try a method that I had heard somewhere: right on top of the legs of the old microcircuit to put on a new one and look at the memory test, whether the situation changes.  If something changes, then replace the chip.  Only one thing stopped me - every time you put on a new chip, you need to plug in a keyboard, load DOS, load CheckIT and run a test.  And it would be fine with the time that is spent on downloading the program ... The keyboard is also not very reliable loop, and it will not be better for him to switch off the frequent switching on and off.  In short, laziness is the engine of progress.  The good old TASM (assembler) was pulled out of the archives.  It was decided to write a test that would be stitched directly instead of the BIOS and started immediately when the computer was turned on. <br><img align="left" src="https://habrastorage.org/getpro/habr/post_images/8f6/5b0/9e1/8f65b09e1b8fe3546a6c93d27142bfa9.png">  In general, writing a program in assembler instead of BIOS is a little different from writing a program in assembler under DOS, for example, in that we do not have the usual BIOS interrupts (because we write it) and DOS, and to display something on the screen need to draw the characters by hand.  On the other hand, all the memory is at our disposal and you can do anything with it.  Well, the truth is that in some registers you don‚Äôt save much data, so you have to keep some variables in memory.  Well, of course, the stack too, because without a stack, neither the subroutine can be called, nor the register values ‚Äã‚Äãare saved.  In short, the stack is also a useful thing.  Therefore, I first test the first kilobyte of memory - if there are errors, then we spike three times and hang the processor.  If everything is fine, we install the stack, variables into the first kilobyte and the execution of the main test begins. <br><br>  Total, a little <s>shit</s> tak_sebe_koda (for on the knee and for yourself) and the test is ready.  I sew in the ROM, turn on the computer and see the same thing that CheckIT showed me, only in my test and instantly: <br><img src="https://habrastorage.org/getpro/habr/post_images/2cf/746/a2f/2cf746a2f50fabe35e5c8d61b96731c1.jpg"><br><br>  That's all, now I am gradually starting to ‚Äústick‚Äù the obviously good chip on top of the soldered ones.  I quickly found the first failing one in the area of ‚Äã‚Äã152Kb, replaced it, and then spent a lot of time with errors in the area of ‚Äã‚Äã264Kb, but gradually reduced, reduced and reduced to zero.  As a result, I replaced seven microcircuits (perhaps some in vain), at the same time I raised them to sockets: <br><img src="https://habrastorage.org/getpro/habr/post_images/5b5/fc2/16a/5b5fc216a0b9b12fbf6828436fad79fa.jpg"><br><br>  Seven, though many, but not sixteen after all.  My test passes without errors, CheckIT without errors and in general, all imaginable and not imaginable memory tests - without errors.  Victory! <br><br><h5>  Soft </h5><br>  With the drive, and even more so with the hard drive, the search literally "came to life" and became a big serious computer.  Where were those cassette toys, when you could play this: <br><img src="https://habrastorage.org/getpro/habr/post_images/3f2/5d9/ebd/3f25d9ebd1743bc869eea3cf0ce02633.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ca8/e7e/398/ca8e7e39837c99b1212805d94b63adfc.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c88/5bb/738/c885bb7384c169befb2b8a054da3fffd.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ecf/9d8/6e5/ecf9d86e56ae1caec20dafd6c84d496b.png"><br><br><div class="spoiler">  <b class="spoiler_title">View other toys of the time.</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/cf3/3c4/a9f/cf33c4a9f48bae617c8fcd5a437c8e5f.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/65e/5a4/ace/65e5a4acea9b8418bec120cf3d3f37c9.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/5bb/bb4/e67/5bbbb4e679d26204e242f81f6d7c81c2.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ac7/1a8/0b2/ac71a80b2ee473728ffc9c939374aab3.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f6b/2c1/59f/f6b2c159f902880740efc13aebd250f0.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c09/685/a9c/c09685a9c5d3b2a4c9da7ee7e7f67a49.png"><br></div></div><br><br>  And of course, Windows, just for lulz, as they say.  Version 3.0, does not work hastily (and what did you want from a 480 Kb RAM), but you can work. <br><img src="https://habrastorage.org/getpro/habr/post_images/f43/3ca/c59/f433cac59292fc5c960bb88fd7c8e6a4.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/a36/0e7/bfc/a360e7bfc654705d297a8f35c51bba11.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/551/122/578/5511225786cf839a042573a808874b5d.jpg"><br><br><h5>  Upgrade (half successful) </h5><br><img align="right" src="https://habrastorage.org/getpro/habr/post_images/816/50f/393/81650f3930771d632c7ab20a06526bd6.jpg">  Last winter, two <a href="http://ru.wikipedia.org/wiki/NEC_V20">NEC V20</a> processors came to me from China.  In theory, it is fully compatible with the i8088, works somewhat faster due to improved hardware implementation of division and multiplication, contains a set of instructions 80186 processor (for example, such as shifts with an argument other than 1, saving all the registers to the stack and etc.)  Almost 80286, except perhaps without protected mode.  Well, as a nice bonus for retro fans, it has hardware support for processor i8080 commands, so you can run natively CP / M software for i8080 on it through a special program. <br><br>  Therefore, we take into the hands of a <s>sledgehammer</s> , a soldering iron with a tin extractor, stock up on patience and carefully disassemble the Soviet KM1810BM88.  We put the DIP-40 socket on which the NEC V20 fits comfortably: <br><img src="https://habrastorage.org/getpro/habr/post_images/607/f93/ead/607f93ead49c2f3cca1b7cad5c781a89.jpg"><br><br>  As expected, the computer starts without problems.  Now you can measure a little parrots.  First tests of the original KM1810VM88.  Overall speed: <br><img src="https://habrastorage.org/getpro/habr/post_images/674/a67/744/674a6774453ad41a0f8e2ea970503506.jpg"><br><br>  Video subsystem with KM1810VM88 <br><img src="https://habrastorage.org/getpro/habr/post_images/ebd/5fe/d19/ebd5fed19039bfda40a073b491ac6199.jpg"><br><br>  And then the NEC V20: <br><img src="https://habrastorage.org/getpro/habr/post_images/302/702/276/302702276764aeb334988d31a51f4347.jpg"><br><br>  CPU test with NEC V20: <br><img src="https://habrastorage.org/getpro/habr/post_images/518/7b4/4b5/5187b44b5d640187915c501aa7c365ae.jpg"><br><br>  And video subsystem: <br><img src="https://habrastorage.org/getpro/habr/post_images/2f5/710/1d2/2f57101d2651d3b6d6870e675b79ce1f.jpg"><br><br>  It can be seen that the computer works somewhat faster with the V20, especially mathematics.  The video subsystem also became somewhat faster due to the fact that in the BIOS functions of the software character rendering, in some places there are multiplication and division operations.  Good processor, what to say.  That's just further awaited me unpleasant surprise - when I tried after these tests to load the usual Volkov Commander, I saw the following: <br><img src="https://habrastorage.org/getpro/habr/post_images/ba9/6e0/3e5/ba96e03e54f4d2bc241b62c78c64fb15.jpg"><br><br>  It is noticeable that every second character on the screen is not drawn.  I looked thoughtfully at the BIOS code for a long time, which was responsible for everything related to the output of characters, and looked through the int 10h processing programs.  I thought it would be quite easy to patch the BIOS for incompatibility with the NEC V20, since I knew that even the NEC V20 and i8088 use the same instruction set, but there are differences.  I checked the code for the following things: <br><br>  1) <b>POP CS</b> , and generally two-byte <b>POP</b> 's I have not met in the listing.  v20 does not eat them; <br>  2) After <b>MUL</b> v20 does not reset the ZF, if the result is 0. There are several <b>MUL</b> in the code, but the ZF after the operations is not checked anywhere; <br>  3) Exotic <b>AAD / AAM is</b> not found anywhere else.  In Intel, instructions can take an argument, in V20 it is always = 0Ah; <br>  4) The same applies to the <b>SALC</b> instruction (D6 opcode), which the v20 interprets as <b>XLAT</b> .  There are no such instructions in the BIOS; <br><br>  Fix the problem with a swoop failed.  Further, at the prompt of one user from the forum ZX-PK.ru, I drew attention to the fact that programs that work with video memory directly are buggy in this way.  The search, as already mentioned, does not have a physical text mode, so when a program tries to write something into the text memory area 0xB800 a non-maskable hardware interrupt is generated and control is passed to the Int 2 handler. The NMI handler in turn reads the value from port 0x28, in which there is an offset by which the recording into memory occurred, and starts pixelling pixel-by-pixel in the graphic video memory 0xBC00.  After the character is drawn in the video memory, the output from the NMI handler occurs.  This is approximately according to such a simplified scheme, and the characters are rendered from text mode in graphic mode.  So, by trial and error, it turned out that when several characters are written to the memory at once with the <b>REP STOSW</b> command, say two, the hardware address trap does not work and the offset of the previous character sits in port 0x28 instead of being offset by the last character.  NMI is also not invoked.  We can assume that the V20 spends less cycles per <b>REP STOSW</b> cycle, and the circuit is designed for a larger number of clock cycles, so the circuit only works on every second cycle.  So, the problem turned out to be hardware, unfortunately.  Of course, you can also bypass it programmatically, for example, as a crutch in the NMI handler, draw not only the current symbol, but also the neighbor at once, but, as you understand, it is a crutch.  If you do not pay attention to this drawback, the rest of the programs work fine, including games. <br><br><h5>  Finally </h5><br>  PC Search is my first computer, which is probably why more attention is paid to it than to my other old pieces of hardware.  The forum ZK-PK.ru and its section ‚ÄúSearch‚Äù help a lot in technical issues.  Now several enthusiasts are preparing to release a replica board of MFM disk controllers, a disk drive.  In general, there are many plans, for example, the manufacture of an IDE controller (especially since such a controller existed at the sunset of the release of Searches), possibly an IDE-CF controller (compact flash).  If someone suddenly had recorded tapes, or some rare controllers (adapters), I would be happy to discuss the possibility of receiving them (in personal messages).  Good luck to all! </div><p>Source: <a href="https://habr.com/ru/post/199044/">https://habr.com/ru/post/199044/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../199032/index.html">Seized in the UK part of the "first in the country of printed weapons" were spare parts for a 3D printer</a></li>
<li><a href="../199034/index.html">PCB or version control software</a></li>
<li><a href="../199036/index.html">MS-DOS viruses in action</a></li>
<li><a href="../199040/index.html">Yourself IPv6 Tunnel Broker with openvpn and 6to4</a></li>
<li><a href="../199042/index.html">Unzipping poetry in slow motion (gzip)</a></li>
<li><a href="../199050/index.html">Groovy vs Java for JavaFX</a></li>
<li><a href="../199052/index.html">45% of web resources of the largest Russian companies contain critical vulnerabilities</a></li>
<li><a href="../199056/index.html">Why Open Data is a culture of working with information on the example of Roszdravnadzor</a></li>
<li><a href="../199060/index.html">Visualization of a two-dimensional gaussian on a plane</a></li>
<li><a href="../199062/index.html">pdoTools - a set of quick snippets and a library</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
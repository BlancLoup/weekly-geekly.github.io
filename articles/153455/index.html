<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ObjectScript is a new programming language, faster than PHP and JS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ObjectScript is a new embedded and very lightweight object-oriented open source programming language. ObjectScript extends the capabilities of languag...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ObjectScript is a new programming language, faster than PHP and JS</h1><div class="post__text post__text-html js-mediator-article">  ObjectScript is a new embedded and very lightweight object-oriented open source programming language.  ObjectScript extends the capabilities of languages ‚Äã‚Äãsuch as JavaScript, Lua and PHP.  The syntax is mainly taken from JavaScript, the multiple assignment is from Lua, the work with properties is from PHP. <br><br>  ObjectScript 0.97-vm2 is <b>faster</b> than PHP 5.3.3 and JS by <b>34%</b> and <b>61%,</b> respectively. <br><br><h2>  As tested </h2><br>  <a href="http://www.haskell.org/haskellwiki/Shootout/Fannkuch">Fannkuch</a> algorithm was taken for <a href="http://www.haskell.org/haskellwiki/Shootout/Fannkuch">testing</a> .  Quite a convenient test, one function with a parameter, when the parameter is increased by 1, the number of calculations increases about 10 times. <a name="habracut"></a>  Accordingly, the less time spent on the test, the better. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Fannkuch was implemented in ObjectScript, the full source: <br><br><pre><code class="javascript hljs">print arg <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fannkuch = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p, q, s, sign, maxflips, sum = [], [], [], <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i=<span class="hljs-number"><span class="hljs-number">1</span></span>; i&lt;=n; i++) p[i], q[i], s[i] = i, i, i <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(;;){ <span class="hljs-comment"><span class="hljs-comment">// Copy and flip. var q1 = p[1] // Cache 1st element. if(q1 != 1){ for(i=2; i&lt;=n; i++) q[i] = p[i] // Work on a copy. var flips = 1 for(;;){ var qq = q[q1] if(qq == 1){ // ... until 1st element is 1. sum = sum + sign*flips if(flips &gt; maxflips){ maxflips = flips } // New maximum? break } q[q1] = q1 if(q1 &gt;= 4){ var i, j = 2, q1 - 1 for(;;){ q[i], q[j] = q[j], q[i]; if(++i &gt;= --j) break } } q1 = qq; flips++ } } // Permute. if(sign == 1){ p[2], p[1] = p[1], p[2] sign = -1 // Rotate 1&lt;-2. }else{ p[2], p[3] = p[3], p[2] sign = 1 // Rotate 1&lt;-2 and 1&lt;-2&lt;-3. for(i = 3;; i++){ // print "mark 4" var sx = s[i] if(sx != 1){ s[i] = sx-1 break } if(i == n) return sum, maxflips; // Out of permutations. s[i] = i // Rotate 1&lt;-...&lt;-i+1. var t = p[1] for(var j = 1; j &lt;= i; j++){ p[j] = p[j+1] } p[i+1] = t } } } } var n = numberof(arg &amp;&amp; arg[1]) || 5 var start_time = getTimeSec() var sum, flips = fannkuch(n) echo( sum"\n" "Pfannkuchen("n") = "flips"\n" "time = ", (getTimeSec() - start_time)"\n" )</span></span></code> </pre> <br>  In PHP, the full source: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fannkuch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($n)</span></span></span><span class="hljs-function"> </span></span>{ $p = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); $q = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); $s = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); $sign = <span class="hljs-number"><span class="hljs-number">1</span></span>; $maxflips = $sum = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>($i=<span class="hljs-number"><span class="hljs-number">1</span></span>; $i&lt;=$n; $i++) $p[$i] = $q[$i] = $s[$i] = $i; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(;;){ <span class="hljs-comment"><span class="hljs-comment">// Copy and flip. $q1 = $p[1]; // Cache 1st element. if($q1 != 1){ for($i=2; $i&lt;=$n; $i++) $q[$i] = $p[$i]; // Work on a copy. $flips = 1; for(;;){ $qq = $q[$q1]; if($qq == 1){ // ... until 1st element is 1. $sum += $sign*$flips; if($flips &gt; $maxflips){ $maxflips = $flips; } // New maximum? break; } $q[$q1] = $q1; if($q1 &gt;= 4){ $i = 2; $j = $q1 - 1; for(;;){ $tmp = $q[$i]; $q[$i] = $q[$j]; $q[$j] = $tmp; if(++$i &gt;= --$j) break; } } $q1 = $qq; $flips++; } } // Permute. if($sign == 1){ $tmp = $p[2]; $p[2] = $p[1]; $p[1] = $tmp; $sign = -1; // Rotate 1&lt;-2. }else{ $tmp = $p[2]; $p[2] = $p[3]; $p[3] = $tmp; $sign = 1; // Rotate 1&lt;-2 and 1&lt;-2&lt;-3. for($i = 3;; $i++){ $sx = $s[$i]; if($sx != 1){ $s[$i] = $sx-1; break; } if($i == $n) return array($sum, $maxflips); // Out of permutations. $s[$i] = $i; // Rotate 1&lt;-...&lt;-i+1. $t = $p[1]; for($j = 1; $j &lt;= $i; $j++){ $p[$j] = $p[$j+1]; } $p[$i+1] = $t; } } } } function getTimeSec(){ list($usec, $sec) = explode(" ",microtime()); return ($usec + $sec); } $n = isset($argv[1]) ? $argv[1] : 5; echo "n: $n\n"; $start_time = getTimeSec(); $r = fannkuch($n); $sum = $r[0]; $flips = $r[1]; echo("$sum\nPfannkuchen($n) = $flips\n" . "time = ".(getTimeSec() - $start_time)."\n");</span></span></code> </pre><br>  In JavaScript, the full source: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fannkuch = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p = [], q = [], s = [], sign = <span class="hljs-number"><span class="hljs-number">1</span></span>, maxflips = <span class="hljs-number"><span class="hljs-number">0</span></span>, sum = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i=<span class="hljs-number"><span class="hljs-number">1</span></span>; i&lt;=n; i++) p[i] = q[i] = s[i] = i; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(;;){ <span class="hljs-comment"><span class="hljs-comment">// Copy and flip. var q1 = p[1]; // Cache 1st element. if(q1 != 1){ for(i=2; i&lt;=n; i++) q[i] = p[i]; // Work on a copy. var flips = 1; for(;;){ var qq = q[q1]; if(qq == 1){ // ... until 1st element is 1. sum = sum + sign*flips; if(flips &gt; maxflips){ maxflips = flips; } // New maximum? break; } q[q1] = q1; if(q1 &gt;= 4){ var i = 2, j = q1 - 1 for(;;){ var tmp = q[i]; q[i] = q[j]; q[j] = tmp; if(++i &gt;= --j) break; } } q1 = qq; flips++; } } // Permute. if(sign == 1){ var tmp = p[2]; p[2] = p[1]; p[1] = tmp; sign = -1; // Rotate 1&lt;-2. }else{ var tmp = p[2]; p[2] = p[3]; p[3] = tmp; sign = 1; // Rotate 1&lt;-2 and 1&lt;-2&lt;-3. for(i = 3;; i++){ // print "mark 4" var sx = s[i]; if(sx != 1){ s[i] = sx-1; break; } if(i == n) return [sum, maxflips]; // Out of permutations. s[i] = i; // Rotate 1&lt;-...&lt;-i+1. var t = p[1]; for(var j = 1; j &lt;= i; j++){ p[j] = p[j+1]; } p[i+1] = t; } } } } function getTimeSec(){ var d = new Date(); return (d.getTime() + d.getMilliseconds() / 1000.0) / 1000.0; } var n = 10; var start_time = getTimeSec(); var r = fannkuch(n); var sum = r[0], flips = r[1]; WScript.Echo( sum,"\n", "Pfannkuchen(",n,") = ",flips,"\n", "time = ",(getTimeSec() - start_time),"\n" )</span></span></code> </pre><br>  Testing was conducted on the platform: Windows 7, CPU Core i7 2630QM 2Ghz.  Fannkuch started with parameter <b>10</b> . <br><br>  ObjectScript 0.97-vm2 is a release assembly with a numeric type of double (with float, it turns out to be about 10% faster, but I don‚Äôt give these numbers in the article, because PHP and JS are numeric, double, PHP also has integer type): <br><br><pre> <code class="hljs tex">c:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Sources</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OS</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bin</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">os</span></span></span></span>.exe test_fannkuch.os 10</code> </pre><br>  output (time is average over 10 iterations): <br><br><pre> <code class="hljs pgsql"><span class="hljs-number"><span class="hljs-number">73196</span></span> Pfannkuchen(<span class="hljs-number"><span class="hljs-number">10</span></span>) = <span class="hljs-number"><span class="hljs-number">38</span></span> <span class="hljs-type"><span class="hljs-type">time</span></span> = <span class="hljs-number"><span class="hljs-number">20.0991</span></span></code> </pre><br>  PHP 5.3.3: <br><br><pre> <code class="hljs tex">c:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">WebServers</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">usr</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bin</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">php</span></span></span></span>5.exe test_fannkuch.php 10</code> </pre><br>  output (time is average over 10 iterations): <br><br><pre> <code class="hljs pgsql"><span class="hljs-number"><span class="hljs-number">73196</span></span> Pfannkuchen(<span class="hljs-number"><span class="hljs-number">10</span></span>) = <span class="hljs-number"><span class="hljs-number">38</span></span> <span class="hljs-type"><span class="hljs-type">time</span></span> = <span class="hljs-number"><span class="hljs-number">26.853</span></span></code> </pre><br>  JS (parameter 10 is inside test_fannkuch.js): <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">Cscript</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.exe</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">test_fannkuch</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.js</span></span></code> </pre><br>  output (time is average over 10 iterations): <br><br><pre> <code class="hljs pgsql"><span class="hljs-number"><span class="hljs-number">73196</span></span> Pfannkuchen( <span class="hljs-number"><span class="hljs-number">10</span></span> ) = <span class="hljs-number"><span class="hljs-number">38</span></span> <span class="hljs-type"><span class="hljs-type">time</span></span> = <span class="hljs-number"><span class="hljs-number">32.3313</span></span></code> </pre><br><h2>  Summary </h2><br>  The less time the better. <br><br>  ObjectScript - <b>20.099</b> sec <br>  PHP - <b>26.853</b> sec <br>  JS - <b>32.331</b> sec <br><br>  Take the standard time 20.099 and reduce the results to percentages: <br><br><ul><li>  OS is <b>34%</b> faster than PHP </li><li>  OS is <b>61%</b> faster than JS </li></ul><br>  You can download the ObjectScript sources and an example from this article at <a href="https://github.com/unitpoint/objectscript/zipball/master">this link</a> , open <b>proj.win32 \ examples.sln</b> , project <b>profile_benchmark</b> . <br><br><h2>  Characteristics of ObjectScript </h2><br>  OOP - there is <br>  Functions as first class values ‚Äã‚Äã- is <br>  Closings - is <br>  Garbage Collector - Tri-Color Incremental Garbage collection <br>  Bytecode compilation - is <br>  Download the compiled program - there is <br>  Modularity - is <br>  Modules loaded in runtime <br>  Cross-platform - there is <br>  Integration with C / C ++ - is <br>  Sources - open source <br>  License - MIT (can be used in any products for free) <br>  Ideas for the language borrowed from JavaScript, Lua and PHP <br>  Goals and objectives of the language: scripting game and program logic, cross portability, web and server development <br>  by Yevgeny Golovin (developer of <a href="http://oxsar.ru/">oxsar.ru</a> , etc.) <br>  ObjectScript development time - 2 months <br><br><h2>  ObjectScript Development and Promotion </h2><br>  The potential for further optimization in speed has not yet been exhausted, but the current characteristics do not look pretty bad.  Apparently with further optimization, you can slow down a bit.  I plan to study the binding of different languages ‚Äã‚Äãand make a really convenient binding C ++ to the OS. <br><br>  With great pleasure I will get you a job and wrap the API you need in OS :) <br><br>  PS the project requires investment, on cooperation and just questions, you can safely write to evgeniy.golovin [AT] unitpoint.ru <br><br>  Other relevant ObjectScript articles: <br><br><ul><li>  <a href="http://habrahabr.ru/post/153021/">ObjectScript API, integration with C ++.</a>  <a href="http://habrahabr.ru/post/153021/">Part 3: Connecting a Module with C ++ Functions</a> </li><li>  <a href="http://habrahabr.ru/post/152813/">ObjectScript API, integration with C ++.</a>  <a href="http://habrahabr.ru/post/152813/">Part 2: executing a script on OS from C ++</a> </li><li>  <a href="http://habrahabr.ru/post/152797/">ObjectScript API, integration with C ++.</a>  <a href="http://habrahabr.ru/post/152797/">Part 1: working with the stack, calling OS functions from C ++</a> </li><li>  <a href="http://habrahabr.ru/post/152289/">ObjectScript - a new programming language</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/153455/">https://habr.com/ru/post/153455/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../153437/index.html">WordPress 3.5 Beta 1</a></li>
<li><a href="../153439/index.html">Trust to online stores</a></li>
<li><a href="../153445/index.html">Tracking MySQL Data Changes with PHP</a></li>
<li><a href="../153451/index.html">Presentation Yandeks.Brouser</a></li>
<li><a href="../153453/index.html">Farm SharePoint 2013 in Windows Azure. SQL Server 2012</a></li>
<li><a href="../153463/index.html">External rules of access to Postfix on the example of the front-end to GLD</a></li>
<li><a href="../153465/index.html">55 years ago began the space era</a></li>
<li><a href="../153467/index.html">11 friends of the society: an interview with the authors of civil applications</a></li>
<li><a href="../153473/index.html">Course Algorithms from Coursera (4-6 weeks of study)</a></li>
<li><a href="../153477/index.html">Paul Allen on Windows 8: elegant, innovative and perplexing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
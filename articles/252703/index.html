<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Recognition of the RF Passport on a mobile phone. (UPD: 03/28/2015 + posted the program on the App Store)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today it is difficult to find a person who at least once in his life did not come across directly or indirectly with the recognition of documents. Ind...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Recognition of the RF Passport on a mobile phone. (UPD: 03/28/2015 + posted the program on the App Store)</h1><div class="post__text post__text-html js-mediator-article">  Today it is difficult to find a person who at least once in his life did not come across directly or indirectly with the recognition of documents.  Indeed, when in the world, in order to carry out any matter of any seriousness, personal identification is necessary, we constantly hear ‚ÄúYou can have your passport‚Äù in order to once again enter your data into a computer in order to check whether you are allowed to enter, whether there are any unpaid debts and etc. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/HAaAoXjBuWs%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700190,15700253&amp;usg=ALkJrhjZ39ldKqTTf1_YSBHNekmHK8K4mw" frameborder="0" allowfullscreen=""></iframe><a name="habracut"></a><br><br>  Of course, the giants in the field of data recognition could not go past such a well-set task in our age of global automation.  Today, there are many different programs and hardware-software systems (both from large companies and relatively new players in this market) that allow us to solve this particular practical problem.  At the same time, despite the local differences of all the proposed solutions (someone better recognizes, someone has a more thoughtful and modern interface, someone is simpler and easier to integrate, someone is cheaper or more expensive) globally all existing software solves the problem the same: obtaining a passport image with a scanner and subsequent recognition on a personal computer.  As a result, this approach allows you to enter passport data from 2 to 26 seconds (depending on the performance of the scanner), which is tens of times faster and more reliable than manual input. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It would seem that the problem is solved!  But how often do we see such ‚Äúsmart‚Äù solutions for recognizing passports in life?  Alas, in post offices, many banks and even police stations (which deal with passports, probably more often than anyone else), passport data are still entered manually.  What is the stumbling block here?  Why such a reliable and high-quality solution of a specific applied problem is not used everywhere? <br><br>  To understand the essence of the problem, let us turn to another example of the development of an innovative technology that does not have a direct relationship to the tasks of recognition - digital photography.  Let us recall the 90s, when the first consumer digital cameras began to appear on the market.  It would seem that here it is happiness: no film, instant viewing of the pictures taken, ease of storing photos - shoot and take pleasure in everything.  In practice, the majority of people, as before, used the cameras not too often: at rest, celebrations and memorable events.  But the real photo boom happened at the moment when the camera appeared on the smartphone.  Digital photography immediately healed a second life and gained enormous popularity.  And many other technologies went through the same in completely different areas: maps and navigation, Wi-Fi, social networks and much more. <br><br>  We now return to the recognition of documents and try to draw a parallel.  Maybe the small popularity of passport recognition systems is connected precisely with the inconvenience of the process itself, and not with the quality?  Indeed, it is difficult to imagine the district police who decomposed on a lawn a laptop and a scanner and checking documents at the migrant.  It is quite another thing if one could recognize and check a passport right in the hands with the help of some compact improvised device (for example, a smartphone).  So we had the idea to write an ID document recognition program for a mobile phone.  And of course, we decided to start with recognizing the passport of a citizen of the Russian Federation. <br><br><img src="https://habrastorage.org/files/22e/ac9/dcb/22eac9dcbf5e4e1e881b5dde23964078.jpg"><br><br>  To further it was more interesting to read, we will show our application in action.  Federal Law <a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25B5%25D0%25B4%25D0%25B5%25D1%2580%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25B7%25D0%25B0%25D0%25BA%25D0%25BE%25D0%25BD_%25C2%25AB%25D0%259E_%25D0%25BF%25D0%25B5%25D1%2580%25D1%2581%25D0%25BE%25D0%25BD%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D1%258B%25D1%2585_%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D1%2585%25C2%25BB">152-FZ</a> forbids us to publish images of these passports.  Therefore, for demonstration purposes, a synthesized image of a passport printed from <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25B0%25D1%2581%25D0%25BF%25D0%25BE%25D1%2580%25D1%2582_%25D0%25B3%25D1%2580%25D0%25B0%25D0%25B6%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25BD%25D0%25B0_%25D0%25A0%25D0%25BE%25D1%2581%25D1%2581%25D0%25B8%25D0%25B9%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B9_%25D0%25A4%25D0%25B5%25D0%25B4%25D0%25B5%25D1%2580%25D0%25B0%25D1%2586%25D0%25B8%25D0%25B8">Wikipedia is</a> used. <br><br><h3>  Formulation of the problem </h3><br>  So, the final goal is to recognize the passport of a citizen of the Russian Federation on a mobile phone.  But in this formulation, the task sounds very vague.  Let's clarify the essence of the problem by setting the constraints "along the axes", forming some semblance of technical requirements. <br><br>  <b>Target platform</b>  You need an application that can work on modern Android devices, as well as an Apple iPhone version 5s or higher.  Such restrictions appeared after analyzing the current situation in the mobile device market.  At the same time, an important element is the writing of <u>a</u> program that <u>recognizes on a mobile device</u> , and not a layer program that receives images, sends pictures to the cloud and gets the result back.  And it's not at all on a slow mobile Internet, as it may seem at first glance.  It‚Äôs just that in our country the federal law ‚ÄúOn Personal Data‚Äù (152-) is in full force, which strictly regulates the activity on the processing of personal data.  In accordance with the law, requirements for all private and state-owned companies and organizations, as well as individuals who store, collect, transmit or process personal data (including last name, first name, patronymic), increase substantially in Russia.  Therefore, from the point of view of the law, the sooner any recognition program forgets personal data, the better (and even more so it‚Äôs not worth sending anywhere either the data itself or the passport image). <br><br>  <b>Object recognition.</b>  In most applications, the client basically requires a passport serial number, photo, last name, first name, patronymic, gender, and date of birth.  All these data are located on the third (in accordance with the numbering) passport page.  Therefore, we first solve the problem of recognizing the above "main" fields.  That is, we will solve the problem of recognizing the third page of the passport of the Russian Federation. <br><br>  <b>Input data.</b>  In contrast to the classical approach (recognition of the scanned image), the smartphone allows you to get a video sequence.  Combining the results of information recognition from different frames can significantly improve the quality of the system as a whole.  True, this advantage is valid only on condition that individual frames can be processed very quickly, which translates smoothly into the question of performance. <br><br>  <b>Performance.</b>  According to competitors, to date, the best passport recognition software cope with this task in about 1-3 seconds on an average computer performance, excluding scanning.  Therefore, we set ourselves the goal to solve this problem on a mobile phone no more slowly than in 3 seconds.  At the same time, we want to process data at a speed of at least three frames per second on devices like Apple iPhone 5s.  In other words, the average processing time of one frame should not exceed 0.3 seconds.  If we recall that 1 frame consists of approximately 2 million pixels, and recognition is performed on devices that are much weaker than an average PC (see Table 1), then the task is more than unsolvable.  I admit, we had to sweat a lot while optimizing the code and developing fast algorithms before we reached that speed.  Later we will write a separate post about approaches to optimizing recognition programs on mobile devices.  Now I can only remember: a year ago, we boldly answered ‚ÄúChallenge accepted‚Äù to this bold statement about speed. <br><img src="https://habrastorage.org/files/440/cba/71a/440cba71a15c412f836511ea360f3008.gif"><br>  <b>Quality.</b>  The quality of recognition is often a decisive factor when choosing a particular system.  Therefore, at the very beginning of development, we set ourselves a rather high bar - in the first version of the product, 95% of passports should be recognized correctly (excluding passports that cannot be automatically recognized).  In general, assessing the quality of such recognition systems is a serious task that we want to talk about in future posts on Habr√©. <br><br><h3>  New problems with recognition on the smartphone </h3><br>  As our colleagues from various organizations have repeatedly stressed, the task of recognizing a RF Passport is extremely difficult.  Moreover, the complexity is caused both by various security elements of the passport form itself (guilloche background, holographic elements, the presence of a glossy film), and high filling variability (inaccurate printing of personal data, the use of non-standard fonts, and the presence of mechanical damage). <br><br>  However, when recognizing a passport on the phone, fundamentally new, not previously encountered when working with the scanner, are added to all the above problems: <br><br><ul><li>  <b>Projective distortion of the image of the document.</b>  When shooting a camera, the angles and their relationships, as well as the proportions of objects, change depending on the angle of shooting.  This leads to the fact that classical algorithms (search for reference lines, selection of text fields, and others) can not be applied directly, but require preliminary projective normalization of the image. </li><li>  <b>Glare.</b>  Glossy film, holograms and other security features that help us distinguish between a real passport and a fake one, make it very difficult for us to recognize (partially destroy information).  Try looking at your passport even through a camera lens (for example, using a standard camera application on your smartphone) from different angles, and you will immediately understand the depth of the problem. </li><li>  <b>Uneven illumination.</b>  Unlike the scanner, which uses its own illuminator, when photographing a document, the light comes from external sources in an uncontrolled manner.  This raises a number of problems such as shadows and inaccuracy in color reproduction. </li><li>  <b>Defocusing and blurring.</b>  It occurs due to the constant displacement of the camera during recognition (after all, the shooting goes without using a tripod). </li><li>  <b>Digital noise</b>  Often occurs in a situation of low light.  In this case, the lower the illumination, the greater the effect of digital noise. </li></ul><br>  In addition to new problems, ‚Äúemerging‚Äù at the stage of image acquisition, no less serious difficulties await us further.  So, for example, the task of coarse localization and identification of a document in a frame becomes relevant.  Indeed, unlike the scanned image, when recognizing a video sequence, you need to be sure that the target document is present in the next frame.  At the same time, this problem should usually be solved before projective normalization. <br><br>  Moving on.  For accurate positioning of text lines, it is necessary to find the boundaries of the passport and define a projective basis.  For this, it is required to distinguish linear boundaries, angles, rounding, and other primitives in the conditions of noise;  generate and select the document boundary options that are most appropriate for the model.  After determining the projective basis, it is necessary to projectively correct the image zone and position the fields. <br><br>  Now we are ready to be recognized.  For data recognition, special methods of optical recognition are required for both individual characters and text fragments.  A special feature of video stream processing is a rather low initial resolution (not exceeding 150-200 DPI) in the presence of noise and distortion, in particular glare and illumination, image defocusing and blurring. <br><br>  After all the difficulties associated with the processing of an individual frame are successfully overcome, new tasks arise related to the recognition of the entire video sequence ‚Äî this is context analysis and integration of the results.  This topic is very interesting, and we will definitely devote a single article to it in future posts.  For now, we only limit ourselves to announcing the existence of such tasks. <br><br><h3>  Conclusion </h3><br>  Thus, solving a seemingly ‚Äúsimple‚Äù task, recognizing a citizen of the Russian Federation passport, we faced not one dozen interesting tasks in the field of computer vision, but also in the field of effective software architecture and writing high-performance programs for mobile devices. <br><br>  This post is rather introductory in nature and tells dear readers in general about our tasks, problems and interests.  We will definitely continue the series of publications on Habr√© about concrete scientific and technical achievements, in which we will tell about solutions of individual subtasks of document recognition (and not only) on mobile devices. <br><br>  As for the ready-made solution for recognizing the RF passport on a mobile device, we are happy to inform you that you can download the Android recognition demo program now ( <a href="https://play.google.com/store/apps/details%3Fid%3Dbiz.smartengines.psprecognition">Smart PassportReader at Google play</a> ) and for iOS ( <a href="https://itunes.apple.com/us/app/smart-passportreader/id953506228%3Fmt%3D8">Smart PassportReader at the App Store</a> ).  And if by the nature of your activity you are interested in the SDK of our product, in order to ‚Äútouch‚Äù alive and try to embed it in your mobile applications - write us at <a href="">support@smartengines.biz</a> and we will be happy to tell you how to do this, as well as answer other questions that interest you. . <br><br>  And at the very end of a few screenshots of our program for the Apple iPhone <img src="https://habrastorage.org/files/c69/6a4/2fa/c696a42fa7e64d2285511a66ac7678ae.png"></div><p>Source: <a href="https://habr.com/ru/post/252703/">https://habr.com/ru/post/252703/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252675/index.html">Administering through the eyes of a C ++ programmer</a></li>
<li><a href="../252677/index.html">Oberon Interpreter on Go</a></li>
<li><a href="../252683/index.html">"- Hello, tech support. Have you tried to turn it off and on?"</a></li>
<li><a href="../252697/index.html">Risk Protection Machine Learning System Architecture</a></li>
<li><a href="../252699/index.html">Protection against cheating in online games</a></li>
<li><a href="../252705/index.html">NoScript is now for Android</a></li>
<li><a href="../252707/index.html">Weekly build Vivaldi 1.0.124.2</a></li>
<li><a href="../252711/index.html">Microsoft incorrectly fixed the vulnerability that the Stuxnet worm used</a></li>
<li><a href="../252713/index.html">Entertaining math in Hearthstone</a></li>
<li><a href="../252715/index.html">Zoo communication protocols for GPS trackers (part 1)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
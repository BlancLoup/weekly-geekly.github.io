<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ergonomics in the dark</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="How many of you have a monitor next to a window in which the sun shines in the morning, afternoon or evening? Even if the rays of the Sun do not dazzl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ergonomics in the dark</h1><div class="post__text post__text-html js-mediator-article">  How many of you have a monitor next to a window in which the sun shines in the morning, afternoon or evening?  Even if the rays of the Sun do not dazzle and do not create glare on the screen surface, it will still create a little discomfort during sunset, at least for me. <a name="habracut"></a><br><br><h4>  How? </h4><br>  Everything is very simple.  Towards evening, the sun is setting to a sunset and the light enters the room very brightly, sanctifying the space around my workplace is brighter than ever.  But the closer the sun comes to the horizon, the duller its rays become and it is necessary to turn on artificial lighting.  And at this very time, the difference in the illumination of the room is formed and against the background of the subdued illumination the 22-inch monitor begins to ‚Äúcut‚Äù the eyes. <br><br><h4>  Decision </h4><br>  Although there are already ready-made programs, for example <a href="http://www.stereopsis.com/flux/">f.lux</a> or <a href="http://jonls.dk/redshift/">Redshift</a> , in which a gradual change in color temperature is realized, I nevertheless decided to give my attention to brightness.  And since I am the proud owner of an HD3870 video card with the proprietary fglrx driver installed, I wrote three small shell scripts to automatically gradually change the screen brightness. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  How? </h4><br>  Again, everything is very simple! <ul><li>  Every day during sunset, gradually and evenly, for an hour, imperceptibly visible to the eye, we reduce the screen brightness to a level that is pleasing to my eyes. </li><li>  During each dawn, the second script is launched, which, on the contrary, restores the screen brightness to a convenient day job at the computer. </li><li>  And the third script is executed every time you start the computer and immediately restores the brightness to the standard mark. </li></ul><br><h4>  "Evening" algorithm </h4><ol><li>  Determine the initial brightness. </li><li>  Determine the duration of the transition and divide the time by Œî brightness. </li><li> Dim the screen gradually. <br> <code>now=$((now-1)) <br> aticonfig --set-dispattrib=tmds1,brightness:$now</code> </li> <li>  We are waiting for n / m seconds, where "n" is the dimming time, and "m" is Œî brightness. </li><li>  Repeat the 3rd and 4th paragraph until $ now becomes equal to the required blackout. </li></ol><br><h4>  ‚ÄúMorning‚Äù algorithm </h4><ol><li>  Determine the initial brightness. <br> <code>aticonfig --query-dispattrib=tmds1,brightness</code> </li> <li>  Determine the duration of the transition, find Œî brightness. </li><li>  We continue if Œî brightness  0, otherwise the required mark has already been reached. </li><li>  Add brightness. <br> <code>now=$((now+1)) <br> aticonfig --set-dispattrib=tmds1,brightness:$now</code> </li> <li>  We are waiting for n / m seconds, where "n" is the dimming time, and "m" is Œî brightness. </li><li>  Repeat the 4th and 5th paragraph until $ now becomes equal to the initial level of brightness. </li></ol><br><h4>  "Boot" algorithm </h4><ul><li>  Immediately restore to the default level. <br> <code>aticonfig --set-dispattrib=tmds1,brightness:0</code> </li> </ul><br>  ‚Äú <a href="">Evening</a> ‚Äù, ‚Äú <a href="">Morning</a> ‚Äù and ‚Äú <a href="">Boot</a> ‚Äù script, works without root rights.  <b>Carefully read the comments at the very top, as you may have to guess with a different type of display!</b> <br> <nobr><br></nobr> <br><h4>  Tricky question" </h4><br>  How to make it all work?  Again, everything is elementary. <ul><li>  We change the scheduler task list in the terminal. <br> <code>~$ crontab -e</code> </li> <li>  We insert only two lines <sup>1</sup> .  The first one is to run every day, for example, at 05:00 restore the brightness, and the second is to dim at 20:00 every day.  Do not forget to change the path to the script! <br> <code>0 5 * * * export DISPLAY=:0 &amp;&amp; "/    /brightness_morning.sh" <br> 0 20 * * * export DISPLAY=:0 &amp;&amp; "/    /brightness_evening.sh"</code> </li> <li>  Restart cron. <br> <code>~$ sudo /etc/init.d/cron restart</code> </li> <li>  Open the list of programs that run when Ubuntu starts <br> <code>System ‚Üí Preferences ‚Üí Startup Applications</code> <br>  or in the terminal. <br> <code>~$ gnome-session-properties</code> </li> <li>  Add a line to run <sup>2</sup> . <br> <code>"/    /brightness_reboot.sh"</code> </li> </ul><br>  Voila!  Everything is ready for long night coding.  It remains to make coffee and snacks, for programming new bugs appear on an empty stomach. <br> <nobr><br></nobr> <br><h4>  It was and became </h4><br><img src="http://dl.dropbox.com/u/846525/linux-desktop/brightness-310510/photo_aticonfig/P1040622-shutter-1%3A2-def-640.JPG" alt="image"><br><br><img src="http://dl.dropbox.com/u/846525/linux-desktop/brightness-310510/photo_aticonfig/P1040619-shutter-1%3A2-dark-640.JPG" alt="image"><br> <nobr><br></nobr> <br>  It only remains for me to write an algorithm for calculating the beginning and end of daylight depending on the date and location, but this is a completely different story.  I hope someone else, besides me, will need these scripts.  Take care of your health, especially eyesight.  Good luck! <nobr><br></nobr> <br><br><hr>  <sup>1</sup> Be sure to specify <code>export DISPLAY=:0</code> to run from under the ‚ÄúX‚Äù.  Works great in Ubuntu 9.10 Karmic Koala. <br>  <sup>2</sup> I didn‚Äôt manage to reset the brightness to zero through cron, because first X and drivers should be launched, and only then the script itself, but if someone could manage to achieve the same result in the same way, please add your comments in the comments option. </div><p>Source: <a href="https://habr.com/ru/post/94745/">https://habr.com/ru/post/94745/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../94737/index.html">Musical touchpad</a></li>
<li><a href="../94738/index.html">Project Note 2</a></li>
<li><a href="../94740/index.html">Firefox 4: more animation when working with tabs</a></li>
<li><a href="../94742/index.html">Data acquisition, part 3</a></li>
<li><a href="../94744/index.html">Integration experiences: Egretlist, to-do list based on Evernote</a></li>
<li><a href="../94746/index.html">Sony 3D TV commercial</a></li>
<li><a href="../94747/index.html">3D installation in Amsterdam</a></li>
<li><a href="../94748/index.html">Review MeeGo 1.0</a></li>
<li><a href="../94749/index.html">The right tool</a></li>
<li><a href="../94750/index.html">Installing modified firmware</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
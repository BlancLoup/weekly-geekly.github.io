<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Putting Wi-Fi robot</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It has long dreamed of making a Wi-Fi robot that could be controlled remotely. And finally, the day came when I was able to control the robot via the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Putting Wi-Fi robot</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/8cb/7c0/9a2/8cb7c09a215f6f960223891eb91b04c0.jpg"><br><br>  It has long dreamed of making a Wi-Fi robot that could be controlled remotely.  And finally, the day came when I was able to control the robot via the Internet, to see and hear everything that happens around it. <br>  Interested invite under the cat <a name="habracut"></a><br><br>  <b>The following components were used to create the robot:</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://duino.ru/product_info.php/info/p2331_Konstruktor--Robot---dlya-samostoyatelnoi-sborki.html">Kit to build the robot platform</a> <br>  <a href="http://duino.ru/product_info.php/info/p2330_Materinskaya-plata-robota--CyberBot-.html">Robot controller board</a> <br>  <a href="http://duino.ru/arduino-nano-v7--carduino-nano-duo-.html">Arduino Nano v.7</a> <br>  <a href="http://duino.ru/product_info.php/info/p2307_Draiver-dlya-yelektrodvigatelei--2x-kanalnyi-H-most.html">Engine driver</a> <br>  <a href="http://duino.ru/nexx-wt3020h-wi-fi-marshrutizator-.html">Nexx WT3020H Router</a> <br>  <a href="http://duino.ru/product_info.php/info/p2364_Kompaktnyi-USB-2-0-HUB-koncentrator.html">Mini USB 2.0 Hub</a> <br><br>  This is how the robot I assembled, without the top cover, looks like. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/190/f92/320/190f9232042040e20077d7c256520598.jpg"><br><br>  <b>Now everything is in order:</b> <br><br>  Assembly of the robot platform: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c36/6f9/2ad/c366f92ad19e70678bf40e92c32de61d.jpg" alt="image"><br><br>  The location of the components on the motherboard.  I installed only Arduino Nano, the driver of the engines and the sound radiator HC: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/62e/f8c/bbe/62ef8cbbec4ba482fc39b5848715c97e.png" alt="image"><br><br>  Router wr703N attached to the bottom of the platform of the robot on double-sided tape: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0e4/10b/cad/0e410bcad6db3f38a929bedeec09f71f.jpg"><br><br>  The webcam is attached to the furniture corner, to the standard openings of the platform, provided for servomotors: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/198/e48/8b3/198e488b3403df6ce1193bb76856ca11.jpg"><br><br>  I patched the router <a href="http://cyber-place.ru/forumdisplay.php%3Ff%3D44">with CyberWrt firmware</a> . <br><br>  CyberWrt is a firmware compiled on the basis of OpenWrt and intended primarily for robots, smart homes and other devices built on the basis of popular models of Tp-Link mr3020 b Wr703N routers.  In CyberWrt, the maximum possible amount of free space for installing packages is 1.25 MB.  By default, the web server is installed and all operations can be performed via the built-in web interface.  Immediately after flashing, the router is available on the network via cable and WiFi, as an access point.  Through the web interface, you can work in the "command line" mode - via a web terminal and in the file manager, where you can edit, download, delete, create, copy files and much more. <br><br>  After the firmware of the router, it is available as a WiFi access point with the name ‚ÄúCyberBot‚Äù, we connect to it and go to the main page of the router.  This is what the <a href="http://cyberwrt.ru/demo/index.php">web interface</a> looks like right after the firmware. <br><br>  Installing modules FTDI Driver, Video driver and CyberBot-2. <br><br>  We are flashing the arduino controller. <br><br>  The program code of the robot turned out to be quite simple, but it is enough to remotely control the robot via a local network or the Internet. <br>  The code is adapted for Arduino controllers with ATmega168 / 328 on board and uses <a href="http://cyber-place.ru/showthread.php%3Ft%3D550">the CyberLib library</a> . <br>  This library helps the controller to maximize its capabilities and reduce the amount of the final code. <br>  The code uses WDT, so that the robot could not hang. <br>  The same code supports camera control along the X and Y axes, but I did not have free servos and I could not use this function: <br><br><div class="spoiler">  <b class="spoiler_title">Code for Arduino</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;CyberLib.h&gt; #include &lt;Servo.h&gt; Servo myservo1; Servo myservo2; long previousMillis; http://cyber-place.ru/attachment.php?attachmentid=600&amp;d=1389429469 uint8_t LedStep = 0; //  int i; boolean light_stat; uint8_t inByte; uint8_t speed=255; //    #define init {D4_Out; D5_Out; D6_Out; D7_Out; D8_Out; D11_Out; D12_Out;} void setup() { myservo1.attach(9); //     myservo2.attach(10); //     init; //   D11_Low; //  OFF randomSeed(A6_Read); //   horn(); //    UART_Init(57600);//       wdt_enable (WDTO_500MS); } void loop() { unsigned long currentMillis = millis(); if (LedStep == 0 &amp;&amp; currentMillis - previousMillis &gt; 500){ //  0,5 . previousMillis = currentMillis; LedStep = 1; } if (LedStep == 1 &amp;&amp; currentMillis - previousMillis &gt; 500){ //  0,5 . previousMillis = currentMillis; LedStep = 2; } if (LedStep == 2 &amp;&amp; currentMillis - previousMillis &gt; 500){ //  0,5 . LedStep = 0; } if (UART_ReadByte(inByte)) //    { switch (inByte) //     { case 'x': //   robot_stop(); break; case 'W': //   robot_go(); break; case 'D': // j  robot_rotation_left(); break; case 'A': //   robot_rotation_right(); break; case 'S': //   robot_back(); break; case 'U': //    myservo1.write(i -= 20); break; case 'J': //    myservo1.write(i += 20); break; case 'H': //    myservo2.write(i += 20); break; case 'K': //    myservo2.write(i -= 20); break; case 'B': //  D12_High; break; case 'C': //  horn(); break; case 'V': // /  if(light_stat) { D8_Low; light_stat=false; } else { D8_High; light_stat=true; } break; } if(inByte&gt;47 &amp;&amp; inByte&lt;58) speed=(inByte-47)*25+5; //      } wdt_reset(); } void horn() { for(uint8_t i=0; i&lt;12; i++) beep(70, random(100, 2000)); //  } void robot_go() { D4_Low; analogWrite(5, speed); analogWrite(6, speed); D7_Low; } void robot_back() { D4_High; analogWrite(5, 255-speed); analogWrite(6, 255-speed); D7_High; } void robot_stop() { D4_Low; analogWrite(5, 0); analogWrite(6, 0); D7_Low; } void robot_rotation_left() { D4_Low; analogWrite(5, speed); analogWrite(6, 255-speed); D7_High; } void robot_rotation_right() { D4_High; analogWrite(5, 255-speed); analogWrite(6, speed); D7_Low; }</span></span></span></span></code> </pre> <br></div></div><br><br>  Everything is assembled and stitched, now we turn on the robot and control it remotely. <br>  On the PC, in addition to the on-screen buttons, you can control it from the keyboard, using the W, A, D, S, X keys <br><br>  I post the video: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/ZI1ZcigQPlk%3Ffeature%3Doembed&amp;xid=25657,15700023,15700186,15700190,15700253&amp;usg=ALkJrhjA7a6ozfC2oyFu0YLJbOfUOdoqYg" frameborder="0" allowfullscreen=""></iframe><br><br>  In the future, I plan to teach the robot to navigate in space and draw a map of the room. </div><p>Source: <a href="https://habr.com/ru/post/252411/">https://habr.com/ru/post/252411/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252399/index.html">Do it with love - an application that teaches you to love</a></li>
<li><a href="../252403/index.html">Budget SAN Storage on LSI Syncro Part 1</a></li>
<li><a href="../252405/index.html">How to rewrite a big project or refactoring that is painless for business</a></li>
<li><a href="../252407/index.html">Intel¬Æ Galileo Gen 2. Features of the beginning of operation</a></li>
<li><a href="../252409/index.html">PaintCode 2, a brief digression and notes</a></li>
<li><a href="../252415/index.html">LVS + OpenVZ</a></li>
<li><a href="../252417/index.html">Announcement of the book by Brian Kernigan "The Go Programming Language"</a></li>
<li><a href="../252419/index.html">C #: how not to "shoot yourself in the leg"</a></li>
<li><a href="../252421/index.html">A hundred lines of code for the beloved</a></li>
<li><a href="../252429/index.html">DICOM Viewer from the inside. Voxel render</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
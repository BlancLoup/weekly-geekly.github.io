<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>React + SVG game development. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TL; DR: In these episodes, you'll learn how to get React and Redux to control SVG elements to create a game. The knowledge gained in this series will ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>React + SVG game development. Part 2</h1><div class="post__text post__text-html js-mediator-article"><p>  TL; DR: In these episodes, you'll learn how to get React and Redux to control SVG elements to create a game.  The knowledge gained in this series will allow you to create animation not only for games.  You can find the final version of the source code developed in this part on <a href="https://github.com/auth0-blog/aliens-go-home-part-2">GitHub.</a> <br><img src="https://habrastorage.org/getpro/habr/post_images/a00/d54/9b6/a00d549b6eec7c7771c2b69b1ad440ae.png" alt="image"></p><a name="habracut"></a><br><h2 id="nazvanie-igry-prishelcy-provalivayte-domoy">  The name of the game: "Aliens, go home!" </h2><br><p>  The game, the development of which you will be engaged in this series, is called "Aliens, go home!".  The idea of ‚Äã‚Äãthe game is simple: you will have a gun with which you will shoot down "flying discs" that are trying to invade Earth.  To destroy these UFOs, you need to fire a cannon by hovering the cursor and clicking the mouse. </p><br><p>  If you're interested, you can find and run the final version of the game <a href="http://bang-bang.digituz.com.br/">here</a> .  But do not get carried away with the game, you have a job! </p><br><h2 id="ranee-v-pervoy-chasti">  Earlier in the first part </h2><br><p> In the <a href="https://habrahabr.ru/post/350274/">first series,</a> you used <a href="https://github.com/facebookincubator/create-react-app">create-react-app</a> to quickly launch your React application.  Install and configure Redux to control the state of the game.  Then you learned how to use SVG with React components, creating <code>Sky</code> , <code>Ground</code> , <code>CannonBase</code> , and <code>CannonPipe</code> game elements.  And finally, you mounted the sight for your gun, using the event listener and the interval ( <code>setInterval</code> ) to launch the Redux action, which changes the angle of the <code>CannonPipe</code> . </p><br><p>  With these exercises, you have ‚Äúmastered‚Äù your skills in creating a game (and not only) with the help of React, Redux and SVG. </p><br><p>  <strong>Note:</strong> if for some reason you do not have the code written in the <a href="https://auth0.com/blog/developing-games-with-react-redux-and-svg-part-1/">previous section</a> , just copy it from <a href="https://github.com/auth0-blog/aliens-go-home-part-1">GitHub</a> .  After copying follow the further instructions. </p><br><h2 id="sozdaem-bolshe-komponentov">  Create more components </h2><br><p>  The following subsections describe the creation of the remaining elements of your game.  Their reading may seem long, but in reality they are simple and similar.  It may take just a few minutes to complete the instructions. </p><br><p>  After reading this section, you will be presented with the most interesting topics in this series.  They are called "Creating Flying Objects in Random Order" and "Using CSS Animation to Move Flying Objects". </p><br><h2 id="sozdaem-react-komponent-cannonball">  Create a React-component <code>Cannonball</code> </h2><br><p>  The next step is to create the <code>Cannonball</code> element ( <em>cannonball</em> ).  Note that at this stage you will leave this element without movement.  But do not worry!  Soon (after creating the rest of the elements), your gun will be able to repeatedly shoot with nuclei and you will ‚Äúfry‚Äù a couple of aliens. </p><br><p>  To create a component, add a new <code>CannonBall.jsx</code> file with the following code: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PropTypes <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'prop-types'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CannonBall = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ballStyle = { <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: <span class="hljs-string"><span class="hljs-string">'#777'</span></span>, <span class="hljs-attr"><span class="hljs-attr">stroke</span></span>: <span class="hljs-string"><span class="hljs-string">'#444'</span></span>, <span class="hljs-attr"><span class="hljs-attr">strokeWidth</span></span>: <span class="hljs-string"><span class="hljs-string">'2px'</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ellipse</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{ballStyle}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">cx</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{props.position.x}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">cy</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{props.position.y}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">rx</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"16"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ry</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"16"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> ); }; CannonBall.propTypes = { position: PropTypes.shape({ x: PropTypes.number.isRequired, y: PropTypes.number.isRequired }).isRequired, }; export default CannonBall;</span></span></code> </pre> <br><p>  As you can see, to display the <code>Cannonball</code> component on your canvas, you must give it x and y coordinates (by passing an object containing the <code>x</code> and <code>y</code> properties).  If you do not have much experience with <code>Prop-types</code> , perhaps here you first encountered <code>PropTypes.shape</code> .  Fortunately, this feature requires no explanation. </p><br><p>  After creating the component, you can take a look at it.  To do this, simply add the following tag to the <code>SVG</code> element of the <code>Canvas</code> component (you will also have to add <code>import CannonBall from './CannonBall';</code> ): </p><br><pre> <code class="javascript hljs">&lt;CannonBall position={{<span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">-100</span></span>}}/&gt;</code> </pre> <br><p>  Just keep in mind that if you add it before an element that occupies the same position, you will not see it.  To avoid this, place it last (immediately after <code>&lt;CannonBase /&gt;</code> ).  After that, you can open the game in the browser to view the new component. </p><br><p>  If you forget how to do it, just run <code>npm start</code> in the project root and then open <a href="http://localhost:3000/"></a>  <a href="http://localhost:3000/">http: // localhost: 3000</a> in your browser.  Also, do not forget to commit the code to the repository before moving on. </p><br><h2 id="sozdaem-komponent-current-score">  Create Current Score component </h2><br><p>  The next step is to create the <code>CurrentScore</code> component.  As the name suggests, this component shows users the points they currently have.  That is, each time a flying disc is destroyed, the value of this component increases by one. </p><br><p>  Before you create this component, it is recommended to develop a neat font for it.  In fact, it is worth setting the font for the whole game so that it does not look monotonous.  You can find and select the font where you want, but if you don‚Äôt want to spend time on it, simply add the following line at the top of the <code>./src/index.css</code> file: </p><br><pre> <code class="javascript hljs">@<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> url(<span class="hljs-string"><span class="hljs-string">'https://fonts.googleapis.com/css?family=Joti+One'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/*   ... */</span></span></code> </pre> <br><p>  This will load the font <a href="https://fonts.google.com/specimen/Joti%2BOne">Joti One font from Google</a> into the game. </p><br><p>  After that, create a <code>CurrentScore.jsx</code> file with the following code inside the <code>./src/components</code> directory: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PropTypes <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'prop-types'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CurrentScore = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> scoreStyle = { <span class="hljs-attr"><span class="hljs-attr">fontFamily</span></span>: <span class="hljs-string"><span class="hljs-string">'"Joti One", cursive'</span></span>, <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: <span class="hljs-string"><span class="hljs-string">'#d6d33e'</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">g</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">filter</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"url(#shadow)"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{scoreStyle}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"300"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"80"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {props.score} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">g</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }; CurrentScore.propTypes = { <span class="hljs-attr"><span class="hljs-attr">score</span></span>: PropTypes.number.isRequired, }; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> CurrentScore;</code> </pre> <br><p>  <strong>Note:</strong> If you have not configured the font for Joti One (or if you prefer it to any other font), you need to change this code accordingly.  In addition, this font will be used in other components that you create, so you will have to update them too. </p><br><p>  As you can see, the <code>CurrentScore</code> component needs only one property ( <em>props</em> ): <code>score</code> (points).  Since at this stage of development in the game is not counting points, to view the component, set it a fixed value.  To do this, inside the <code>Canvas</code> component, add <code>&lt;CurrentScore score={15} /&gt;</code> as the last element inside the <code>svg</code> element.  Also add <code>import</code> to extract the specified component ( <code>import CurrentScore from './CurrentScore';</code> ). </p><br><p>  Right now you will not be able to evaluate your new component.  This is due to the fact that the component uses a <code>shadow</code> filter.  Although such a filter is not mandatory, it will make the image in your game more attractive.  In addition, <a href="https://www.w3schools.com/graphics/svg_feoffset.asp">adding a shadow to SVG elements is</a> quite simple.  To do this, add the following at the top of the <code>svg</code> </p><br><pre> <code class="javascript hljs">&lt;defs&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">filter</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"shadow"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">feDropShadow</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dx</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dy</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">stdDeviation</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">filter</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">defs</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br><p>  As a result, your <code>Canvas</code> component will look like: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PropTypes <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'prop-types'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Sky <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Sky'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Ground <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Ground'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> CannonBase <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./CannonBase'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> CannonPipe <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./CannonPipe'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> CannonBall <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./CannonBall'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> CurrentScore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./CurrentScore'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Canvas = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> viewBox = [<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerWidth / <span class="hljs-number"><span class="hljs-number">-2</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span> - <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerHeight, <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerWidth, <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerHeight]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;svg id="aliens-go-home-canvas" preserveAspectRatio="xMaxYMax none" onMouseMove={props.trackMouse} viewBox={viewBox} &gt; &lt;defs&gt; &lt;filter id="shadow"&gt; &lt;feDropShadow dx="1" dy="1" stdDeviation="2" /&gt; &lt;/filter&gt; &lt;/defs&gt; &lt;Sky /&gt; &lt;Ground /&gt; &lt;CannonPipe rotation={props.angle} /&gt; &lt;CannonBase /&gt; &lt;CannonBall position={{x: 0, y: -100}}/&gt; &lt;CurrentScore score={15} /&gt; &lt;/svg&gt; ); }; Canvas.propTypes = { angle: PropTypes.number.isRequired, trackMouse: PropTypes.func.isRequired, }; export default Canvas;</code> </pre> <br><p>  And you get this picture: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b58/ecc/884/b58ecc884c52462e8ee6bc523b47ede3.png" alt="image"></p><br><p>  Not bad, huh ?! </p><br><h2 id="sozdanie-react-komponenta-flying-object-letayuschiy-obekt">  Creating a Flying Object React Component (flying object) </h2><br><p>  How about starting to develop flying objects with React-components?  These objects are not described by circles or rectangles.  Usually they consist of two rounded parts (tops and bottoms).  Therefore, to create them you will use two components: <code>FlyingObjectBase</code> (base) and <code>FlyingObjectTop</code> (top). </p><br><p>  A cubic Bezier curve will be used to determine the shape of one of these components.  The second will be described by an ellipse. </p><br><p>  You can start by creating the first component, <code>FlyingObjectBase</code> , in the new <code>FlyingObjectBase.jsx</code> file inside the <code>./src/components</code> directory.  The code for defining the component is shown below: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PropTypes <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'prop-types'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> FlyingObjectBase = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> style = { <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: <span class="hljs-string"><span class="hljs-string">'#979797'</span></span>, <span class="hljs-attr"><span class="hljs-attr">stroke</span></span>: <span class="hljs-string"><span class="hljs-string">'#5c5c5c'</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ellipse</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">cx</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{props.position.x}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">cy</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{props.position.y}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">rx</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"40"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ry</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"10"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{style}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> ); }; FlyingObjectBase.propTypes = { position: PropTypes.shape({ x: PropTypes.number.isRequired, y: PropTypes.number.isRequired }).isRequired, }; export default FlyingObjectBase;</span></span></code> </pre> <br><p>  Then draw the top of the object.  To do this, create the <code>FlyingObjectTop.jsx</code> file inside the <code>./src/components</code> directory and add the following code there: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PropTypes <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'prop-types'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { pathFromBezierCurve } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../utils/formulas'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> FlyingObjectTop = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> style = { <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: <span class="hljs-string"><span class="hljs-string">'#b6b6b6'</span></span>, <span class="hljs-attr"><span class="hljs-attr">stroke</span></span>: <span class="hljs-string"><span class="hljs-string">'#7d7d7d'</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> baseWith = <span class="hljs-number"><span class="hljs-number">40</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> halfBase = <span class="hljs-number"><span class="hljs-number">20</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> height = <span class="hljs-number"><span class="hljs-number">25</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> cubicBezierCurve = { <span class="hljs-attr"><span class="hljs-attr">initialAxis</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: props.position.x - halfBase, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: props.position.y, }, <span class="hljs-attr"><span class="hljs-attr">initialControlPoint</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: -height, }, <span class="hljs-attr"><span class="hljs-attr">endingControlPoint</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: -height, }, <span class="hljs-attr"><span class="hljs-attr">endingAxis</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: baseWith, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, }, }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">path</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{style}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">d</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{pathFromBezierCurve(cubicBezierCurve)}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> ); }; FlyingObjectTop.propTypes = { position: PropTypes.shape({ x: PropTypes.number.isRequired, y: PropTypes.number.isRequired }).isRequired, }; export default FlyingObjectTop;</span></span></code> </pre> <br><p>  If you do not know the principles of the operation of cubic Bezier curves, <a href="https://habrahabr.ru/post/350274/">open the previous article.</a> </p><br><p>  The described actions are sufficient for the image of several flying objects, but you need them to randomly appear in the game, and it will be more convenient to process them as one element.  To do this, add another <code>FlyingObject.jsx</code> to the two existing files: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PropTypes <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'prop-types'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FlyingObjectBase <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./FlyingObjectBase'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FlyingObjectTop <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./FlyingObjectTop'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> FlyingObject = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function"> =&gt;</span></span> ( &lt;g&gt; &lt;FlyingObjectBase position={props.position} /&gt; &lt;FlyingObjectTop position={props.position} /&gt; &lt;/g&gt; ); FlyingObject.propTypes = { position: PropTypes.shape({ x: PropTypes.number.isRequired, y: PropTypes.number.isRequired }).isRequired, }; export default FlyingObject;</code> </pre> <br><p>  Now you can use only one component to add flying objects to the game.  Check out how this works by updating the <code>Canvas</code> as follows: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ...   import FlyingObject from './FlyingObject'; const Canvas = (props) =&gt; { // ... return ( &lt;svg ...&gt; // ... &lt;FlyingObject position={{x: -150, y: -300}}/&gt; &lt;FlyingObject position={{x: 150, y: -300}}/&gt; &lt;/svg&gt; ); }; // ... propTypes  </span></span></code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/7e0/df2/4ef/7e0df24ef3b1bd822d5e3d3712f5d9a0.png" alt="image"></p><br><h2 id="sozdaem-komponent-heart-serdce">  Create the Heart component </h2><br><p>  The next component should display on the screen the remaining "life" of players.  Do not come up with an icon better than the heart - <code>Heart</code> .  So, create a file called <code>Heart.jsx</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PropTypes <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'prop-types'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { pathFromBezierCurve } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../utils/formulas'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Heart = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> heartStyle = { <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: <span class="hljs-string"><span class="hljs-string">'#da0d15'</span></span>, <span class="hljs-attr"><span class="hljs-attr">stroke</span></span>: <span class="hljs-string"><span class="hljs-string">'#a51708'</span></span>, <span class="hljs-attr"><span class="hljs-attr">strokeWidth</span></span>: <span class="hljs-string"><span class="hljs-string">'2px'</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> leftSide = { <span class="hljs-attr"><span class="hljs-attr">initialAxis</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: props.position.x, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: props.position.y, }, <span class="hljs-attr"><span class="hljs-attr">initialControlPoint</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">-20</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">-20</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">endingControlPoint</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">-40</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">endingAxis</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">40</span></span>, }, }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rightSide = { <span class="hljs-attr"><span class="hljs-attr">initialAxis</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: props.position.x, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: props.position.y, }, <span class="hljs-attr"><span class="hljs-attr">initialControlPoint</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">-20</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">endingControlPoint</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">endingAxis</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">40</span></span>, }, }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;g filter="url(#shadow)"&gt; &lt;path style={heartStyle} d={pathFromBezierCurve(leftSide)} /&gt; &lt;path style={heartStyle} d={pathFromBezierCurve(rightSide)} /&gt; &lt;/g&gt; ); }; Heart.propTypes = { position: PropTypes.shape({ x: PropTypes.number.isRequired, y: PropTypes.number.isRequired }).isRequired, }; export default Heart;</code> </pre> <br><p>  As you can see, to describe the shape of the heart using SVG, you must use two cubic Bezier curves, one for each half of the heart.  Also, we had to add the <code>position</code> property to the component.  You need this in order to portray each of the hearts in its own position, since in the game you will have more than one "life." </p><br><p>  For now, just add one heart to the canvas to make sure that it works as it should.  Open the <code>Canvas</code> component and add: </p><br><pre> <code class="javascript hljs">&lt;Heart position={{<span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">-300</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">35</span></span>}} /&gt;</code> </pre> <br><p>  The development of the elements inside the <code>svg</code> should end there.  Also do not forget to add <code>imoprt</code> ( <code>import Heart from './Heart';</code> ). </p><br><h2 id="sozdaem-knopku-nachat-igru-start-game">  Create a button "Start Game" (Start Game) </h2><br><p>  Each game must have a launch button.  So that your game and this, add the file <code>StartGame.jsx</code> and the following code to it: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PropTypes <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'prop-types'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { gameWidth } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../utils/constants'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> StartGame = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> button = { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: gameWidth / <span class="hljs-number"><span class="hljs-number">-2</span></span>, <span class="hljs-comment"><span class="hljs-comment">//   y: -280, //   "" ( ) width: gameWidth, height: 200, rx: 10, // border  ry: 10, // border  style: { fill: 'transparent', cursor: 'pointer', }, onClick: props.onClick, }; const text = { textAnchor: 'middle', //  x: 0, //    X y: -150, // 150   (  Y) style: { fontFamily: '"Joti One", cursive', fontSize: 60, fill: '#e3e3e3', cursor: 'pointer', }, onClick: props.onClick, }; return ( &lt;g filter="url(#shadow)"&gt; &lt;rect {...button} /&gt; &lt;text {...text}&gt; Tap To Start! &lt;/text&gt; &lt;/g&gt; ); }; StartGame.propTypes = { onClick: PropTypes.func.isRequired, }; export default StartGame;</span></span></code> </pre> <br><p>  Since you do not need several buttons on the screen at the same time, you described its location statically (with <code>x: 0</code> and <code>y: -150</code> coordinates).  In addition, there are two other differences between this component and the one described earlier: </p><br><ul><li>  First, the component expects the <code>onClick</code> function.  By clicking on the button, this function calls the Redux-action, which tells the application to start a new game. </li><li>  Secondly, the component uses the <code>gameWidth</code> constant <code>gameWidth</code> is not yet defined.  This constant will describe the area that can be used.  Any other area is needed only to expand the application to full screen. </li></ul><br><p>  To define the <code>gameWidth</code> constant <code>gameWidth</code> open the <code>./src/utils/constants.js</code> file and write: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> gameWidth = <span class="hljs-number"><span class="hljs-number">800</span></span>;</code> </pre> <br><p>  After that, you can add the <code>StartGame</code> component to your <code>Canvas</code> by adding <code>&lt;StartGame onClick={() =&gt; console.log('Aliens, Go Home!')} /&gt;</code> As the last element in <code>svg</code> .  And, as usual, do not forget to add <code>import</code> ( <code>import StartGame from './StartGame';</code> ): </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/360/15f/d58/36015fd588080c3b86e7c9e8afa54ea5.png" alt="image"></p><br><h2 id="sozdaem-zagolovok">  Create a title </h2><br><p>  The final component to develop in this series will be <code>Title</code> .  Your game already has a name: "Aliens, Go Home!"  ( <em>Aliens, go home</em> ).  Making it a headline is very simple by creating a file (inside the <code>./src/components</code> directory) with the code: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { pathFromBezierCurve } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../utils/formulas'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Title = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> textStyle = { <span class="hljs-attr"><span class="hljs-attr">fontFamily</span></span>: <span class="hljs-string"><span class="hljs-string">'"Joti One", cursive'</span></span>, <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-number"><span class="hljs-number">120</span></span>, <span class="hljs-attr"><span class="hljs-attr">fill</span></span>: <span class="hljs-string"><span class="hljs-string">'#cbca62'</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> aliensLineCurve = { <span class="hljs-attr"><span class="hljs-attr">initialAxis</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">-190</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">-950</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">initialControlPoint</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">95</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">-50</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">endingControlPoint</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">285</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">-50</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">endingAxis</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">380</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, }, }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> goHomeLineCurve = { ...aliensLineCurve, <span class="hljs-attr"><span class="hljs-attr">initialAxis</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">-250</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">-780</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">initialControlPoint</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">125</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">-90</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">endingControlPoint</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">375</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">-90</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">endingAxis</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">500</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, }, }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;g filter="url(#shadow)"&gt; &lt;defs&gt; &lt;path id="AliensPath" d={pathFromBezierCurve(aliensLineCurve)} /&gt; &lt;path id="GoHomePath" d={pathFromBezierCurve(goHomeLineCurve)} /&gt; &lt;/defs&gt; &lt;text {...textStyle}&gt; &lt;textPath xlinkHref="#AliensPath"&gt; Aliens, &lt;/textPath&gt; &lt;/text&gt; &lt;text {...textStyle}&gt; &lt;textPath xlinkHref="#GoHomePath"&gt; Go Home! &lt;/textPath&gt; &lt;/text&gt; &lt;/g&gt; ); }; export default Title;</code> </pre> <br><p>  To make the header have a curved shape, you use a combination of <code>path</code> and <code>textPath</code> with a cubic Bezier curve.  You also set the header to a static position, as for the Start button <code>StartGame</code> . </p><br><p>  To make the title appear on the canvas, add <code>&lt;Title/&gt; </code> svg <code>    </code> import <code>(</code> import Title from './Title'; <code>)  </code> Canvas.jsx <code>)  </code> .  However, if you launch the application now, you will see that the new elements are not displayed on the screen.  This is due to the fact that in your application there is not enough vertical space yet. </p><br><h2 id="delaem-igru-responsive-otzyvchivoy">  Making the game responsive (responsive) </h2><br><p>  In order to resize in the game and make it responsive ( <em>adaptive, that is, the size of the game elements changes when the browser window is changed - translator note</em> ), you need to do two things.  First, attach the <code>onresize</code> event <code>onresize</code> to the global <code>window</code> object.  It's simple to do this: open the <code>./src/App.js</code> file and add the following code to the <code>componentDidMount()</code> method: </p><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.onresize = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> cnv = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'aliens-go-home-canvas'</span></span>); cnv.style.width = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">window</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.innerWidth}</span></span></span><span class="hljs-string">px`</span></span>; cnv.style.height = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">window</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.innerHeight}</span></span></span><span class="hljs-string">px`</span></span>; }; <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.onresize();</code> </pre> <br><p>  After that, the size of your canvas will be equal to the size of the user window, even if the browser window is resized.  Also, during the initial playback of the application, the <code>window.onresize</code> function is executed. </p><br><p>  The second point: you need to change the <code>viewBox</code> property on the canvas.  Now, instead of calculating the value of the top point along the Y axis as <code>100 - window.innerHeight</code> (if you forgot where this formula came from, <a href="https://habrahabr.ru/post/350274/">see the first part</a> and that the height of the <code>viewBox</code> is equal to the height of the <code>innerHeight</code> <code>window</code> , you use the following: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> gameHeight = <span class="hljs-number"><span class="hljs-number">1200</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> viewBox = [<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerWidth / <span class="hljs-number"><span class="hljs-number">-2</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span> - gameHeight, <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerWidth, gameHeight];</code> </pre> <br><p>  In this case, you specify a height value of 1200, which allows you to correctly display your new header.  In addition, increasing the vertical space will give gamers more time to destroy aliens: it is more convenient to aim and shoot. <br><img src="https://habrastorage.org/getpro/habr/post_images/a00/d54/9b6/a00d549b6eec7c7771c2b69b1ad440ae.png" alt="image"></p><br><h2 id="pozvolyaem-polzovatelyam-nachat-igru">  Letting users start the game </h2><br><p>  Given the new components and new sizes, it‚Äôs time to think about how to give users the opportunity to play the game.  To do this, you can reorganize the game so that it starts by pressing the <code>Start Game</code> button.  After clicking the state of the game should change significantly.  However, to simplify the task, you can start by removing the <code>Title</code> and <code>StartGame</code> components from the screen after the user clicks the button. </p><br><p>  To do this, we create a new action, which will be processed by the reducer to change the flag (the <em>flag is a kind of variable whose values ‚Äã‚Äãare usually <code>true/false</code> - the translator‚Äôs comment</em> ).  To create such an action, open the <code>./src/actions/index.js</code> file and add the following code there (do not touch the old one!): </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ... MOVE_OBJECTS (   MOVE_OBJECTCS) export const START_GAME = 'START_GAME'; // ... moveObjects (,     moveObjects) export const startGame = () =&gt; ({ type: START_GAME, });</span></span></code> </pre> <br><p>  After that, you can refactor the <code>./src/reducers/index.js</code> file to handle the new action.  Here is the new version: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { MOVE_OBJECTS, START_GAME } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../actions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> moveObjects <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./moveObjects'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> startGame <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./startGame'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialGameState = { <span class="hljs-attr"><span class="hljs-attr">started</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">kills</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">lives</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = { <span class="hljs-attr"><span class="hljs-attr">angle</span></span>: <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-attr"><span class="hljs-attr">gameState</span></span>: initialGameState, }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reducer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state = initialState, action</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> MOVE_OBJECTS: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> moveObjects(state, action); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> START_GAME: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> startGame(state, initialGameState); <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state; } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> reducer;</code> </pre> <br><p>  As you can see, a child object appeared inside <code>initialState</code> , which contains three game properties: </p><br><ul><li>  <code>started</code> : a flag indicating whether the game is running or not; </li><li>  <code>kills</code> : the number of downed flying objects; </li><li>  <code>lives</code> : the number of remaining "lives"; </li></ul><br><p>  In addition, you added a new <code>case</code> to the <code>switch</code> <code>case</code> .  This <code>case</code> (which is triggered when an <code>START_GAME</code> action comes to the reducer) calls the <code>startGame</code> function.  This function includes the <code>started</code> flag inside the <code>gameStart</code> property.  In addition, whenever the user starts the game again, the function resets the number of kills ( <code>kills</code> ) and again gives three <code>lives</code> . </p><br><p>  To implement the <code>startGame</code> function <code>startGame</code> create a new file called <code>startGame.js</code> inside the <code>./src/reducers</code> directory with the code: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> (state, initialGameState) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, <span class="hljs-attr"><span class="hljs-attr">gameState</span></span>: { ...initialGameState, <span class="hljs-attr"><span class="hljs-attr">started</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, } } };</code> </pre> <br><p>  As you can see, the code in the new file is quite simple.  It only returns a new state object to the Redux store, where the start flag ( <code>started</code> ) is set to <code>true</code> and resets everything else inside the <code>gameState</code> property.  So users again get three lives, and their keels <code>kills</code> are reset. </p><br><p>  After this function is implemented, you need to transfer it to the game.  You also need to pass a new <code>gameState</code> property.  To do this, modify the <code>./src/containers/Game.js</code> file as follows: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { connect } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../App'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { moveObjects, startGame } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../actions/index'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">angle</span></span>: state.angle, <span class="hljs-attr"><span class="hljs-attr">gameState</span></span>: state.gameState, }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapDispatchToProps = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dispatch</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">moveObjects</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">mousePosition</span></span></span><span class="hljs-function">) =&gt;</span></span> { dispatch(moveObjects(mousePosition)); }, <span class="hljs-attr"><span class="hljs-attr">startGame</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { dispatch(startGame()); }, }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Game = connect( mapStateToProps, mapDispatchToProps, )(App); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> Game;</code> </pre> <br><p>  Summing up, we note the main changes in the file: <br>  - <code>mapStateToProps</code> : so you told Redux that the <code>App</code> component "cares" about the <code>gameState</code> property; <br>  - <code>mapDispatchToProps</code> : Redux passes the <code>startGame</code> function to the <code>startGame</code> component to initiate a new action. </p><br><p>  Both new components ( <code>gameState</code> and <code>startGame</code> ) are not used directly by the <code>App</code> component.  In fact, the <code>Canvas</code> component uses them, so you need to pass them to it.  To do this, open the <code>./src/App.js</code> file and convert it like this: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ...  ... class App extends Component { // ... constructor(props) ... // ... componentDidMount() ... // ... trackMouse(event) ... render() { return ( &lt;Canvas angle={this.props.angle} gameState={this.props.gameState} startGame={this.props.startGame} trackMouse={event =&gt; (this.trackMouse(event))} /&gt; ); } } App.propTypes = { angle: PropTypes.number.isRequired, gameState: PropTypes.shape({ started: PropTypes.bool.isRequired, kills: PropTypes.number.isRequired, lives: PropTypes.number.isRequired, }).isRequired, moveObjects: PropTypes.func.isRequired, startGame: PropTypes.func.isRequired, }; export default App;</span></span></code> </pre> <br><p>  Then open the <code>./src/components/Canvas.jsx</code> file and replace its code with the following: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PropTypes <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'prop-types'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Sky <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Sky'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Ground <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Ground'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> CannonBase <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./CannonBase'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> CannonPipe <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./CannonPipe'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> CurrentScore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./CurrentScore'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FlyingObject <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./FlyingObject'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> StartGame <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./StartGame'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Title <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Title'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Canvas = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> gameHeight = <span class="hljs-number"><span class="hljs-number">1200</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> viewBox = [<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerWidth / <span class="hljs-number"><span class="hljs-number">-2</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span> - gameHeight, <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerWidth, gameHeight]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;svg id=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"aliens-go-home-canvas"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> preserveAspectRatio=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"xMaxYMax none"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> onMouseMove={props.trackMouse} viewBox={viewBox} &gt; &lt;defs&gt; &lt;filter id=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"shadow"</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;feDropShadow dx=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"1"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dy=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"1"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> stdDeviation=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"2"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt; &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">filter&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/defs&gt; &lt;Sky /</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;Ground </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt; &lt;CannonPipe rotation={props.angle} /</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;CannonBase </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt; &lt;CurrentScore score={15} /</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; { ! props.gameState.started &amp;&amp; &lt;g&gt; &lt;StartGame onClick={(</span></span></span><span class="hljs-function">) =&gt;</span></span> props.startGame()} /&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Title</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">g</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> } { props.gameState.started &amp;&amp; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">g</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">FlyingObject</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">position</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{x:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">-150</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">y:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">-300</span></span></span></span><span class="xml"><span class="hljs-tag">}}/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">FlyingObject</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">position</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{x:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">150</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">y:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">-300</span></span></span></span><span class="xml"><span class="hljs-tag">}}/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">g</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ); }; Canvas.propTypes = { angle: PropTypes.number.isRequired, gameState: PropTypes.shape({ started: PropTypes.bool.isRequired, kills: PropTypes.number.isRequired, lives: PropTypes.number.isRequired, }).isRequired, trackMouse: PropTypes.func.isRequired, startGame: PropTypes.func.isRequired, }; export default Canvas;</span></span></code> </pre> <br><p>  As you can see, the new version is organized in such a way that the <code>StartGame</code> and <code>Title</code> components appear only when the <code>gameState.started</code> property is <code>gameState.started</code> to <code>false</code> .  You also hid flying objects ( <code>FlyingObject</code> ) until the user clicks the <code>Start Game</code> button. </p><br><p>      ( <code>npm start</code>  ,   []     ),    .  ,     ,       . </p><br><h2 id="proizvolno-zapuskaem-letayuschie-tarelki">     </h2><br><p>    () <em>Start game</em>    ,          .        ,     (  ).    ,    - . </p><br><p>    ,    .     ,         .     ,   .   <code>./src/utils/constants.js</code>  : </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ...   skyAndGroundWidth gameWidth export const createInterval = 1000; export const maxFlyingObjects = 4; export const flyingObjectsStarterYAxis = -1000; export const flyingObjectsStarterPositions = [ -300, -150, 150, 300, ];</span></span></code> </pre> <br><p>    ,         (1000 )       .   ,      <code>-1000</code>   Y ( <code>flyingObjectsStarterYAxis</code> ).  ,    ( <code>flyingObjectsStarterPositions</code> )      X,    .          . </p><br><p>   ,     ,     <code>createFlyingObjects.js</code>   <code>./src/reducers</code>  : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { createInterval, flyingObjectsStarterYAxis, maxFlyingObjects, flyingObjectsStarterPositions } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../utils/constants'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> (state) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ! state.gameState.started) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state; <span class="hljs-comment"><span class="hljs-comment">//    const now = (new Date()).getTime(); const { lastObjectCreatedAt, flyingObjects } = state.gameState; const createNewObject = ( now - (lastObjectCreatedAt).getTime() &gt; createInterval &amp;&amp; flyingObjects.length &lt; maxFlyingObjects ); if ( ! createNewObject) return state; //         const id = (new Date()).getTime(); const predefinedPosition = Math.floor(Math.random() * maxFlyingObjects); const flyingObjectPosition = flyingObjectsStarterPositions[predefinedPosition]; const newFlyingObject = { position: { x: flyingObjectPosition, y: flyingObjectsStarterYAxis, }, createdAt: (new Date()).getTime(), id, }; return { ...state, gameState: { ...state.gameState, flyingObjects: [ ...state.gameState.flyingObjects, newFlyingObject ], lastObjectCreatedAt: new Date(), } } }</span></span></code> </pre> <br><p>       .      .    : </p><br><ol><li>     (.. <code>! state.gameState.started</code> ),       . </li><li>   ,    <code>createInterval</code>  <code>maxFlyingObjects</code> ,  ,        .        <code>createNewObject</code> . </li><li>   <code>createNewObject</code>   <code>true</code> ,    <code>Math.floor</code>      0  3 ( <code>Math.random() * maxFlyingObjects</code> ),  ,    . </li><li>   ,        <code>newFlyingObject</code>   . </li><li>        ( <em>state</em> )        <code>lastObjectCreatedAt</code> . </li></ol><br><p>    , ,    ,  .  ,        ( <code>action</code> ),  .      <code>MOVE_OBJECTS</code>  10 ,        .      <code>moveObjects</code> ( <code>./src/reducers/moveObjects.js</code> )  : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { calculateAngle } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../utils/formulas'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> createFlyingObjects <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./createFlyingObjects'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">moveObjects</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mousePosition = action.mousePosition || { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> newState = createFlyingObjects(state); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { x, y } = mousePosition; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> angle = calculateAngle(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, x, y); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...newState, angle, }; } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> moveObjects;</code> </pre> <br><p>       <code>moveObjects</code> : </p><br><ul><li> -,    <code>mousePosition</code> ,       <code>action</code> .  ,      ,  <code>mousePosition</code>   . </li><li> -,    <code>newState</code>    <code>createFlyingObjects</code> ;       . </li><li> ,        <code>newState</code> ,    . </li></ul><br><p>    <code>App</code>  <code>Canvas</code>    ,     ,     <code>./src/reducers/index.js</code>        <code>initialState</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ...  ... const initialGameState = { // ...    ... flyingObjects: [], lastObjectCreatedAt: new Date(), }; // ...   ...</span></span></code> </pre> <br><p>   , ,     ‚Äî   <code>flyingObjects</code>   <code>PropTypes</code>  <code>App</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ...  ... // ...   App ... App.propTypes = { // ... other propTypes definitions ... gameState: PropTypes.shape({ // ... other propTypes definitions ... flyingObjects: PropTypes.arrayOf(PropTypes.shape({ position: PropTypes.shape({ x: PropTypes.number.isRequired, y: PropTypes.number.isRequired }).isRequired, id: PropTypes.number.isRequired, })).isRequired, // ... other propTypes definitions ... }).isRequired, // ... other propTypes definitions ... }; export default App;</span></span></code> </pre> <br><p>     <code>Canvas</code> ,         .      <code>FlyingObject</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ...  ... const Canvas = (props) =&gt; { // ...   ... return ( &lt;svg ... &gt; // ...  svg   react  ... {props.gameState.flyingObjects.map(flyingObject =&gt; ( &lt;FlyingObject key={flyingObject.id} position={flyingObject.position} /&gt; ))} &lt;/svg&gt; ); }; Canvas.propTypes = { // ...   PropTypes ... gameState: PropTypes.shape({ // ...   PropTypes ... flyingObjects: PropTypes.arrayOf(PropTypes.shape({ position: PropTypes.shape({ x: PropTypes.number.isRequired, y: PropTypes.number.isRequired }).isRequired, id: PropTypes.number.isRequired, })).isRequired, }).isRequired, // ...   PropTypes ... }; export default Canvas;</span></span></code> </pre> <br><p>  Voila!          ,    . </p><br><p> <strong>:</strong>         <code>Start Game</code> ,      .   -  - ,          .          X.          . </p><br><h2 id="ispolzuem-css-animaciyu-dlya-peremescheniya-letayuschih-obektov">  CSS     . </h2><br><p>        .       JavaScript    .       ,       .      ‚Äî   CSS. <a href="https://www.smashingmagazine.com/2016/12/gpu-animation-doing-it-right/">     </a> ,        ,    . </p><br><p>  ,      ,   ,    .      ,      NPM-     CSS  React.   <a href="https://www.styled-components.com/"><code>styled-components</code></a> . </p><br><blockquote>  <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/template_strings"> </a> ( <em>     "" ‚Äî .</em> )   CSS, <code>styled-components</code>     CSS-   .         ‚Äî          ! ‚Äî <a href="https://github.com/styled-components/styled-components"><code>styled-components</code></a> . </blockquote><p>    ,   (    )   : </p><br><pre> <code class="javascript hljs">npm i styled-components</code> </pre> <br><p>       <code>FlyingObject</code> ( <code>./src/components/FlyingObject.jsx</code> )  : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PropTypes <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'prop-types'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> styled, { keyframes } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'styled-components'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FlyingObjectBase <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./FlyingObjectBase'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FlyingObjectTop <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./FlyingObjectTop'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { gameHeight } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../utils/constants'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> moveVertically = keyframes<span class="hljs-string"><span class="hljs-string">` 0% { transform: translateY(0); } 100% { transform: translateY(</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${gameHeight}</span></span></span><span class="hljs-string">px); } `</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Move = styled.g<span class="hljs-string"><span class="hljs-string">` animation: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${moveVertically}</span></span></span><span class="hljs-string"> 4s linear; `</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> FlyingObject = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function"> =&gt;</span></span> ( &lt;Move&gt; &lt;FlyingObjectBase position={props.position} /&gt; &lt;FlyingObjectTop position={props.position} /&gt; &lt;/Move&gt; ); FlyingObject.propTypes = { position: PropTypes.shape({ x: PropTypes.number.isRequired, y: PropTypes.number.isRequired }).isRequired, }; export default FlyingObject;</code> </pre> <br><p>       <code>FlyingObjectBase</code>  <code>FlyingObjectTop</code>      <code>Move</code> .    - <code>g</code>  SVG, <br>      css ,   <code>moveVertically</code> .  ,        ,    <code>styled-components</code> ,    <a href="https://www.styled-components.com/docs/"> </a>  <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Animations/Using_CSS_animations"> " CSS "   MDN</a> . </p><br><p>   ,    /     ,   ( CSS)  ,      ( <code>transform: translateY(0);</code> )       ( <code>transform: translateY(${gameHeight}px);</code> ). </p><br><p> ,    <code>gameHeight</code>   <code>./src/utils/constants.js</code> . ,      ,    <code>flyingObjectsStarterYAxis</code> ,      ,   .          ,      . </p><br><p>    ,   <code>constants.js</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//       ... export const flyingObjectsStarterYAxis = -1100; //    flyingObjectsStarterPositions ... export const gameHeight = 1200;</span></span></code> </pre> <br><p> ,       4 ,        .   ,     <code>./src/reducers/moveObjects.js</code>  : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { calculateAngle } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../utils/formulas'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> createFlyingObjects <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./createFlyingObjects'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">moveObjects</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mousePosition = action.mousePosition || { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> newState = createFlyingObjects(state); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> now = (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>()).getTime(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> flyingObjects = newState.gameState.flyingObjects.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">object</span></span></span><span class="hljs-function"> =&gt;</span></span> ( (now - object.createdAt) &lt; <span class="hljs-number"><span class="hljs-number">4000</span></span> )); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { x, y } = mousePosition; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> angle = calculateAngle(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, x, y); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...newState, <span class="hljs-attr"><span class="hljs-attr">gameState</span></span>: { ...newState.gameState, flyingObjects, }, angle, }; } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> moveObjects;</code> </pre> <br><p>  ,     <code>flyingObjects</code> ( <code>gameState</code> ) ,   ,      4000  (4 ). </p><br><p>        <code>Start Game</code> ,    ,     SVG .   ,   ,       ,  . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/896/2ac/1d9/8962ac1d977c6e09a5b8018dd53503f6.png" alt="image"></p><br><h2 id="zaklyuchenie-i-chto-budet-dalshe">      </h2><br><p>         ,    .             CSS    . </p><br><p>            .   :    ,   ""  "" (kills).    <a href="https://auth0.com/"><code>auth0</code></a>  <a href="https://socket.io/"><code>Socket.IO</code></a>       .  ! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/350278/">https://habr.com/ru/post/350278/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../350268/index.html">Cybersecurity for drivers: how to avoid cyber attacks on connected cars?</a></li>
<li><a href="../350270/index.html">InfiniBox F2230 Review</a></li>
<li><a href="../350272/index.html">FastTrack Training. "Network Basics". "Switches from Cisco". Eddie Martin December 2012</a></li>
<li><a href="../350274/index.html">Developing a game on SVG + React. Part 1</a></li>
<li><a href="../350276/index.html">Splunk + Excel. What happens?</a></li>
<li><a href="../350280/index.html">Existention of the railway in the auto parts market</a></li>
<li><a href="../350282/index.html">Micro course on programming SCADAPack controllers in C</a></li>
<li><a href="../350286/index.html">Mathematical package for Android ‚ÄúMicro-Mathematics‚Äù: what's new?</a></li>
<li><a href="../350288/index.html">Basics of information security of a virtual server. Part 4: Standards and Specifications</a></li>
<li><a href="../350290/index.html">The creator of Vue.js is responsible Habra</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
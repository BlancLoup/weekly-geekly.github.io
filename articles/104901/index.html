<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using the Tanimoto coefficient to find people with the same preferences</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Solving the exercises for the book ‚ÄúWe Program Collective Intelligence‚Äù, I decided to share the implementation of one of the algorithms mentioned in t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using the Tanimoto coefficient to find people with the same preferences</h1><div class="post__text post__text-html js-mediator-article">  Solving the exercises for the book ‚ÄúWe Program Collective Intelligence‚Äù, I decided to share the implementation of one of the algorithms mentioned in this book (Chapter 2 - Exercise 1). <br><br>  The initial conditions are as follows: suppose we have a dictionary with critique ratings: <br><br><blockquote>  critics = <font>{</font> <font color="#483d8b">'Lisa Rose'</font> : <font>{</font> <font color="#483d8b">'Superman Returns'</font> : <font color="#ff4500">3.5</font> , <font color="#483d8b">'You, Me and Dupree'</font> : <font color="#ff4500">2.5</font> , <font color="#483d8b">'The Night Listener'</font> : <font color="#ff4500">3.0</font> <font>}</font> , <font color="#483d8b"><br></font>  <font color="#483d8b">'Gene Seymour'</font> : <font>{</font> <font color="#483d8b">'Superman Returns'</font> : <font color="#ff4500">5.0</font> , <font color="#483d8b">'The Night Listener'</font> : <font color="#ff4500">3.5</font> , <font color="#483d8b">'You, Me and Dupree'</font> : <font color="#ff4500">3.5</font> <font>}</font> <font>}</font> </blockquote><br>  The higher the score, the more like the movie. <br>  It is necessary to calculate: how much are the interests of critics similar, for example, so that on the basis of one's ratings one can recommend films to another? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  Tanimoto coefficient - describes the degree of similarity of two sets.  On the Internet, I found several variants of the formula for calculating it.  And I decided to dwell on the following: <br><img src="https://habrastorage.org/getpro/habr/post_images/2e3/653/43f/2e365343f5763db55e42df516e47f24a.gif"><br>  , where k is the Tanimoto coefficient (a number from 0 to 1), the closer it is to 1, the more similar the sets; <br>  a is the number of elements in the first set; <br>  b is the number of elements in the second set; <br>  c is the number of common elements in two sets; <br>  Now we need to compare the estimates of two critics. <br>  Just want to clarify one point.  What should be considered a common element in our two sets?  It is clear that the presentation of the assessment in the current form will not allow to accurately determine people with similar interests.  After all, in essence, the same estimates of 3.5 and 4.0 for this algorithm are completely different numbers.  Therefore, in my opinion, the Tanimoto coefficient should be used if the number of rating options is no more than 2-3 (for example, ‚ÄúI liked, did not like‚Äù or ‚ÄúI recommend, I didn‚Äôt watch, I do not recommend‚Äù) applied the following conversion to the estimates: If the score is less than 3, then the film did not like (the score becomes - 0), otherwise - the like (score becomes - 1).  Data in this form is more suitable for our experiment. <br><blockquote>  <font color="#ff7700">def</font> prepare_for_tanimoto <font>(</font> critics_arr <font>)</font> : <br>  arr = critics_arr.  <font color="#dc143c">copy</font> <font>(</font> <font>)</font> <br>  <font color="#ff7700">for</font> critic <font color="#ff7700">in</font> arr: <br>  <font color="#ff7700">for</font> film <font color="#ff7700">in</font> arr <font>[</font> critic <font>]</font> : <br>  <font color="#ff7700">if</font> arr <font>[</font> critic <font>]</font> <font>[</font> film <font>]</font> <font color="#66cc66">&lt;</font> <font color="#ff4500">3</font> : <br>  arr <font>[</font> critic <font>]</font> <font>[</font> film <font>]</font> = <font color="#ff4500">0</font> <br>  <font color="#ff7700">else</font> : <br>  arr <font>[</font> critic <font>]</font> <font>[</font> film <font>]</font> = <font color="#ff4500">1</font> <br>  <font color="#ff7700">return</font> arr </blockquote><br>  At the output we get the following dictionary: <br><br><blockquote>  critics = <font>{</font> <font color="#483d8b">'Lisa Rose'</font> : <font>{</font> <font color="#483d8b">'Superman Returns'</font> : <font color="#ff4500">1</font> , <font color="#483d8b">'You, Me and Dupree'</font> : <font color="#ff4500">0</font> , <font color="#483d8b">'The Night Listener'</font> : <font color="#ff4500">1</font> <font>}</font> , <font color="#483d8b"><br></font>  <font color="#483d8b">'Gene Seymour'</font> : <font>{</font> <font color="#483d8b">'Superman Returns'</font> : <font color="#ff4500">1</font> , <font color="#483d8b">'The Night Listener'</font> : <font color="#ff4500">1</font> , <font color="#483d8b">'You, Me and Dupree'</font> : <font color="#ff4500">1</font> <font>}</font> <font>}</font> </blockquote><br>  And then we write a function that calculates the coefficient of similarity of the estimates of the two critics. <br><br><blockquote>  <font color="#ff7700">def</font> tanimoto <font>(</font> critics_arr, critic1, critic2 <font>)</font> : <br>  arr = prepare_for_tanimoto <font>(</font> critics_arr <font>)</font> <br><br>  a = <font color="#008000">len</font> <font>(</font> arr <font>[</font> critic1 <font>]</font> <font>)</font> <br>  b = <font color="#008000">len</font> <font>(</font> arr <font>[</font> critic2 <font>]</font> <font>)</font> <br>  c = <font color="#ff4500">0.0</font> <br><br>  <font color="#ff7700">for</font> film <font color="#ff7700">in</font> arr <font>[</font> critic1 <font>]</font> : <br>  <font color="#ff7700">if</font> arr <font>[</font> critic1 <font>]</font> <font>[</font> film <font>]</font> == arr <font>[</font> critic2 <font>]</font> <font>[</font> film <font>]</font> : <br>  c = c + <font color="#ff4500">1</font> <br><br>  koef = c / <font>(</font> a + b - c <font>)</font> <br>  <font color="#ff7700">return</font> koef </blockquote><br><br>  Check the performance of the tanimoto function. <br><br>  <font>&gt;&gt;&gt; print tanimoto (critics, 'Gene Seymour', 'Lisa Rose')</font> <br>  <font>&gt;&gt;&gt; 0.5</font> <br><br>  In my opinion, the result is correct.  It should be noted that with an increase in the number of assessments for each critic, the accuracy of calculating the similarity coefficient will increase. <br><br>  If we had a database of estimates, it would be possible to calculate the coefficients of the similarity of interests of people and begin to make recommendations using the Tanimoto method. <br><br>  Download the sample text <a href="http://dumpz.org/22412/">here</a> . <br>  Download the full text of all examples from the book <a href="">on the author's website</a> .  You can also find a more complete array with critics. </div><p>Source: <a href="https://habr.com/ru/post/104901/">https://habr.com/ru/post/104901/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../104895/index.html">Siberian StuDday. Photo report</a></li>
<li><a href="../104896/index.html">One example of spent fraud</a></li>
<li><a href="../104897/index.html">50% of mobile Internet traffic is generated by native smartphone apps</a></li>
<li><a href="../104898/index.html">Monument of Linux being created in Tyumen</a></li>
<li><a href="../104900/index.html">music.ivi.ru - music videos, tasty and juicy!</a></li>
<li><a href="../104904/index.html">Concept phone of the future from Mozilla Labs</a></li>
<li><a href="../104906/index.html">Sailed: amendments to Art. 1273 of the Civil Code adopted in the third reading</a></li>
<li><a href="../104908/index.html">Winners of Microsoft Expression Contest</a></li>
<li><a href="../104909/index.html">When to wait for the 3,000,000th domain in the .RU zone?</a></li>
<li><a href="../104910/index.html">Would you like to edit your comment?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
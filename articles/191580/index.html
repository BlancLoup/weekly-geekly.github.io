<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Core Data for iOS. Chapter number 2. Theoretical part</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, good day! 
 Today I want to start writing a series of lectures with practical tasks on the book ‚ÄúPro Core Data for iOS‚Äù by Michael Privat an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Core Data for iOS. Chapter number 2. Theoretical part</h1><div class="post__text post__text-html js-mediator-article">  Good day, good day! <br>  Today I want to start writing a series of lectures with practical tasks on the book ‚ÄúPro Core Data for iOS‚Äù by Michael Privat and Robert Warner, which you can buy from <a href="http://www.apress.com/9781430236566">this</a> link.  Each chapter will contain a theoretical and practical part. <br><br><img src="https://habrastorage.org/storage3/f39/8f2/7fe/f398f27fe69976e2305f4055fc97c9b2.png"><br><br>  Content: <br><ul><li>  <a href="http://habrahabr.ru/post/191334/">Chapter number 1.</a>  <a href="http://habrahabr.ru/post/191334/">Getting Started</a> ( <a href="http://habrahabr.ru/post/191472/">Practical Part</a> ) </li><li>  <a href="http://habrahabr.ru/post/191580/">Chapter number 2.</a>  <a href="http://habrahabr.ru/post/191580/">Digest Core Data</a> </li><li>  Chapter number 3.  Data storage: SQLite and other options </li><li>  Chapter 4  Creating a data model </li><li>  Chapter number 5.  We work with data objects </li><li>  Chapter number 6.  Processing Result Sets </li><li>  Chapter number 7.  Performance tuning and memory usage </li><li>  Chapter number 8.  Version Control and Migration </li><li>  Chapter number 9.  Managing tables using NSFetchedResultsController </li><li>  Chapter number 10.  Using Core Data in Advanced Applications </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><h4>  Introduction </h4><br>  Many developers, after the first acquaintance with Core Data, consider it to be some kind of confusing set of classes, which, instead of simplifying work with data, on the contrary, prevents this.  Perhaps this is Rails developers who are used to writing <a href="http://beta.yandex.ru/yandsearch%3Flr%3D192%26text%3Ddynamic%2Bfinders">dynamic search methods</a> and allowing accepted agreements to do all the dirty work for them.  Perhaps this is a Java developer who annotates Enterprise JavaBeans (EJB) and <a href="http://ru.wikipedia.org/wiki/Hibernate_(%25D0%25B1%25D0%25B8%25D0%25B1%25D0%25BB%25D0%25B8%25D0%25BE%25D1%2582%25D0%25B5%25D0%25BA%25D0%25B0)">works</a> with Plain Old Java Objects (POJO).  No matter who these people are, whatever they do, they don‚Äôt perceive the Core Data Framework as it is and its methods of working with data, as many developers see how they create <a href="https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingViews/CreatingViews.html">‚Äúlive‚Äù interfaces</a> using Interface Builder and make fun of them .  We assure you that Core Data is not another Ruben Goldberg machine.  Classes in the Core Data Framework are rather the players of the 1980s Boston Celtics and, when you understand their approaches to the game, only then can you appreciate the beauty and completeness of their game and interaction. <br><br>  <b>Did you know?</b> <br><blockquote><table><tbody><tr><td>  <b>Ruben Lucius Goldberg</b> (born Reuben Lucius Goldberg; 1883‚Äì1970) is an American cartoonist, sculptor, writer, engineer and inventor. <br>  Goldberg is best known for a series of caricatures featuring the so-called ‚ÄúRuba Goldberg Machine‚Äù - an extremely complex, cumbersome and intricate device that performs very simple functions (for example, a huge machine that occupies an entire room, the purpose of which is to move a spoonful of food from a plate to human mouth). <br>  In 1948, Goldberg received the Pulitzer Prize for his political cartoons, and in 1959 the Banshees' Silver Lady Award. <br>  Goldberg was one of the founders and the first president of the National Society of Caricature.  His name is the Ruben Prize, which the organization rewards as a cartoonist of the year.  In the United States annually held a competition cars Ruba Goldberg. </td></tr></tbody></table><br><img src="https://habrastorage.org/getpro/habr/post_images/fbb/c53/89f/fbbc5389f5b3f0627721dfbd7c7eb786.gif" alt="image"><br></blockquote><br><br>  In this chapter, the purposes of the Core Data Framework classes will be described, both individually and when they work together.  Try not to rush to read the entire chapter.  Examine the examples, rummage through them, enter the code yourself ( <b>no copy-paste</b> !) And run for verification. <br><br><h5>  Core Data Classes </h5><br>  In the first chapter, we have already reviewed and created the simplest application using Core Data.  You saw code snippets, which classes were used, which methods were called, in what order the methods were called by these methods, and which parameters were passed to these methods.  All this was done in order to understand how Core Data works.  You blindly followed what you were told to do, maybe at some points you wondered why this was done, but you continued to tap sweet <code>NSManagedObject</code> on the keyboard, maybe you asked yourself the question ‚ÄúWhat happens if you substitute another value here?‚Äù.  Some may even have tried to replace one value with another, it was they who got something different from the explosion;), and someone got what they expected to receive. <br><br>  Edward Dijkstra, a well-known computer researcher and winner of the 1972 Turing Award for his work in the development of programming languages, spoke of elegance as the quality that determines victory or defeat, and not as optional luxury. <br><br>  <b>Did you know?</b> <br><blockquote>  <b>The Turing Award</b> (English Turing Award) - the most prestigious award in computer science, awarded by the Association of computing technology for outstanding scientific and technical contributions in this field. <br><br>  The award was established by the Computer Engineering Association in honor of the outstanding English scientist Alan Turing, who received the first profound results regarding computability long before the appearance of the first electronic computers. <br>  The prize is awarded annually to one or more specialists in the field of computer science and computing, whose contribution in this area has had a strong and lasting impact on the computer community.  The prize may be awarded to one person not more than once.  In the field of information technology, the Turing Prize has a status similar to the Nobel Prize in academic sciences.  For the first time the Turing Award was awarded in 1966 to Alan Perlis for the development of technology for creating compilers. <br><br>  The prize is currently sponsored by Intel and Google and amounts to $ 250,000. <br><br>  (c) Wikipedia <br></blockquote><br><br>  Core Data not only does the task of storing data, but it does it elegantly.  To achieve this elegance in your code, you need to understand Core Data, and not guessing in the coffee grounds <i>how</i> it works and <i>why</i> it works at all.  After reading this chapter, you will understand in detail not only the structure of the Core Data Framework itself, but also how the framework solves complex problems using a small set of classes, making solutions simple, understandable and elegant.  Throughout the chapter, we will build and complement the Core Data Framework class diagram.  The fact that not all classes will belong to Core Data Framework will not slip away from you, some will be imported from the Foundation Framework.  In parallel with the theoretical part, we will develop a small application that will work with fictitious organizational structures (managers, programmers, managers, administrators, etc.). <br><br>  Open Xcode and create a Single View Application: <br><img src="https://habrastorage.org/getpro/habr/post_images/a8f/8be/147/a8f8be147f1ab4759d013cc3af599aa8.png" alt="image"><br><br>  Name the project <b>OrgChart</b> . <br>  Connect to the Core Data project ( <a href="http://habrahabr.ru/post/191334/">see Chapter 1</a> ).  Run the application and make sure that it does not crash. <br><img src="https://habrastorage.org/getpro/habr/post_images/a5a/f08/46e/a5af0846ef7889492bf393b340ad6a8a.png" alt="image"><br><br>  The image below shows the Core Data classes we usually work with: <br><img src="https://habrastorage.org/getpro/habr/post_images/55e/8d3/24d/55e8d324d74851ec1f3dec8bb9b3af22.png" alt="image"><br><br>  In our code, data is saved by adding new <code>NSManagedObject</code> to the <code>NSManagedObjectContext</code> , and data is obtained using the <code>NSFetchRequest</code> class.  As shown in Chapter 1, the managed object context is created and initialized using the data warehouse manager (persistent store coordinator) implemented by the <code>NSPersistentStoreCoordinator</code> class, which in turn is determined by the data model implemented by the <code>NSManagedObjectModel</code> class.  The rest of this chapter will be devoted to examining how these classes are created, how they interact with each other, and how to use them. <br><br><h5>  The classes used to create the model </h5><br>  As previously mentioned in Chapter 1, all applications using Core Data must have an object model of stored data.  The model defines the entities and their properties.  An entity has three types of properties: <br><ul><li>  Attributes </li><li>  Relations </li><li>  Selection properties </li></ul><br><br>  The table you see below shows the various classes and a description of their role. <br>  Going through classes for a better understanding of the model initialization mechanism is quite an interesting exercise, but in practice creating a model in XCode requires you to be able to work with the mouse in the graphical editor of models without writing a single line of code. <br><table><tbody><tr><td align="center">  <b>Class name</b> </td><td align="center">  <b>Role</b> </td></tr><tr><td align="center">  NSManagedObjectModel </td><td align="center">  Data model </td></tr><tr><td align="center">  NSEntityDescription </td><td align="center">  Entity in the data model </td></tr><tr><td align="center">  NSPropertyDescription </td><td align="center">  Abstract description of an entity property </td></tr><tr><td align="center">  NSAttributeDescription </td><td align="center">  Entity attribute </td></tr><tr><td align="center">  NSRelationshipDescription </td><td align="center">  Link of one entity to another </td></tr><tr><td align="center">  NSFetchedPropertyDescription </td><td align="center">  Description of a subset of entity instances selected by a specific criterion </td></tr></tbody></table><br><br>  The table below shows the relationships between the classes used in defining the model.  <code>NSManagedObjectContext</code> does not reference, or refers to several entity objects <code>NSEntityDescription</code> .  Each <code>NSEntityDescription</code> not referenced, or it refers to several <code>NSPropertyDescription</code> objects.  <code>NSPropertyDescription</code> is an abstract class with three concrete implementations: <br><ul><li>  NSAttributeDescription </li><li>  NSRelationshipDescription </li><li>  NSFetchedPropertyDescription </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/0a6/804/1e8/0a68041e836caf2c78c3123a002dff6d.png" alt="image"><br><br>  This small number of classes will be enough to describe any data model that you will develop using Core Data Framework.  As described earlier in Chapter 1, to create a model, you need to open Xcode, select the menu item File -&gt; New -&gt; New File and specify "Data Model".  In this section, we will create a model that will be the organizational structure of the company. <br>  Create a new model in Xcode and name it <b>OrgChart</b> .  The organization has a director (CEO) in this data model.  For simplicity, let's imagine that a person has two attributes: a unique employee identifier and a name.  Now we are ready to begin defining the data model. <br>  Open the data model and create a new <b>Organization</b> entity.  Like a person, an organization is defined by its unique identifier and name.  Add two attributes to the <b>Organization</b> entity.  Attributes are constant properties of an entity that may contain values ‚Äã‚Äãof some type.  Attribute data types are described in the <code>NSAttributeType</code> class and each data type imposes some constraints on the entity.  For example, if you try to write a string to a property with an integer data type, an error will occur. <br>  The table below describes the existing types: <br><table><tbody><tr><td align="center">  <b>Attribute type in Xcode</b> </td><td align="center">  <b>Attribute Type in Objective-C</b> </td><td align="center">  <b>Objective c</b> </td><td align="center">  <b>Description</b> </td></tr><tr><td align="center">  Integer 16 </td><td align="center">  NSInteger16AttributeType </td><td align="center">  NSNumber </td><td align="center">  16-bit integer </td></tr><tr><td align="center">  Integer 32 </td><td align="center">  NSInteger32AttributeType </td><td align="center">  NSNumber </td><td align="center">  32-bit integer </td></tr><tr><td align="center">  Integer 64 </td><td align="center">  NSInteger64AttributeType </td><td align="center">  NSNumber </td><td align="center">  64-bit integer </td></tr><tr><td align="center">  Decimal </td><td align="center">  NSDecimalAttributeType </td><td align="center">  NSDecimalNumber </td><td align="center">  Base 10 integer value </td></tr><tr><td align="center">  Double </td><td align="center">  NSDoubleAttributeType </td><td align="center">  NSNumber </td><td align="center">  Double object wrapper </td></tr><tr><td align="center">  Float </td><td align="center">  NSFloatAttributeType </td><td align="center">  NSNumber </td><td align="center">  Float object wrapper </td></tr><tr><td align="center">  String </td><td align="center">  NSStringAttributeType </td><td align="center">  Nsstring </td><td align="center">  Character string </td></tr><tr><td align="center">  Boolean </td><td align="center">  NSBooleanAttributeType </td><td align="center">  Bool </td><td align="center">  Boolean object wrapper </td></tr><tr><td align="center">  Date </td><td align="center">  NSDateAttributeType </td><td align="center">  NSDate </td><td align="center">  date and time </td></tr><tr><td align="center">  Binary data </td><td align="center">  NSBinaryDataAttributeType </td><td align="center">  NSData </td><td align="center">  Binary data </td></tr><tr><td align="center">  Transformable </td><td align="center">  NSTransformableAttributeType </td><td align="center">  Any non-standard type </td><td align="center">  Any type that can be converted to standard </td></tr></tbody></table><br><br>  <b>Note</b> <br><blockquote>  In Chapter 5, we will analyze the type of Transformable in more detail.  Transformable attributes are a way to notify Core Data that they will use non-standard data types and, in the process of saving data to the local storage, we will tell you how to convert this type to one of the existing embedded ones. <br></blockquote><br><br>  Let's call the first attribute <i>id</i> , and the second <i>name</i> .  By default, when creating a new attribute, its type is automatically set to <i>Undefined</i> and will not allow the project to be compiled.  Your task is to choose the appropriate type for each of the entity attributes you create.  Organization identifiers will always be of integer type, so we will select <i>Integer 16</i> as the type for the <i>id</i> attribute.  Type <i>String is</i> used for the <i>name</i> attribute. <br>  At this stage, your project should look like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/7ab/c1a/57a/7abc1a57a0dd3f79072ca5321e5cdfdb.png" alt="image"><br><br>  If at this stage the program would be running, the object graph would look like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/3fd/e9f/04e/3fde9f04efea82e719ade1fcef4bef3c.png" alt="image"><br><br>  The graph shows that the <code>NSManagedObjectModel</code> data model refers to an entity object <code>NSEntityDescription</code> , which is called <b>Organization</b> and uses the <code>NSManagedObject</code> type for the property " <code>managedObjectClassName</code> .  An entity has two attributes.  Each attribute contains two properties: name and type.  In the first attribute, the name <code>id</code> and type <code>NSInteger16AttributeType</code> for the properties <code>name</code> and <code>attributeType</code> respectively. <br><br>  In the same way, create a second entity named <b>Person</b> with two attributes: <i>id</i> and <i>name</i> .  Now we can create a connection between the <b>Organization</b> and <b>Person</b> entities and name its <i>leader</i> .  Creating a relationship is quite simple: click on the "+" button in the "Relationships" section, select "Destination" and "Source".  Now add another connection between <b>Person</b> and <b>Person</b> and call it <i>employees</i> .  The last connection we have created is a one-to-one relationship, while an employee may have several subordinates, which means that the type of communication is necessary one-to-many. <br>  Open the panel on the right in Xcode, as shown: <br><img src="https://habrastorage.org/getpro/habr/post_images/c48/f97/d72/c48f97d72353ffea4ecca8b569dd9cfe.png" alt="image"><br><br>  And tick the box ‚ÄúPlural: To-Many Relationship‚Äù: <br><img src="https://habrastorage.org/getpro/habr/post_images/b75/6e6/03c/b756e603c1748f33bee2189ed2efb1f3.png" alt="image"><br><br>  The data model looks like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/5da/e13/c0a/5dae13c0a019edf95da6355e4d555c6f.png" alt="image"><br><br>  Here is what the object graph will look like when the model is loaded: <br><img src="https://habrastorage.org/getpro/habr/post_images/390/3cb/d56/3903cbd56868d9085bf0e6b4723d7947.png" alt="image"><br>  This graph is not a graph of objects that Core Data stores, it is just a display of how the model looks in the eyes of Core Data. <br>  A typical way to load a Core Data data model is as follows: <br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *modelURL = [[<span class="hljs-built_in"><span class="hljs-built_in">NSBundle</span></span> mainBundle] URLForResource:<span class="hljs-string"><span class="hljs-string">@"OrgChart"</span></span> withExtension:<span class="hljs-string"><span class="hljs-string">@"momd"</span></span>]; _managedObjectModel = [[<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectModel</span></span> alloc] initWithContentsOfURL:modelURL];</code> </pre><br><br>  Knowing how model objects are represented in Core Data is not very useful, unless you are writing your own data warehouse or are interested in generating a data model programmatically at runtime.  An analogy can be drawn with the creation of a UIView programmatically, instead of using ready-made elements provided by Interface Builder.  However, a deep understanding of how Core Data works will allow you to predict and avoid difficulties, problems, and lead to the solution of difficulties in a creative and elegant way. <br><br>  We familiarized with how entities are represented in Core Data and which auxiliary classes are present in it, but you don‚Äôt have to get into the wilds every time you want to use Core Data in your project, rarely when you have to use the previously listed classes directly.  All the classes we discussed above are related to the description of the data model.  The remainder of this chapter will be devoted to data classes and properties that we will use to access this data. <br><br><h5>  Data Access Classes </h5><br>  In Chapter 1, we found that the initialization of Core Data begins with loading the data model into an <code>NSManagedObjectModel</code> object.  In the previous section, we looked at how NSManagedObjectModel represents the internal structure of the data model using <code>NSPropertyDescription</code> and <code>NSEntityDescription</code> .  The next step in the Core Data initialization process is to create and bind the data store using the <code>NSPersistentStoreCoordinator</code> .  Finally, the final step in the initialization process is the creation of an <code>NSManagedObjectContext</code> object with which the interaction takes place directly (reading and writing data). <br>  In order to clarify everything that was said above, I will give a class diagram: <br><img src="https://habrastorage.org/getpro/habr/post_images/032/5ea/88a/0325ea88a7fb56c07af671db06b58ac4.png" alt="image"><br><br>  As you can see on the graph there is also <code>NSManagedObjectModel</code> , which is loaded and then passed to <code>NSPersistentStoreCoordinator</code> to work with data warehouses (yes, there may be several of them) and determine how this data should be processed.  The data storage manager (persistent store coordinator) acts as the conductor of the orchestra itself, which coordinates the work of all <code>NSManagedObjectContext</code> with the data storage.  Among other things, the data warehouse manager is responsible for migrating data from one storage to another, achieved by using the <code>migratePersistentStore:</code> method. <br><br>  <code>NSPersistentStoreCoordinator</code> initialized with <code>NSManagedObjectModel</code> .  After our dispatcher has been created, you can upload and register data stores.  The code below shows how to initialize the data warehouse manager.  Initialization occurs by calling the <code>initWithManagedObjectModel:</code> and passing the data model, and then registering the new repository with the <code>addPersistentStoreWithType:</code> method. <br><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *storeURL = [[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> applicationDocumentsDirectory] URLByAppendingPathComponent:<span class="hljs-string"><span class="hljs-string">@"OrgChart.sqlite"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span> *error = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; _persistentStoreCoordinator = [[<span class="hljs-built_in"><span class="hljs-built_in">NSPersistentStoreCoordinator</span></span> alloc] initWithManagedObjectModel:[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> managedObjectModel]]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(![_persistentStoreCoordinator addPersistentStoreWithType:<span class="hljs-built_in"><span class="hljs-built_in">NSSQLiteStoreType</span></span> configuration:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> URL:storeURL options:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> error:&amp;error]){ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Unresolved error %@, %@"</span></span>, error, [error userInfo]); abort(); }</code> </pre><br><br>  iOS provides three types of storage: <br><table><tbody><tr><td>  Storage Type </td><td>  Description </td></tr><tr><td>  NSSQLiteStoreType </td><td>  SQLite database </td></tr><tr><td>  NSBinaryStoreType </td><td>  Binary file </td></tr><tr><td>  NSInMemotyStoreType </td><td>  Data storage in the temporary memory of the device </td></tr></tbody></table><br><br>  <b>Note</b> <br><blockquote>  Core Data on Mac OS X also offers a fourth storage type ( <code>NSXMLStoreType</code> ), which uses an XML file to store data. <br></blockquote><br><br>  A typical course would be the use of <code>NSSQLiteStoreType</code> , the use of which indicates that the data will be stored in a SQLite database.  But it is worth all the same to be familiar with other types of storage.  No matter how useless the <code>NSInMemoryStoreType</code> type <code>NSInMemoryStoreType</code> , the typical use of this type of storage is to cache the information received from the remote server and create a local copy of the data in order to reduce the network load and reduce the number of driven traffic along with delays. <br>  After the <code>NSTersistentStoreCoodrinator</code> initialized, we can proceed to the creation and initialization of <code>NSManagedObjectContext</code> . <br>  The object management environment is responsible for what <i>is</i> requested from the repository and <i>what is</i> written there.  The task may seem simple, but here are some possible difficulties for you: <br><ul><li>  If two threads request the same object, they must receive a pointer to the same object instance. </li><li>  If the object is requested frequently, the task of the object management environment is to use the cached object and not to access the repository each time. </li><li>  The object management environment must in some way support changes to the repository until a data storage request is made. </li></ul><br><br>  <b>Note</b> <br><blockquote>  Apple strongly recommends that you do not inherit your classes from NSManagedObjectContext. <br></blockquote><br><br>  The table below lists the main methods for creating, retrieving, and deleting objects from <code>NSManagedObjectContext</code> .  Change (obovit) object by changing its properties. <br><table><tbody><tr><td>  Method name </td><td>  Method Description </td></tr><tr><td>  -executeFetchRequest: error: </td><td>  Performs a request for receiving objects </td></tr><tr><td align="center">  -objectWithID: </td><td align="center">  Returns an object with the specified ID. </td></tr><tr><td>  -insertObject: </td><td>  Adds a new object to the environment. </td></tr><tr><td>  -deleteObject: </td><td>  Removes an object from the environment. </td></tr></tbody></table><br><br>  It should be careful when deleting objects and the possible consequences of this action.  When deleting an object that is associated with others, Core Data needs to decide what to do with the child objects.  One of the properties of the relationship is called ‚ÄúDelete rule‚Äù, which can be four variants: <br><table><tbody><tr><td align="center">  Rule Name </td><td>  Effect </td></tr><tr><td>  No action </td><td>  Does nothing, allows the child to assume that the parent object exists </td></tr><tr><td>  Nullify </td><td>  For each child object sets the reference to the parent object to null. </td></tr><tr><td>  Cascade </td><td>  Deletes each child object. </td></tr><tr><td>  Deny </td><td>  Forbids to delete the parent object, it has at least one child </td></tr></tbody></table><br><br>  In addition to the fact that the object management environment synchronizes data from the repository, it also allows you to perform Undo and Redo operations, as is often done in text editors and other software. <br><table><tbody><tr><td>  <b>Method</b> </td><td>  <b>Description</b> </td></tr><tr><td>  -undoManager </td><td>  Returns an NSUndoManager that is responsible for performing undo operations. </td></tr><tr><td>  -setUndoManager </td><td>  Installs a new NSUndoManager </td></tr><tr><td>  -undo </td><td>  Send undo message to NSUndoManager </td></tr><tr><td>  -redo </td><td>  Sends redo message to NSUndoManager </td></tr><tr><td>  -reset </td><td>  Causes the environment to reset all pointers to the objects it processes. </td></tr><tr><td>  -rollback </td><td>  Sends an undo message to the NSUndoManager as long as there are changes. </td></tr><tr><td>  -save </td><td>  Saves all changes to local storage.  Consider calling this method a kind of commit in Git.  All unsaved data will be lost if the application crashes during execution. </td></tr><tr><td>  -hasChanges </td><td>  Returns YES if there are changes in the environment that were not synchronized with the repository. </td></tr></tbody></table><br><br>  In Chapter 5, we talk about undo and redo operations in Core Data. <br><br>  Instances of the <code>NSManagedObject</code> class support KVC to provide a universal way to access the data contained in an object.  The easiest way to access the data of an <code>NSManagedObject</code> instance variable is to use the <code>valueForKey:</code> method, to write (change) the same data using the <code>setValue:forKey:</code> method.  The key parameter is the name of the model entity attribute. <br><br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>)valueForKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)key; - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)setValue:(<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>)value forKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)key;</code> </pre><br><br>  The <code>NSManagedObject</code> class also provides several helper methods to help <code>NSManagedObjectContext</code> to track object changes.  When it comes time to commit to the data warehouse, the <code>NSManagedObjectContext</code> all the objects it contains and asks if their state has changed. <br>  Apple strongly discourages overriding methods that are responsible for the state of changes in order not to disrupt the entire chain of actions when saving objects. <br><br>  <b>Note</b> <br><blockquote>  Each object of type NSManagedObject contains a link to the environment (NSManagedObjectContext) to which it belongs.  This is one of the non-master options to get a link to the environment through the object that is in it. <br></blockquote><br><br>  How to create new NSManagedObject we still remember: <br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> *entity = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> entityForName:<span class="hljs-string"><span class="hljs-string">@"Organization"</span></span> inManagedObjectContext:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectContext]; <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObject</span></span> *org = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> insertEntityForName:[entity name] inManagedObjectContext:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectContext];</code> </pre><br><br>  Once we have created a new object in the environment, we can proceed to setting the values ‚Äã‚Äãof its fields: <br><pre> <code class="objectivec hljs">[org setValue:<span class="hljs-string"><span class="hljs-string">@"MyCompay, Inc."</span></span> forKey:<span class="hljs-string"><span class="hljs-string">@"name"</span></span>]; [org setValue:@<span class="hljs-number"><span class="hljs-number">77</span></span> forKey:<span class="hljs-string"><span class="hljs-string">@"id"</span></span>];</code> </pre><br><br><h5>  KVO </h5><br>  One of the interesting and convenient methods of receiving notification of a change in an object is a ‚Äúsubscription‚Äù to events of changes in a property.  <code>NSManagedObject</code> supports KVO and takes responsibility for sending notifications about changes to a specific property of an object.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KVO is not something that only from the world of Core Data, this pattern is actively used in most Cocoa frameworks. </font><font style="vertical-align: inherit;">The two main methods that apply to KVO are: </font></font><code>willChangeValueForKey:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>didChangeValueForKey:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The first method is called </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">before</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> the property changes, and the second, respectively, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">after</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> it. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Before you receive notifications, you must register our object (which will track changes) as an observer. </font><font style="vertical-align: inherit;">Here is what it might look like:</font></font><br><pre> <code class="objectivec hljs">[managedObject addObserver:observerObject forKeyPath:<span class="hljs-string"><span class="hljs-string">@"theProperty"</span></span> options:(<span class="hljs-built_in"><span class="hljs-built_in">NSKeyValueObservingOptionNew</span></span> | <span class="hljs-built_in"><span class="hljs-built_in">NSKeyValueObservingOptionOld</span></span>) context:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>];</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After the object is registered as a listener, it will receive immediate notifications about changes in the properties for which it is signed. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is an extremely convenient and useful mechanism if you want your screen data to be constantly updated.</font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Query classes </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At this stage, we are already familiar with how the Core Data stack is initialized and how to interact with the created objects ( </font></font><code>NSManagedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). In this part we will talk about how to work with requests for receiving data from the repository. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is not strange, requests for data are instances of the class </font></font><code>NSFetchRequest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. The most interesting is the fact that it </font></font><code>NSFetchRequest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is almost the only class responsible for requesting (receiving) data in Core Data, the other "auxiliary" classes belong to the Foundation Framework. </font></font><br><img src="https://habrastorage.org/storage3/a16/d24/f89/a16d24f8957b030c82a0dde268bd260b.png" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data retrieval requests consist mainly of two parts: an instance </font></font><code>NSPredicate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and an instance </font></font><code>NSSortDescriptor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><code>NSPredicate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is designed to filter data according to certain criteria, and</font></font><code>NSSortDescriptor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">responsible for sorting data in a specific order (ascending, descending). </font><font style="vertical-align: inherit;">Both of these elements are optional in the query and, if neither of them is specified, you will receive a set of all data in an arbitrary (undefined) order. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's create a simple request to get a list of all organizations without using filters and sorting:</font></font><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSFetchRequest</span></span> *fetchRequest = [[<span class="hljs-built_in"><span class="hljs-built_in">NSFetchRequest</span></span> alloc] init]; <span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> *entity = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> entityForName:<span class="hljs-string"><span class="hljs-string">@"Organization"</span></span> inManagedObjectContext:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectContext]; [fetchRequest setEntity:entity]; <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span> *organizations = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectContext executeFetchRequest:fetchRequest error:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>];</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Since we did not filter the list of organizations, we will have all the organizations found in the repository (objects of type </font></font><code>NSManagedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">in the organizations array </font><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's get only those organizations whose names contain the substring "Inc.":</font></font><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSPredicate</span></span> *predicate = [<span class="hljs-built_in"><span class="hljs-built_in">NSPredicate</span></span> predicateWithFormat:<span class="hljs-string"><span class="hljs-string">@"name contains %@"</span></span>, <span class="hljs-string"><span class="hljs-string">@"Inc."</span></span>]; [fetchRequest setPredicate:predicate];</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sort the resulting set of organizations by name in the lexicographical order: </font></font><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSSortDescriptor</span></span> *sortByName = [<span class="hljs-built_in"><span class="hljs-built_in">NSSortDescriptor</span></span> alloc] initWithKey:<span class="hljs-string"><span class="hljs-string">@"name"</span></span> ascending:<span class="hljs-literal"><span class="hljs-literal">YES</span></span>]; [fetchRequest setSortDescriptors:@[sortByName]];</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Chapter 6, we will look more closely at working with </font></font><code>NSPredicate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>NSSortDescriptor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Below is the final graph of Core Data objects: </font></font><br><img src="https://habrastorage.org/storage3/0ec/0b9/2d9/0ec0b92d95117d8596fc552dfefae06e.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will discuss </font></font><code>NSFetchedResultsController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font><font style="vertical-align: inherit;">more detail </font><font style="vertical-align: inherit;">in Chapter 9.</font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Class interaction </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At this stage, you should have a good idea of ‚Äã‚Äãthe classes that are the core of Core Data and what is happening under the hood. In this part we will continue to consider the OrgChart application, paying attention to the features of the work of certain classes. I want to note that this section (like the previous ones in this chapter) is aimed at developing your </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">basic</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> knowledge about how classes interact in Core Data. Each subsequent chapter will consider concepts (data manipulation, use of several storages of different types, increase in productivity, etc.) at a deeper level. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The data model that we built in the previous section should look like this: </font></font><br><img src="https://habrastorage.org/storage3/7a2/12b/ac8/7a212bac86206c134cf226e4b3a32984.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For each of the entities, we added the </font><i><font style="vertical-align: inherit;">id</font></i><font style="vertical-align: inherit;"> property</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(unique identifier) ‚Äã‚Äãof type </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integer 16</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Most programmers, who have probably already come to this point, have already thought about auto-incrementing and may even have tried to look for something similar in XCode. </font><font style="vertical-align: inherit;">Alas and oh! </font><font style="vertical-align: inherit;">If you are one of these programmers, you probably already gave up trying to find something like that. </font><font style="vertical-align: inherit;">And the reason why you could not find it is simple - there is simply no such thing! </font><font style="vertical-align: inherit;">Core Data manages the object graph using pointers to objects. </font><font style="vertical-align: inherit;">It makes no sense to use a unique identifier, as is usually done in relational databases like SQLite (yes, maybe Core Data somewhere uses auto-decrementing keys, but we don‚Äôt need to worry about this). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We intentionally entered a unique identifier in effect for the following reasons:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Raise the issue of auto-increment </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Consider an example of working with integer types. </font></font></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A personal identifier is something like a social insurance number. </font><font style="vertical-align: inherit;">There is no need to increment it automatically. </font><font style="vertical-align: inherit;">As for the essence </font></font><code>Organization</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, it </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will be a hash of the object, although it does not give a 100% guarantee of uniqueness, but it is suitable for this application.</font></font><br><br>  <b>Note</b> <br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a programmer, you should not focus too much on what you know about databases and try to project this knowledge into Core Data. </font><font style="vertical-align: inherit;">Core Data is not a database, it is a framework for working with an object graph stored locally.</font></font></blockquote><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we‚Äôll remember a little about the initialization steps for core Core Data objects. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OrgChartAppDelegate.h</font></font></b> <br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><span class="hljs-meta"> #import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;CoreData/CoreData.h&gt;</span></span></span><span class="hljs-meta"> @class OrgChartViewController; @interface OrgChartAppDelegate : UIResponder </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;UIApplicationDelegate&gt;</span></span></span><span class="hljs-meta"> @property (nonatomic, strong) UIWindow *window; @property (nonatomic, strong) OrgChartViewController *viewController; @property (nonatomic, strong) NSManagedObjectModel *managedObjectModel; @property (nonatomic, strong) NSPersistentStoreCoordinator *persistentStoreCoordinator; @property (nonatomic, strong) NSManagedObjectContext *managedObjectContext; - (void)saveContext; - (NSURL *)applicationDocumentsDirectory;</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Further, in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OrgChartAppDelegate.m we</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> implement 3-4 methods already familiar to us:</font></font><br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)saveContext { <span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span> *error = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> *managedObjectContext = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectContext; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-literal"><span class="hljs-literal">nil</span></span> != managedObjectContext) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>([managedObjectContext hasChanged] &amp;&amp; ![managedObjectContext save:&amp;error]){ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Unresolved error %@, %@"</span></span>, error, [error userInfo]); abort(); } } } - (<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> *)managedObjectContext { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-literal"><span class="hljs-literal">nil</span></span> != _managedObjectContext) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _managedObjectContext; <span class="hljs-built_in"><span class="hljs-built_in">NSPersistentStoreCoordinator</span></span> *storeCoordinator = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.persistentStoreCoordinator; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-literal"><span class="hljs-literal">nil</span></span> != storeCoordinator){ _managedObjectContext = [[<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> alloc] init]; [_managedObjectContext setPersistentStoreCoordinator:storeCoordinator]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _managedObjectContext; } - (<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectModel</span></span> *)managedObjectModel { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-literal"><span class="hljs-literal">nil</span></span> != _managedObjectModel) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _managedObjectModel; <span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *model = [[<span class="hljs-built_in"><span class="hljs-built_in">NSBundle</span></span> mainBundle] URLForResource:<span class="hljs-string"><span class="hljs-string">@"OrgChart"</span></span> withExtension:<span class="hljs-string"><span class="hljs-string">@"momd"</span></span>]; _managedObjectModel = [[<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectModel</span></span> alloc] initWithContentsOfURL:model]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _managedObjectModel; } - (<span class="hljs-built_in"><span class="hljs-built_in">NSPersistentStoreCoordinator</span></span> *)persistentStoreCoordinator { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-literal"><span class="hljs-literal">nil</span></span> != _persistentStoreCoordinator) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _persistentStoreCoordinator; <span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *storeURL = [[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> applicationDocumentDirectory] URLByAppendingPathComponent:<span class="hljs-string"><span class="hljs-string">@"OrgChart.sqlite"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span> *error = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; _persistentStoreCoordinator = [[<span class="hljs-built_in"><span class="hljs-built_in">NSPersistentStoreCoordinator</span></span> alloc] initManagedObjectMode: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectModel]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(![_persistentStoreCoordinator addStoreWithType:<span class="hljs-built_in"><span class="hljs-built_in">NSSQLiteStoreType</span></span> configuration:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> URL:storeURL options:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> error:&amp;error]){ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Unresolved error %@, %@"</span></span>, error, [error userInfo]); abort(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _persistentStoreCoordinator; } - (<span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *)applicationDocumentsDirectory { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [[[<span class="hljs-built_in"><span class="hljs-built_in">NSFileManaged</span></span> defaultManager] URLsForDirectory:<span class="hljs-built_in"><span class="hljs-built_in">NSDocumentDirectory</span></span> inDomain:<span class="hljs-built_in"><span class="hljs-built_in">NSUserDomainMask</span></span>] lastObject]; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this chapter, we will focus on working with Core Data, rather than on implementing the user interface, so all the work will be done in the method </font></font><code>application:didFinishLaunchingWithOptions:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Then we will learn using external tools to check the operation of Core Data (whether the data is stored in our local storage or not). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Before you request any data from the repository, you need to add something there, so change ours </font></font><code>application:didFinishLaunchingWithOptions:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as follows:</font></font><br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">BOOL</span></span>)application:(<span class="hljs-built_in"><span class="hljs-built_in">UIApplication</span></span> *)application didFinishLaunchingWithOptions:(<span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span> *)launchOptions { [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> createData]; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.window = [[<span class="hljs-built_in"><span class="hljs-built_in">UIWindow</span></span> alloc] initWithFrame:[[<span class="hljs-built_in"><span class="hljs-built_in">UIScreen</span></span> mainScreen] bounds]]; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.viewController = [[OrgChartViewController alloc] initWithNibName:<span class="hljs-string"><span class="hljs-string">@"OrgChartViewController"</span></span> bundle:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.window.rootViewController = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.viewController; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.window makeKeyAndVisible] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">YES</span></span>; }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OrgChartAppDelegate.h</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)createData;</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OrgChartAppDelegate.m</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)createData { <span class="hljs-comment"><span class="hljs-comment">//.... }</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Let's start with creating an organization: </font></font><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSManagedObject</span></span> *organization = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> insertNewObjectForEntityForName:<span class="hljs-string"><span class="hljs-string">@"Organization"</span></span> inManagedObjectContext:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectContext];</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We created an organization, but did not specify its name or identifier. </font></font><br><pre> <code class="objectivec hljs">[organization setValue:<span class="hljs-string"><span class="hljs-string">@"MyCompany, Inc."</span></span> forKey:<span class="hljs-string"><span class="hljs-string">@"name"</span></span>];</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As we remember, the id attribute is of type Integer 16. All set values ‚Äã‚Äãin CoreData must be objects (no int, long, char, enum). </font><font style="vertical-align: inherit;">We use the wrapper class for the integer type: NSNumber.</font></font><br>  The code will look like this: <br><pre> <code class="objectivec hljs">[organization setValue:[<span class="hljs-built_in"><span class="hljs-built_in">NSNumber</span></span> numberWithInt:[<span class="hljs-string"><span class="hljs-string">@"MyCompany, Inc."</span></span> hash]] forKey:<span class="hljs-string"><span class="hljs-string">@"id"</span></span>];</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Established the name of the organization and a unique identifier. </font><font style="vertical-align: inherit;">Nothing has been saved to the repository yet, but it </font></font><code>NSManagedObjectContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">monitors all changes in the state of objects and stores them in the local repository only after calling the </font></font><code>save:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">method. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An organization without people cannot work, though ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's create several employees:</font></font><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSManagedObject</span></span> *john = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> insertNewObjectForEntityForName:<span class="hljs-string"><span class="hljs-string">@"Person"</span></span> inManagedObjectContext:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectContext]; [john setValue:<span class="hljs-string"><span class="hljs-string">@"John"</span></span> forKey:<span class="hljs-string"><span class="hljs-string">@"name"</span></span>]; [john setValue:[<span class="hljs-built_in"><span class="hljs-built_in">NSNumber</span></span> numberWithInt:[<span class="hljs-string"><span class="hljs-string">@"John"</span></span> hash]] forKey:<span class="hljs-string"><span class="hljs-string">@"id"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObject</span></span> *jane = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> insertNewObjectForEntityForName:<span class="hljs-string"><span class="hljs-string">@"Person"</span></span> inManagedObjectContext:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectContext]; [jane setValue:<span class="hljs-string"><span class="hljs-string">@"Jane"</span></span> forKey:<span class="hljs-string"><span class="hljs-string">@"name"</span></span>]; [jane setValue:[<span class="hljs-built_in"><span class="hljs-built_in">NSNumber</span></span> numberWithInt:[<span class="hljs-string"><span class="hljs-string">@"Jane"</span></span> hash]] forKey:<span class="hljs-string"><span class="hljs-string">@"id"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObject</span></span> *bill = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> insertNewObjectForEntityForName:<span class="hljs-string"><span class="hljs-string">@"Person"</span></span> inManagedObjectContext:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectContext]; [bill setValue:<span class="hljs-string"><span class="hljs-string">@"Bill"</span></span> forKey:<span class="hljs-string"><span class="hljs-string">@"name"</span></span>]; [bill setValue:[<span class="hljs-built_in"><span class="hljs-built_in">NSNumber</span></span> numberWithInt:[<span class="hljs-string"><span class="hljs-string">@"Bill"</span></span> hash]] forKey:<span class="hljs-string"><span class="hljs-string">@"id"</span></span>];</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we have an organization and three unrelated people. John is our CEO, and Jane and Billy are helpers. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We have two types of communication: one-to-one (the organization has only one CEO) and one-to-many (one employee may have many subordinates). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, linking the organization (making contact) with John and making it a CEO is quite simple:</font></font><br><pre> <code class="objectivec hljs">[organization setValue:john forKey:<span class="hljs-string"><span class="hljs-string">@"leader"</span></span>];</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Core Data perfectly understands what object you have dropped into it and what connection it should be. </font><font style="vertical-align: inherit;">By the way, if you try to transfer some other type instead of John, the code will not work. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we need to figure out what to do with Jane and Billy. </font><font style="vertical-align: inherit;">Core Data returns from a one-to-many relationship a lot in the form of a type </font></font><code>NSSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Therefore, in order for us to have the opportunity to add new employees, it is necessary to call the method </font></font><code>mutableSetValueForKey:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, and not the </font></font><code>valueForKey:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">one that will return an immutable set of objects. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is what Jane and Billy‚Äôs add code would look like:</font></font><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSMutableSet</span></span> *johnsEmployees = [john mutableSetValueForKey:<span class="hljs-string"><span class="hljs-string">@"employees"</span></span>]; [johnsEmployees addObject:jane]; [johnsEmployees addObject:bill];</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> All these changes, this whole graph of objects that we created must be saved: </font></font><br><pre> <code class="objectivec hljs">[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> saveContext];</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This completes the implementation of the method </font></font><code>createData:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, when you start the application, you will not see anything either in the console or on the simulator screen. </font><font style="vertical-align: inherit;">In the next section, we will use external tools to check whether it was possible to save data or not.</font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sqlite </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We take a shovel in hand, launch the console and ... let's go: </font></font><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/Library/Application\ Support/iPhone\ Simulator</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Find our database: </font></font><br><pre> <code class="bash hljs">find . -name <span class="hljs-string"><span class="hljs-string">"OrgChart.sqlite"</span></span> ‚Äì<span class="hljs-built_in"><span class="hljs-built_in">print</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It will give us something like this: </font></font><br><pre> <code class="bash hljs">./5.0/Applications/E8654A34-8EC4-4EAF-B531-00A032DD5977/Documents/OrgChart.sqlite</code> </pre><br>  Run: <br><pre> <code class="bash hljs">sqlite3 ./5.0/Applications/E8654A34-8EC4-4EAF-B531-  00A032DD5977/Documents/OrgChart.sqlite</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At this stage, we have the SQLite shell. </font><font style="vertical-align: inherit;">We can enter commands.</font></font><br><pre> <code class="bash hljs">SQLite version 3.7.5 Enter <span class="hljs-string"><span class="hljs-string">".help"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> instructions Enter SQL statements terminated with a <span class="hljs-string"><span class="hljs-string">";"</span></span> sqlite&gt;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One of the interesting and useful commands is the command </font></font><code>.scheme</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">that displays the structure of the tables created by Core Data:</font></font><br><pre> <code class="bash hljs">sqlite&gt; .schema CREATE TABLE ZORGANIZATION ( Z_PK INTEGER PRIMARY KEY, Z_ENT INTEGER, Z_OPT INTEGER, ZID INTEGER, ZLEADER INTEGER, ZNAME VARCHAR ); CREATE TABLE ZPERSON ( Z_PK INTEGER PRIMARY KEY, Z_ENT INTEGER, Z_OPT INTEGER, ZID INTEGER, Z2EMPLOYEES INTEGER, ZNAME VARCHAR ); CREATE TABLE Z_METADATA (Z_VERSION INTEGER PRIMARY KEY, Z_UUID VARCHAR(255), Z_PLIST BLOB); CREATE TABLE Z_PRIMARYKEY (Z_ENT INTEGER PRIMARY KEY, Z_NAME VARCHAR, Z_SUPER INTEGER, Z_MAX INTEGER); CREATE INDEX ZORGANIZATION_ZLEADER_INDEX ON ZORGANIZATION (ZLEADER); CREATE INDEX ZPERSON_Z2EMPLOYEES_INDEX ON ZPERSON (Z2EMPLOYEES); sqlite&gt;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Many internal fields, some additional tables that you can hardly find in the XCode model editor. </font><font style="vertical-align: inherit;">You can see the field for that automatically incremented key (INTEGER PRIMARY KEY). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's try to sample all organizations and employees available in the database:</font></font><br><pre> <code class="bash hljs">sqlite&gt; select Z_PK, ZID, ZLEADER, ZNAME from ZORGANIZATION; 1|-19904|2|MyCompany, Inc. sqlite&gt; select Z_PK, ZID, Z2EMPLOYEES, ZNAME from ZPERSON; 1|6050|2|Jane 2|-28989||John 3|28151|2|Bill sqlite&gt;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note the 3 column in which the identifier of the parent object is indicated, in this case we have Billy and Jane under the direction of John (the unique identifier is 2). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To exit the shell:</font></font><br><pre> <code class="bash hljs">sqlite&gt; .quit</code> </pre><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We are requesting data </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this chapter, we wrote data to the SQLite repository using Core Data, and used the SQLite shell to examine the structure of the database that Core Data creates and verify that the data was saved. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we will request data from the repository using the same Core Data. </font><font style="vertical-align: inherit;">Open the Xcode file </font></font><code>OrgChartAppDelegate.m</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Since the relationship between employees is recursive (one entity on both sides of the relationship), we write a method that allows you to display a list of employees who are subject to the specified c pleasant and understandable formatting:</font></font><br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)displayPerson:(<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObject</span></span> *)person withIndentation:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)indentation { <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"%@Name: %@"</span></span>, indentation, [person valueForKey:<span class="hljs-string"><span class="hljs-string">@"name"</span></span>]); <span class="hljs-comment"><span class="hljs-comment">//     indentation = [NSString stringWithFormat:@"%@ ", indentation]; NSSet *employees = [person valueForKey:@"employees"]; id employee; NSEnumerator *it = [employees objectEnumerator]; while((employee = [it nextObject]) != nil) { [self displayPerson:employee withIndentation:indentation]; } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now we will write the method of sampling all organizations, displaying the name of the organization with its CEO and all subordinates: </font></font><br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)readData { <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> *context = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> managedObjectContext]; <span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> *orgEntity = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> entityForName:<span class="hljs-string"><span class="hljs-string">@"Organization"</span></span> inManagedObjectContext:context]; <span class="hljs-built_in"><span class="hljs-built_in">NSFetchRequest</span></span> *fetchRequest = [[<span class="hljs-built_in"><span class="hljs-built_in">NSFetchRequest</span></span> alloc] init]; [fetchRequest setEntity:orgEntity]; <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span> *organizations = [context executeFetchRequest:request error:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> organization; <span class="hljs-built_in"><span class="hljs-built_in">NSEnumerator</span></span> *it = [organizations objectEnumerator]; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ((organization = [it nextObject]) != <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Organization: %@"</span></span>, [organization valueForKey:<span class="hljs-string"><span class="hljs-string">@"name"</span></span>]); <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObject</span></span> *ceo = [ogranization valueForKey:<span class="hljs-string"><span class="hljs-string">@"leader"</span></span>]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> displayPerson:ceo withIndentation:<span class="hljs-string"><span class="hljs-string">@" "</span></span>]; } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do not forget to add methods to </font></font><code>OrgChartAppDelegate.h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)readData; - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)displayPerson:(<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObject</span></span> *)person withIndentation:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)indentation;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now back to the method </font></font><code>application:didFinishLaunchingWithOptions:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and instead of calling the method, </font></font><code>createData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">call </font></font><code>readData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">BOOL</span></span>)application:(<span class="hljs-built_in"><span class="hljs-built_in">UIApplication</span></span> *)application didFinishLaunchingWithOptions:(<span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span> *)launchOptions { <span class="hljs-comment"><span class="hljs-comment">//[self createData]; [self readData]; self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; self.viewController = [[OrgChartViewController alloc] initWithNibName:@"OrgChartViewController" bundle:nil]; self.window.rootViewController = self.viewController; [self.window makeKeyAndVisible]; return YES; }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Start the application and take a look at the console: </font></font><br><img src="https://habrastorage.org/storage3/a02/cbd/f01/a02cbdf0198aed1df343289a1ad0b75e.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Don't be afraid to experiment: add new employees, delete the database and let the application restore it again, create new organizations. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here, for example, we added a new employee, headed by Jane:</font></font><br><img src="https://habrastorage.org/storage3/cf4/077/fde/cf4077fde053b33445c1d55080941d4d.png"><br><br><h5>  Conclusion </h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To date, Core Data should not look like something incomprehensible and scary to you. </font><font style="vertical-align: inherit;">In this chapter, we explored many of the classes that Core Data uses for its needs, but with which we will very, very rarely (or rather, never) work. </font><font style="vertical-align: inherit;">Using Core Data is like driving a car without having to be a mechanic. </font><font style="vertical-align: inherit;">The simplicity of the core data class structure should not be misleading. </font><font style="vertical-align: inherit;">You have already seen what Core Data is capable of and, this is just the beginning. </font><font style="vertical-align: inherit;">The more we delve into the many settings, </font></font><a href="https://duckduckgo.com/%3Fq%3DUI%2Bbindings%2BCore%2BData"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">connectivity with the UI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , alternative storage types, customizable </font></font><code>NSManagedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'s, the clearer you will be able to see the elegance of the applied approaches to data storage in Core Data.</font></font></div><p>Source: <a href="https://habr.com/ru/post/191580/">https://habr.com/ru/post/191580/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../191568/index.html">NASA is preparing an experiment to test the concept of a warp engine</a></li>
<li><a href="../191570/index.html">NASA's first study on the possibility of manned flight to Mars on a nuclear-powered ship (1960)</a></li>
<li><a href="../191572/index.html">NASA Develops Laser Satellite / Rover Communication System</a></li>
<li><a href="../191574/index.html">Metric # 20 - Podcast on technologies and design of interfaces and services</a></li>
<li><a href="../191576/index.html">PDB files are available for download in DXperience and Universal subscriptions.</a></li>
<li><a href="../191584/index.html">Dream office: what is it?</a></li>
<li><a href="../191586/index.html">Custom layout. Pop-up panel + parallax scrolling</a></li>
<li><a href="../191588/index.html">We refuse sample template parameters.</a></li>
<li><a href="../191590/index.html">ROI Initiative Digest</a></li>
<li><a href="../191592/index.html">VKontakte Node JS SDK</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
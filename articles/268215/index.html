<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Good day for code generation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Long ago, at the dawn of Eternity, somewhere in the 300th Century a mass duplicator was invented ... 
 Eternity has adapted a duplicator for their nee...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Good day for code generation</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/files/c5b/26c/6a6/c5b26c6a6f2f43a5924f256d62abe911.png">  <b><i>Long ago, at the dawn of Eternity, somewhere in the 300th Century a mass duplicator was invented ...</i></b> <b><i><br></i></b>  <b><i>Eternity has adapted a duplicator for their needs.</i></b>  <b><i>At that time, we had only six hundred or seven hundred Sectors built.</i></b>  <b><i>We faced tremendous challenges to expand our zone of influence.</i></b>  <b><i>‚ÄúTen new Sectors in one biodog‚Äù - this was the leading slogan of those years.</i></b> <b><i><br></i></b>  <b><i>The duplicator made these enormous efforts unnecessary.</i></b>  <b><i>We built one Sector, supplied it with supplies of food, water, energy, filled it with the most advanced automation and launched a duplicator.</i></b>  <b><i>And now we have in the Sector for each Century.</i></b> <b><i><br><br></i></b>  <b><i>Isaac Asimov " <a href="http://www.lib.ru/FOUNDATION/wechnost.txt">The End of Eternity</a> "</i></b> <br><br>  The fact that the day did not happen is the best, it was clear already in the morning.  The usual, rainy gray weather, and it seems that the beginning cold did not improve the mood.  Fatigue was observed in the body and, most of all, I wanted to sleep.  It was absolutely necessary to be distracted somehow ... <br><a name="habracut"></a><br>  Make <a href="https://ru.wikipedia.org/wiki/Sokoban">Sokoban</a> I wanted for a long time.  Rather, (like many others) I have already done it several times, but this was long before I met <a href="http://www.zillions-of-games.com/">Zillions of Games</a> .  What always bothered me was the development of levels.  It‚Äôs not at all easy to come up with a good level for a puzzle game, but they also need to be coded!  Since the number of levels in Sokoban is no less important than their quality, the work threatened to drag on for a long time. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      On the other hand, perhaps the levels and not worth it to invent.  In fact, nostalgia is best of all at the old levels that have been customary since childhood.  Soberly reasoning that during the time that has passed since the 80s of the last century, someone must have been puzzled by the same problem (and more than once, most likely), I decided to look for a description of the original levels on the Internet.  I quickly found what I was <a href="http://habrahabr.ru/users/begoon/" class="user_link">looking</a> for on <a href="http://habrahabr.ru/post/150882/">Habr√©</a> , for which I certainly want to thank the distinguished <a href="http://habrahabr.ru/users/begoon/" class="user_link">begoon</a> .  Torn apart from the DOS version of the program, the listing looks like this: <br><br><pre><code class="hljs markdown"><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-emphasis"><span class="hljs-emphasis">** Maze: 1 File offset: 148C, DS:00FC, table offset: 0000 Size X: 22 Size Y: 11 End: 14BD Length: 50 XXXXX XXX*</span></span> X XXX <span class="hljs-emphasis"><span class="hljs-emphasis">*XXX X *</span></span> <span class="hljs-bullet"><span class="hljs-bullet">* X XXX X XXX X XXXXXX XX XXX XXXXXXX ..X X *</span></span> * ..X XXXXX XXXX X@XXXX ..X X XXX XXXXXX XXXXXXXX</code> </pre> <br>  Everything is simple and clear!  It remains to translate this into a form understandable to Zillions of Games.  All sixty levels.  I do not know how anyone, but personally I don‚Äôt love to work with my hands so much.  The problem is not even to fill it all, then you have to correct the inevitable mistakes!  In general, if someone was looking for a suitable task for code generation, then this is it.  Let me remind you that code generation is such a ‚Äúhomemade‚Äù type of <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B5%25D1%2582%25D0%25B0%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">metaprogramming</a> , a bit more brain-friendly to the developer than <a href="http://habrahabr.ru/post/214713/">other</a> <a href="http://habrahabr.ru/post/179089/">types</a> . <br><br><div class="spoiler">  <b class="spoiler_title">No sooner said than done!</b> <div class="spoiler_text"><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">open</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $f, <span class="hljs-string"><span class="hljs-string">'&gt;'</span></span>, <span class="hljs-string"><span class="hljs-string">'levels_1_10.zrf'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $n = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $k = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $x = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $y = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> %p; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> %b; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (&lt;&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">chomp</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $s = $_; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-regexp"><span class="hljs-regexp">/^\s*X/</span></span>) { $y++; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $i = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> @a = <span class="hljs-keyword"><span class="hljs-keyword">split</span></span>(<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>, $s); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> $c (@a) { $i++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($c <span class="hljs-keyword"><span class="hljs-keyword">ne</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $p; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($i &gt; <span class="hljs-number"><span class="hljs-number">26</span></span>) { $p = <span class="hljs-keyword"><span class="hljs-keyword">chr</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">ord</span></span>(<span class="hljs-string"><span class="hljs-string">'A'</span></span>) + $i - <span class="hljs-number"><span class="hljs-number">27</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $p = <span class="hljs-keyword"><span class="hljs-keyword">chr</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">ord</span></span>(<span class="hljs-string"><span class="hljs-string">'a'</span></span>) + $i - <span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $key = $p . $y; $c =~ <span class="hljs-regexp"><span class="hljs-regexp">tr/X*.@/WBTY/</span></span>; $p{$key} = $c; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($i &gt; $x) { $x = $i; } } } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($y) { $n++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($n &gt; <span class="hljs-number"><span class="hljs-number">10</span></span>) { $k++; $n = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">close</span></span>($f); <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $a = $k * <span class="hljs-number"><span class="hljs-number">10</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $b = ($k + <span class="hljs-number"><span class="hljs-number">1</span></span>) * <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">open</span></span>($f, <span class="hljs-string"><span class="hljs-string">'&gt;'</span></span>, <span class="hljs-string"><span class="hljs-string">"levels_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${a}</span></span></span><span class="hljs-string">_</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${b}</span></span></span><span class="hljs-string">.zrf"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $l = $k * <span class="hljs-number"><span class="hljs-number">10</span></span> + $n; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($n &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">"(variant\n"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">"(include \"sokoban.inc\")\n\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">"(game\n"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" (title \"Sokoban (Level $l)\")\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($n == <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" (common-level)\n"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" (board\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" (image \"images/sokoban/black-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">x</span></span></span></span><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class="hljs-string">x</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">y</span></span></span></span><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class="hljs-string">.bmp\")\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" (grid\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" (common-grid)\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" (dimensions\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" (\""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $i = <span class="hljs-number"><span class="hljs-number">1</span></span>; $i &lt;= $x; $i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($i &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">"/"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $p; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($i &gt; <span class="hljs-number"><span class="hljs-number">26</span></span>) { $p = <span class="hljs-keyword"><span class="hljs-keyword">chr</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">ord</span></span>(<span class="hljs-string"><span class="hljs-string">'A'</span></span>) + $i - <span class="hljs-number"><span class="hljs-number">27</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $p = <span class="hljs-keyword"><span class="hljs-keyword">chr</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">ord</span></span>(<span class="hljs-string"><span class="hljs-string">'a'</span></span>) + $i - <span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">"$p"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">"\" (25 0)) ; files\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" (\""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $i = <span class="hljs-number"><span class="hljs-number">1</span></span>; $i &lt;= $y; $i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($i &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">"/"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">"$i"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">"\" (0 25)) ; ranks\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" )\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" )\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" )\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" (board-setup\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" (You\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" (W"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> $pos (<span class="hljs-keyword"><span class="hljs-keyword">keys</span></span> %p) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($p{$pos} eq <span class="hljs-string"><span class="hljs-string">'W'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" $pos"</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">")\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" (B"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> $pos (<span class="hljs-keyword"><span class="hljs-keyword">keys</span></span> %p) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($p{$pos} eq <span class="hljs-string"><span class="hljs-string">'B'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" $pos"</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">")\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" (T"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> $pos (<span class="hljs-keyword"><span class="hljs-keyword">keys</span></span> %p) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($p{$pos} eq <span class="hljs-string"><span class="hljs-string">'T'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" $pos"</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">")\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" (Y"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> $pos (<span class="hljs-keyword"><span class="hljs-keyword">keys</span></span> %p) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($p{$pos} eq <span class="hljs-string"><span class="hljs-string">'Y'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" $pos"</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">")\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" )\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">" )\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> $f <span class="hljs-string"><span class="hljs-string">")\n\n"</span></span>; $b{<span class="hljs-string"><span class="hljs-string">"black-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">x</span></span></span></span><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class="hljs-string">x</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">y</span></span></span></span><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class="hljs-string">.bmp"</span></span>}-&gt;{x} = $x * <span class="hljs-number"><span class="hljs-number">25</span></span>; $b{<span class="hljs-string"><span class="hljs-string">"black-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">x</span></span></span></span><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class="hljs-string">x</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">y</span></span></span></span><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class="hljs-string">.bmp"</span></span>}-&gt;{y} = $y * <span class="hljs-number"><span class="hljs-number">25</span></span>; $x = <span class="hljs-number"><span class="hljs-number">0</span></span>; $y = <span class="hljs-number"><span class="hljs-number">0</span></span>; %p = (); } } } <span class="hljs-keyword"><span class="hljs-keyword">close</span></span>($f); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> $b (<span class="hljs-keyword"><span class="hljs-keyword">keys</span></span> %b) { <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> <span class="hljs-string"><span class="hljs-string">"$b - $b{$b}-&gt;{x} $b{$b}-&gt;{y}\n"</span></span>; }</code> </pre><br></div></div><br>  With a slight movement of the hand, generic levels, files, 10 levels each.  It looks <a href="">as follows</a> (no, <b>sokoban.inc</b> , at the very beginning of the file - this is not the name of the company, but simply a downloadable file, with the necessary definitions created manually).  Some people don‚Äôt like <a href="https://ru.wikipedia.org/wiki/Perl">Perl</a> , and many others may find my programming style not very elegant (which are only ‚Äúmagic‚Äù constants scattered around the code), but I think that for a program that (possibly) will be launched only once - this is quite acceptable solution. <br><br>  In any case, we received (almost for nothing) the desired levels, but (for now) we can not start them.  For complete happiness, we lack that " <b>sokoban.inc</b> " and graphic resources, of course.  We quickly create the last ones in <b>paint</b> (s) (not especially bothering and painting multicolored, monotonously filled squares), and the first one contains, so far, not so much useful.  Moving the "loader" will be programmed later, now we just want to admire the levels! <br><br><div class="spoiler">  <b class="spoiler_title">sokoban.inc - minimalist version</b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> common-grid (<span class="hljs-name"><span class="hljs-name">start-rectangle</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">25</span></span> <span class="hljs-number"><span class="hljs-number">25</span></span>) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> common-level (<span class="hljs-name"><span class="hljs-name">move-sound</span></span> <span class="hljs-string"><span class="hljs-string">"Audio/Pickup.wav"</span></span>) (<span class="hljs-name"><span class="hljs-name">release-sound</span></span> <span class="hljs-string"><span class="hljs-string">"Audio/Pickup.wav"</span></span>) (<span class="hljs-name"><span class="hljs-name">capture-sound</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>) (<span class="hljs-name"><span class="hljs-name">option</span></span> <span class="hljs-string"><span class="hljs-string">"prevent flipping"</span></span> true) (<span class="hljs-name"><span class="hljs-name">option</span></span> <span class="hljs-string"><span class="hljs-string">"animate captures"</span></span> false) (<span class="hljs-name"><span class="hljs-name">players</span></span> You) (<span class="hljs-name"><span class="hljs-name">turn-order</span></span> You) (<span class="hljs-name"><span class="hljs-name">piece</span></span> (<span class="hljs-name"><span class="hljs-name">name</span></span> W) (<span class="hljs-name"><span class="hljs-name">image</span></span> You <span class="hljs-string"><span class="hljs-string">"images/sokoban/w.bmp"</span></span>) ) (<span class="hljs-name"><span class="hljs-name">piece</span></span> (<span class="hljs-name"><span class="hljs-name">name</span></span> B) (<span class="hljs-name"><span class="hljs-name">image</span></span> You <span class="hljs-string"><span class="hljs-string">"images/sokoban/b.bmp"</span></span>) ) (<span class="hljs-name"><span class="hljs-name">piece</span></span> (<span class="hljs-name"><span class="hljs-name">name</span></span> b) (<span class="hljs-name"><span class="hljs-name">image</span></span> You <span class="hljs-string"><span class="hljs-string">"images/sokoban/b.bmp"</span></span>) ) (<span class="hljs-name"><span class="hljs-name">piece</span></span> (<span class="hljs-name"><span class="hljs-name">name</span></span> T) (<span class="hljs-name"><span class="hljs-name">image</span></span> You <span class="hljs-string"><span class="hljs-string">"images/sokoban/t.bmp"</span></span>) ) (<span class="hljs-name"><span class="hljs-name">piece</span></span> (<span class="hljs-name"><span class="hljs-name">name</span></span> Y) (<span class="hljs-name"><span class="hljs-name">image</span></span> You <span class="hljs-string"><span class="hljs-string">"images/sokoban/y.bmp"</span></span>) ) (<span class="hljs-name"><span class="hljs-name">piece</span></span> (<span class="hljs-name"><span class="hljs-name">name</span></span> y) (<span class="hljs-name"><span class="hljs-name">image</span></span> You <span class="hljs-string"><span class="hljs-string">"images/sokoban/g.bmp"</span></span>) ) (<span class="hljs-name"><span class="hljs-name">win-condition</span></span> (<span class="hljs-name"><span class="hljs-name">You</span></span>) (<span class="hljs-name"><span class="hljs-name">pieces-remaining</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> B) ) )</code> </pre><br></div></div><br>  The walls, the boxes, the places for placing the boxes and, of course, the ‚Äúloader‚Äù itself are all figures.  Some of them, then, will even move.  All this is beautiful, but we are already waiting for another ambush!  Did you notice the file names of the <b>black-NNxMM.bmp type</b> in the level descriptions?  These are the backdrops of levels.  All that is required of them is to provide a background for displaying figures on it.  The only problem is that all these backdrops are of different sizes (thanks to the developers of Sokoban) and this size is very important for the correct display of the levels (for this you should thank the ZoG developers). <br><br>  We re-arm <b>ourselves with paint-</b> and, trying to confound <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D0%25BB%25D0%25B5%25D0%25B2%25D0%25B8%25D1%2587,_%25D0%259A%25D0%25B0%25D0%25B7%25D0%25B8%25D0%25BC%25D0%25B8%25D1%2580_%25D0%25A1%25D0%25B5%25D0%25B2%25D0%25B5%25D1%2580%25D0%25B8%25D0%25BD%25D0%25BE%25D0%25B2%25D0%25B8%25D1%2587">Malevich</a> , draw black rectangles of various shapes and sizes.  Of course they are not sixty pieces.  They are only fifty-four, but this is not much easier!  Paradoxically, but the fact is that more than 90% of our distribution will be occupied by empty, radically black rectangles (if they were not monochrome, then all 99% might well have taken it).  Now you can admire the levels themselves: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/74f/0c6/ae9/74f0c6ae905044fab11da1370f36be86.png"></div><br>  We quickly run through all the levels (just to make sure that we didn‚Äôt plow up anywhere with the code generator), after which we are embraced by a design fever.  We start with the yellow boxes.  The two diagonal lines make them much more attractive (and the triangles drawn on the sides - generally pull on the exclusive).  Drawing brickwork, we begin to understand that 25x25 is a fig size for a tile.  24 is a much more correct meaning (it‚Äôs funny that by simply swapping digits from it, you can easily get a universal answer to an unknown <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D1%2582%25D0%25B2%25D0%25B5%25D1%2582_%25D0%25BD%25D0%25B0_%25D0%25B3%25D0%25BB%25D0%25B0%25D0%25B2%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25B2%25D0%25BE%25D0%25BF%25D1%2580%25D0%25BE%25D1%2581_%25D0%25B6%25D0%25B8%25D0%25B7%25D0%25BD%25D0%25B8,_%25D0%25B2%25D1%2581%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B9_%25D0%25B8_%25D0%25B2%25D1%2581%25D0%25B5%25D0%25B3%25D0%25BE_%25D1%2582%25D0%25B0%25D0%25BA%25D0%25BE%25D0%25B3%25D0%25BE">question</a> ).  Again we take the <b>paint</b> in our hands and patiently resize all the black rectangles (the result is worth the effort).  Lastly, we redraw the ‚Äúloader‚Äù itself (this also does not do without a gradient fill). <br><br>  Then everything is quite simple.  It is necessary <a href="">to teach the</a> figures to move.  The only technical difficulty (very small) is that the locations of the boxes are also figures.  This means that when we go through them and move boxes, they must be deleted (and then automatically restored when they exit the corresponding field).  Of course, one could simply draw them on the backs, but after that the latter would no longer be monochrome (having grown solidly in size) and, in any case, 54 backs are still better than all 60. That's <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D2427">all</a> !  Enjoying the result: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/b0xLP9I6ZM0%3Ffeature%3Doembed&amp;xid=17259,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhFBMp-nmUCerQmb2ldTPGANiBqiw" frameborder="0" allowfullscreen=""></iframe><br><br><div class="spoiler">  <b class="spoiler_title">PS</b> <div class="spoiler_text">  Already in the evening, Howard McCay sent me a very unexpected and very elegant <a href="https://github.com/GlukKazan/ZoG/commit/c2e5f126c607a85f4e2cc9f68d27e9b84f7746ca%3Fdiff%3Dsplit">addition</a> to my implementation of <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D2273">Yonin Shogi</a> , published back in 2014.  Looking back, I understand that this was not the worst day of my life. <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/268215/">https://habr.com/ru/post/268215/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../268197/index.html">Home server on Intel Atom platform and Centos 7 OS</a></li>
<li><a href="../268199/index.html">Moscow metro map. SVG version</a></li>
<li><a href="../268203/index.html">PHP Digest number 71 - interesting news, materials and tools (September 21 - October 5, 2015)</a></li>
<li><a href="../268207/index.html">What is the difference between Snort and Cisco FirePOWER?</a></li>
<li><a href="../268211/index.html">What I learned about interfaces in the real world in China</a></li>
<li><a href="../268217/index.html">Amazon Web Services Infrastructure Inside. Part 1</a></li>
<li><a href="../268219/index.html">Insecure permissions in Android applications</a></li>
<li><a href="../268223/index.html">The publication in the incentive with minimal cost</a></li>
<li><a href="../268225/index.html">Price unsubscribe</a></li>
<li><a href="../268227/index.html">Why minimalist design still rules the web</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>VR / AR in the browser. How to quickly integrate and make your first application using WebVR API</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Virtual and augmented realities are actively developing and are beginning to lay claim to the capture of the world. Moreover, the use of these technol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>VR / AR in the browser. How to quickly integrate and make your first application using WebVR API</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/48f/49b/b85/48f49bb858d44ed2bcc96eb33389a76a.jpg" width="800"><br><br>  Virtual and augmented realities are actively developing and are beginning to lay claim to the capture of the world.  Moreover, the use of these technologies is diverse and is not limited to games only.  And with the advent of tools for working with VR / AR technologies in the browser, interest has increased even more.  Already, you can experiment and create MVP (Minimum Viable Product) web projects using the JavaScript API, which is called WebVR.  Let's figure out what it is and how to work with it.  And is it possible to do without this WebVR API itself? <br><a name="habracut"></a><br>  This article is for informational purposes only and is the first in a series of articles about the WebVR API and Web AR implementations that I plan.  If the topic comes, then I will continue to develop it, showing already more specific examples using various techniques and frameworks.  I want to share my personal experience and discuss in the article the basic principles of working with WebVR, how to make Web AR, what to do if you have iOS, and consider the devices for which you can develop all this today. <br><br>  In <a href="https://www.tutu.ru/">Tutu.ru,</a> I work as a system architect in the Frontend division.  I am engaged in various RnD (Research and Development) tasks.  The VR / AR theme does not intersect directly with my work, but we are already thinking in the company about using this technology in the context of the tourism business.  The technology of the future always attracts me and I really like the Frontend stack.  Rather, I like the idea of ‚Äã‚Äãdoing everything in the browser.  Let it still imposes a number of restrictions and gives some difficulties.  But they are all solvable, and after some time they are completely leveled. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/5d8/fdb/32f/5d8fdb32f4c1406ca01d4d5ae93bf311.png" align="right" width="200"><h2>  Where the legs grow </h2><br>  The speculation itself began to be written in 2014, but the first version was introduced in early 2016 by Mozilla.  Then the first full-fledged draft specification of WebVR API was presented.  This specification describes the software interface for working with various VR devices such as the Oculus Rift and the like (this spec is actually written originally under the oculus).  This specification was developed with the participation of Brandon Jones (Brandon Jones) from Google and Justin Rogers (Microsoft). <br><br>  Support for the new WebVR specification has already been implemented in Firefox and Mobile Chrome (more precisely, the degree of implementation and the nuances will be discussed later).  And this means that today you can freely experiment and try the technology of tomorrow's future.  If your browser is old, strange or not updated - there are polyphiles for all this. <br><br><h2>  Why do we need WebVR API? </h2><br>  WebVR API is a software interface for working with devices.  He knows nothing about 3D graphics.  Work with graphics, scene rendering, installation of light sources and everything else lies on the harsh shoulders of programmers.  WebVR API only allows you to abstract access to devices.  This API provides tools for rendering images, for obtaining information about the device, its capabilities and technical characteristics, but the picture itself and the 3D world need to be drawn using already familiar web technologies such as: HTML, CSS, WebGL, Canvas, etc ... <br><br>  The WebVR API provides us with several basic objects for working: <br><br><ul><li>  Navigator - allows you to get a list of devices, determine the active; </li><li>  VRDisplay - reports whether the headset is wearing a head, information about frames, eyes; </li><li>  VRPose - information about the position and orientation of the device, the speed of movement and direction; </li><li>  VREyeParameters - information on how to render video in each individual eye; </li><li>  VRFrameData - information about the scene frame for projection on a single eye. </li></ul><br>  A complete list of objects can be obtained from the following sources: <br><br><ul><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebVR_API">developer.mozilla.org/en-US/docs/Web/API/WebVR_API</a> </li><li>  <a href="https://msdn.microsoft.com/en-us/library/mt806281">msdn.microsoft.com/en-us/library/mt806281</a> (v = vs.85) .aspx </li></ul><br><h3>  Hello VR world </h3><br><img src="https://habrastorage.org/files/7c2/8ee/fc6/7c28eefc66674a4f9555535972ef78e2.png" height="200"><br><br>  A simple boilerplate code for working with a JavaScript device on JavaScript looks like this: <br><br><pre><code class="javascript hljs">navigator.getVRDisplays().then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">displays</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (displays.length &lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.warn(<span class="hljs-string"><span class="hljs-string">'No displays found!'</span></span>); } displays.forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">vrDisplay</span></span></span><span class="hljs-function"> =&gt;</span></span> { buildVRDisplay(vrDisplay) }) }); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buildVRDisplay</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">vrDisplay</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//       const frameData = new VRFRameData; //         vrDisplay.getFrameData(frameData); //     const rightEye = vrDisplay.getEyeParameters('left'); const onAnimationFrame = () =&gt; { //     vrDisplay.requestAnimationFrame(onAnimationFrame); }; vrDisplay.requestAnimationFrame(onAnimationFrame); }</span></span></code> </pre> <br>  This code should give an idea of ‚Äã‚Äãhow the operation using the WebVR API looks.  More detailed examples will be considered further, but now let's talk about browser support and devices. <br><br><h2>  What devices to work with? </h2><br><img src="https://habrastorage.org/files/51b/c4f/910/51bc4f9102944a7097d0e56e072239b5.jpg"><br><br>  When they talk about VR, they recall Oculus Rift and the like.  If we are talking about WebVR, it is logical to assume that we are counting on developing for browsers. <br><br>  The most affordable and popular devices today are the so-called Cardboard devices (or also called VRBoxes).  Mobile VR device list can be listed on the fingers: <br><br><ul><li>  Google Cardboard; </li><li>  Google Daydream (new performance of Cardboard devices); </li><li>  various Chinese VRBox'y for all models of smartphones; </li><li>  Samsung GR VR (in my opinion, a good combination of VR helmet and Cardboard device capabilities, and even access to the Oculus Store). </li></ul><br><h3>  Noname VRBox </h3><br>  Just a box with lenses.  There are very different versions, up to copies of the Samsung GR VR, but with the connection via Bluetooth of any phone model.  They are made in different form factors and in different versions.  You can buy a Bluetooth joystick that will work with any smartphone on any OS.  The quality is very good, there are no complaints about the lenses.  All the salt lies in the smartphone, the size of the display and the screen resolution. <br><br><img src="https://habrastorage.org/files/c28/668/9ec/c286689ec78144698c1e84ded6300f7f.jpg"><br><br><h3>  Xiaomi vrbox </h3><br>  Features: the presence of a mechanical button-manipulator, working on the principle of the stylus, which taps into the ‚Äúblind zone‚Äù of the screen in the bridge of the nose (engineers burn :)).  Zip fastener. <br><br><img src="https://habrastorage.org/files/40f/e2f/92b/40fe2f92b2af464d84b23da17f94233b.jpg"><br><br><h3>  Samsung GR VR </h3><br>  Features: connects to the box via USB, the presence of the touch panel and buttons on the helmet.  At the time of connection, the Oculus functionality is activated, and the phone pretends to be an Oculus-compatible device. <br><br><img src="https://habrastorage.org/files/0fb/37c/0cb/0fb37c0cb274494ab80f44616915d24a.jpg"><br><br><h3>  Google cardboard </h3><br>  Features: the presence of the button, made in the form of a small round magnet.  The application reads the change in the magnetic field by the built-in magnetometer, and this change is counted as a button action in Cardboard-compatible devices. <br><br><img src="https://habrastorage.org/files/c23/b0d/9b7/c23b0d9b727a4d60b232d91cc92218d0.jpg"><br><br><h3>  Google daydream </h3><br>  Features: the main difference from the Cardboard is a more thorough and convenient headset and the presence of a gamepad.  This is a full-fledged VRBox, not cardboard :) <br><br><img src="https://habrastorage.org/files/78d/bde/3a7/78dbde3a7f53453c8cafa1bb9729d06c.jpeg"><br><br>  Here we will talk about them.  If you have a smartphone with a Chrome browser and some variation of VRBox, then you can already check in WebVR action.  The best option is Chrome Canary or Samsung Internet.  Of course, I must say about the exception - this is iOS.  But there VR can be used through polyphiles, so demos will also be available from iOS devices (depends on the implementation).  Again, you need to understand that the WebVR API is not about 3D graphics, and you can make the WebVR world under iOS without using the VR API itself (well, or with polyfiles). <br><br>  You can also look at the VR world through the desktop browser window, which usually develops.  First, the world is built without helmets, and then the possibility of splitting the image under an optical pair is added.  To do this, use either Firefox Nightly or Chrome with this plugin: WebVR API Emulation.  Either Chrome Canary with the included support, or a special Chromium assembly ... Well, you get the idea :) <br><br><h2>  What with support in browsers? </h2><br>  So, for today WebVR API is to some extent supported in the following browsers: <br><br><ol><li>  Microsoft Edge in Hololens; </li><li>  Mozilla Servo on HTC Vive; </li><li>  Firefox Nightly; </li><li>  Chrome Canary (you need to enable the <a href="http://chrome//flags/">chrome</a> flag <a href="http://chrome//flags/">: // flags / # enable-webvr</a> ); </li><li>  Chrome Canary for Android; </li><li>  Chrome for Android (including Daydream devices, version 56+); </li><li>  Chromium on HTC Vive, Oculus, Android; </li><li>  Chromium WebVR Build ( <a href="https://webvr.info/get-chrome/">https://webvr.info/get-chrome/</a> ); </li><li>  Samsung Internet (Samsung GR VR); </li><li>  Oculus Carmel (this is a WebVR browser, also available in the Samsung GR VR); </li><li>  iOS Chrome (with polyfiles at the time of this writing); </li><li>  iOS Safari (with polyfiles at the time of writing ...); </li><li>  Chrome (with polyfiles for the moment ...); </li><li>  Firefox (with polyfiles on ...). </li></ol><br>  A complete list with compatibility tables can be found <a href="https://webvr.rocks/">here</a> . <br><br><img src="https://habrastorage.org/files/bfa/7a4/162/bfa7a416220b40eebca95cce6f7ab4b5.jpg"><br>  <i>Do not forget to enable WebVR API support.</i> <br><br><h2>  Polyphils and auxiliary libraries </h2><br>  If your device does not support WebVR API, then you can use a polyfill that can be connected to the page, or use a special browser extension.  Polifil link: <a href="https://github.com/googlevr/webvr-polyfill">github.com/googlevr/webvr-polyfill</a> <br><br><img src="https://habrastorage.org/files/167/c5d/8ea/167c5d8ea7894044819083db61aa3e8d.jpg" height="300" align="right"><h3>  WebVR API Emulation for Chrome </h3><br>  You can put on the link: <a href="https://chrome.google.com/webstore/detail/webvr-api-emulation/gbdnpaebafagioggnhkacnaaahpiefil">chrome.google.com/webstore/detail/webvr-api-emulation/gbdnpaebafagioggnhkacnaaahpiefil</a> <br><br>  About this plugin is to say a few words separately.  It not only adds WebVR API emulation, but also allows you to do various manipulations and integrates into DevTools. <br><br><h3>  WebVR-UI </h3><br>  If your device is not a VR device (and the browser in the smartphone is just a browser), then you can recreate the VR interface to switch to headset mode using the webvr-ui library.  With this library, you can make a beautiful UI interface with buttons to switch to VR mode.  Link to the project: <a href="https://github.com/googlevr/webvr-ui">github.com/googlevr/webvr-ui</a> <br><br>  Adding a few lines of code: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> renderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.WebGLRenderer(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> options = {}; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> enterVR = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> webvrui.EnterVRButton(renderer.domElement, options); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.appendChild(enterVR.domElement);</code> </pre><br>  This library is compatible with the A-Frame framework, which is very cool.  You only need to add an attribute to your code: <br><br><pre> <code class="javascript hljs">&lt;a-scene webvr-ui&gt; ... &lt;<span class="hljs-regexp"><span class="hljs-regexp">/a-scene&gt;</span></span></code> </pre><br>  And you will have a convenient VR interface.  If WebVR is available, it will be offered to switch to VR mode, otherwise it will be offered to try to launch your web application in demo mode without VR mode. <br><br><img src="https://habrastorage.org/files/22f/91a/87c/22f91a87c30f4509bb39cf842f4303d2.jpg"><br><br>  This library is highly customizable, so you can make your custom buttons. <br><br><img src="https://habrastorage.org/files/19f/29d/a6b/19f29da6b8e3414fa4895d439aae34d6.jpg" height="400"><br><br><h2>  How can we build a world? </h2><br>  To integrate into the world of VR, you need to learn how to work with 3D graphics.  This seems like a challenge if you learn WebGL from scratch.  But the easiest way to get ready-made libraries, such as Threejs, D3.js or specialized frameworks for working with VR (such as A-Frame from the Mozilla team).  There is even a preview of the release of React VR for React fans and everything that comes out of the bowels of FB.  But this is a topic for a separate article. <br><br><h3>  Type VR world </h3><br>  Using the A-Frame framework, you can create a VR world with minimal effort.  A-Frame is an HTML framework for creating web applications and virtual reality sites.  If you look at the result in the browser, it looks like a web page that represents a 3D image with the ability to navigate and interact with objects.  The whole picture is drawn using WebGL, and the main task of the framework is to provide a simple tool that would allow you to create a three-dimensional world in the usual way for front-tenders, similar to HTML markup, in a way.  The framework itself is based on Threejs and is a higher level superstructure. <br><br>  The A-Frame framework creates a 3D scene through a set of geometric primitives.  You can also add more complex components and even add your own, if you already lack basic ones.  For the objects of the scene are available typical geometric properties, such as: location, rotation, scaling, in addition, you can describe the location of cameras and light sources. <br><br>  A-Frame has a good inspector that allows you to debug the 3D world. <br><br><img src="https://habrastorage.org/files/e14/e3d/a17/e14e3da1776e4676897d32c83b1d6f48.jpg"><br><br>  Many good examples can be found <a href="https://aframe.io/examples/">here</a> . <br><br>  They are easy to understand and, having studied them, you can very quickly make your first ‚ÄúHello VR world‚Äù.  A-Frame can also be used for AR development.  If you delve into the A-Frame, then again you can talk a whole separate article (which will appear if there is interest in this subject). <br><br><h3>  React VR </h3><br>  ReactVR is a framework based on Reactjs.  If there is interest and the post has a good rating, I will make an article about it separately ... For now, just leave a link: <br><br>  <a href="https://developer.oculus.com/blog/introducing-the-react-vr-pre-release/">developer.oculus.com/blog/introducing-the-react-vr-pre-release</a> <br><br>  If the article scores a good rating, thus showing that this topic is interesting to readers, then I will make an article about it separately. <br><br><h2>  Can we do without WebVR? </h2><br>  As mentioned above, the WebVR API itself is needed only for working with VR devices, or rather, for obtaining characteristics about displays and for rendering pictures.  But if we are talking about Mobile VR, then physically we work with the 1m screen.  But we can emulate a stereo pair, and the WebVR API can help us to abstract and encapsulate the work with the screen in such a way that we will work with two physical displays.  In this case, our code will be cross-platform, and we will be able to run our WebVR application on Oculus in the Carmel browser, for example. <br><br><h2>  An example of a 3D world on Threejs using the WebVR API </h2><br>  Here I will show an example of working with a boilerplate, thanks to which you can do WebVR projects that will be created on all browsers.  Even in iOS. <br><br>  Ready demo: <a href="http://webvr.majorov.su/sample1/">webvr.majorov.su/sample1</a> <br><br><pre> <code class="javascript hljs">&lt;!DOCTYPE html&gt; &lt;html lang="en"&gt; &lt;head&gt; &lt;title&gt;Web VR boilerplate demo&lt;/title&gt; &lt;meta charset="utf-8"&gt; &lt;meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0, shrink-to-fit=no"&gt; &lt;meta name="mobile-web-app-capable" content="yes"&gt; &lt;meta name="apple-mobile-web-app-capable" content="yes"/&gt; &lt;meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/&gt; &lt;style&gt; body { width: 100%; height: 100%; background-color: #000; color: #fff; margin: 0px; padding: 0; overflow: hidden; } /* Position the button on the bottom of the page. */ #ui { position: absolute; bottom: 10px; left: 50%; transform: translate(-50%, -50%); text-align: center; font-family: 'Karla', sans-serif; z-index: 1; } a { color: white; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div id="ui"&gt; &lt;div id="vr-button"&gt;&lt;/div&gt; &lt;a id="magic-window" href="#"&gt;Try it without a headset&lt;/a&gt; &lt;/div&gt; &lt;/body&gt; &lt;script&gt;WebVRConfig = { BUFFER_SCALE: 0.5 }&lt;/script&gt; &lt;script src="node_modules/es6-promise/dist/es6-promise.min.js"&gt;&lt;/script&gt; &lt;script src="node_modules/three/build/three.min.js"&gt;&lt;/script&gt; &lt;script src="node_modules/three/examples/js/controls/VRControls.js"&gt;&lt;/script&gt; &lt;script src="node_modules/three/examples/js/effects/VREffect.js"&gt;&lt;/script&gt; &lt;script src="node_modules/webvr-polyfill/build/webvr-polyfill.min.js"&gt;&lt;/script&gt; &lt;script src="node_modules/webvr-ui/build/webvr-ui.min.js"&gt;&lt;/script&gt; &lt;script&gt; var lastRenderTime = 0; //   VRDisplay. var vrDisplay; var boxSize = 5; //   THREE.Objects. var scene; var cube; var controls; var effect; var camera; // VR UI  var vrButton; function onLoad() { //  three.js WebGL . var renderer = new THREE.WebGLRenderer({antialias: true}); renderer.setPixelRatio(window.devicePixelRatio); //       DOM document.body.appendChild(renderer.domElement); //   scene = new THREE.Scene(); //   var aspect = window.innerWidth / window.innerHeight; camera = new THREE.PerspectiveCamera(75, aspect, 0.1, 10000); controls = new THREE.VRControls(camera); controls.standing = true; camera.position.y = controls.userHeight; //  VR stereo  effect = new THREE.VREffect(renderer); effect.setSize(window.innerWidth, window.innerHeight); var loader = new THREE.TextureLoader(); loader.load('img/box.png', onTextureLoaded); //  3D  var geometry = new THREE.BoxGeometry(0.5, 0.5, 0.5); var textureLoader = new THREE.TextureLoader(); var texture0 = textureLoader.load('img/1.jpg'); var texture1 = textureLoader.load('img/1.jpg'); var texture2 = textureLoader.load('img/0.jpg'); var texture3 = textureLoader.load('img/0.jpg'); var texture4 = textureLoader.load('img/2.jpg'); var texture5 = textureLoader.load('img/0.jpg'); var materials = [ new THREE.MeshBasicMaterial({map: texture0}), new THREE.MeshBasicMaterial({map: texture1}), new THREE.MeshBasicMaterial({map: texture2}), new THREE.MeshBasicMaterial({map: texture3}), new THREE.MeshBasicMaterial({map: texture4}), new THREE.MeshBasicMaterial({map: texture5}) ]; var material = new THREE.MultiMaterial(materials); cube = new THREE.Mesh(geometry, material); cube.position.set(0, controls.userHeight, -1); scene.add(cube); window.addEventListener('resize', onResize, true); window.addEventListener('vrdisplaypresentchange', onResize, true); // Initialize the WebVR UI. var uiOptions = { color: 'black', background: 'white', corners: 'square' }; vrButton = new webvrui.EnterVRButton(renderer.domElement, uiOptions); vrButton.on('exit', function () { camera.quaternion.set(0, 0, 0, 1); camera.position.set(0, controls.userHeight, 0); }); vrButton.on('hide', function () { document.getElementById('ui').style.display = 'none'; }); vrButton.on('show', function () { document.getElementById('ui').style.display = 'inherit'; }); document.getElementById('vr-button').appendChild(vrButton.domElement); document.getElementById('magic-window').addEventListener('click', function () { vrButton.requestEnterFullscreen(); }); } function onTextureLoaded(texture) { texture.wrapS = THREE.RepeatWrapping; texture.wrapT = THREE.RepeatWrapping; texture.repeat.set(boxSize, boxSize); var geometry = new THREE.BoxGeometry(boxSize, boxSize, boxSize); var material = new THREE.MeshBasicMaterial({ map: texture, color: 0x01BE00, side: THREE.BackSide }); skybox = new THREE.Mesh(geometry, material); skybox.position.y = boxSize / 2; scene.add(skybox); setupStage(); } // Request animation frame loop function function animate(timestamp) { var delta = Math.min(timestamp - lastRenderTime, 500); lastRenderTime = timestamp; cube.rotation.y += delta * 0.0006; if (vrButton.isPresenting()) controls.update(); effect.render(scene, camera); vrDisplay.requestAnimationFrame(animate); } function onResize(e) { effect.setSize(window.innerWidth, window.innerHeight); camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); } function setupStage() { navigator.getVRDisplays().then(function (displays) { if (displays.length &gt; 0) { vrDisplay = displays[0]; if (vrDisplay.stageParameters) { setStageDimensions(vrDisplay.stageParameters); } vrDisplay.requestAnimationFrame(animate); } }); } function setStageDimensions(stage) { var material = skybox.material; scene.remove(skybox); var geometry = new THREE.BoxGeometry(stage.sizeX, boxSize, stage.sizeZ); skybox = new THREE.Mesh(geometry, material); skybox.position.y = boxSize / 2; scene.add(skybox); cube.position.set(0, controls.userHeight, 0); } window.addEventListener('load', onLoad); &lt;/script&gt; &lt;/html&gt;</code> </pre><br>  In the following articles we can understand in more detail the details of the development for WebVR.  Link to github with a boilerplate: <a href="https://github.com/borismus/webvr-boilerplate">github.com/borismus/webvr-boilerplate</a> <br><br><h2>  And what about Web AR? </h2><br>  Web AR (Augmented Reality) - it is also possible to create in the browser.  But the ‚ÄúWebAR API‚Äù does not exist, it is simply a designation of augmented reality implemented on web technologies. <br><br>  Technically, all the work is exactly the same as working with WebVR, but in addition you get a video stream from a webcam using WebRTC.  Additionally, write the logic of frame-by-frame processing to find the necessary objects.  And further, as in the case of WebVR, you are already drawing a 3D scene against the background of a video stream.  And I must say that AR does not necessarily imply the presence of a headset.  Recall ‚ÄúPockemon GO!‚Äù Is an AR project, but without a VR helmet.  It follows that to create an AR project, it is not necessary to have a VR helmet.  But at the same time, VR and AR concepts can intersect in some parameters and technologies. <br><br><img src="https://habrastorage.org/files/463/1ea/6f6/4631ea6f664448bc92ff86dd42225711.jpg" height="400"><br><br><h3>  What with support? </h3><br>  Here everything rests, first of all, in support of WebRTC.  Therefore, we can say that Web AR can be implemented on all Android devices.  Not in iOS, but if you really want, then ... <br><br><h2>  How to deal with iOS devices? </h2><br>  If we are talking about WebVR, then in iOS devices everything can be implemented through polifila (or you can do without WebVR API, describing everything on your own and implementing action tracking via an accelerometer and other sensors, beat the picture and emulate two displays).  If we talk about AR, everything is bad, as there is no support for WebRTC.  But there is such a project as Argonjs.  This is a project that consists of a framework based on A-Frame, and, attention, a special browser. <br><br><img src="https://habrastorage.org/files/07d/2e7/528/07d2e7528dce4a83a5e2bce8aae34385.jpg" align="right" width="200"><h3>  Argon 4 by Georgia Tech </h3><br>  ‚Üí Link to project: <a href="http://argonjs.io/">argonjs.io</a> <br>  ‚Üí Demo: <a href="http://argonjs.io/samples/">argonjs.io/samples</a> <br><br>  The essence of the browser is simple: there are two layers.  One layer is the Webkit engine, the second layer (substrate) is the output of the video stream from the camera.  The browser has its own API, something similar to the work of the very first versions of PhoneGap (if someone tried at the dawn of development of this project, in 2008, then it was a special iPhone browser with advanced JS API). <br><br>  At the same time, Argonjs can also be used for VR development for iOS.  More precisely for running MVP.  If you still need to develop a cross-platform application for VR / AR on JS, then you can look towards React Native along with React VR or try to pack everything into PhoneGap. <br><br><img src="https://habrastorage.org/files/156/7a8/fc6/1567a8fc6031426b84656dfba7bf8a2f.jpg"><br><br>  <b>Important!</b>  In the AppStore there are several versions of the browser.  At the moment, you need to download version 4, not lower, otherwise the framework will not start: <br><br>  <a href="https://itunes.apple.com/us/app/argon4/id1089308600%3Fmt%3D8">itunes.apple.com/us/app/argon4/id1089308600?mt=8</a> <br><br><h2>  And what about gamepads? </h2><br>  This is an additional topic to learn.  We understand with Bluetooth API and Gamepad API.  They are in browsers and are supported both on the desktop and on mobile devices (again, there are nuances and a list of favorites among browsers).  We study the documentation and learn to work with them.  About gamepads and interaction with the VR world is the topic of a separate article (or even several), not to tell in two words. <br><br><h2>  Use cases and application </h2><br>  If we talk about <a href="https://www.tutu.ru/">Tutu.ru</a> , then we already have ideas for use cases for using VR / AR in practice.  For example, these are 3D galleries for the <a href="https://tours.tutu.ru/">Tour</a> project.  Galleries 360 with a slight revision can be adapted to VR helmets, and everyone who has a VR Box at home could ‚Äúexplore‚Äù the future hotel and beach with a presence effect.  The same technique can be applied to 3D galleries for the project of the <a href="https://www.tutu.ru/poezda/">Train</a> , where you can see the car from the inside and choose a place directly from the VR helmet in Sapsan.  In the same way, in the future, could be done for intercity buses.  And for the <a href="https://go.tutu.ru/">excursion</a> project, which we also have, it would be possible to make a demo preview of the future excursion. <br><br>  Another case is the entertainment of tourists in the <a href="https://company.tutu.ru/housewarming">offline office</a> .  While the tourist is waiting for his turn to be a tour manager, instead of magazines and brochures one could put Samsung GR VR helmets and, again, make a travel catalog, which could help choose the right package.  If we develop the theme of AR, then in the offline office one could place information stands and various priks-prikolyukh, for the entertainment of customers.  If the client can skip the brochure, because the reaction to advertising waste paper is not always positive, then the client can enjoy and be pleased with the same advertisement shown through the prism of new technologies. <br><br>  In general, there is a flight for fantasy.  I told them the cases in the context of our company, and they are not all listed here.  Speaking globally, you can think of user cases with a car and a small cart :) <br><br><h2>  Related Links </h2><br><ul><li>  <a href="https://msdn.microsoft.com/en-us/library/mt806281">msdn.microsoft.com/en-us/library/mt806281</a> (v = vs.85) .aspx </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebVR_API">developer.mozilla.org/en-US/docs/Web/API/WebVR_API</a> </li><li>  <a href="https://hacks.mozilla.org/2016/03/introducing-the-webvr-1-0-api-proposal/">hacks.mozilla.org/2016/03/introducing-the-webvr-1-0-api-proposal</a> </li><li>  <a href="https://mozvr.com/">mozvr.com</a> </li><li>  <a href="https://aframe.io/">aframe.io</a> </li><li>  <a href="https://webvr.info/">webvr.info</a> </li><li>  <a href="https://webvr.rocks/">webvr.rocks</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/324570/">https://habr.com/ru/post/324570/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324560/index.html">Sparta - penetration testing system</a></li>
<li><a href="../324562/index.html">Creating cross-platform applications with React Native</a></li>
<li><a href="../324564/index.html">Development of R & D projects continues: launch of Wolfram Language 11.1</a></li>
<li><a href="../324566/index.html">Publisher Peter. Spring sale</a></li>
<li><a href="../324568/index.html">Blockchain will change the world: but what will people do?</a></li>
<li><a href="../324572/index.html">JVM is not so hard</a></li>
<li><a href="../324574/index.html">Power to the people: how to use AI to solve human problems</a></li>
<li><a href="../324576/index.html">IBM Q - developing a quantum computer running through the cloud</a></li>
<li><a href="../324578/index.html">IntelliJ IDEA 2017.1 Review: Java 9, Kotlin 1.1, Spring, Gradle, JavaScript, Go, and more</a></li>
<li><a href="../324580/index.html">Asterisk queues, minor tricks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
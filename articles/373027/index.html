<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Wearable Christmas garland. Controlled by Bluetooth LE</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="And for me, the best way to spend long, dark winter evenings is to develop algorithms for holiday illumination. 

 I present the open project of a New...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Wearable Christmas garland. Controlled by Bluetooth LE</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/ee3/577/cdd/ee3577cddc104b54961b5d1b29f344f1.jpg"><br><br>  And for me, the best way to spend long, dark winter evenings is to develop algorithms for holiday illumination. <br><br>  I present the <b>open project of a</b> New Year's garland on the basis of a LED tape with WS2812B LEDs.  The garland is powered by 4 AA batteries.  With the current settings, the project supports 122 LEDs on the ribbon, but it can easily be expanded to 1000 LEDs and more.  Flexible reconfigurable light effects generation algorithm.  The project contains a program for managing the garland from phones or tablets, compiled without modifications for iOS, Android and Windows. <br><a name="habracut"></a><br>  The tape in my project is <a href="https://geektimes.ru/post/274100/">controlled by</a> a <a href="https://geektimes.ru/post/274100/">K66BLEZ</a> module with <a href="https://geektimes.ru/post/274100/">Kinetis</a> microcontrollers. <br>  An introduction to the <b>K66BLEZ1</b> module was started in the articles: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="https://geektimes.ru/post/274100/">- Universal controller module for the Internet of things.</a>  <a href="https://geektimes.ru/post/274100/">Breathing life</a> <br>  <a href="https://geektimes.ru/post/274416/">- Universal controller module for the Internet of things.</a>  <a href="https://geektimes.ru/post/274416/">FatFs Testing</a> <br>  <a href="https://geektimes.ru/post/276098/">- Universal controller module for the Internet of things.</a>  <a href="https://geektimes.ru/post/276098/">Basics of programming</a> <br>  <a href="https://github.com/Indemsys/K66BLEZ1/blob/master/PCB/K66BLEZv1.pdf">- Module layout</a> <br>  <a href="https://github.com/Indemsys/K66BLEZ1">- Project repository</a> <br><br>  The high-performance way to work with LED tape on the WS2812B has been described <a href="https://geektimes.ru/post/255548/">here</a> .  In this project I use the same principle.  Like the STM32, the Kinetis K66 family of microcontrollers includes timers with DMA access (direct memory access bypassing the processor).  This time, I use interrupts after the end of each DMA cycle to update the LED states according to the effect generator algorithm. <br><br>  We join the module via the mockup: <br><br><img src="https://habrastorage.org/files/3cf/d1b/4d1/3cfd1b4d10094c24968039d2cab7897b.jpg"><br><br>  The development board contains practically nothing but two connectors.  One connector is for connecting batteries, the other is for connecting tapes. <br><br>  Below is the layout scheme (clickable): <br><br> <a href=""><img src="https://habrastorage.org/files/70d/a59/0cc/70da590cc2874526953f14104673b4ae.png"><br></a> <br><h2>  Supply voltage </h2><br>  An interesting feature of the tape is its ability to operate at a much lower voltage than what is written in the specification.  The garland <b>keeps working at decrease in voltage on batteries up to 2.9 V</b> ! <br><br>  With fresh batteries, the garland receives a voltage of 5 V, but at the same time the control signal is fed directly from the microcontroller and has an amplitude of 3 V and there are no failures in the control of the LEDs. <br><br>  This is how the work of the garland on the table in debug mode looks like: <br><br><img src="https://habrastorage.org/files/375/62c/2bd/37562c2bd3414c2cad38b846ad2bfb8d.gif"><br><br>  Project sources are here - <a href="https://github.com/Indemsys/K66BLEZ_WS2812B_LED_strip_control">Indemsys / K66BLEZ_WS2812B_LED_strip_control</a> . <br><br>  The project consists of 3 software parts: <br><br><ul><li>  Directory <b>MK66</b> - contains a project for the microcontroller <b>MK66FX1M0VLQ18 of the</b> module K66BLEZ.  The microcontroller runs the main application.  The application is based on the real-time operating system <b>MQX</b> . <br><br>  In addition to the main application, the project contains USB stacks, TCP / IP, file system, debug monitor and much more.  In essence, this is a framework for creating various applications where garland management is just some of the simplest demo applications.  Development Environment - IAR 7.70.2. <br><br></li><li>  Directory <b>MKW40Z</b> - contains the project for the microcontroller <b>MKW40Z160VHT4</b> module K66BLEZ.  The microcontroller is engaged in supporting communication via Bluetooth LE.  The work of the Bluetooth stack is based on the real-time operating system <b>FreeRTOS</b> .  Development Environment - IAR 7.70.2 <br><br></li><li>  The <b>PC_app</b> directory contains the project of the control program on the PC in the RAD Studio 10.1 environment.  A cross-platform framework is used that allows compiling an application under Windows, iOS and Android. <br></li></ul><br>  The project is developing.  And I hope for the next New Year the garland will be controlled by voice and from the clouds. </div><p>Source: <a href="https://habr.com/ru/post/373027/">https://habr.com/ru/post/373027/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../373017/index.html">DIY disco laser set from a pointer and arduinka</a></li>
<li><a href="../373019/index.html">Panasonic will invest $ 256 million in Tesla solar panels</a></li>
<li><a href="../373021/index.html">Mega constructions. The biggest wind turbines</a></li>
<li><a href="../373023/index.html">Pascal guide: we understand 2016 NVIDIA graphics cards</a></li>
<li><a href="../373025/index.html">Authorizer: emcSSL decentralized authorization will work with oAuth 2.0</a></li>
<li><a href="../373029/index.html">Simple lighting controller</a></li>
<li><a href="../373033/index.html">Steampunk webcam</a></li>
<li><a href="../373035/index.html">Astronomers refined the location of the source of repetitive fast radio bursts</a></li>
<li><a href="../373037/index.html">Intel introduced a credit card-sized computer</a></li>
<li><a href="../373039/index.html">Browsers: time to sum up 2016</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
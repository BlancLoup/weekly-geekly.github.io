<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Arduino operates an industrial freight elevator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Disclaimer: If you understand electronics, some of the technical solutions described in this article will shock and terrify you, and also cause an ove...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Arduino operates an industrial freight elevator</h1><div class="post__text post__text-html js-mediator-article">  <b>Disclaimer: If you understand electronics, some of the technical solutions described in this article will shock and terrify you, and also cause an overwhelming desire to tear off the author's hands.</b>  <b>I warned.</b> <br>  A little bit about how cargo lifts are arranged and <s>not a</s> big history of creating a control system for a six-storey freight elevator based on the Arduino compatible Seeeduino controller (ATmega 328) controller. <img src="https://habrastorage.org/getpro/habr/post_images/dab/7d1/89d/dab7d189d7c81e24f8870fe918c5d2b5.jpg" alt="image"><br>  Quite a lot of pictures and letters! <br><a name="habracut"></a><br>  I earn money as an electrician in a small company that manufactures and install cargo lifts.  At this work actively accept students enrolled on a close profile and they willingly agree.  In terms of creativity, such work is simply paradise - no one climbs into electrical affairs and there is complete freedom of action both in the choice of electrical materials (just not very expensive) and in the ways of selling the finished product (if only it worked).  Since the bulk of orders is reduced to the simplest lifts with two stops, such work cannot be called complex, and even a student without experience is quickly drawn in. <br>  In general, fertile field for <b>experiments</b> ! <br><br>  As a rule, all electrics are assembled according to ready-made schemes, which are built on primitive logic using relays.  The main elements in a typical solution are the two magnetic starters (PV and PN in the figure), which start the electric hoist (motor with gearbox and drum, on which the cable is wound), floor limit switches (K1 and K2), start control buttons (KH) and limit switches of the safety circuit (CD), which block the start of the elevator (for example, if the doors of the mine are open). <br><img src="https://habrastorage.org/getpro/habr/post_images/6d9/d6f/2bb/6d9d6f2bb11ff54b62f59c7ede983444.jpg" alt="image"><br><br>  All the logic of the freight elevator operation is reduced to the fact that while all limit switches in the safety chain are pressed (in the figure it starts from L1 and up to limit switches K1 and 2), the phasing is observed, the engine is not overheated and the Stop button is not pressed, voltage.  In the case of pressing one of the buttons, the corresponding magnetic starter starts up, which, when triggered, essentially forms a trigger, which opens as soon as the elevator reaches the floor limit switch. <br>  The whole rigmare begins after the number of floors to which the freight elevator must arrive becomes more than two.  For example, for a three-story elevator, the circuit will be replenished with one intermediate relay, which will rewire the circuit to provide a stop on the middle floor.  For a four-story elevator, such relays will need two, for a five-story one ‚Äî three, and so on.  And if you figured out the previous picture as a nutlet, then I present to your attention a control scheme for a nine-floor cargo hoist: <img src="https://habrastorage.org/getpro/habr/post_images/fb4/2f7/2a6/fb42f72a6747f319bb9dcec8b95726aa.jpg" alt="image"><br>  In our time, such a complexity of the control scheme is a mortal sin.  Of course, the first thing a reasonable engineer would suggest is to use a programmable logic controller (PLC).  True, the cost of components in this case will increase.  But why not use cheap Arduino here?  Poryskav in the network, I found several interesting projects with layouts of passenger elevators from all the familiar LEGO and decided that this shawl should definitely handle the freight elevator.  Just in time for the occasion, I received an order for a six-story lift. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In addition, I already had a Seeeduino board (ATmega 328) for quite some time, and a Chinese LCD display.  If you really sculpt the controller - then with the display!  And first of all, I calculated the number of ports on the board that can be used.  And their Seeeduino - 14 discrete and 6 analog (which of course work as discrete).  The idea was simple: hang up each button and limit switch on your port, and turn on magnetic starters using a 5VDC / 220VAC relay.  The security chain must also have its own port.  In total, 13 discrete inputs and two relays are needed for a six-floor freight elevator.  But where to connect the display?  Comes to the aid of the shift register PCF8574, which will allow you to manage it with just two wires (there is a <a href="http://habrahabr.ru/post/219137/">post</a> about it).  Thus, using a mock-up board, 13 pull-up resistors and two light bulbs that simulate a ‚Äústart-up‚Äù relay and a ‚Äústart-down‚Äù relay, I wrote a control program (there is a cycle on a cycle and a cycle on a chase, even I‚Äôm ashamed to show it).  Unfortunately, I have a display without Cyrillic support, so it displays only messages like ‚ÄúLift on a Floor‚Äù and ‚ÄúSecurity Circuit Broken!‚Äù. <br><img src="https://habrastorage.org/getpro/habr/post_images/3c0/2d7/f0d/3c02d7f0d5d3680e997da8ab3ed1e3ba.jpg" alt="image"><br><br>  If everything went smoothly with the number of ports, the first big problem was the combination of logical levels.  The fact is that electrical products used in our company are designed for 220VAC *.  That is, when you press a button or a limit switch, the real phase comes to the wire, while the Arduino uses 5VDC logic.  Since I am not a pro in electronics, I turned for help to the radio forum, and using hints I blocked such a scheme based on an optocoupler: <br><img src="https://habrastorage.org/getpro/habr/post_images/6df/898/815/6df89881505860cff83b0e44e2358341.jpg" alt="image"><br>  She worked perfectly with the LED, and I was guided by the principle of Cave Johnson ("we just throw science into the wall and see what sticks") immediately decided to solder it to the board. <img src="https://habrastorage.org/getpro/habr/post_images/444/b01/f0d/444b01f0d489f25a04584556a8d3505d.jpg" alt="image"><br>  And, of course, it was a failure.  Arduino not only did not see the logical unit on the port, but the optocouplers often burned merrily along with resistors.  Meanwhile, the customer was already waiting for his elevator.  And there was nothing left but to admit defeat and make the scheme as before, on the relay.  Well, the relay is so on the relay, I decided, threw out the optocouplers and took thirteen intermediate relays for use as a galvanic isolator.  Each relay has its own button and a floor limit switch. <br><img src="https://habrastorage.org/getpro/habr/post_images/be8/31b/63e/be831b63eeb561c5f3b7310ae3da904b.jpg" alt="image"><br>  After such an original solution to the problem of logical levels, I moved on to the problem of turning on magnetic starters.  It is worth mentioning that the 5VDC / 220VAC relays are connected to the Arduino ports not directly, but according to a circuit with a transistor and a diode.  However, you can simply buy a finished unit. <br>  However, in the issue of managing such a load as 220V magnetic starters, the second and biggest problem was waiting for me - pickup.  Since I shoved the Arduino, the display and both relays were pretty tight in one case, when the magnetic starter was turned on, the display started to show cracks instead of letters, and the controller could hang.  There was less and less time left, and I decided to make an improvised screening of kitchen foil. <br><img src="https://habrastorage.org/getpro/habr/post_images/7db/8df/7d7/7db8df7d7b2857a3d0c8b74c18d34727.jpg"><br>  Everything seemed ridiculous, but it helped.  I searched the network for any solutions, but found only offers to use ferrite rings or again optocouplers with which I no longer became friends. <br>  All assembly complete: <br><img src="https://habrastorage.org/getpro/habr/post_images/220/7cc/22b/2207cc22b8df272c458dae414bf073ea.jpg"><br>  This is followed by a trip to the site for the installation of electrical equipment.  This is a factory for the production of plastic containers.  This handsome, three-ton capacity will be controlled by the controller: <br><img src="https://habrastorage.org/getpro/habr/post_images/a81/7fd/168/a817fd16809236aa9f060f72f800523a.jpg"><br>  Installation of electricians is quite tiresome - you have to climb around the mine all day, pulling the wires, and then, sometimes hanging in an uncomfortable position, connect them in the terminal blocks in the junction boxes.  But this is not the worst problem that awaits you, if you have decided to make your controller.  The most terrible as I have said - tip.  It turned out that the pickups from the magnetic starter, working in idle and pickups from the starter, closing or (what is the most terrible) shutting off the power of an eight-kilowatt engine is not the same thing (Who would have thought!).  Whatever screens I am, the sparks on the contact group of the starter reduced their action to zero.  And although the controller was not disturbed, the display gave nonsense instead of informational messages.  After long ordeals, in the end, I fenced off the magnetic starters from the controller with a steel plate connected to the neutral (grounding unfortunately at the time of installation was not yet), and solved the display problem programmatically using the function delay () ;.  As soon as the program started the engine start or stopped, the second delay () turned on;  after which the message was displayed. <br><img src="https://habrastorage.org/getpro/habr/post_images/646/f4b/f4d/646f4bf4d529061abd753b9c3a5db0cb.jpg"><br>  Of course, I could not completely trust the controller with the question of an emergency or emergency elevator stop.  As soon as the power supply in the safety circuit disappears, the relay opens the power supply at the starters, and sends a signal to the arduino port.  And even if the controller for some reason hangs, the lift will still be stopped.  In addition, the scheme provides for a remote reboot of the system from any floor, by pressing the ‚ÄúStop‚Äù button for more than two seconds. <br><img src="https://habrastorage.org/getpro/habr/post_images/897/3aa/81f/8973aa81f7f9afafd9002f20818b9731.jpg"><br>  Video of work, I apologize for the quality in advance. <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/DNAkCLijWv4%3Ffeature%3Doembed&amp;xid=17259,15700002,15700022,15700186,15700191,15700253&amp;usg=ALkJrhimpFyZoBXJe5HhZr4THX6UG5pabw" frameborder="0" allowfullscreen=""></iframe><br>  <b>Results:</b> <br>  For the price it turned out quite inexpensive: Relay - 80 p / pc * 13pcs = 1040r, display + Arduino = 1000r, power supply, housing, terminals and resistors = 1000r. <br>  In total, the controller cost around 3000r, while the most budget-friendly PLC, which will cope with this task, will be released at least 7000r. <br>  Reliability - time will tell.  I've already seen burnt PLCs, so it's not a fact that the Arduino will be worse.  For this parameter, the relay circuit is still out of competition.  Using the controller has reduced the number of wires, and thus facilitate the work on their crimping and marking, as well as simplify installation. <br><br>  Summing up, I would like to wish the development of the Arduino platform towards integration with power circuits (well, for example, the appearance of ready-made optical isolation units) in the future.  I know that many consider Arduino only as a child's toy.  However, progress does not stand still, and everything goes to the fact that even a little bit familiar with electronics people will be able to assemble the most complex devices, without turning to all sorts of problems like "choose a resistor so that the optocoupler does not burn," and free up more time for technical creativity. <br>  <b>Thanks for attention!</b> <br><br>  PS: <br>  * Yes, I understand perfectly that 220V is not the best choice for control circuits.  The fact is that in the firm before my arrival historically it happened (apparently it was too lazy to bother with converters), and also sometimes suppliers find it difficult to get buttons and actuators for the necessary voltage.  To reassure you, I will say that many customers connect freight elevators through the RCD, which I advise everyone. <br><br>  UPD: <br>  Gentlemen, a freight elevator, and people are not allowed to ride it.  This is clearly written on every door on every floor.  The doors of the mine at the time of work are blocked by electric locks, completely independent of the controller. <br>  All emergencies already have their answer.  For example, in the event of a cable break, a mechanical safety device (by the way, he was invented by Ottis himself), in the event of a cab overload or jamming, a thermal relay and overload limiters, also operating independently of the controller. <br>  In short, the controller only deals with the logic of starting the elevator to the floors, and the security system has remained absolutely unchanged. <br><br>  UPD2: <br>  Here is the <a href="https://github.com/Astrei/ALC">text of the program</a> (I am a programmer the same as the electronics engineer) </div><p>Source: <a href="https://habr.com/ru/post/221663/">https://habr.com/ru/post/221663/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../221649/index.html">Fifty infrared shades</a></li>
<li><a href="../221653/index.html">The prototype goes to Open Source: Exchange of telephone operators</a></li>
<li><a href="../221655/index.html">We eliminate errors when getting an array from a user instead of a string</a></li>
<li><a href="../221657/index.html">Falcon 9-R took off one kilometer and landed back. With cows</a></li>
<li><a href="../221659/index.html">Easy python web framework: Bottle</a></li>
<li><a href="../221667/index.html">Transactional Memory: History and Development</a></li>
<li><a href="../221669/index.html">Consulo + .NET plugin, two months later</a></li>
<li><a href="../221673/index.html">Chromium Transmission Integration</a></li>
<li><a href="../221675/index.html">VPN: past, present, future</a></li>
<li><a href="../221677/index.html">Sol 610: Mars Live Panorama and Curiosity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
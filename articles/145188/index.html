<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What is silent about the Random Number Generator from Intel?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have long wanted to kick the RNG from Intel, but I could not find a free moment. I had to force myself. The result of kicking is the text below. 
 T...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What is silent about the Random Number Generator from Intel?</h1><div class="post__text post__text-html js-mediator-article">  I have long wanted to kick the RNG from Intel, but I could not find a free moment.  I had to force myself.  The result of kicking is the text below. <br>  The format of the text - banter and criticism, with respect to the opponent. <br>  I do not think that the post will be of interest to the developers of this RNG (they have long received a prize for it), but it may be of interest to someone else for general development. <br><br>  What is so silent RNG from Intel?  And he is silent about a lot of things, but first we need to determine the terminology. <br>  There is a common name Random Number Generator (Random Number Generator - RNG).  They are divided into PRNG (Pseudo Random Number Generator) and TRNG - True RNG.  Every self-respecting office that releases crypto IP, well, is simply obliged to have True RNG in its arsenal. <br>  Even better, if your True RNG is compact, fast, and most importantly, digital (well, without analogous problems, such as Schottky diodes, noisy resistors, etc. of exotic living creatures, because it is difficult to ‚Äúmaintain‚Äù it). <br>  In a word, there is no way without True RNG, since real entropy in cryptography needs a full stop. <br><a name="habracut"></a><br>  If anyone was interested in True RNG, he should be aware of the material where the <a href="http://www.cryptography.com/public/pdf/IntelRNG.pdf">first Intel RNG was first described</a> . <br>  They have there as a source of entropy used "noise resistor" in combination with a pair of oscillators.  This is the first True RNG from Intel and until recently (before the release of Ivy Bridge products) was the only one.  In principle, the first Intel's True RNG worked properly (although it was not smart), but it was allergic (personal guess) to portability (between production technologies), it required special nutrition, etc.  restrictions.  Therefore, it was ‚Äúkept‚Äù in the back of the chipset, which, for various reasons, lagged behind (in production technology) processors for a year or two. <br>  Intel decided to stop this masochism and in 2008 gave the task to two groups of developers to make a new True RNG.  That was digital, yes fast, and that energy would not eat valuable energy in vain, but various certification passed. <br><br>  In the course of development, there were 2 publications on this topic, and I just have to stop at them in detail.  Unfortunately, they are not in the public domain (IEEE only), but the seeker will always find them. <br>  The first, <a href="http://ieeexplore.ieee.org/xpl/login.jsp%3Ftp%3D%26arnumber%3D4749691/">"A 4Gbps 0.57pJ / bit Process-Voltage-Temperature Variation All-Digital True Random Number Generator in 45nm CMOS"</a> <br>  From the name and abstract to the material, it immediately became clear that they didn‚Äôt like to joke at Intel, and "they were tearing everyone up" without even asking for the names.  But when he read to the end - he laughed for a long time.  The main points causing laughter: <br><ul><li>  We have all tested the NIST STS test suite, and our RNG passes all tests. </li></ul>  In fact, Intel's researchers used only 5 tests out of 16 (in the new edition of the package there are 15 (the tests themselves and the documentation for them are open <a href="http://csrc.nist.gov/groups/ST/toolkit/rng/documentation_software.html">here</a> ). In addition, one test was used incorrectly, since Discrete Fourier Transform requires much more data to analyze rather than the proposed 500 bits, but the researchers can be forgiven, because the resulting 4 Gbit / s performance, like all the data in the article, is just a simulation. <br>  Well, okay, the first test is always a simulation, and you can agree with these, but you can not agree with the fact that <br><ul><li>  The source of entropy, according to the developers, is completely digital. </li></ul><br>  In principle, the central element of the entropy source is a bistable cell, which is essentially a digital <img src="https://habrastorage.org/getpro/geektimes/post_images/b33/a76/c50/b33a76c50331fe4c2eb14a2944312114.jpg" alt="image">  , but how it was processed with a file is already beyond the definition of all-digital. <br>  Here is an example of a used inverter (2 in total), which has 8 specially selected taps for power and ground. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/ae9/b99/4e0/ae9b994e083c3f009341d07b1e00d30d.jpg" alt="image"><br>  Turning on / off them you can adjust the level of the inverter switching (in a real chip, the transistors will be all different).  The purpose of the developers was simple - to achieve the same level of switching of a pair of used inverters in a bistable element;  they probably achieved their goals (compensated for technological variation), but calling this ancient solution (older than me) - all-digital is just blasphemy, imho. <br>  In addition to the ‚Äúspecial-digital inverters‚Äù, which are clearly not in the standard digital library for design, researchers from Intel added another all-digital solution to compensate for the parasitic capacity of the connecting element (delay element), which works on the same principle of setting / compensation.  As a result, we got this all-digital. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/ce1/06c/71c/ce106c71cf4e54693fbcc9311816cc5a.jpg" alt="image"><br>  where CONF0-1 is 8-bit registers to adjust the switching levels of the inverters, and CONF2-3 is 4-bit registers to compensate for the spurious capacitance of connecting lines (delay settings).  In general, CONF0-3 is used to balance the system, because without it, as lucky (the chip will differ from the chip): either it will not work, if the noise is less than the switching difference of the inverters, or it will work but it is bad - the distribution of zeros and units is not even , although possible and working options (all according to Gauss). <br>  There is still much to complain about (how the technological variation was simulated, the results of passing statistical tests, the ‚Äúlow-consuming‚Äù energy solution, etc.) were evaluated, but it is better to go to the second publication. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The second one, <a href="http://ieeexplore.ieee.org/stamp/stamp.jsp%3Ftp%3D%26arnumber%3D5560296">‚Äú2.4GHz 7mW All-Digital PVT-Variation Tolerant True Random Number Generator in 45nm CMOS‚Äù</a> , repeats the first one in all highlights, even adds some ‚Äúcontroversial evaluation points‚Äù, and only in performance they calmed down the appetite - from 4 Gbit / s 2.4Gbit / s <br><ul><li>  the same inferior set of statistical tests, the source of entropy, etc .; </li><li>  added self-calibration mechanism, which should be considered in more detail; </li></ul><br><img src="https://habrastorage.org/getpro/geektimes/post_images/3a0/d5c/4d6/3a0d5c4d64d9b06f457811cecc3295be.jpg" alt="image"><br><br>  The system of self-calibration functions as follows: the system checks the generated bit and, depending on its value, rearranges the source of entropy, so that the next time to get an inverse value at the output.  For example, if the current (generated) value is '0', then the entropy source (using a new combination of loads on parts of inverters and connecting lines) will be ‚Äúpushed‚Äù in the opposite direction to generate '1' with a greater probability. <br>  Yes, the above example is rather simplified, because, according to the developers, the self-calibration system evaluates 1, 2 and 4 consecutive bits when making a decision (no details are given).  In total, I can agree that this solution will achieve Uniformity at the output (a uniform distribution of values ‚Äã‚Äãlike '1' and '0'), but what about Unpredictability and Independence?  But even <a href="http://www.intel.com/p/en_US/embedded/innovation/security/walker-article-security%3Fwapkw%3Drng">Mr. Jesse Volker</a> mentioned such important parameters as Unpredictability and Independence for Random Number Generators. <br>  Another reasonable question arises on tests - how long and how many samples has been tested? <br>  As a result, there is a table with the passage of 5 tests (Frequency, Block Frequency, Runs, Cumulative Sums and FFT), while there are 15 of them in the package. If in the first article they received data from analog simulation, then in the second, they clearly state that RNG is implemented hardware (fabricated), and from this it follows that there should not be valid reasons for inadequate testing (in the sense of - it is difficult to generate). <br>  At this science-like campaign ended and remained almost only advertising. <br>  At IDF 2011, the RNG at Ivy Bridge was casually announced, but more detailed only in the <a href="http://spectrum.ieee.org/computing/hardware/behind-intels-new-randomnumber-generator/3">IEEE Spectrum publications</a> on this topic. <br>  Translation of this article has long been on Habr√© <a href="http://habrahabr.ru/post/128666/">here</a> , where, in the comments, carefully postebalis over double bleaching using AES of these most "almost random" data from the entropy source. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/b54/0ff/901/b540ff9017681cf569b0a30857edbc8a.jpg" alt="image"><br><br>  The same picture (only more details) at IDF 2012. <br>  I would like to note in this article the phrase " <a href="http://spectrum.ieee.org/computing/hardware/behind-intels-new-randomnumber-generator/3">Inverters 512 bits at a time</a> .".  I did not succeed in unambiguously present the implementation of this solution.  Anyway. <br><br>  What was all this about? <br>  In any case, Intel developers are great, they were able to release such a ‚Äúdigital solution‚Äù on 22nm technologists, and this is very cool. <br><br>  PS If someone seemed confused about the presentation of the material or any questions, I would be happy to clarify or answer. <br><br>  PS 2. thanks for editing </div><p>Source: <a href="https://habr.com/ru/post/145188/">https://habr.com/ru/post/145188/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145183/index.html">Upgrade to Windows 8 inexpensively. Opening of the Russian portal</a></li>
<li><a href="../145184/index.html">Electronic thermometer with web interface based on UniPing RS-485</a></li>
<li><a href="../145185/index.html">How to withdraw Paypal in Russia? How to open a virtual account in the US?</a></li>
<li><a href="../145186/index.html">Podcast "Notes on Qt" s01e05</a></li>
<li><a href="../145187/index.html">Cross platform work with strings in C ++</a></li>
<li><a href="../145189/index.html">Troubleshooting Apache Ports on Windows</a></li>
<li><a href="../145192/index.html">Protecting user rights. Company rating</a></li>
<li><a href="../145196/index.html">The correct announcement to the text or close the unclosed tags</a></li>
<li><a href="../145197/index.html">Instapaper is available for Android, $ 3</a></li>
<li><a href="../145198/index.html">The algorithm of parallel search for maximum, common substrings in two lines, and its implementation in C ++ (C ++ 11)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
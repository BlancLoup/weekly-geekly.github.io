<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>GTK + PHP application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many find it hard to believe, but not only govnokod and scripts can be written in PHP, but also small GUI applications. Small, because the topic is no...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>GTK + PHP application</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/281a5d6b/4b0343c5/87a0daef/b3f0797c.jpg" alt="image" align="left"><br>  Many find it hard to believe, but not only govnokod and scripts can be written in PHP, but also small GUI applications.  Small, because the topic is not very popular and poorly lit due to the fact that there are more convenient and powerful tools for development, respectively, the tools are quite raw.  Although for writing applications "for yourself" or course \ diploma is quite suitable. <br>  The article provides an example of creating a simple GTK + application in PHP. <br><a name="habracut"></a><br>  <a href="http://ru.wikipedia.org/wiki/GTK%252B">GTK +</a> is a cross-platform library of interface elements that is popular in Linux systems and has recently been used quite often in Windows. <br><br>  I will try to answer in advance the question: ‚ÄúWhy is it necessary, can I write it in Python?‚Äù.  Of course you can, but: <br>  1. It‚Äôs hard to believe, but there are people who know PHP well and they don‚Äôt have time to learn Python, but you need to write a GUI app. <br>  2. Writing in PHP works wherever there is PHP with the necessary libraries (Windows, Linux, MaxOS). <br><br><h4>  Let's start </h4><br>  Usually, to demonstrate the charms of a language or library, HelloWorld! Is written, but we will go a little further and write a calculator. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The whole process is quite simple and consists of two steps: <br>  1. Development of the interface in the Glade Interface Editor <br>  2. Develop an application using the interface created in the previous step. <br><br><h4>  Installation </h4><br>  Of course, it is not necessary to use Interface Builder to create an interface.  Glade file is xml, which you can write with your hands or you can create an interface directly in a PHP script.  But since the purpose of this article is to show the simplicity of creating applications, we will go the easy way and use Drag'n'Drop as the interface editor. <br><br>  You can download it here: <a href="http://glade.gnome.org/sources.html">http://glade.gnome.org/sources.html</a> <br>  Or: <pre><code class="bash hljs">[aptitude|yum] install glade</code> </pre> <br>  The PHP library that we will use only works with PHP 5.1 and higher, so we acquire it: <a href="http://php.net/downloads.php">http://php.net/downloads.php</a> <br><br>  By default, there is no GTK library in PHP, so it needs to be installed. <br>  Downloading: <a href="http://gtk.php.net/download.php">http://gtk.php.net/download.php</a> <br>  Install: <a href="http://gtk.php.net/manual/en/tutorials.installation.php">http://gtk.php.net/manual/en/tutorials.installation.php</a> <br>  For installation on Linux, it is better to pull the source from SVN.  Before configuration, install cairo-php: <br><pre> <code class="bash hljs">pecl install cairo-beta</code> </pre> <br>  If the configuration falls by an error: "` lt_if_append_uniq (lt_decl_varnames, ... "do in the folder php-gtk: <pre> <code class="bash hljs">cat /usr/share/aclocal/ltoptions.m4 /usr/share/aclocal/ltversion.m4 /usr/share/aclocal/ltsugar.m4 /usr/share/aclocal/lt~obsolete.m4 &gt;&gt; aclocal.m4</code> </pre> <br>  Then restart ./buildconf and ./configure <br><br><h4>  Interface </h4><br>  We will not invent any complicated features, we will make a simple interface. <br><img src="https://habrastorage.org/storage1/60acbb66/c4560f96/2b9b5aba/ea50dd37.png"><br>  First we create the Window from the Common tab, which we set Visible = true.  On the window we overtighten the Vertical Box divided into 3 regions.  In the upper region we place the Menu Bar, in the middle Text Entry, and in the lower Table (4x4) in which we create the buttons as in the figure above. <br>  Now we will write event handlers for the interface elements. <br>  For each button: <br><ol><li>  Click on the button </li><li>  Turn on the tabals Signals </li><li>  In the field ‚ÄúClicked‚Äù we write enterValue for buttons 0-9, performAction for operation buttons and clearCalc for ‚ÄúC‚Äù. </li><li>  In order for PHP to understand which button is pressed, we prescribe a Name for each of them, for example: <br>  "0": "input0" <br>  ... <br>  "9": "input9" <br>  "*": "Action_mul" <br>  "/": "Action_div" <br>  "+": "Action_add" <br>  "-": "action_min" <br>  "=": "Action_calc" <br>  "C": "action_clear" </li></ol><br>  And the final touch - exit from the application when clicking on File-&gt; Quit, for this we set the quit handler for the activate signal for this menu item. <br><br>  After that, we save the created form in the calc.glade file, in the LibGlade format, and put it in the folder with the future application. <br><br><h5>  Programming </h5><br>  Create a PHP file "calc.php" in which we write: <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $glade = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GladeXML(<span class="hljs-string"><span class="hljs-string">'calc.glade'</span></span>); Gtk::main();</code> </pre><br>  The first line loads the file with the interface, the second creates all the elements. <br><br>  Run and enjoy the form: <pre> <code class="bash hljs">php calc.php</code> </pre> <br>  Now you need to write the implementation of event handlers and the calculator itself. <br><br>  The event handlers that we described in the Glade Interface Editor are ordinary functions or methods of the PHP class.  At each handler, one argument is passed to the call - the object for which the handler is called.  For simplicity, the name of this object will be used as an identifier of the operation or the value that you need to enter. <br>  Create a class ‚ÄúCalc‚Äù which will contain event handlers and methods necessary for calculating: <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Calc</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $glade; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $firstParam = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $operation = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($glade)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;glade = $glade; } <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($operation)</span></span></span><span class="hljs-function"> </span></span>{ $secondParam = (float) <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;glade-&gt;get_widget(<span class="hljs-string"><span class="hljs-string">'entry1'</span></span>)-&gt;get_text(); $firstParam = (float) <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;firstParam; $result = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;operation) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'*'</span></span>: $result = $firstParam * $secondParam; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'/'</span></span>: $result = ($secondParam &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? $firstParam / $secondParam : <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'+'</span></span>: $result = $firstParam + $secondParam; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'-'</span></span>: $result = $firstParam - $secondParam; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;glade-&gt;get_widget(<span class="hljs-string"><span class="hljs-string">'entry1'</span></span>)-&gt;set_text($result); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;firstParam = $result; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;operation = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">performAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($obj)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;firstParam == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;firstParam = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;glade-&gt;get_widget(<span class="hljs-string"><span class="hljs-string">'entry1'</span></span>)-&gt;get_text(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;glade-&gt;get_widget(<span class="hljs-string"><span class="hljs-string">'entry1'</span></span>)-&gt;set_text(<span class="hljs-string"><span class="hljs-string">''</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;operation == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;operation = str_replace( <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'action_mul'</span></span>, <span class="hljs-string"><span class="hljs-string">'action_add'</span></span>, <span class="hljs-string"><span class="hljs-string">'action_min'</span></span>, <span class="hljs-string"><span class="hljs-string">'action_div'</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'*'</span></span>, <span class="hljs-string"><span class="hljs-string">'+'</span></span>, <span class="hljs-string"><span class="hljs-string">'-'</span></span>, <span class="hljs-string"><span class="hljs-string">'/'</span></span>), $obj-&gt;name ); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;glade-&gt;get_widget(<span class="hljs-string"><span class="hljs-string">'entry1'</span></span>)-&gt;set_text(<span class="hljs-string"><span class="hljs-string">''</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;calculate($obj-&gt;name); } } <span class="hljs-comment"><span class="hljs-comment">/*        */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enterValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($obj)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*       input0..input1,   "input"    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;glade-&gt;get_widget(<span class="hljs-string"><span class="hljs-string">'entry1'</span></span>)-&gt;set_text( <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;glade-&gt;get_widget(<span class="hljs-string"><span class="hljs-string">'entry1'</span></span>)-&gt;get_text(). str_replace(<span class="hljs-string"><span class="hljs-string">'input'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, $obj-&gt;name) ); } <span class="hljs-comment"><span class="hljs-comment">/*   ,        */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearCalc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($obj)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;firstParam = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;operation = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;glade-&gt;get_widget(<span class="hljs-string"><span class="hljs-string">'entry1'</span></span>)-&gt;set_text(<span class="hljs-string"><span class="hljs-string">''</span></span>); } <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">quit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>; } }</code> </pre><br>  Finally, we point out that all event handlers are stored in the Calc class: <br><pre> <code class="php hljs">$glade-&gt;signal_autoconnect_instance(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Calc($glade));</code> </pre> <br>  Well that's all. <br><pre> <code class="bash hljs">php calc.php</code> </pre> <br>  All code of the Github example: <a href="https://github.com/kooler/php-glade-example">https://github.com/kooler/php-glade-example</a> </div><p>Source: <a href="https://habr.com/ru/post/130496/">https://habr.com/ru/post/130496/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../130488/index.html">VeriSign requires more rights to control domain names</a></li>
<li><a href="../130490/index.html">Talk mode in Google Translate for Android now supports Russian language</a></li>
<li><a href="../130492/index.html">LG laptops - returned to the Ukrainian market</a></li>
<li><a href="../130494/index.html">How I tested samsung galaxy s 2</a></li>
<li><a href="../130495/index.html">How to perform ancestral methods in implementing prototype inheritance</a></li>
<li><a href="../130498/index.html">Firefox for Android will get the native interface of this OS</a></li>
<li><a href="../130499/index.html">Tovarix - product search service</a></li>
<li><a href="../130500/index.html">Sonim has released 3 new models of super-secure phones</a></li>
<li><a href="../130501/index.html">Active FreeBSD protection based on logs, sh and cron</a></li>
<li><a href="../130502/index.html">Development of LibreOffice for the web, Android and iOS has begun.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
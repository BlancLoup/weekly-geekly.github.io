<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>JavaFX Tower Defense Competition: Light Towers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After reading about the Tower Defense competition, I immediately had the idea to create a world of eternal darkness. 
 In order to at least see someth...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>JavaFX Tower Defense Competition: Light Towers</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/storage/habraeffect/ad/51/ad5198d695e6b6215cde9af3ca336e43.png">  After reading about the <a href="http://developers.sun.ru/konkurs/">Tower Defense</a> competition, I immediately had the idea to create a world of eternal darkness. <br>  In order to at least see something, you need to build a light tower to illuminate the creatures crawling past. <br><br>  Under the cat described the implementation of this idea in JavaFX. <a name="habracut"></a><br><br>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <br><h2>  Towers and shells </h2><br>  On <a href="http://developers.sun.ru/konkurs/whoare/2010-06-30-13-46-21">the</a> competition <a href="http://developers.sun.ru/konkurs/whoare/2010-06-30-13-46-21">website</a> you can download the initial engine and follow the instructions to describe your towers and shells. <br><br>  To begin with, we will create a light tower, in which we will redefine the rate of fire, the radius of destruction, and in the fire () method, we will specify the type of projectile being fired. <blockquote>  <font color="#000000"><font color="#003399">public</font></font> <font color="#000000"><font color="#003399">class</font></font> LightTower <font color="#000000"><font color="#003399">extends</font></font> Tower <font color="#009900">{</font> <br><br>  <font color="#003399">override</font> <font color="#003399">var</font> fireRate <font color="#339933">=</font> 10s <font color="#339933">;</font> <br>  <font color="#003399">override</font> <font color="#003399">var</font> fireRadius <font color="#339933">=</font> <font color="#cc66cc">100</font> <font color="#339933">;</font> <br><br>  <font color="#003399">override</font> <font color="#003399">function</font> fire <font color="#009900">(</font> start <font color="#339933">:</font> <font color="#003399">Point2D</font> , end <font color="#339933">:</font> <font color="#003399">Point2D</font> <font color="#009900">)</font> <font color="#339933">:</font> <font color="#003399">Void</font> <font color="#009900">{</font> <br>  LightBall <font color="#009900">{</font> field <font color="#339933">:</font> field damage <font color="#339933">:</font> damage start <font color="#339933">:</font> start end <font color="#339933">:</font> end <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br></blockquote>  Then we define a light projectile, in the explode () method of which we need to indicate what happens to the projectile in an explosion. <blockquote>  <font color="#000000"><font color="#003399">public</font></font> <font color="#000000"><font color="#003399">class</font></font> LightBall <font color="#000000"><font color="#003399">extends</font></font> Bullet <font color="#009900">{</font> <br><br>  <font color="#003399">override</font> <font color="#003399">var</font> damageRadius <font color="#339933">:</font> <font color="#003399">Number</font> <font color="#339933">=</font> <font color="#cc66cc">120</font> <font color="#339933">;</font> <br><br>  <font color="#003399">override</font> <font color="#003399">function</font> explode <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#666666">// explosion algorithm</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#009900">}</font> <br></blockquote><h2>  ShapeSubtract Component </h2><br>  JavaFX provides the ShapeSubtract component, which allows you to draw geometric shapes with clipped regions. <br><br>  All game space will be covered with a black square.  We will use a circle as the area illuminated by the light projectile. <table><tbody><tr><td><img src="https://habrastorage.org/storage/habraeffect/ad/28/ad28473a3232054cf25ad3d13eeed2c7.png"></td><td><blockquote>  <font color="#003399">ShapeSubtract</font> <font color="#009900">{</font> <br>  a <font color="#339933">:</font> <font color="#003399">Rectangle</font> <font color="#009900">{</font> width <font color="#339933">:</font> <font color="#cc66cc">200</font> height <font color="#339933">:</font> <font color="#cc66cc">200</font> fill <font color="#339933">:</font> <font color="#003399">Color</font> .  <font color="#006633">BLACK</font> <font color="#009900">}</font> <br>  b <font color="#339933">:</font> <font color="#003399">Circle</font> <font color="#009900">{</font> <br>  radius <font color="#339933">:</font> <font color="#cc66cc">75</font> <br>  centerX <font color="#339933">:</font> <font color="#cc66cc">100</font> <br>  centerY <font color="#339933">:</font> <font color="#cc66cc">100</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br></blockquote></td></tr></tbody></table>  To animate the illuminated area, we use the Timeline class, which will change the variable radius from its initial value to the final one.  We also <b>bind the</b> radius attribute of the circle with the variable radius using the <b>bind</b> operator. <br><blockquote>  <font color="#003399">var</font> radius <font color="#339933">=</font> <font color="#cc66cc">5.0</font> <font color="#339933">;</font> <br><br>  Timeline <font color="#009900">{</font> <br>  repeatCount <font color="#339933">:</font> Timeline.  <font color="#006633">INDEFINITE</font> <br>  keyFrames <font color="#339933">:</font> at <font color="#009900">(</font> 5s <font color="#009900">)</font> <font color="#009900">{</font> radius <font color="#339933">=&gt;</font> <font color="#cc66cc">75.0</font> tween Interpolator.  <font color="#006633">LINEAR</font> <font color="#009900">}</font> <br>  <font color="#009900">}</font> .  <font color="#006633">play</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#003399">ShapeSubtract</font> <font color="#009900">{</font> <br>  a <font color="#339933">:</font> <font color="#003399">Rectangle</font> <font color="#009900">{</font> width <font color="#339933">:</font> <font color="#cc66cc">200</font> height <font color="#339933">:</font> <font color="#cc66cc">200</font> fill <font color="#339933">:</font> <font color="#003399">Color</font> .  <font color="#006633">BLACK</font> <font color="#009900">}</font> <br>  b <font color="#339933">:</font> <font color="#003399">Circle</font> <font color="#009900">{</font> <br>  radius <font color="#339933">:</font> <b>bind</b> radius <br>  centerX <font color="#339933">:</font> <font color="#cc66cc">100</font> <br>  centerY <font color="#339933">:</font> <font color="#cc66cc">100</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br></blockquote><br>  True, in this case we will not get the expected effect.  Those.  the radius of the circle will change when the variable changes, the radius, but the subtraction of areas will occur only once at the very beginning. <br><br><img src="https://habrastorage.org/storage/habraeffect/5b/74/5b7482f6b0af552f68983d3c8f0e83c8.png"><br><br>  You can achieve the desired result by placing the <b>bind</b> operator before the subtracted circle.  In this case, we associate the subtracted shape with the expression on the right, and if any variable included in the expression changes, the <font color="#003399">ShapeSubtract</font> component will also change. <br><blockquote>  <font color="#003399">var</font> radius <font color="#339933">=</font> <font color="#cc66cc">5.0</font> <font color="#339933">;</font> <br><br>  Timeline <font color="#009900">{</font> <br>  repeatCount <font color="#339933">:</font> Timeline.  <font color="#006633">INDEFINITE</font> <br>  keyFrames <font color="#339933">:</font> at <font color="#009900">(</font> 5s <font color="#009900">)</font> <font color="#009900">{</font> radius <font color="#339933">=&gt;</font> <font color="#cc66cc">75.0</font> tween Interpolator.  <font color="#006633">LINEAR</font> <font color="#009900">}</font> <br>  <font color="#009900">}</font> .  <font color="#006633">play</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#003399">ShapeSubtract</font> <font color="#009900">{</font> <br>  a <font color="#339933">:</font> <font color="#003399">Rectangle</font> <font color="#009900">{</font> width <font color="#339933">:</font> <font color="#cc66cc">200</font> height <font color="#339933">:</font> <font color="#cc66cc">200</font> fill <font color="#339933">:</font> <font color="#003399">Color</font> .  <font color="#006633">BLACK</font> <font color="#009900">}</font> <br>  b <font color="#339933">:</font> <b>bind</b> <font color="#003399">Circle</font> <font color="#009900">{</font> <br>  radius <font color="#339933">:</font> radius <br>  centerX <font color="#339933">:</font> <font color="#cc66cc">100</font> <br>  centerY <font color="#339933">:</font> <font color="#cc66cc">100</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br></blockquote><br><img src="https://habrastorage.org/storage/habraeffect/de/74/de7463144b94bafeb345ab90cf86f597.png"><br><br><h2>  Rendering the illuminated area </h2><br>  Let's set the class LightElem, which will contain the attributes of the illuminated area.  When the projectile explodes, we will create a LightElem, set its coordinates and animate the radius of the illuminated area. <blockquote>  <font color="#000000"><font color="#003399">public</font></font> <font color="#000000"><font color="#003399">class</font></font> LightElem <font color="#009900">{</font> <br><br>  <font color="#000000"><font color="#003399">public</font></font> <font color="#003399">var</font> radius <font color="#339933">:</font> <font color="#003399">Number</font> <font color="#339933">;</font> <br>  <font color="#000000"><font color="#003399">public</font></font> <font color="#003399">var</font> centerX <font color="#339933">:</font> <font color="#003399">Number</font> <font color="#339933">;</font> <br>  <font color="#000000"><font color="#003399">public</font></font> <font color="#003399">var</font> centerY <font color="#339933">:</font> <font color="#003399">Number</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br></blockquote>  All graphics are defined in the Field class create () method. <br>  To draw the illuminated area, now you need to go through the sequence of LightElem elements and create circles that will be subtracted from the darkened area. <blockquote>  <font color="#000000"><font color="#003399">public</font></font> <font color="#000000"><font color="#003399">class</font></font> <font color="#003399">Field</font> <font color="#000000"><font color="#003399">extends</font></font> CustomNode <font color="#009900">{</font> <br><br>  <font color="#000000"><font color="#003399">public</font></font> <font color="#003399">var</font> lights <font color="#339933">:</font> LightElem <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">;</font> <br><br>  <font color="#003399">override</font> <font color="#003399">function</font> create <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#003399">Group</font> <font color="#009900">{</font> <br>  content <font color="#339933">:</font> <font color="#009900">[</font> <br>  <font color="#666666">// Other components</font> <br>  <font color="#003399">ShapeSubtract</font> <font color="#009900">{</font> <br>  a <font color="#339933">:</font> <font color="#003399">Rectangle</font> <font color="#009900">{</font> width <font color="#339933">:</font> <font color="#cc66cc">550</font> height <font color="#339933">:</font> <font color="#cc66cc">550</font> fill <font color="#339933">:</font> <font color="#003399">Color</font> .  <font color="#006633">BLACK</font> <font color="#009900">}</font> <br>  b <font color="#339933">:</font> <b>bind</b> <font color="#000000">for</font> <font color="#009900">(</font> elem in lights <font color="#009900">)</font> <font color="#003399">Circle</font> <font color="#009900">{</font> <br>  centerX <font color="#339933">:</font> elem.  <font color="#006633">centerX</font> <br>  centerY <font color="#339933">:</font> elem.  <font color="#006633">centerY</font> <br>  radius <font color="#339933">:</font> elem.  <font color="#006633">radius</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">]</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br></blockquote></div><p>Source: <a href="https://habr.com/ru/post/104220/">https://habr.com/ru/post/104220/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../104214/index.html">Augmented Reality: How I Searched for the Berlin Wall</a></li>
<li><a href="../104216/index.html">A game in which you need to design the work of traffic lights</a></li>
<li><a href="../104217/index.html">MySQL in tmpfs</a></li>
<li><a href="../104218/index.html">Guessing on the noise of information</a></li>
<li><a href="../104219/index.html">Evaluation of the complexity of the algorithms</a></li>
<li><a href="../104221/index.html">On the positivity of Facebook and the disadvantages of social services</a></li>
<li><a href="../104224/index.html">MODx - a simple file archive for FileDownload v2.6. Improving the system of editing file descriptions</a></li>
<li><a href="../104227/index.html">Collective travel together is more profitable</a></li>
<li><a href="../104229/index.html">Loading classes in java. Practice</a></li>
<li><a href="../104231/index.html">Integer and int</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Core Data in iOS 5: how to load and import existing data</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello Habr. I offer you a translation of the article, through which I became apparent the main features of Core Data. 

 Note: 
 A member of the iOS t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Core Data in iOS 5: how to load and import existing data</h1><div class="post__text post__text-html js-mediator-article">  Hello Habr.  I offer you a translation of the article, through which I became apparent the main features of Core Data. <br><br>  <b>Note:</b> <br>  A member of the iOS tutorial team, Adam Burkepile, kindly updated the Core Data series in iOS 5. - In this post, I‚Äôll tell you a little about this. <br><br><img src="https://habrastorage.org/storage2/b7b/fcf/f8a/b7bfcff8a71f0df5eddcc43e619a1b77.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This tutorial has been completely rewritten to show a more elegant way to preload data using only your iPhone‚Äôs Core Date. <br><a name="habracut"></a><br>  Before you start, download the <a href="https://github.com/acburk/CoreData-Tutorial-1/zipball/master/">project</a> . <br><br>  <b>Preload / import existing data</b> <br><br>  First, we preload data into Core Data.  There are two popular solutions to this problem: <br><br>  1. <u>Fill in the Core Date when starting from an external source</u> .  The application may notice that the database has not yet been imported, and begins to read data from an external source (such as a SQLite database or XML file) and then begin to insert data into Core Data. <br><br>  2. <u>Provide a pre-populated SQLite database.</u>  To do this, we will allow Core Data to create a model-based database structure for us, and then we will fill our database with a utility program.  The utility can be our Mac or another iPhone program that uses Core Data to populate the database through the Core Data API, or some other program that populates the SQLite database directly.  Once the database is full, include it along with the application and force the application to use it as the default database, if there is no other database already. <br><br>  Next, I will show you how you can make a simple utility application that will create a preloaded Core Data database that you can use in your application. <br><br>  <b>Start</b> <br><br>  The main advantage of the method we are going to use is that Core Data on iOS is the same Core Data on OS X, and they can use the same models and classes. <br><br>  This means that we can write a simple console application on OS X, associate this application with Core Data data storage, and then use it to transfer data from the storage to the data of our project on iOS.  Neither is it wonderful ?! <br><br>  Let's check it out.  To do this, create a console application on Mac to preload our data.  Open Xcode and create a new project, and select the Mac OS X \ Application \ Command Line Tool template. <br><img src="https://habrastorage.org/storage2/522/7ba/74f/5227ba74f56def00f7c8accdfe154784.png"><br><br>  Enter ‚ÄúCoreDataTutorial2‚Äù as the project name, change the type to ‚ÄúCore Data‚Äù and to enable ‚ÄúUse Automatic Reference Counting‚Äù. <br><img src="https://habrastorage.org/storage2/f31/dd7/323/f31dd732380f5271308dacf6415fac92.png"><br><br>  Finish creating the project, then select ‚ÄúCoreDataTutorial2.xcdatamodeld‚Äù and delete it.  Select ‚ÄúMove to Trash‚Äù when asked. <br><img src="https://habrastorage.org/storage2/31d/65c/ed9/31d65ced91f7de20e37afd965077e570.png"><br><br>  Then enter the directory from the archive that downloaded the files and find the following files: <br><br>  - FailedBankCD.xcdatamodeld <br>  - FailedBankInfo.h <br>  - FailedBankInfo.m <br>  - FailedBankDetails.h <br>  - FailedBankDetails.m <br><br>  Copy these files into the directory of this project, and then drag and drop them into Xcode. <br><img src="https://habrastorage.org/storage2/711/290/683/711290683a2f48f6f75a1674e55a23f3.png"><br><img src="https://habrastorage.org/storage2/896/183/bf5/896183bf529eb15eb88946deba560404.png"><br><br>  Check that the ‚ÄúCopy items into destination group's folder (if needed)‚Äù checkbox is enabled, if not, then make sure to check the ‚ÄúCoreDataTutorial2‚Äù checkbox in ‚ÄúAdd to target‚Äù. <br><img src="https://habrastorage.org/storage2/def/fdc/8f4/deffdc8f4f5e1fb6bdd07b969ac404b4.png"><br><br>  Select main.m.  You will notice that we have chosen Core Data as the base data type.  Now we need to make some changes to use our class models from the iOS project and generate Core Data objects. <br><br>  In managedObjectModel (), replace the method: <br><pre><code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *path = [[[<span class="hljs-built_in"><span class="hljs-built_in">NSProcessInfo</span></span> processInfo] arguments] objectAtIndex:<span class="hljs-number"><span class="hljs-number">0</span></span>]; path = [path stringByDeletingPathExtension];</code> </pre> <br>  on <br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *path = <span class="hljs-string"><span class="hljs-string">@"FailedBankCD"</span></span>;</code> </pre> <br>  This points to the FailedBankCD.xdatamodeld application, which we added instead of CoreDataTutorial2.xdatamodeld, which we deleted at the beginning. <br><br>  Compile and run, and check that you have no errors. <br><br>  If you created and executed it earlier, you will get a model mismatch error. <br>  To remove sqlite db, select the option (alt) and go to the menu and select ‚ÄúProducts‚Äù and ‚ÄúClean Build Folder ...‚Äù. <br><br>  If you see an error like this: <br><pre> <code class="erlang hljs">NSInvalidArgumentException', reason: 'Cannot create an NSPersistentStoreCoordinator with a nil model'</code> </pre><br>  This is because the code is looking for the 'momd' file (the file where there is the required version of Core Data), <br>  but if your model does not have the correct version, it will be saved as a simple 'mom'.  As this article explains, the fastest commit should replace the string in managedObjectModel () with this: <br><br><pre> <code class="objectivec hljs"> <span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *modelURL = [<span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> fileURLWithPath:[path stringByAppendingPathExtension:<span class="hljs-string"><span class="hljs-string">@"mom"</span></span>]];</code> </pre> <br><br>  Now it should compile and work well (no output yet). <br><br>  <b>Data import</b> <br><br>  For our example, we will import data from a JSON file.  In your applications, you can import data from various formats, <br>  but the central idea shown here (using a Mac application to read the file and load it into Core Data) will still apply. <br><br>  Let's try it out!  Right click on the project and select ‚ÄúNew File‚Äù.  Select the categories ‚ÄúOther‚Äù and ‚ÄúEmpty‚Äù. <br><img src="https://habrastorage.org/storage2/5d8/e62/8b6/5d8e628b617c64cf590e8b457611ff45.png"><br><br>  Name the file ‚ÄúBanks.json‚Äù and make sure that you include the file in the target ‚ÄúCoreDataTutorial2‚Äù. <br><br><img src="https://habrastorage.org/storage2/f41/af1/711/f41af1711bb6734555242dba4f3f5732.png"><br><br>  Insert the following into the new file: <br><pre> <code class="objectivec hljs">[{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Bank1"</span></span>, <span class="hljs-string"><span class="hljs-string">"city"</span></span>: <span class="hljs-string"><span class="hljs-string">"City1"</span></span>, <span class="hljs-string"><span class="hljs-string">"state"</span></span>: <span class="hljs-string"><span class="hljs-string">"State1"</span></span>, <span class="hljs-string"><span class="hljs-string">"zip"</span></span>: <span class="hljs-number"><span class="hljs-number">11111</span></span>, <span class="hljs-string"><span class="hljs-string">"closeDate"</span></span>: <span class="hljs-string"><span class="hljs-string">"1/1/11"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Bank2"</span></span>, <span class="hljs-string"><span class="hljs-string">"city"</span></span>: <span class="hljs-string"><span class="hljs-string">"City2"</span></span>, <span class="hljs-string"><span class="hljs-string">"state"</span></span>: <span class="hljs-string"><span class="hljs-string">"State2"</span></span>, <span class="hljs-string"><span class="hljs-string">"zip"</span></span>: <span class="hljs-number"><span class="hljs-number">22222</span></span>, <span class="hljs-string"><span class="hljs-string">"closeDate"</span></span>: <span class="hljs-string"><span class="hljs-string">"2/2/12"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Bank3"</span></span>, <span class="hljs-string"><span class="hljs-string">"city"</span></span>: <span class="hljs-string"><span class="hljs-string">"City3"</span></span>, <span class="hljs-string"><span class="hljs-string">"state"</span></span>: <span class="hljs-string"><span class="hljs-string">"State3"</span></span>, <span class="hljs-string"><span class="hljs-string">"zip"</span></span>: <span class="hljs-number"><span class="hljs-number">33333</span></span>, <span class="hljs-string"><span class="hljs-string">"closeDate"</span></span>: <span class="hljs-string"><span class="hljs-string">"3/3/13"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Bank4"</span></span>, <span class="hljs-string"><span class="hljs-string">"city"</span></span>: <span class="hljs-string"><span class="hljs-string">"City4"</span></span>, <span class="hljs-string"><span class="hljs-string">"state"</span></span>: <span class="hljs-string"><span class="hljs-string">"State4"</span></span>, <span class="hljs-string"><span class="hljs-string">"zip"</span></span>: <span class="hljs-number"><span class="hljs-number">44444</span></span>, <span class="hljs-string"><span class="hljs-string">"closeDate"</span></span>: <span class="hljs-string"><span class="hljs-string">"4/4/14"</span></span> } ]</code> </pre> <br><br>  This is a JSON encoded string containing 4 dictionaries in an array.  Each dictionary has a couple of properties that correspond to the properties that we have in our FailedBankInfo / FailedBankDetails objects. <br><br>  If you don't understand how JSON works, <a href="http://www.raywenderlich.com/5492/working-with-json-in-ios-5/">check out this guide</a> . <br><br>  Next, we need to tell the application to copy this file into dictory products.  Select the project file, then target ‚ÄúCoreDataTutorial2‚Äù.  Select the ‚ÄúBuild Phases‚Äù tab <br>  click, ‚ÄúAdd Build Phase‚Äù, and select, ‚ÄúAdd Copy Files‚Äù.  Change destintion to ‚ÄúProducts Directory‚Äù.  Finally, drag the ‚ÄúBanks.json‚Äù file into the ‚ÄúAdd files‚Äù section. <br><img src="https://habrastorage.org/storage2/0d9/be9/a13/0d9be9a13ea00bf78a78392d17932e79.png"><br><br>  Now we have an application that runs, initializes Core Data using our FailedBank model, and there are classes that have a data source with the Banks.json file.  Now we have: <br><br>  - Download JSON file <br>  - JSON conversion to Objective-C array <br>  - Loop through an array that creates a managed object for each element <br>  - Saving objects in Core Data! <br><br>  Get coding!  Open main.m and add the following code to the main function (at the end of the autoreleasepool block): <br><pre> <code class="objectivec hljs"> <span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* err = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>* dataPath = [[<span class="hljs-built_in"><span class="hljs-built_in">NSBundle</span></span> mainBundle] pathForResource:<span class="hljs-string"><span class="hljs-string">@"Banks"</span></span> ofType:<span class="hljs-string"><span class="hljs-string">@"json"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* Banks = [<span class="hljs-built_in"><span class="hljs-built_in">NSJSONSerialization</span></span> JSONObjectWithData:[<span class="hljs-built_in"><span class="hljs-built_in">NSData</span></span> dataWithContentsOfFile:dataPath] options:kNilOptions error:&amp;err]; <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Imported Banks: %@"</span></span>, Banks);</code> </pre> <br><br>  So your main function should now look like this: <br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> main(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> argc, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> * argv[]) { <span class="hljs-keyword"><span class="hljs-keyword">@autoreleasepool</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Create the managed object context NSManagedObjectContext *context = managedObjectContext(); // Custom code here... // Save the managed object context NSError *error = nil; if (![context save:&amp;error]) { NSLog(@"Error while saving %@", ([error localizedDescription] != nil) ? [error localizedDescription] : @"Unknown Error"); exit(1); } NSError* err = nil; NSString* dataPath = [[NSBundle mainBundle] pathForResource:@"Banks" ofType:@"json"]; NSArray* Banks = [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfFile:dataPath] options:kNilOptions error:&amp;err]; NSLog(@"Imported Banks: %@", Banks); } return 0; }</span></span></code> </pre> <br><br>  Now uses the new NSJSONSerialization built-in API to easily convert a JSON document to basic types such as NSArray, <br>  NSDictionary, etc.  To learn more, <a href="http://www.raywenderlich.com/5492/working-with-json-in-ios-5/">read this guide.</a> <br><br>  Let us run the application: <br><pre> <code class="objectivec hljs"><span class="hljs-number"><span class="hljs-number">2012</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-14</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">01</span></span>:<span class="hljs-number"><span class="hljs-number">34.995</span></span> CoreDataTutorial2[<span class="hljs-number"><span class="hljs-number">18388</span></span>:<span class="hljs-number"><span class="hljs-number">403</span></span>] Imported Banks: ( { city = City1; closeDate = <span class="hljs-string"><span class="hljs-string">"1/1/11"</span></span>; name = Bank1; state = State1; zip = <span class="hljs-number"><span class="hljs-number">11111</span></span>; }, { city = City2; closeDate = <span class="hljs-string"><span class="hljs-string">"2/2/12"</span></span>; name = Bank2; state = State2; zip = <span class="hljs-number"><span class="hljs-number">22222</span></span>; }, { city = City3; closeDate = <span class="hljs-string"><span class="hljs-string">"3/3/13"</span></span>; name = Bank3; state = State3; zip = <span class="hljs-number"><span class="hljs-number">33333</span></span>; }, { city = City4; closeDate = <span class="hljs-string"><span class="hljs-string">"4/4/14"</span></span>; name = Bank4; state = State4; zip = <span class="hljs-number"><span class="hljs-number">44444</span></span>; } )</code> </pre> <br><br>  So we see that we now have data in Objective-C objects, <br>  and that we can easily manage them.  Now we can easily import these objects into CoreData. <br><br>  First, add some files to the top of the file: <br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"FailedBankInfo.h"</span></span></span><span class="hljs-meta"> #import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"FailedBankDetails.h"</span></span></span></span></code> </pre> <br>  Then add the following code, which you just added earlier: <br><br><pre> <code class="objectivec hljs">[Banks enumerateObjectsUsingBlock:^(<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> obj, <span class="hljs-built_in"><span class="hljs-built_in">NSUInteger</span></span> idx, <span class="hljs-built_in"><span class="hljs-built_in">BOOL</span></span> *stop) { FailedBankInfo *failedBankInfo = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> insertNewObjectForEntityForName:<span class="hljs-string"><span class="hljs-string">@"FailedBankInfo"</span></span> inManagedObjectContext:context]; failedBankInfo.name = [obj objectForKey:<span class="hljs-string"><span class="hljs-string">@"name"</span></span>]; failedBankInfo.city = [obj objectForKey:<span class="hljs-string"><span class="hljs-string">@"city"</span></span>]; failedBankInfo.state = [obj objectForKey:<span class="hljs-string"><span class="hljs-string">@"state"</span></span>]; FailedBankDetails *failedBankDetails = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> insertNewObjectForEntityForName:<span class="hljs-string"><span class="hljs-string">@"FailedBankDetails"</span></span> inManagedObjectContext:context]; failedBankDetails.closeDate = [<span class="hljs-built_in"><span class="hljs-built_in">NSDate</span></span> dateWithString:[obj objectForKey:<span class="hljs-string"><span class="hljs-string">@"closeDate"</span></span>]]; failedBankDetails.updateDate = [<span class="hljs-built_in"><span class="hljs-built_in">NSDate</span></span> date]; failedBankDetails.zip = [obj objectForKey:<span class="hljs-string"><span class="hljs-string">@"zip"</span></span>]; failedBankDetails.info = failedBankInfo; failedBankInfo.details = failedBankDetails; <span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span> *error; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (![context save:&amp;error]) { <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Whoops, couldn't save: %@"</span></span>, [error localizedDescription]); } }]; <span class="hljs-comment"><span class="hljs-comment">// Test listing all FailedBankInfos from the store NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init]; NSEntityDescription *entity = [NSEntityDescription entityForName:@"FailedBankInfo" inManagedObjectContext:context]; [fetchRequest setEntity:entity]; NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&amp;error]; for (FailedBankInfo *info in fetchedObjects) { NSLog(@"Name: %@", info.name); FailedBankDetails *details = info.details; NSLog(@"Zip: %@", details.zip); }</span></span></code> </pre> <br><br>  We use the enumerateObjectsUsingBlock: method to cycle through an array of banks and enter one bank and keep the context.  Then we issue a sample request and list all the banks. <br><pre> <code class="objectivec hljs"><span class="hljs-number"><span class="hljs-number">2012</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-14</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">44.149</span></span> CoreDataTutorial2[<span class="hljs-number"><span class="hljs-number">18484</span></span>:<span class="hljs-number"><span class="hljs-number">403</span></span>] Name: Bank1 <span class="hljs-number"><span class="hljs-number">2012</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-14</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">44.150</span></span> CoreDataTutorial2[<span class="hljs-number"><span class="hljs-number">18484</span></span>:<span class="hljs-number"><span class="hljs-number">403</span></span>] Zip: <span class="hljs-number"><span class="hljs-number">11111</span></span> <span class="hljs-number"><span class="hljs-number">2012</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-14</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">44.150</span></span> CoreDataTutorial2[<span class="hljs-number"><span class="hljs-number">18484</span></span>:<span class="hljs-number"><span class="hljs-number">403</span></span>] Name: Bank2 <span class="hljs-number"><span class="hljs-number">2012</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-14</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">44.151</span></span> CoreDataTutorial2[<span class="hljs-number"><span class="hljs-number">18484</span></span>:<span class="hljs-number"><span class="hljs-number">403</span></span>] Zip: <span class="hljs-number"><span class="hljs-number">22222</span></span> <span class="hljs-number"><span class="hljs-number">2012</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-14</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">44.152</span></span> CoreDataTutorial2[<span class="hljs-number"><span class="hljs-number">18484</span></span>:<span class="hljs-number"><span class="hljs-number">403</span></span>] Name: Bank3 <span class="hljs-number"><span class="hljs-number">2012</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-14</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">44.152</span></span> CoreDataTutorial2[<span class="hljs-number"><span class="hljs-number">18484</span></span>:<span class="hljs-number"><span class="hljs-number">403</span></span>] Zip: <span class="hljs-number"><span class="hljs-number">33333</span></span> <span class="hljs-number"><span class="hljs-number">2012</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-14</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">44.153</span></span> CoreDataTutorial2[<span class="hljs-number"><span class="hljs-number">18484</span></span>:<span class="hljs-number"><span class="hljs-number">403</span></span>] Name: Bank4 <span class="hljs-number"><span class="hljs-number">2012</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span><span class="hljs-number"><span class="hljs-number">-14</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">44.153</span></span> CoreDataTutorial2[<span class="hljs-number"><span class="hljs-number">18484</span></span>:<span class="hljs-number"><span class="hljs-number">403</span></span>] Zip: <span class="hljs-number"><span class="hljs-number">44444</span></span></code> </pre> <br>  Ta-da!  This is your Core Date data.  The capturing part is you, you can fully customize the way data enters.  Instead of a small static json file, <br>  which we used, you could use many pairs of larger / a json files, xml file, export the spreadsheet file as a CSV file.  The possibilities are really endless. <br><br>  <b>‚ÄúDoctor, what you needed in Xcode‚Äù</b> <br><br>  Now we do brain surgery.  We have to take the sqlite database we just generated in the OS X applicaiton console and transplant it into an iPhone application. <br>  The easiest way to find a sqlite database is to right-click on the CoreDataTutorial2 product and select ‚ÄúShow in Finder‚Äù. <br><img src="https://habrastorage.org/storage2/2ba/a29/4a9/2baa294a9399741b8c78ff542a04c47e.png"><br><br>  A new Finder window will now open where the project has been developed.  Here, you can see four files: <br><br>  - Banks.json - json bank information file <br>  - CoreDataTutorial2 - This application <br>  - FailedBankCD.momd (or only .com) - this is the compiled version of the Managed Object Model (FailedBankCD.xdatamodeld) <br>  - CoreDataTutorial2.sqlite - sqlite database generated by the application. <br><img src="https://habrastorage.org/storage2/321/feb/602/321feb6026970ae111083e10e7baf431.png"><br><br>  This ‚ÄúCoreDataTutorial2.sqlite‚Äù file is the juicey bit we need.  Copy this file to the project directory from the <a href="https://github.com/acburk/CoreData-Tutorial-1/zipball/master/">tutorial 1.</a> <br><img src="https://habrastorage.org/storage2/ec2/a9e/ea4/ec2a9eea485b4c6840bf3bd6f46b0e33.png"><br><br>  Drag the ‚ÄúCoreDataTutorial2.sqlite‚Äù file from the Finder to the Xcode project (‚ÄúCopy items into destination group's folder (if needed)‚Äù is NOT checked, but ‚ÄúAdd to targets‚Äù is checked for ‚ÄúFailedBanksCD‚Äù). <br><img src="https://habrastorage.org/storage2/06c/2fe/f80/06c2fef80506cd19f16a337fd25d1893.png"><br><img src="https://habrastorage.org/storage2/fa9/16e/8da/fa916e8daf7d24046217ed232e0f17e8.png"><br><br>  Finally open ‚ÄúFBCDAppDelegate.m‚Äù.  Scroll down to the persistentStoreCoordinator method.  Right under <pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *storeURL = [[[[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> app... line, add:</code> </pre> <br><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (![[<span class="hljs-built_in"><span class="hljs-built_in">NSFileManager</span></span> defaultManager] fileExistsAtPath:[storeURL path]]) { <span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *preloadURL = [<span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> fileURLWithPath:[[<span class="hljs-built_in"><span class="hljs-built_in">NSBundle</span></span> mainBundle] pathForResource:<span class="hljs-string"><span class="hljs-string">@"CoreDataTutorial2"</span></span> ofType:<span class="hljs-string"><span class="hljs-string">@"sqlite"</span></span>]]; <span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* err = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (![[<span class="hljs-built_in"><span class="hljs-built_in">NSFileManager</span></span> defaultManager] copyItemAtURL:preloadURL toURL:storeURL error:&amp;err]) { <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Oops, could copy preloaded data"</span></span>); } }</code> </pre> <br><br>  This is a code check to see if the sqlite database already existed for this application.  If it does not exist, then a path is searched for the previously loaded sqlite database, <br>  which we downloaded and try to copy the database to the path for a normal dB application.  IT THAT SIMPLE!  Run it.  It must be something like this: <br><img src="https://habrastorage.org/storage2/aa5/d93/630/aa5d93630f35a729175e29cc7d6cb629.png"><br><br>  That's all.  Thanks to all. </div><p>Source: <a href="https://habr.com/ru/post/149867/">https://habr.com/ru/post/149867/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149862/index.html">Latin America on the side of Ecuador</a></li>
<li><a href="../149863/index.html">A selection of CSS3 generators to simplify front-end development</a></li>
<li><a href="../149864/index.html">Menu with smooth color inversion</a></li>
<li><a href="../149865/index.html">DVR AdvoCam FD3, a detailed review</a></li>
<li><a href="../149866/index.html">Future WinRT or Going Native 2.0</a></li>
<li><a href="../149868/index.html">Ubuntu One, we get 20GB for free</a></li>
<li><a href="../149869/index.html">The story of one "hack" or "forced" restoration of Navigon with reference to Android smartphone</a></li>
<li><a href="../149870/index.html">Google is working on the possibility of Android updates without the participation of manufacturers</a></li>
<li><a href="../149871/index.html">Xperia SL. Sony's Next Generation Smartphone</a></li>
<li><a href="../149872/index.html">Overview of JS frameworks. Journey through the jungle javascript MVC. Part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
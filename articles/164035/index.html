<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android: Quick control menu</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Anyone wishing to use the menu from the browser and the new camera 



 welcome under cat. 



 Prehistory 
 While working on one of the applications,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android: Quick control menu</h1><div class="post__text post__text-html js-mediator-article">  Anyone wishing to use the menu from the browser and the new camera <br><br><img src="https://habrastorage.org/storage2/e1b/695/39d/e1b69539de3d050673b2e38f28225164.png" alt="camera_sample"><img src="https://habrastorage.org/storage2/66e/87b/bde/66e87bbde17035ac626dedd2084b30fa.png" alt="browser_sample"><br><br>  welcome under cat. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><h5>  Prehistory </h5><br>  While working on one of the applications, the question was how to make a menu for the user.  Having played enough with the Browser application for ICS, it was decided to use its optional component PieMenu.  In another project, there was a need for a menu that not only appears nicely, but also knows how to do it in an arbitrary place. <br>  For me, it remains a big mystery why the menu data was not added to the API: quite a large number of people like these menus, and the developers would not need to reinvent the wheel. <br><br><h5>  Sources </h5><br>  So, my path lay on the AOSP (Android Open Source Project).  The search for application data source was a success.  Both versions of the menu were taken from the master branch. <br><br><h5>  Modification of the side menu </h5><br><img src="https://habrastorage.org/storage2/556/b5a/0fa/556b5a0fa3345c916604b504d54fa82c.png" alt="multi-level pie" align="left">  Further, all bindings to the application were removed: fields, methods, listeners, etc.  (and the code is really very connected with the application components, i.e. it is trivial to take and declare an object not work).  For ease of use, the side menu has added the ability to install separate Listeners on different menu items, adding <code>Item</code> 's from the <code>List</code> .  In the initial implementation, the level parameter in the constructor did not work at all.  He is responsible for the number of the ring in the menu, where the 1st ring with the minimum radius, and with increasing level the radius increases.  After studying the code, it turned out that <code>Path</code> , which draws the background for the icon, was reassigned for each new ring in the drawing method, which made it impossible to use the multi-level menu.  This deficiency has been eliminated. <br>  This menu supports sub-menu display.  From the code side, it looks like adding an item to another <code>Item</code> . <br>  <i><b>Important point</b></i> : set the number of submenus for each item'a coinciding with any ring.  For example, you have 3 item in the first ring and 2 in the second.  Then on the item'a submenu of the 1st ring, you can put either 2 elements (since only 2 positions will remain during deployment), or 2 elements of the 2nd ring (since they can be completely replaced).  Initially, the code in violation of this condition went to the Apostle Peter and complained that he was forced to do terrible things.  However, now you can experiment with how the code will behave without fear of Exception. <br><br><h5>  PieControl </h5><br><img align="right" src="https://habrastorage.org/storage2/66e/87b/bde/66e87bbde17035ac626dedd2084b30fa.png" alt="browser_sample">  This class allows you to implement a side menu. <br>  Let's declare the successor of this class and override the methods of <code>populateMenu()</code> .  I also advise you to add <code>setListeners()</code> for conveniently installing Listener clicks.  The <code>PieItem</code> element <code>PieItem</code> created using <code>makeItem()</code> .  As parameters, we specify the resource icon and level (ring number).  Then we create an object of our new class, bind it to the frame via <code>attachToContainer()</code> and install the Listeners by calling the <code>setListeners()</code> method. <br><br><div class="spoiler">  <b class="spoiler_title">Heir example:</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestMenu</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PieControl</span></span></span><span class="hljs-class"> </span></span>{ List&lt;PieItem&gt; plus_sub; List&lt;PieItem&gt; minus_sub; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestMenu</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Activity activity)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(activity); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">populateMenu</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ PieItem plus = makeItem(android.R.drawable.ic_input_add,<span class="hljs-number"><span class="hljs-number">1</span></span>); { plus_sub = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;PieItem&gt;(<span class="hljs-number"><span class="hljs-number">2</span></span>); plus_sub.add(makeItem(android.R.drawable.ic_input_add,<span class="hljs-number"><span class="hljs-number">2</span></span>)); plus_sub.add(makeItem(android.R.drawable.ic_input_add, <span class="hljs-number"><span class="hljs-number">2</span></span>)); plus.addItems(plus_sub); } PieItem minus = makeItem(android.R.drawable.ic_menu_preferences,<span class="hljs-number"><span class="hljs-number">1</span></span>); { minus_sub = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;PieItem&gt;(<span class="hljs-number"><span class="hljs-number">2</span></span>); minus_sub.add(makeItem(android.R.drawable.ic_menu_preferences,<span class="hljs-number"><span class="hljs-number">1</span></span>)); minus_sub.add(makeItem(android.R.drawable.ic_menu_preferences, <span class="hljs-number"><span class="hljs-number">1</span></span>)); minus.addItems(minus_sub); } PieItem close = makeItem(android.R.drawable.ic_menu_close_clear_cancel,<span class="hljs-number"><span class="hljs-number">1</span></span>); mPie.addItem(plus); mPie.addItem(minus); mPie.addItem(close); PieItem level2_0 = makeItem(android.R.drawable.ic_menu_report_image, <span class="hljs-number"><span class="hljs-number">2</span></span>); mPie.addItem(level2_0); PieItem level2_1 = makeItem(android.R.drawable.ic_media_next, <span class="hljs-number"><span class="hljs-number">2</span></span>); mPie.addItem(level2_1); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setListeners</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setClickListener(plus_sub.get(<span class="hljs-number"><span class="hljs-number">0</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View view)</span></span></span><span class="hljs-function"> </span></span>{ Toast.makeText(getApplicationContext(),<span class="hljs-string"><span class="hljs-string">"Clicked plus 1"</span></span>, Toast.LENGTH_SHORT).show(); } }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setClickListener(plus_sub.get(<span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View view)</span></span></span><span class="hljs-function"> </span></span>{ Toast.makeText(getApplicationContext(),<span class="hljs-string"><span class="hljs-string">"Clicked plus 2"</span></span>, Toast.LENGTH_SHORT).show(); } }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setClickListener(minus_sub.get(<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View view)</span></span></span><span class="hljs-function"> </span></span>{ Toast.makeText(getApplicationContext(),<span class="hljs-string"><span class="hljs-string">"Clicked minus 1"</span></span>, Toast.LENGTH_SHORT).show(); } }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setClickListener(minus_sub.get(<span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View view)</span></span></span><span class="hljs-function"> </span></span>{ Toast.makeText(getApplicationContext(),<span class="hljs-string"><span class="hljs-string">"Clicked minus 2"</span></span>, Toast.LENGTH_SHORT).show(); } }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setClickListener(close, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View view)</span></span></span><span class="hljs-function"> </span></span>{ finish(); } }); } }</code> </pre></div></div><br><br><div class="spoiler">  <b class="spoiler_title">Example of declaring a menu:</b> <div class="spoiler_text"><pre> <code class="java hljs">TestMenu testMenu = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TestMenu(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); testMenu.attachToContainer(some_container); testMenu.setListeners();</code> </pre><br></div></div><br><br><h5>  PieRenderer </h5><br><img align="left" src="https://habrastorage.org/storage2/e1b/695/39d/e1b69539de3d050673b2e38f28225164.png" alt="camera_sample">  This class allows you to implement a circular menu from the Camera application.  To use it, in my opinion, is much easier than PieControl.  Conceptually, this menu is different from the sidebar: you can attach it not to any <code>ViewGroup</code> heirs, but only to a special <code>RenderOverlay</code> (which is actually a regular <code>FrameLayout</code> with a small set of additional methods, but this is inner workings).  To <code>RenderOverlay</code> you can bind objects of the <code>Renderer</code> type, the heir of which is <code>PieRenderer</code> .  We need it to draw the menu.  We also need the <code>PieController</code> class to add items to the menu.  So let's get started: <br>  Create a <code>PieRenderer</code> object, a <code>PieController</code> object, menu items using the makeItem method in <code>PieController</code> .  Add menu items to <code>PieRenderer</code> via addItem.  Then we create the <code>RenderOverlay</code> object (or find it via <code>findViewById</code> , if you like to define everything in xml).  Add <code>PieRendere</code> to <code>RenderOverlay</code> via <code>addRenderer</code> .  Now the final touch: in <code>onTouchEvent</code> send an event to the <code>PieRenderer</code> handler <code>PieRenderer</code> <br><br><div class="spoiler">  <b class="spoiler_title">Sample Activity Code:</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> FLOAT_PI_DIVIDED_BY_TWO = (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>) Math.PI / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sweep = FLOAT_PI_DIVIDED_BY_TWO / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PieRenderer pieRenderer; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); requestWindowFeature(Window.FEATURE_NO_TITLE); setContentView(R.layout.main); pieRenderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PieRenderer(getApplicationContext()); PieController pieController = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PieController(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, pieRenderer); RenderOverlay renderOverlay = (RenderOverlay) findViewById(R.id.render_overlay); PieItem item0 = pieController.makeItem(android.R.drawable.arrow_up_float); item0.setFixedSlice(FLOAT_PI_DIVIDED_BY_TWO, sweep); item0.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PieItem.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PieItem item)</span></span></span><span class="hljs-function"> </span></span>{ Toast.makeText(getApplicationContext(), <span class="hljs-string"><span class="hljs-string">"some cmd"</span></span>, Toast.LENGTH_SHORT).show(); } }); PieItem item1 = pieController.makeItem(android.R.drawable.arrow_up_float); item1.setFixedSlice(FLOAT_PI_DIVIDED_BY_TWO + sweep, sweep); item1.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PieItem.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PieItem item)</span></span></span><span class="hljs-function"> </span></span>{ Toast.makeText(getApplicationContext(), <span class="hljs-string"><span class="hljs-string">"some cmd 2"</span></span>, Toast.LENGTH_SHORT).show(); } }); PieItem item7 = pieController.makeItem(android.R.drawable.arrow_up_float); item7.setFixedSlice(FLOAT_PI_DIVIDED_BY_TWO - sweep, sweep); item7.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PieItem.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PieItem item)</span></span></span><span class="hljs-function"> </span></span>{ Toast.makeText(getApplicationContext(), <span class="hljs-string"><span class="hljs-string">"some cmd 7"</span></span>, Toast.LENGTH_SHORT).show(); } }); pieRenderer.addItem(item0); pieRenderer.addItem(item1); pieRenderer.addItem(item7); PieItem item0_0 = pieController.makeItem(android.R.drawable.ic_menu_add); item0_0.setFixedSlice(FLOAT_PI_DIVIDED_BY_TWO, sweep); item0_0.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PieItem.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PieItem item)</span></span></span><span class="hljs-function"> </span></span>{ Toast.makeText(getApplicationContext(), <span class="hljs-string"><span class="hljs-string">"some cmd"</span></span>, Toast.LENGTH_SHORT).show(); } }); PieItem item0_6 = pieController.makeItem(android.R.drawable.ic_menu_add); item0_6.setFixedSlice(FLOAT_PI_DIVIDED_BY_TWO + sweep, sweep); item0_6.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PieItem.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PieItem item)</span></span></span><span class="hljs-function"> </span></span>{ Toast.makeText(getApplicationContext(), <span class="hljs-string"><span class="hljs-string">"some cmd 2"</span></span>, Toast.LENGTH_SHORT).show(); } }); PieItem item0_7 = pieController.makeItem(android.R.drawable.ic_menu_add); item0_7.setFixedSlice(FLOAT_PI_DIVIDED_BY_TWO - sweep, sweep); item0_7.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PieItem.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PieItem item)</span></span></span><span class="hljs-function"> </span></span>{ Toast.makeText(getApplicationContext(), <span class="hljs-string"><span class="hljs-string">"some cmd 7"</span></span>, Toast.LENGTH_SHORT).show(); } }); item0.addItem(item0_0); item0.addItem(item0_6); item0.addItem(item0_7); renderOverlay.addRenderer(pieRenderer); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onTouchEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MotionEvent event)</span></span></span><span class="hljs-function"> </span></span>{ pieRenderer.onTouchEvent(event); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onTouchEvent(event); } }</code> </pre></div></div><br><br><h5>  Afterword </h5><br>  The source of the resulting library can be pulled <a href="https://github.com/Malinskiy/qcontrols">from here</a> . <br>  Runs on Android 2.2.1 and higher (theoretically it works on Android 1.0 and higher). <br><br>  Thank you for your attention and have a nice day! <br><br>  Update: <br>  Thanks to <a href="https://habrahabr.ru/users/prototik/" class="user_link">Prototik</a> for the hint about the ported Animation classes.  The menu now also works on older APIs: JakeWharton indicates a minimum API 1.0, but I was able to check for <b>2.2.1</b> and higher. </div><p>Source: <a href="https://habr.com/ru/post/164035/">https://habr.com/ru/post/164035/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../164019/index.html">Drupal + Git submodules: recipes</a></li>
<li><a href="../164021/index.html">Mobile Market Trends: Distimo Year Results</a></li>
<li><a href="../164025/index.html">NVIDIA Nsight Tegra preview release</a></li>
<li><a href="../164027/index.html">Java job interview. Collections vs null</a></li>
<li><a href="../164029/index.html">Solar Designer at Yet another Conference 2012</a></li>
<li><a href="../164037/index.html">Using unions in constant expressions for C ++ 11</a></li>
<li><a href="../164039/index.html">Sudden 2012: what will happen to security in OS X next?</a></li>
<li><a href="../164041/index.html">Summing up 2012 on disk storage</a></li>
<li><a href="../164043/index.html">Windows Azure December News: Platform Update, TechEd Russia Video, New Training Kit</a></li>
<li><a href="../164045/index.html">OpenWeatherMap - how enthusiasts make the weather</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
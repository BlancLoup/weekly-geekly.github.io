<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We set up a free build for writing and debugging programs for microcontrollers based on the ARM kernel under Windows 10</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The idea to write an article (which will go into a series of articles for beginners who are keen to create something on microcontrollers with almost z...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We set up a free build for writing and debugging programs for microcontrollers based on the ARM kernel under Windows 10</h1><div class="post__text post__text-html js-mediator-article">  The idea to write an article (which will go into a series of articles for beginners who are keen to create something on microcontrollers with almost zero knowledge of programming in principle) came to me after I had to digress from my core business to help my friend set up a little Wednesday for writing software for his small home project based on the board with stm32f103 on board.  I figured it would take about half an hour, a maximum of an hour, but my friend‚Äôs laptop was on Windows 10 x64, which is unusual for me (I myself work in Ubuntu).  As a result, we spent almost 8 hours on setting up and creating a simple project, struggling with many not obvious things. <br><br>  In parallel with this, I had to explain in detail which element of the assembly was needed for, as well as how these elements interact with each other, since a friend had never before encountered microcontrollers (from the word "I saw Arduino in a store"). <br><br>  This material is designed to help beginners to quickly and easily set up a completely free infrastructure for working with microcontrollers, as well as to understand how the final binary file is assembled.  The manufacturer and model of the microcontroller at the stage of setting up this infrastructure is unimportant.  The main thing is that it is based on the core of ARM. <br><a name="habracut"></a><br><h2>  Table of contents </h2><ol><li>  Formulation of the problem. </li><li>  Selection of software implementation. </li><li>  We put Eclipse Neon 3. <ul><li>  Download the installer Eclipse. </li><li>  Install the JRE. </li><li>  Install Eclipse. </li><li>  Install the GNU ARM Eclipse plugin in Eclipse. </li><li>  Patch JRE (in case of an error when installing the plugin). </li><li>  Install GNU ARM Eclipse Windows Build Tools. </li></ul></li><li>  Download and install the GNU ARM Embedded Toolchain. </li><li>  Install OpenOCD. </li><li>  Install drivers on st-link v2. </li><li>  We understand how it all works. </li><li>  Conclusion </li></ol><br><h2>  Formulation of the problem </h2>  You need to configure the bundle so that you can: <ol><li>  Compile a project consisting of C (C99), CPP (C ++ 14) and ASM files. </li><li>  Compile a single firmware file from the compiled files (".elf" and, if necessary, ".hex", as well as the ".map" file for easy analysis of the assembly). </li></ol><br><h2>  Selection of software implementation </h2>  To solve the tasks we need the following software products: <ol><li>  Eclipse Neon 3 for C / C ++ (the latest version at the time of this writing).  We will use it as an IDE (text editor with a convenient auto add-on + convenience for interacting with debugging tools), in which we will write code. </li><li>  JRE (at the time of writing, the most recent version is 1.8.0).  Without it, the Eclipse installer will not start (well, Eclipse itself). </li><li>  GNU ARM Embedded Toolchain (at the time of writing, the latest version was 5_4-2016q3-20160926).  This is a set of software solutions we need (such as the C compiler for gcc code, C ++ for g ++ code, linker for ld, download and debugging tool for final firmware for gdb, and many others), thanks to which we get source file with the resolution ".elf", which is a binary firmware file of the microcontroller, which later will be loaded into the microcontroller (see below). </li><li>  OpenOCD 0.10.0.  With it, we will load our ".elf" program file into the microcontroller (in fact, OpenOCD provides the connection between gdb from the above toolchain and the debugger). </li></ol>  In addition to these tools, we will need to put a few more small packages, which I will speak about directly during the installation process. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  We put Eclipse Neon 3 </h2>  As mentioned above, in order to write code, we need a text editor in which it would be convenient to write (various methods of auto-completion, project search, file navigation, etc.).  And after we wrote the code, it would be nice if its compilation, build and execution would be a matter of a couple of key combinations (or mouse clicks, as you like). <br>  For these purposes, I use Eclipse.  In addition to the editor, it also provides the ability to connect various extensions that greatly simplify the developer‚Äôs life, reducing all the routine work (assembly, layout, loading the program into the controller) to a couple of clicks / clicks. <br><br><h4>  Downloading the Eclipse Installer </h4><ol><li>  Go to the official <a href="https://eclipse.org/">website</a> </li><li>  Top right click download. </li><li>  In the window that opens, on the left, select download (x64 / x32 should be selected automatically). </li><li>  Well, click download in the center, after which the download will begin.  If you wish, you can sponsor the creators of the IDE ... </li></ol><div class="spoiler">  <b class="spoiler_title">Here is a more visual download process.</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/028/562/ffd/028562ffd766493aadcbc09719c2c1da.png"><br><img src="https://habrastorage.org/files/d17/89c/b1a/d1789cb1aa28431ba7b2ad7229a6274e.png"><br><img src="https://habrastorage.org/files/062/df7/6d9/062df76d98dd42d393a02898f4bc1ff6.png"></div></div><br><h4>  Install JRE </h4>  In order to run the installer, you must first install the JRE.  The latest version at the time of writing is 1.8.0. <br><ol><li>  Run the installer we downloaded.  We get an error that the JRE is missing. </li><li>  Click "no" and wait for the transition to the site. </li><li>  On the site, select the item "Oracle JRE 1.8.0". </li><li>  Choose "Accept License Agreement". </li><li>  Download the offline version, according to the bit of your Windows. </li><li>  Run the downloaded file.  Further installation does not cause problems. </li></ol><div class="spoiler">  <b class="spoiler_title">Here is a visual process of downloading and installing.</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/c6f/8eb/694/c6f8eb6948b84632892804857fa76cd0.png"><br><img src="https://habrastorage.org/files/4f7/972/959/4f797295967343959c6f2e79150dfe3f.PNG"><br><img src="https://habrastorage.org/files/454/845/611/454845611a3d4e448c420bbd1d0da5a2.PNG"><br><img src="https://habrastorage.org/files/978/780/0f9/9787800f99ef4460aaf0e6535d9a2b7d.PNG"><br><img src="https://habrastorage.org/files/791/44a/223/79144a22383c4ecbb4cfb9b816ad629c.PNG"><br><img src="https://habrastorage.org/files/d65/6e2/6fa/d656e26faf484d9d97f47c98d17987ed.PNG"><br><img src="https://habrastorage.org/files/76b/3e3/d6a/76b3e3d6a85d40c5baf4d610f5a3baf4.PNG"><br></div></div><br><h4>  Install Eclipse </h4><ol><li>  Run the installer we downloaded. </li><li>  Choose a version for C / C ++. </li><li>  Specify the installation path (I left the default, and I advise you). </li><li>  We accept the agreement. </li><li>  We are waiting for the end of the installation. </li><li>  Click "LAUNCH" to start the environment. </li><li>  Specify the path that Eclipse will use for your projects by default (I left it by default), and also tick the box to prevent this window from appearing again. </li><li>  Make sure that the IDE is running, close. </li><li>  During closing we can put a tick so that the window of warning about closing no longer appears. </li></ol><div class="spoiler">  <b class="spoiler_title">Here is an illustrative installation process.</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/920/0bd/088/9200bd0886b04337baf7ce9c1c257137.PNG"><br><img src="https://habrastorage.org/files/3a6/1b3/9f6/3a61b39f6b1c4b5d9e0f58b32ec66779.png"><br><img src="https://habrastorage.org/files/b2d/ff0/d68/b2dff0d68ae448f190d4ad0461f8023f.PNG"><img src="https://habrastorage.org/files/fd5/187/11d/fd518711db7848d59702c41991f19977.PNG"><br><img src="https://habrastorage.org/files/546/aea/d91/546aead91a0d4487bced08dabd484de3.PNG"><br><img src="https://habrastorage.org/files/02b/cb1/b7d/02bcb1b7da264cbfbeb697416a69635e.PNG"><br><img src="https://habrastorage.org/files/0aa/675/f12/0aa675f122294859b7182893a6397bb7.PNG"><br><img src="https://habrastorage.org/files/d60/7bd/c84/d607bdc84f574a6d8ecccb64df3ef338.PNG"><br><img src="https://habrastorage.org/files/738/87f/2b9/73887f2b93b4427381a384b8484ea575.PNG"><br><img src="https://habrastorage.org/files/02a/2e0/9e9/02a2e09e97724f78943d7aca5ec40590.PNG"></div></div><br><h4>  Install the GNU ARM Eclipse plugin in Eclipse </h4>  As mentioned earlier, Eclipse will allow you to connect various plug-ins that simplify the life of the developer.  One such plug-in is GNU ARM Eclipse.  Thanks to him, we will be able to easily connect all the software components we use when creating a new project for our controller (how to do this will be described below). <ol><li>  Go to the official <a href="http://gnuarmeclipse.github.io/">website</a> . </li><li>  In the right column, under the ‚ÄúDownloads‚Äù line, select ‚ÄúPlug-ins‚Äù. </li><li> Next, under the line "The GNU ARM Eclipse plug-ins update site URL is still on SourceForge:" copy the link to the plugin.  At the time of this writing, it was: <code>http://gnuarmeclipse.sourceforge.net/updates</code> </li><li>  Open Eclipse. </li><li>  Go to "Help" -&gt; "Install New Software ...". </li><li>  In the window that opens, click on "Add ...". </li><li>  In another window that opens, in the item ‚ÄúName:‚Äù we write, for example, ‚ÄúARM‚Äù (the name is not important), and in the line ‚ÄúLocation:‚Äù we paste the link copied from the site. </li><li>  Click "OK" </li><li>  The window closes and an empty checkbox with the words ‚ÄúPending ...‚Äù appears in the list of strings. <br>  Further, if you encounter the error presented below, go to the ‚ÄúJRE Patching‚Äù item, then go back and repeat everything from point 4. <br> <code>Unable to read repository at http://gnuarmeclipse.sourceforge.net/updates/content.xml. <br> Unable to read repository at http://gnuarmeclipse.sourceforge.net/updates/content.xml. <br> Received fatal alert: handshake_failure</code> <br>  If there is no error or you have already corrected it, we continue further. </li><li>  After the ‚ÄúGNU ARM C / C ++ Cross Development Tools‚Äù line appears, you need to select the checkbox to the left of it and click ‚ÄúNext‚Äù. </li><li>  After another ‚ÄúNext‚Äù. </li><li>  Next, accept the license agreement and click "Finish".  The installation process begins. </li><li>  During installation, a security warning will appear.  Click "OK". </li><li>  After the installation is complete, you will need to restart Eclipse, to do this, click "Yes" in the window that appears. </li><li>  At this installation of the plugin is complete. </li></ol><div class="spoiler">  <b class="spoiler_title">The process of installing the plugin in pictures</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/47b/461/225/47b4612250604e9da37113cecb2c1d2c.PNG"><br><img src="https://habrastorage.org/files/8ad/01e/e65/8ad01ee65f7448d68ffa02443f73ff39.PNG"><br><img src="https://habrastorage.org/files/a0b/768/793/a0b76879324e4a4c8080f7c3bfad076a.png"><br><img src="https://habrastorage.org/files/10e/53b/228/10e53b2285db44608f8c97c1e2d92259.PNG"><br><img src="https://habrastorage.org/files/d3d/c02/411/d3dc024111a9436795069c2bfe2d3dd4.PNG"><br><img src="https://habrastorage.org/files/9f8/248/685/9f8248685b9e4914ba16d82d22f2ac39.PNG"><br><img src="https://habrastorage.org/files/4b9/1b0/eda/4b91b0edade8438fa63abad8e812e6a7.PNG"><br><img src="https://habrastorage.org/files/56b/159/a8e/56b159a8ec0e4af89d2bba85bd4e7bc6.PNG"><br><img src="https://habrastorage.org/files/a44/1b1/6c4/a441b16c434c48edabed0c4b6d46a9a8.PNG"><br><img src="https://habrastorage.org/files/79e/5d1/902/79e5d1902131407aac16eb35144f07c0.PNG"><br></div></div><br><h4>  Patch JRE (if an error occurred in the paragraph above) </h4>  It so happens that the JRE has an unpleasant bug that prevents us from properly installing the plugin.  Without going into the nature of sowing phenomena, we do the following. <br><ol><li>  Go to the <a href="http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html">site with the patch</a> . </li><li>  Select the item "Accept License Agreement". </li><li>  Download the ".zip" archive. </li><li>  Unpack  The archive contains 2 files ("local_policy.jar" and "US_export_policy.jar") patch and a text file.  Copy these 2 files with the ".jar" resolution and replace them with the files at the address of the installed java.  In the case of 64-bit windows 10, this is the way <br> <code>C:\Program Files\Java\jre1.8.0_121\lib\security</code> <br>  The path may be different if there is a new version of jre or you have an OS with a different bit depth.  The main thing is that you have to go to the "\ lib \ security" folder and copy there with the replacement of these 2 files.  On this patch can be considered complete.  You can run eclipse again and install the plugin. </li></ol><div class="spoiler">  <b class="spoiler_title">Photo error and replacement path.</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/23a/3b7/1ee/23a3b71ee9994cf3aeb4a2f00bfbffde.PNG"><br><img src="https://habrastorage.org/files/5f7/23a/468/5f723a4689944795b4dad5cd77285cb4.PNG"><br><img src="https://habrastorage.org/files/5c2/f7c/068/5c2f7c0681274ae79d7b254843cfaede.PNG"><br><img src="https://habrastorage.org/files/ffd/043/7db/ffd0437db0bf42079074b9b3784ffa80.PNG"><br><img src="https://habrastorage.org/files/421/dea/9cb/421dea9cbb864b2b8209135206fc8d30.PNG"></div></div><br><h4>  Install GNU ARM Eclipse Windows Build Tools </h4>  The fact is that in windows the default ‚Äúmake‚Äù command on the command line does not work (although not all distributions have this application installed in linux).  For what we need the application "make", we will talk below, and now we just need to put a plugin that will add the ability to use it.  For this. <br><ol><li>  Go to the <a href="https://github.com/gnuarmeclipse/windows-build-tools/releases">official repository</a> . </li><li>  Download the ".exe" file to your platform.  At the time of this writing, the most current version of "gnuarmeclipse-build-tools-win64-2.8-201611221915-setup.exe". </li><li>  Run the downloaded file and simply click ‚ÄúNext‚Äù, ‚ÄúA Agree‚Äù, ‚ÄúNext‚Äù, ‚ÄúInstall‚Äù, ‚ÄúFinish‚Äù. </li></ol><br><h2>  Download and install GNU ARM Embedded Toolchain </h2><ol><li>  Go to the official <a href="https://launchpad.net/gcc-arm-embedded">website</a> </li><li>  Download the latest version, compiled into the ".exe" file for Windows (in the column to the right). </li><li>  Run the downloaded file. </li><li>  Click "OK". </li><li>  Then "Next" </li><li>  "Accept" </li><li>  ‚ÄúInstall‚Äù (here I will explain that you can specify any folder, but it is better to leave the default one, in order to avoid problems with registering components during installation). </li><li>  At the end of the installation, uncheck the ‚ÄúShow ReadMe.‚Äù Box.  The rest is left by default. </li><li>  "Done" </li></ol><br>  The following actions are informative and may be skipped.  In this case, the opened command line can be closed. <br><ol><li>  In the command line that opens, we write ‚Äúcd bin‚Äù, without quotes (this is where the .exe files of all the components of the toolchain are located). </li><li>  We type "arm-none-eabi-gcc --version", without quotes. </li><li>  Making sure that gcc responded, close the console. </li></ol><div class="spoiler">  <b class="spoiler_title">The installation and verification process is visual.</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/693/2e1/465/6932e1465be547c683604e3bc0a872e4.png"><br><img src="https://habrastorage.org/files/bf7/f6a/4d4/bf7f6a4d41164f60aae4a5407bfa69a7.PNG"><br><img src="https://habrastorage.org/files/5a1/153/456/5a11534560bc4a67bee12e1b31e672ed.PNG"><br><img src="https://habrastorage.org/files/302/891/f9e/302891f9e67e48f59be01370523d5ac9.PNG"><br><img src="https://habrastorage.org/files/57b/69f/ea1/57b69fea1b2e4d7ebaf860a291e06be0.PNG"><br><img src="https://habrastorage.org/files/663/23b/ee8/66323bee8c7549ff97986426b27655ab.PNG"><br><img src="https://habrastorage.org/files/c16/007/2e1/c160072e16224126bbdc1f1057df4d11.PNG"><br><img src="https://habrastorage.org/files/53e/bc5/81d/53ebc581dd7a475983ddfd54476c8a9a.PNG"><br><img src="https://habrastorage.org/files/e8c/564/810/e8c56481023c44e48d81e2225506bf52.PNG"></div></div><br><h2>  Install OpenOCD </h2>  With medium and toolchain th sorted out.  Next, you need to install OpenOCD, with which Eclipse will control the controller via arm-none-eabi-gdb.  It's simple. <br><ol><li>  Go to the <a href="https://github.com/gnuarmeclipse/openocd/releases">official repository</a> . </li><li>  Download the ".exe" file under your OS.  At the time of this writing, the most current version of "gnuarmeclipse-openocd-win64-0.10.0-201701241841-setup.exe". </li><li>  Run the downloaded ".exe".  Installation is done without changing anything (including the path). </li></ol><br><h2>  Install drivers on st-link v2 </h2>  OpenOCD controls the controller, this is true, but for this it needs a driver for the debugger.  In our case, this is st-link v2.  If you have another debugger, then this part can be skipped. <br>  Regardless of whether you have a fake st-link or the original one, the drivers are the same.  Let's start. <ol><li>  Go to the <a href="http://www.st.com/en/development-tools/st-link-v2.html">official page of st-link v2</a> </li><li>  At the bottom of the page download the file "STSW-LINK009" with the description "ST-LINK, ST-LINK / V2, ST-LINK / V2-1 USB driver signed for Windows7, Windows8, Windows10". </li><li>  When you go to another page, click "Download" at the bottom of the page.  It is important to note here that if you are not surfing the Internet through a VPN, you will have to register.  How to do this, I will not describe.  After that, the file will be downloaded. </li><li>  Unzip the archive, select the driver installation file according to the OS bit.  In my case, this is ‚Äúdpinst_amd64.exe‚Äù. </li><li>  During installation, we agree with all requirements.  And select the checkbox "Always trust the software STMicroelectronics". </li></ol><div class="spoiler">  <b class="spoiler_title">The process of downloading and installation in pictures.</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/f63/e9d/ec0/f63e9dec05cc475f866adf40c96fe7a8.PNG"><br><img src="https://habrastorage.org/files/f88/d0e/ee4/f88d0eee4e2c4508ab036de66f3f9386.PNG"><br><img src="https://habrastorage.org/files/c9a/12e/8ca/c9a12e8ca75a40b5bfc82f08e715a598.PNG"><br><img src="https://habrastorage.org/files/f01/bb5/323/f01bb5323d97467db93c70be3e3ce90a.PNG"><br><img src="https://habrastorage.org/files/b2b/cc6/11f/b2bcc611fb59496e95d6ed03bfa6aa80.PNG"></div></div><br><h2>  Understand how it all works </h2>  So we installed all the necessary components, created a project in Eclipse (how to create and customize a project will be written in the next article) and clicked "Ctrl + B".  We received a ready-made firmware file, which by clicking on the "debugging" icon can be downloaded to the controller and start debugging directly.  But what is behind all these actions?  And the following happens: <ol><li>  After you press "Ctrl + B" - Eclipse analyzes the project directory tree (all the folders and files we created are in them).  To do this, he uses the paths to the files that we specify when creating the project. </li><li>  Eclipse then creates a makefile.  This file contains instructions for the make program about which files to compile (which we added to the project, while specifying the path to the directories where they are located), with which parameters (here Eclipse uses the parameters we filled in in the ‚ÄúC / C ++ Build ‚Äù) and how to compile previously compiled files in the final firmware file. <br>  Note: makefile has no extension. </li><li>  Next, Eclipse calls the make program with the path to the created makefile, as well as the build parameters that we specified when setting up the project (for example, the number of threads of the processor used for compilation). </li><li>  The make program goes through all the project files, as indicated in the makefile, and receives a file with the extension ".o" for each file.  These files are located in the Debug folder in the same way as in the main project (with preservation of the tree hierarchy).  If there is an error in some file, you will receive a notification about it, highlighted in red in the compilation console (by default it is located at the bottom of the screen).  If a compilation error occurs, the further compilation and assembly stops.  To compile files, make uses the toolchain specified in the makefile (or rather, its components: gcc / g ++).  The path to the toolchain from Eclipse takes, again, from the project settings. </li><li>  After creating all the ".o" files from ".c", ".cpp", ".S" (please note, files with assembly code must necessarily have an extension of the capital letter "S", otherwise when creating a makefile, these files will be simply ignored , which leads to hard-to-understand errors) make calls the linker (arm-none-eabi-ld from the toolchain we have installed) with the paths to the layout files from the project (files with the ".ld" extension, which we add to the project).  Here, the linker, based on the instructions (rules) specified in the files with the ".ld" extension, tries to collect from the heap ".o" files a single object file with the permission ".elf" (and, if there are such instructions in the makefile, ".hex "and" .map ").  It is important to note that it is the linker (the linker) who decides which pieces of code and data can be thrown out of the program (if it considers that they are not used anywhere and just take up space).  Thus, if we create 1000 global variables, of which we will use only 2 in the code, then the rest (unless explicitly stated that they cannot be excluded from the project with the key word "volatile" or the instruction "put in a section from which nothing can be removed ") Will be excluded from the final object file, which will give us more free memory. </li><li>  After we have received the final object file, we can ‚Äúsew‚Äù it into the controller and debug it.  To do this, Eclipse calls the OpenOCD program with the path to the file "openocd.cfg" (the name can be any, with the extension ".cfg", but if you ever have to debug from the command line, and not from under the IDE, then you will feel that the correctly named file for OpenOCD allows you not to write the name of the configuration file (because if the configuration file was not specified, then a file with that name is automatically searched)). <br>  In case the specified file exists, OpenOCD, according to the parameters in the file, will try to connect to the microcontroller.  In case the connection is correct, you will receive a notification that the connection is established, the controller debugger is working. <br>  In order to communicate with the controller, OpenOCD uses the driver for the st-link, which we installed at the beginning. </li><li>  After OpenOCD was able to communicate with the controller, it opens the telnet connection.  If you do not go into details, this is necessary so that arm-none-eabi-gdb can successfully control the controller. </li><li>  After the telnet connection is established, Eclipse launches arm-none-eabi-gdb with the port to which you want to connect (the one that opened OpenOCD). </li><li>  Next, Eclipse sends initialization commands to gdb (erase flash, write the firmware file, set a breakpoint on main, and a few more optional parameters). </li><li>  After that, in Eclipse we see a pointer to the first line of code in the main file and we can start debugging. </li></ol>  Technically, all the operations performed here can be done manually every time, but agree that it‚Äôs much more convenient to just press a key and enjoy debugging. <br><br><h2>  Conclusion </h2>  In this article I have tried to describe in detail the process of building configuration under Windows.  If you have any questions - write in a personal, I will try to help and add to the article a problem + its solution. <br>  In the next article, I will explain how to configure Eclipse for a specific controller, build a demo project, and set up debugging. </div><p>Source: <a href="https://habr.com/ru/post/325450/">https://habr.com/ru/post/325450/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325440/index.html">The digest of interesting materials for the mobile # 197 developer (March 27 - April 2)</a></li>
<li><a href="../325442/index.html">‚ÄúGood external restrictions are the basis for creativity‚Äù: Oleg Chirukhin on Sberbank Technologies, Java and Novosibirsk</a></li>
<li><a href="../325444/index.html">WebRTC video chat development between iOS, Android and browser</a></li>
<li><a href="../325446/index.html">Scala: parser combinators on the example of the formula parser</a></li>
<li><a href="../325448/index.html">The holy family of information technology (April theses in the form of critical criticism)</a></li>
<li><a href="../325452/index.html">PHP: Storing sessions in protected cookies</a></li>
<li><a href="../325454/index.html">Go application development: logic reuse</a></li>
<li><a href="../325456/index.html">Create a bot for Skype. Step by step through REST API and in Python</a></li>
<li><a href="../325458/index.html">Secure access from anywhere in the world using Microsoft DirectAccess and Windows To Go. Part One - Theory</a></li>
<li><a href="../325460/index.html">Product Design Digest March 2017</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
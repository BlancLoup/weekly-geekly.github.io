<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quick Start Guide: Linking ASP.NET Core Web API + Angular 5</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The story of how to make friends two separate projects ASP.NET Core Web API and Angular 5, and make them work as one. 

 Introduction 
 This article i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Quick Start Guide: Linking ASP.NET Core Web API + Angular 5</h1><div class="post__text post__text-html js-mediator-article">  The story of how to make friends two separate projects ASP.NET Core Web API and Angular 5, and make them work as one. <br><a name="habracut"></a><br><h2>  Introduction </h2><br>  <i>This article is designed for beginners who make the first steps in exploring Angular in conjunction with the .NET Core.</i> <br><br>  If you use Visual Studio for development, you probably have already met with ready-made project templates with Angular connected.  These templates allow in a couple of clicks to create an application that already has a configured router and several ready-made components.  You do not need to spend time on the minimum setting of the working application: you already have a working WebPack, a separate module for common components, a configured router, a connected Bootstrap.  You might think, <i>‚ÄúSuper!</i>  <i>Cool!</i>  <i>Half the deed is done! ‚Äù</i>  But in fact, everything is a little more complicated ... <br><br>  The difficulty and pitfalls are that this approach has several significant <b>drawbacks</b> in the standard templates: <br><blockquote><ol><li>  Rigid connection of the web interface with the server side </li><li>  Strongly complicated minimally working version of the application </li><li>  Lack of ability to use Angular CLI </li><li>  Extra pre-installed packages </li><li>  Breaking Some Principles from the Angular Style Guide </li></ol><br></blockquote>  Different <i>best-practices</i> advise us <b>to split the application into two separate projects</b> , which in our case is the <b>.NET Core Web API</b> and <b>Angular</b> projects.  The main <b>advantages of</b> this approach will be the following: <br><blockquote><ol><li>  Two independent projects, which will allow us to further implement an alternative interface, without touching the project with the server part </li><li>  Narrowed global <i>search scope</i> , which allows you to <i>search</i> more efficiently and easily </li><li>  Abstraction from the working environment in which the server part is developed, Visual Studio for example - we can use VS Code, Sublime Text, Atom or another editor that is convenient for you </li></ol><br></blockquote>  In this scenario, there are two final scenarios for production: <br><blockquote><ol><li>  You host the web interface at one address, and the server at another. </li><li>  Or you collect projects in one <b>magic</b> way and host only him </li></ol><br></blockquote>  My task was just the <b>second scenario</b> , so it was more preferable for economic reasons.  And so, when I tried to figure out how to make friends with the .NET Core Web API project with the Angular project, so that <b>during development we had two separate projects, and in production - only one</b> , and specifically. NET Core web site, I could not find a full-fledged guide "from scratch to a working application."  It was necessary to collect piecemeal solutions from English-speaking forums and blogs.  If you suddenly had the same task, then it will be enough to read my article. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Go! </h2><br>  So what will we use?  We will need the following things: <br><blockquote><ul><li>  <a href="https://www.microsoft.com/net/download/windows">.NET Core SDK</a> - version 2.0 or higher </li><li>  <a href="https://nodejs.org/">Node.js</a> - version 8.9.0 or higher </li><li>  npm - version 5.5.0 or higher </li><li>  <a href="https://github.com/angular/angular-cli">Angular CLI</a> - 1.6.5 version or higher </li><li>  <a href="https://code.visualstudio.com/download">Visual studio code</a> </li></ul><br></blockquote>  <i>If you already have <b>Visual Studio 2017</b> installed and during installation you chose <b>.NET Core Development</b> , then <b>you already have</b> the <b>.NET Core SDK</b> and do not need to install it.</i>  <i>However, <b>Node.js will have to be installed separately</b> even if <b>Node.js Development</b> was selected.</i>  <i>Npm will install with Node.js.</i>  <i>Angular CLI is installed globally from the command line via npm (the instruction is from the link above).</i> <br><br>  Now we need to check whether everything is installed and ready to go.  To do this, open a command prompt (terminal) and execute the following commands in a row: <br><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">dotnet</span></span> --version <span class="hljs-comment"><span class="hljs-comment"># .NET Core node --version # Node.js npm --version # npm ng --version # Angular CLI</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Result of the command line (versions may differ, no problem)</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/tv/08/tk/tv08tkswfvpuaq8lucrnfrdtvvg.png"><br></div></div><br><h2>  Create a .NET Core Web API project </h2><br>  In this article, I will perform all actions through the command line and VS Code, as it supports .NET Core.  However, if you prefer Visual Studio 2017 for working with .NET projects, then you can safely create and edit a project through it. <br><br><h4>  Step one </h4><br>  We create the root folder of the project <b>Project</b> , open it in VS Code, start the terminal by pressing <b>Ctrl + ~</b> (tilde, letter ).  So far nothing complicated :) <br><br><div class="spoiler">  <b class="spoiler_title">VS Code window and running terminal</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/qd/ml/j4/qdmlj4yx-t9gda40t6spyqkr2jc.png"><br></div></div><br><h4>  Step two </h4><br>  Now we need to create a project.  To do this, run the command: <br><br><pre> <code class="hljs cs">dotnet <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> webapi -n Project.WebApi</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Open Code VS Code window and launched terminal</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/bi/z-/x3/biz-x3umll2usgmzgacb2vdomgi.png"><br></div></div><br><h4>  Step Three </h4><br>  We check everything works.  Through the terminal go to the folder with the newly created project, then execute the command: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">dotnet</span></span> run</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Open Code VS Code window and launched terminal</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/nw/ki/q9/nwkiq9a6tmdq6lj4utn-dcvcgsk.png"><br></div></div><br><h4>  Step Four </h4><br>  If at the last step everything went well and <b>Now listening on: <a href="http://localhost/">localhost</a> : 5000</b> was output to the console, it means that the server has been successfully started.  Let's go to the address <b><a href="http://localhost/">localhost</a> : 5000 / api / values</b> (test controller, which is created automatically).  You should see JSON with test data. <br><br><div class="spoiler">  <b class="spoiler_title">Result in the browser</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/qm/kk/z8/qmkkz8azg_rkxq1aurlg8c4l4l0.png"><br></div></div><br><h4>  Step five </h4><br>  We return to VS Code and in the terminal press <b>Ctrl + C</b> to stop the server. <br><br><div class="spoiler">  <b class="spoiler_title">Open Code VS Code window and launched terminal</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/z5/k7/ac/z5k7acbkbtcrrqadry3f6x2wvqg.png"><br></div></div><br><h2>  Create a project Angular </h2><br>  Now create an Angular project.  For this we will use the commands Angular CLI, VS Code and the built-in terminal. <br><br><h4>  Step one </h4><br>  In the terminal, go to the root folder of our Project <b>Project</b> and create a new project called <b>Project.Angular</b> (you have to wait a bit): <br><br><pre> <code class="hljs cs">cd ..\ ng <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Project.Angular</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Open Code VS Code window and launched terminal</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/mm/la/ge/mmlagexgebeu5iwrqcnffefoamq.png"><br></div></div><br><h4>  Step two </h4><br>  Go to the terminal in the folder just created the project and run it: <br><br><pre> <code class="hljs swift">cd ./<span class="hljs-type"><span class="hljs-type">Project</span></span>.<span class="hljs-type"><span class="hljs-type">Angular</span></span> ng serve --<span class="hljs-keyword"><span class="hljs-keyword">open</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">Open Code VS Code window and launched terminal</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/1e/md/jz/1emdjzzckmb56djmovkxp9exsre.png"><br></div></div><br><h4>  Step Three </h4><br>  If at the last step everything went well and the <b>NG Live Development Server was listening on localhost: 4200</b> , the server was successfully started.  Go to <b><a href="http://localhost/">localhost</a> : 4200</b> .  You should see the Angular test page. <br><br><div class="spoiler">  <b class="spoiler_title">Result in the browser</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/wh/zk/93/whzk93njkmqhmte0omb19hxdoo8.png"><br></div></div><br><h4>  Step Four </h4><br>  We return to VS Code and in the terminal press <b>Ctrl + C</b> , enter <b>Y</b> to stop the server. <br><br><div class="spoiler">  <b class="spoiler_title">Open Code VS Code window and launched terminal</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/7m/ue/y9/7muey9srurmdyc9md-pkhhanvda.png"><br></div></div><br><h2>  We configure the Angular project </h2><br>  Now we need to configure two things: proxy.config.json to redirect requests to the server to the correct port, and the most important thing is to set up the build in the wwwroot folder. <br><br><h4>  Step one </h4><br>  Create a file called <b>proxy.config.json</b> in the root of the <b>Project.Angular</b> project and add the following content to it: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"/api/*"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"target"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:5000/"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"secure"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"logLevel"</span></span>: <span class="hljs-string"><span class="hljs-string">"debug"</span></span> } }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">proxy.config.json</b> <div class="spoiler_text"><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"/api/*"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"target"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:5000/"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"secure"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"logLevel"</span></span>: <span class="hljs-string"><span class="hljs-string">"debug"</span></span> } }</code> </pre><br></div></div><br>  This setting indicates that all requests starting with / api / ... will fall on <a href="http://localhost/">localhost</a> : 5000 /.  That is, the resulting query will be <a href="http://localhost/">localhost</a> : 5000 / api / ... <br><br><h4>  Step two </h4><br>  We indicate Angular that in development mode we need to use this proxy.config.  To do this, open the <b>package.json</b> file (which is also there, in the root), find the command <b>scripts -&gt; start</b> and replace the value with: <br><br><pre> <code class="hljs objectivec">{ ... scripts: { ... <span class="hljs-string"><span class="hljs-string">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng serve --proxy-config proxy.config.json"</span></span>, } }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">package.json</b> <div class="spoiler_text"><pre> <code class="hljs perl">{ { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"project.angular"</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"MIT"</span></span>, <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ng"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng"</span></span>, <span class="hljs-string"><span class="hljs-string">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng serve --proxy-config proxy.config.json"</span></span>, <span class="hljs-string"><span class="hljs-string">"build"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng build --prod"</span></span>, <span class="hljs-string"><span class="hljs-string">"test"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng test"</span></span>, <span class="hljs-string"><span class="hljs-string">"lint"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng lint"</span></span>, <span class="hljs-string"><span class="hljs-string">"e2e"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng e2e"</span></span> }, <span class="hljs-string"><span class="hljs-string">"private"</span></span>: true, <span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"@angular/animations"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/common"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/compiler"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/core"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/forms"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/http"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/platform-browser"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/platform-browser-dynamic"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/router"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"core-js"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.4.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"rxjs"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.5.6"</span></span>, <span class="hljs-string"><span class="hljs-string">"zone.js"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.8.19"</span></span> }, <span class="hljs-string"><span class="hljs-string">"devDependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"@angular/cli"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.6.7"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/compiler-cli"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/language-service"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@types/jasmine"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.8.3"</span></span>, <span class="hljs-string"><span class="hljs-string">"@types/jasminewd2"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.0.2"</span></span>, <span class="hljs-string"><span class="hljs-string">"@types/node"</span></span>: <span class="hljs-string"><span class="hljs-string">"~6.0.60"</span></span>, <span class="hljs-string"><span class="hljs-string">"codelyzer"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.0.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"jasmine-core"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.8.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"jasmine-spec-reporter"</span></span>: <span class="hljs-string"><span class="hljs-string">"~4.2.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"karma"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"karma-chrome-launcher"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"karma-coverage-istanbul-reporter"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.2.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"karma-jasmine"</span></span>: <span class="hljs-string"><span class="hljs-string">"~1.1.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"karma-jasmine-html-reporter"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.2.2"</span></span>, <span class="hljs-string"><span class="hljs-string">"protractor"</span></span>: <span class="hljs-string"><span class="hljs-string">"~5.1.2"</span></span>, <span class="hljs-string"><span class="hljs-string">"ts-node"</span></span>: <span class="hljs-string"><span class="hljs-string">"~4.1.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"tslint"</span></span>: <span class="hljs-string"><span class="hljs-string">"~5.9.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"typescript"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.5.3"</span></span> } } }</code> </pre><br></div></div><br>  In the future, we will use the <b>npm start</b> command together with <b>ng serve</b> to start the Angular project.  The <b>npm start</b> command is an abbreviation for the command that is listed in your package.json. <br><br><h4>  Step Three </h4><br>  The final step will be to simply set up the build (by command) of the project in the wwwroot .NET Core Web API folder of the project.  In the open <b>package.json</b> file, we find the <b>scripts -&gt; build command</b> and replace the value with the following: <br><br><pre> <code class="hljs objectivec">{ ... scripts: { ... <span class="hljs-string"><span class="hljs-string">"build"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng build --prod --output-path ../Project.WebApi/wwwroot"</span></span>, } }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">package.json</b> <div class="spoiler_text"><pre> <code class="hljs perl">{ { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"project.angular"</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"MIT"</span></span>, <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ng"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng"</span></span>, <span class="hljs-string"><span class="hljs-string">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng serve --proxy-config proxy.config.json"</span></span>, <span class="hljs-string"><span class="hljs-string">"build"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng build --prod --output-path ../Project.WebApi/wwwroot"</span></span>, <span class="hljs-string"><span class="hljs-string">"test"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng test"</span></span>, <span class="hljs-string"><span class="hljs-string">"lint"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng lint"</span></span>, <span class="hljs-string"><span class="hljs-string">"e2e"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng e2e"</span></span> }, <span class="hljs-string"><span class="hljs-string">"private"</span></span>: true, <span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"@angular/animations"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/common"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/compiler"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/core"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/forms"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/http"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/platform-browser"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/platform-browser-dynamic"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/router"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"core-js"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.4.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"rxjs"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.5.6"</span></span>, <span class="hljs-string"><span class="hljs-string">"zone.js"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.8.19"</span></span> }, <span class="hljs-string"><span class="hljs-string">"devDependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"@angular/cli"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.6.7"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/compiler-cli"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@angular/language-service"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"@types/jasmine"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.8.3"</span></span>, <span class="hljs-string"><span class="hljs-string">"@types/jasminewd2"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.0.2"</span></span>, <span class="hljs-string"><span class="hljs-string">"@types/node"</span></span>: <span class="hljs-string"><span class="hljs-string">"~6.0.60"</span></span>, <span class="hljs-string"><span class="hljs-string">"codelyzer"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.0.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"jasmine-core"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.8.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"jasmine-spec-reporter"</span></span>: <span class="hljs-string"><span class="hljs-string">"~4.2.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"karma"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"karma-chrome-launcher"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"karma-coverage-istanbul-reporter"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.2.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"karma-jasmine"</span></span>: <span class="hljs-string"><span class="hljs-string">"~1.1.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"karma-jasmine-html-reporter"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.2.2"</span></span>, <span class="hljs-string"><span class="hljs-string">"protractor"</span></span>: <span class="hljs-string"><span class="hljs-string">"~5.1.2"</span></span>, <span class="hljs-string"><span class="hljs-string">"ts-node"</span></span>: <span class="hljs-string"><span class="hljs-string">"~4.1.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"tslint"</span></span>: <span class="hljs-string"><span class="hljs-string">"~5.9.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"typescript"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.5.3"</span></span> } } }</code> </pre><br></div></div><br>  To perform this action, run the <b>npm run build</b> command in the terminal.  The result will be the compiled project files in the wwwroot folder. <br><br><h2>  Configuring the .NET Core Web API project </h2><br>  It remains to teach the server to work with static files and allow requests from another port. <br><br><h4>  Step one </h4><br>  Open <b>Startup.cs</b> and add lines to the Configure method that allow the server to process static files: <br><br><pre> <code class="cs hljs">app.UseDefaultFiles(); app.UseStaticFiles();</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Configure method in Startup.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Configure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IApplicationBuilder app, IHostingEnvironment env</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (env.IsDevelopment()) { app.UseDeveloperExceptionPage(); } app.UseDefaultFiles(); app.UseStaticFiles(); app.UseMvc(); }</code> </pre><br></div></div><br><h4>  Step two </h4><br>  In <b>Startup.cs</b> , in the Configure method, add a line allowing the server to accept requests from port 4200: <br><br><pre> <code class="cs hljs">app.UseCors(builder =&gt; builder.WithOrigins(<span class="hljs-string"><span class="hljs-string">"http://localhost:4200"</span></span>));</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Configure method in Startup.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Configure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IApplicationBuilder app, IHostingEnvironment env</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (env.IsDevelopment()) { app.UseDeveloperExceptionPage(); } app.UseDefaultFiles(); app.UseStaticFiles(); app.UseCors(builder =&gt; builder.WithOrigins(<span class="hljs-string"><span class="hljs-string">"http://localhost:4200"</span></span>)); app.UseMvc(); }</code> </pre><br></div></div><br><h4>  Step Three </h4><br>  In the ConfigureServices method we add support for CORS: <br><br><pre> <code class="cs hljs">services.AddCors();</code> </pre><br><div class="spoiler">  <b class="spoiler_title">ConfigureServices method in Startup.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureServices</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IServiceCollection services</span></span></span><span class="hljs-function">)</span></span> { services.AddCors(); services.AddMvc(); }</code> </pre><br></div></div><br>  Ultimately, the Startup.cs file must have the content that is presented below: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Linq; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Threading.Tasks; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Builder; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Hosting; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.Configuration; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.DependencyInjection; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.Logging; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.Options; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Project.WebApi</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Startup</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Startup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IConfiguration configuration</span></span></span><span class="hljs-function">)</span></span> { Configuration = configuration; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IConfiguration Configuration { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureServices</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IServiceCollection services</span></span></span><span class="hljs-function">)</span></span> { services.AddMvc(); services.AddCors(); <span class="hljs-comment"><span class="hljs-comment">// &lt;--   } public void Configure(IApplicationBuilder app, IHostingEnvironment env) { if (env.IsDevelopment()) { app.UseDeveloperExceptionPage(); } app.UseDefaultFiles(); // &lt;--  app.UseStaticFiles(); // &lt;--   app.UseCors(builder =&gt; builder.WithOrigins("http://localhost:4200")); // &lt;--   :) app.UseMvc(); } } }</span></span></code> </pre><br>  Done!  Now you can feel free to contact your API controllers from the Angular project.  Also, by calling the <b>npm run build command</b> for the Angular project, you will have the version of the Web API of the application ready for deployment. <br><br><h2>  Conclusion </h2><br>  It was a quick guide to what you need to do in order to have two separate projects, and make them work as one. <br><br>  Configuring CORS and building automation do not even claim to be a production version.  However, you now know where to look and dig.  I hope my article will be useful for someone.  Personally, I just did not have enough of it when I tried to establish communication between these two technologies. <br><br>  In this article, I did not highlight a few points related to routing in the Web API project, more flexible configuration of CORS, automatic assembly, etc.  There are plans to write a more detailed article on how to assemble a production version of this version of the application already.  If you have any questions, please write in the comments or on any of the contacts listed in the profile, I will try to help you. </div><p>Source: <a href="https://habr.com/ru/post/349522/">https://habr.com/ru/post/349522/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349512/index.html">Browser! = Browser engine</a></li>
<li><a href="../349514/index.html">Announcement of Serverless Moscow Meetup # 1</a></li>
<li><a href="../349516/index.html">Dagaz: Faster, Better, Smarter ...</a></li>
<li><a href="../349518/index.html">A new version of RMM-solution Panda Systems Management has been released.</a></li>
<li><a href="../349520/index.html">What it is - BPM, and how companies build it</a></li>
<li><a href="../349524/index.html">School of information security. Yandex Experience and Practice</a></li>
<li><a href="../349526/index.html">Porting your own OS to Xen</a></li>
<li><a href="../349528/index.html">Telegram-bot "Easy Win" - check the history of the car by VIN or state. number</a></li>
<li><a href="../349530/index.html">How to better understand people</a></li>
<li><a href="../349532/index.html">Html page through the eyes of an application developer. Part 2: "Implementation"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
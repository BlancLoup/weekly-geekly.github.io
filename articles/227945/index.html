<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Generating CSS Sprites with Gulp</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="While working on one big project, my partner and I thought about automating the process of collecting sprites on the project. 
 Prior to that, the spr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Generating CSS Sprites with Gulp</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/41a/417/522/41a417522a687561ac41eb65a06c731c.png"></div><br>  While working on one big project, my partner and I thought about automating the process of collecting sprites on the project. <br>  Prior to that, the sprites were collected by pens or using online services, which took enough time. <br>  The project was already going to Gulp'om and it was decided to find a sprite assembler adapted for it. <br><a name="habracut"></a><br>  There were several options: <br><ul><li>  <a href="https://www.npmjs.org/package/css-sprite">css-sprite</a> </li><li>  <a href="https://www.npmjs.org/package/gulp-sprite-generator">gulp-sprite-generator</a> </li><li>  <a href="https://github.com/Otouto/gulp-spritesmith">gulp-spritesmith</a> </li><li>  <a href="https://github.com/twolfson/gulp.spritesmith">gulp.spritesmith</a> </li></ul><br>  The first option is difficult to install, there are several dependencies for which additional package managers had to be installed.  If a new developer is added to the project, he will have to explain what is what.  And this is not the path we have chosen.  Also, there was no flexible configuration of the location of pictures in the sprite. <br><br>  The remaining 3 options are implementations on one <a href="https://github.com/Ensighten/spritesmith">spritesmith</a> engine.  As a result, the choice fell on the <a href="https://github.com/twolfson/gulp.spritesmith">official port</a> for Gulp. <br><br><h4>  Installation </h4><br>  The very first thing to do is install Gulp on your computer.  <a href="">Official documentation</a> will help you cope with this step. <br>  Then we put gulp.spritesmith.  In my case, the project is clean, so I put all the necessary dependencies. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs">npm i gulp gulp-stylus gulp.spritesmith --save</code> </pre> <br><br>  Now you can proceed to the setting of the generator. <br><br><h4>  Customization </h4><br>  Before proceeding directly to the description of the task, let's look at the <a href="https://github.com/twolfson/gulp.spritesmith">parameters</a> that the function accepts. <br><br><ul><li>  <b>imgName</b> - the name of the generated image <br><ul><li>  The <code>.png</code> and <code>.jpg/.jpeg</code> extensions are supported (depends on the engine used) </li><li>  image format, can be rewritten by the <code>imgOpts.format</code> property </li></ul></li><li>  <b>cssName</b> - the name of the css file that will be output <br><ul><li>  CSS-supported extensions <code>.css</code> (CSS), <code>.sass</code> (SASS), <code>.scss</code> (SCSS), <code>.less</code> (LESS), <code>.styl/.stylus</code> (Stylus), and <code>.json</code> (JSON) </li><li>  the extension can be rewritten by the <code>cssFormat</code> property </li></ul></li><li>  <b>imgPath</b> - the path to the sprite, will be written in CSS </li><li>  <b>engine</b> - the engine used to generate the sprite <br><ul><li>  the default is <code>auto</code> and the most appropriate engine on your system will be used </li><li>  supported values <code>phantomjs</code> , <code>canvas</code> , <code>gm</code> , <code>pngsmith</code> </li></ul></li><li>  <b>algorithm</b> - image sorting method <br><ul><li>  supported <code>top-down</code> values ‚Äã‚Äã(default), <code>left-right</code> , <code>diagonal</code> , <code>alt-diagonal</code> , <code>binary-tree</code> </li></ul></li><li>  <b>padding</b> - indent between pictures.  No default indent </li><li>  <b>imgOpts</b> - sprite settings <br><ul><li>  <b>format</b> - picture format <br><ul><li>  formats <code>png</code> and <code>jpg</code> supported (depends on the engine used) </li></ul></li><li>  <b>quality</b> - quality, supported only by <code>gm</code> engine </li><li>  <b>timeout</b> - delay until the rendering is completed in milliseconds (only supported by the <code>phantomjs</code> engine) </li></ul></li><li>  <b>algorithmOpts</b> - <b>algorithm</b> options <br><ul><li>  <b>sort</b> - enable / disable image sorting.  <code>true</code> default </li></ul></li><li>  <b>engineOpts</b> - engine options <br><ul><li>  <b>imagemagick</b> - true / false, priority use of <code>imagemagick</code> instead of <code>graphicsmagick</code> (available only in <code>gm</code> ) </li></ul></li><li>  <b>cssFormat</b> - select CSS file format <br><ul><li>  supported <code>css</code> (CSS), <code>sass</code> (SASS), <code>scss</code> (SCSS), <code>scss_maps</code> (SCSS using map notation), <code>less</code> (LESS), <code>stylus</code> (Stylus) and <code>json</code> (JSON) values </li></ul></li><li>  <b>cssVarMap</b> - a loop that allows you to customize the names of CSS variables </li><li>  <b>cssTemplate</b> - a function or path to the <code>mustache</code> template, giving the opportunity to customize the CSS file at the output </li><li>  <b>cssOpts</b> - CSS template options <br><ul><li>  <b>functions</b> - skip mixin generation </li><li>  <b>cssClass</b> is a loop rewriting standard CSS selectors </li></ul></li></ul><br><br>  Based on this, the simplest task will have the following form: <br><pre> <code class="javascript hljs">gulp.task(<span class="hljs-string"><span class="hljs-string">'sprite'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> spriteData = gulp.src(<span class="hljs-string"><span class="hljs-string">'./src/assets/images/sprite/*.*'</span></span>) <span class="hljs-comment"><span class="hljs-comment">// ,      .pipe(spritesmith({ imgName: 'sprite.png', cssName: 'sprite.css', })); spriteData.img.pipe(gulp.dest('./built/images/')); // ,    spriteData.css.pipe(gulp.dest('./built/styles/')); // ,    });</span></span></code> </pre><br><br>  We got this sprite: <br><img src="https://habrastorage.org/getpro/habr/post_images/a89/6a8/a43/a896a8a43e1868dbb5049d949c970004.png"><br><br>  And the following CSS: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* Icon classes can be used entirely standalone. They are named after their original file names. ```html &lt;i class="icon-home"&gt;&lt;/i&gt; ``` */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.icon-home</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(sprite.png); <span class="hljs-attribute"><span class="hljs-attribute">background-position</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span> <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.icon-home_hover</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(sprite.png); <span class="hljs-attribute"><span class="hljs-attribute">background-position</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span> -<span class="hljs-number"><span class="hljs-number">16px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.icon-instagram</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(sprite.png); <span class="hljs-attribute"><span class="hljs-attribute">background-position</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span> -<span class="hljs-number"><span class="hljs-number">32px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.icon-instagram_hover</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(sprite.png); <span class="hljs-attribute"><span class="hljs-attribute">background-position</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span> -<span class="hljs-number"><span class="hljs-number">48px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.icon-pin</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(sprite.png); <span class="hljs-attribute"><span class="hljs-attribute">background-position</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span> -<span class="hljs-number"><span class="hljs-number">64px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">12px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.icon-pin_hover</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(sprite.png); <span class="hljs-attribute"><span class="hljs-attribute">background-position</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span> -<span class="hljs-number"><span class="hljs-number">80px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">12px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.icon-tras_hover</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(sprite.png); <span class="hljs-attribute"><span class="hljs-attribute">background-position</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span> -<span class="hljs-number"><span class="hljs-number">96px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.icon-trash</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(sprite.png); <span class="hljs-attribute"><span class="hljs-attribute">background-position</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span> -<span class="hljs-number"><span class="hljs-number">112px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.icon-user</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(sprite.png); <span class="hljs-attribute"><span class="hljs-attribute">background-position</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span> -<span class="hljs-number"><span class="hljs-number">128px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.icon-user_hover</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(sprite.png); <span class="hljs-attribute"><span class="hljs-attribute">background-position</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span> -<span class="hljs-number"><span class="hljs-number">144px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; }</code> </pre><br></div></div><br><br><h5>  Fine tuning </h5><br>  Our project uses the Stylus CSS preprocessor, so it will be more convenient for me to save it as a .styl file with variables. <br>  For compactness, I turned on the <code>binary-tree</code> image distribution algorithm.  All variables, for clarity, I give the prefix <code>s-</code> .  I turn off the generation of mixins and put them into a separate file.  And I create my own CSS template, because by default a lot of unnecessary garbage is generated, which decently inflates the file and is not used by me. <br><br>  As a result, the sprite will look like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/aa5/9fc/5b0/aa59fc5b093694e01a036c50d5ffd28d.png"><br><br><div class="spoiler">  <b class="spoiler_title">js + stylus code</b> <div class="spoiler_text"><pre> <code class="javascript hljs">gulp.task(<span class="hljs-string"><span class="hljs-string">'sprite'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> spriteData = gulp.src(<span class="hljs-string"><span class="hljs-string">'./src/assets/images/sprite/*.*'</span></span>) <span class="hljs-comment"><span class="hljs-comment">// ,      .pipe(spritesmith({ imgName: 'sprite.png', cssName: 'sprite.styl', cssFormat: 'stylus', algorithm: 'binary-tree', cssTemplate: 'stylus.template.mustache', cssVarMap: function(sprite) { sprite.name = 's-' + sprite.name } })); spriteData.img.pipe(gulp.dest('./built/images/')); // ,    spriteData.css.pipe(gulp.dest('./src/styles/')); // ,    });</span></span></code> </pre><br><pre> <code class="css hljs">$<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-book</span></span> = 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-16px</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-book_hover</span></span> = 48<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-48px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-16px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-comments</span></span> = 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-16px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-comments_hover</span></span> = 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-16px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-16px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-compose</span></span> = 32<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-32px</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-compose_hover</span></span> = 32<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-32px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-16px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-faceboo_hover</span></span> = 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 32<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-32px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-facebook</span></span> = 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 32<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-16px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-32px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-globe</span></span> = 32<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 32<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-32px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-32px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-globe_hover</span></span> = 48<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-48px</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-home</span></span> = 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-home_hover</span></span> = 48<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 32<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-48px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-32px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-instagram</span></span> = 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 48<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-48px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-instagram_hover</span></span> = 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 48<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-16px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-48px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-pin</span></span> = 32<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 48<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-32px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-48px</span></span> 12<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-pin_hover</span></span> = 44<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 48<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-44px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-48px</span></span> 12<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-tras_hover</span></span> = 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-64px</span></span> 0<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-trash</span></span> = 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-64px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-16px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-user</span></span> = 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 32<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-64px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-32px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>'; $<span class="hljs-selector-tag"><span class="hljs-selector-tag">s-user_hover</span></span> = 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 48<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-64px</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-48px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 16<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 80<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> 64<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> '<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>';</code> </pre><br></div></div><br><br><h4>  Using </h4><br>  Sprite is generated, stylus file with variables is - what's next? <br>  Then we will be helped by work with all this mixins, which the plugin generates by default and which we have disabled. <br>  For them, I created a separate file <code>mixins.styl</code> . <br><br>  Contents of the <code>mixins.styl</code> file: <br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">spriteWidth</span></span>($<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span>) { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: $sprite[<span class="hljs-number"><span class="hljs-number">4</span></span>]; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">spriteHeight</span></span>($<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span>) { <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: $sprite[<span class="hljs-number"><span class="hljs-number">5</span></span>]; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">spritePosition</span></span>($<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span>) { <span class="hljs-attribute"><span class="hljs-attribute">background-position</span></span>: $sprite[<span class="hljs-number"><span class="hljs-number">2</span></span>] $sprite[<span class="hljs-number"><span class="hljs-number">3</span></span>]; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">spriteImage</span></span>($<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span>) { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(../images/$sprite[8]); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span>($<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span>) { spriteImage($sprite) spritePosition($sprite) spriteWidth($sprite) spriteHeight($sprite) }</code> </pre><br><br>  The main mixin for us is <code>sprite($sprite)</code> .  Instead of <code>$sprite</code> we <code>$sprite</code> the variable necessary to us.  For example, <code>sprite($s-home)</code> . <br>  The result is the following: <br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">background-image</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:url("..</span></span>/<span class="hljs-selector-tag"><span class="hljs-selector-tag">images</span></span>/<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.png</span></span>"); <span class="hljs-selector-tag"><span class="hljs-selector-tag">background-position</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:0</span></span> 0; <span class="hljs-selector-tag"><span class="hljs-selector-tag">width</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:16px</span></span>; <span class="hljs-selector-tag"><span class="hljs-selector-tag">height</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:16px</span></span></code> </pre><br>  Mixin allows us to immediately display the width and height of the image - this is very convenient, especially when using pseudo-elements for decoration. <br>  <a href="http://krekotun.github.io/gulp-sprite-generation/">Working example</a> <br><br><h4>  Problems </h4><br>  For all the time of using this solution, I met only one problem. <br>  When <code>:hover</code> and <code>:active</code> icon will flash.  This happens because the <code>sprite</code> mixin generates a <code>background-image</code> each time and the browser substitutes this image when it is hover. <br>  After some thought and reading the documentation of the <code>stylus</code> , a solution was found. <br>  We just need to check for the presence of the above pseudo-classes at the selector.  If they are, then we skip the output of <code>spriteImage($sprite)</code> . <br><br>  Final <code>mixin</code> <br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span>($<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">if</span></span> !<span class="hljs-selector-tag"><span class="hljs-selector-tag">match</span></span>('<span class="hljs-selector-tag"><span class="hljs-selector-tag">hover</span></span>', <span class="hljs-selector-tag"><span class="hljs-selector-tag">selector</span></span>()) &amp;&amp; !<span class="hljs-selector-tag"><span class="hljs-selector-tag">match</span></span>('<span class="hljs-selector-tag"><span class="hljs-selector-tag">active</span></span>', <span class="hljs-selector-tag"><span class="hljs-selector-tag">selector</span></span>()) <span class="hljs-selector-tag"><span class="hljs-selector-tag">spriteImage</span></span>($<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">spritePosition</span></span>($<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">spriteWidth</span></span>($<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">spriteHeight</span></span>($<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span>)</code> </pre><br><br>  Unfortunately, it‚Äôs impossible to foresee all the options - sometimes it can be a class change through js, so we can just use <br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">spritePosition</span></span>($<span class="hljs-selector-tag"><span class="hljs-selector-tag">sprite</span></span>)</code> </pre><br>  if the picture was previously announced. <br><br><h4>  Total </h4><br>  I have been working with this solution for almost a month and I can say that it saves a lot of time.  Strive to automate any routine and use your time as efficiently as possible. <br><br>  I have prepared a <a href="https://github.com/Krekotun/gulp-sprite-generation">repository with a working example</a> for you, which you can use as a basis for your projects or just watch its work. <br><br><h4>  Links </h4><br><ul><li>  <a href="http://krekotun.github.io/gulp-sprite-generation/">Working example</a> </li><li>  <a href="https://github.com/Krekotun/gulp-sprite-generation">Code Repository</a> </li><li>  <a href="https://github.com/twolfson/gulp.spritesmith">gulp.spritesmith</a> </li><li>  <a href="http://gulpjs.com/">Gulp</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/227945/">https://habr.com/ru/post/227945/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../227933/index.html">As I walked on campus: notes of a bystander</a></li>
<li><a href="../227935/index.html">Another Pattern Matching in C # - now with context building</a></li>
<li><a href="../227937/index.html">History of one logo</a></li>
<li><a href="../227939/index.html">Samsung and Google will increase the level of information protection in Android</a></li>
<li><a href="../227943/index.html">Cluster service on Erlang: from idea to deb-package</a></li>
<li><a href="../227949/index.html">How are Internet things created ?!</a></li>
<li><a href="../227951/index.html">Happy birthday, Elon Musk!</a></li>
<li><a href="../227953/index.html">Energy transfer by water and single wire transmission</a></li>
<li><a href="../227957/index.html">Parallella board sales from Adapteva resumed.</a></li>
<li><a href="../227959/index.html">Introduction to PostgreSQL BDR</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
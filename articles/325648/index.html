<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to make friends Telegram-bot with telephony</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is very difficult to adapt your own products to the rapidly changing world of technology and trends. For example, instant messengers that were two ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to make friends Telegram-bot with telephony</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/879/a8a/746/879a8a74692d4681b135ec866cdc8c6a.png"></div><br><p>  It is very difficult to adapt your own products to the rapidly changing world of technology and trends.  For example, instant messengers that were two or three years ago were affiliates of forums (a typical use case is friendship of mummies with wheelchairs against cars in the yard), and today these are: a) internal communication in the corporation;  b) again, communication in business, but external (company-clients);  c) the chatbots' habitat; and d) a whole world of possibilities for creating these chatbots themselves and integrating them with everything that moves technologically. </p><br><p>  One of the ideas about combining the capabilities of a virtual PBX with the capabilities of bots, which I'll talk about today, in general, was on the surface - to fasten the simplest chat bot of notifications of missed calls to Telegram (hello to <a href="https://habrahabr.ru/users/sguslya/" class="user_link">sguslya</a> , who in my <a href="https://habrahabr.ru/company/uis/blog/324104/">previous article</a> about API- designers confirmed that such a case is interesting).  The scheme is good because telephony users do not have to be programmers, it‚Äôs easy to repeat. </p><a name="habracut"></a><br><p>  Why is it needed?  For example, to send information about missed calls to the sales groups.  This makes it possible for the company‚Äôs employees to quickly agree on whose contact and contact him without any confusion or calls from several managers to a single potential client. </p><br><p>  So, for my recipe, you will need a <a href="https://www.uiscom.ru/virtualnaya-ats/%3Futm_source%3Dpr%26utm_medium%3Dpr%26utm_campaign%3Dhabr%26utm_term%3D04_04_2017%26utm_content%3D04_04_2017">UIS</a> , <a href="https://ifttt.com/">IFTTT</a> and Telegram account.  We solve the problem in 4 stages: </p><br><ol><li>  Configuring the Maker Connector for HTTP Notifications in IFTTT </li><li>  Configuring a Telegram Connector in IFTTT </li><li>  Configuring notifications in UIS </li><li>  Final integration setup </li></ol><br><h2>  Configuring the Maker Connector for HTTP Notifications in IFTTT </h2><br><p>  Enter in the search bar in IFTTT "Maker" and click on the service we need - Maker. </p><br><img src="https://habrastorage.org/files/777/459/6eb/7774596eb93e40f9a082c4438412ece5.png"><br><br><p>  We were redirected to the Maker Connector page and now it needs to be configured.  To do this, go to the Settings section. </p><br><img src="https://habrastorage.org/files/328/b98/542/328b98542cb64499b46a5d634940c120.png"><br><br><p>  First of all, you need to connect the Maker service: to do this, click Connect. </p><br><img src="https://habrastorage.org/files/6bd/bdd/86e/6bdbdd86e73a4abebdba2d34aedc59f5.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>  If everything worked out, then your personal connector will be activated, which will be reported to you in the Status column.  For information about the format of requests received, you need to follow the link indicated in the URL column. </p><br><img src="https://habrastorage.org/files/a02/680/b45/a02680b45c2f4e59b0f184c7d1fbfa13.png"><br><br><p>  On the page that opens, we see the format of the request URL and the ability to transfer 3 parameters with a free field.  These settings and the information received will be enough for us to proceed to the next stage. </p><br><img src="https://habrastorage.org/files/684/3b7/ce4/6843b7ce4ff24cfe855e7c839bbe7c04.png"><br><br><h2>  Configuring a Telegram Connector in IFTTT </h2><br><p>  We are looking for the Telegram service among the IFTTT applets. </p><br><img src="https://habrastorage.org/files/19c/01e/284/19c01e2840464cc68b571621df7c2e75.png"><br><br><p>  Go to the service page. </p><br><img src="https://habrastorage.org/files/092/ef8/f0d/092ef8f0dcd34ae8bca3078da5a1f7fc.png"><br><br><p>  Go to Settings (Settings) and connect the connector. </p><br><img src="https://habrastorage.org/files/08d/d19/786/08dd1978630d498fb4411846d2c71284.png"><br><br><p>  After activating the connector, Telegram will send you an informational message from the IFTTT bot.  To activate the bot you will need to run the command / start. </p><br><img src="https://habrastorage.org/files/67b/f22/f27/67bf22f27562450a82ca0a9ece50eb7c.png"><br><br><p>  Everything, now you can connect the group to the Telegram or the channel, if you want the messages to be distributed to all employees of the company who are also users of the Telegram service. </p><br><h2>  Configuring notifications in UIS </h2><br><p>  At this stage, we will need updated UIS <a href="https://www.uiscom.ru/virtualnaya-ats/vozmozhnosti/uvedomleniya-o-sobytiyakh/%3Futm_source%3Dpr%26utm_medium%3Dpr%26utm_campaign%3Dhabr%26utm_term%3D04_04_2017%26utm_content%3D04_04_2017">event notification</a> functionality. Notifications 2.0.  To do this, we go to the appropriate section of the interface and click Add notification. </p><br><img src="https://habrastorage.org/files/347/0a6/e75/3470a6e75dc547e583851eb997228a02.png"><br><br><p>  In the settings of the added notification, select the POST method, indicate the link we received from the Maker connector, insert the body with the indication of tokens, to the place of which the information about the call will be supplied. </p><br><img src="https://habrastorage.org/files/322/c99/c43/322c99c431b246038af4e0ddc97e11ac.png"><br><br><h2>  Final integration setup </h2><br><p>  So, when all the components are prepared, it remains to combine them.  First you need to create a new applet - to do this, click the New Applet on the My Applets page in IFTTT. </p><br><img src="https://habrastorage.org/files/b28/11d/802/b2811d802bb24ffaa3d7b185276bbc92.png"><br><br><p> This action will take you to the page where you configure the Event-Action bundle.  It is configured in a laconic sentence if this then that (if this (event) happens, then do that (action)).  Let's start with the event: click on ‚Äú+ this‚Äù. </p><br><img src="https://habrastorage.org/files/c5b/425/cd5/c5b425cd542f4d178f9c6a80e6622698.png"><br><br><p>  We get to the services search page, on which we look for the Maker that we set up. </p><br><img src="https://habrastorage.org/files/3f0/d59/31e/3f0d5931eda241848a2a1deace194803.png"><br><br><p>  When choosing Maker, we will be asked to indicate which trigger to create.  There is only one choice, we choose it. </p><br><img src="https://habrastorage.org/files/bbe/538/246/bbe5382462f24faf94ef2477e6ae04bd.png"><br><br><p>  Now we need to tune the trigger.  To do this, we specify the name of the event, which we have already prudently indicated in the URL in the notification settings, and complete the creation of the trigger. </p><br><img src="https://habrastorage.org/files/4c0/b3a/eed/4c0b3aeedccb48faa28bef4f083b5cd5.png"><br><br><p>  It remains to configure the action.  To do this, click "+ that". </p><br><img src="https://habrastorage.org/files/735/311/f1d/735311f1db984ed384200f8d6caf9d0e.png"><br><br><p>  Select the already configured Telegram connector. </p><br><img src="https://habrastorage.org/files/2cf/3ed/5be/2cf3ed5be9444a528cf62efec4bdfdff.png"><br><br><p>  Select the action of interest to us - sending a message. </p><br><img src="https://habrastorage.org/files/5bc/0b2/9fb/5bc0b29fbba24203912c358476b95f90.png"><br><br><p>  Finish the setting by filling out the template.  The parameters correspond to those configured in the notification template in UIS. </p><br><img src="https://habrastorage.org/files/2a9/8b3/faa/2a98b3faac9945b096f2d012d4d48bc5.png"><br><br><p>  Confirm the completion of the setting. </p><br><img src="https://habrastorage.org/files/91b/e44/5b4/91be445b476d41f4bd4ac3ebe40b1a4b.png"><br><br><p>  Everything, now at the lost calls you will receive the following message in Telegram: </p><br><img src="https://habrastorage.org/files/671/b79/d7f/671b79d7f6874d1ab584910ab018c3e2.png"><br><br><p>  If you have questions, I will gladly answer.  I would also be happy if you tell me what else you would be interested to learn from similar stories of telephony integration with other tools, about the API, etc. </p></div><p>Source: <a href="https://habr.com/ru/post/325648/">https://habr.com/ru/post/325648/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325638/index.html">Why do the Russian labor market need women programmers?</a></li>
<li><a href="../325640/index.html">We write the mnemonic editor for SCADA-system on Fabric.js. Part 2</a></li>
<li><a href="../325642/index.html">Top PostgreSQL Development Tools</a></li>
<li><a href="../325644/index.html">We read binary files of iOS-applications. Part 2: Swift</a></li>
<li><a href="../325646/index.html">3D graphics on the web</a></li>
<li><a href="../325650/index.html">Oscillating link model using symbolic and numerical solutions of a differential equation on SymPy and NumPy</a></li>
<li><a href="../325652/index.html">Zabbix Moscow Meetup in the office of Badoo on April 15</a></li>
<li><a href="../325654/index.html">Open machine learning course. Theme 7. Teaching without a teacher: PCA and clustering</a></li>
<li><a href="../325656/index.html">Summer is coming - it's time to apply to the summer school (internship) of Intel</a></li>
<li><a href="../325658/index.html">Symfony Flex, what your symfony 4 application will look like</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Upgrading Django from version 1.9 to version 2.0</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, today I would like to tell you about how to upgrade the project from version 1.9 to 2.0. What are the main nuances to consider and rewrite in o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Upgrading Django from version 1.9 to version 2.0</h1><div class="post__text post__text-html js-mediator-article">  Hello, today I would like to tell you about how to upgrade the project from version 1.9 to 2.0.  What are the main nuances to consider and rewrite in order for the project to start on the new version of Django. <br><br><h3>  First step </h3><br>  This is a Django update to version 2.0, as well as an update of all of your related packages that are used in the project, because  I use virtual environment and requirements.txt, then for me this is one way, for you there may be another. <br><br>  After you have updated all the packages, you should not start the project, it will not start anyway, so we will immediately start fixing all the main points so that the project can start. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  The second step.  Update all urls.py of your project </h3><br>  In your main urls.py, in which you include urls from other aplicas, we connect: <br>  from django.urls import re_path, path. <br><br>  And we change from url to path, as well as remove regular expressions in these connections. <br><br><pre><code class="python hljs">url(<span class="hljs-string"><span class="hljs-string">r'^ some/'</span></span>, include(<span class="hljs-string"><span class="hljs-string">'some.urls'</span></span>)), <span class="hljs-comment"><span class="hljs-comment">#   path('some/', include('some.urls')),</span></span></code> </pre> <br>  If you use views directly from this aplicashin, which are required by regularizers, then we use: <br><br><pre> <code class="python hljs">re_path(<span class="hljs-string"><span class="hljs-string">r'^app/$'</span></span>, App.as_view(), name=<span class="hljs-string"><span class="hljs-string">'app'</span></span>)</code> </pre> <br>  In connected aplikashinas (for example, some / urls.py), in the urls.py file, we use: <br><br><pre> <code class="python hljs">re_path(<span class="hljs-string"><span class="hljs-string">r'^create/$'</span></span>, Create.as_view(), name=<span class="hljs-string"><span class="hljs-string">'create'</span></span>)</code> </pre> <br>  If you use the namespace in urls during the installation, then remove them from there and transfer them directly to the connected application.  Go to urls.py of this application and write on top above urlpatterns = [] <br><br><pre> <code class="python hljs">app_name = <span class="hljs-string"><span class="hljs-string">'app-application'</span></span></code> </pre> <br>  This line serves as a replacement for the namespace and is designed to make the main urls.py cleaner and more readable, as well as for the convenience of changing names in one place. <br><br><h3>  Third step </h3><br>  We use the search for the entire project, depending on your code editor, which you use when developing, these may be different hot keys, I think you know them, so I will not stop here. <br><br>  We drive in: <br><br><pre> <code class="python hljs">is_authenticated()</code> </pre> <br>  And change to <code>is_authenticated</code> .  Now this is not a method, but a property.  This error will raise an exception. <br><br>  Next in the project we are looking for: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.core.urlresolvers <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> reverse</code> </pre> <br>  And change to: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.urls <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> reverse</code> </pre> <br><h3>  Fourth step </h3><br>  Now in all models.ForeignKey, the ‚Äúon_delete‚Äù argument must be positionally required, for example: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">on_delete=models.CASCADE on_delete=models.DO_NOTHING on_delete=models.SET_NULL</span></span></code> </pre> <br>  Next we do: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">python manage.py makemigrations python manage.py migrate</span></span></code> </pre> <br><h3>  Fifth step </h3><br>  If you try to start a project, it should already start, but immediately it will give you an error as soon as you log in at 127.0.0.1:8000. <br><br>  The error will be as follows: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">AttributeError at / 'WSGIRequest' object has no attribute 'user'</span></span></code> </pre> <br>  It happens because you need to rename MIDDLEWARE_CLASSES to MIDDLEWARE <br>  Next you will get the following error in the console: <br><br> <code>django.core.exceptions.ImproperlyConfigured: WSGI application 'application' could not be loaded; Error importing module: 'application doesn't look like a module path</code> <br> <br>  This error is due to the fact that you have old middleware, and you have to update them to: <br><br><pre> <code class="python hljs"><span class="hljs-string"><span class="hljs-string">'django.contrib.sessions.middleware.SessionMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.middleware.common.CommonMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.middleware.csrf.CsrfViewMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.contrib.auth.middleware.AuthenticationMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.contrib.messages.middleware.MessageMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.middleware.clickjacking.XFrameOptionsMiddleware'</span></span>, <span class="hljs-string"><span class="hljs-string">'django.middleware.security.SecurityMiddleware'</span></span></code> </pre> <br><h3>  Sixth step </h3><br>  If you use your own middleware in the project, then they should be inherited from Middleware Mixed, and not from object (you can also use object, but then you need to write additional required methods). <br><br>  Import: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.utils.deprecation <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MiddlewareMixin</code> </pre> <br>  That's all!  :) <br><br>  Of course, if you have a very large project and you use a large number of packages, then you will have more problems, but the chain of errors in the console will help you solve them and run the project in the proper mode.  This guide describes the main errors and ways to solve them that are relevant for all projects with Django 1.9 (some points are not relevant for the version of Django 1.11), and will help to quickly transfer the project to Django 2.0, as well as to avoid unnecessary loss of time for analysis and search making common mistakes. </div><p>Source: <a href="https://habr.com/ru/post/417837/">https://habr.com/ru/post/417837/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../417825/index.html">"Expanded boundaries": 6 GHz band will give to the needs of Wi-Fi</a></li>
<li><a href="../417827/index.html">Free Wi-Fi: German court overruled fines for coffee shops for copyright-infringement of customers</a></li>
<li><a href="../417829/index.html">Reduce the number of layers of architecture from 5 to 2</a></li>
<li><a href="../417831/index.html">Living with Java SE 8 and Java SE 11 at $ 25 per processor per month</a></li>
<li><a href="../417835/index.html">"Empire at depth": why large IT companies are laying their submarine cables</a></li>
<li><a href="../417839/index.html">Attackers use the game "Clash of Clans" to launder money from stolen credit cards</a></li>
<li><a href="../417841/index.html">Forbid, or useful plugins for ESLint</a></li>
<li><a href="../417843/index.html">Brain Trainer Qt (learn to count in your mind or a weekend project)</a></li>
<li><a href="../417845/index.html">Decrease apk size (reasonably)</a></li>
<li><a href="../417849/index.html">Bobinniki: a brief history of reel-to-reel tape recorders and a growing interest in the audio gadget today</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How-to: Expand Oracle Real Application Cluster 11g on VirtualBox</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Background 
 Our company is engaged in serial production of equipment for purely peaceful purposes and all related information from the production ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How-to: Expand Oracle Real Application Cluster 11g on VirtualBox</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/20f/8be/4d1/20f8be4d1eb74e9793e5aa2e7e311f92.jpg"><br><br><h4>  1. Background </h4><br>  Our company is engaged in serial production of equipment for purely peaceful purposes and all related information from the production is written to the Oracle database, which is located on a virtual server running <a href="https://ru.wikipedia.org/wiki/VMware_ESX">VMware ESX</a> .  And everything seems to be adjusted, the pipeline is working, data is being written, the finished product is being shipped. <br><br>  But the rack, on which, in addition to the database server, is still based on a bunch of some incomprehensible servers, sometimes has the amazing property of falling.  Yes, and from the database at one point, anything can happen.  Of course, the first thing that comes to mind is a competent database backup organization or VMware spapshot creation.  However, all these actions, in case of equipment failure, do not allow for continuous operation of the database and the entire pipeline, respectively.  In general, I wanted to try out other solutions. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When the IT department once again held a meeting on this issue, it was decided to try the idea to raise the <a href="https://ru.wikipedia.org/wiki/Oracle_RAC">Oracle Real Application Cluster</a> and deploy a production database on it.  The only problem was that no one at that time knew how to do it. <br><br>  Before purchasing hardware and deploying new servers, it was decided to test the selected technology locally using <a href="https://ru.wikipedia.org/wiki/VirtualBox">VM VirtualBox</a> .  After several weeks, smoothly moving into the months, searching and digesting the necessary information as air, the cluster was finally launched, and one could proceed to the first tests.  And so, anyone who wants to raise the <i>n</i> -nodovy ( <i>n&gt; = 2</i> ) cluster, welcome under cat. <a name="habracut"></a><br><br><h4>  2. Software </h4><br>  At first, I would like to announce the entire list of software that was used to build the cluster: <br><ol><li>  Oracle VM VirtualBox.  At the time of this writing, the latest version for Windows was 4.3.14.  You can download it <a href="http://www.oracle.com/technetwork/server-storage/virtualbox/downloads/index.html%3FssSourceSiteId%3Docomcaen">here</a> ; </li><li>  Oracle Linux Server 6.5 for x86-64.  The nodes of the future cluster will be deployed on this axis; </li><li>  Oracle Grid Infrastructure 11g Release 2 (11.2.0.3.0) for Linux x86-64; </li><li>  Oracle Database 11g Release 2 (11.2.0.3.0) for Linux x86-64; </li><li>  CentOS 6.4 or any other axis for DNS server. </li></ol><br><h4>  3. Description of cluster infrastructure </h4><br>  Our cluster will consist of 3 virtual machines: on the first 2 nodes of the cluster will be located directly, and the 3rd will be used as a DNS server.  5 VDI ( <i>Virtual Disk Image</i> ) created in a special way will be simultaneously connected to all the nodes of the cluster.  A disk group will be created from these disks to store Oracle database data. <br><br><div class="spoiler">  <b class="spoiler_title">Sketch a diagram of how this should look like:</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/5a0/d51/82e/5a0d5182e0bd41778195bb6aba445715.png"><br></div></div><br><h5>  3.1 Network infrastructure </h5><br>  To build a cluster, 3 subnets will be used: <br><ol><li>  LAN 1: external network interface, used to connect clients to the database; </li><li>  LAN 2: internal network interface for interconnect; </li><li>  LAN 3: An external network with Internet access, necessary for installing and updating packages during the installation phase. </li></ol><br>  Next we need the network addresses that the cluster will use.  How and where to set them, I will tell later. <br><div class="spoiler">  <b class="spoiler_title">Here are the addresses that will be involved in the cluster.</b> <div class="spoiler_text"><table><tbody><tr><td>  <b>SERVER NAME</b> </td><td></td><td>  <b>LAN 1</b> <b><br></b>  <b>(192.168.56.0/24)</b> </td><td>  <b>LAN 2</b> <b><br></b>  <b>(10.0.0.0/24)</b> </td><td>  <b>LAN 3</b> <b><br></b>  <b>(172.30.0.0/14)</b> </td></tr><tr><td rowspan="5">  dns-server </td><td>  Device </td><td>  eth0 </td><td rowspan="5"></td><td>  eth1 </td></tr><tr><td>  IP Address </td><td>  192.168.56.101 </td><td>  172.30.201.101 <sup>*</sup> </td></tr><tr><td>  Network mask </td><td>  255.255.255.0 </td><td>  255.255.0.0 </td></tr><tr><td>  Gateway </td><td>  192.168.56.1 <sup>*</sup> </td><td>  172.30.0.1 <sup>**</sup> </td></tr><tr><td>  DNS </td><td>  127.0.0.1 </td><td>  172.30.1.3 <sup>***</sup> <br>  172.30.1.8 <sup>***</sup> </td></tr><tr><td colspan="5"></td></tr><tr><td rowspan="5">  rac1-node </td><td>  Device </td><td>  eth0 </td><td>  eth1 </td><td rowspan="5"></td></tr><tr><td>  IP Address </td><td>  192.168.56.111 </td><td>  10.0.0.111 </td></tr><tr><td>  Network mask </td><td>  255.255.255.0 </td><td>  255.255.255.0 </td></tr><tr><td>  Gateway </td><td>  192.168.56.101 </td><td>  10.0.0.1 <sup>*</sup> </td></tr><tr><td>  DNS </td><td>  192.168.56.101 </td><td></td></tr><tr><td colspan="5"></td></tr><tr><td rowspan="5">  rac2-node </td><td>  Device </td><td>  eth0 </td><td>  eth1 </td><td rowspan="5"></td></tr><tr><td>  IP Address </td><td>  192.168.56.112 </td><td>  10.0.0.112 </td></tr><tr><td>  Network mask </td><td>  255.255.255.0 </td><td>  255.255.255.0 </td></tr><tr><td>  Gateway </td><td>  192.168.56.101 </td><td>  10.0.0.1 <sup>*</sup> </td></tr><tr><td>  DNS </td><td>  192.168.56.101 </td><td></td></tr></tbody></table><br>  * IP addresses of virtual host adapters; <br>  ** IP address of the gateway used by the host; <br>  *** IP addresses of external DNS servers. <br></div></div><br>  In addition, we still need <i>SCAN (Single Client Access Name)</i> and <i>VIP addresses</i> . <br>  <b>SCAN addresses.</b>  With this technology, all clients are configured to access the same service name, which can be resolved to multiple IP addresses using a DNS server, each of which has a public LISTENER hanging on it.  The number of SCAN addresses is determined by the expression <i>n + 1</i> , where <i>n</i> is the number of nodes of the cluster: <br><pre><code class="bash hljs">192.168.56.121 192.168.56.122 192.168.56.123</code> </pre> <br>  <b>VIP addresses.</b>  These are logical network addresses assigned to nodes on external network interfaces.  As soon as some cluster node becomes unavailable, the other node in the cluster should, <s>in theory</s> , pick up its VIP address and temporarily continue to service its own and, <s>if possible</s> , the requests of the fallen node. <br><pre> <code class="bash hljs">192.168.56.113 192.168.56.114</code> </pre><br><h5>  3.2 Disk subsystem </h5><br>  The operation of <i>Oracle Grid Infrastructure</i> requires total disk space available for all nodes of the cluster.  There are two options for organizing such storage: it is <i>Oracle Automatic Storage Management</i> ( <a href="http://habrahabr.ru/post/72122/">Oracle ASM</a> ) and <i>Shared File System</i> .  When using the second option, everything is quite simple: on a separate server, NFS-balls are created, which are mounted on each node of the cluster (additional mounting options are needed), the storage itself is configured. <br><div class="spoiler">  <b class="spoiler_title">The following actions are not useful to us, but if suddenly, then ...</b> <div class="spoiler_text">  Mounting NFS balls for <i>Shared File System</i> : <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># mkdir -p /st_nfs0 # mkdir -p /st_nfs1 # mkdir -p /st_nfs2</span></span></code> </pre><br>  Open <code>/etc/fstab</code> and add entries: <br><pre> <code class="bash hljs">storage-server:/mnt/nfs0 /st_nfs0 nfs <span class="hljs-built_in"><span class="hljs-built_in">bg</span></span>,intr,noac,acregmin=0,acregmax=0,acdirmin=0,acdirmax=0 0 0 storage-server:/mnt/nfs1 /st_nfs1 nfs <span class="hljs-built_in"><span class="hljs-built_in">bg</span></span>,intr,noac,acregmin=0,acregmax=0,acdirmin=0,acdirmax=0 0 0 storage-server:/mnt/nfs2 /st_nfs2 nfs <span class="hljs-built_in"><span class="hljs-built_in">bg</span></span>,intr,noac,acregmin=0,acregmax=0,acdirmin=0,acdirmax=0 0 0</code> </pre></div></div><br>  <b>ASM</b> is a new way to manage storage, which is the basis of the database.  Built into the <i>Oracle Database</i> kernel, it provides file system and volume manager integration for database files.  Starting with version 11gR2, ASM implements the <i>ASM Cluster File System</i> and <i>ASM Dynamic Volume Manager</i> .  These ASM capabilities are an alternative to third-party file system and volume management solutions for databases and applications, for tasks such as creating and deploying databases, managing space on disks, placing executable application files, and other similar tasks. <br><br>  Despite the complexity of implementation, we stop the choice on Oracle ASM.  This ends the theory and proceeds to install the software. <br><br><h4>  4. Install Oracle VM VirtualBox </h4><br>  At the stage of installing VBox there is nothing difficult.  The only thing I would like to note, after installing VBox, add the installation path to the <code>Path</code> variable in the list of system variables.  In the future it will be very useful to us. <br><br>  In the next step, we need to add and configure virtual host adapters.  By default, the VBox creates one adapter named <code>VirtualBox Host-Only Ethernet Adapter</code> .  Using the program menu, create another adapter named <code>VirtualBox Host-Only Ethernet Adapter #2</code> . <br><br><div class="spoiler">  <b class="spoiler_title">Properties of PTC / IPv4 adapter:</b> <div class="spoiler_text">  Next, go to <b><i>Control Panel \ Network and Internet \ Network Connections,</i></b> and in the <u>properties of the PTC / IPv4</u> adapter, write the following: <br><pre> <code class="bash hljs">VirtualBox Host-Only Ethernet Adapter: IP Address: 192.168.56.1 Mask: 255.255.255.0</code> </pre><br><pre> <code class="bash hljs">VirtualBox Host-Only Ethernet Adapter <span class="hljs-comment"><span class="hljs-comment">#2 IP Address: 10.0.0.1 Mask: 255.255.255.0</span></span></code> </pre><br></div></div><br>  This completes the VBox configuration, you can proceed to the creation of a VM. <br><br><h4>  5. Setup and configuration of the DNS server </h4><br>  As the distribution kit for the future DNS server, I chose the one that first came into view.  It turned out to be the <i>CentOS 6.4 x86_64</i> distribution kit. <br><br><h5>  5.1 VM Configuration </h5><br><div class="spoiler">  <b class="spoiler_title">Here are my settings:</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/593/130/e33/593130e33b704f8ea2fcd123411a19cc.png"><br><br>  On the Network tab, select the <b><i>Virtual Host Adapter</i></b> as the 1st adapter: <br><img src="https://habrastorage.org/files/a41/885/2c0/a418852c05464c6ebd021e3f7521d6fa.png"><br><br>  2nd adapter - <b><i>Network bridge</i></b> (you can use NAT) with an adapter that looks to the external network: <br><img src="https://habrastorage.org/files/d06/caf/889/d06caf889b0e4060a91662d8c8bb6ce1.png"><br></div></div><br><h5>  5.2 Installing the OS </h5><br><div class="spoiler">  <b class="spoiler_title">Detailed process</b> <div class="spoiler_text">  Go to the OS installation.  Set our server name: <code>dns-server.test.com.by</code> : <br><img src="https://habrastorage.org/files/574/fa1/8f6/574fa18f6e67432eb33b80d6cca5af83.png"><br><br>  Immediately click <b><i>Configure network</i></b> and alternately set parameters for both adapters: <br><img src="https://habrastorage.org/files/b13/03a/227/b1303a22715c48bd8095dcadd5e65bae.png"><br><br>  Set the option <b><i>Connect automatically</i></b> .  Otherwise, every time after restarting the machine, the network will have to be turned on manually: <br><img src="https://habrastorage.org/files/0b9/f11/13e/0b9f1113e7da4a368216a71e4ff37d71.png"><br><br>  Set IPv4 options: <br><img src="https://habrastorage.org/files/44e/2e9/e70/44e2e9e707e94a64a5a278cc10f9b155.png"><br><br>  Similarly, we do everything for the 2nd interface: <br><img src="https://habrastorage.org/files/6d2/840/6b6/6d28406b676848609db234834fab091e.png"><br><br>  If the external network has its own DHCP server, or you chose NAT, then the IPv4 parameters can be not configured: <br><img src="https://habrastorage.org/files/267/1a9/998/2671a999897b47a588b9175cc170aa00.png"><br><br>  We choose the minimum installation - this will be quite enough for our server: <br><img src="https://habrastorage.org/files/2a3/a07/3f4/2a3a073f43b740e88141297cd4c8f7cc.png"><br><br>  We are waiting, <s>fingers crossed</s> , the end of the installation: <br><img src="https://habrastorage.org/files/554/8dc/9c1/5548dc9c15a84c7b9c8bcb3cc897a3fd.png"><br></div></div><br><h5>  5.3 BIND configuration </h5><br>  Before starting the further configuration of the system, in order to avoid the questions <i>‚ÄúWell, I think I did everything correctly, why it doesn‚Äôt work?‚Äù</i> , I recommend to <u>turn off the Firewall</u> for a while. <br><br>  Check the status: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># service iptables status</span></span></code> </pre><br>  And disable: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># service iptables stop # chkconfig iptables off</span></span></code> </pre><br>  We will use <a href="https://ru.wikipedia.org/wiki/BIND">BIND</a> as the DNS server. <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># yum install named</span></span></code> </pre><br>  Next, you need to edit the <code>named.conf</code> file: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># nano /etc/named.conf</span></span></code> </pre><br>  * IMHO, for these purposes it is best to use Midnight Commander or WinSCP. <br><br><div class="spoiler">  <b class="spoiler_title">Here is what we should have at the exit:</b> <div class="spoiler_text"><pre> <code class="bash hljs">// named.conf logging { channel <span class="hljs-string"><span class="hljs-string">"xfer"</span></span> { file <span class="hljs-string"><span class="hljs-string">"/var/log/named/xfer.log"</span></span> versions 3 size 10m; <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>-time yes; <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>-severity yes; severity info; }; channel <span class="hljs-string"><span class="hljs-string">"lame"</span></span> { file <span class="hljs-string"><span class="hljs-string">"/var/log/named/lamers.log"</span></span> versions 2 size 10m; <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>-time yes; <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>-severity yes; severity info; }; channel <span class="hljs-string"><span class="hljs-string">"config"</span></span> { file <span class="hljs-string"><span class="hljs-string">"/var/log/named/conf.log"</span></span> versions 3 size 10m; <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>-time yes; <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>-severity yes; severity info; }; channel <span class="hljs-string"><span class="hljs-string">"security"</span></span> { file <span class="hljs-string"><span class="hljs-string">"/var/log/named/security.log"</span></span> versions 3 size 10m; <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>-time yes; <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>-severity yes; severity info; }; category <span class="hljs-string"><span class="hljs-string">"xfer-in"</span></span> { <span class="hljs-string"><span class="hljs-string">"xfer"</span></span>; }; category <span class="hljs-string"><span class="hljs-string">"xfer-out"</span></span> { <span class="hljs-string"><span class="hljs-string">"xfer"</span></span>; }; category <span class="hljs-string"><span class="hljs-string">"notify"</span></span> { <span class="hljs-string"><span class="hljs-string">"xfer"</span></span>; }; category <span class="hljs-string"><span class="hljs-string">"lame-servers"</span></span> { <span class="hljs-string"><span class="hljs-string">"lame"</span></span>; }; category <span class="hljs-string"><span class="hljs-string">"config"</span></span> { <span class="hljs-string"><span class="hljs-string">"config"</span></span>; }; category <span class="hljs-string"><span class="hljs-string">"security"</span></span> { <span class="hljs-string"><span class="hljs-string">"security"</span></span>; }; category <span class="hljs-string"><span class="hljs-string">"default"</span></span> { <span class="hljs-string"><span class="hljs-string">"default_syslog"</span></span>; <span class="hljs-string"><span class="hljs-string">"default_debug"</span></span>; }; }; acl <span class="hljs-string"><span class="hljs-string">"test_net"</span></span> { localhost; 192.168.56.0/24; }; options { directory <span class="hljs-string"><span class="hljs-string">"/var/named"</span></span>; dump-file <span class="hljs-string"><span class="hljs-string">"/var/named/data/cache_dump.db"</span></span>; statistics-file <span class="hljs-string"><span class="hljs-string">"/var/named/data/named_stats.txt"</span></span>; memstatistics-file <span class="hljs-string"><span class="hljs-string">"/var/named/data/named_mem_stats.txt"</span></span>; version <span class="hljs-string"><span class="hljs-string">"DNS Server"</span></span>; allow-recursion { test_net; }; allow-query { test_net; }; forwarders { 172.30.1.3; 172.30.1.8; }; forward only; listen-on port 53 { localhost; 192.168.56.101; }; <span class="hljs-comment"><span class="hljs-comment">### Master DNS IP ### dnssec-enable no; dnssec-validation no; dnssec-lookaside auto; /* Path to ISC DLV key */ bindkeys-file "/etc/named.iscdlv.key"; managed-keys-directory "/var/named/dynamic"; }; zone "." IN { type hint; file "named.ca"; }; zone"test.com.by" IN { type master; file "forward.test"; allow-update { none; }; }; zone"56.168.192.in-addr.arpa" IN { type master; file "reverse.test"; allow-update { none; }; }; include "/etc/named.rfc1912.zones"; include "/etc/named.root.key";</span></span></code> </pre></div></div><br>  Creating report files: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># cd /var/named/chroot/var/log/named # touch conf.log # touch lamers.log # touch security.log # touch xfer.log</span></span></code> </pre><br>  Recursively assign access rights to the entire directory: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># cd /var/named/chroot/var/log # chmod 750 -R named # chown -R named:named named</span></span></code> </pre><br>  To create a direct zone, go to the directory: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># cd /var/named</span></span></code> </pre><br>  and create the <code>forward.test</code> file: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># touch forward.test # chmod 750 forward.test # chown named:named forward.test</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">The contents of the file direct zone:</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$TTL</span></span> 86400 @ IN SOA dns-server.test.com.by. root.test.com.by. ( 2011071001 ;Serial 3600 ;Refresh 1800 ;Retry 604800 ;Expire 86400 ;Minimum TTL ) @ IN NS dns-server.test.com.by. @ IN A 192.168.56.101 @ IN A 192.168.56.111 @ IN A 192.168.56.112 @ IN A 192.168.56.113 @ IN A 192.168.56.114 dns-server IN A 192.168.56.101 rac1-node IN A 192.168.56.111 rac2-node IN A 192.168.56.112 rac1-node-vip IN A 192.168.56.113 rac2-node-vip IN A 192.168.56.114 rac1-node-priv IN A 10.0.0.111 rac2-node-priv IN A 10.0.0.112 rac-scan IN A 192.168.56.121 rac-scan IN A 192.168.56.122 rac-scan IN A 192.168.56.123</code> </pre></div></div><br>  Similarly, we create a <code>reverse.test</code> file for the reverse zone. <div class="spoiler">  <b class="spoiler_title">with this content:</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$TTL</span></span> 86400 @ IN SOA dns-server.test.com.by. root.test.com.by. ( 2011071001 ;Serial 3600 ;Refresh 1800 ;Retry 604800 ;Expire 86400 ;Minimum TTL ) @ IN NS dns-server.test.com.by. @ IN PTR test.com.by. grid-server IN A 192.168.56.101 rac1-node IN A 192.168.56.111 rac2-node IN A 192.168.56.112 rac1-node-vip IN A 192.168.56.113 rac2-node-vip IN A 192.168.56.114 101 IN PTR dns-server.test.com.by. 111 IN PTR rac1-node.test.com.by. 112 IN PTR rac2-node.test.com.by. 113 IN PTR rac1-node-vip.test.com.by. 114 IN PTR rac2-node-vip.test.com.by.</code> </pre></div></div><br>  We set the <code>named</code> daemon to autorun and start: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># chkconfig named on # service named start</span></span></code> </pre><br>  If everything is done correctly, then the daemon successfully starts with the message: <br><pre> <code class="bash hljs"> named: [ OK ]</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Testing:</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># ping rac-scan PING rac-scan.test.com.by (192.168.56.121) 56(84) bytes of data. From server-manager (192.168.56.101) icmp_seq=1 Destination Host Unreachable # ping rac-scan PING rac-scan.test.com.by (192.168.56.122) 56(84) bytes of data. From server-manager (192.168.56.101) icmp_seq=1 Destination Host Unreachable # ping rac-scan PING rac-scan.test.com.by (192.168.56.123) 56(84) bytes of data. From server-manager (192.168.56.101) icmp_seq=1 Destination Host Unreachable # ping rac1-node PING rac1-node (192.168.56.111) 56(84) bytes of data. From server-manager (192.168.56.101) icmp_seq=1 Destination Host Unreachable # ping rac2-node PING rac2-node (192.168.56.112) 56(84) bytes of data. From server-manager (192.168.56.101) icmp_seq=2 Destination Host Unreachable # ping habrahabr.ru PING habrahabr.ru (212.24.44.141) 56(84) bytes of data. 64 bytes from habrahabr.ru (212.24.44.141): icmp_seq=1 ttl=128 time=30.95 ms 64 bytes from habrahabr.ru (212.24.44.141): icmp_seq=1 ttl=128 time=28.03 ms 64 bytes from habrahabr.ru (212.24.44.141): icmp_seq=1 ttl=128 time=24.71 ms</span></span></code> </pre><br>  Please note: for each new attempt to pinganut <code>rac-scan</code> , the server returns a new IP address in a circle.  This completes the DNS server configuration.  More details about setting up BIND can be found <a href="http://redhat-club.org/2011/%25D1%2583%25D1%2581%25D1%2582%25D0%25B0%25D0%25BD%25D0%25BE%25D0%25B2%25D0%25BA%25D0%25B0-%25D0%25B8-%25D0%25BD%25D0%25B0%25D1%2581%25D1%2582%25D1%2580%25D0%25BE%25D0%25B9%25D0%25BA%25D0%25B0-dns-%25D1%2581%25D0%25B5%25D1%2580%25D0%25B2%25D0%25B5%25D1%2580%25D0%25B0-bind-%25D0%25B2-rhel-centos-fedora">here</a> . <br></div></div><br><h4>  6. Preparing to install the GRID infrastructure </h4><br>  So!  Now we are close to the creation of a node cluster.  This clause describes an example of preparing the first node of the cluster to install the GRID infrastructure. <br>  In order to prepare the next node for the cluster, <u>it is necessary to repeat paragraphs 6.1 - 6.3</u> . <br>  * If you previously worked with VBox, then you can prepare one node, and then create its clone (army of clones). <br><br><h5>  6.1 VM Configuration </h5><br><div class="spoiler">  <b class="spoiler_title">VM settings for node:</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/dbb/197/c29/dbb197c2963d4330a627fa2454b4d9e3.png"><br><br>  On the <b><i>Network</i></b> tab, as the 1st adapter, select the <b><i>VirtualBox Host-Only Ethernet Adapter</i></b> virtual host adapter: <br><img src="https://habrastorage.org/files/02c/b36/ec2/02cb36ec20b147b784c1b3f403a3ed89.png"><br><br>  For the second adapter, select the <b><i>VirtualBox Host-Only Ethernet Adapter # 2</i></b> : <br><img src="https://habrastorage.org/files/f19/d92/4b1/f19d924b123443d084300d075bf00df9.png"><br></div></div><br><h5>  6.2 OS Installation </h5><br><div class="spoiler">  <b class="spoiler_title">Detailed process</b> <div class="spoiler_text">  Run the installation of Oracle Linux.  Select <b><i>Install or upgrade an existing system</i></b> : <br><img src="https://habrastorage.org/files/56e/f10/523/56ef1052320147a8b4a89eea25cfedfc.png"><br><br>  Choosing a native installation language: <br><img src="https://habrastorage.org/files/23c/e63/f40/23ce63f4050a45b7934050171419f78c.png"><br><br>  But the keyboard layout is better to leave the default. <br><img src="https://habrastorage.org/files/e87/b29/384/e87b29384f554a1fa89d60ca748ef5a2.png"><br><br>  Choose a standard type of drives: <br><img src="https://habrastorage.org/files/e43/4db/ea7/e434dbea788343dcb739e84209288872.png"><br><br>  Assign a name for the first node of the cluster: <code>rac1-node.test.com.by</code> and proceed to the configuration of network connections: <br><img src="https://habrastorage.org/files/ad8/365/b57/ad8365b579274929944cde2e22cbd264.png"><br><br>  <b><i>System eth0</i></b> : <br><img src="https://habrastorage.org/files/7b0/93b/35b/7b093b35b898456abaaaca6c664d2ecc.png"><br><br><img src="https://habrastorage.org/files/3ba/bb2/67b/3babb267b95c44b0bdd5f46b54e63b41.png"><br><br>  <b><i>System eth1</i></b> : <br><img src="https://habrastorage.org/files/da1/221/a57/da1221a57a2d43ceacc61a6e2877142d.png"><br><br><img src="https://habrastorage.org/files/21a/b7f/978/21ab7f978e5d423f8feb052b3f429b0c.png"><br><br>  We set the password for the super user <code>root</code> : <br><img src="https://habrastorage.org/files/13c/b09/e8f/13cb09e8f8094ab590907b5d3ef6d80f.png"><br><br>  Further, when selecting the type of installation, specify the <b><i>All space</i></b> and be sure to check the <b><i>View and change the section structure</i></b> : <br><img src="https://habrastorage.org/files/dff/f9c/050/dfff9c05080a4fedbea92dfd1e0e65d6.png"><br><br>  In the next step, the system will automatically create a partition.  Everything seems to be good here, but there is one thing: during automatic splitting, the size of the <i>swap</i> is set approximately equal to the amount of allocated RAM.  So, when installing Oracle GRID, it is very much ‚Äúswearing‚Äù at the value of this parameter.  When the amount of RAM is 2 Gb, it will require a swap size of at least 3.8 Gb.  I decided to play it safe and set the value to 8 Gb.  To do this, you first need to reduce the size of the logical volume <code>lv_root</code> , and then increase the size of the <code>lv_swap</code> due to the free space.  It should end up with something like this: <br><img src="https://habrastorage.org/files/c89/d65/122/c89d65122eaa4f18b8277e5eb466e735.png"><br><br>  Select the type of <b><i>Desktop</i></b> installation (you can use the <i>Database Server</i> ) and check the <b><i>Configure now</i></b> item <b><i>to change the package set</i></b> : <br><img src="https://habrastorage.org/files/fa7/6f9/4de/fa76f94de0154a0584e3dc996a9d0067.png"><br><br>  In the next step, go to the <b><i>Databases</i></b> tab and clear all checkboxes <u>if they are set</u> : <br><img src="https://habrastorage.org/files/5da/a43/2c2/5daa432c2cf94810a7e18fe2d99248e4.png"><br><br>  Next, the package installation will begin, after which you will be asked to reboot the system.  Next you need to create a user <code>grid</code> .  Under it will be the further installation of Oracle GRID: <br><img src="https://habrastorage.org/files/ad7/47c/367/ad747c3677134a6786930de6feced0e3.png"><br><br>  Turn on time synchronization.  If your network has an NTP server, you can specify it in the server list: <br><img src="https://habrastorage.org/files/1f5/3bb/7bf/1f53bb7bf44a4b488c9c22486399831b.png"><br><br>  At this step, the installation is complete, we reboot the system.  Then you can proceed to further configuration. <br></div></div><br><h5>  6.3 OS Configuration </h5><br>  All operations in this subsection are performed as <code>root</code> ! <br><div class="spoiler">  <b class="spoiler_title">Security Settings:</b> <div class="spoiler_text">  After installing the OS, first of all turn off the <i>Firewall</i> .  At this step, you can use the GUI.  To do this, select <b><i>System - Administration - Firewall</i></b> .  Click <b><i>Turn Off</i></b> and <b><i>Apply</i></b> : <br><img src="https://habrastorage.org/files/8f4/914/e8b/8f4914e8b00e4681b778eb870fc75d99.png"><br><br>  Further, it is recommended to disable <b><i>SELinux</i></b> by setting the value of the <code>SELINUX=disabled</code> variable in the <code>/etc/selinux/config</code> file. <br></div></div><br>  Create a group of the same name and a user from which we will install the <i>Oracle Database</i> : <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># groupadd -g 501 oracle # useradd -g oracle -u 501 -d /home/oracle -p ****** oracle</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">Create additional groups:</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># groupadd -g 502 dba # groupadd -g 503 asmdba # groupadd -g 504 asmoper # groupadd -g 505 asmadmin</span></span></code> </pre></div></div><br>  Add user <code>grid</code> <div class="spoiler">  <b class="spoiler_title">in groups:</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># usermod -g dba grid # usermod -a -G grid grid # usermod -a -G disk grid # usermod -a -G asmdba grid # usermod -a -G asmoper grid # usermod -a -G asmadmin grid</span></span></code> </pre></div></div><br>  For user <code>oracle</code> <div class="spoiler">  <b class="spoiler_title">doing the same procedure:</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># usermod -g dba oracle # usermod -a -G oracle oracle # usermod -a -G asmdba oracle # usermod -a -G asmoper oracle # usermod -a -G asmadmin oracle</span></span></code> </pre></div></div><br>  On the host, share the directory where the unpacked installer for <i>Oracle Database 11g Release 2 for Linux is located</i> .  Mount the ball: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># mkdir -p /media/ora_linux # mount -t cifs "//192.168.56.1/ora_linux" /media/ora_linux -o username="vasya_pupkin",password="********",iocharset=utf8,file_mode=0777,dir_mode=0777</span></span></code> </pre><br>  Install additional packages.  In fact, I hurried a little and moved this item here, because  I already know exactly which packages I would not have enough for complete happiness.  If you plan to use, <s>or have already downloaded</s> the same versions of <i>Oracle Linux</i> and <i>Oracle Grid Infrastructure</i> , which are described in the article, then there should be no questions.  Otherwise, this paragraph is recommended to skip. <br>  Go to the directory <code>/media/ora_linux/grid/rpm</code> and <div class="spoiler">  <b class="spoiler_title">we start installation of packages:</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># yum install ./cvuqdisk-1.0.9-1.rpm # yum install bind-utils # yum install compat-libcap1-1.10 # yum install compat-libstdc++-33 # yum install libstdc++-devel # yum install gcc-c++ # yum install ksh-20100621 # yum install libaio-devel # yum install oracleasm # yum install oracleasm-support</span></span></code> </pre></div></div><br>  For the subsequent installation of <i>Oracle GRID</i> and <i>Database</i> <div class="spoiler">  <b class="spoiler_title">create a directory structure:</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># mkdir -p /u01/app/grid # mkdir -p /u01/app/oracle # chown grid:dba /u01/app/grid # chown oracle:dba /u01/app/oracle # mkdir -p /u01/app/11.2.0/grid # chown grid:dba /u01/app/11.2.0 # chown grid:dba /u01/app/11.2.0/grid # mkdir /u01/app/oraInventory # chown grid:dba /u01/app/oraInventory # chmod -R 775 /u01/</span></span></code> </pre></div></div><br>  After installing the <i>Oracle ASM</i> packages <i>,</i> you can proceed to its configuration.  The first step is to configure the driver itself.  This is done <u>once</u> .  We run the configuration and specify some data: the <i>user</i> from which the driver will work, and who will own the interface, <i>group</i> , <i>autostart driver at system startup</i> . <br><div class="spoiler">  <b class="spoiler_title">Here's what it looks like:</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># oracleasm configure ‚Äìi Configuring the Oracle ASM library driver. This will configure the on-boot properties of the Oracle ASM library driver. The following questions will determine whether the driver is loaded on boot and what permissions it will have. The current values will be shown in brackets ('[]'). Hitting &lt;ENTER&gt; without typing an answer will keep that current value. Ctrl-C will abort. Default user to own the driver interface []: grid Default group to own the driver interface []: dba Start Oracle ASM library driver on boot (y/n) [n]: y Scan for Oracle ASM disks on boot (y/n) [y]: y Writing Oracle ASM library driver configuration: done</span></span></code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">Initialize the driver:</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># oracleasm init Creating /dev/oracleasm mount point: /dev/oracleasm Loading module "oracleasm": oracleasm Configuring "oracleasm" to use device physical block size Mounting ASMlib driver filesystem: /dev/oracleasm</span></span></code> </pre></div></div><br>  Configure the NTP service.  Open <code>/etc/sysconfig/ntpd</code> and add the <code>‚Äìx</code> parameter. <br>  It should be like this: <br><pre> <code class="bash hljs">OPTIONS=<span class="hljs-string"><span class="hljs-string">"-x -u ntp:ntp -p /var/run/ntpd.pid -g"</span></span></code> </pre><br>  Restart the NTP service: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># service ntpd restart</span></span></code> </pre><br>  This completes the OS configuration.  Now you can extinguish the car and create a clone. <br><br><h5>  6.4 Creating ASM Drives </h5><br>  When creating a disk group, we will use the usual redundancy organized by means of Oracle.  Taking into account the reserve space for importing the test database, we will create 5 disks of 10 Gb each.  To do this, open the <u>Windows console</u> on the host machine and move to the directory where the files of the ASM disks and <div class="spoiler">  <b class="spoiler_title">execute the following commands:</b> <div class="spoiler_text"><pre> <code class="dos hljs">ASM&gt; VBoxManage createhd --filename ASM_1.vdi --size <span class="hljs-number"><span class="hljs-number">10240</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">format</span></span> VDI --variant Fixed ASM&gt; VBoxManage createhd --filename ASM_2.vdi --size <span class="hljs-number"><span class="hljs-number">10240</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">format</span></span> VDI --variant Fixed ASM&gt; VBoxManage createhd --filename ASM_3.vdi --size <span class="hljs-number"><span class="hljs-number">10240</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">format</span></span> VDI --variant Fixed ASM&gt; VBoxManage createhd --filename ASM_4.vdi --size <span class="hljs-number"><span class="hljs-number">10240</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">format</span></span> VDI --variant Fixed ASM&gt; VBoxManage createhd --filename ASM_5.vdi --size <span class="hljs-number"><span class="hljs-number">10240</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">format</span></span> VDI --variant Fixed</code> </pre><br>  We connect disks to the cluster nodes: <br><pre> <code class="dos hljs">ASM&gt; VBoxManage storageattach "RAC #<span class="hljs-number"><span class="hljs-number">1</span></span> ORA ASM" --storagectl "SATA" --port <span class="hljs-number"><span class="hljs-number">1</span></span> --device <span class="hljs-number"><span class="hljs-number">0</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> hdd --medium ASM_1.vdi --mtype shareable ASM&gt; VBoxManage storageattach "RAC #<span class="hljs-number"><span class="hljs-number">1</span></span> ORA ASM" --storagectl "SATA" --port <span class="hljs-number"><span class="hljs-number">2</span></span> --device <span class="hljs-number"><span class="hljs-number">0</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> hdd --medium ASM_2.vdi --mtype shareable ASM&gt; VBoxManage storageattach "RAC #<span class="hljs-number"><span class="hljs-number">1</span></span> ORA ASM" --storagectl "SATA" --port <span class="hljs-number"><span class="hljs-number">3</span></span> --device <span class="hljs-number"><span class="hljs-number">0</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> hdd --medium ASM_3.vdi --mtype shareable ASM&gt; VBoxManage storageattach "RAC #<span class="hljs-number"><span class="hljs-number">1</span></span> ORA ASM" --storagectl "SATA" --port <span class="hljs-number"><span class="hljs-number">4</span></span> --device <span class="hljs-number"><span class="hljs-number">0</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> hdd --medium ASM_4.vdi --mtype shareable ASM&gt; VBoxManage storageattach "RAC #<span class="hljs-number"><span class="hljs-number">1</span></span> ORA ASM" --storagectl "SATA" --port <span class="hljs-number"><span class="hljs-number">5</span></span> --device <span class="hljs-number"><span class="hljs-number">0</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> hdd --medium ASM_5.vdi --mtype shareable ASM&gt; VBoxManage storageattach "RAC #<span class="hljs-number"><span class="hljs-number">2</span></span> ORA ASM" --storagectl "SATA" --port <span class="hljs-number"><span class="hljs-number">1</span></span> --device <span class="hljs-number"><span class="hljs-number">0</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> hdd --medium ASM_1.vdi --mtype shareable ASM&gt; VBoxManage storageattach "RAC #<span class="hljs-number"><span class="hljs-number">2</span></span> ORA ASM" --storagectl "SATA" --port <span class="hljs-number"><span class="hljs-number">2</span></span> --device <span class="hljs-number"><span class="hljs-number">0</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> hdd --medium ASM_2.vdi --mtype shareable ASM&gt; VBoxManage storageattach "RAC #<span class="hljs-number"><span class="hljs-number">2</span></span> ORA ASM" --storagectl "SATA" --port <span class="hljs-number"><span class="hljs-number">3</span></span> --device <span class="hljs-number"><span class="hljs-number">0</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> hdd --medium ASM_3.vdi --mtype shareable ASM&gt; VBoxManage storageattach "RAC #<span class="hljs-number"><span class="hljs-number">2</span></span> ORA ASM" --storagectl "SATA" --port <span class="hljs-number"><span class="hljs-number">4</span></span> --device <span class="hljs-number"><span class="hljs-number">0</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> hdd --medium ASM_4.vdi --mtype shareable ASM&gt; VBoxManage storageattach "RAC #<span class="hljs-number"><span class="hljs-number">2</span></span> ORA ASM" --storagectl "SATA" --port <span class="hljs-number"><span class="hljs-number">5</span></span> --device <span class="hljs-number"><span class="hljs-number">0</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> hdd --medium ASM_5.vdi --mtype shareable</code> </pre></div></div><br>  Everything!  At this all the preparatory work is completed, you can install <i>Oracle GRID Infrastructure</i> . <br><br><h4>  7. Installing the GRID infrastructure </h4><br>  Run all the nodes.  Login to one of the nodes with which we will perform the installation, under the user <code>grid</code> . <br>  Mount the ball with the distribution: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># mount -t cifs "//192.168.56.1/ora_linux" /media/ora_linux -o username="vasya_pupkin",password="********",iocharset=utf8,file_mode=0777,dir_mode=0777</span></span></code> </pre><br><h5>  7.1 ASM disk partitioning </h5><br>  Before you start the installation, you need to mark up the ASM disks in a special way and check their availability on each node.  Further, all operations are performed as <code>root</code> <b>on one of the nodes of the cluster!</b> <br><div class="spoiler">  <b class="spoiler_title">Markup:</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># ls /dev/sd* /dev/sdb /dev/sdc /dev/sdd /dev/sde /dev/sdf</span></span></code> </pre><br>  Select the first drive in the list and mark it up: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># fdisk /dev/sdb</span></span></code> </pre><br>  Next, enter the commands in the following sequence: <br><pre> <code class="bash hljs">n p 1   Enter w</code> </pre><br>  Disk partitioning is complete.  We carry out a similar procedure with the remaining 4 discs.  This is what should happen in the end: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># ls /dev/sd* /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1 /dev/sdf1</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Create ASM disks:</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># oracleasm createdisk DISK1 /dev/sdb1 # oracleasm createdisk DISK2 /dev/sdc1 # oracleasm createdisk DISK3 /dev/sdd1 # oracleasm createdisk DISK4 /dev/sde1 # oracleasm createdisk DISK5 /dev/sdf1</span></span></code> </pre></div></div><br>  <b>On all nodes</b> in turn <div class="spoiler">  <b class="spoiler_title">check the availability of ASM disks:</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># oracleasm scandisks Reloading disk partitions: done Cleaning any stale ASM disks... Scanning system for ASM disks... # oracleasm listdisks DISK1 DISK2 DISK3 DISK4 DISK5</span></span></code> </pre></div></div><br>  This completes the ASM disk layout.  Now you can proceed directly to installing Oracle GRID. <br><br><h5>  7.1 Installing GRID </h5><br>  Installation is carried out using a graphical wizard.  We start the terminal on behalf of the <code>grid</code> . <br><pre> <code class="bash hljs">[grid@rac1-node /]$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /media/ora_linux/grid [grid@rac1-node /]$ ./runInstaller</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Step-by-step installation wizard</b> <div class="spoiler_text">  Skipping the software update: <br><img src="https://habrastorage.org/files/e91/c61/a04/e91c61a0445a4742b29fdad6470e6f69.png"><br><br>  In the next step, we select the installation and configuration of <i>Oracle Grid Infrastructure</i> : <br><img src="https://habrastorage.org/files/d7c/637/4a0/d7c6374a0bfe452cbb3e0cc107c49724.png"><br><br>  Select the advanced installation type: <br><img src="https://habrastorage.org/files/878/20c/254/87820c2541d34aed852218047881e60d.png"><br><br>  Add support for native language: <br><img src="https://habrastorage.org/files/e8b/489/22b/e8b48922b464446790e23169ac66e5c3.png"><br><br>  In the next step, you need to specify <i>the cluster</i> <i>name</i> , the <i>name</i> and <i>port of SCAN</i> .  Here it will look like this: <br><pre> <code class="bash hljs">Cluster Name: rac-cluster SCAN name: rac scan SCAN Port: 1521</code> </pre><br><img src="https://habrastorage.org/files/c4d/b7b/f16/c4db7bf16d3e4e49b72345ea3f78fd78.png"><br><br>  The installer will contact the DNS server and check for the presence of the corresponding <i>SCAN address entries</i> .  If everything is in order, then in the next step you can add nodes to the cluster.  When adding another node, you must fill in the <i>Public</i> and <i>Virtual Hostname</i> fields.  <i>Public Hostname</i> is the name of the computer used to identify it on the network.  <i>Virtual Hostname</i> is the virtual name of the computer that will be used by <i>Oracle GRID</i> .  All names must have corresponding records on the DNS server. <br><br>  In my case, it looks like this: <br><table><tbody><tr><td>  <b>Node</b> </td><td>  <b>Public Hostname</b> </td><td>  <b>Virtual hostname</b> </td></tr><tr><td>  one </td><td>  rac1-node.test.com.by </td><td>  rac1-node-vip.test.com.by </td></tr><tr><td>  2 </td><td>  rac2-node.test.com.by </td><td>  rac2-node-vip.test.com.by </td></tr></tbody></table><br><img src="https://habrastorage.org/files/b12/717/5f5/b127175f5aed4c63856e92b3e2f92be1.png"><br><br>  After all nodes have been entered into the cluster, it is necessary to configure an <i>SSH connection</i> between future nodes.  To do this, you must click the <b><i>SSH Connectivity</i></b> button and enter the <code>grid</code> user password (that's why all the nodes must have the same users with the same password).  Establish a connection by clicking the <b><i>Setup</i></b> button: <br><img src="https://habrastorage.org/files/395/0c8/f0b/3950c8f0be594f03b776c24f3375adbe.png"><br><br>  If everything is done correctly, then Oracle Grid will report to us about this, after which it will be possible to proceed to the next step. <br><img src="https://habrastorage.org/files/3eb/836/d0e/3eb836d0e74d4328af1c0136634ab3d1.png"><br><br>  The next step is to distribute the network interfaces: which will be external, and which will be used for interconnect: <br><img src="https://habrastorage.org/files/4c2/4d4/a8e/4c24d4a8e6c64a07a288faadeba420db.png"><br><br>  Next, you need to decide on the type of storage.  Choose <b><i>Oracle ASM</i></b> : <br><img src="https://habrastorage.org/files/cb4/51e/036/cb451e036bae443d8dcb20777e46714e.png"><br><br>  Set the name of the disk group.  This name will later be used as a starting point when specifying the location of database data files.  Choose redundancy, set the block size and mark the disks. <br><pre> <code class="bash hljs">Disk Group Name: DATA Redundancy: Normal AU Size: 2 MB</code> </pre><br><img src="https://habrastorage.org/files/29f/5db/041/29f5db0412aa4af7abde01d65cd51900.png"><br><br>  In order for the disks that we created in the previous step to appear in the <b><i>Add Disks</i></b> field, you must specify the path: <code>/dev/oracleasm/disks*</code> in the <i>Change Disk Discovery Path</i> window: <br><img src="https://habrastorage.org/files/3a6/fe8/f4b/3a6fe8f4ba3d449d829bceb3d4d1d28e.png"><br><br>  Set a password for <i>ASM Account</i> : <br><img src="https://habrastorage.org/files/c67/b7f/33c/c67b7f33c86b497dac54e8a5cba9f2cc.png"><br><br>  We assign privileges to the appropriate groups: <br><img src="https://habrastorage.org/files/159/76d/048/15976d04863a4738939677f4df56c02a.png"><br><br>  Register the installation paths for <i>Oracle Base</i> and <i>Software Location</i> : <br><img src="https://habrastorage.org/files/658/05e/55e/65805e55e78f4cb285531dd9676de4b2.png"><br><br>  <i>Oracle Inventory</i> installation path: <br><img src="https://habrastorage.org/files/b8c/c37/6f7/b8cc376f75e14fa28291616ae8ab62dc.png"><br><br>  After setting all the parameters, the installer will start analyzing the system, which may result in an impressive list of actions: change some system parameters, install additional packages, <s>do something impossible</s> .  Those items that are marked as <i>No</i> will have to be corrected manually.  The rest can be killed with a single click. <b><i>Fix &amp; Check Again</i></b> : <br><img src="https://habrastorage.org/files/0b2/36c/6aa/0b236c6aa97c4e0cbb54e09b2e23c603.png"><br><br>  After clicking the <i>Fix &amp; Check Again</i> button, the <i>Execute Fixup Scripts</i> window appears with detailed instructions and a startup sequence. <br><img src="https://habrastorage.org/files/b6d/aa2/e72/b6daa2e727d64f6fbb6252222ebf742e.png"><br><br>  Here is my example of fixing warnings: <br><pre> <code class="bash hljs">$ su Password: <span class="hljs-comment"><span class="hljs-comment"># cd /tmp/CVU_11.2.0.3.0_grid # ./runfixup.sh</span></span></code> </pre><br>  After eliminating all, <s>or almost all</s> warnings, the remaining ones are not critical.  Put <b><i>Ignore All</i></b> : <br><img src="https://habrastorage.org/files/e0d/09d/a72/e0d09da7237248949deb92921642d67a.png"><br><br>  After receiving a brief summary, start the installation process: <br><img src="https://habrastorage.org/files/96e/c60/545/96ec60545a114a3f98300de8d922c00b.png"><br><br>  Installation process: <br><img src="https://habrastorage.org/files/fb4/a7d/00e/fb4a7d00e4854bca9d46a843285d9223.png"><br><br>  During installation, you will need to run several scripts as <code>root</code> .  Detailed instructions will be presented in the <i>Execute Configuration scripts</i> window: <br><img src="https://habrastorage.org/files/b07/4c7/3fe/b074c73fef7641fbb96b9c0a6d3963c5.png"><br><br>  In this case, you need to follow these instructions consistently on both nodes: <br><pre> <code class="bash hljs">$ su Password: <span class="hljs-comment"><span class="hljs-comment"># cd /u01/app/oraInventory # ./orainstRoot.sh # cd /u01/app/11.2.0/grid # ./root.sh</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The installation process - the final is near: </font></font><br><img src="https://habrastorage.org/files/b97/b4f/77c/b97b4f77ca6e4d66a1823152c18f2528.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Everything, the installation is complete!</font></font><br><img src="https://habrastorage.org/files/262/c52/2ca/262c522caec44a9b8dcafc9d67b21f94.png"><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rebuild all nodes of the cluster. </font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 7.2 Infrastructure check </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> After loading all the nodes, open the terminal and </font></font><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">look at the status of the cluster nodes:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># cd /u01/app/11.2.0/grid/bin # ./crsctl status resource -t -------------------------------------------------------------------------------- NAME TARGET STATE SERVER STATE_DETAILS -------------------------------------------------------------------------------- Local Resources -------------------------------------------------------------------------------- ora.DATA.dg ONLINE ONLINE rac1-node ONLINE ONLINE rac2-node ora.LISTENER.lsnr ONLINE ONLINE rac1-node ONLINE ONLINE rac2-node ora.asm ONLINE ONLINE rac1-node Started ONLINE ONLINE rac2-node Started ora.gsd OFFLINE OFFLINE rac1-node OFFLINE OFFLINE rac2-node ora.net1.network ONLINE ONLINE rac1-node ONLINE ONLINE rac2-node ora.ons ONLINE ONLINE rac1-node ONLINE ONLINE rac2-node -------------------------------------------------------------------------------- Cluster Resources -------------------------------------------------------------------------------- ora.LISTENER_SCAN1.lsnr 1 ONLINE ONLINE rac2-node ora.LISTENER_SCAN2.lsnr 1 ONLINE ONLINE rac1-node ora.LISTENER_SCAN3.lsnr 1 ONLINE ONLINE rac1-node ora.cvu 1 ONLINE ONLINE rac1-node ora.oc4j 1 ONLINE ONLINE rac1-node ora.rac1-node.vip 1 ONLINE ONLINE rac1-node ora.rac2-node.vip 1 ONLINE ONLINE rac2-node ora.scan1.vip 1 ONLINE ONLINE rac2-node ora.scan2.vip 1 ONLINE ONLINE rac1-node ora.scan3.vip 1 ONLINE ONLINE rac1-node ora.wind.db 1 ONLINE ONLINE rac1-node Open 2 ONLINE ONLINE rac2-node Open</span></span></code> </pre></div></div><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8. Install Database Software </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Login to one of the nodes with which we will perform the installation, under the user </font></font><code>oracle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mount the ball. </font><font style="vertical-align: inherit;">Further, as in the case of </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle GRID</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the installation is carried out using a graphical wizard. </font><font style="vertical-align: inherit;">We start the terminal on behalf of </font></font><code>oracle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><pre> <code class="bash hljs">[oracle@rac1-node /]$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /media/ora_linux/database [oracle@rac1-node /]$ ./runInstaller</code> </pre><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step-by-step installation wizard</font></font></b> <div class="spoiler_text">   : <br><img src="https://habrastorage.org/files/d89/894/338/d8989433873442c58ddaecf6ff4d900e.png"><br><br><img src="https://habrastorage.org/files/e1e/4f4/cd9/e1e4f4cd9a26456ebb30a957f162fdc4.png"><br><br>   : <b><i>Install database software only</i></b> .      . <br><img src="https://habrastorage.org/files/ba4/a71/db0/ba4a71db09ac404fb108d89f20082e73.png"><br><br>   :     <b><i>Oracle Real Application Clusters database installation</i></b>   , <s> </s> ,    ‚Äì    .      SSH-   .   <b><i>SSH Connectivity</i></b> ,    <code>oracle</code>    <b><i>Setup</i></b> : <br><img src="https://habrastorage.org/files/7d9/7ae/8e7/7d97ae8e700242158befaeddddc3a43b.png"><br><br>    SSH     . <br><img src="https://habrastorage.org/files/eab/923/a6a/eab923a6ac3e4a018e6ce9572ab4c4c7.png"><br><br>    : <br><img src="https://habrastorage.org/files/e7a/4a9/9ec/e7a4a99ec23b48db803aa0bd5eadad53.png"><br><br>    ‚Äì <b><i>Enterprise Edition</i></b> : <br><img src="https://habrastorage.org/files/a7b/6ae/7e1/a7b6ae7e19dd4f22ab9e6a05442f955e.png"><br><br>    <i>Oracle Base</i>  <i>Software Location</i> : <br><img src="https://habrastorage.org/files/aea/64e/5ee/aea64e5ee763447dac8b4620c8ed5422.png"><br><br>     : <br><img src="https://habrastorage.org/files/e27/b9a/753/e27b9a753bcf4e6cbe6dba52b885d96e.png"><br><br>        ,     ,       .  ,    <i>No</i> ‚Äì   .      <b><i>Fix &amp; Check Again</i></b> : <br><img src="https://habrastorage.org/files/35c/b70/963/35cb709636b04c4a87d06797a8442c34.png"><br><br>    <i>Fix &amp; Check Again</i>     <i>Execute Fixup Scripts</i>      : <br><img src="https://habrastorage.org/files/6db/533/2a1/6db5332a1da54dccade50530bba160a4.png"><br><br>     : <br><pre> <code class="bash hljs">$ su Password: <span class="hljs-comment"><span class="hljs-comment"># cd /tmp/CVU_11.2.0.3.0_oracle # ./runfixup.sh</span></span></code> </pre><br>            . <br><br>       .     <i>Task resolv.conf Integrity</i> .       ,   ,    : <br><img src="https://habrastorage.org/files/0d1/fd4/701/0d1fd470135f49afa79b6017be78a140.png"><br><br>     : <br><img src="https://habrastorage.org/files/ecf/010/e22/ecf010e22a234cd58897c7eb38d85bbe.png"><br><br>  : <br><img src="https://habrastorage.org/files/322/937/9e5/3229379e5d5848a08b7f108eb3b0a111.png"><br><br>               <code>root</code> .       <i>Execute Configuration scripts</i> : <br><img src="https://habrastorage.org/files/d6e/7a3/9ec/d6e7a39ec08e44f2b477fe42cc3d057d.png"><br><br>            : <br><pre> <code class="bash hljs">$ su Password: <span class="hljs-comment"><span class="hljs-comment"># cd /u01/app/oracle/product/11.2.0/wncdb # ./root.sh</span></span></code> </pre><br>          . <br><br>   ,   Oracle Database Software ! <br><img src="https://habrastorage.org/files/336/1f1/0ed/3361f10ed6f643fba3fa6652d44f45db.png"><br></div></div><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 9. Creating and testing a database </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now everything is ready to create the database and fill the dump. </font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 9.1 Creating a DB </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Run the </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB Configuration Assistant</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><pre> <code class="bash hljs">[oracle@rac1-node /]$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /u01/app/oracle/product/11.2.0/wncdb/bin [oracle@rac1-node /]$ ./dbca</code> </pre><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step-by-step database creation process</font></font></b> <div class="spoiler_text">   <b><i>Oracle Real Application Clusters (RAC) database</i></b> : <br><img src="https://habrastorage.org/files/d74/126/dee/d74126deec73452b88a89cef3f0e2411.png"><br><br>     <b><i>Create a Database</i></b> : <br><img src="https://habrastorage.org/files/e08/7e0/454/e087e0454f1947f8b1559674d28e2799.png"><br><br>     : <br><img src="https://habrastorage.org/files/b55/a65/18d/b55a6518d1054d0c89df3412caf47a6a.png"><br><br>   <i>Configuration Type</i> , <i>Global Database Name</i>   ,     : <br><img src="https://habrastorage.org/files/282/e9b/623/282e9b623b63465fb715209c77e2328f.png"><br><br>      <i>Enterprise Manager</i> : <br><img src="https://habrastorage.org/files/00e/7c1/cbe/00e7c1cbe91f4b5a9306c271197ca565.png"><br><br>     <i>SYS</i>  <i>SYSTEM</i> : <br><img src="https://habrastorage.org/files/ddf/bf8/bff/ddfbf8bff6164f079857edda1fc0b85e.png"><br><br>       .      <b><i>DATA</i></b> : <br><img src="https://habrastorage.org/files/a3e/abb/531/a3eabb53190b49718b46ae54000b2009.png"><br><br>      <b><i>Browse</i></b> ,      <u> </u>  <i>ASM Account</i> : <br><img src="https://habrastorage.org/files/efa/2bc/109/efa2bc109f114635bd900a723da57fe7.png"><br><br>    : <br><img src="https://habrastorage.org/files/ec7/52d/9a7/ec752d9a749644abaffedd971a6ec3c9.png"><br><br>      <i>Fast Recovery Area</i> .     : <br><img src="https://habrastorage.org/files/1db/4db/8df/1db4db8dfe174ad5a875371f93938cb8.png"><br><br>     : <br><img src="https://habrastorage.org/files/35b/20d/a65/35b20da65d114e56a24efcd6a9f81ed8.png"><br><br>   <i>SGA</i>  <i>PGA</i> : <br><img src="https://habrastorage.org/files/a81/5f7/b55/a815f7b55b3641a9ae84782a5606a812.png"><br><br>      : <br><img src="https://habrastorage.org/files/419/2be/44a/4192be44aae5499990617401b02cbee7.png"><br><br>   : <br><img src="https://habrastorage.org/files/4cb/adf/5e4/4cbadf5e4cc440cb83eb4f99933e4b7f.png"><br><br>      : <br><img src="https://habrastorage.org/files/09c/4a4/da4/09c4a4da41ad48458edb4e27b010f54b.png"><br><br>  <i> </i> ,  <i></i>   <i>Redo Log</i> : <br><img src="https://habrastorage.org/files/735/af8/3a8/735af83a8d07483abb4c1e22fdcd813e.png"><br><br>       ,     <s> </s> : <br><img src="https://habrastorage.org/files/025/7a6/5ad/0257a65ad6d34e3cbfa13d65031b1232.png"><br><br>  <i>Summary</i> ‚Äì   : <br><img src="https://habrastorage.org/files/4e4/7aa/862/4e47aa8622134fed9b4ba738f978d92b.png"><br><br> ,  : <br><img src="https://habrastorage.org/files/2fd/1ac/a26/2fd1aca2637a41b6a3789a645c397b10.png"><br><br>   ,  ,         : <br><img src="https://habrastorage.org/files/ed8/a97/9a9/ed8a979a943d4d83ad6dcb5175e80514.png"><br></div></div><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 9.2 Connection Testing </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you want to run </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQLplus</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> directly from one node, you must</font></font><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set the environment variables:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs">[oracle@rac1-server /]$ PATH=<span class="hljs-variable"><span class="hljs-variable">$PATH</span></span>:/u01/app/oracle/product/11.2.0/wncdb/bin [oracle@rac1-server /]$ <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PATH [oracle@rac1-server /]$ ORACLE_HOME=/u01/app/oracle/product/11.2.0/wncdb [oracle@rac1-server /]$ <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> ORACLE_HOME [oracle@rac1-server /]$ ORACLE_OWNER=oracle [oracle@rac1-server /]$ <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> ORACLE_OWNER [oracle@rac1-server /]$ NLS_LANG=AMERICAN_AMERICA.CL8MSWIN1251 [oracle@rac1-server /]$ <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> NLS_LANG</code> </pre></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Run SQLplus:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs">[oracle@rac1-server /]$ sqlplus SQL*Plus: Release 11.2.0.3.0 Production on Thu Aug 14 11:41:49 2014 Copyright (c) 1982, 2011, Oracle. All rights reserved. Enter user-name: sys@wind as sysdba Enter password: Connected to: Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production With the Partitioning, Real Application Clusters, Automatic Storage Management, OLAP, Data Mining and Real Application Testing options SQL&gt; SELECT inst_name FROM v<span class="hljs-variable"><span class="hljs-variable">$active_instances</span></span>; INST_NAME ------------------------------------------------------------ rac1-node.test.com.by:WIND1 rac2-node.test.com.by:WIND2 SQL&gt; <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production With the Partitioning, Real Application Clusters, Automatic Storage Management, OLAP, Data Mining and Real Application Testing options [oracle@rac1-server /]$</code> </pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To connect to the database from any other place where the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle Client is</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> installed </font><font style="vertical-align: inherit;">,</font></font><code>tnsnames.ora</code> <div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">need to add:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs">WIND = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = rac-scan.test.com.by)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = WIND) ) )</code> </pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> As a result of all these manipulations, we have a functioning dvuhnodovy cluster with a deployed test database! </font></font></div><p>Source: <a href="https://habr.com/ru/post/233801/">https://habr.com/ru/post/233801/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../233789/index.html">Social share buttons pluso flew off, I had to make my own</a></li>
<li><a href="../233791/index.html">Run Windows 8 on your Intel Galileo</a></li>
<li><a href="../233793/index.html">Python on the cloud hosting Infobox Jelastic: launch Django CMS</a></li>
<li><a href="../233797/index.html">Comparing the speed of the ArrayList and LinkedList in practice</a></li>
<li><a href="../233799/index.html">Work with SOAP service from Windows Phone 8.1 applications</a></li>
<li><a href="../233803/index.html">How to make a quality design with a limited budget?</a></li>
<li><a href="../233805/index.html">Simple jQuery script to edit HTML5 text and save using ajax</a></li>
<li><a href="../233809/index.html">Briefly on how to make your Qt geoservice plugin</a></li>
<li><a href="../233811/index.html">Several reasons why the popularity of minimalism is constantly growing (translation)</a></li>
<li><a href="../233813/index.html">Munich Municipality will get rid of Linux at workstations</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
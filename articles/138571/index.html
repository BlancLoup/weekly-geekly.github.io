<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We sing together with Sinatra. Part one. First meeting</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! 

 What is Sinatra 
 Sinatra is a small but rather interesting DSL (Domain-specific language) framework written in Ruby. Unlike Ruby on Rail...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We sing together with Sinatra. Part one. First meeting</h1><div class="post__text post__text-html js-mediator-article">  Good day! <br><br><h4>  What is Sinatra </h4><br>  <b>Sinatra</b> is a small but rather interesting DSL (Domain-specific language) framework written in Ruby.  Unlike Ruby on Rails, it does not follow the typical MVC pattern (Model - View - Controlller).  Sinatra was created so that ‚Äúa programmer could quickly create a web application written in Ruby with minimal effort. <br><br>  In order to use Sinatra, we don‚Äôt need to install it.  You can do this with the following command in RubyGems: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>gem install sinatra</b> <br><br>  We also need a gem called <b>Shotgun</b> .  We need it in order not to restart the server manually once again.  Shotgun will do it for us.  Let's install it: <br><br>  <b>gem install shotgun</b> <br><br>  Well that's all!  We have everything necessary for work.  The time has come for creativity.  Let's start ... <br><a name="habracut"></a><br><br><h4>  Hello, Sinatra! </h4><br>  And we will write a simple application that welcomes itself.  I sincerely hope that Frank will not turn over in his grave.  So, here it is, our application: <br><br><pre><code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">"sinatra"</span></span> get <span class="hljs-string"><span class="hljs-string">"/"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-string"><span class="hljs-string">"Hello, Sinatra!"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><br>  It remains only to start the server.  You can do this by typing the following command: <br><br>  <b>ruby -rubygems path_to_file \ app.rb</b> <br><br>  Now we can open the browser.  In Omnibox you need to dial the address <b>localhost: 4567</b> .  Voila! <br><br><img src="https://habrastorage.org/storage2/717/154/dfc/717154dfc91532772b3cd89e7066915f.png"><br><br>  Congratulations!  We just wrote the first web application using Sinatra. <br><br><h4>  Debriefing </h4><br>  Despite the fact that it was the simplest example, it would not hurt to figure out what our code does. <br>  From the beginning I would like to note that when developing web applications I use Ruby version 1.9.  In case you are using version 1.8., You need to add another line to your code.  Here she is: <br><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">"rubygems"</span></span></code> </pre><br>  Moving on.  We say to our application that if a user in the address bar drives in the address of our site, then it hits this page, i.e.  home, where we welcome Frank.  If the user specifies in the address bar, for example, <b>/ about</b> , then he will get the following error: <br><br><img src="https://habrastorage.org/storage2/eb0/6b1/c50/eb06b1c501472a1a6cf9e5bed708bf4d.png"><br><br>  Let's handle the <b>Not Found</b> error.  This can be done in the following way: <br><br><pre> <code class="ruby hljs">not_found <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> status <span class="hljs-number"><span class="hljs-number">404</span></span> <span class="hljs-string"><span class="hljs-string">"Something wrong! Try to type URL correctly or call to UFO."</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br><br>  Now we type in the address bar <b>localhost: 4567 / about</b> and see our page with you that tells the user that something wrong has happened. <br><br><h4>  Hello,% username% </h4><br>  It's time to remember that we met with Frank, but he is not with us.  God forbid, of course.  But we can make our browser greet us.  This can be done using the <i>name</i> parameter.  Its processing will look like this: <br><br><pre> <code class="ruby hljs">get <span class="hljs-string"><span class="hljs-string">"/hello/:name"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-string"><span class="hljs-string">"Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">#{params[</span></span><span class="hljs-symbol"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-symbol">:name</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-string">."</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  It remains only to dial <b>localhost: 4567 / hello / your_name</b> and you will see a greeting in your address.  For example: <br><br><img src="https://habrastorage.org/storage2/403/fbd/6de/403fbd6deb69ddca6b2bcbb4fe809b6f.png"><br><br><h4>  I am where you are </h4><br>  It is with this expression that we can characterize the situation when we need, for example, to give the user only one page, but no matter what address he dials.  This is done by specifying an asterisk after the slash.  Like this: <br><br><pre> <code class="ruby hljs">get <span class="hljs-string"><span class="hljs-string">"/*"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-string"><span class="hljs-string">"It's the main page of this site you can see right now!"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br><br>  Now wherever you want to go, you'll see the same page.  By the way, here it is: <br><br><img src="https://habrastorage.org/storage2/987/607/7f4/9876077f4707c4a7cf38e84bc9f9eea2.png"><br><img src="https://habrastorage.org/storage2/e81/14a/6f7/e8114a6f770549ed99ea03cbb52edec3.png"><br><img src="https://habrastorage.org/storage2/528/7f3/810/5287f3810a9d0c969be79d5196cde6db.png"><br><img src="https://habrastorage.org/storage2/de3/ed8/b2a/de3ed8b2a6ab7a5ee8c2fc319a3d4dc8.png"><br><br>  The value of the parameter specified in the URI can be obtained using the <i>splat</i> attribute.  Here so: <br><br><pre> <code class="ruby hljs">get <span class="hljs-string"><span class="hljs-string">"/*"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-string"><span class="hljs-string">"I don't know what is the </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">#{params[</span></span><span class="hljs-symbol"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-symbol">:splat</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-string">. It's what you typed."</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br><br>  Voila!  So that we do not type in the address bar, but see the dialed URI. <br><br><img src="https://habrastorage.org/storage2/910/ec6/871/910ec6871ae52ab811ec7180275b314c.png"><br><img src="https://habrastorage.org/storage2/646/644/9e8/6466449e82326ab290a19ec1a79987d1.png"><br><br><h4>  Conclusion </h4><br>  That's all for today.  Despite the size of the topic, we dismantled some routing schemes in Sinatra.  I hope that it will awaken in you the desire to quickly get acquainted with this framework, which allows you to write web applications with unprecedented speed.  This is only a starting point and no more. <br><br><h4>  Where to go next </h4><br>  <a href="http://www.sinatrarb.com/intro-ru.html">Introduction to Sinatra</a> . <br>  <a href="http://www.sinatrarb.com/">The official site of Sinatra</a> . <br>  <a href="http://net.tutsplus.com/tutorials/ruby/singing-with-sinatra/">Singing with Sinatra</a> . </div><p>Source: <a href="https://habr.com/ru/post/138571/">https://habr.com/ru/post/138571/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../138565/index.html">Overview of Windows Azure Toolkit for Social Games</a></li>
<li><a href="../138566/index.html">Metrics in social media (translation of Avinash Koshik's article)</a></li>
<li><a href="../138567/index.html">Intel is developing a processor with a wireless communication module</a></li>
<li><a href="../138569/index.html">An inside look: a little about the CloudServer API</a></li>
<li><a href="../138570/index.html">Suspended domain registrar mydomain-in.com.ua</a></li>
<li><a href="../138573/index.html">Router-on-a-Stick Data Network Architecture</a></li>
<li><a href="../138574/index.html">.NET-chiki, we meet on February 25 at the Siclum .NET Subbotnik in Dnepropetrovsk!</a></li>
<li><a href="../138575/index.html">Online Notepad note-pad.net</a></li>
<li><a href="../138576/index.html">Release stable version of Apache 2.4</a></li>
<li><a href="../138577/index.html">Why we created Julia, the new YAP for technical computing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
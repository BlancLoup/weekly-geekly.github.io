<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automated xkcd-style diagram creation: from serious to funny</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translation of Vitaly Kaurov's post " Automating xkcd Diagrams: Transforming Serious to Funny ". 
 Download the file containing the text of the articl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automated xkcd-style diagram creation: from serious to funny</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/bf5/e25/667/bf5e256673ca49b591a1b8f54e39d39a.png"></div><br>  <i>Translation of Vitaly Kaurov's post " <a href="http://blog.wolfram.com/2012/10/05/automating-xkcd-diagrams-transforming-serious-to-funny/">Automating xkcd Diagrams: Transforming Serious to Funny</a> ".</i> <i><br></i>  <i>Download the file containing the text of the article, interactive models and all the code given in the article <a href="">here</a> .</i> <i><br></i>  <i>I express my deep gratitude to <a href="http://vk.com/ld742">Kirill Guzenko</a> for his help in translating.</i> <hr>  On Monday morning, I came across an interesting question, published in the <a href="http://mathematica.stackexchange.com/"><i>Mathematica</i> Stack Exchange</a> , with a simple title - " <a href="http://mathematica.stackexchange.com/questions/11350/xkcd-style-graphs">creating graphs in xkcd-style</a> ."  Due to the <a href="http://www.wolframalpha.com/input/%3Fi%3Dxkcd.com%2Bvisitors">popularity</a> <a href="http://www.xkcd.com/">of xkcd</a> web <a href="http://www.xkcd.com/">comics by</a> Randall Munroe, I expected people to add a few bookmarks to this page and a dozen up-vote.  Then I did not know how everything will turn out.  It is difficult to predict the virality of a meme, but if you managed to create one, then it‚Äôs great to see how its popularity grows and how it spreads on the Internet.  Two days later, this post had already more than 100 thousand views, two hundred up-vote and 150 bookmarks;  Answers and similar posts appeared in other sections of the Stack Exchange, a small hurricane broke out on Twitter about this, discussions in <i>Hacker News</i> and <i>reddit appeared</i> .  Here I will <a href="http://mathematica.stackexchange.com/users/2039/amatya">provide the</a> original <a href="http://mathematica.stackexchange.com/users/2039/amatya">Amatya</a> post with an example of an xkcd-style image: <br><br>  ‚ÄúI received an email that I wanted to answer with the xkcd-style schedule, but I couldn't handle it.  Everything I painted looked right, but I could not think of such a command for Plot Legends to make text fragments floating.  Maybe there are some ideas, how could you create xkcd-style graphics?  When everything looks drawn and inaccurate.  I think drawing such strange curves in <i>Mathematica</i> should be difficult to implement. ‚Äù <br><br><div style="text-align:center;"><img title="Walking back to night" src="https://habrastorage.org/getpro/habr/post_images/817/3e5/d74/8173e5d74415ed6205ac442f6e1b50ae.png" alt="Walking back to my front door at night" width="458" height="307"></div><br><a name="habracut"></a><br>  However, it turns out that drawing such curved lines in <a href="http://www.wolfram.com/mathematica"><i>Mathematica is</i></a> as easy as it is fun.  <i>Mathematica</i> Stack Exchange is a fast-growing community organized in a question-answer format, which is developed exclusively by the efforts of the users themselves.  I was glad to see that he had drawn so much attention to this intriguing question and received so many beautiful and thoughtful answers.  I recommend visiting the original post to see all the answers.  Here I will give only one of the solutions that <a href="http://mathematica.stackexchange.com/users/862/simon-woods">Simon Woods</a> has brought, which is more or less universal and applicable to all types of graphs in <i>Mathematica</i> , and even to images. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Simon started by specifying the font that appears in the xkcd () comics. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/989/e22/b6b/989e22b6b6e93e4fe2501b617a05b4d9.png" width="391" height="17"><br><br>  The next step was to set such a function, which would convert the displayed font into a stylized xkcd.  For a given point on the graph and the offset for the text, using the spline, the indicated points are connected by a smooth curve. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/45e/bfb/b07/45ebfbb07326d86e00820c47c8b921cd.png" width="453" height="92"><br><br>  Now it's time to set the rules, which for some graphic object will replace the text style with the xkcd-style we have defined, as well as change the line style.  Notice how in the sixth line of the code lines are replaced with bold black, which are drawn over the original, but somewhat wider white lines.  This is necessary in order to set a noticeable gap on one curve when intersecting with another ‚Äî a characteristic feature of hand-drawn cartoons. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/59d/80d/001/59d80d001a28f580979512ad5e6189ae.png" width="513" height="138"><br><br>  The following function applies the above rules and makes axes thicker. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f9e/d23/6a6/f9ed236a682d06585c13a1a22131f7ad.png" width="519" height="30"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/b61/6f0/625/b616f06250f1f9b7e643bb3396a4c11c.png" width="519" height="43"><br><br>  Finally, the time has come for the part responsible for image processing - in my opinion, the most innovative and interesting part of Simon‚Äôs solution.  The reason is the possibility of working independently of the rest of the code and with arbitrary images, and not only with <i>Mathematica</i> graphics.  As we will see later, this gives us the opportunity to apply the xkcd-style to any chart.  The purpose of the function below is to slightly distort the lines in the image in order to simulate the roughness, which is obtained by hand-drawing. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3ab/1ee/e32/3ab1eee325c71034be9a7dd6219c1afa.png" width="508" height="124"><br><br>  First, the function rasterizes the <i>Mathematica</i> graphics, converting it into an image.  Then it creates two random images and smoothes them with a convolution with a Gaussian core.  Randomly, but smoothly varying values ‚Äã‚Äãof each pixel of these images are the basis for determining the pixel displacements in the original image.  Pixel offset is set by the <a href="http://reference.wolfram.com/mathematica/ref/ImageTransformation.html"><b>ImageTransformation</b></a> function.  The latest feature applies xkcd styles and distorts images. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fb1/9cf/9cc/fb19cf9cc489bf83b76f25f25d9f23ac.png" width="347" height="16"><br><br>  Let's try it out on several graphs.  Here is the first example that Simon gives, showing how it all works together. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/313/70a/86d/31370a86df89cf75743ffa5d7452d090.png" width="490" height="105"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/791/8be/ad6/7918bead63e6873002db0e64d06c7f07.png" width="420" height="235"><br><br>  And here are some other examples of 2D and 3D graphics that we got using <b>xkcdConvert</b> , from a wide variety of <i>Mathematica</i> graphics features.  It should be noted that <b>xkcdConvert</b> can be applied both to function names and to the results of graphic functions.  That is, you can first create some 3D graphics, rotate it, zoom in, pan, and only then, to what happened, use <b>xkcdConvert</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/200/c27/155/200c271552d5505b85a1cb9fa6e3638c.png" width="520" height="780"></div><br><br>  It is worth noting that Jon McLoone several years ago wrote in a post " <a href="http://blog.wolfram.com/2010/09/07/self-description/">Self-Description</a> " about automating the creation of images in the xkcd-style.  There, he showed how to create xkcd-style diagrams and add different colors.  Now we can add ‚Äúcurvature‚Äù caused by manual writing: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ef9/a6e/665/ef9a6e665fcf0c8eb283ba82623425ed.png" width="509" height="44"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ff5/0ba/47a/ff50ba47aa2d3f709b5343b22e2f5e73.png"><br><br>  I guess everything looks pretty authentic.  Great job, Simon!  I highly recommend looking at the code samples and other solutions that are given in the original post.  Notice how the <b>xkcdConvert</b> function can be applied to the image directly.  However, we have no opportunity to replace the fonts with ‚Äúfunny‚Äù ones, as the fonts are also in raster form.  However, the effect is quite realistic. <br><br>  Yu-Sung Chang had a great idea to create a <a href="http://www.wolfram.com/cdf">CDF</a> application that takes an image by reference and styles it with xkcd.  Below we use an idea that is slightly different from that of Simon.  In our case, the randomized <b><a href="http://reference.wolfram.com/language/ref/BSplineFunction.html">BSplineFunction</a></b> function serves as a guide to displace <b>ImageTransformation</b> pixels.  It also adds the ability to adjust the amplitude and frequency.  Try inserting a link to a graphic image and just press Enter.  If you want, you can invert the colors, as well as you can copy the result to the clipboard to save the image on your computer. <br><br> <a href=""><img src="https://habrastorage.org/files/a0c/487/670/a0c4876709514850b520eb5a27120868.png"></a> <br>  ( <a href="">download</a> CDF-manipulator) <br><br>  The question arises - how can a product that is used by professionals in various industries and researchers in their scientific work can so effectively solve such unusual tasks, including tasks in the field of art, creative directions and non-standard approaches.  The answer is integration.  <i>Mathematica</i> presents a wide range of technologies and algorithms that are available "right out of the box."  They are designed very carefully and consistently, so that users can assemble their programs from the components of the LEGO designer.  Let's see which areas we touched on: graphics, rules and patterns, image processing, import and export, network operations, dynamics and interactivity, the creation of interfaces, the deployment and use of CDF.  So I hope that our readers, when next time they will work in <i>Mathematica</i> , when they solve equations, build graphs - they will remember that practically limitless possibilities for improvisation can take them far away from everyday tasks. <br><br><h3>  Note </h3><br>  Few people know that Wolfram | Alpha can produce xkcd-style results.  To do this, at the beginning of the request simply indicate the word " <b>handwritten</b> " <br><br>  A few examples: <br><br>  Query " <a href="http://www.wolframalpha.com/input/%3Fi%3Dhandwritten%2Bhabrahabr">handwritten <b>habrahabr</b></a> " <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/587/c8e/d82/587c8ed829c74e7abe9ec98e00183002.png" width="600"></div><br><br>  Request " <a href="http://www.wolframalpha.com/input/%3Fi%3Dhandwritten%2BRunge-Kutta%2Bmethod%252C%2Bdy%252Fdx%2B%253D%2B-2xy%252C%2By%25280%2529%2B%253D%2B2%252C%2Bfrom%2B1%2Bto%2B3%252C%2Bh%2B%253D%2B.25">handwritten <b>Runge-Kutta method, dy / dx = -2xy, y (0) = 2, from 1 to 3, h = .25</b></a> " <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ca3/e51/2f5/ca3e512f5a444276aa6031d7590dd357.png" width="600"></div><br><br>  Query " <a href="http://www.wolframalpha.com/input/%3Fi%3Dhandwritten%2Bradioactive%2Belements">handwritten <b>radioactive elements</b></a> " <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/aad/566/37c/aad56637ce134598881906f035ee0a51.png" width="600"></div></div><p>Source: <a href="https://habr.com/ru/post/260017/">https://habr.com/ru/post/260017/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../260005/index.html">Architecture of storing photos in Badoo - an interview with the speaker of DevConf 2015</a></li>
<li><a href="../260007/index.html">Practice of using Laurent-2, Laurent-112, KBX-3D modules</a></li>
<li><a href="../260009/index.html">New Opera for Computers, Android and Windows Phone</a></li>
<li><a href="../260011/index.html">Dubsmash 2 - regular porn clicker for Android</a></li>
<li><a href="../260013/index.html">Unit tests, BDD and the power of fluid statements (fluent assertions) in 1C</a></li>
<li><a href="../260019/index.html">Mobile App Distribution Services for iOS. Part 4 (final): Fabric (Crashlytics)</a></li>
<li><a href="../260021/index.html">How to check your sites for getting into the Blacklist or why the newsletter gets into spam</a></li>
<li><a href="../260023/index.html">Application Migration - Code Examples</a></li>
<li><a href="../260025/index.html">Fun starts or C ++ and STL: who is faster?</a></li>
<li><a href="../260027/index.html">Passing Stored Arguments to a Function</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
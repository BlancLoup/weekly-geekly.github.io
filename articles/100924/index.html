<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Linux. Conky. Monitor Counter-Strike Servers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently digging into old deposits of written code, I came across my old project. When he wrote, it was planned to make a fake Counter-Strike server, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Linux. Conky. Monitor Counter-Strike Servers</h1><div class="post__text post__text-html js-mediator-article"> Recently digging into old deposits of written code, I came across my old project.  When he wrote, it was planned to make a fake Counter-Strike server, which will exploit the vulnerability in the Counter-Strike client.  Later it turned out that only version 1.5 is vulnerable. I abandoned this case.  In general, having recently found the source, I decided to make this a program for monitoring Counter-Strike servers.  That's what came out of it: <br><a name="habracut"></a><br>  And so in conky there is such a parameter as $ {execi}, which can periodically execute any program.  This and use in the future. <br>  Download the <a href="">archive</a> with executable files and sources.  As we can see, everything was written on JAVA (Do not kick much, did not want to rewrite something kosher, and there‚Äôs no need - there are no brakes), so you have to install JRE: <br> <code>sudo aptitude install sun-java6-jre</code> <br>  For other distributions, it‚Äôs the same (only the package manager is different), unless you decide to install the off version (in this case, I send you to the oracle mana off) <br>  We check work: <br> <code>java -version</code> <br>  Should bring something like that: <br> <code>Java(TM) SE Runtime Environment (build 1.6.0_20-b02) <br> Java HotSpot(TM) Server VM (build 16.3-b01, mixed mode) <br></code> <br>  And so the virtual machine is ready for battle.  Now unzip monitoring.zip.  The monitor folder contains executable files.  Since Java‚Äôs main motto is ‚ÄúWrite once, run everywhere‚Äù, you don‚Äôt have to compile anything.  In this folder there is a ListServers file.  We edit it, namely we enter servers with ports through a colon.  For example: <br> <code>cs.gtn.ru:27015 <br> cs.gtn.ru:27016 <br></code> <br>  You can and ip address. <br>  Next, for convenience, rename the folder to .monitor and copy to your home directory.  It remains only to install conky and edit its config. <br> <code>sudo aptitude install conky</code> <br>  Next, copy the standard .conkyrc config file to your home folder. You can take it <a href="http://conky.sourceforge.net/">off.</a>  <a href="http://conky.sourceforge.net/">site</a> or <a href="http://dl.dropbox.com/u/1842531/monitoring/conkyrc">mine</a> (my need to rename to .conkyrc) <br>  In general, now we need to edit our cofig. <br>  In the section TEXT we enter: <br> <code>${color white}${execi 10 cd .monitor/ &amp;&amp; java CounterStrikeMonitor} <br></code> <br>  This program will run every 10 seconds.  Save and run conky. <br>  You should get something like this: <br><br><img src="http://dl.dropbox.com/u/1842531/monitoring/screen.png" alt="image"><br><br>  There are also source codes.  As you can see, I do not display all the information.  In the class CounterStrikesParser there are lists of players and their points: <br><blockquote> <code><code><code><font color="#a31515">private ArrayList <font color="#0000ff">users</font> ; <br> <font color="#a31515">private int[]</font> <font color="#0000ff">scores</font> ; <br></font> <br> <br>    ,   . <br> <br>    . <br>      <br> <font color="#0000ff">UdpConnect</font> -    udp .       . <br> <font color="#0000ff">CounterStrikeConnect</font> -   UdpConnect.      Counter-Strike ,    WireShark.     ,      .        getData() <br> <font color="#0000ff">CounterStrikesParser</font> -       .   2  byte -    .   ParseFirstUdpPacket()  ParseSecondUdpPacket()  ,   .        : <br> <br> <font color="#a31515">private ArrayList <font color="#0000ff">users</font> ; <br> <font color="#a31515">private int[]</font> <font color="#0000ff">scores</font> ; <br> <font color="#a31515">private String</font> <font color="#0000ff">nameServer</font> ; <br> <font color="#a31515">private String</font> <font color="#0000ff">map</font> ; <br> <font color="#a31515">private int</font> <font color="#0000ff">nomberOfGamers</font> ; <br> <font color="#a31515">private int</font> <font color="#0000ff">maxGamers</font> ; <br></font> <br> <br> <font color="#0000ff">CounterStrikeMonitor</font> -  .     : <br> <font color="#008000">//    </font> <br> <font color="#a31515">CounterStrikeConnect</font> <font color="#0000ff">connect</font> = <font color="#0000ff">new</font> <font color="#a31515">CounterStrikeConnect</font> (ip, port); <br> <font color="#008000">//    2  </font> <br> <font color="#008000">//     getData()  connect</font> <br> <font color="#008000">//          2</font> <br> <font color="#a31515">CounterStrikesParser</font> <font color="#0000ff">parser</font> = <font color="#0000ff">new</font> <font color="#a31515">CounterStrikesParser</font> ( <font color="#0000ff">connect</font> .getData(), <font color="#0000ff">connect</font> .getData()); <br> <font color="#0000ff">parser</font> .ParseFirstUdpPacket(); <font color="#008000">//      </font> <br> <font color="#0000ff">parser</font> .ParseSecondUdpPacket(); <font color="#008000">//        </font> <br> <font color="#008000">//      </font> <br> System.out.println("Name: " + <font color="#0000ff">parser</font> .getNameServer()); <br> <br></code></code></code> </blockquote> <code><code><code><font color="#a31515">private ArrayList <font color="#0000ff">users</font> ; <br> <font color="#a31515">private int[]</font> <font color="#0000ff">scores</font> ; <br></font> <br> <br>    ,   . <br> <br>    . <br>      <br> <font color="#0000ff">UdpConnect</font> -    udp .       . <br> <font color="#0000ff">CounterStrikeConnect</font> -   UdpConnect.      Counter-Strike ,    WireShark.     ,      .        getData() <br> <font color="#0000ff">CounterStrikesParser</font> -       .   2  byte -    .   ParseFirstUdpPacket()  ParseSecondUdpPacket()  ,   .        : <br> <br> <font color="#a31515">private ArrayList <font color="#0000ff">users</font> ; <br> <font color="#a31515">private int[]</font> <font color="#0000ff">scores</font> ; <br> <font color="#a31515">private String</font> <font color="#0000ff">nameServer</font> ; <br> <font color="#a31515">private String</font> <font color="#0000ff">map</font> ; <br> <font color="#a31515">private int</font> <font color="#0000ff">nomberOfGamers</font> ; <br> <font color="#a31515">private int</font> <font color="#0000ff">maxGamers</font> ; <br></font> <br> <br> <font color="#0000ff">CounterStrikeMonitor</font> -  .     : <br> <font color="#008000">//    </font> <br> <font color="#a31515">CounterStrikeConnect</font> <font color="#0000ff">connect</font> = <font color="#0000ff">new</font> <font color="#a31515">CounterStrikeConnect</font> (ip, port); <br> <font color="#008000">//    2  </font> <br> <font color="#008000">//     getData()  connect</font> <br> <font color="#008000">//          2</font> <br> <font color="#a31515">CounterStrikesParser</font> <font color="#0000ff">parser</font> = <font color="#0000ff">new</font> <font color="#a31515">CounterStrikesParser</font> ( <font color="#0000ff">connect</font> .getData(), <font color="#0000ff">connect</font> .getData()); <br> <font color="#0000ff">parser</font> .ParseFirstUdpPacket(); <font color="#008000">//      </font> <br> <font color="#0000ff">parser</font> .ParseSecondUdpPacket(); <font color="#008000">//        </font> <br> <font color="#008000">//      </font> <br> System.out.println("Name: " + <font color="#0000ff">parser</font> .getNameServer()); <br> <br></code></code></code> <blockquote> <code><code><code><font color="#a31515">private ArrayList <font color="#0000ff">users</font> ; <br> <font color="#a31515">private int[]</font> <font color="#0000ff">scores</font> ; <br></font> <br> <br>    ,   . <br> <br>    . <br>      <br> <font color="#0000ff">UdpConnect</font> -    udp .       . <br> <font color="#0000ff">CounterStrikeConnect</font> -   UdpConnect.      Counter-Strike ,    WireShark.     ,      .        getData() <br> <font color="#0000ff">CounterStrikesParser</font> -       .   2  byte -    .   ParseFirstUdpPacket()  ParseSecondUdpPacket()  ,   .        : <br> <br> <font color="#a31515">private ArrayList <font color="#0000ff">users</font> ; <br> <font color="#a31515">private int[]</font> <font color="#0000ff">scores</font> ; <br> <font color="#a31515">private String</font> <font color="#0000ff">nameServer</font> ; <br> <font color="#a31515">private String</font> <font color="#0000ff">map</font> ; <br> <font color="#a31515">private int</font> <font color="#0000ff">nomberOfGamers</font> ; <br> <font color="#a31515">private int</font> <font color="#0000ff">maxGamers</font> ; <br></font> <br> <br> <font color="#0000ff">CounterStrikeMonitor</font> -  .     : <br> <font color="#008000">//    </font> <br> <font color="#a31515">CounterStrikeConnect</font> <font color="#0000ff">connect</font> = <font color="#0000ff">new</font> <font color="#a31515">CounterStrikeConnect</font> (ip, port); <br> <font color="#008000">//    2  </font> <br> <font color="#008000">//     getData()  connect</font> <br> <font color="#008000">//          2</font> <br> <font color="#a31515">CounterStrikesParser</font> <font color="#0000ff">parser</font> = <font color="#0000ff">new</font> <font color="#a31515">CounterStrikesParser</font> ( <font color="#0000ff">connect</font> .getData(), <font color="#0000ff">connect</font> .getData()); <br> <font color="#0000ff">parser</font> .ParseFirstUdpPacket(); <font color="#008000">//      </font> <br> <font color="#0000ff">parser</font> .ParseSecondUdpPacket(); <font color="#008000">//        </font> <br> <font color="#008000">//      </font> <br> System.out.println("Name: " + <font color="#0000ff">parser</font> .getNameServer()); <br> <br></code></code></code> </blockquote> <code><code><code><font color="#a31515">private ArrayList <font color="#0000ff">users</font> ; <br> <font color="#a31515">private int[]</font> <font color="#0000ff">scores</font> ; <br></font> <br> <br>    ,   . <br> <br>    . <br>      <br> <font color="#0000ff">UdpConnect</font> -    udp .       . <br> <font color="#0000ff">CounterStrikeConnect</font> -   UdpConnect.      Counter-Strike ,    WireShark.     ,      .        getData() <br> <font color="#0000ff">CounterStrikesParser</font> -       .   2  byte -    .   ParseFirstUdpPacket()  ParseSecondUdpPacket()  ,   .        : <br> <br> <font color="#a31515">private ArrayList <font color="#0000ff">users</font> ; <br> <font color="#a31515">private int[]</font> <font color="#0000ff">scores</font> ; <br> <font color="#a31515">private String</font> <font color="#0000ff">nameServer</font> ; <br> <font color="#a31515">private String</font> <font color="#0000ff">map</font> ; <br> <font color="#a31515">private int</font> <font color="#0000ff">nomberOfGamers</font> ; <br> <font color="#a31515">private int</font> <font color="#0000ff">maxGamers</font> ; <br></font> <br> <br> <font color="#0000ff">CounterStrikeMonitor</font> -  .     : <br> <font color="#008000">//    </font> <br> <font color="#a31515">CounterStrikeConnect</font> <font color="#0000ff">connect</font> = <font color="#0000ff">new</font> <font color="#a31515">CounterStrikeConnect</font> (ip, port); <br> <font color="#008000">//    2  </font> <br> <font color="#008000">//     getData()  connect</font> <br> <font color="#008000">//          2</font> <br> <font color="#a31515">CounterStrikesParser</font> <font color="#0000ff">parser</font> = <font color="#0000ff">new</font> <font color="#a31515">CounterStrikesParser</font> ( <font color="#0000ff">connect</font> .getData(), <font color="#0000ff">connect</font> .getData()); <br> <font color="#0000ff">parser</font> .ParseFirstUdpPacket(); <font color="#008000">//      </font> <br> <font color="#0000ff">parser</font> .ParseSecondUdpPacket(); <font color="#008000">//        </font> <br> <font color="#008000">//      </font> <br> System.out.println("Name: " + <font color="#0000ff">parser</font> .getNameServer()); <br> <br></code></code></code> <blockquote> <code><code><code><font color="#a31515">private ArrayList <font color="#0000ff">users</font> ; <br> <font color="#a31515">private int[]</font> <font color="#0000ff">scores</font> ; <br></font> <br> <br>    ,   . <br> <br>    . <br>      <br> <font color="#0000ff">UdpConnect</font> -    udp .       . <br> <font color="#0000ff">CounterStrikeConnect</font> -   UdpConnect.      Counter-Strike ,    WireShark.     ,      .        getData() <br> <font color="#0000ff">CounterStrikesParser</font> -       .   2  byte -    .   ParseFirstUdpPacket()  ParseSecondUdpPacket()  ,   .        : <br> <br> <font color="#a31515">private ArrayList <font color="#0000ff">users</font> ; <br> <font color="#a31515">private int[]</font> <font color="#0000ff">scores</font> ; <br> <font color="#a31515">private String</font> <font color="#0000ff">nameServer</font> ; <br> <font color="#a31515">private String</font> <font color="#0000ff">map</font> ; <br> <font color="#a31515">private int</font> <font color="#0000ff">nomberOfGamers</font> ; <br> <font color="#a31515">private int</font> <font color="#0000ff">maxGamers</font> ; <br></font> <br> <br> <font color="#0000ff">CounterStrikeMonitor</font> -  .     : <br> <font color="#008000">//    </font> <br> <font color="#a31515">CounterStrikeConnect</font> <font color="#0000ff">connect</font> = <font color="#0000ff">new</font> <font color="#a31515">CounterStrikeConnect</font> (ip, port); <br> <font color="#008000">//    2  </font> <br> <font color="#008000">//     getData()  connect</font> <br> <font color="#008000">//          2</font> <br> <font color="#a31515">CounterStrikesParser</font> <font color="#0000ff">parser</font> = <font color="#0000ff">new</font> <font color="#a31515">CounterStrikesParser</font> ( <font color="#0000ff">connect</font> .getData(), <font color="#0000ff">connect</font> .getData()); <br> <font color="#0000ff">parser</font> .ParseFirstUdpPacket(); <font color="#008000">//      </font> <br> <font color="#0000ff">parser</font> .ParseSecondUdpPacket(); <font color="#008000">//        </font> <br> <font color="#008000">//      </font> <br> System.out.println("Name: " + <font color="#0000ff">parser</font> .getNameServer()); <br> <br></code></code></code> </blockquote> <code><code><code><font color="#a31515">private ArrayList <font color="#0000ff">users</font> ; <br> <font color="#a31515">private int[]</font> <font color="#0000ff">scores</font> ; <br></font> <br> <br>    ,   . <br> <br>    . <br>      <br> <font color="#0000ff">UdpConnect</font> -    udp .       . <br> <font color="#0000ff">CounterStrikeConnect</font> -   UdpConnect.      Counter-Strike ,    WireShark.     ,      .        getData() <br> <font color="#0000ff">CounterStrikesParser</font> -       .   2  byte -    .   ParseFirstUdpPacket()  ParseSecondUdpPacket()  ,   .        : <br> <br> <font color="#a31515">private ArrayList <font color="#0000ff">users</font> ; <br> <font color="#a31515">private int[]</font> <font color="#0000ff">scores</font> ; <br> <font color="#a31515">private String</font> <font color="#0000ff">nameServer</font> ; <br> <font color="#a31515">private String</font> <font color="#0000ff">map</font> ; <br> <font color="#a31515">private int</font> <font color="#0000ff">nomberOfGamers</font> ; <br> <font color="#a31515">private int</font> <font color="#0000ff">maxGamers</font> ; <br></font> <br> <br> <font color="#0000ff">CounterStrikeMonitor</font> -  .     : <br> <font color="#008000">//    </font> <br> <font color="#a31515">CounterStrikeConnect</font> <font color="#0000ff">connect</font> = <font color="#0000ff">new</font> <font color="#a31515">CounterStrikeConnect</font> (ip, port); <br> <font color="#008000">//    2  </font> <br> <font color="#008000">//     getData()  connect</font> <br> <font color="#008000">//          2</font> <br> <font color="#a31515">CounterStrikesParser</font> <font color="#0000ff">parser</font> = <font color="#0000ff">new</font> <font color="#a31515">CounterStrikesParser</font> ( <font color="#0000ff">connect</font> .getData(), <font color="#0000ff">connect</font> .getData()); <br> <font color="#0000ff">parser</font> .ParseFirstUdpPacket(); <font color="#008000">//      </font> <br> <font color="#0000ff">parser</font> .ParseSecondUdpPacket(); <font color="#008000">//        </font> <br> <font color="#008000">//      </font> <br> System.out.println("Name: " + <font color="#0000ff">parser</font> .getNameServer()); <br> <br></code></code></code> </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/100924/">https://habr.com/ru/post/100924/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../100915/index.html">"Server" for nomadic life</a></li>
<li><a href="../100916/index.html">CHIP-8 based emulation principles</a></li>
<li><a href="../100917/index.html">Ed Arnoun: public / civic journalism is not a service, but a philosophy</a></li>
<li><a href="../100920/index.html">IPad iPad browser emulator</a></li>
<li><a href="../100921/index.html">The main futurist CiscoSystems in the new video talks about the "Internet of things" and technology in general</a></li>
<li><a href="../100925/index.html">Apple iOS 4.1 beta 3</a></li>
<li><a href="../100927/index.html">Review: Kindle DX - Amazon's bastard</a></li>
<li><a href="../100929/index.html">New version of Mono Tools 2 for Visual Studio released</a></li>
<li><a href="../100930/index.html">Form Tracking with Google Analytics</a></li>
<li><a href="../100933/index.html">How tablet makers are getting ready for Android 3.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
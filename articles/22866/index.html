<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>data URI</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A couple of years ago I was working on the data URL problem in Internet Explorer , I achieved certain results, but it was impossible to use what happe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>data URI</h1><div class="post__text post__text-html js-mediator-article">  A couple of years ago I <a href="http://bolknote.ru/2006/08/25/~314">was working on the data URL problem in Internet Explorer</a> , I achieved certain results, but it was impossible to use what happened.  The Data URL (sometimes called the ‚Äúdata: protocol‚Äù) is the ability to insert resources (graphics, CSS, JavaScript, and so on) into HTML code. <br><br><br>  More information about the data URL can be found in the latest article on ‚ÄúHabr√©‚Äù ‚Äú <a href="http://habrahabr.ru/blog/webdev/39071.html">Pictures in the body of the page using data: URL</a> ‚Äù.  I just wanted to supplement it with two comments: IE8b1 supports data URL <a href="http://code.msdn.microsoft.com/Release/ProjectReleases.aspx%3FProjectName%3Die8whitepapers%26ReleaseId%3D575">no longer than 32 Kb</a> , in modern versions of other browsers it was not possible to see restrictions, Safari / Opera / FF showed images about 700 Kb in size. <br><br><br>  Now the ambula. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <br>  Yesterday night I had an idea how to try to correctly combine the data URL and the inclusion of images via the mhtml protocol.  The fact that I did not succeed two years ago has turned out now. <br><br><br>  The result is a ready PHP code of two functions.  The first function (‚Äúbolk_data_uri_header‚Äù) must be called at the very beginning before outputting any of your code, the second (‚Äúbolk_data_uri‚Äù) itself to include the image in the code. <br><br><br>  I hope with examples everything is clear: <br><pre> bolk_data_uri_header ();
 bolk_data_uri ('myjpeg.jpg');
 bolk_data_uri ('ourpng.png', 'border: 2px dotted red');
</pre><br><br>  The library code itself: <br><pre> function bolk_data_uri_header () 
 { 
     echo "&lt;! - \ n" 
         . "Content-Type: multipart / related; boundary = \" = _ NextPart_01C6A9B1.539AB070 \ "\ n \ n" 
         . "- = _ NextPart_01C6A9B1.539AB070 \ n" 
         . "Content-Transfer-Encoding: base64 \ n" 
         . "Content-Type: text / html \ n" 
         . "-&gt; \ n \ n"; 

 } 

 function bolk_data_uri ($ file, $ style = '') 
 { 
     if (! (file_exists ($ file) &amp;&amp; ($ data = @getimagesize ($ file)))) return false; 

     $ name = uniqid ('', true); 

     if ($ style &lt;&gt; '') $ style = 'style = "'. htmlspecialchars ($ style). '"'; 
     $ mime = strpos ($ _ SERVER ['HTTP_USER_AGENT'], 'Gecko')?  "type = '{$ data [' mime ']}":' ';

     echo "&lt;! - \ n" 
         . "- = _ NextPart_01C6A9B1.539AB070 \ n" 
         . "Content-Location: {$ name} \ n" 
         . "Content-Transfer-Encoding: base64 \ n" 
         . "Content-Type: {$ data ['mime']}; -&gt; \ n" 
         . "&lt;object data = 'data: {$ data [' mime ']}; base64, \ n \ n"; 

     echo base64_encode (file_get_contents ($ file)); 

     echo "'{$ data [3]} {$ style} {$ mime}'&gt; &lt;img" 
         . "src = 'mhtml: http: // {$ _SERVER [' HTTP_HOST ']}"
         . "{$ _ SERVER ['REQUEST_URI']}! {$ Name} '{$ data [3]} {$ style} /&gt; &lt;/ object&gt; \ n \ n" 
         . "&lt;! - \ n" 
         . "- = _ NextPart_01C6A9B1.539AB070 -&gt;"; 

     return true; 
 }
</pre><br><br><br>  The secret is in combining data, so that IE, by accessing the page using the mhtml protocol, finds the correct plot ‚Äúhidden‚Äù inside the tag, and the rest of the browsers would see the image via the data URL. <br><br><br>  The code was tested under Opera 9.50b, FF 2.0.0.13, Safari 3.1 and IE6.  Suggestions and test results - please in the comments. <br><br><br>  <i>The original <a href="http://bolknote.ru/2008/04/03/~1656">post is posted</a> on my blog.</i> </div><p>Source: <a href="https://habr.com/ru/post/22866/">https://habr.com/ru/post/22866/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../228633/index.html">Happy birthday, Julian Assange</a></li>
<li><a href="../228635/index.html">The main idea of ‚Äã‚Äãrobotics and eight smaller ideas</a></li>
<li><a href="../22864/index.html">Perfect IM Client</a></li>
<li><a href="../228641/index.html">Grub 2 + VHD: install and boot Windows 7 Ultimate</a></li>
<li><a href="../228651/index.html">Azarkant: a short cartoon that took three years</a></li>
<li><a href="../228661/index.html">Epson Moverio BT-200 and Sony HMZ-T3 video glasses: tested in humans</a></li>
<li><a href="../228663/index.html">Testing a new product: online insurance module</a></li>
<li><a href="../228665/index.html">NSA monitors those interested in Linux and information security</a></li>
<li><a href="../228669/index.html">Warning Search: Spacecraft DX1</a></li>
<li><a href="../22867/index.html">Plugs: when, why and why?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
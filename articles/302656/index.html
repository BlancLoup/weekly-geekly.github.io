<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>1000 and 1 repost: a guide on the "share" button in Russian social networks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I faced a task - to hold on our site a ‚Äúpopular vote‚Äù for nominees for an award in our industry (franchising). As part of a popular vote, a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>1000 and 1 repost: a guide on the "share" button in Russian social networks</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/11c/1ab/c90/11c1abc901ef45b291a0aa7262ad3924.jpg"><br><br>  Recently, I faced a task - to hold on our site a ‚Äúpopular vote‚Äù for nominees for an award in our industry (franchising).  As part of a popular vote, a person posted a post on his page on a social network, telling about who he voted for.  To accomplish this task, I had to shovel a lot of information about how the sharing in various social networks is arranged, and how best to place these posts.  In addition, a system was created for counting the number of posted reposts. <br><br>  Unfortunately, most of the information on this topic, which can be found on Habr√© or stackoverflow, is already outdated, so I tried to turn this post into a current mega-guide for page sharing in social networks.  I reviewed the 5 most popular social networks in Russia: contact, facebook, twitter, classmates and my world.  For each social network, there is an up-to-date URL for sharing, small tips and recommendations for use, as well as JS code to find out the number of sheriras of a specific URL in each of the social networks.  networks. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At the end of the article there is a summary table with all the links and a brief description of the capabilities of each of the networks. <br><a name="habracut"></a><br><h4>  <b>Php script</b> </h4><br>  Wrote a script generator links for sharinga, as well as to obtain data on the number of sherov. <br>  Download here: <br>  <a href="https://github.com/iskander-g/socialhelper">github.com/iskander-g/socialhelper</a> <br><br><h4>  <b>In contact with</b> </h4><br><img src="https://habrastorage.org/files/35d/f43/70e/35df4370e7824453af922e3ca8be6753.png"><br>  The most popular social network in Russia also has the richest functionality for sharing, but there is also an annoying bug. <br><br>  URL in order to share a link in this social.  network has the following form: <br><pre><code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/vk.com/share</span></span>.php?url={$url}&amp;title={$titleVk}&amp;description={$desc}&amp;image={$image}&amp;noparse=<span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br>  Its parameters are: <br><ul><li>  <b>url</b> : the address of the page you are sharing </li><li>  <b>title</b> : post title </li><li>  <b>description</b> : description of the link </li><li>  <b>image</b> : <b>image</b> link </li><li>  <b>noparse</b> : specify true if you do not need the contact to parse the meta tags from the page, but take the information from the passed parameters </li></ul><br><br><h5>  <b>Tips &amp; Tricks:</b> </h5><br>  You can add your hashtags to the end of the title, and if the user doesn‚Äôt enter a description when sharing, they will be posted to the user‚Äôs post. <br><br><h5>  <b>Bugs</b> : </h5><br>  Only one but very critical bug was found in the contact: if a user who is not authorized to contact passes through your link, he will be asked to login and then he will receive a white page with the words ‚Äútoo long to param‚Äù.  The only way to solve this problem is not to transmit a description, etc., and limit it to a link only.  Well, or just to score, as we did.  This did not prevent at the moment to collect more than 900 reposts of our premium vkontakte. <br><br><h5>  <b>Getting the number of sherov:</b> </h5><br>  Getting the number of Sherov VKontakte is based on the fact that you add a script tag to your page with the following address: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> index = <span class="hljs-string"><span class="hljs-string">"1"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//            -       . //  -   . var url = "http://example.com"; $("body").append("&lt;script src='https://vk.com/share.php?act=count&amp;index=" + index + "&amp;url=" + url + "'&gt;&lt;/script&gt;");</span></span></code> </pre><br>  This script will call the VK.Share.count (index, count) method.  Accordingly, you need to define it in the global scope, like this: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> VK = {}; VK.Share = {}; VK.Share.count = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">index, count</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(count); }</code> </pre><br><br><h4>  <b>Facebook</b> </h4><br><img src="https://habrastorage.org/files/5ea/cdc/801/5eacdc8013ec4f048ce9132818edcedb.png"><br>  The second most popular social network in Russia has a rather curtailed tool for sharing links. <br><br>  The URL to share the link on facebook is: <br><pre> <code class="hljs perl">https:<span class="hljs-regexp"><span class="hljs-regexp">//www</span></span>.facebook.com/sharer/sharer.php?u={$url}&amp;picture={$image}</code> </pre><br>  As you can see, Facebook does not support the transfer of custom headers and descriptions - it takes this data from the page that is scrolling from the corresponding meta tags: <br><ul><li>  <b>og: title</b> - link title </li><li>  <b>og: description</b> - link description </li><li>  <b>og: image</b> - image for sharing </li></ul><br><br><h5>  <b>Tips &amp; Tricks</b> </h5><br>  Facebook does not support custom titles and descriptions for the link - in our case it was a problem, because we count the votes ourselves with an internal counting system, and we would like people to post a link to the page with all nominees in their social networks - so that their friends, going by reference, could immediately vote.  Obviously, meta-tags with common texts and descriptions were set for this page, but we wanted the person to post information about who he specifically voted for when sharing. <br><br>  This was achieved by creating ‚Äútechnical‚Äù pages for each nominee with the necessary meta tags that were successfully downloaded and parsed by Facebook, but when a regular user entered this page, it was automatically redirected to the nomination page (this was done using the refresh meta tag and duplicate javascript just in case). <br><br><h5>  <b>Bugs</b> </h5><br>  On the Internet, there is a lot of information about sharing on Facebook, and everywhere they write about this link: <br><pre> <code class="hljs perl">http:<span class="hljs-regexp"><span class="hljs-regexp">//www</span></span>.facebook.com/sharer/sharer.php?<span class="hljs-keyword"><span class="hljs-keyword">s</span></span>=<span class="hljs-number"><span class="hljs-number">100</span></span>&amp;p%5Burl%5D=</code> </pre><br>  BUT!  This link does not work with the mobile version of Facebook.  You just need to use <code>sharer/sharer.php?u= <br></code> <code>sharer/sharer.php?u= <br></code> <br><br><h5>  <b>Counting the number of Facebook cheers</b> </h5><br>  Facebook has the most difficulties in sharing, but it‚Äôs the easiest mechanism for recognizing the number of sherov for a particular URL. <br><br>  It looks like this: <br><pre> <code class="javascript hljs">$.get(<span class="hljs-string"><span class="hljs-string">"https://graph.facebook.com/"</span></span> + url, {}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data.share.share_count); }, <span class="hljs-string"><span class="hljs-string">'json'</span></span>);</code> </pre><br>  Also on this link you can read the OG-parameters that are stored on Facebook, and some other properties of the URL. <br><br><h4>  <b>Twitter</b> </h4><br><img src="https://habrastorage.org/files/94a/e75/3e6/94ae753e625048e69e8020ec35e1c52f.png"><br>  Twitter does not support posting images to links, or I have not found how to do it.  Also, the post on Twitter is limited in length, so the description will not be sent there.  But on Twitter you can transfer the login of your main account so that people subscribe to it too. <br><br>  The Twitter URL looks like this: <br><pre> <code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">https:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/twitter.com/share</span></span>?url={$url}&amp;text={$title}&amp;hashtags={$hashtags}&amp;via={$account}</code> </pre><br>  Options: <br><ul><li>  <b>url</b> - the link itself </li><li>  <b>text</b> - the text of the posted tweet </li><li>  <b>hashtags</b> - hashtags, without a lattice and a comma, for example, "habr, habr" </li><li>  <b>via</b> - your main account will be added to the end of the tweet as ‚Äúvia @AccountName‚Äù </li></ul><br>  Do not specify too long text and many hashtags!  Tweet size is limited in length, and your user will be forced to edit your text. <br><br><h5>  <b>Count the number of tweets</b> </h5><br>  Counting the number of sheri of a specific url on Twitter using the methods of the social network itself is impossible. <br>  <a href="https://twitter.com/twitterdev/status/667836799897591808">twitter.com/twitterdev/status/667836799897591808</a> <br><br><h4>  <b>Classmates</b> </h4><br><img src="https://habrastorage.org/files/d7c/e51/eda/d7ce51eda474418d887bdad1b95628bc.png"><br>  At its core, sharing in classmates is completely analogous to sharing in facebook. <br><br>  Url for sharing in classmates: <br><pre> <code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">https:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/connect.ok.ru/offer</span></span>?url={$url}</code> </pre><br>  It is also impossible to transfer custom descriptions and stuff, you also have to use technical intermediate pages, all similar to Facebook. <br><br><h5>  <b>Number of page cheers in classmates</b> </h5><br>  But the process of counting the number of sherians in classmates is more like a contact - the JS script is also connected, which calls the ODKL.updateCount (rel, count) method. <br><br>  The difference from the contact is that arbitrary text can be used as an index, not just an integer. <br><br>  The code I use to count the sheriers is: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ODKL = {}; ODKL.updateCount = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">uid, count</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(count); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> uid = <span class="hljs-string"><span class="hljs-string">"mainpage"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// UID -  index   var url = "http://example.com"; $.getJSON('https://connect.ok.ru/dk?st.cmd=extLike&amp;uid=' + uid + '&amp;ref=' + encodeURIComponent(url) + '&amp;callback=?', function(e) {});</span></span></code> </pre><br><br><h4>  <b>My world</b> </h4><br><img src="https://habrastorage.org/files/77f/dde/066/77fdde066b794c7197459925d1f9e32c.png"><br>  In principle, the URL and the process of sharing in my world is similar to that in contact. <br><br>  The link for my world is as follows: <br><pre> <code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/connect.mail.ru/share</span></span>?url={$url}&amp;title={$title}&amp;description={$desc}&amp;image_url={$image}</code> </pre><br><ul><li>  <b>url</b> : the address of the page you are sharing </li><li>  <b>title</b> : post title </li><li>  <b>description</b> : description of the link </li><li>  <b>image_url</b> : image link </li></ul><br><br><h5>  <b>Getting data on the number of sheri of my world</b> </h5><br>  The ready code for getting the number of sherirs of a specific urla from my world looks like this: <br><pre> <code class="javascript hljs"> $.getJSON(<span class="hljs-string"><span class="hljs-string">'https://connect.mail.ru/share_count?url_list='</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">encodeURIComponent</span></span>(url) + <span class="hljs-string"><span class="hljs-string">'&amp;callback=1&amp;func=?'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> url = <span class="hljs-built_in"><span class="hljs-built_in">encodeURIComponent</span></span>(url); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> url <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> response) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (response.hasOwnProperty(url)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> count = response[url].shares; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(count); } } });</code> </pre><br><br><h4>  Google </h4><br>  For information on Google, thank you <a href="https://habrahabr.ru/users/finesse/" class="user_link">Finesse</a> <br>  Link for sharing: <br><pre> <code class="hljs ruby">https/<span class="hljs-regexp"><span class="hljs-regexp">/plus.google.com/share</span></span>?url={$url}</code> </pre><br><br>  There is no easy way to get the number of rassharivaniya in g +, but there are dirty, for example, parse from the answer to the address: <br><pre> <code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">https:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/apis.google.com/u</span></span><span class="hljs-regexp"><span class="hljs-regexp">/0/se</span></span><span class="hljs-regexp"><span class="hljs-regexp">/0/</span></span><span class="hljs-number"><span class="hljs-number">_</span></span>/+<span class="hljs-number"><span class="hljs-number">1</span></span>/sharebutton?plusShare=<span class="hljs-literal"><span class="hljs-literal">true</span></span>&amp;usegapi=<span class="hljs-number"><span class="hljs-number">1</span></span>&amp;action=share&amp;url={$url}</code> </pre><br><br><h4>  <b>Summarizing</b> </h4><br><table><tbody><tr><th>  Soc.  network </th><th>  Link </th><th>  Custom descriptions </th><th>  Counter </th><th>  Hashtags </th></tr><tr><td>  In contact with </td><td> <code>http://vk.com/share.php?url={$url}&amp;title={$titleVk}&amp;description={$desc}&amp;image={$image}&amp;noparse=true</code> </td> <td>  Supports for any page </td><td>  There is </td><td>  In title </td></tr><tr><td>  Facebook </td><td> <code>https://www.facebook.com/sharer/sharer.php?u={$url}&amp;picture={$image}</code> </td> <td>  Only the picture, the rest through OG </td><td>  There is </td><td>  Absent </td></tr><tr><td>  Twitter </td><td> <code>https://twitter.com/share?url={$url}&amp;text={$title}&amp;hashtags={$hashtags}&amp;via={$account}</code> </td> <td>  Supports for any page </td><td>  Missing </td><td>  Regular </td></tr><tr><td>  Classmates </td><td> <code>https://connect.ok.ru/offer?url={$url}</code> </td> <td>  Using OG Meta Tags </td><td>  There is </td><td>  Absent </td></tr><tr><td>  My world </td><td> <code>http://connect.mail.ru/share?url={$url}&amp;title={$title}&amp;description={$desc}&amp;image_url={$image}</code> </td> <td>  Supports for any page </td><td>  There is </td><td>  Absent </td></tr><tr><td>  Google </td><td> <code>https//plus.google.com/share?url={$url}</code> </td> <td>  Using OG Meta Tags </td><td>  Dirty way </td><td>  Absent </td></tr></tbody></table><br><br>  PS The optimal image size for sharing in social networks, which will look equally good everywhere - 1024x512 pixels. </div><p>Source: <a href="https://habr.com/ru/post/302656/">https://habr.com/ru/post/302656/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302646/index.html">Why Gorodor can be useful to you if you already have an RA or media?</a></li>
<li><a href="../302648/index.html">Aytreker in the service of a presentation consultant</a></li>
<li><a href="../302650/index.html">Inertial sensors: cooking recipes for positioning systems</a></li>
<li><a href="../302652/index.html">Adventure Jam 2016</a></li>
<li><a href="../302654/index.html">How Jack Ma managed to overcome his 7 biggest failures</a></li>
<li><a href="../302660/index.html">Asus automatically updates BIOS / UEFI over HTTP without verification</a></li>
<li><a href="../302662/index.html">Regular Expression Crossword Algorithm</a></li>
<li><a href="../302664/index.html">Angler EK exploit kit specializes in circumventing EMET security mechanisms</a></li>
<li><a href="../302666/index.html">Google Developers Agency Pro: certification for the best developers of Android applications</a></li>
<li><a href="../302668/index.html">Interview with Baruch Sadogursky: the perfect stack of technologies for enterprise development</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
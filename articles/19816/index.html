<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write a script under Linux, reading the latest articles from Habra in mp3 file.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many of us would like to save some more time. One technology to do this is tts (text to speech): When a computer reads aloud some text. Agree, it woul...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write a script under Linux, reading the latest articles from Habra in mp3 file.</h1><div class="post__text post__text-html js-mediator-article"> Many of us would like to save some more time.  One technology to do this is tts (text to speech): When a computer reads aloud some text.  Agree, it would be nice to listen to all the latest articles from Habr while you are cooking, cleaning an apartment, dressing or tying shoelaces ie.  in those moments when your eyes and hands are busy, and your brain and ears are almost free. <br>  Recently, I wrote a script that allows you to translate in MP3 all the latest articles from Habr in order to be able to listen to them.  By slightly changing it, you will be able to receive articles from other sites; instead of writing to mp3, you can read articles on your computer immediately, and the script has a fairly simple way to work with rss via the linux console. <br><a name="habracut"></a><br>  From the beginning I want to warn you that since in Linux it is difficult with tts we will run the Win version via Vine. <br>  For the script you will need to put wine, then the API for tts to work, the file should be called something like Spchapi.exe (after all, you have a license to use Windows and its components ^ _ ^?).  After that we find the screw engine for voice and put it too, for example, you can try the trial version of Digalo. <br>  To check whether everything is set correctly, you need to run some kind of reader.  If you follow it to the talker website, do not forget to download the Govorilka CP also, it will be launched via a script. <br>  So, you installed wine, Spchapi.exe, voice engine and downloaded Govorilka CP. <br>  Now you can go directly to the script. <br>  First you need to create a working directory, I will use ~ / rss2mp3 /, you are free to choose yourself. <br>  to get started we will enter the directory <br> <code>$ cd ~/rss2mp3/</code> <br>  As we know rss Habra is located at <a href="http://habrahabr.ru/rss/main/">habrahabr.ru/rss/main</a> <br>  From it and we will download: <br>  $ wget <a href="http://habrahabr.ru/rss/main/">habrahabr.ru/rss/main</a> -O rssindex.tmp <br><br>  File in which already read links will be stored: <br> <code>$ touch rssold.tmp</code> <br> <br>  We pull out all links to posts from the RCC: <br> <code><code>$ cat rssindex.tmp | grep '' | sed 's///g;s/&lt;\/link&gt;//g;s/ *//g' &gt; rss.tmp <br> <br>      : <br> $ comm rssold.tmp rss.tmp -13 | sed 's/\t*//;s/ *//'&gt; rsslinks.tmp</code> <br> ..         rsslinks.tmp <br> <br>      : <br> <code>$ comm rssold.tmp rss.tmp | sed 's/\t*//;s/ *//' &gt; rssold.tmp</code> <br> <br>       rsslinks.tmp    : <br> <code>$ for a in $( cat rsslinks.tmp | tr "\r\n" " "); <br> do</code> <br> <br>     : <br> <code>$ wget $a -O rsshtm.tmp;</code> <br> <br>         html . <br> <code><code><code>$ cat rsshtm.tmp | sed -n -e '//, // p' | html2text -nobs &gt; rsstext.tmp <br>      ,      ( ). <br> html2text     ,      . <br> <br> ,   govorilka cp    wine /home/psysonic/gvrlcp.exe, ..   ! <br>        : <br> $ wine /home/psysonic/gvrlcp.exe -s70 -f rsstext.tmp -TO rsstmp.wav</code> <br> <br>   3,    . (   ?) <br> <code>$ lame -V0 rsstmp.wav "$(head -1 rsstext.tmp | sed 's/\*//g' | iconv -f cp1251).mp3"</code> <br> <br> . <br> <code>done</code> <br> <br> ,            . <br> <br>   : <br> cd ~/rss2mp3 <br> wget <a href="http://habrahabr.ru/rss/main/">habrahabr.ru/rss/main</a> -O rssindex.tmp <br> <code>touch rssold.tmp <br> cat rssindex.tmp | grep '' | sed 's///g;s/&lt;\/link&gt;//g;s/ *//g' &gt; rss.tmp <br> comm rssold.tmp rss.tmp -13 | sed 's/\t*//;s/ *//'&gt; rsslinks.tmp <br> comm rssold.tmp rss.tmp | sed 's/\t*//;s/ *//' &gt; rssold.tmp <br> for a in $( cat rsslinks.tmp | tr "\r\n" " "); <br> do <br> wget $a -O rsshtm.tmp; <br> cat rsshtm.tmp | sed -n -e '//, // p' | html2text -nobs &gt; rsstext.tmp <br> wine /home/psysonic/gvrlcp.exe -s70 -f rsstext.tmp -TO rsstmp.wav <br> lame -V0 rsstmp.wav "$(head -1 rsstext.tmp | sed 's/\*//g' | iconv -f cp1251).mp3" <br> done <br> <br> Ps   . <br> <br> upd <br>     </code></code></code></code> </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/19816/">https://habr.com/ru/post/19816/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../19815/index.html">Activation (but not unlock) on the iPhone with 1.1.3 pre-installed</a></li>
<li><a href="../198150/index.html">Getting to know Go, part 2: writing a grabber of images with a balancer and perversions</a></li>
<li><a href="../198152/index.html">Bitcoin users may have discovered Ross Ulbricht‚Äôs personal wallet</a></li>
<li><a href="../198154/index.html">Localization of Node.js applications Part 2: Toolkit and Process</a></li>
<li><a href="../198158/index.html">Warp9 is another reactive js library. At this time composable and without leaks</a></li>
<li><a href="../198160/index.html">Google shares for the first time reached $ 1000</a></li>
<li><a href="../198162/index.html">Send Hyper-V Server 2012 R2 and Windows Server 2012 R2</a></li>
<li><a href="../198164/index.html">New type of DDoS attack: TCP bug found in Windows</a></li>
<li><a href="../198166/index.html">The mathematical model predicts the outcome of the Kickstarter campaign with 76% confidence 4 hours after its start.</a></li>
<li><a href="../19817/index.html">Checkbox "Select All" in the habr-mail</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a world map</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A detailed and accurate map of the world is one of the cornerstones for our company. This is the basis, reference point, a peculiar origin of coordina...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a world map</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/93a/39d/607/93a39d607b814d85b017cde25f94b748.jpg"><br><br>  A detailed and accurate map of the world is one of the cornerstones for our company.  This is the basis, reference point, a peculiar origin of coordinates.  Search and selection of housing by our users begins with the analysis of our map.  And despite the abundance of map services existing in the world, we still had to create our own map in due time. <br><a name="habracut"></a><br>  Our only full-time cartographer is Zach Walker.  He is responsible for the formation of the map, drawing all kinds of objects and boundaries.  Why, then, did we take the path of the greatest resistance and develop our own map instead of adapting one of the existing solutions? <br><br>  It's all about AT-AT.  This is a software tool that we developed to create a scheme of interconnections of locations, their influence on each other.  It looks like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/201/b09/dc4/201b09dc40ef4c398f7451304798e9ff.gif"><br><br>  We are constantly interested in how people make choices, considering places on the map where they have never been in their lives?  How do they imagine them?  How do you choose the perfect travel itinerary and place to stay, looking at just one map? <br><br><h4>  Current solutions </h4><br>  For our part, we try to help our users in several different ways: <br><br><ul><li>  When you are looking for housing, you are helping us to improve the <a href="http://nerds.airbnb.com/location-relevance/">algorithm for the selection of optimal places</a> .  Accordingly, he can offer future users even more options that suit their tastes. </li><li>  When you select places that you would like to visit, our <a href="https://www.airbnb.com/locations">regional guide</a> compiles editorial content with manually selected necessary information about these places, and adds professional photos.  Such collections allow much more to learn about the parts of the planet that interest you without getting up from your chair. </li><li>  Our <a href="http://www.wired.com/2014/07/airbnb_recommendations/">research team</a> develops complex machine learning and information processing algorithms in various languages ‚Äã‚Äãin order to automatically collect information from reviews, listings and search patterns.  This allows us to more accurately guess the wishes of users and offer more relevant collections of options for living. </li><li>  We offer users all kinds of tips and advice from home owners. </li></ul><br><br>  All of the above is designed to help travelers learn certain places not only from a ‚Äútourist‚Äù point of view, not one-sidedly.  After all, sample reviews and guidebooks usually give a very narrow and superficial idea of ‚Äã‚Äãcountries and cities. <br><br><img src="https://habrastorage.org/files/457/61b/32e/45761b32e2af43c8ae340aec1867a631.jpg"><br>  <i>Green highlights traditional ‚Äútourist‚Äù places of residence, red - housing from the Airbnb base.</i> <br><br>  Of course, our main task is to offer the user exactly the places to stay that would best satisfy his wishes.  On the other hand, we need to somehow highlight the millions of unique listings placed on our service by hosts around the world. <br><br><h4>  What's next? </h4><br>  The district guide will only be useful if you are looking for the perfect place to stay.  But the map does not show many areas that are interesting from the point of view of culture and history.  And not because we don‚Äôt reach our hands, just usually this information is known only to local residents.  Moreover, by ‚Äúdistrict‚Äù we mean not an administrative city unit.  In this case, the area may be part of the city, located along the road intersecting the three "classical" areas.  Or it may be a conglomerate of several "classic" areas. <br><br>  The duties of Zack Walker include the search and mapping of such places, whose borders are delineated precisely by cultural and contextual principle, and not administrative-territorial.  To do this, Zack studies a variety of historical information, asks local residents and corresponds with homeowners.  So, when a user enters a request for a particular region, he is offered options from different parts of the region, and not just the most popular ones. <br><br>  When we began to develop this mechanism, it turned out that our current architecture and tools do not allow the introduction of such functionality.  So we came to the need to create the above AT-AT. <br><br><h4>  AT-AT project </h4><br>  We needed a tool to facilitate the task of mapping such areas.  By the way, the name AT-AT is borrowed from Star Wars, if you remember, so-called walking tanks. <br><br><img src="https://habrastorage.org/files/367/985/2bb/3679852bba5545ad93fede6b623b5d66.jpg"><br><br>  Schematically, the composition of AT-AT can be represented as follows: <br><br><img src="https://habrastorage.org/files/29c/5b3/2ab/29c5b32abdb644aaa2116a9330821f9a.jpg"><br><br>  First of all, we needed to generalize the existing system so that it could process various geographic polygons (continents, regions, countries, regions, special districts, small towns and villages), and not just megacities and administrative districts. <br><br><img src="https://habrastorage.org/files/bec/5a1/8d1/bec5a18d151f449585da514ad96609c3.gif"><br><br><h4>  Interconnections </h4><br><img src="https://habrastorage.org/files/d88/49e/e14/d8849ee148134c67baaccf16a0440196.jpg"><br><br>  After the polygon is created, the backend calculates: <br><ul><li>  Higher class parent polygons: polygons containing this polygon (San Francisco contains the SoMa area). </li><li>  Neighboring polygons of the same class: having a common border or partially overlapping (area SoMa and Folsom Street Fair). </li><li>  The latitude and longitude of the polygon centroid. </li></ul><br><br><h4>  Navigation </h4><br>  Managing a map filled with all sorts of areas may be too hard.  Experienced, we have come to different display modes in which the working interface becomes transparent. <br><br>  Our developers even formed tacit internal rules when working with AT-AT: <br>  1) Do not break the back button <br>  2) Render just what is needed <br>  3) Display information as needed <br>  4) Get out of the way! <br><br>  With a single mouse click, a polygon is selected and only adjacent polygons are rendered: <br><br><img src="https://habrastorage.org/files/0a0/da8/121/0a0da8121ad748e49f5accc9c545cd82.gif"><br><br>  And with a double click, the focus is on the selected polygon: <br><br><img src="https://habrastorage.org/files/747/88a/d62/74788ad629a04dde8c81f860ca583f75.gif"><br><br><h4>  Conclusion </h4><br>  Obviously, in working on such a complex project as the Airbnb service, it is necessary to use various internal tools.  AT-AT is only one of many, it facilitates the primary task of mapping areas that are then used by our other services and tools.  And, creating your own supporting tools for working on some large projects, do not forget that it is impossible to predict all future usage scenarios. <br><br><img src="https://habrastorage.org/files/006/bd5/2e8/006bd52e838241a2ba404aa1321ad86a.jpg"></div><p>Source: <a href="https://habr.com/ru/post/251627/">https://habr.com/ru/post/251627/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../251615/index.html">Using color spaces in ATTiny13a for WS2811</a></li>
<li><a href="../251617/index.html">Liquibase and changesets on pure SQL</a></li>
<li><a href="../251619/index.html">How we started monitoring the domains and what came of it</a></li>
<li><a href="../251623/index.html">Chemistry gamedev or how to manipulate players</a></li>
<li><a href="../251625/index.html">New utorrent bugs or what Bittorrent programmers are preparing for us</a></li>
<li><a href="../251629/index.html">Understanding the LCD screen LPH9157-2 from Siemens C75 / ME75</a></li>
<li><a href="../251631/index.html">The maze output program at 13 ... no. 10 bytes!</a></li>
<li><a href="../251647/index.html">Futuristic thinking</a></li>
<li><a href="../251649/index.html">Another way to organize OOP in JS</a></li>
<li><a href="../251653/index.html">McPaintio - a program that converts an image into a set of mouse commands that draw this image</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>x264 + VirtualDub vs XviD. Explore opportunities, increase efficiency</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In a previous post, I wrote about developing my own matrix for XviD. That article would not exist if I immediately took up x264. And I took it up beca...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>x264 + VirtualDub vs XviD. Explore opportunities, increase efficiency</h1><div class="post__text post__text-html js-mediator-article">  In a previous <u><a href="https://habr.com/post/207170">post,</a></u> I wrote about developing my own matrix for XviD.  That article would not exist if I immediately took up x264.  And I took it up because I saw that XviD such problems as quadraticity, color gradient distortion, halo around objects, are eliminated in x264. <br>  The goal of the task was to ascertain these capabilities of the codec, as well as the encoding speed and file size.  x264 successfully coped with all the tasks and below you will learn how to do this easily and naturally. <br><a name="habracut"></a><br><h4>  brief information </h4><br>  The x264 codec is a very successful implementation of the H.264 standard, created under the wing of the VideoLAN community (the author of the VLC media player) with a free license.  Usually, the console version, oriented primarily on Unixoids, is exported; there are also options with graphical interfaces for Windows.  Actually, unfriendly open source developers with ordinary users (the eternal problems with documentation and graphical user interface have been successfully separating Microsoft from many good and free projects to this day) and has become a brake on the way the codec goes to the masses and video collection fans.  But, thank God, not everything is so sad today and there are decent graphic options.  Now be careful, because it‚Äôs about the release <b>2273 from Komisar</b> ( <u><a href="http://komisar.gin.by/">link here</a></u> ).  The file itself that installs on the system is x264vfw.dll.  You can install it on any disk, and the installer will take care that this path gets into the registry of Windows.  You can also have this codec installed if you have the full K-Lite Codec Pack.  If there is a different version, install 2273. I tried version 2274 with a different interface - I strongly advise you, unless you are going to delve into console commands.  So that you are not confused, see screenshots. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ad3/437/6c6/ad34376c621218f06fb25182759bda18.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/6d9/04a/d7c/6d904ad7cedec866beea69b73dacd3ca.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Marker highlighted the keys that we will parse and change.  Go. <br><br>  <b>Quantizer</b> is a quantizer that coarsens the final signal, the more, the worse the quality.  I encode only with a quantizer and only in one pass, why - see the previous post. <br>  Here it is different from what in XviD, so I figured that we need to take multiples of 4. Here‚Äôs a summary: <br>  4, 8 - recommended only to those who are engaged in video processing, as the quality is perfect, but the large file size; <br>  12, 16 - for lovers of quality rollers of small size in the home collection; <br>  20 - my choice, the most optimal quantizer, suitable for films; <br>  24, 28 - a compromise version, normal quality, suitable for most movies and TV series, as well as for uploading videos on YouTube; <br>  32 and above - there are such cases. <br><br>  The second tab has a lot of interesting and useful settings. <br>  The <b>Analysis</b> block - breaking the blocks apart, the H.264 standard chip, is designed to provide better quality, but turned out to be practically useless - the file size increases, the quality improvement should be looked for with a microscope, so turn off all the ‚Äúbirds‚Äù. <br><br>  <b>Subpixel ME refinement</b> - the complexity of motion estimation, values ‚Äã‚Äãfrom 1 to 11. <br>  The larger, the smaller the size and speed.  In fact, the size decreased to 5, the size began to grow from the figure 6, and the speed dropped, apparently, this is due to Psy RDO, which does not work to the number 6.  So the conclusion is: if you want the maximum speed, then put 1 and donate several megabytes, but if you don‚Äôt want to sacrifice megabytes, and minutes, then put 5. <br><br>  <b>Max GOP size</b> - the maximum interval between keyframes, more in the previous post.  Put in the range of 200-300 and do not worry. <br><br>  <b>Max consecutive B-frames</b> - the maximum sequence of B-frames, the more of them, the smaller the size, but you have to be careful with this, there may be problems with playback.  I recommend 1 or 2. <br><br>  We come to the <b>Encoding</b> block and this is probably the most interesting part of the settings. <br>  <b>Deblocking filter</b> (a bird and two numeric values) - solves the problem of squares, so hated by XviD.  The default values ‚Äã‚Äãare 0, maximum 6. I thought 0 was not enough and I tried 6 - I liked it.  Now I will always put 6. Compromise - 3. <br><br>  <b>Intra / Inter Deadzone</b> - smoothing filter, works on the principle of Gauss.  Interestingly, VirtualDub has a similar filter and I used it often, but now it doesn‚Äôt make much sense.  The fact is that when using it only in VirtualDub, the codec in the end still leaves noise, and if you use it only in the codec, there are no problems with noise.  I chose a maximum of 32, because some moments just delight - a passing car gives pearly luster, the sea and the sky just a sight for sore eyes.  Some will notice that there is a lack of blurring small details, then I advise smaller values ‚Äã‚Äãthat are multiples of 4. You can completely disable it when the quantizer is less than 16. It does not affect speed. <br><br>  The remaining keys on this tab will not be explained - just put, as in the screenshot. <br>  Now the third tab, no screenshots and no need.  There only need to change two values ‚Äã‚Äãonce and for all.  QP factor - set both to 1 if you don‚Äôt want any surprises in the form of unexpected quality deterioration. <br><br>  Now the important information for those who use an external player.  If there are problems with playback, make the following settings: <br>  Max frame refs = 1, Max consecutive B-frames = 0, CABAC = off. <br>  Not all of these settings affect compatibility at the same time, so experiment. <br><br>  Subpixel ME refinement, Max frame refs, Max consecutive B-frames can affect speed.  Due to the use of multi-core x264 leaves behind XviD.  With those settings that are in the screenshots, the file size is comparable to XviD with an average quantizer, but the quality is much better.  So goodbye to the good old XviD, you took a lot of my time and nerves, as well as disk space, but you should go for a well-deserved rest. <br><br>  Who likes to pack in mkv - use MeGUI, there is enough information in the internet.  And if you like avi, please come in VirtualDub.  By the way, how to quickly open a non-avishny file in VirtualDub?  Easy.  Put AviSynth, create a text file with the extension .avs and write the line <pre><code class="dos hljs">DirectShowSource("  ")</code> </pre>  If the name is Cyrillic, do not forget about the encoding Win.  Then open the file in VirtualDub.  Recommendations for sound in a previous post.  If you make rips in HD to fill in with resources, you can use 24 or 28 instead of quantizer 20, but always with the Deblocking filter and the Intra / Inter Deadzone - get a normal quality with a small size. <br><br>  For those who are especially interested <b><a href="http://www.videorip.info/x264">here,</a></b> you can read about x264 settings in Russian. <br><br>  <i>Encode on health!</i> </div><p>Source: <a href="https://habr.com/ru/post/225033/">https://habr.com/ru/post/225033/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../225019/index.html">Creating audio plug-ins, part 2</a></li>
<li><a href="../225021/index.html">How to earn income from Google Play to the account of LLC</a></li>
<li><a href="../225025/index.html">Analysis of the tasks of the fourth qualifying round of the Russian Code Cup 2014</a></li>
<li><a href="../225027/index.html">How to cook hundreds of bases 1C and not go crazy</a></li>
<li><a href="../225031/index.html">Chasing the chairs</a></li>
<li><a href="../225035/index.html">How it works: data center "Berzarina"</a></li>
<li><a href="../225037/index.html">How much do brand owners spend on new domains?</a></li>
<li><a href="../225039/index.html">The organizers of the exchange of information will merge the intelligence services with all the data on user actions.</a></li>
<li><a href="../225041/index.html">IOS 8 beta or the pursuit of a novelty</a></li>
<li><a href="../225045/index.html">DevConf 2014: Development of a large scalable web 2.0 project from scratch (June 15, full day master class)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>WebP device</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="WebP is a relatively new format from Google. Pictures in this format take up 30% less space on the page due to the special compression built on encodi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>WebP device</h1><div class="post__text post__text-html js-mediator-article">  WebP is a relatively new format from Google.  Pictures in this format take up 30% less space on the page due to the special compression built on encoding key frames in the VP8 video codec. <br><br>  <a href="https://onthe.io/learn%2B%25D0%25A7%25D1%2582%25D0%25BE%2B%25D1%2582%25D0%25B0%25D0%25BA%25D0%25BE%25D0%25B5%2BWebP">WebP</a> supports lossy and non-compressed compression, varying degrees of transparency, metadata, and may contain an embedded ICC profile.  But not all browsers and applications <a href="https://onthe.io/learn%2B%25D0%2590%25D0%25B2%25D1%2582%25D0%25BE%25D0%25BE%25D0%25BF%25D1%2580%25D0%25B5%25D0%25B4%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5%2B%25D0%25BF%25D0%25BE%25D0%25B4%25D0%25B4%25D0%25B5%25D1%2580%25D0%25B6%25D0%25BA%25D0%25B8%2BWebP">support the</a> format yet. <br><br> <a href="http://habrahabr.ru/company/io/blog/261651/"><img src="https://habrastorage.org/getpro/habr/post_images/90b/2a7/f3e/90b2a7f3ee3f5fde684ef50a87f84d7a.jpg" alt="image"></a> <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  How does the compression in WebP </h4><br>  Lossy compression is based on the statement that the brightness and color of neighboring pixels differ little from each other. <br><br>  The image is divided into macroblocks.  Inside each macroblock, the decoder predicts the brightness and color of the next pixel based on previously obtained blocks.  It uses already decoded pixels in close proximity to each of the macroblocks, and tries to paint over unknown fragments in them.  Thus, data on fragments that can be predicted can be considered redundant and removed from the code, which provides more efficient compression. <br><br>  After a mathematically reversible transformation (using <a href="https://ru.wikipedia.org/wiki/%25D0%2594%25D0%25B8%25D1%2581%25D0%25BA%25D1%2580%25D0%25B5%25D1%2582%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BA%25D0%25BE%25D1%2581%25D0%25B8%25D0%25BD%25D1%2583%25D1%2581%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25B5%25D0%25BE%25D0%25B1%25D1%2580%25D0%25B0%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">DCT</a> ), the result is subjected to quantization and entropy coding. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8da/fb6/76b/8dafb676b1b8000e4cef4ea65c5b691c.jpg" alt="image"><br><br><h4>  Lossy webp </h4><br>  Lossy WebP uses <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D1%2580%25D0%25B8%25D1%2584%25D0%25BC%25D0%25B5%25D1%2582%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B5_%25D0%25BA%25D0%25BE%25D0%25B4%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">arithmetic coding</a> , one of the algorithms for entropy compression.  In WebP, block quantization is used and the bits are distributed adaptively between different image fragments: fewer bits for low entropy fragments and more for high fragments.  This encoding is considered more flexible than <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25B4_%25D0%25A5%25D0%25B0%25D1%2584%25D1%2584%25D0%25BC%25D0%25B0%25D0%25BD%25D0%25B0">the Huffman code</a> (which uses JPEG). <br><br>  JPEG divides the image into identical blocks, and WebP coding technology uses smart division.  In those parts of the picture where there are many small and rapidly changing parts, blocks are 4 x 4 pixels in size and 16 x 16 in monotonous areas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/333/7b6/130/3337b6130eec4086b6c0311a4f97c503.jpg" alt="image"><br><br><h4>  How is the prediction </h4><br>  The VP8 decoder has 2 prediction classes: <br><br><ul><li>  Intra - intraframe spatial prediction of a block based on pixel values ‚Äã‚Äãfrom adjacent, already encoded blocks, from the left and from the top. </li><li>  Inter - interframe temporal prediction (estimation of motion vectors). </li></ul><br>  Intra has four prediction algorithms for 16x16 blocks and 8 for 4 √ó 4 detail blocks: <br><br><ul><li>  H_PRED horizontal prediction.  Fills the next column based on the one to the left of it. </li><li>  V_PRED vertical forecasting.  Fills the next row based on the previous top. </li><li>  DC_PRED fills the block using the averaged color and brightness values ‚Äã‚Äãof the row pixels </li><li>  TM_PRED fills the block, using not only the average values ‚Äã‚Äãof row A and columns L, but also pixel P, which is located above and to the left of the block.  Each line starts with a pixel in column L and is filled in accordance with the differences of pixels in a column, starting from pixel P. </li></ul><br>  The image is divided into segments that have clearly similar characteristics.  For each such segment, the compression parameters and prediction methods are configured independently.  Thus, bits are redistributed to where they are most useful. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d63/858/7bd/d638587bd0bfdc1cfa5cdfa8af9f19e3.jpg" alt="image"><br><br><h4>  Lossless compression </h4><br>  In lossless compression, a variant of the <a href="https://ru.wikipedia.org/wiki/LZ77">LZ77</a> Huffman Code algorithm is used.  As well as spatial prediction and color space conversion. <br><br><h4>  Not only forecasting </h4><br><h5>  Compression with alpha channel </h5><br>  WebP format allows you to get a compressed image with a lossless alpha channel.  Previously, to get transparency, the entire image had to be lossless.  And in WebP, you can reduce the weight of the image with transparent areas. <br><br><h5>  Color conversion </h5><br>  WebP also uses adaptive quantization of the color component to prevent the color channels from affecting each other.  The image is divided into blocks and for each block its own transformation mode green_to_red, green_to_blue or red_to_blue is applied.  The color conversion keeps the value of the green channel G unchanged, converts red R depending on green, and blue B depending on green, and then depending on red. <br><br><h5>  Color caching </h5><br>  Compression lossless WebP uses already processed image fragments to work with new pixels.  If no matching matches are found, the locally created palette is used.  This palette is constantly updated with the colors found when scanning the image. <br><br><h5>  Palette indexing </h5><br>  If the picture uses less than 256 colors, the algorithm creates a separate array of color indices and saves it separately to replace the color value with the index for each pixel. <br><br>  For images with a small number of small parts, upscaling technology is used.  Before being encoded - the image is resized. <br><br>  The article is based on <a href="https://developers.google.com/speed/webp/docs/compression">this</a> material.  And you can try webp compression <a href="https://i.onthe.io/webp">here</a> . <br><br><h4>  Abstract </h4><br><ol><li>  In WebP, the picture is divided into macroblocks.  4x4 px blocks for small parts and 16x16 for monotonous areas. </li><li>  Inside each macroblock, the decoder predicts the brightness and color of each next pixel based on previously obtained. </li><li>  In lossy WebP, arithmetic coding is used, and in lossless, a Huffman code is used. </li><li>  WebP allows you to get a compressed image with a lossless alpha channel. </li></ol></div><p>Source: <a href="https://habr.com/ru/post/261651/">https://habr.com/ru/post/261651/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../261631/index.html">Ciklum Kiev invites to Speakers' Corner dedicated to the development for the Apple Watch</a></li>
<li><a href="../261637/index.html">Google Developer Launchpad - Google Startup Program</a></li>
<li><a href="../261641/index.html">Compile-time reflection D, practice</a></li>
<li><a href="../261647/index.html">Apple released iOS 8.4</a></li>
<li><a href="../261649/index.html">Misunderstanding about async / await and multithreading in C #</a></li>
<li><a href="../261653/index.html">The easiest way to start an encrypted chat</a></li>
<li><a href="../261655/index.html">New Intel IoT Developer Kit released</a></li>
<li><a href="../261657/index.html">Overview of Juniper Networks application-level protection against DDOS attacks</a></li>
<li><a href="../261659/index.html">11 products to solve the company's IT problems</a></li>
<li><a href="../261661/index.html">Typical interlocks in MS SQL and ways to deal with them</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
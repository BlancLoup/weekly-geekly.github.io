<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Extend conky functionality: add function to display MPD track date</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 I recently switched from ncmpc to ncmpcpp. I was pleased with the ‚Äúalternative display mode‚Äù, in which the track information is display...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Extend conky functionality: add function to display MPD track date</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  I recently switched from ncmpc to ncmpcpp.  I was pleased with the ‚Äúalternative display mode‚Äù, in which the track information is displayed not from below, but from above, and in two lines, and not in one, it looks like this: <br><br><img src="https://habrastorage.org/storage1/325c18b9/362cd73e/abd221dc/6db4c9cd.png"><br><br>  Then I wanted the MPD information to be displayed in a similar way in conky.  But bad luck - conky can show the name of the track, album, artist, but the date does not know how.  But this is not a big problem for us, opensource, after all, let's add the necessary functionality with our own hands. <br><a name="habracut"></a><br><h4>  Source Code Analysis </h4><br>  To begin with we will study source codes of conky.  To do this, download the tarball and unpack it: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs">$ wget http://downloads.sourceforge.net/project/conky/conky/1.8.1/conky-1.8.1.tar.bz2 $ tar -xf conky-1.8.1.tar.bz2 $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> conky-1.8.1/src</code> </pre> <br><img src="https://habrastorage.org/storage1/4cd6c5ee/1e857c2c/e4f22e9b/e0b68210.png"><br><br>  Here you can see four files with the name 'mpd': mpd.c, mpd.h, libmpdclient.c and libmpdclient.h.  The conky developers did not bother with their own implementation of mpd support and took libmpdclient ready.  Well, let's see what kind of track information mpd gives (in libmpdclient.h): <br><br><pre> <code class="hljs pgsql">typedef struct _mpd_Song { <span class="hljs-comment"><span class="hljs-comment">/* filename of song */</span></span> <span class="hljs-type"><span class="hljs-type">char</span></span> *file; <span class="hljs-comment"><span class="hljs-comment">/* artist, maybe NULL if there is no tag */</span></span> <span class="hljs-type"><span class="hljs-type">char</span></span> *artist; <span class="hljs-comment"><span class="hljs-comment">/* title, maybe NULL if there is no tag */</span></span> <span class="hljs-type"><span class="hljs-type">char</span></span> *title; <span class="hljs-comment"><span class="hljs-comment">/* album, maybe NULL if there is no tag */</span></span> <span class="hljs-type"><span class="hljs-type">char</span></span> *album; <span class="hljs-comment"><span class="hljs-comment">/* track, maybe NULL if there is no tag */</span></span> <span class="hljs-type"><span class="hljs-type">char</span></span> *track; <span class="hljs-comment"><span class="hljs-comment">/* name, maybe NULL if there is no tag; it's the name of the current song, * fe the icyName of the stream */</span></span> <span class="hljs-type"><span class="hljs-type">char</span></span> *<span class="hljs-type"><span class="hljs-type">name</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* date */</span></span> <span class="hljs-type"><span class="hljs-type">char</span></span> *<span class="hljs-type"><span class="hljs-type">date</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* added by qball */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* Genre */</span></span> <span class="hljs-type"><span class="hljs-type">char</span></span> *genre; <span class="hljs-comment"><span class="hljs-comment">/* Composer */</span></span> <span class="hljs-type"><span class="hljs-type">char</span></span> *composer; <span class="hljs-comment"><span class="hljs-comment">/* Performer */</span></span> <span class="hljs-type"><span class="hljs-type">char</span></span> *performer; <span class="hljs-comment"><span class="hljs-comment">/* Disc */</span></span> <span class="hljs-type"><span class="hljs-type">char</span></span> *disc; <span class="hljs-comment"><span class="hljs-comment">/* Comment */</span></span> <span class="hljs-type"><span class="hljs-type">char</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* length of song in seconds, check that it is not MPD_SONG_NO_TIME */</span></span> <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-type"><span class="hljs-type">time</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* if plchanges/playlistinfo/playlistid used, is the position of the song * in the playlist */</span></span> <span class="hljs-type"><span class="hljs-type">int</span></span> pos; <span class="hljs-comment"><span class="hljs-comment">/* song id for a song in the playlist */</span></span> <span class="hljs-type"><span class="hljs-type">int</span></span> id; } mpd_Song;</code> </pre> <br>  So, artist, title, album, and date are all char *.  The task is simplified - it is enough to do everything in the image and likeness. <br><br><h4>  Adding functionality </h4><br>  I took the conky mpd_title function as a basis.  Let's see where it is mentioned: <br><br><pre> <code class="bash hljs">$ grep mpd_title *.c *.h</code> </pre> <br><img src="https://habrastorage.org/storage1/bde1d48a/f6a96fe5/2945ddd0/34c08a33.png"><br><br>  First, let's deal with mpd.h and mpd.c.  Mpd.h describes the structure: <br><br><pre> <code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mpd_s</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *title; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *artist; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *album; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *status; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *random; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *repeat; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *track; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *name; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *file; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> is_playing; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> vol; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> progress; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> bitrate; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> length; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> elapsed; };</code> </pre> <br>  Add a date field of type char * to it: <br><pre> <code class="hljs pgsql"> <span class="hljs-type"><span class="hljs-type">char</span></span> *<span class="hljs-type"><span class="hljs-type">date</span></span>;</code> </pre> <br>  Below is the description of the print_mpd_title function: <br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print_mpd_title</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">struct</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text_object *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br>  Copy it and replace the title with the date: <br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print_mpd_date</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">struct</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text_object *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br>  There is no need to change anything else in this file.  Now you need to edit mpd.c.  Strange, but there seems to be no mention of mpd_title?  Let's just search for the title. <br><br><pre> <code class="hljs swift">$ grep title mpd.<span class="hljs-built_in"><span class="hljs-built_in">c</span></span></code> </pre> <br><img src="https://habrastorage.org/storage1/76a445f7/35f0c77d/03e03d88/a2971b67.png"><br><br>  The MPD_PRINT_GENERATOR (title, "% s") line explains everything - macros are used to generate functions, so the "mpd_title" line was not found.  Well, for each line with title we will make an analogue with date: <br><br><pre> <code class="hljs mel">static void clear_mpd(void) { #define xfree(x) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x) free(x) xfree(mpd_info.title); xfree(mpd_info.<span class="hljs-keyword"><span class="hljs-keyword">date</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* &lt;-- */</span></span> xfree(mpd_info.artist); xfree(mpd_info.album); <span class="hljs-comment"><span class="hljs-comment">/* do not free() the const char *status! */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* do not free() the const char *random! */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* do not free() the const char *repeat! */</span></span> xfree(mpd_info.<span class="hljs-keyword"><span class="hljs-keyword">track</span></span>); xfree(mpd_info.name); xfree(mpd_info.<span class="hljs-keyword"><span class="hljs-keyword">file</span></span>); #undef xfree memset(&amp;mpd_info, <span class="hljs-number"><span class="hljs-number">0</span></span>, sizeof(struct mpd_s)); } ... SONGSET(artist); SONGSET(album); SONGSET(title); SONGSET(<span class="hljs-keyword"><span class="hljs-keyword">date</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* &lt;-- */</span></span> SONGSET(<span class="hljs-keyword"><span class="hljs-keyword">track</span></span>); SONGSET(name); SONGSET(<span class="hljs-keyword"><span class="hljs-keyword">file</span></span>); ... MPD_PRINT_GENERATOR(title, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) MPD_PRINT_GENERATOR(<span class="hljs-keyword"><span class="hljs-keyword">date</span></span>, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) <span class="hljs-comment"><span class="hljs-comment">/* &lt;-- */</span></span> MPD_PRINT_GENERATOR(artist, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) MPD_PRINT_GENERATOR(album, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) MPD_PRINT_GENERATOR(random, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) MPD_PRINT_GENERATOR(repeat, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) MPD_PRINT_GENERATOR(<span class="hljs-keyword"><span class="hljs-keyword">track</span></span>, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) MPD_PRINT_GENERATOR(name, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) MPD_PRINT_GENERATOR(<span class="hljs-keyword"><span class="hljs-keyword">file</span></span>, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) MPD_PRINT_GENERATOR(vol, <span class="hljs-string"><span class="hljs-string">"%d"</span></span>) MPD_PRINT_GENERATOR(bitrate, <span class="hljs-string"><span class="hljs-string">"%d"</span></span>) MPD_PRINT_GENERATOR(status, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>)</code> </pre> <br>  After these changes, mpd.c can also be closed.  At this stage, we have ensured that conky receives the necessary information from MPD.  It remains to teach him to show this information.  Edit conky.c in the same way - copy what mpd_title has, and change the title to date: <br><br><pre> <code class="hljs lisp">#ifdef MPD OBJ(<span class="hljs-name"><span class="hljs-name">mpd_title</span></span>) print_mpd_title(<span class="hljs-name"><span class="hljs-name">obj</span></span>, p, p_max_size)<span class="hljs-comment"><span class="hljs-comment">; OBJ(mpd_date) /* &lt;-- */ print_mpd_date(obj, p, p_max_size); /* &lt;-- */</span></span></code> </pre> <br>  Now the same in core.c: <br><br><pre> <code class="hljs sql"> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> OBJ(mpd_title, &amp;update_mpd) mpd_set_maxlen(mpd_title); init_mpd(); <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> OBJ(mpd_date, &amp;update_mpd) <span class="hljs-comment"><span class="hljs-comment">/* &lt;-- */</span></span> mpd_set_maxlen(mpd_date); <span class="hljs-comment"><span class="hljs-comment">/* &lt;-- */</span></span> init_mpd(); <span class="hljs-comment"><span class="hljs-comment">/* &lt;-- */</span></span></code> </pre> <br>  Well, the final touch - text_object.h: <br><br><pre> <code class="hljs cpp"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> MPD OBJ_mpd_title, OBJ_mpd_date, </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* &lt;-- */</span></span></span></span></code> </pre> <br>  This completes the work with the source text, it remains to collect.  First, the configuration: <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ..; ./configure</code> </pre> <br>  Here I do not specify any additional parameters, since mpd support is enabled by default.  About all available options you can learn from the output ./configure --help. <br><br>  configure, if successful, will display information about the enabled and disabled options: <br><br><img src="http://habrastorage.org/storage1/119a02e6/4eda7644/326aa652/27a99f68.png"><br><br>  MPD: yes - this is what we need.  Now you need to actually collect: <br><br><pre> <code class="bash hljs">make</code> </pre> <br>  In case of a successful build, you can already check if our mpd_date function works.  For this we add it somewhere in ~ / .conkyrc.  In my case, a piece of the config looks like this: <br><br><pre> <code class="hljs smalltalk"><span class="hljs-string"><span class="hljs-string">${</span></span>alignc}<span class="hljs-string"><span class="hljs-string">$m</span></span>pd_title <span class="hljs-string"><span class="hljs-string">${</span></span>alignc}<span class="hljs-string"><span class="hljs-string">${</span></span>color <span class="hljs-symbol"><span class="hljs-symbol">#dddd55</span></span>}<span class="hljs-string"><span class="hljs-string">$m</span></span>pd_artist <span class="hljs-string"><span class="hljs-string">${</span></span>alignc}<span class="hljs-string"><span class="hljs-string">${</span></span>color #<span class="hljs-number"><span class="hljs-number">55</span></span>dd88}<span class="hljs-string"><span class="hljs-string">$m</span></span>pd_album <span class="hljs-string"><span class="hljs-string">$c</span></span>olor(<span class="hljs-string"><span class="hljs-string">${</span></span>color yellow}<span class="hljs-string"><span class="hljs-string">$m</span></span>pd_date<span class="hljs-string"><span class="hljs-string">$c</span></span>olor)</code> </pre> <br>  We start just assembled conky: <br><br><pre> <code class="bash hljs">./src/conky</code> </pre> <br><img src="http://habrastorage.org/storage1/c51b1f08/5b326fbf/8314640e/fa80214c.png"><br><br>  Works! <br><br><h4>  Build Package </h4><br>  It now remains to assemble the package for your distribution and replace it with the one that comes with the distribution.  If you are too lazy to do this, you can simply make a sudo make install; in this case, conky will be installed in / usr / local;  however, this is not recommended for various reasons. <br><br>  So, the bonus part: build the package for your distribution. <br><br><h5>  Portage-based (Gentoo, Sabayon) </h5><br>  If you do not have a local overlay yet, now is the time to <a href="http://ru.gentoo-wiki.com/wiki/Portage_Overlay">create it</a> . <br><br>  Suppose your local overlay is located in / usr / local / portage.  Create a directory for conky and copy the ebuild and already existing patches: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># mkdir -p /usr/local/portage/app-admin/conky/files # cd /usr/local/portage/app-admin/conky # cp /usr/portage/app-admin/conky/conky-1.8.1-r5.ebuild conky-1.8.1-r6.ebuild # cp /usr/portage/app-admin/conky/files files/</span></span></code> </pre> <br>  Now you need to make a patch.  To make it, you must firstly clear the source code from what appeared there after the build, secondly, unpack the original source code to another place, thirdly, run ‚Äúdiff -aur &lt;original&gt; &lt;modified copy&gt;‚Äù.  Without further ado, I will simply post here its text: <br><br><pre> <code class="hljs cs">diff -aur conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>.orig/src/conky.c conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/src/conky.c --- conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>.orig/src/conky.c <span class="hljs-number"><span class="hljs-number">2010</span></span><span class="hljs-number"><span class="hljs-number">-10</span></span><span class="hljs-number"><span class="hljs-number">-06</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>:<span class="hljs-number"><span class="hljs-number">29</span></span>:<span class="hljs-number"><span class="hljs-number">36.000000000</span></span> +<span class="hljs-number"><span class="hljs-number">0400</span></span> +++ conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/src/conky.c <span class="hljs-number"><span class="hljs-number">2011</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-13</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>:<span class="hljs-number"><span class="hljs-number">11</span></span>:<span class="hljs-number"><span class="hljs-number">06.894704215</span></span> +<span class="hljs-number"><span class="hljs-number">0400</span></span> @@ <span class="hljs-number"><span class="hljs-number">-1945</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span> +<span class="hljs-number"><span class="hljs-number">1945</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span> @@ print_mpd_artist(obj, p, p_max_size); OBJ(mpd_album) print_mpd_album(obj, p, p_max_size); + OBJ(mpd_date) + print_mpd_date(obj, p, p_max_size); OBJ(mpd_random) print_mpd_random(obj, p, p_max_size); OBJ(mpd_repeat) diff -aur conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>.orig/src/core.c conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/src/core.c --- conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>.orig/src/core.c <span class="hljs-number"><span class="hljs-number">2010</span></span><span class="hljs-number"><span class="hljs-number">-10</span></span><span class="hljs-number"><span class="hljs-number">-06</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>:<span class="hljs-number"><span class="hljs-number">29</span></span>:<span class="hljs-number"><span class="hljs-number">36.000000000</span></span> +<span class="hljs-number"><span class="hljs-number">0400</span></span> +++ conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/src/core.c <span class="hljs-number"><span class="hljs-number">2011</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-13</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>:<span class="hljs-number"><span class="hljs-number">11</span></span>:<span class="hljs-number"><span class="hljs-number">06.894704215</span></span> +<span class="hljs-number"><span class="hljs-number">0400</span></span> @@ <span class="hljs-number"><span class="hljs-number">-925</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span> +<span class="hljs-number"><span class="hljs-number">925</span></span>,<span class="hljs-number"><span class="hljs-number">9</span></span> @@ <span class="hljs-function"><span class="hljs-function">END </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OBJ</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">mpd_album, &amp;update_mpd</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mpd_set_maxlen</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">mpd_album</span></span></span><span class="hljs-function">)</span></span>; init_mpd(); + <span class="hljs-function"><span class="hljs-function">END </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OBJ</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">mpd_date, &amp;update_mpd</span></span></span><span class="hljs-function">) + </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mpd_set_maxlen</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">mpd_date</span></span></span><span class="hljs-function">)</span></span>; + init_mpd(); <span class="hljs-function"><span class="hljs-function">END </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OBJ</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">mpd_vol, &amp;update_mpd</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init_mpd</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-function"><span class="hljs-function">END </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OBJ</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">mpd_bitrate, &amp;update_mpd</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init_mpd</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-function"><span class="hljs-function">END </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OBJ</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">mpd_status, &amp;update_mpd</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init_mpd</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; @@ <span class="hljs-number"><span class="hljs-number">-1733</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span> +<span class="hljs-number"><span class="hljs-number">1736</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span> @@ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OBJ_mpd_title: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OBJ_mpd_artist: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OBJ_mpd_album: + <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OBJ_mpd_date: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OBJ_mpd_random: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OBJ_mpd_repeat: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> OBJ_mpd_vol: diff -aur conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>.orig/src/mpd.c conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/src/mpd.c --- conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>.orig/src/mpd.c <span class="hljs-number"><span class="hljs-number">2010</span></span><span class="hljs-number"><span class="hljs-number">-10</span></span><span class="hljs-number"><span class="hljs-number">-06</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>:<span class="hljs-number"><span class="hljs-number">29</span></span>:<span class="hljs-number"><span class="hljs-number">36.000000000</span></span> +<span class="hljs-number"><span class="hljs-number">0400</span></span> +++ conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/src/mpd.c <span class="hljs-number"><span class="hljs-number">2011</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-13</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>:<span class="hljs-number"><span class="hljs-number">16</span></span>:<span class="hljs-number"><span class="hljs-number">50.699508331</span></span> +<span class="hljs-number"><span class="hljs-number">0400</span></span> @@ <span class="hljs-number"><span class="hljs-number">-95</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span> +<span class="hljs-number"><span class="hljs-number">95</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span> @@ xfree(mpd_info.title); xfree(mpd_info.artist); xfree(mpd_info.album); + xfree(mpd_info.date); <span class="hljs-comment"><span class="hljs-comment">/* do not free() the const char *status! */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* do not free() the const char *random! */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* do not free() the const char *repeat! */</span></span> @@ <span class="hljs-number"><span class="hljs-number">-273</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span> +<span class="hljs-number"><span class="hljs-number">274</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span> @@ SONGSET(artist); SONGSET(album); SONGSET(title); + SONGSET(date); SONGSET(track); SONGSET(name); SONGSET(file); @@ <span class="hljs-number"><span class="hljs-number">-403</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span> +<span class="hljs-number"><span class="hljs-number">405</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span> @@ MPD_PRINT_GENERATOR(title, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) MPD_PRINT_GENERATOR(artist, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) MPD_PRINT_GENERATOR(album, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) +MPD_PRINT_GENERATOR(date, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) MPD_PRINT_GENERATOR(random, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) MPD_PRINT_GENERATOR(repeat, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) MPD_PRINT_GENERATOR(track, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>) diff -aur conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>.orig/src/mpd.h conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/src/mpd.h --- conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>.orig/src/mpd.h <span class="hljs-number"><span class="hljs-number">2010</span></span><span class="hljs-number"><span class="hljs-number">-10</span></span><span class="hljs-number"><span class="hljs-number">-06</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>:<span class="hljs-number"><span class="hljs-number">29</span></span>:<span class="hljs-number"><span class="hljs-number">36.000000000</span></span> +<span class="hljs-number"><span class="hljs-number">0400</span></span> +++ conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/src/mpd.h <span class="hljs-number"><span class="hljs-number">2011</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-13</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>:<span class="hljs-number"><span class="hljs-number">11</span></span>:<span class="hljs-number"><span class="hljs-number">06.898037530</span></span> +<span class="hljs-number"><span class="hljs-number">0400</span></span> @@ <span class="hljs-number"><span class="hljs-number">-7</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span> +<span class="hljs-number"><span class="hljs-number">7</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span> @@ <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *title; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *artist; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *album; + <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *date; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *status; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *random; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *repeat; @@ <span class="hljs-number"><span class="hljs-number">-41</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span> +<span class="hljs-number"><span class="hljs-number">42</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span> @@ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print_mpd_title</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">struct</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text_object *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print_mpd_artist</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">struct</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text_object *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print_mpd_album</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">struct</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text_object *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span></span><span class="hljs-function">)</span></span>; +<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print_mpd_date</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">struct</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text_object *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print_mpd_random</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">struct</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text_object *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print_mpd_repeat</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">struct</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text_object *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print_mpd_track</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">struct</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text_object *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span></span><span class="hljs-function">)</span></span>;   conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/src: stamp-h1 diff -aur conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>.orig/src/text_object.h conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/src/text_object.h --- conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>.orig/src/text_object.h <span class="hljs-number"><span class="hljs-number">2010</span></span><span class="hljs-number"><span class="hljs-number">-10</span></span><span class="hljs-number"><span class="hljs-number">-06</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>:<span class="hljs-number"><span class="hljs-number">29</span></span>:<span class="hljs-number"><span class="hljs-number">36.000000000</span></span> +<span class="hljs-number"><span class="hljs-number">0400</span></span> +++ conky<span class="hljs-number"><span class="hljs-number">-1.8</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/src/text_object.h <span class="hljs-number"><span class="hljs-number">2011</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-13</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span>:<span class="hljs-number"><span class="hljs-number">13</span></span>:<span class="hljs-number"><span class="hljs-number">54.990460229</span></span> +<span class="hljs-number"><span class="hljs-number">0400</span></span> @@ <span class="hljs-number"><span class="hljs-number">-327</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span> +<span class="hljs-number"><span class="hljs-number">327</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span> @@ OBJ_mpd_title, OBJ_mpd_artist, OBJ_mpd_album, + OBJ_mpd_date, OBJ_mpd_random, OBJ_mpd_repeat, OBJ_mpd_vol,</code> </pre> <br>  This patch should be saved to the files folder, I did not change the principle of patch naming and called it "conky-1.8.1-mpd-date.patch".  Now we need to tweak the ebuild a bit so that our patch is also applied.  Open the ebuild, and in the ‚Äúsrc_prepare‚Äù function add our patch to the list of applicable: <br><br><pre> <code class="bash hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">src_prepare</span></span></span></span>() { epatch <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${FILESDIR}</span></span></span><span class="hljs-string">/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${P}</span></span></span><span class="hljs-string">-nvidia-x.patch"</span></span> \ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${FILESDIR}</span></span></span><span class="hljs-string">/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${P}</span></span></span><span class="hljs-string">-xmms2.patch"</span></span> \ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${FILESDIR}</span></span></span><span class="hljs-string">/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${P}</span></span></span><span class="hljs-string">-secunia-SA43225.patch"</span></span> \ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${FILESDIR}</span></span></span><span class="hljs-string">/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${P}</span></span></span><span class="hljs-string">-acpitemp.patch"</span></span> \ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${FILESDIR}</span></span></span><span class="hljs-string">/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${P}</span></span></span><span class="hljs-string">-curl-headers.patch"</span></span> \ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${FILESDIR}</span></span></span><span class="hljs-string">/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${P}</span></span></span><span class="hljs-string">-maxinterfaces.patch"</span></span> \ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${FILESDIR}</span></span></span><span class="hljs-string">/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${P}</span></span></span><span class="hljs-string">-utf8-scroll.patch"</span></span> \ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${FILESDIR}</span></span></span><span class="hljs-string">/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${P}</span></span></span><span class="hljs-string">-mpd-date.patch"</span></span> eautoreconf }</code> </pre> <br>  Save the changes, create the Manifest: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># ebuild conky-1.8.1-r6.ebuild manifest</span></span></code> </pre> <br>  Now you can install: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># emerge conky</span></span></code> </pre> <br><h5>  DEB-based (Debian, Ubuntu), RPM-based (Fedora, OpenSuSE), Slackware </h5><br>  We use the universal program <b>checkinstall</b> .  First, we reconfigure the sources, specifying the normal installation paths, and assemble them: <br><br><pre> <code class="bash hljs">$ ./configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --libdir=/usr/lib $ make</code> </pre> <br>  Now, instead of make install, run checkinstall. <br><br>  To create a deb package: <br><br><pre> <code class="bash hljs">checkinstall -D make install</code> </pre> <br>  To create an rpm package: <br><br><pre> <code class="bash hljs">checkinstall -R make install</code> </pre> <br>  To create a Slackware package: <br><br><pre> <code class="bash hljs">checkinstall -S make install</code> </pre> <br>  After that, the package can be installed by means of your distribution. <br><br>  Note: <i>I do not have much experience in creating packages for such package managers, therefore, perhaps the chosen method is not the best.</i> </div><p>Source: <a href="https://habr.com/ru/post/132975/">https://habr.com/ru/post/132975/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../132963/index.html">Hosts Commander - console hosts editor for Windows and Linux</a></li>
<li><a href="../132967/index.html">Applications</a></li>
<li><a href="../132969/index.html">How do pythonists read Haskell</a></li>
<li><a href="../132973/index.html">Testing ICQ Web Clients</a></li>
<li><a href="../132974/index.html">Kodorebus or strategy pattern on .Net 4.0</a></li>
<li><a href="../132976/index.html">Conversion function stdClass to SimpleXml</a></li>
<li><a href="../132977/index.html">DasKeyboard Ultimate S Review (Perhaps the first in several years)</a></li>
<li><a href="../132978/index.html">ExtJS review 4. Porting experience from the old version</a></li>
<li><a href="../132979/index.html">Can we make the software world better?</a></li>
<li><a href="../132981/index.html">The main format of configuration files in your projects:</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
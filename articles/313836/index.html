<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The rules of good taste from Linus Torvalds. Making code faster, easier and more understandable.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚ÄúTaste is the ability to judge the beautiful‚Äù 
 I. Kant 
 Dirk Hondel, one of those who stood at the origins of Linux, once said about Linux creator L...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The rules of good taste from Linus Torvalds. Making code faster, easier and more understandable.</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <i>‚ÄúTaste is the ability to judge the beautiful‚Äù</i> <br>  I. Kant </blockquote><br>  Dirk Hondel, one of those who stood at the origins of Linux, <a href="https://www.crn.ru/numbers/reg-numbers/detail.php%3FID%3D10627">once</a> said about Linux creator Linus Torvalds: ‚ÄúLinus is not only a brilliant programmer: he has good taste.  Torvalds finds simple and reasonable solutions to problems, knows how to "sort through everything."  Complicated things he makes simple.  In my opinion, this is the main difference between an excellent programmer and just a good one. ‚Äù <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a6f/62e/710/a6f62e710cfb3a35005ec437ea8e30e0.png" alt="image" width="500"></div><br>  In a <a href="https://www.ted.com/talks/linus_torvalds_the_mind_behind_linux/transcript%3Flanguage%3Dru">recent interview</a> , about the 14th minute, Linus Torvalds touched on the theme of "good taste in programming."  Good taste?  The presenter asked him to dwell on this in more detail, and Linus, who came not empty-handed, showed a couple of slides. <br><a name="habracut"></a><br>  At first, an example of bad taste in programming was demonstrated, so that against its background one could see better the merits of a higher quality code. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bc3/eb6/39f/bc3eb639f964f74af2230b4018d7a990.png"></div><br>  <i><font color="#999999">An example of bad taste in programming</font></i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This is a C function that removes objects from a linked list.  It consists of 10 lines of code. <br><br>  Linus called attention to the if control at the bottom of the function.  It was with this fragment that he was especially displeased. <br><br>  I paused the video and carefully reviewed the slide.  I recently wrote something like that.  Basically, Linus said that I have a bad taste.  Swallowing a grudge, I continued to watch the video. <br><br>  I have already come across the fact that Linus explained to the audience.  Namely, the point was that when deleting objects from a linked list, two cases need to be considered.  The first is when the object is somewhere in the middle of the list.  The second is for the object at the top of the list.  This approach forces the use of an if construct and leads to writing tasteless code. <br><br>  But, if Linus himself recognizes the need to use a conditional operator, why doesn‚Äôt he like this approach? <br><br>  Then he showed the audience the second slide.  It was an example of the same function, but this time written with taste. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6e/6cf/1ae/c6e6cf1ae95ed53210c51a2b03c288be.png"></div><br>  <i><font color="#999999">An example of good taste in programming</font></i> <br><br>  The same as in the previous example was done in ten lines of code, now fits into four. <br>  But the length of the program text itself is not particularly important.  The approach that led to the appearance of a conditional operator at the end of the first example is important.  In the new code, additional conditions do not need to be checked.  The code has been redesigned so that the same approach is used to remove the element from the middle of the list, and to delete the first element. <br><br>  Linus explained the new code, said that the most important thing is to eliminate the border case, after which the conversation switched to another topic. <br><br><h2>  <font color="#3AC1EF">Reflections on good taste in programming</font> </h2><br>  For a while I reflected on the example.  Linus was right.  The second fragment is much better.  If it were a test for distinguishing between good and bad taste in programming, I would have failed this test.  The idea that you can do without this unfortunate condition has never crossed my mind.  And I wrote many times like this, because I often work with linked lists. <br><br>  Perhaps the main value of the above example is not even that it demonstrates a good way to remove items from a linked list.  The main thing here is that this example makes you think about the fact that the code you wrote, the implementation of small algorithms scattered around the program, can be improved in ways that you did not even realize. <br><br>  It was to this idea that I paid special attention when I decided to revise the texts of my fresh project.  Perhaps this is fate, but my program is also written in C. <br><br>  As far as I understand, the focus of the issue of good taste in programming is the elimination of borderline cases, which tend to appear in the code as conditional statements.  Good taste in programming is expressed, therefore, in reducing the number of conditions that have to be tested. <br>  I want to talk about one successful example of improving my code. <br><br><h2>  <font color="#3AC1EF">Initialization of the edges of the grid with taste</font> </h2><br>  Below is the algorithm that I wrote to initialize the elements along the edges of the grid, which is represented as a multidimensional array: <code>grid[rows][cols]</code> . <br><br>  The purpose of this code was only to initialize the values ‚Äã‚Äãfor elements that are located on the edges - that is, I was interested in the upper and lower lines, and the right and left columns. <br><br>  In order to do this, I, in the original version of the program, went through a loop on each element of the grid, and, using a conditional operator, checked whether it was on the edge.  Here's what it looked like: <br><br><pre> <code class="hljs ruby"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (r = <span class="hljs-number"><span class="hljs-number">0</span></span>; r &lt; GRID_SIZE; ++r) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (c = <span class="hljs-number"><span class="hljs-number">0</span></span>; c &lt; GRID_SIZE; ++c) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r == <span class="hljs-number"><span class="hljs-number">0</span></span>) grid[r][c] = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c == <span class="hljs-number"><span class="hljs-number">0</span></span>) grid[r][c] = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c == GRID_SIZE - <span class="hljs-number"><span class="hljs-number">1</span></span>) grid[r][c] = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r == GRID_SIZE - <span class="hljs-number"><span class="hljs-number">1</span></span>) grid[r][c] = <span class="hljs-number"><span class="hljs-number">0</span></span>; } }</code> </pre> <br>  Although everything worked as it should, it was clear that the code was far from perfect.  Namely, here are the main problems of this fragment: <br><br><ol><li>  The code is too complicated.  Using four conditional statements in two nested loops looks awkward. <br><br></li><li>  The code is ineffective.  Assuming the GRID_SIZE variable is set to 64, the body of the inner loop will execute 4096 times just to find the 256 elements at the edges. <br></li></ol><br>  Linus would probably agree that this code cannot be attributed to samples of good taste. <br><br>  Fiddling with the program for some time, I was able to reduce the complexity of the algorithm, the implementation of which now contained only one for loop, which contained four conditions.  It was a slight improvement in terms of reducing the complexity of the code structure, but a serious one in performance.  Now, only 256 loop passes are performed, one for each element located on the edge.  Here is how the same fragment looked after the improvement. <br><br><pre> <code class="hljs ruby"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; GRID_SIZE * <span class="hljs-number"><span class="hljs-number">4</span></span>; ++i) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i &lt; GRID_SIZE) grid[<span class="hljs-number"><span class="hljs-number">0</span></span>][i] = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i &lt; GRID_SIZE * <span class="hljs-number"><span class="hljs-number">2</span></span>) grid[i - GRID_SIZE][GRID_SIZE - <span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i &lt; GRID_SIZE * <span class="hljs-number"><span class="hljs-number">3</span></span>) grid[i - (GRID_SIZE * <span class="hljs-number"><span class="hljs-number">2</span></span>)][<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> grid[GRID_SIZE - <span class="hljs-number"><span class="hljs-number">1</span></span>][i - (GRID_SIZE * <span class="hljs-number"><span class="hljs-number">3</span></span>)] = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br>  Got better?  Yes.  But it all looks just disgusting.  This code is not one that can be understood at a glance.  Only this one made me move on. <br><br>  I continued to experiment, wondered if it was possible to improve something else.  The answer was unequivocal: "Yes, you can."  And what I finally came to was so strikingly simple and elegant that, frankly speaking, I could not believe that in order to figure this out, I had to spend so much time. <br><br>  Here's what I did.  There is only one cycle and no conditional statements.  Moreover, the loop body is executed only 64 times.  This option is much simpler and more productive than the first. <br><br><pre> <code class="hljs ruby"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; GRID_SIZE; ++i) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   grid[<span class="hljs-number"><span class="hljs-number">0</span></span>][i] = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   grid[GRID_SIZE - <span class="hljs-number"><span class="hljs-number">1</span></span>][i] = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   grid[i][<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   grid[i][GRID_SIZE - <span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br>  In this code, four different boundary elements are initialized at each loop iteration.  The code is simple and very efficient in terms of performance.  Its easy to read.  This option does not go to any comparison with the first and even with the second. <br><br>  As a result, I was absolutely satisfied with the results. <br><br><h2>  <font color="#3AC1EF">Do I have a taste for programming?</font> </h2><br>  And so, now I am a programmer whose code meets the rules of good taste? <br><br>  I would like to hope that this is so, but not because I was able to remake the unfortunate part of my program, which I showed above, and others, too, which I did not include in the article.  The thing is that the manifestation of good taste in programming is more than a piece of text.  Linus himself said that the example he cited was too small to properly illustrate his point of view. <br><br>  I think Linus meant that developers who have a ‚Äúgood taste for programming‚Äù differ from others in that they take the time to think about what they create before they start writing code. <br><br>  They define the boundaries of the components with which they work, and how these components interact.  They strive to make sure that everything fits together well, they try to achieve the grace of the code and the process of its execution. <br><br>  The result of this approach is similar to the code that Linus brought, and to mine, too, only on a different, larger scale. <br><br>  And how can you apply the concept of "good taste" in your projects? </div><p>Source: <a href="https://habr.com/ru/post/313836/">https://habr.com/ru/post/313836/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../313824/index.html">Daily assistants</a></li>
<li><a href="../313828/index.html">Advanced Research Foundation: a competition for the best intellectual technology for decoding aerospace information</a></li>
<li><a href="../313830/index.html">How to make the sales department finish reading a boring engineer letter about Cisco transceivers?</a></li>
<li><a href="../313832/index.html">Building a full-fledged IPTV / OTT service: Stalker Middleware</a></li>
<li><a href="../313834/index.html">The best vacancies on My Circle in a week, October 10-16</a></li>
<li><a href="../313838/index.html">The Story of One Side Project</a></li>
<li><a href="../313846/index.html">‚ÄúOur reliability requirements are higher than the average enterprise‚Äù: Deutsche Bank on Java development and conferences</a></li>
<li><a href="../313852/index.html">I'm a dull programmer and proud of it</a></li>
<li><a href="../313856/index.html">An error was detected in the Intel processors that allows to bypass the ASLR protection</a></li>
<li><a href="../313860/index.html">Adobe updated Adobe AIR to version 24 with support for a new target platform.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
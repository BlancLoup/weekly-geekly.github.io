<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android Data Binding for RecyclerView: flexible way</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Much time has passed since the first announcement on Google IO 2015 of the new Data Binding Library . There were many examples, many guides and many f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android Data Binding for RecyclerView: flexible way</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/6c8/952/c62/6c8952c6204c41fbbb57d1880fd04a08.png"><br><br>  Much time has passed since the first announcement on Google IO 2015 of the new <a href="https://developer.android.com/topic/libraries/data-binding/index.html">Data Binding Library</a> .  There were many examples, many guides and many fixes and improvements in the library itself.  Binding has already become a two-way, and you can refer to other View by their id in the layout file itself and the army of fans of this library is growing steadily.  And, probably, each new adept begins by searching for examples - how to use it correctly so that it is convenient, and less code, and in Feng Shui.  If you now drive a query on the similarity of ‚ÄúAndroid DataBinding + RecyclerView‚Äù, then, for sure, we will get a whole bunch of links to various guides.  Even on Habr√© there was already a similar article - <a href="https://habrahabr.ru/company/dataart/blog/267735/">Android Data Binding in RecyclerView</a> . <br><br>  But despite such an abundance of resources / guides, many of them show the basic functionality, and each developer, starting to actively use Data Binding, comes up with his own way of working that is convenient for him.  Next will be shown one of these methods. <br>  Example here: <a href="https://github.com/drstranges/DataBinding_For_RecyclerView">DataBinding_For_RecyclerView</a> <br><a name="habracut"></a><br>  Stages: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      - implementation / customization of the Adapter (viewTypes, items, handling clicks on elements and within the list elements themselves); <br>  - setting RecyclerView (set LayoutManager, Adapter, ItemDecorator, ItemAnimator, item divider size, ScrollListener, ...). <br><br><h2>  Configuring RecyclerView </h2><br>  Let's leave the adapter implementation for now and consider the way to configure the RecyclerView itself.  The easiest way here is to simply assign an id to RecyclerView and set all parameters in the code already: <br><br><pre><code class="java hljs">mBinding.recyclerView.setLayoutManager(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LinearLayoutManager(context)); <span class="hljs-comment"><span class="hljs-comment">// +  .</span></span></code> </pre> <br>  The second, often met, way is to make a part of the most trivial initializations in the code, for example, like this: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">android.support.v7.widget.RecyclerView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:layoutManager</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.support.v7.widget.GridLayoutManager"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  Finally, the method used by the author is to use an intermediary class that will be configured in the code and applied through binding.  The profit of this approach is the ability to hide the ‚Äúdefault‚Äù settings inside the mediation class (helper), but still have full control over the configuration of RecyclerView in one place. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">android.support.v7.widget.RecyclerView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:listConfig</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@{viewModel.listConfig}"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br>  In the code: <br><br><pre> <code class="java hljs">ListConfig listConfig = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ListConfig.Builder(mAdapter) <span class="hljs-comment"><span class="hljs-comment">//.setLayoutManagerProvider(new GridLayoutManagerProvider(mCount, mSpanLookup)) //LinearLayoutManager if not set //.addItemDecoration(new ColorDividerItemDecoration(color, spacing, SPACE_LEFT | SPACE_TOP, false)) .setDefaultDividerEnabled(true) .addOnScrollListener(new OnLoadMoreScrollListener(mCallback)) .setItemAnimator(getItemAnimator()) .setHasFixedSize(true) .setItemTouchHelper(getItemTouchHelper()) .build(context);</span></span></code> </pre><br><br><div class="spoiler">  <b class="spoiler_title">What ListConfig is</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListConfig</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Adapter, LayoutManager, ItemAnimator, ItemDecorations, ScrollListeners, // ItemTouchHelper, hasFixedSize private ListConfig(/*params*/) { // init fields } public void applyConfig(final Context context, final RecyclerView recyclerView) { //... apply config } public static class Builder { public Builder(Adapter adapter) {/*set field*/} public Builder setLayoutManagerProvider(LayoutManagerProvider layoutManagerProvider){/*set field*/} public Builder setItemAnimator(ItemAnimator itemAnimator){/*set field*/} public Builder addItemDecoration(ItemDecoration itemDecoration){/*set field*/} public Builder addOnScrollListener(OnScrollListener onScrollListener){/*set field*/} public Builder setHasFixedSize(boolean isFixedSize){/*set field*/} public Builder setDefaultDividerEnabled(boolean isEnabled){/*set field*/} public Builder setDefaultDividerSize(int size){/*set field*/} public Builder setItemTouchHelper(ItemTouchHelper itemTouchHelper){/*set field*/} public ListConfig build(Context context) { /*set default values*/ return new ListConfig(/*params*/); } } public interface LayoutManagerProvider { LayoutManager get(Context context); } }</span></span></code> </pre><br></div></div><br><h2>  Implementing a flexible adapter </h2><br>  One of the most interesting questions is inheritance or composition.  Many repeat as the mantra ‚ÄúPrefer composition to inheritance‚Äù, but still continue to produce heirs from heirs from heirs ... Whoever is not familiar with the terrific article on this topic as applied to list adapters, be sure to review <a href="http://hannesdorfmann.com/android/adapter-delegates">JOE'S GREAT ADAPTER HELL ESCAPE</a> .  In short, let's imagine this situation: we are given the task to implement a simple application with 2 lists: the list of users (User) and the list of locations (Location).  Nothing complicated, right?) We create two adapters, - UserAdapter and LocationAdapter, - and, in fact, everything.  But here, in the next ‚Äúsprint‚Äù (we are in Agile, right?), The customer also wants to add advertising to each of these lists (Advertisment). <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseModel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String name; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String avatar; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Location</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseModel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String name; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String image; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Advertisement</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseModel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String label; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String image; }</code> </pre><br>  No problem, we say, create another AdvertismentAdapter and inherit from both the previous ones: UserAdapter extends AdvertismentAdapter and LocationAdapter extends AdvertismentAdapter.  Everything is good, everyone is happy, but in the new ‚Äúsprint‚Äù the client wants another list where all 3 entities will be mixed at once.  How to be now? <br><br>  And here we go from inheritance to composition.  Before that, we had a separate adapter for each list with its own types (viewTypes), now we will replace this system with one adapter and 3 delegates for each type of list item.  The adapter will not know anything about the types of elements that it displays, but it knows that it has several delegates, asking each of them in turn to find a specific item for the list item and delegate to it the creation of this element. <br><br><div class="spoiler">  <b class="spoiler_title">Adapter on delegates</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/files/257/6d7/8c9/2576d78c96b34165916644fcc9afc166.png" width="800"></div><br></div></div><br>  In this case, we already do not care how many lists and with what types of elements there will be, any list is formed as a constructor - by a set of delegates. <br><br><pre> <code class="java hljs">mAdapter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DelegateAdapter&lt;&gt;( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserDelegate(actionHandler), <span class="hljs-comment"><span class="hljs-comment">// or new ModelItemDelegate(User.class, R.layout.item_user, BR.user), new LocationDelegate(), new AdvertismentDelegate(), // ... );</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">Example delegate implementation (UserDelegate)</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserDelegate</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActionAdapterDelegate</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseModel</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemUserBinding</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UserDelegate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ActionClickListener actionHandler)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(actionHandler); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isForViewType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@NonNull </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> List&lt;BaseModel&gt; items, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> items.get(position) <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> User; } <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BindingHolder&lt;ItemUserBinding&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateViewHolder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ViewGroup parent)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BindingHolder.newInstance(R.layout.item_user, LayoutInflater.from(parent.getContext()), parent, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onBindViewHolder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@NonNull </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> List&lt;BaseModel&gt; items, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position, @NonNull </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> BindingHolder&lt;ItemUserBinding&gt; holder)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> User user = (User) items.get(position); holder.getBinding().setUser(user); holder.getBinding().setActionHandler(getActionHandler()); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getItemId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> List&lt;BaseModel&gt; items, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> items.get(position).getId(); } }</code> </pre><br></div></div><br>  As for DataBinding, all the magic is in a special ViewHolder: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BindingHolder</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VB</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewDataBinding</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RecyclerView</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewHolder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> VB mBinding; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;VB extends ViewDataBinding&gt; <span class="hljs-function"><span class="hljs-function">BindingHolder&lt;VB&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">newInstance</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( @LayoutRes </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> layoutId, LayoutInflater inflater, ViewGroup parent, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> attachToParent)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> VB vb = DataBindingUtil.inflate(inflater, layoutId, parent, attachToParent); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BindingHolder&lt;&gt;(vb); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BindingHolder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(VB binding)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(binding.getRoot()); mBinding = binding; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> VB </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBinding</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mBinding; } }</code> </pre><br>  If, however, even laziness to create a separate delegate for each new type / type of list item, you can use the binding feature and use a single universal delegate for any type: <br><br><pre> <code class="java hljs"> <span class="hljs-comment"><span class="hljs-comment">// new UserDelegate(actionHandler), new ModelItemDelegate(User.class, R.layout.item_user); // or new ModelItemDelegate(R.layout.item_user, BR.model, (item) -&gt; item instance of User);</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">ModelItemDelegate</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ModelItemDelegate</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseListBindingAdapterDelegate</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewDataBinding</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mModelId; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mItemLayoutResId; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ViewTypeClause mViewTypeClause; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ModelItemDelegate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@NonNull Class&lt;? extends T&gt; modelClass, @LayoutRes </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> itemLayoutResId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>(itemLayoutResId, BR.model, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleViewTypeClause(modelClass)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ModelItemDelegate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@LayoutRes </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> itemLayoutResId, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> modelId, ViewTypeClause viewTypeClause)</span></span></span><span class="hljs-function"> </span></span>{ mItemLayoutResId = itemLayoutResId; mViewTypeClause = viewTypeClause; mModelId = modelId != <span class="hljs-number"><span class="hljs-number">0</span></span> ? modelId : BR.model; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isForViewType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@NonNull List&lt;T&gt; items, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mViewTypeClause.isForViewType(items, position); } <span class="hljs-meta"><span class="hljs-meta">@NonNull</span></span> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BindingHolder&lt;ViewDataBinding&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateViewHolder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ViewGroup parent)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BindingHolder.newInstance(mItemLayoutResId, LayoutInflater.from(parent.getContext()), parent, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onBindViewHolder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@NonNull List&lt;T&gt; items, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position, @NonNull BindingHolder&lt;ViewDataBinding&gt; holder)</span></span></span><span class="hljs-function"> </span></span>{ ViewDataBinding binding = holder.getBinding(); binding.setVariable(mModelId, items.get(position)); binding.executePendingBindings(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewTypeClause</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isForViewType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;?&gt; items, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position)</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SimpleViewTypeClause</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewTypeClause</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Class&lt;?&gt; mClass; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SimpleViewTypeClause</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@NonNull Class&lt;?&gt; aClass)</span></span></span><span class="hljs-function"> </span></span>{ mClass = aClass; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isForViewType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;?&gt; items, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mClass.isAssignableFrom(items.get(position).getClass()); } } }</code> </pre><br></div></div><br>  It is easy to implement the processing of clicks on elements by transferring a click handler through the binding, for example, as described here - <a href="https://habrahabr.ru/post/305916/">Android and Data Binding: processing actions</a> , or using any other method convenient for you. <br><br><h2>  Conclusion </h2><br>  Thus, using the Android Data Binding Library, the implementation of lists becomes a completely trivial thing.  You do not even need to write the implementation of the things shown above, but simply by importing the author's ready-made library, or simply by copying them from there. <br><br>  Example library: <a href="https://github.com/drstranges/DataBinding_For_RecyclerView">DataBinding_For_RecyclerView</a> </div><p>Source: <a href="https://habr.com/ru/post/308872/">https://habr.com/ru/post/308872/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../308862/index.html">HTTP / 2 is already here but sprite sets are not dead yet.</a></li>
<li><a href="../308864/index.html">Asynchronous code to synchronous embedded</a></li>
<li><a href="../308866/index.html">How to survive the influx of customers and not to close: a checklist for Internet entrepreneurs</a></li>
<li><a href="../308868/index.html">Multiple git directory watcher</a></li>
<li><a href="../308870/index.html">A bit about VPN: Add-ons to the software implementation overview</a></li>
<li><a href="../308874/index.html">64-bit browser arithmetic and WebAssembly</a></li>
<li><a href="../308876/index.html">Cross-cloud architecture and VMware Cloud Foundation, a single platform for managing SDDC</a></li>
<li><a href="../308878/index.html">The logic of consciousness. Part 2. Dendritic waves</a></li>
<li><a href="../308880/index.html">NGINX: Interception of 5xx errors using a debug server</a></li>
<li><a href="../308882/index.html">SRL - Simple Regex Language</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>$ mol_app_bench: preparing JS benchmarks quickly and easily</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, my name is Dmitry Karlovsky and I ... he is still a gourmet. I like to prepare exquisite dishes that elegantly and simply solve the usual probl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>$ mol_app_bench: preparing JS benchmarks quickly and easily</h1><div class="post__text post__text-html js-mediator-article"><p>  Hello, my name is Dmitry Karlovsky and I ... he is still a gourmet.  I like to prepare exquisite dishes that elegantly and simply solve the usual problems that have already grinned teeth.  You can talk for a long time about the benefits of various approaches, cheaper support, speeding up development, and simplifying debugging, but all this remains quite subjective assessments that need to be pondered.  Therefore, sooner or later (but, as a rule, prematurely), the entire discussion falls to more or less measurable quantities - speed of work, download speed and other speeds.  And not only do you need to make several implementations on different technologies, so that there is something to compare, it would not be too bad to draw an interface with results that are understandable to humans.  And all this - time, which is always not enough, especially if done well. </p><br><p>  To simplify the development of benchmarks, we have allocated their common part into a <a href="https://github.com/eigenmethod/mol/tree/master/app/bench">separate application that draws the entire interface</a> from the choice of the tested options to the visual presentation of the results, and the variable part is connected from the outside and implements a fairly simple interface.  All the "naklikannoe" state is stored in the link, so that they are easy to share with other gourmets.  In addition, localization and sorting of results by various criteria is supported - a real feast for all lovers of fast food. </p><br><p><img src="https://habrastorage.org/files/24d/736/4bb/24d7364bb4004b2fbce34c8380f65abc.png" alt="Hurry up, and then all the tasty eat"></p><br><p>  <strong>Next you will find out</strong> : </p><br><ul><li>  How to stir up your benchmark, almost no effort. </li><li>  How to file something on more difficult, with loading entire applications in separate frames. </li><li>  How does $ mol_app_bench work from the inside? </li><li>  How to live now with all this. <a name="habracut"></a></li></ul><br><h1 id="holostyackiy-zavtrak">  Bachelor breakfast </h1><br><p><img src="http://otvedai.net/uploads/posts/2015-04/1429338886_picsart_1429337668809-1.jpg" alt="Simple and tasteful"></p><br><p>  Suppose we want to know how much it costs to add various HTML elements to the DOM.  For example, did you know that in Chrome the element "Q" is 5 times heavier than "BLOCKQUOTE", and the element "IFRAME" is 20 times heavier than "OBJECT"?  To find out these and other interesting facts, we implement this simple benchmark. </p><br><p>  The whole benchmark is just a html page that you can put on any site.  $ mol_app_bench will open it in a frame and interact with it using messages.  Page frame is quite trivial: </p><br><pre><code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> * { </span><span class="hljs-comment"><span class="css"><span class="hljs-comment">/*                */</span></span></span><span class="css"> </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">position</span></span></span><span class="css">: absolute; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">//       </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  It is necessary to specify in advance how many elements we plan to display; this number will come in handy later: </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-built_in"><span class="hljs-built_in">count</span></span> = <span class="hljs-number"><span class="hljs-number">500</span></span></code> </pre> <br><p>  If the benchmark is opened directly, and not through $ mol_app_bench, then simply redirect to $ mol_app_bench with instructions to open the current benchmark: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">window</span></span>.parent === <span class="hljs-keyword"><span class="hljs-keyword">window</span></span> ) document.<span class="hljs-keyword"><span class="hljs-keyword">location</span></span> = <span class="hljs-string"><span class="hljs-string">'//eigenmethod.github.io/mol/app/bench/#bench='</span></span> + encodeURIComponent( <span class="hljs-keyword"><span class="hljs-keyword">location</span></span>.href )</code> </pre> <br><p>  The benchmark and the interface communicate through the simplest RPC of the form <code>[ ' ' , ...[  ] ]</code> .  For simplicity, we will simply call the corresponding function with the appropriate parameters: </p><br><pre> <code class="hljs javascript"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener( <span class="hljs-string"><span class="hljs-string">'message'</span></span> , <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> event </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>[ event.data[<span class="hljs-number"><span class="hljs-number">0</span></span>] ].apply( <span class="hljs-literal"><span class="hljs-literal">null</span></span> , event.data.slice( <span class="hljs-number"><span class="hljs-number">1</span></span> ) ) } )</code> </pre> <br><p>  When $ mol_app_bench starts, it will open our benchmark in the frame and send us the message <code>[ 'meta' ]</code> , therefore we will implement the corresponding function: </p><br><pre> <code class="hljs matlab"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">meta</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">done</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( metaData )</span></span></span><span class="hljs-function"> }</span></span></code> </pre> <br><p>  The answer to the RPC call $ mol_app_bench expects as a message <code>[ 'done' , ...[  ] ]</code> , so everything is also simple here: </p><br><pre> <code class="hljs php"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">done</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( result )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>.postMessage( [ <span class="hljs-string"><span class="hljs-string">'done'</span></span> , result ] , <span class="hljs-string"><span class="hljs-string">'*'</span></span> ) }</code> </pre> <br><p>  The <code>meta</code> method should return $ mol_app_bench the following benchmark meta information: </p><br><ul><li>  name of benchmark </li><li>  benchmark markdown format description </li><li>  what are the options for implementation </li><li>  what are the steps of measurements </li></ul><br><p>  All texts are specified with the language specified.  In our case, the meta information will be presented as follows: </p><br><pre> <code class="hljs axapta">var metaData = { title : { <span class="hljs-string"><span class="hljs-string">'en'</span></span> : <span class="hljs-string"><span class="hljs-string">'HTML Elements rendering time'</span></span> , <span class="hljs-string"><span class="hljs-string">'ru'</span></span> : <span class="hljs-string"><span class="hljs-string">'  HTML '</span></span> , } , descr : { <span class="hljs-string"><span class="hljs-string">'en'</span></span> : <span class="hljs-string"><span class="hljs-string">'Simply add **'</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> + <span class="hljs-string"><span class="hljs-string">' elements**.'</span></span> , <span class="hljs-string"><span class="hljs-string">'ru'</span></span> : <span class="hljs-string"><span class="hljs-string">'    **'</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> + <span class="hljs-string"><span class="hljs-string">' **  .'</span></span> , } , samples : { } , steps : { <span class="hljs-string"><span class="hljs-string">'fill'</span></span> : { title : { <span class="hljs-string"><span class="hljs-string">'en'</span></span> : <span class="hljs-string"><span class="hljs-string">'Adding elements'</span></span> , <span class="hljs-string"><span class="hljs-string">'ru'</span></span> : <span class="hljs-string"><span class="hljs-string">' '</span></span> , } , } , } , }</code> </pre> <br><p>  We have only one measurement here - <code>fill</code> , and implementations are not specified at all, since they need to be generated programmatically from the list of element names.  Here, by the way, and he: </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tagNames = [ <span class="hljs-string"><span class="hljs-string">'a'</span></span> , <span class="hljs-string"><span class="hljs-string">'abbr'</span></span> , <span class="hljs-string"><span class="hljs-string">'acronym'</span></span> , <span class="hljs-string"><span class="hljs-string">'address'</span></span> , <span class="hljs-string"><span class="hljs-string">'applet'</span></span> , <span class="hljs-string"><span class="hljs-string">'area'</span></span> , <span class="hljs-string"><span class="hljs-string">'article'</span></span> , <span class="hljs-string"><span class="hljs-string">'aside'</span></span> , <span class="hljs-string"><span class="hljs-string">'audio'</span></span> , <span class="hljs-string"><span class="hljs-string">'b'</span></span> , <span class="hljs-string"><span class="hljs-string">'base'</span></span> , <span class="hljs-string"><span class="hljs-string">'basefont'</span></span> , <span class="hljs-string"><span class="hljs-string">'bdi'</span></span> , <span class="hljs-string"><span class="hljs-string">'bdo'</span></span> , <span class="hljs-string"><span class="hljs-string">'bgsound'</span></span> , <span class="hljs-string"><span class="hljs-string">'big'</span></span> , <span class="hljs-string"><span class="hljs-string">'blink'</span></span> , <span class="hljs-string"><span class="hljs-string">'blockquote'</span></span> , <span class="hljs-string"><span class="hljs-string">'body'</span></span> , <span class="hljs-string"><span class="hljs-string">'br'</span></span> , <span class="hljs-string"><span class="hljs-string">'button'</span></span> , <span class="hljs-string"><span class="hljs-string">'canvas'</span></span> , <span class="hljs-string"><span class="hljs-string">'caption'</span></span> , <span class="hljs-string"><span class="hljs-string">'center'</span></span> , <span class="hljs-string"><span class="hljs-string">'cite'</span></span> , <span class="hljs-string"><span class="hljs-string">'code'</span></span> , <span class="hljs-string"><span class="hljs-string">'col'</span></span> , <span class="hljs-string"><span class="hljs-string">'colgroup'</span></span> , <span class="hljs-string"><span class="hljs-string">'command'</span></span> , <span class="hljs-string"><span class="hljs-string">'content'</span></span> , <span class="hljs-string"><span class="hljs-string">'data'</span></span> , <span class="hljs-string"><span class="hljs-string">'datalist'</span></span> , <span class="hljs-string"><span class="hljs-string">'dd'</span></span> , <span class="hljs-string"><span class="hljs-string">'del'</span></span> , <span class="hljs-string"><span class="hljs-string">'details'</span></span> , <span class="hljs-string"><span class="hljs-string">'dfn'</span></span> , <span class="hljs-string"><span class="hljs-string">'dialog'</span></span> , <span class="hljs-string"><span class="hljs-string">'dir'</span></span> , <span class="hljs-string"><span class="hljs-string">'div'</span></span> , <span class="hljs-string"><span class="hljs-string">'dl'</span></span> , <span class="hljs-string"><span class="hljs-string">'dt'</span></span> , <span class="hljs-string"><span class="hljs-string">'element'</span></span> , <span class="hljs-string"><span class="hljs-string">'em'</span></span> , <span class="hljs-string"><span class="hljs-string">'embed'</span></span> , <span class="hljs-string"><span class="hljs-string">'fieldset'</span></span> , <span class="hljs-string"><span class="hljs-string">'figcaption'</span></span> , <span class="hljs-string"><span class="hljs-string">'figure'</span></span> , <span class="hljs-string"><span class="hljs-string">'font'</span></span> , <span class="hljs-string"><span class="hljs-string">'footer'</span></span> , <span class="hljs-string"><span class="hljs-string">'form'</span></span> , <span class="hljs-string"><span class="hljs-string">'frame'</span></span> , <span class="hljs-string"><span class="hljs-string">'frameset'</span></span> , <span class="hljs-string"><span class="hljs-string">'head'</span></span> , <span class="hljs-string"><span class="hljs-string">'header'</span></span> , <span class="hljs-string"><span class="hljs-string">'hgroup'</span></span> , <span class="hljs-string"><span class="hljs-string">'hr'</span></span> , <span class="hljs-string"><span class="hljs-string">'html'</span></span> , <span class="hljs-string"><span class="hljs-string">'i'</span></span> , <span class="hljs-string"><span class="hljs-string">'iframe'</span></span> , <span class="hljs-string"><span class="hljs-string">'image'</span></span> , <span class="hljs-string"><span class="hljs-string">'img'</span></span> , <span class="hljs-string"><span class="hljs-string">'input'</span></span> , <span class="hljs-string"><span class="hljs-string">'ins'</span></span> , <span class="hljs-string"><span class="hljs-string">'isindex'</span></span> , <span class="hljs-string"><span class="hljs-string">'kbd'</span></span> , <span class="hljs-string"><span class="hljs-string">'keygen'</span></span> , <span class="hljs-string"><span class="hljs-string">'label'</span></span> , <span class="hljs-string"><span class="hljs-string">'legend'</span></span> , <span class="hljs-string"><span class="hljs-string">'li'</span></span> , <span class="hljs-string"><span class="hljs-string">'link'</span></span> , <span class="hljs-string"><span class="hljs-string">'listing'</span></span> , <span class="hljs-string"><span class="hljs-string">'main'</span></span> , <span class="hljs-string"><span class="hljs-string">'map'</span></span> , <span class="hljs-string"><span class="hljs-string">'mark'</span></span> , <span class="hljs-string"><span class="hljs-string">'marquee'</span></span> , <span class="hljs-string"><span class="hljs-string">'menu'</span></span> , <span class="hljs-string"><span class="hljs-string">'menuitem'</span></span> , <span class="hljs-string"><span class="hljs-string">'meta'</span></span> , <span class="hljs-string"><span class="hljs-string">'meter'</span></span> , <span class="hljs-string"><span class="hljs-string">'multicol'</span></span> , <span class="hljs-string"><span class="hljs-string">'nav'</span></span> , <span class="hljs-string"><span class="hljs-string">'nobr'</span></span> , <span class="hljs-string"><span class="hljs-string">'noembed'</span></span> , <span class="hljs-string"><span class="hljs-string">'noframes'</span></span> , <span class="hljs-string"><span class="hljs-string">'noscript'</span></span> , <span class="hljs-string"><span class="hljs-string">'object'</span></span> , <span class="hljs-string"><span class="hljs-string">'ol'</span></span> , <span class="hljs-string"><span class="hljs-string">'optgroup'</span></span> , <span class="hljs-string"><span class="hljs-string">'option'</span></span> , <span class="hljs-string"><span class="hljs-string">'output'</span></span> , <span class="hljs-string"><span class="hljs-string">'p'</span></span> , <span class="hljs-string"><span class="hljs-string">'param'</span></span> , <span class="hljs-string"><span class="hljs-string">'picture'</span></span> , <span class="hljs-string"><span class="hljs-string">'plaintext'</span></span> , <span class="hljs-string"><span class="hljs-string">'pre'</span></span> , <span class="hljs-string"><span class="hljs-string">'progress'</span></span> , <span class="hljs-string"><span class="hljs-string">'q'</span></span> , <span class="hljs-string"><span class="hljs-string">'rp'</span></span> , <span class="hljs-string"><span class="hljs-string">'rt'</span></span> , <span class="hljs-string"><span class="hljs-string">'rtc'</span></span> , <span class="hljs-string"><span class="hljs-string">'ruby'</span></span> , <span class="hljs-string"><span class="hljs-string">'s'</span></span> , <span class="hljs-string"><span class="hljs-string">'samp'</span></span> , <span class="hljs-string"><span class="hljs-string">'script'</span></span> , <span class="hljs-string"><span class="hljs-string">'section'</span></span> , <span class="hljs-string"><span class="hljs-string">'select'</span></span> , <span class="hljs-string"><span class="hljs-string">'shadow'</span></span> , <span class="hljs-string"><span class="hljs-string">'small'</span></span> , <span class="hljs-string"><span class="hljs-string">'source'</span></span> , <span class="hljs-string"><span class="hljs-string">'spacer'</span></span> , <span class="hljs-string"><span class="hljs-string">'span'</span></span> , <span class="hljs-string"><span class="hljs-string">'strike'</span></span> , <span class="hljs-string"><span class="hljs-string">'strong'</span></span> , <span class="hljs-string"><span class="hljs-string">'style'</span></span> , <span class="hljs-string"><span class="hljs-string">'sub'</span></span> , <span class="hljs-string"><span class="hljs-string">'summary'</span></span> , <span class="hljs-string"><span class="hljs-string">'sup'</span></span> , <span class="hljs-string"><span class="hljs-string">'table'</span></span> , <span class="hljs-string"><span class="hljs-string">'tbody'</span></span> , <span class="hljs-string"><span class="hljs-string">'td'</span></span> , <span class="hljs-string"><span class="hljs-string">'template'</span></span> , <span class="hljs-string"><span class="hljs-string">'textarea'</span></span> , <span class="hljs-string"><span class="hljs-string">'tfoot'</span></span> , <span class="hljs-string"><span class="hljs-string">'th'</span></span> , <span class="hljs-string"><span class="hljs-string">'thead'</span></span> , <span class="hljs-string"><span class="hljs-string">'time'</span></span> , <span class="hljs-string"><span class="hljs-string">'title'</span></span> , <span class="hljs-string"><span class="hljs-string">'tr'</span></span> , <span class="hljs-string"><span class="hljs-string">'track'</span></span> , <span class="hljs-string"><span class="hljs-string">'tt'</span></span> , <span class="hljs-string"><span class="hljs-string">'u'</span></span> , <span class="hljs-string"><span class="hljs-string">'ul'</span></span> , <span class="hljs-string"><span class="hljs-string">'var'</span></span> , <span class="hljs-string"><span class="hljs-string">'video'</span></span> , <span class="hljs-string"><span class="hljs-string">'wbr'</span></span> , <span class="hljs-string"><span class="hljs-string">'xmp'</span></span> ]</code> </pre> <br><p>  Now we will add meta-information, a config of implementation variants: </p><br><pre> <code class="hljs php">tagNames.<span class="hljs-keyword"><span class="hljs-keyword">forEach</span></span>( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( tagName )</span></span></span><span class="hljs-function"> </span></span>{ metaData.samples[ tagName ] = { title : { <span class="hljs-string"><span class="hljs-string">'en'</span></span> : tagName } } } )</code> </pre> <br><p>  After receiving the meta-information, $ mol_app_bench draws a menu of implementations with a choice of which of them you want to measure.  For each implementation, it will successively invoke methods that correspond to the names of the steps, with the name of the implementation option being passed as an argument.  In our case, there is only one step: </p><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fill</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> sample </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>( body.firstChild ) { body.removeChild( body.firstChild ) } requestAnimationFrame( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> start = <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now() <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> frag = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createDocumentFragment() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span> ; i &lt; count ; ++ i ) { frag.appendChild( <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement( sample ) ) } body.appendChild( frag ) setImmediate( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ done( <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now() - start + <span class="hljs-string"><span class="hljs-string">' ms'</span></span> ) } ) } ) }</code> </pre> <br><p>  Here we first clean the document body, wait for the next frame of the animation so that the browser finishes all its affairs, then create the required number of elements and add them all at once to the DOM.  The browser performs some of the operations asynchronously, so through <code>setImmediate</code> we wait until it finishes and returns the measured time. </p><br><p>  However, setImmediate is a relatively new API, which is not yet implemented in all browsers, so we implement its simplest version via the postMessage already used by us: </p><br><pre> <code class="hljs actionscript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> setImmediate_task <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setImmediate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( task )</span></span></span><span class="hljs-function"> </span></span>{ setImmediate_task = task postMessage( [ <span class="hljs-string"><span class="hljs-string">'setImmediate_task'</span></span> ] , <span class="hljs-string"><span class="hljs-string">'*'</span></span> ) }</code> </pre> <br><p>  That's all: </p><br><ul><li>  <a href="https://github.com/eigenmethod/mol/blob/master/app/bench/elements/index.html">Full benchmark code</a> </li><li>  <a href="http://eigenmethod.github.io/mol/app/bench/elements/">Online result</a> </li></ul><br><h1 id="uzhin-dlya-vsey-semi">  Dinner for the whole family </h1><br><p><img src="http://academy-system.com/wp-content/uploads/2016/02/3493_900.jpg" alt="Meals for every taste"></p><br><p>  Suppose we want to know which JS framework is the fastest.  To do this, we need to implement the same application on them all and drive out the same usage scenarios on each of them, measuring the time of their completion.  There are so many frameworks in JS that it will take more than one month to understand each of them and implement even the simplest application.  Therefore, we will take ready-made applications from the <a href="http://todomvc.com/">ToDoMVC</a> project.  To do this, we <a href="https://github.com/eigenmethod/todomvc">fork it</a> , add <a href="https://github.com/eigenmethod/todomvc/tree/master/benchmark">our benchmark</a> and <a href="http://eigenmethod.github.io/todomvc/benchmark/">post it on github.io</a> (The corresponding <a href="https://github.com/tastejs/todomvc/pull/1727">merge request</a> is still waiting for its <a href="http://eigenmethod.github.io/todomvc/benchmark/">high point</a> ). </p><br><p>  Our benchmark will open implementations in a separate frame: </p><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iframe</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sandbox"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iframe</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  We will have 3 steps: </p><br><ul><li>  Application opening time </li><li>  Time to create task batches </li><li>  Time to delete all tasks sequentially </li></ul><br><pre> <code class="hljs axapta">var metaData = { title : { <span class="hljs-string"><span class="hljs-string">'en'</span></span> : <span class="hljs-string"><span class="hljs-string">'ToDoMVC workflow benchmark'</span></span> , <span class="hljs-string"><span class="hljs-string">'ru'</span></span> : <span class="hljs-string"><span class="hljs-string">'ToDoMVC -  '</span></span> , } , descr : { <span class="hljs-string"><span class="hljs-string">'en'</span></span> : <span class="hljs-string"><span class="hljs-string">'Sample applications is [ToDOMVC](todomvc.com) implementations. Benchmark creates **'</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> + <span class="hljs-string"><span class="hljs-string">' tasks** in sequence and then removes them.'</span></span> , <span class="hljs-string"><span class="hljs-string">'ru'</span></span> : <span class="hljs-string"><span class="hljs-string">'    [ToDOMVC](todomvc.com)     .       **'</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> + <span class="hljs-string"><span class="hljs-string">' **    .'</span></span> , } , samples : { } , steps : { <span class="hljs-string"><span class="hljs-string">'start'</span></span> : { title : { <span class="hljs-string"><span class="hljs-string">'en'</span></span> : <span class="hljs-string"><span class="hljs-string">'Load and init'</span></span> , <span class="hljs-string"><span class="hljs-string">'ru'</span></span> : <span class="hljs-string"><span class="hljs-string">'  '</span></span> , } , } , <span class="hljs-string"><span class="hljs-string">'fill'</span></span> : { title : { <span class="hljs-string"><span class="hljs-string">'en'</span></span> : <span class="hljs-string"><span class="hljs-string">'Tasks creating'</span></span> , <span class="hljs-string"><span class="hljs-string">'ru'</span></span> : <span class="hljs-string"><span class="hljs-string">' '</span></span> , } , } , <span class="hljs-string"><span class="hljs-string">'clear'</span></span> : { title : { <span class="hljs-string"><span class="hljs-string">'en'</span></span> : <span class="hljs-string"><span class="hljs-string">'Tasks removing'</span></span> , <span class="hljs-string"><span class="hljs-string">'ru'</span></span> : <span class="hljs-string"><span class="hljs-string">' '</span></span> , } , } , } , }</code> </pre> <br><p>  Information about the variants of implementations is in the file learn.json, which we are not steaming synchronously download and add meta-information: </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> xhr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> XMLHttpRequest xhr.open( <span class="hljs-string"><span class="hljs-string">'get'</span></span> , <span class="hljs-string"><span class="hljs-string">'../learn.json'</span></span> , <span class="hljs-literal"><span class="hljs-literal">false</span></span> ) xhr.send() <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> learn = <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse( xhr.responseText ) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lib <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> learn ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( lib === <span class="hljs-string"><span class="hljs-string">'templates'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> learn[ lib ].examples.forEach( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> example </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( !<span class="hljs-regexp"><span class="hljs-regexp">/^examples\/[-a-zA-Z0-9_\/]+$/</span></span>.test( example.url ) ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> metaData.samples[ example.url.replace( <span class="hljs-regexp"><span class="hljs-regexp">/(^examples\/|\/$)/g</span></span> , <span class="hljs-string"><span class="hljs-string">''</span></span> ) ] = { <span class="hljs-attr"><span class="hljs-attr">title</span></span> : { <span class="hljs-string"><span class="hljs-string">'en'</span></span> : learn[ lib ].name + <span class="hljs-string"><span class="hljs-string">' '</span></span> + example.name } } } ) }</code> </pre> <br><p>  Before embarking on the implementation of measurements, we will memorize the link to the frame and write down the selectors to search for the necessary elements in the applications: </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sandbox = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById( <span class="hljs-string"><span class="hljs-string">'sandbox'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selector = { <span class="hljs-attr"><span class="hljs-attr">adder</span></span> : <span class="hljs-string"><span class="hljs-string">'#new-todo,.new-todo,.todo__new,[mol_app_todomvc_add]'</span></span> , <span class="hljs-attr"><span class="hljs-attr">adderForm</span></span> : <span class="hljs-string"><span class="hljs-string">'#todo-form,.todo-form,#header form'</span></span> , <span class="hljs-attr"><span class="hljs-attr">dropper</span></span> : <span class="hljs-string"><span class="hljs-string">'.destroy,[mol_app_todomvc_task_row_drop]'</span></span> , }</code> </pre> <br><p>  We detect the start of the application by the appearance of an element for adding tasks: </p><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> sample </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> start = <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now() sandbox.src = <span class="hljs-string"><span class="hljs-string">'../examples/'</span></span> + sample + <span class="hljs-string"><span class="hljs-string">'/'</span></span> sandbox.onload = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ step() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( sandbox.contentDocument.querySelector( selector.adder ) ) done( <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now() - start + <span class="hljs-string"><span class="hljs-string">' ms'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> setTimeout( step , <span class="hljs-number"><span class="hljs-number">10</span></span> ) } } }</code> </pre> <br><p>  To add a task, we simulate all the events that occur in the browser when the user enters the name and presses "ENTER": </p><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-function">function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fill</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> sample </span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> adder = sandbox.contentDocument.querySelector( selector.adder ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> adderForm = sandbox.contentDocument.querySelector( selector.adderForm ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> start = Date.now() step() <span class="hljs-function"><span class="hljs-function">function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { adder.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-string"><span class="hljs-string">'Something to do '</span></span> + i adder.dispatchEvent( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Event( <span class="hljs-string"><span class="hljs-string">'input'</span></span> , { bubbles : <span class="hljs-literal"><span class="hljs-literal">true</span></span> } ) ) adder.dispatchEvent( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Event( <span class="hljs-string"><span class="hljs-string">'change'</span></span> , { bubbles : <span class="hljs-literal"><span class="hljs-literal">true</span></span> } ) ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Event( <span class="hljs-string"><span class="hljs-string">'keydown'</span></span> , { bubbles : <span class="hljs-literal"><span class="hljs-literal">true</span></span> } ) <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.keyCode = <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.which = <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.key = <span class="hljs-string"><span class="hljs-string">'Enter'</span></span> adder.dispatchEvent( <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Event( <span class="hljs-string"><span class="hljs-string">'keypress'</span></span> , { bubbles : <span class="hljs-literal"><span class="hljs-literal">true</span></span> } ) <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.keyCode = <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.which = <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.key = <span class="hljs-string"><span class="hljs-string">'Enter'</span></span> adder.dispatchEvent( <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Event( <span class="hljs-string"><span class="hljs-string">'compositionend'</span></span> , { bubbles : <span class="hljs-literal"><span class="hljs-literal">true</span></span> } ) <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.keyCode = <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.which = <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.key = <span class="hljs-string"><span class="hljs-string">'Enter'</span></span> adder.dispatchEvent( <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Event( <span class="hljs-string"><span class="hljs-string">'keyup'</span></span> , { bubbles : <span class="hljs-literal"><span class="hljs-literal">true</span></span> } ) <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.keyCode = <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.which = <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.key = <span class="hljs-string"><span class="hljs-string">'Enter'</span></span> adder.dispatchEvent( <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Event( <span class="hljs-string"><span class="hljs-string">'blur'</span></span> , { bubbles : <span class="hljs-literal"><span class="hljs-literal">true</span></span> } ) adder.dispatchEvent( <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( adderForm ) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Event( <span class="hljs-string"><span class="hljs-string">'submit'</span></span> , { bubbles : <span class="hljs-literal"><span class="hljs-literal">true</span></span> } ) <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.keyCode = <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.which = <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.key = <span class="hljs-string"><span class="hljs-string">'Enter'</span></span> adderForm.dispatchEvent( <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> ) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( ++i &lt;= count ) setImmediate( step ) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> done( Date.now() - start + <span class="hljs-string"><span class="hljs-string">' ms'</span></span> ) } }</code> </pre> <br><p>  So many events we throw, since different frameworks react to different events to implement the same functionality.  The set and configuration of events had to be selected manually by looking at the implementations that were made with the benchmark.  Now most implementations are working out correctly, but some are still kosyachat, which can be seen with the naked eye when they are launched.  Community requests requesting a benchmark with these implementations would be very useful ;-) </p><br><p>  And the last step - the consistent removal of all tasks.  Everything is simple: </p><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clear</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> sample </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> start = <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now() step() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dropper = sandbox.contentDocument.querySelector( selector.dropper ) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( !dropper ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> done( <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now() - start + <span class="hljs-string"><span class="hljs-string">' ms'</span></span> ) dropper.dispatchEvent( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Event( <span class="hljs-string"><span class="hljs-string">'mousedown'</span></span> , { <span class="hljs-attr"><span class="hljs-attr">bubbles</span></span> : <span class="hljs-literal"><span class="hljs-literal">true</span></span> } ) ) dropper.dispatchEvent( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Event( <span class="hljs-string"><span class="hljs-string">'mouseup'</span></span> , { <span class="hljs-attr"><span class="hljs-attr">bubbles</span></span> : <span class="hljs-literal"><span class="hljs-literal">true</span></span> } ) ) dropper.dispatchEvent( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Event( <span class="hljs-string"><span class="hljs-string">'click'</span></span> , { <span class="hljs-attr"><span class="hljs-attr">bubbles</span></span> : <span class="hljs-literal"><span class="hljs-literal">true</span></span> } ) ) setImmediate( step ) } }</code> </pre> <br><p>  That's all, it turned out not much, and more difficult, is not it? </p><br><ul><li>  <a href="https://github.com/eigenmethod/todomvc/blob/master/benchmark/index.html">Full benchmark code</a> </li><li>  <a href="http://eigenmethod.github.io/todomvc/benchmark/">Online result</a> </li></ul><br><h1 id="samaya-myakotka-mol_app_bench">  The most pulp $ mol_app_bench </h1><br><p><img src="http://sovetclub.ru/tim/c1ce7344453fd47434e1a1a08aed29a8.jpg" alt="My darling"></p><br><p>  First we outline the structure of our application.  It will consist of 2 panels: main with benchmark and results;  and additional with the menu of choice of implementations: </p><br><pre> <code class="hljs mel">$mol_app_bench $mol_view sub / &lt;= Addon_page $mol_page &lt;= Main_page $mol_page</code> </pre> <br><p>  For additional, let's set the title and the actual list of implementations, which we will later programmatically: </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Addon_page</span></span> <span class="hljs-variable"><span class="hljs-variable">$mol_page</span></span> title &lt;= addon_title @ \Samples body / &lt;= Menu <span class="hljs-variable"><span class="hljs-variable">$mol_list</span></span> rows &lt;= menu_options /</code> </pre> <br><p>  Do not be embarrassed that we sewed up the English text right here.  Thanks to the dog, when assembling it will be extracted to a file with English strings. </p><br><p>  Next, let us specify that each menu item will be nothing more than a checkbox that allows you to enable or disable measurements of the corresponding implementation: </p><br><pre> <code class="hljs objectivec">Menu_option!<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> $mol_check_box checked?val &lt;=&gt; menu_option_checked!<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>?val <span class="hljs-literal"><span class="hljs-literal">false</span></span> label / &lt;= menu_option_title!<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> \</code> </pre> <br><p>  As you can see, we have here used one-sided and two-sided binding for interaction with nested components.  The name to the right of the arrow is the name of the property of our component (in this case, the application component), and to the left is the property of the nested component. </p><br><p>  In the main panel, we will display an information block with a description and results, as well as a sandbox into which applications will be loaded: </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Main_page</span></span> <span class="hljs-variable"><span class="hljs-variable">$mol_page</span></span> title &lt;= title - body / &lt;= Inform <span class="hljs-variable"><span class="hljs-variable">$mol_view</span></span> &lt;= Sandbox <span class="hljs-variable"><span class="hljs-variable">$mol_view</span></span> dom_name \iframe</code> </pre> <br><p>  As you can see, the title of this panel will be the title of the entire application, which will also be displayed in the name of the browser tab. </p><br><p>  In the information block, we will display the description through the markdown component of the visualization, and we will output the results through the output component of the comparative tables: </p><br><pre> <code class="hljs django"><span class="xml"><span class="xml">Inform $mol_view sub / </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Descr</span></span></span></span><span class="xml"><span class="hljs-tag"> $</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">mol_text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">description</span></span></span></span><span class="xml"><span class="hljs-tag"> \ &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">Result</span></span></span></span><span class="xml"><span class="hljs-tag"> $</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">mol_bench</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">result</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">result</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">null</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">col_head_label</span></span></span></span><span class="xml"><span class="hljs-tag">!</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag"> / &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">result_col_title!id</span></span></span></span><span class="xml"><span class="hljs-tag"> / </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">col_sort</span></span></span></span><span class="xml"><span class="hljs-tag">?</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">val</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;=&gt;</span></span></span><span class="xml"> result_col_sort?val \</span></span></code> </pre> <br><p>  The final touch, let's set the title for the column with the names of the implementations in the output comparative table, which we will use a little later: </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">result_col_title_sample</span></span> @ \Sample</code> </pre> <br><p>  Combine all these pieces of code and get a <a href="">complete description of the structure of the application</a> . </p><br><p>  Now you can take on the behavior, to add which, it suffices to extend the class automatically generated from the structure description: </p><br><pre> <code class="hljs scala">namespace $.$mol { export <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">$mol_app_bench</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">$</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">$mol_app_bench</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//           } }</span></span></code> </pre> <br><p>  First of all, we need to get a reference to the benchmark from the address bar: </p><br><pre> <code class="hljs kotlin">@ $mol_mem() bench() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $mol_state_arg.value( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state_key( <span class="hljs-string"><span class="hljs-string">'bench'</span></span> ) ) || <span class="hljs-string"><span class="hljs-string">'list/'</span></span> }</code> </pre> <br><p>  As you can see, if the benchmark is not set, then the benchmark of list output with different frameworks opens, which lies side by side. </p><br><p>  Next, we need a link to the sandbox, and not just a link, but with a benchmark already loaded there, so we write the value of the property only after waiting for the 'load' event in the frame: </p><br><pre> <code class="hljs javascript">@ $mol_mem() sandbox( next? : HTMLIFrameElement , force? : $mol_atom_force ) : HTMLIFrameElement { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> next2 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Sandbox().dom_node() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> HTMLIFrameElement next2.src = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.bench() next2.onload = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function"> =&gt;</span></span> { next2.onload = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.sandbox( next2 , $mol_atom_force ) } <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> $mol_atom_wait( <span class="hljs-string"><span class="hljs-string">`Loading sandbox...`</span></span> ) }</code> </pre> <br><p>  The implementation code of the <code>sandbox</code> property turned out to be asynchronous, but this asynchrony is isolated from the surrounding code, so the external interface of this property remains as before synchronized due to the <a href="https://habrahabr.ru/post/317360/">reactivity magic</a> . </p><br><p>  The greatest difficulty is hidden in the property "the result of the remote procedure call".  Besides the fact that it also encapsulates asynchrony in itself, it has one more restriction - no more than one procedure can be called at a time, since there is only one sandbox, and running several benchmarks at the same time is a bad sign.  Therefore, the current executable command is written to the <code>command_current</code> property, and <code>command_result</code> first checks that another command is not currently being executed, and if it is executed, it will first wait for it to complete. </p><br><pre> <code class="hljs javascript"><span class="hljs-string"><span class="hljs-string">'command_current()'</span></span> : any[] @ $mol_mem() command_current( next? : any[] , force? : $mol_atom_force ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">'command_current()'</span></span>] ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next } @ $mol_mem_key() command_result&lt; Result &gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> command : any[] , next? : Result </span></span></span><span class="hljs-function">) : </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Result</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">sandbox</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">sandbox</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">sandbox</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">valueOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">if</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> next !== </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span></span><span class="hljs-function">) </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">next</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">current</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">command_current</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> command </span></span></span><span class="hljs-function">) </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">if</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> current !== command </span></span></span><span class="hljs-function">) </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">throw</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">new</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$mol_atom_wait</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">`Waiting for </span></span></span><span class="hljs-subst"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string"><span class="hljs-subst">${ </span></span></span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">JSON</span></span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-string"><span class="hljs-subst">.stringify( current ) }</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">...`</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span></span><span class="hljs-function">) </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">requestAnimationFrame</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> (</span></span></span><span class="hljs-function">)=&gt;</span></span> { sandbox.contentWindow.postMessage( command , <span class="hljs-string"><span class="hljs-string">'*'</span></span> ) <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.onmessage = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( event.data[ <span class="hljs-number"><span class="hljs-number">0</span></span> ] !== <span class="hljs-string"><span class="hljs-string">'done'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.onmessage = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.command_current( <span class="hljs-literal"><span class="hljs-literal">null</span></span> , $mol_atom_force ) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.command_result( command , event.data[ <span class="hljs-number"><span class="hljs-number">1</span></span> ] ) } } ) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> $mol_atom_wait( <span class="hljs-string"><span class="hljs-string">`Running </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${ command }</span></span></span><span class="hljs-string">...`</span></span> ) }</code> </pre> <br><p>  Connoisseurs of multi-threading can recognize here the synchronization primitive "mutex", implemented through the mechanism "compare and swap".  And this is not casual, because $ mol_atom by default tries to parallelize tasks, if possible.  Understanding this code can be difficult without understanding the reactivity magic, so I recommend reading the above article.  But the main thing is that all complexity is encapsulated in this property and further work will be simple and pleasant.  For example, we will get the meta-information from the benchmark: </p><br><pre> <code class="hljs cs">meta() { type meta = { title : { [ lang : <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ] : <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } descr : { [ lang : <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ] : <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } samples : { [ sample : <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ] : { title : { [ lang : <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ] : <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } } } steps : { [ step : <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ] : { title : { [ lang : <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ] : <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.command_result&lt; meta &gt;([ <span class="hljs-string"><span class="hljs-string">'meta'</span></span> ]) }</code> </pre> <br><p>  And now, we get a list of all implementations, sorted by their names: </p><br><pre> <code class="hljs kotlin">@ $mol_mem() samples_all( next? : string[] ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Object.keys( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.meta().samples ).sort( ( a , b )=&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> titleA = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.menu_option_title( a ).toLowerCase() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> titleB = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.menu_option_title( a ).toLowerCase() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> titleA &gt; titleB ? <span class="hljs-number"><span class="hljs-number">1</span></span> : titleA &lt; titleB ? -<span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span> } ) }</code> </pre> <br><p>  The names of the implementations are based on the current language: </p><br><pre> <code class="hljs kotlin">menu_option_title( sample : string ) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> title = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.meta().samples[ sample ].title <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> title[ $mol_locale.lang() ] || title[ <span class="hljs-string"><span class="hljs-string">'en'</span></span> ] }</code> </pre> <br><p>  The name and description of the benchmark, we get the same way: </p><br><pre> <code class="hljs kotlin">@ $mol_mem() title() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> title = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.meta().title <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> title[ $mol_locale.lang() ] || title[ <span class="hljs-string"><span class="hljs-string">'en'</span></span> ] || <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.title() } @ $mol_mem() description() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> descr = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.meta().descr <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> descr[ $mol_locale.lang() ] || descr[ <span class="hljs-string"><span class="hljs-string">'en'</span></span> ] || <span class="hljs-string"><span class="hljs-string">''</span></span> }</code> </pre> <br><p>  It's time to create a list of menu items: </p><br><pre> <code class="hljs kotlin">menu_options() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.samples_all().map( sample =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Menu_option( sample ) ) }</code> </pre> <br><p>  The state of selection of an implementation will depend on the list of selected implementations: </p><br><pre> <code class="hljs kotlin">@ $mol_mem_key() menu_option_checked( sample : string , next? : boolean ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( next === void <span class="hljs-number"><span class="hljs-number">0</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.samples().indexOf( sample ) !== -<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( next ) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.samples( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.samples().concat( sample ) ) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.samples( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.samples().filter( s =&gt; s !== sample ) ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next }</code> </pre> <br><p>  As you can see, the property implementation is both a getter and a setter at the same time.  The list of selected implementations will be stored in the link in the same way: </p><br><pre> <code class="hljs lua">@ $mol_mem() samples( <span class="hljs-built_in"><span class="hljs-built_in">next</span></span>? : <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>[] ) : <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>[] { const <span class="hljs-built_in"><span class="hljs-built_in">arg</span></span> = $mol_state_arg.value( this.state_key( <span class="hljs-string"><span class="hljs-string">'sample'</span></span> ) , <span class="hljs-built_in"><span class="hljs-built_in">next</span></span> &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">next</span></span>.join( <span class="hljs-string"><span class="hljs-string">'~'</span></span> ) ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">arg</span></span> ? <span class="hljs-built_in"><span class="hljs-built_in">arg</span></span>.split( <span class="hljs-string"><span class="hljs-string">'~'</span></span> ).<span class="hljs-built_in"><span class="hljs-built_in">sort</span></span>() : [] }</code> </pre> <br><p>  Before proceeding to the actual measurements, we will write down all the steps that we are going to go: </p><br><pre> <code class="hljs kotlin">@ $mol_mem() steps( next? : string[] ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Object.keys( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.meta().steps ) }</code> </pre> <br><p>  Let's go through all the steps for each implementation: </p><br><pre> <code class="hljs kotlin">@ $mol_mem_key() result_sample( sampleId : string ) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result : { [ key : string ] : any } = { sample : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.menu_option_title( sampleId ) , } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.steps().forEach( step =&gt; { result[ step ] = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.command_result&lt;string&gt;([ step , sampleId ]) } ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result }</code> </pre> <br><p>  Now let's go through all the selected implementations and form a general result, which will be passed to the output component of the comparative tables, as indicated in the description of the application structure: </p><br><pre> <code class="hljs kotlin">@ $mol_mem() result() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result : { [ sample : string ] : { [ step : string ] : any } } = {} <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.samples().forEach( sample =&gt; { result[ sample ] = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.result_sample( sample ) } ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result }</code> </pre> <br><p>  In the <code>$mol_bench</code> component, we also redefined the <code>col_head_label</code> property, where we tied the <code>result_col_title</code> property, which returns an empty array.  Let's redefine it so that it returns the localized column header: </p><br><pre> <code class="hljs kotlin">result_col_title( col_id : string ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( col_id === <span class="hljs-string"><span class="hljs-string">'sample'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.result_col_title_sample() ] <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> title = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.meta().steps[ col_id ].title <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ title[ $mol_locale.lang() ] || title[ <span class="hljs-string"><span class="hljs-string">'en'</span></span> ] ] }</code> </pre> <br><p>  In addition, we provided it with the <code>col_sort</code> property as the <code>result_col_sort</code> property.  To keep it in the link, we will redefine it as follows: </p><br><pre> <code class="hljs perl">@ $mol_mem() result_col_sort( <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>? : string ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $mol_state_arg.value( this.state_key( <span class="hljs-string"><span class="hljs-string">'sort'</span></span> ) , <span class="hljs-keyword"><span class="hljs-keyword">next</span></span> ) }</code> </pre> <br><p>  <a href="">With the behavior figured out</a> , now you can decorate the dish <a href="">styles</a> for automatically generated <a href="https://ru.bem.info/">BEM-</a> attributes and can be served to the table. </p><br><h1 id="priyatnogo-appetita">  Enjoy your meal </h1><br><p>  Documentation on writing benchmarks and links to already implemented ones can be found on the <a href="https://github.com/eigenmethod/mol/tree/master/app/bench">$ mol_app_bench</a> page. </p><br><p>  A few examples: </p><br><ul><li>  <a href="http://mol.js.org/app/bench/">Time to output a heap of variable height paragraphs with different frameworks</a> </li><li>  <a href="http://mol.js.org/app/bench/">The cost of adding various HTML elements to the DOM</a> </li><li>  <a href="http://mol.js.org/app/bench/">Line Rendering Time in Various Ways via SVG and Canvas</a> </li><li>  <a href="&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhFdFtOhu3K1M4jNjFnq-yAw6Pgxw#bench=">The speed of the ToDoMVC application in implementations on almost all JS frameworks</a> </li></ul><br><p>  In the plans: </p><br><ul><li>  Add filtering options for implementations (for quick search of interest). </li><li>  Support for small screens (now the application is not designed for small screens). </li><li>  The output of the results in the form of superimposed graphs (the compact module for constructing reactive graphs <a href="https://github.com/eigenmethod/mol/milestone/13">is about to be ready</a> ). </li></ul><br><p>  Do not slow down, offer your ideas what and how you can test, what is missing from the generalized interface described here, try your recipes and share them with the community. </p><br><p><img src="http://drugar.su/sites/default/files/m125186_20121205164000_685865427387.jpg" alt="I am constantly haunted by clever thoughts, but I am faster"></p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/322162/">https://habr.com/ru/post/322162/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../322150/index.html">Public Data Management: Receipt and Use</a></li>
<li><a href="../322152/index.html">The digest of interesting materials for the mobile # 191 developer (February 13-19)</a></li>
<li><a href="../322154/index.html">Finnish schools: myths in the international press, context features and new technologies</a></li>
<li><a href="../322156/index.html">I need to know what you think: transparency of thinking AI as a necessary condition</a></li>
<li><a href="../322158/index.html">Multitasking. How to cope with ghosts outsiders</a></li>
<li><a href="../322166/index.html">Yii 2.0: release of the debug 2.0.8 extension</a></li>
<li><a href="../322168/index.html">Union Type, TPT, DDD, ORM and RDBMS</a></li>
<li><a href="../322170/index.html">‚ÄúHello, (real) world!‚Äù In php in 2017</a></li>
<li><a href="../322172/index.html">As in Canada, looking for missing children</a></li>
<li><a href="../322176/index.html">Infrared optics instead of optical fiber in the data center: the original project of engineers from the United States</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
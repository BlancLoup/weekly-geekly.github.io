<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I developed the Russian tablet</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, friends! 



 In this article, there will be no Arduino, Raspberry, Olimex, transferring the insides of a tablet into your ‚Äúcustom‚Äù case mad...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I developed the Russian tablet</h1><div class="post__text post__text-html js-mediator-article">  Good day, friends! <br><br><img src="https://habrastorage.org/webt/o_/kz/7u/o_kz7u2rtel83vkvqwvae5zqqea.jpeg"><br><br>  In this article, there will be no Arduino, Raspberry, Olimex, transferring the insides of a tablet into your ‚Äúcustom‚Äù case made of cardboard and patch, etc.  Only harsh engineering, only hardcore ... <br><a name="habracut"></a><br>  I don‚Äôt know if I‚Äôve chosen the title too loud for the article, but it seems like everything is fair: the Russian development, the tablet form factor, although it looks like a smiling smiley brick. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For my readers, I decided to sketch out a plan of the article so that you can easily navigate it and skip unnecessary points, but if you are going to write a comment, please read everything ‚Äúso that it does not hurt painfully for years aimlessly ... (c)‚Äù. <br><br><ol><li>  Introduction  Idea. </li><li>  Answers on questions. </li><li>  What I wanted to get at the exit. </li><li>  Description of iron. </li><li>  Perspectives.  If it will be necessary. </li><li>  Findings.  Summarizing. </li></ol><br><h3>  1. Introduction.  Idea. </h3><br>  As I wrote earlier in my articles, I am very attracted to the topic of displaying images on a matrix, and everything connected with it.  Now you will not surprise anyone with scalers for matrixes, in the form of small boards for $ 10- $ 15, of which you can easily make / repair a monitor or TV, but with them I already played enough and I want something new. <br><br>  The idea to make something similar to a tablet was born a long time ago, and I constantly nurtured it, pondering how to realize it with less effort and expense with greater profit.  Of course, I don‚Äôt need the tablet itself, you can buy it for reasonable money if necessary or as a last resort to make a plywood case for Raspberry, but why do I need a Raspberry (and you can even buy a case ready to buy for it)?  The implementation on its hardware with full development was interesting, but it needs money, and above all, time, which is always not enough (or in your day more than 24 hours?). <br><br>  Two events served as an impetus for implementation, the first was that suddenly there appeared several unnecessary matrices from 7 to 10 inches, which oh how attracted me.  Some of them are RGB, but also among them was the LVDS matrix and the built-in backlight driver and USB capacitive touch.  The second is that there is a weak need for a compact reference for debugging software under IMX6, in which there would be almost everything and some more.  Of course, it was easier to throw out the matrices, and take a ready reference from the shelf, but it‚Äôs not so simple, we use a certain set of peripherals (codecs, physics, charge controllers, etc.) that need to be debugged for the new functionality, and also wanted to experience something new (and the matrices are very attractive).  Is it worth it to spend a month of their free evenings, you ask?  Of course it is! <br><br>  With these thoughts and a box of matrices, I began to develop.  I knew that I could allocate very little time and at the same time it was not clear whether it would reach the second iteration. <br><br><img src="https://habrastorage.org/webt/32/wx/n-/32wxn-ep2-ot_czs7pyta4kxvco.jpeg"><br>  <i>Fig.1.</i>  <i>Photo "tablet" from the PCB.</i> <br><br><h3>  2. Answers to questions </h3><br>  To avoid unnecessary questions, I will try to anticipate some of them and immediately answer them. <br><br>  2.1 Isn't it easier to buy a tablet? <br>  - Easier, but less interesting. <br>  2.2 How much does it cost and how much will it cost for a game? <br>  - It is expensive, but our company took all the costs for the implementation of my little whim.  No party is planned, done, so to speak, for yourself. <br>  2.3 Where is the case?  Why did not print it on the printer, not cut out of plywood, not made of clay (and so on). <br>  - Now I have put everything together, and, in principle, it is possible to come up with something about the corps, but so far there is neither time nor desire.  If it still reaches the second iteration of the board, when it will be possible to reduce the thickness, then in plans to make the case with a thin polished metal sheet from the bottom for heat removal. <br>  2.4 Why not take a smaller / larger / thinner display? <br>  - The display went for free, and the gift horse is known ... <br>  2.5 Why did you install such a codec / feeder / battery / physics, etc. <br>  - The chipset is limited to our warehouse and I wanted to buy as few components as possible, so I tried to use what I had. <br><br>  This list is almost endless and you can extend it in the comments, but I will end there. <br><br><h3>  3. What I wanted to get at the exit. </h3><br>  TK was only in the head, and it expanded as new sheets of the scheme were added to the altium.  Of course, I wanted to squeeze everything I could out of the processor.  At the first stage, and possibly at the last, it was decided to do everything on our module, since its board is 8 layers, and for the motherboard I will need no more than 4. <br><br>  Interfaces: <br><br>  3.1 LVDS - one channel for a 10-inch matrix + capacitive touch. <br>  3.2 Ethernet - 1000/100/10 (for it to be). <br>  3.3 Audio codec with multiple channels for input and output + built-in speakers and a microphone. <br>  3.4 HDMI - standard monitor connector. <br>  3.5 SATA - connect an external SSD drive. <br>  3.6 Camera - one, and preferably two + flash. <br>  3.7 E-Ink - a small display for displaying notifications, time, battery charge, networks, etc. <br>  3.8 GPS - any module for location tracking. <br>  3.9 CAN - differential, for connecting external devices. <br>  3.10 SD card - debugging and software download.  Data storage. <br>  3.11 WiFi / BT / 4G - on USB inside the case (below I will explain why this is so). <br>  3.12 USB - at least 5pcs + OTG + console. <br>  3.13 Accelerometer - to flip the screen. <br>  3.14 RTC - a separate chip for storing time when the device is completely de-energized. <br>  3.15 NFC reader to play with. <br>  3.16 Control buttons - on / off / volume / reset. <br>  3.17 Battery - 3.7V, 4-6A. <br>  3.18 Power supply 5-18V. <br>  3.19 Linux OS. <br><br>  That's all that I wanted.  Below I will give explanations on some contradictory points why this is so. <br><br><h3>  4. Description of iron </h3><br>  It is fair to say why all the same on the module, and not immediately on the 8-layer board.  It is more correct to transfer everything to one board only after debugging all the peripherals, if it is at all necessary.  One iteration of the board (4-6pcs) on eight layers (60mmX40mm) costs about 50TR + components - this is pretty decent, so it's more correct on the layout.  Prots on the 4-core module, each of them at 1 GHz. <br><br><img src="https://habrastorage.org/webt/1f/ki/o4/1fkio4436nqmtdqmepafyoso4ok.jpeg"><br>  <i>Fig.2.</i>  <i>Printing body parts</i> <br><br>  The first thing I thought about was a lot of wireless interfaces.  There should be several of them, and they should be on board.  With GPS, everything was decided by itself, I have repeatedly used the SIM33 module with a built-in antenna, it works fine, though not cheap, it had a UART at the output and I already drew a footprint for it). <br><br>  Wi-Fi / BT could also be implemented as a module on the board, since there are a lot of them, but for now let us postpone this question.  4G modems come in various form factors and modules on the connector and on the solder board and USB.  Software is lifted by Maxim (our programmer), who is still an enthusiast and he offered to install several USB on the board in order to stick Wi-Fi / BT sticks (which we have repeatedly used), as well as try to raise the USB 4G modem, for example Yota or something like (what happens).  In this case, we also have calls.  So it was decided to do. <br><br>  Inside the board are 3 USB, a) Wi-Fi / BT, b) 4G modem, c) a module for a wireless keyboard / mouse.  IMX6 has only two USB onboard, with one of them being OTG and may be needed for debugging, so it is displayed on the back panel in the form of a miniUSB connector.  The second USB goes to the TUSB2077 hub from TI, which has 7 ports at the output, for which Maxim has already raised the driver before, so I used it.  The back panel comes out 3 USB for connecting external devices.  Another microUSB on the back panel for outputting a console UART chip for debugging (via CP2102 on the main board). <br><br>  E-Ink display chose tricolor (gray / black / red), one of the most common for Arduino.  It is not purchased yet, as it is not yet up to it.  It seemed to me a rather interesting decision not to turn on the screen, but to display some information on a small display and update it occasionally.  Also really want to play with E-Ink. <br><br><img src="https://habrastorage.org/webt/ry/pj/p-/rypjp-doj4wevxa0-uetbg25w4g.jpeg"><br>  <i>Fig.3.</i>  <i>Photo display E-Ink.</i> <br><br>  Our IMX6 module has a connector (MIPI_CSI aside, there come three supply voltages, I2C, reset, PWM, etc.) for connecting the OV5640-M4320 camera, even two.  So one camera has earned (directly to the module connector), but with two questions.  The cable of such a camera is usually from 3cm to 12cm.  On the board, I spread the MIPI_CSI in the right places of the board, but have not yet verified.  Something tells me that this interface will not work for 15-20cm, or it will lag. <br><br><img src="https://habrastorage.org/webt/g4/ku/vz/g4kuvzkpnexocyyn8dr3qhpoq9q.jpeg"><br>  <i>Fig.4.</i>  <i>Photo camera OV5640-M4320.</i> <br><br>  These cameras are 5 megapixel with built-in autofocus. <br><br>  On the back of the device, it is planned to make a flash for the camera, for this I made a portable scarf (just on the board you can see a hole from this scarf, I spread it directly to the main one, so as not to order separately) on the cable with the LED (MP-3030-1100- 56-95) and put the ADP1653 flash driver on the main board.  I never thought that the flash should be quite clearly synchronized with the frame (although this is logical), this driver can do this on I2C, which most likely will not work on an external interrupt.  We'll see when the time comes, how it happened. <br><br>  The IMX6 has a built-in RTC, which proved to be not very good in terms of power consumption, or I didn‚Äôt see anything, so I decided to install an external PCF8523 chip, which has quite a working driver for Linux.  The time synchronization function itself is not particularly interesting to me, since it can be done over networks, but to wake up by an event is necessary.  I put this development miracle on the bedside table and wait for the alarm clock to work, just like the Nokia 3310 has risen from the off state. <br><br>  When the external voltage is applied (in the off state of the device), the following are powered: the charge controller BQ25895, RTC and the supervisor STM6601, which controls the secondary power supply at the touch of a button or soft (if we want to not shut down the power but finish the OS correctly, then de-energize) ).  As a result, the power turned out to be a rather interesting design, I have not had time to take measurements of consumption in different modes, but with hardware shutdown, all the peripherals should turn out pretty well.  As a result, in the ‚Äútablet‚Äù there is no ‚Äúduty room‚Äù as such, STM6601 and PCF8523 are powered directly from a Li-Ion battery (3.7V) + to the RTC battery 2016 or 2032 (universal holder).  The 2.3A battery is now connected (it is about to arrive at 6A), in the desktop display mode the charge holds for about 30 minutes - this is of course very small, but let's see what happens with a full battery. <br><br>  Accelerometer LIS331 is only needed to track the position to flip the display, so put what is already yuzal.  A good microcircuit with I2C / SPI interfaces and interraptes. <br><br>  A full-fledged SATA connector was put on the type of "I want, and why not)."  I understand that eMMC / NAND is used in tablets, but since there is an interface, why not use it?  Since in this variant there is enough space for SSD 2.5 ‚Äù- let it be worth it. <br><br>  Maxim insisted on installing NFC.  I still do not know what it will do with this interface, but what can you not do for the sake of the programmer‚Äôs vagaries?  I really wouldn‚Äôt really like him to try to pay at the grocery store, putting this device to a wireless reader. <br><br>  CAN is sometimes needed in our development, so I put the TJA1040T physics, we already have a driver for it, we can work with it, we even connected it to our cars and watched the tables.  Fun thing. <br><br>  The codec is again ADAU1761, to feel all the delights of working with sound.  First of all, it was he who was thinking (and not SGTL5000, which is also nothing) for debugging firmware for the built-in DSP (SigmaStudio).  Therefore, two connectors for speakers (via an amplifier) ‚Äã‚Äãgo to the back wall, to the side connector for an internal microphone, as well as several (remaining) inputs / outputs for 3.5mm jacks on the front panel. <br><br>  The HDMI output seemed to me very convenient, and on a standard connector.  Before that, I put microHDMI in development, but it seems to me that this makes sense only when the dimensions are limited. <br><br>  So that all this somehow lived and did not consume 100,500 amps at the same time, I put the TCA6424 chip on the board - this is a GPIO expander, which in this case serves as a switch for the periphery.  SATA, display (its power and backlight), sound (codec and amplifier), accelerometer, GPS and everything else is connected to the power supply via transistor switches TPS27081 is a dual transistor switch that can break power to 8V and up to 3A.  So, in addition to any software sleep modes, you can hardware disable interfaces.  The extender is controlled by I2C, so you can write an on-screen program that can turn everything off. <br><br>  Now why all the same Linux.  According to Maxim, it's much easier to run everything under Android, but as practice has shown, we have more projects under Linux.  Yes, the fuss will probably be more, but it seems to me that with Xubuntu (it is now on the device), the ‚Äútablet‚Äù acquires some originality and is more suitable for our tasks. <br><br><img src="https://habrastorage.org/webt/fj/en/_3/fjen_3bekybegebm6fvtphjdwgg.jpeg"><br>  <i>Fig.5.</i>  <i>Printed circuit board.</i> <br><br><img src="https://habrastorage.org/webt/wp/nz/dx/wpnzdx7tiaouypxnvly3njiddjc.jpeg"><br>  <i>Fig.6.</i>  <i>Board with installed components.</i> <br><br><img src="https://habrastorage.org/webt/f_/jr/xb/f_jrxbq1avqf_epicubptt4mvp4.jpeg"><br>  <i>Fig.7.</i>  <i>First start.</i> <br><br><h3>  5. Perspectives.  If it will be necessary. </h3><br>  First of all, of course, I want to reduce the size of the thickness.  This can be achieved in only one way - transferring the processor to the board and changing its geometry.  The refusal of SATA will be justified, it will be more correct to put the eMMC on 64 / 128Gb (at the moment it costs 8Gb).  The battery should not be on the board, but next to it, well, in general, we all know the location of the elements inside the tablets, everything has already been invented before us.  I already wrote about the case above, I would like a plate for cooling, so far I have not really thought about how to implement the remaining elements. <br><br><img src="https://habrastorage.org/webt/wy/yu/o_/wyyuo_gfe8yhvxrqxsoy7lsyixw.jpeg"><br>  <i>Fig.8.</i>  <i>In the case.</i>  <i>Audio inputs / outputs.</i> <br><br><img src="https://habrastorage.org/webt/jq/0m/v2/jq0mv2wx_q-mamc0vbntqkedcvm.jpeg"><br>  <i>Fig.9.</i>  <i>Assembled device.</i> <br><br><img src="https://habrastorage.org/webt/hi/gj/pa/higjpa2quehrdk8be9c19o9tkfg.jpeg"><br>  <i>Fig.10.</i>  <i>Rear panel.</i> <br><br><h3>  6. Conclusions.  Summarizing. </h3><br>  Since the project is being developed (now software) in its free time, not everything has been managed to be raised.  Maxim saws something and the ‚Äútablet‚Äù gradually comes to life, but the final is not yet visible. <br><br>  In my opinion, the device turned out quite viable, for the tasks described above.  I installed the VLC player and now you can watch movies on a small screen)).  If, in essence, my idea was realized almost completely (first iteration), not counting the case.  Having sealed the module onto the board, you can get a total thickness of no more than 23mm - this is of course harsh for current foreign electronics, but for the prototype it is quite acceptable. <br><br>  PS: a link to the source code github.com/boundarydevices/linux-imx6/commits/boundary-imx_4.9.x_1.0.0_ga <br><br>  All success in your endeavors! </div><p>Source: <a href="https://habr.com/ru/post/423279/">https://habr.com/ru/post/423279/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../423267/index.html">Clean in the boom workshop. Part 1</a></li>
<li><a href="../423269/index.html">Course on Machine Learning from Mail.Ru Mail</a></li>
<li><a href="../423271/index.html">‚ÄúWe all strive for complexity and then fight with it‚Äù: interview with Venkat Subramaniam</a></li>
<li><a href="../423273/index.html">Why does the Khrunichev State Research and Production Space Committee stubbornly resist the revision of Angara?</a></li>
<li><a href="../423275/index.html">Friday Skillbox webinars: everything for novice developers</a></li>
<li><a href="../423281/index.html">Feedback in the team, 360 and February 14</a></li>
<li><a href="../423283/index.html">Simulation of the Sagnac effect using geometric optics</a></li>
<li><a href="../423285/index.html">Social engineering: the elusive enemy in the cybersecurity world</a></li>
<li><a href="../423287/index.html">Google completes successful inbox experiment</a></li>
<li><a href="../423291/index.html">The Russians set a record: 110 pirated films per person</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development in Java and OpenCL: The Road to the Clouds</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article discusses the use of the Java platform for development with OpenCL, the advantages and disadvantages of this approach. The combination of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development in Java and OpenCL: The Road to the Clouds</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/ddbf41a2/38415754/d09ded8d/7af4d4d3.jpg"><br><br>  This article discusses the use of the Java platform for development with OpenCL, the advantages and disadvantages of this approach.  The combination of these technologies in software development in the future will allow to use the full power of cloud computing and OpenCL <br><a name="habracut"></a><br>  Recently, the development of software for mass-produced computing devices with a high degree of parallelism is gaining popularity.  These are modern multi-core processors with SIMD commands and video accelerators with support for GPGPU (General-purpose computations on GPU), devices combining a central and graphics co-processor on a single AMD Fusion crystal, as well as specialized coprocessors.  Almost every type of device has its own command system, architectural features, and application development previously required the developer to know several programming languages ‚Äã‚Äãand APIs (application programming interfaces).  All this made programming much more complicated, and also made it impossible or economically inexpedient to change the platform (vendor lock-in).  The Alliance of hardware and software manufacturers has developed and standardized the OpenCL language, which solves these problems.  This is an open standard and there are several implementations from different manufacturers of hardware from AMD, Intel, Nvidia, IBM, etc. under Windows, Linux and MacOS operating systems. <br><br>  Under Windows for VisualStudio, there are NVIDIA plug-ins - Parallel Nsight and gDEBugger from AMD.  And if with OpenCL compiler and runtime runtime for the operating systems listed earlier there are no problems, then AMD / Nvidia is much more complicated with the Linux development environment. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When host code is part of OpenCL code that prepares data and coordinates the work of OpenCL cores, is written in Java, debugging problems occur in Linux / Windows OS.  If you recall the success of the Java platform in the cross-platform server software development market, it is unclear why hardware vendors still do not develop OpenCL development tools - debugging and profiling built into Eclipse IDE, Netbeans IDE, IntelliJ Idea.  In the meantime, these development environments do not include ready-made tools that simplify working with the technology in question, we will try to solve the development problems with the means available today.  This will allow us to get a competitive industrial solution optimized for work on modern computing devices. <br><br><h1>  Advantages and disadvantages of sharing Java and OpenCL </h1><br>  So why use the Java platform to develop host code for OpenCL?  I will give several reasons for this choice: <br><ul><li>  Cross-platform - Java Virtual Machine (JVM) exists for a variety of platforms - Windows, Linux, MacOS, Unix.  "Write once, run anywhere." There are also implementations from various JVM vendors, open source implementations; </li><li>  A huge number of developers / architects who know this platform.  Simplicity and convenience of team development, testing, ease of debugging and profiling, software release and delivery of system modules in production; </li><li>  A large number of open source libraries available for use in development.  An incalculable number of sources and consumers of data available in java applications (http, soap, rest, smtp, scp, jms, CORBA, databases - relational / NoSQL, etc.), for example, from <a href="http://camel.apache.org/components.html">Apache Camel</a> components; </li><li>  Platform for cloud applications: the availability of frameworks for the development of distributed and flexible applications, processing of huge amounts of data, for example using <a href="http://hadoop.apache.org/">Apache Hadoop;</a> </li><li>  Recognized corporate (enterprise) standard in banks, financial institutions, telecommunications sphere: a large staff of system administrators who are able to support the work of the JVM; </li><li>  Many programming languages ‚Äã‚Äãthat can be executed in JVM: jruby, PHP (Caucho quercus), jython, javascript (Mozilla Rhino), Scala, etc.  The existence of a large number of languages ‚Äã‚Äãallows both optimizing existing applications and developing new ones more productively.  As a result, in-process calls from these languages ‚Äã‚Äãto java classes using OpenCL.  Sometimes it is better to use OpenCL API binding specifically for the language used.  Sometimes the frameworks used in DSL are written in java by some developers and are used by other developers in the programming languages ‚Äã‚Äãinside the JVM for rapid application development; </li><li>  JavaCL is a compact and object-oriented API for OpenCL host code. </li></ul><br><br>  When not to use Java to write OpenCL host code: <br><ul><li>  The undetectedness of the garbage collector.  Your application may require low latency when processing data and issuing a response (for example, a trading system or control program for medical equipment); </li><li>  High overhead for copying data between JVM and native code, incl.  OpenCL implementations.  This also includes the lack of code for jvm that can read and write the data you need; </li><li>  The algorithm cannot be effectively implemented within the framework of the OpenCL architecture.  Not all algorithms are well parallelized ( <a href="http://ru.wikipedia.org/wiki/%25D0%2597%25D0%25B0%25D0%25BA%25D0%25BE%25D0%25BD_%25D0%2590%25D0%25BC%25D0%25B4%25D0%25B0%25D0%25BB%25D0%25B0">Amdahl-Ware law</a> ), the data transfer time on the bus can be many times longer than the computing time on the device, etc.  This problem is related to the algorithm and the approach in general, and not to java in particular.  No host code for OpenCL API calls can be useful in this case. </li></ul><br>  So, we decided that our task is suitable for OpenCL and cannot be implemented as effectively using only the Java language.  At the same time, we want to take advantage of the JVM.  Let's move from idea to implementation. <br><br><h1>  Technology </h1><br>  I recommend for the development of <a href="http://developer.amd.com/sdks/AMDAPPSDK">OpenCL in the implementation of AMD</a> , if in the future it is planned to switch to using the server processor APU Opteron instead of a desktop solution based on AMD + Radeon HD 5000/6000 CPU or AMD Fusion CPU.  <a href="http://code.google.com/p/javacl/">JavaCL</a> as an API for working with OpenCL.  Using bridJ to call the native code of the OpenCL API dynamic library, we get a performance boost over JNA. <br><br>  Debug Toolkit: gdb with text user interface or ddd as gdb frontend <br><br>  For code profiling, I recommend using the AMD APP Profiler from the AMD Accelerated Parallel Processing (APP) SDK, Ubuntu 11.04 OS with the AMD proprietary FGLRX graphics driver installed for development.  Development can be carried out in any Java IDE supporting maven projects.  But support for syntax highlighting and compilation of OpenCL functions while writing code currently only supports the <a href="http://plugins.netbeans.org/plugin/39980/netbeans-opencl-pack">plugin for netbeans</a> .  The work of this plug-in was extremely unstable. <br><br>  Creating an infrastructure for development and the development process is no different from working with other java technologies. <br><br>  The debugging tools are more complicated, but there is a solution to this problem.  AMD's OpenCL runtime allows you to debug kernels when running on a CPU: set breakpoints and display the values ‚Äã‚Äãof variables, including float4, int4 vector types, etc.  In this case, the GPU functions are emulated on the central processor, for example, for working with textures.  For those interested in debugging details, there is an article <a href="http://suhorukov.blogspot.com/2011/12/opencl-kernel-debugging-for-java-host.html">on debugging JavaCL and OpenCL under linux</a> .  Also, the project author has <a href="http://code.google.com/p/javacl/wiki/DebuggingKernels">created a wiki page</a> about debugging kernel code from Java.  Details of supported <a href="http://sourceware.org/gdb/onlinedocs/gdb/OpenCL-C.html">gdb</a> extensions <a href="http://sourceware.org/gdb/onlinedocs/gdb/OpenCL-C.html">for OpenCL</a> <br><br>  You can use the <a href="http://developer.amd.com/tools/amdappprofiler">AMD APP Profiler</a> to profile an application.  When launched in Linux, it allows you to collect statistics on the operation of OpenCL functions in the application and save it to a CSV file for later analysis of data in a table processor LibreOffice Calc.  To understand how optimally your code works, you need to interpret the values ‚Äã‚Äãof the <a href="http://developer.amd.com/tools/AMDAPPProfiler/html/clsessionpage.html">parameters measured by the profiler</a> . <br><br><h1>  Conclusion </h1><br>  The article examined the advantages and disadvantages of software development using the Java platform and OpenCL technology.  Due to the prospects for the development of computing devices along the path of increasing parallelism, this approach in software development claims to be one of the main in the development of high-performance enterprise and cloud presentations on the JVM. <br></div><p>Source: <a href="https://habr.com/ru/post/134500/">https://habr.com/ru/post/134500/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../134491/index.html">Results of the year. SSD + HDD, Ultrabooks and Tablets</a></li>
<li><a href="../134495/index.html">Creating graphics primitives in Assembler</a></li>
<li><a href="../134496/index.html">Higgs boson found?</a></li>
<li><a href="../134497/index.html">WebSocket Protocol published as RFC</a></li>
<li><a href="../134499/index.html">Handling critical errors in PHP</a></li>
<li><a href="../134501/index.html">AzaThread - multithreading for PHP with blackjack</a></li>
<li><a href="../134502/index.html">Developing a Qt application with access to MySQL for Android</a></li>
<li><a href="../134504/index.html">Russian Post double two</a></li>
<li><a href="../134505/index.html">From html to pdf - easy! Converter Overview</a></li>
<li><a href="../134506/index.html">Live Broadcast Secure Software Development Conference</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cache theory</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Caching is an integral part of all complex systems. Caching allows you to significantly increase the speed of the application by saving...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cache theory</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  Caching is an integral part of all complex systems.  Caching allows you to significantly increase the speed of the application by saving hard-to-calculate data for later use.  However, I will not go into the definitions, most developers know perfectly well what it is. <br><br>  In this article I will try to "sort through" the problem of caching, focused primarily on sites and content management systems.  <b>Immediately I warn you, these are my personal considerations, which do not pretend to be the ultimate truth.</b>  <b>All terminology is also mine; you can use it if you see fit at your discretion.</b>  <b>Constructive criticism is welcome.</b> <br><a name="habracut"></a><br><h4>  Core caching issues </h4><br><br>  When caching data, as a rule, there are no problems in their preservation and reuse.  The main problem is to determine when the cache loses its relevance.  That is, to determine whether it is possible to use data from the cache, or it is necessary to calculate this data again, since something could have changed.  I will call this the problem of cache relevance (my terminology). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The second caching problem is the performance problem.  And if our algorithm does not run without caching faster than caching?  Despite the absurdity at first glance, it is more than the case.  The fact is that caching algorithms also consume resources, and it can easily happen that the amount of resources consumed by the cache exceeds the amount of resources needed to calculate the data itself.  This often happens in 2 cases.  The first case is when a site of 10 pages is put on a powerful framework.  Everything is simple - the source data is so small that the speed of the calculation is very high, and caching only slows down the work.  The second case is the reverse - when the site is so large that the size of the cache grows to a volume which leads to a significant slowdown in their search in the cache. <br><br>  To achieve a solution to both problems is impossible.  It is possible only to choose a method that provides maximum performance.  And even better - that this method was chosen automatically. <br><br>  The problem of speed is not so urgent, and is solved either by disabling the use of caching in the configuration, or by periodically physically deleting the cached data and switching to faster hardware. <br><br>  But as for the problem of relevance, everything is much more complicated ... <br><br><h4>  Cache theory </h4><br>  The author distinguishes 4 main types of information caching: <br><br>  <b>1. Independent or static</b> - takes place when it is not necessary to check whether the object has changed.  The algorithm is simple - if there is data in the cache, then give the data, otherwise calculate them.  Effectively within the framework of the work of one process, when frequent use of the results of complex intermediate calculations is required.  After the process is complete, the static cache dies and for the repeated process all data is calculated again.  In general, in any programming language, all temporary variables are nothing more than a static cache.  If caching of the function results is required, you can use this algorithm using static variables using the example of PHP: <br><br> <code>function getData($id) <br> { <br> static $data = array(); <br> <br> if (isset($data[$id])) return $data[$id]; <br> <br> //   <br> $data[$id] = $newData; <br> <br> return $data[$id]; <br> }</code> <br> <br>  <b>2. Explicitly dependent</b> - occurs when the decision to update the cache is made on some easily calculated basis.  This primarily includes caching data taken from a specific file, as well as caching over time.  In these cases, it is easy to determine whether the file has changed or whether the cache has expired (and the cache <i>clearly</i> depends on these factors).  The algorithms here are also quite simple - they come down to condition checks, but, unlike the static cache, it can be independently used by different processes. <br><br>  <b>3. Implicit-dependent</b> - occurs when a change in a caching object depends on many factors.  For example, the structure of the object includes many other objects that can also change.  That is, an object <i>implicitly</i> (not directly) depends on others, which may also depend on others, etc.  The combination of these factors is the <i>implicit dependencies of the</i> object, and in order to decide whether the object has changed, it is necessary to ‚Äúinterrogate‚Äù them all, which is not always possible or advisable.  For example, a function that displays information taken from a database.  We can cache the result of a function, but we need to know when the data changes in order to update it.  And this is equivalent to referring to the table, which in terms of resource intensity is equivalent to performing the function.  And if a lot of tables?  The cache meaning is lost. <br><br>  This is revealed through the so-called <i>"dependency table"</i> .  There are 2 columns in this table: objects and the time they were changed.  When you change objects, you need to update their times in the table.  The speed of access to the table itself is very high (as a rule, it is in a static or explicitly-dependent cache), and the times for changing all the objects we need can be obtained very quickly.  And if at least one time to change the necessary objects exceeds the caching time, then the cache must be reset.  Thus, implicit dependencies become explicit - the object depends on a certain set of times in the dependency table. <br><br>  I will give an example.  There is a certain CMS module that deals with the display of comments.  We have 2 tables in the user database and comments that are related by a one-to-many relationship.  When changing data of a certain user, we set the current time in the row ‚Äúusers‚Äù in the dependency table.  If comments have changed, we do the same with the ‚Äúcomments‚Äù line.  The module knows that it depends on ‚Äúusers‚Äù and ‚Äúcomments‚Äù and if at least one of them exceeds the cache change time, the cache is reset, otherwise it is used.  I‚Äôll draw your attention to the fact that ‚Äúusers‚Äù and ‚Äúcomments‚Äù are not necessarily the time of a table change, but rather the time of a change of a certain entity, which may consist of multiple tables and other parameters. <br><br>  <b>4. Conditionally dependent</b> - occurs when an implicitly-dependent cache can be cast to explicitly dependent or static if some condition is met.  For example, it can be argued that the time of the last change of the dependency table is the time of the last change of data on the site.  If the user does not have unique data on the page (read - he is not logged in), then the whole page will depend only on the dependency table.  So, the whole page can be put in the cache, on this condition.  This includes the cache, which at the right time is simply physically deleted. <br><br><h4>  Conclusion </h4><br>  As you can see, data caching is a very complex process, requiring a large amount of resources for its development.  Do not forget that in our time the cost of iron can be cheaper than the cost of developing complex algorithms.  Therefore, if there are problems with the speed of the site, it may be worth buying just a more powerful server - in some cases it will be cheaper. <br><br>  Described by me - only the basis.  Here you can add a lot of things, just do not want to make an article too big.  If the article seems interesting, I will try to write a sequel. </div><p>Source: <a href="https://habr.com/ru/post/38771/">https://habr.com/ru/post/38771/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../38754/index.html">Concatenation of strings is two ways.</a></li>
<li><a href="../38759/index.html">Unread comments and their updates</a></li>
<li><a href="../38760/index.html">Yota - the first mobile WiMAX network in Russia</a></li>
<li><a href="../38762/index.html">Chrome is used by more than 1% of Internet users</a></li>
<li><a href="../38767/index.html">Chrome thinks Google is an evil site</a></li>
<li><a href="../38774/index.html">New netbooks blog has opened</a></li>
<li><a href="../38776/index.html">Learning the language by mini immersion</a></li>
<li><a href="../38780/index.html">What I did not like in Google Chrome</a></li>
<li><a href="../38793/index.html">Delphi 2009: Shark from eyewitnesses</a></li>
<li><a href="../38796/index.html">Release 1.6.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
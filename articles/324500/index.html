<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>RCC 2017. Analysis of the tasks of the hottest warm-up round</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Original Mighty Morphin Power Rangers by Yurtigo 


 March 19, the warm-up round of our championship on sports programming Russian Code Cup 2017 was h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>RCC 2017. Analysis of the tasks of the hottest warm-up round</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/f63/2fa/167/f632fa16783940aaaeddc2e7d40d4731.png" alt="image"><br>  <a href="http://yurtigo.deviantart.com/art/Original-Mighty-Morphin-Power-Rangers-456152374">Original Mighty Morphin Power Rangers</a> by Yurtigo </p><br><p>  March 19, the warm-up round of our championship on sports programming Russian Code Cup 2017 was held. This round does not affect the final results, but allows you to get acquainted with the championship system and its objectives.  Today we want to talk about the outcome of the round and parse its tasks: </p><br><p>  A. <a href="https://habr.com/ru/company/mailru/blog/324500/">Spaceship</a> <br>  B. <a href="https://habr.com/ru/company/mailru/blog/324500/">Rangers on the bus</a> <br>  C. <a href="https://habr.com/ru/company/mailru/blog/324500/">Magic weapons</a> <br>  D. <a href="https://habr.com/ru/company/mailru/blog/324500/">Knights and liars</a> <br>  E. <a href="https://habr.com/ru/company/mailru/blog/324500/">Parallelepiped</a> </p><br><p>  2789 people registered for the round, which is two times more than last year.  Only one of them was able to solve all five proposed problems!  Congratulations to Mikhail Ipatov.  Four more people coped with four of them.  GNU C ++ 14 turned out to be the most popular language. 565 task solutions were sent to it.  The second and third place was taken by Python 3.5 (525 solutions) and GNU C ++ 11 (409 solutions). </p><a name="habracut"></a><br><h2 id="a-kosmicheskiy-korabl">  A. Spaceship </h2><br><p>  Time limit per test - 2 seconds <br>  Memory limit per test - 256 megabytes </p><br><p>  Space Ranger was on an alien spacecraft surrounded by enemies.  To free himself, he needs to destroy all enemies in a certain order. </p><br><p>  Around the ranger <em>n</em> enemies, the <em>i-</em> th of them has the power <em>f <sub>i</sub></em> .  To get out, a ranger must destroy all enemies, and in such a manner that the strength of the last destroyed enemy is equal to the sum of the forces of all other enemies. </p><br><p>  The ranger has little time left, so he does not have time to figure out how to do it.  He needs your help.  Restore the order in which you need to destroy enemies to get out. </p><br><p>  <strong>Input data</strong> </p><br><p>  The first line of input contains a positive integer <em>n</em> - the number of enemies <em>(2 ‚â§ n ‚â§ 105)</em> . </p><br><p>  The second line contains <em>n</em> integers f <sub>i</sub> that specify the strength of each enemy <em>(‚Äì109 ‚â§ f <sub>i</sub> ‚â§ 109)</em> . </p><br><p>  <strong>Output</strong> </p><br><p>  Print the numbers <em>f <sub>i</sub></em> in the order in which you want to destroy the enemies corresponding to them.  If there are several suitable variants, output any.  It is guaranteed that at least one suitable order of destruction exists. </p><br><div class="spoiler">  <b class="spoiler_title">Task analysis</b> <div class="spoiler_text"><p>  Note that if the boss power is <em>x</em> , then the sum of the forces of all enemies is <em>2x</em> .  Therefore, in order to find the strength of the boss, it is necessary to calculate the total strength of all enemies and divide it by 2. After that, you need to find some enemy with such power and change this value in the array <em>f</em> with the value of the last enemy. </p></div></div><br><h2 id="b-reyndzhery-v-avtobuse">  B. Rangers on the bus </h2><br><p>  Time limit per test - 2 seconds <br>  Memory limit per test - 256 megabytes </p><br><p>  Space Rangers go to a secret meeting on the bus. </p><br><p>  The main villain is closely watching the bus, in which, in his opinion, one of the Rangers is riding.  In the cabin there are <em>n</em> rows of seats, each of which has two seats - on the left and right of the aisle.  Rows are numbered from 1 to <em>n</em> , starting at the front of the bus.  At the final stop, <em>k</em> people took turns in the bus, and the villain knows who sat down at what place and in what order.  Initially, all the seats were free. </p><br><p>  The villain knows how each of the rangers chooses his place when he gets on the bus: </p><br><ul><li>  The red ranger loves to sit in front.  Therefore, among the empty seats, he always chooses a place in the row with the lowest number.  If there are two free places in this row, he sits to the left of the passage. </li><li>  The blue ranger also likes to sit in front.  But, unlike red, when in the row with the smallest number there are two free places, blue sits on the right. </li><li>  The black ranger loves to sit back.  Among the empty seats, he always chooses a place in the row with the highest number, and if there are two free places, he sits to the left of the aisle. </li><li>  The yellow ranger also likes to sit back.  But, unlike black, when in the row with the largest number there are two free places, yellow sits on the right. </li><li>  The pink ranger has no preferences and can sit on any available space. </li></ul><br><p>  The main villain wants to know which of the <em>k</em> passengers could be each of the Rangers.  From the known places where the passengers sat down, output this information.  Please note that it is not necessary that all the Rangers rode this bus. </p><br><p>  <strong>Input data</strong> </p><br><p>  The first line contains the numbers <em>n</em> and <em>k</em> - the number of rows in the bus and the number of passengers <em>(1 ‚â§ n ‚â§ 109, 1 ‚â§ k ‚â§ min (2 ‚Ä¢ 105, 2n))</em> . </p><br><p>  The following <em>k</em> lines describe the passengers in the order in which they entered the bus. </p><br><p>  The <em>i-</em> th of these lines contains the numbers <em>x <sub>i</sub></em> and <em>y <sub>i</sub></em> - the place where the <em>i-</em> th passenger sat <em>(1 ‚â§ x <sub>i</sub> ‚â§ n, 1 ‚â§ y <sub>i</sub> ‚â§ 2)</em> , <em>x <sub>i</sub></em> is the row number, <em>y <sub>i</sub> = 1</em> , if this is the place to the left of the passage, and <em>y <sub>i</sub> = 2</em> , if to the right. </p><br><p>  All the seats on which passengers sat down are different. </p><br><p>  <strong>Output</strong> </p><br><p>  In the first line print the number <em>s <sub>1</sub></em> - the number of passengers that could be a red ranger, and then, after the space, <em>s <sub>1</sub></em> numbers - the numbers of these passengers in ascending order (passengers are numbered from 1 to <em>k</em> in the order in which they are given in input file). </p><br><p>  In the next four lines, print in the same format information about the other rangers: blue, black, yellow and pink. </p><br><div class="spoiler">  <b class="spoiler_title">Task analysis</b> <div class="spoiler_text"><p>  We will handle passengers in turn and for each to determine who he could be.  Immediately, we note that the pink ranger can sit anywhere, so any passenger can be him. </p><br><p>  For each place you need to remember whether it is free.  Let's get <em>unordered_set</em> , in which we will keep the occupied places.  Check if the next passenger could be a red ranger.  To do this, find a place that would have sat red.  Cycle through series from 1 to <em>n</em> .  If there is a row in which there is a free space, we select the left one, if it is free, or the right one, if not - this will be the place where the red would sit.  Since he chooses a seat unequivocally, we can determine if this passenger could be red - you need to check that he took exactly that place.  In the same way, we find out where the blue, yellow and black would have sat down: the difference is in the order of enumeration of rows (from 1 to <em>n</em> or vice versa) and in the order of choosing a place in the row (first left or right).  After processing the passenger, we mark his place as occupied. </p><br><p>  The solution works in <em>O (nk)</em> and uses <em>O (k)</em> memory. </p><br><p>  To improve the solution, we note that each of the cycles stops when it finds a row in which there is free space.  This means that you need to quickly find the first and last unoccupied series.  We will support these values ‚Äã‚Äã- <em>first</em> and <em>last</em> .  Initially <em>first = 1</em> , <em>last = n</em> .  After each iteration of the loop, we update these values.  We will increase <em>first</em> by 1 while the <em>first</em> row is busy, then decrease <em>last</em> by 1, while the <em>last</em> row is busy.  There are no more than <em>k / 2</em> rows occupied, so <em>first</em> and <em>last</em> will do <em>O (k)</em> steps.  Thus, the improved solution works in <em>O (k)</em> and passes all tests. </p></div></div><br><h2 id="c-volshebnoe-oruzhie">  C. Magic weapons </h2><br><p>  Time limit per test - 2 seconds <br>  Memory limit per test - 256 megabytes </p><br><p>  To build a magic weapon, you need to connect three fragments: green, red and blue. </p><br><p>  The green, red and blue rangers wondered how many different ways they had to assemble a magical weapon.  A known set of fragments of each ranger.  The green ranger has green fragments, the red ranger has red, and the blue has blue. </p><br><p>  When assembling weapons, you must follow three rules: </p><br><ul><li>  The first digit of the model number of the red fragment should be equal to the last digit of the green model. </li><li>  The last digit of the red fragment model number should be equal to the first digit of the blue model. </li><li>  All three fragments used must have different model numbers. </li></ul><br><p>  Two ways to collect weapons are considered different if at least one of the Rangers uses another piece in the assembly, possibly the same model.  You know the model numbers of the fragments of each ranger.  One ranger can have several fragments of the same model.  Help the Rangers understand how many different ways they have to collect weapons. </p><br><p>  <strong>Input data</strong> </p><br><p>  The first line of input contains the numbers <em>g</em> , <em>r</em> and <em>b</em> - the number of fragments of the green, red and blue rangers, respectively <em>(1 ‚â§ g, r, b ‚â§ 105)</em> . </p><br><p>  The next line contains <em>g</em> numbers <em>x <sub>i</sub></em> - the model numbers that the green ranger has <em>(0 ‚â§ x <sub>i</sub> ‚â§ 109)</em> . </p><br><p>  The next line contains <em>r</em> numbers <em>y <sub>i</sub></em> - the model numbers that the red ranger has <em>(0 ‚â§ y <sub>i</sub> ‚â§ 109)</em> . </p><br><p>  The next line contains <em>b</em> numbers <em>z <sub>i</sub></em> - model numbers that the blue ranger has <em>(0 ‚â§ z <sub>i</sub> ‚â§ 109)</em> . </p><br><p>  <strong>Output</strong> </p><br><p>  Print one number - the number of ways to collect weapons. </p><br><div class="spoiler">  <b class="spoiler_title">Task analysis</b> <div class="spoiler_text"><p>  Prefer arrays: <em>R [a] [b]</em> - the number of fragments in the red ranger, in which the first digit is <em>a</em> , and the last is <em>b</em> ;  <em>G [a]</em> - the number of fragments of the green ranger, in which the last digit is <em>a</em> ;  and <em>B [b]</em> is the number of fragments of the blue ranger whose first digit is <em>b</em> . </p><br><p>  If different rangers did not have identical fragment models, the answer would be equal to the sum over all <em>a</em> and <em>b</em> values ‚Äã‚Äãof <em>G [a] ‚Ä¢ R [a] [b] ‚Ä¢ B [b]</em> . </p><br><p>  To take into account the situation when some pair of models coincide, we calculate the number of pairs of fragments with the same model number for the red and blue, red and green and blue and green rangers, respectively (for example, using std :: map).  Note that only the numbers that match the first and the last digit are suitable.  We use the inclusion-exception formula, subtract the number of such pairs from the answer, and add twice the number of triples of fragments when all three Rangers have the same models. </p></div></div><br><h2 id="d-rycari-i-lzhecy">  D. Knights and liars </h2><br><p>  Time limit per test - 2 seconds <br>  Memory limit per test - 256 megabytes </p><br><p>  Space Ranger built his army in two rows of <em>k</em> soldiers.  He considers the soldiers on the left and right in the same line as a neighbor, as well as a soldier who is in the same position, but in a different line.  The ranger knows that there are knights in the army who always tell the truth, and liars who lie, answering at least one question that they have been asked. </p><br><p>  The ranger selected one or two questions from the set: </p><br><ul><li>  "Is it true that exactly x of your neighbors are knights?" </li><li>  "Is it true that exactly y of your neighbors are liars?" </li></ul><br><p>  And I asked each soldier.  All soldiers were asked questions with the same <em>x</em> and / or <em>y</em> values. </p><br><p>  Suddenly, all the soldiers answered "yes" to all the questions he asked.  Now the space ranger is interested in what the minimum and maximum number of knights can be in his army.  Help him figure it out.  Let us examine the second example from the condition: there are five soldiers in each line, the questions were asked: "Is it true that exactly one of your neighbors is a knight?" And "Is it true that exactly two of your neighbors are liars?" </p><br><p>  The army may consist entirely of liars (they precisely lied when answering the first question, although the extreme ranks answered the truth to the second question).  In this case, the minimum number of knights is reached - 0. Another option: in each rank there are knights in the second and fourth places, and liars in the rest.  In this case, all the knights tell the truth, as they should, and every liar tells a lie, answering the second question (each liar has exactly one neighbor - a liar).  In this case, the maximum number of knights is reached - 4. </p><br><p>  <strong>Input data</strong> </p><br><p>  The only input line contains three integers <em>k</em> , <em>x</em> , <em>y</em> - the number of soldiers in one rank and the number of questions <em>(1 ‚â§ k ‚â§ 105, ‚Äì1 ‚â§ x, y ‚â§ 3)</em> . </p><br><p>  If <em>x = ‚Äì1</em> , this means that the ranger did not ask the first question. </p><br><p>  If <em>y = ‚Äì1</em> , this means that the ranger did not ask the second question. </p><br><p>  It is guaranteed that the ranger asked at least one question. </p><br><p>  <strong>Output</strong> </p><br><p>  If for the given <em>k</em> , <em>x</em> and <em>y</em> there is no single construction method, output ‚Äì1. </p><br><p>  Otherwise, the first line should contain one number - the smallest possible number of knights in the army, and the second - the largest possible number of knights in the army. </p><br><div class="spoiler">  <b class="spoiler_title">Task analysis</b> <div class="spoiler_text"><p>  We will solve the problem by dynamic profile programming.  Find for example the maximum number of knights.  Let <em>dp [i] [mask_prev] [mask_cur]</em> be the maximum number of knights that can be in the layout of the first <em>i</em> columns, <em>mask_cur the</em> mask of the <em>i</em> -th column, and <em>mask_prev the</em> <em>(i - 1)</em> -th. </p><br><p>  Then we look through the mask for the <em>(i + 1)</em> -th column and check whether the restrictions on neighbors for the soldiers from the <em>i</em> -th column are fulfilled, since all their neighbors are now known.  For the first and last columns, constraints need to be checked separately, because they do not have one of the neighbors. </p><br><p> Base: <em>dp [2] [mask_prev] [mask_cur]</em> is equal to the number of units in <em>mask_prev</em> and <em>mask_cur</em> , if <em>mask_prev</em> can stand to the left of <em>mask_cur</em> . </p><br><p>  Transition: <em>dp [i + 1] [mask_cur] [mask_next] = dp [i] [mask_prev] [mask_cur] + ones (mask_next)</em> , where <em>ones (x)</em> is the number of units in the mask <em>x</em> . </p><br><p>  The answer will be the maximum among all <em>dp [k] [mask_prev] [mask_cur]</em> such that <em>mask_cur</em> may be to the right of <em>mask_prev</em> .  Finally, we note that the case <em>k = 1</em> should be disassembled separately, since in this case there is no previous column. </p></div></div><br><h2 id="e-parallelepiped">  E. Parallelepiped </h2><br><p>  Time limit per test - 2 seconds <br>  Memory limit per test - 256 megabytes </p><br><p>  The black ranger wants to make a rectangular parallelepiped.  For this, he plans to use 6 of <em>n</em> rectangular sheets of metal, the <em>i-</em> th sheet has size <em>a <sub>i</sub></em> per <em>b <sub>i</sub></em> meters. </p><br><p>  Each facet of the parallelepiped should be a single sheet of metal.  Sheets cannot be bent or cut, sheets from which the parallelepiped will be folded should not protrude beyond its edges.  Sheets can be rotated arbitrarily. </p><br><p>  The black ranger wants to build a parallelepiped of maximum volume.  Help him. </p><br><p>  <strong>Input data</strong> </p><br><p>  The first line contains one number <em>n</em> - the number of metal sheets of the black ranger <em>(6 ‚â§ n ‚â§ 200 000)</em> . </p><br><p>  The next n lines contain pairs of numbers <em>a <sub>i</sub></em> , <em>b <sub>i</sub></em> - the sizes of the <em>i-</em> th sheet of metal <em>(1 ‚â§ a <sub>i</sub> , b <sub>i</sub> ‚â§ 106)</em> . </p><br><p>  <strong>Output</strong> </p><br><p>  Print one integer - the maximum volume of a rectangular parallelepiped, which can be assembled from these sheets of metal. </p><br><p>  If it is impossible to assemble a rectangular parallelepiped from these sheets, output ‚Äì1. </p><br><div class="spoiler">  <b class="spoiler_title">Task analysis</b> <div class="spoiler_text"><p>  Let's tell about the main idea of ‚Äã‚Äãthe decision.  First, we consider separately all parallelepipeds, in which two or three sides coincide, this can be done in <em>O (n)</em> . </p><br><p>  Now suppose that all three sides are different.  We construct the following undirected graph: the vertices are the possible lengths of the sides, connect the edges of the numbers <em>a</em> and <em>b</em> , if there are at least two sheets of size <em>a √ó b</em> .  The task was reduced to the consideration of triangles in the resulting graph, this can be done as <em>O (n2 / w)</em> or <em>O (nsqrt (n))</em> (here <em>w</em> stands for the size of a machine word, 32 or 64, this factor appears during bit compression in the search for triangles). </p></div></div><br><h2 id="chto-dalshe">  What's next? </h2><br><p>  We invite you to qualifying rounds!  They will take place on April 2, 16 and 29.  The top 200 programmers of each round will qualify for the qualifying round.  They will receive special certificates and will compete for a memorable prize - a cool T-shirt with the championship logo.  And the top 50 programmers of the qualifying round will get to the final, where they will compete for a prize pool of 750 thousand rubles.  <a href="http://www.russiancodecup.ru/ru/">Join now</a> ! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/324500/">https://habr.com/ru/post/324500/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324490/index.html">Where the games go: the problem of preserving old video games. Part 3</a></li>
<li><a href="../324492/index.html">Problems and solutions: what can go wrong with the maintenance of complex iron</a></li>
<li><a href="../324494/index.html">Writing while reading in postgresql: scandals, intrigues, investigations</a></li>
<li><a href="../324496/index.html">Features of localization of games on foreign markets</a></li>
<li><a href="../324498/index.html">How we integrated with ownCloud and Nextcloud: pitfalls and how to overcome them</a></li>
<li><a href="../324502/index.html">The way to deal in CRM: automate it</a></li>
<li><a href="../324504/index.html">Do you know the speed of loading your site from mobile devices? Time to figure it out</a></li>
<li><a href="../324506/index.html">A brief history of javascript. Part 2</a></li>
<li><a href="../324508/index.html">Machine learning in Avito. Video recordings from the Data Science Case Club meeting on March 14</a></li>
<li><a href="../324510/index.html">Badoo time-series storage: so she was called Cassandra</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A little bit about how we wrote a photo mosaic generator for Android</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When I was in school, notebooks with photo mosaic on the cover were popular. And at some certain moment I wanted to repeat the same effect, but with m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A little bit about how we wrote a photo mosaic generator for Android</h1><div class="post__text post__text-html js-mediator-article">  When I was in school, notebooks with photo mosaic on the cover were popular.  And at some certain moment I wanted to repeat the same effect, but with my original image.  After a bit of browsing the Internet, I found some ready-made solutions for desktops, but some were paid, and some were very old.  Thus, it was decided to try to write the most and not just like that, but on the phone with Android on board. <br><a name="habracut"></a><br>  For a start, what is a <b>photo mosaic</b> ?  This image, assembled from many others, selected in such a way as to make their set as clearly as possible resemble the original image in outlines. <br><br>  Example: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ed1/7db/192/ed17db1929ff8154ce5144da9ad54c25.jpg" alt="image"><habracut>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As you can see, the parts of the mosaic are selected by the dominant color on the processed area of ‚Äã‚Äãthe original image.  Thus, the idea of ‚Äã‚Äãthe algorithm of the future application immediately appeared: <br><br>  1. Divide the original image into sections. <br>  2. Step after the naked to go through each section and determine the dominant color. <br>  3. In the place of each section to insert a thumbnail with the same dominant. <br><br>  The snag was only HOW to look for the dominant color.  Since I was just starting to program, this program was almost the first project in my life, so the first thing I‚Äôve got on the Internet is looking for a super-mega algorithm.  Googling a bit, I learned about the histograms and how they are roughly created.  If the memory does not fail, I even saw libraries somewhere to find the color histogram.  But it‚Äôs not interesting, so I decided to look for my solution.  As a result, I came to a simple and almost stupid way: look for the arithmetic average of three colors from all the pixels of one area.  Having received the first results, even he himself was surprised, this method works quite well. <br><br>  Having received a charge of motivation, began to write the program itself.  In the course of several weeks, in the evenings, in the free time from the university, by trial and error the program was written.  Deploy did immediately to the phone HTC Wildfire S with Android 2.3.3 in order to test the performance of the program on a weak hardware. <br><br>  Later it turned out that even two thousand images as a ‚Äútile‚Äù of a future mosaic are few.  The more material to work, the better and clearer the final image is obtained.  With grief in half, he collected almost 7,000 pictures, and the mosaics began to take on quite a decent look.  A few edits and selection of a suitable step of the cycle, and the program has earned, like a clock. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/598/4d0/d15/5984d0d15b516aeadfcedb5914b447c5.jpg" alt="image"><img src="https://habrastorage.org/getpro/habr/post_images/ab4/80e/2a8/ab480e2a8ec5940e4704d3450b843530.jpg" alt="image"><br><br>  At this, my goal was achieved, the next step was to give the program at least some proper look.  Since the designer of me is none, and in the markup is not strong, I entrusted this function to my university colleague, who was also interested in developing for Android, the results of his works are given above. <br><br>  When the development and cutting out of bugs came to an end, the most interesting began: registration and publication to the market.  As expected, the process is fairly simple and there is nothing special about it: first register, prepare all the necessary graphics for the market, and then the publication itself.  The most exciting moment is that day of waiting until your application appears in the market and the search results will lead to your creation.  Probably this is one of the most pleasant feelings - to know that yours, whatever it may be, the work is available to the public and anyone can download and leave a comment.  Speaking of comments, I never thought that feedback could be so morally necessary.  I remember as a child's delight when you read another review, and the best part is when it is constructive and even criticized.  Criticism helps a great deal, to some extent it lowers from heaven to earth and makes you look at things from the other side. <br><br>  In order to reward ourselves as something for work, we have embedded advertising in the application, which, as it turned out, was not as profitable as expected.  I will say briefly, almost a year in AdMob a little more than $ 100 dripped, and this with more than 9000 total downloads and 1500 active downloads. <br>  The only thing we did for distribution was to upload apps to Amazon Market, Samsung Apps, and just for fun on w3bsit3-dns.com. <br><br>  Initially, the application was conceived as an experiment, and not a way to make money, so we did not invest in advertising or promotion.  As soon as downloads passed several thousand, the application began to appear on popular resources, it was even overlooked in some places.  In turn, this also can not but rejoice. <br><br>  As a result, we earned nothing on advertising, but gained experience in developing and publishing the application.  Now we both work as Android developers, and a week ago we were offered a good amount for the program and we sold it. </habracut></div><p>Source: <a href="https://habr.com/ru/post/191862/">https://habr.com/ru/post/191862/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../191852/index.html">Using the Aastra 6725ip and Aastra 6721ip IP terminals in the MS Lync 2013 Server infrastructure</a></li>
<li><a href="../191854/index.html">Raspberry Pi in the hands of an amateur or home rocking torrent</a></li>
<li><a href="../191856/index.html">Is cloudy IP PBX suitable for small companies?</a></li>
<li><a href="../191858/index.html">Another JavaScript preprocessor</a></li>
<li><a href="../191860/index.html">The attacker got caught selling root accesses to supercomputers</a></li>
<li><a href="../191864/index.html">The use of IT in the search for new drugs: an overview of areas</a></li>
<li><a href="../191866/index.html">Electronic signature formats</a></li>
<li><a href="../191868/index.html">File Monitoring with GCD</a></li>
<li><a href="../191870/index.html">Execution of an external file from an Oracle database in order to obtain information about disk space</a></li>
<li><a href="../191872/index.html">Regional market of Internet advertising and sites. And how are you?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
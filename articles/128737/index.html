<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The problem of 3D particles in After Effects</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When working with the motion-design, it is often necessary to encounter the fact that you need to create a large number of objects that are either rad...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The problem of 3D particles in After Effects</h1><div class="post__text post__text-html js-mediator-article">  When working with the motion-design, it is often necessary to encounter the fact that you need to create a large number of objects that are either radiated from one place or already exist on the stage.  So you can make smoke, fog, fireworks, falling, or fragments hanging in space, just beautiful abstract lines, oddly diverging in different directions.  This is helped by the effects called "particles" (ang. Particles) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5d4/f43/24c/5d4f4324ccc55178473a8b58b222cf8c.jpg" alt="image"><br><br>  <i>Two kinds of particles are visible on the <a href="http://www.youtube.com/watch%3Fv%3DLsjx9_s-QeM">frame</a> : one is small red pieces, flying away from behind the silhouette in the center, the second are purple-white ‚Äúhairs‚Äù.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now I'm working with After Effects CS4, and for this reason I ran into a problem: the effects of the particles that come with the program (CC Particular System II, CC Particular World, Particular Playgraund) are not 3D effects, but pseudo-3D effects.  It is not surprising, but even such an expensive paid plug-in to AE, as Trapcode Particular also requires that the layer remain in 2D space, which means it only simulates the volume of its effect.  How many I have not tried, but I haven‚Äôt found any real volumetric analog for this program. <br><a name="habracut"></a><br><h4>  What is the problem </h4><br>  Explain what the problem is quite difficult.  It will be about different spaces, and drawing it so that it is understandable to all is quite difficult, so you have to turn on the fantasy.  But first, let's start with the symptoms of the problem. <br><br><h5>  Symptoms </h5><br>  If we want to make, for example, a smoke that flies between various 3D objects, then we are confronted with the following problem: how would we not move the radiator (eng. Emitter) along the Z axis if our smoke should go beyond some kind of 3D object , then, instead of passing through the object, or in any other way be behind it, the smoke just starts to decrease, supposedly moving along the Z axis. If you start turning the camera, then our 3D and pseudo-3D objects start behaving absolutely incomprehensible way that convinces us that either we or the authors of the program / addon are  about something screwed up. <br><br><h5>  The essence of the problem </h5><br>  The essence of this problem lies in the fact that Adobe After Effects uses layers, just like in Photoshop (Adobe Photoshop).  When you turn a layer into a 3D layer, it begins to exist in all three dimensions.  Now we can manipulate it, not only in the X and Y axes, but also in Z. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9a9/505/4ba/9a95054ba4fca1d7ff46659b4ecd334b.png"><br><br>  And the layers on which our particle effect is located is just a pseudo-3D layer.  This means that although the internal structure of the particle effect is completely ‚Äúparodied‚Äù by the volume of the layer, the program itself still sees it as a 2D layer.  <u>This means that no matter how we twist the camera, the contents of our pseudo-3D layer cannot appear on top of the 3D layer in the list of layers above it, and in the same way cannot go beyond the 3D layer under it.</u> <br><br>  It turns out (carefully, it is necessary to turn on the fantasy, although this is unlikely to help) that we have two 3D spaces: one created by the program itself, and the second created by the effect of particles.  And this second space is between the objects of the first space, and cannot break out of this framework.  Probably for the time being it is difficult to understand, but then it will become more visible (how much space in space can be generally understood for an ordinary person?) <br><br><h4>  Partial solution </h4><br>  I struggled for a long time over this problem: I made a screensaver for a TV show, and I had about 14 volume layers at the same time (something like mountains), between which particle emitters flew, leaving smoky traces.  Plus, I wanted to cover the surface of the composition with a haze, and I was going to use the same particles for this. <br><br>  It was impossible to make a haze out of one particle emitter, since this fog would envelop all 14 objects, and it could remain only between two. <br><br><h5>  TheFXGuy Lesson </h5><br>  Dozens of reading posts by different people, on different sites that also faced this problem, I could not find a solution.  But after some time I came across this video on YouTube: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/01BWKWhcJ-c%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhho4QiKwOmU1o-CSz1LXFIfEAalaA" frameborder="0" allowfullscreen=""></iframe><br><br>  <i>(Caution, incorrect code in the comments to the video)</i> <br><br>  I already happily rubbed my hands, looking for the lesson for which this video was made ... And I found it, <a href="http://www.youtube.com/watch%3Fv%3Dvq5ETifE3ZM">here it is</a> (Caution, incorrect code in the comments to the lesson).  Unfortunately, this lesson tells not how to normalize the work with such pseudo-3D layers, but shows how to deceive the system so that from the outside it seems that everything is normal. <br><br><h6>  To the side it seemed that everything is fine </h6><br>  On the video above, we see a particle emitter that flies through two volume layers: a rectangle and a circle.  But in fact, we see 3 emitters that continue the work of the previous one very well. <br><br><img src="http://img851.imageshack.us/img851/122/unleduxf.png" alt="image"><br><br>  That is, at the moment when the particle emitter should intersect with the plane of the 3D layer, we instantly turn off the radiation on it, and turn on particle radiation in the next frame, on the radiator, which is ‚Äúin that zone‚Äù (subspace) where we need now radiate. <br>  Unfortunately, this snag is not visible from all sides correctly, moreover, with the increase in the number of true 3D layers, the use of this method becomes difficult. <br><br><h5>  What we got </h5><br>  Each pseudo-3D layer divides our space into two ‚Äúsubspaces‚Äù located at different depths (that is, at different places on the Z axis).  If we have N true 3D layers, then the subspaces will be N + 1. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cf9/939/62f/cf993962fa6fd3812af87696c0f7180a.png" alt="image"><br><br>  In order for our particles to be located on any side of this 3D layer, it is necessary that their emitter be in the corresponding subspace. <br>  If we need the particles to move between real 3D layers, then we cut off the radiation of the particles at the moment the emitter crosses the plane of this 3D layer, and begin to radiate them in a layer in the next subspace. <br><br><h5>  My consensus </h5><br>  Since in my composition there were about a dozen 3D layers scattered rather chaotically, I would have to use about fifteen + 1 layers with particles to make my fog above the ground, each of which would have to fill a rather bizarre form ... I'm afraid that the laptop on which I did the screensaver would simply not have pulled. <br><br>  But, thanks to this experience, and the understanding of the subspaces in space, I was able to correctly position the jets of smoke flying between my 3D layers, but not intersecting with them. <br>  I also realized that Adobe After Effects is a fairly not perfect program, and I will try to switch to more complex counterparts. <br><br>  Unfortunately, I still can‚Äôt lay out the resulting splash screen, as it‚Äôs unlikely for the TV channel‚Äôs management to happily appreciate the appearance of a broadcast splash screen on the Internet, the premiere of which has not yet been on the channel itself. </div><p>Source: <a href="https://habr.com/ru/post/128737/">https://habr.com/ru/post/128737/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../128730/index.html">A modest interview guide: part 2</a></li>
<li><a href="../128732/index.html">Mass manifestations of "Wi-Fi allergy" in America</a></li>
<li><a href="../128733/index.html">Budget Nettop as HTPC</a></li>
<li><a href="../128734/index.html">ARM Microcontrollers STM32F. Quick start with STM32-Discovery</a></li>
<li><a href="../128736/index.html">Helping about .SUshiki</a></li>
<li><a href="../128740/index.html">The peculiarity of working with smart points in Qt</a></li>
<li><a href="../128741/index.html">Hiding, obfuscating and crypting the client side of web applications</a></li>
<li><a href="../128742/index.html">VPN over L2TP: error 678 - one small registry key</a></li>
<li><a href="../128744/index.html">Gamers in Fold.it solved a scientific problem</a></li>
<li><a href="../128745/index.html">OOP Packet Performance in Perl</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Defending against spam with IronPort c170</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 

 Everyone knows what e-mail is. Also, everyone knows what spam is. The global spam volume reaches 140 billion messages daily and such a hug...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Defending against spam with IronPort c170</h1><div class="post__text post__text-html js-mediator-article"><h4>  Foreword </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/0cd/ce2/d15/0cdce2d15b320b40f679e2f93100b201.png" alt="image"><br>  Everyone knows what e-mail is.  Also, everyone knows what spam is.  The global spam volume reaches 140 billion messages daily and such a huge amount of spam simply does not allow using mail more or less efficiently without any spam filtering system.  While one of the most important factors is the avoidance of errors. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3db/9ca/5c9/3db9ca5c94541cf0447bd30788e3d7bb.gif" align="right">  For a long time, many anti-spam systems were perelopacheno and somehow all did not fully satisfy the need.  But once offered to consider ironport from Cisco.  Initially, I was skeptical, I thought that the Western piece of iron, and even without a Bayesian filter, would not be able to effectively screen out Russian spam, besides avoiding errors.  Well, the price!  By questioning people in a friendly conversation, I was told completely different numbers, which reached millions of rubles.  This scarecrow, few people want to give that kind of money for filtering only unwanted content.  In addition, to my surprise, there is very little information on this system on the Internet.  Even on Wikipedia, there is only a scant article in English, and there is nothing in Russian at all.  And so, what ironport is and why I will recommend it for medium business mail systems and above, I will try to answer here. <br><br>  Typical picture: <br><img src="https://habrastorage.org/getpro/habr/post_images/fd7/d40/d1b/fd7d40d1be0310f4b0a904c88e8f6397.png"><br>  Less than 60 letters out of 10,000 reach the addressee. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><h5>  IronPort C170 </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/4ab/cea/e1d/4abceae1d2108fe145c0a7cf1d5a08d1.jpg"><br>  IronPort is a piece of hardware.  In the simplest version, this is a single-server server, as if on a DELL hardware.  Detailed configuration cisco does not disclose and, however, it is not required.  This configuration uses 2 disks in a 250GB software mirror.  Disks are used mainly for quarantine and logs. <br><img src="https://habrastorage.org/getpro/habr/post_images/695/32d/ae6/69532dae607b94de1789d631251845df.jpg"><br><br>  Connection interfaces are not many, but many of them are not required.  2 gigabit interfaces, one RS232.  There are also 2 USB ports, the purpose of which I did not understand.  Present only in the younger model, C170.  There are no USB ports in the older models. <br><img src="https://habrastorage.org/getpro/habr/post_images/1a1/597/99e/1a159799ee4f1f5c6a1b19bf70bf8716.jpg"><br><br><h5>  Licensing </h5><br>  An interesting licensing model is used.  The minimum number for configuring an ESA (Email Security Appliance) is 100 licenses.  The minimum period is 1 year.  The most unprofitable license for antispam is about $ 30 per share for 1 year.  There are licenses for 3 and 5 years, which are more profitable somewhere up to 60% and renewal, which is sold even cheaper.  Plus, the cost of the license when buying from 250 pieces less somewhere else by a third.  As a result, for example, a 3-year license for 250 users can cost $ 30-35 apiece and $ 20-25 for its renewal, these prices are voiced by our supplier, there is a chance that prices can be found lower.  But it‚Äôs very interesting with the hardware itself, you don‚Äôt pay anything for the server itself, it goes along with any number of licenses and remains with you even after the licenses expire, if you suddenly didn‚Äôt want to filter spam using Ironport.  Depending on the number of licenses, you get C170 up to 1000 users, more powerful C370 - from 2000 up to 10,000 users, etc.  It is unlikely that the server can be effectively used for any other purposes, but I like the approach itself. <br><br><h5>  Filtration technology </h5><img src="https://habrastorage.org/getpro/habr/post_images/974/9f2/0a3/9749f20a35d9f57c3c8e51c02bbd5f9e.gif" align="right"><br>  The basic anti-spam system is the so-called reputation filter.  Ironport verifies the source of the letters with the base given SenderBase and places the so-called SenderBase Reputation Score, which is measured in the range from -10 to 10. The base of SenderBase itself is replenished in accordance with some tricky conditions and guarantee not only the exclusion of bona fide senders from it, but and a high level of spam filtering during the SMTP session setup.  They promise to filter spam based on reputation at least 80% of email traffic.  In fact, this value is at the level of 98%. <br>  However, this is not all.  Further letters, especially those that had a low reputation, but were nevertheless missed, are checked directly by the anti-spam module.  A special context analysis system is used, analyzing by a variety of parameters, including for signs of circumvention of antispam protection, links that are present in the letter and pictures in the attachment.  Usually about half of the letters that have passed the reputation filter are cut on this protection.  No errors have been noticed yet. <br>  Ironport runs on its own AsyncOS OS, which is designed specifically for this device, has a special file system and a non-stack connection model, guaranteeing up to 10,000 simultaneous connections. <br><br><h4>  What does it look like in reality? </h4><br>  IronPort can be configured even in a configuration when messages to it will be relayed from another mail server.  Often this setup may be necessary, for example, if you have an provider's mail server installed as secondary mx servers.  Ironport will find the source server's address in the email header and check it for presence in SenderBase.  If the configuration is not performed, then ironport will try to find not a source server, but a repeater.  Not finding it in the database, will miss the spam letter.  And this is decent, given that during normal operation, up to 99% of spam is filtered and even a minute of spam can result in hundreds or thousands of emails. <br><br>  In fact, it all comes down to the fact that Ironport opens the port to wait for the smtp session. <br>  If the ip address of the sender is contained in the database as not being respectable, then the session is terminated, informing at the same time that he does not trust this sender. <br>  A short message is written to the log: <br><img src="https://habrastorage.org/getpro/habr/post_images/c4c/710/3c8/c4c7103c8327d1c44f41a1d769fd7775.png"><br><br>  Error log if the user is not found in the ldap directory.  If the ldap server is unavailable, you can specify what to do: skip the message or refuse delivery.  Compound requests are supported, and if ironport serves several domains with different ldap directories, then the request can be combined and verified will be carried out sequentially on the available directories until it finds a match, or refuses delivery to the addressee if there is no such address in the directories. <br><img src="https://habrastorage.org/getpro/habr/post_images/c3f/071/5e5/c3f0715e52576801828a4b737ba55454.png"><br><br>  After checking the directory ldap, the text of the letter is analyzed for the presence of suspicious information.  This letter is a loser.  To his regret, it is worthy only of quarantine. <br><img src="https://habrastorage.org/getpro/habr/post_images/945/c83/d01/945c83d0129546f71dfd9c5daedf204a.png"><br><br>  Regarding quarantine, by the way, is also very good.  You can allocate up to 5GB of quarantine and set any period of storage.  But the most interesting in the personal quarantine.  With the proper settings for the ldap request and quarantine, an ordinary user can go to ironport and see which emails have been eliminated with anti-spam, unlock them or delete them permanently.  With the specified frequency, a notification can be sent to the mail, telling how many and which emails are in the spam quarantine.  I think it's a beautiful thing. <br><br>  Mailings do not fall under antispam.  Mailing servers have a decent rating and are not cut. <br><img src="https://habrastorage.org/getpro/habr/post_images/d19/331/26c/d1933126c8874ea47e6a5dfe74bdd3af.png"><br><br>  In general, the system has quite flexible functionality.  There is almost no configuration where ironport could not be used.  There are also fault tolerant configurations. <br><br><h5>  Alternatives </h5><br>  Of the alternatives, I would single out Microsoft Forefront.  By cost, it turns out about the same.  But in terms of efficiency, I can only compare it with positive reviews and my personal account at office365, where spam became ... slightly less than zero after transferring my mailbox from Yandex to 365. <br><br>  As a result, in Ironport, I can especially highlight the operation of the device as a gateway with the SenderBase filter.  Using it as an anti-spam filter is not very effective.  And if you run the entire stream of letters without filtering by SenderBase, then the filtering quality will be depressing. <br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/148317/">https://habr.com/ru/post/148317/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../148310/index.html">Another attempt to understand the problem of artificial intelligence</a></li>
<li><a href="../148311/index.html">Mobile development with Gideros Studio. Part 0</a></li>
<li><a href="../148312/index.html">Managing configuration files in .net projects</a></li>
<li><a href="../148313/index.html">The principles of minimalism in developing games for mobile platforms</a></li>
<li><a href="../148316/index.html">Installing Debian on a physically accessible system without a monitor and keyboard</a></li>
<li><a href="../148318/index.html">Auto-Renewable Subscription in iOS: proper implementation and pitfalls</a></li>
<li><a href="../148319/index.html">Recognition of numbers by 4 points</a></li>
<li><a href="../148323/index.html">Bot for browser Angry Pets</a></li>
<li><a href="../148324/index.html">Sublime Text 2: How to create a snippet?</a></li>
<li><a href="../148325/index.html">Computational geometry, or how I became involved in Olympiad programming. Part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
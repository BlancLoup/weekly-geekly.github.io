<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development of trading robots: search for market inefficiencies. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translator's note: Earlier in our blog on Habr√©, we looked at various stages of developing trading systems (there are online courses on the topic), an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development of trading robots: search for market inefficiencies. Part 2</h1><div class="post__text post__text-html js-mediator-article">  <b>Translator's note:</b> <i>Earlier in our blog on Habr√©, we looked at various <a href="http://habrahabr.ru/company/itinvest/blog/224353/">stages of developing</a> trading systems (there are <a href="http://www.itinvest.ru/education/schedule/">online courses</a> on the topic), and even described the development of an event-oriented backtest module in Python.</i>  <i>Today we bring to your attention the continuation of the story about how HFT-traders in the process of development simulate the behavior of people who will resist their trading robots on the exchange.</i> <br><br> <a href="http://habrahabr.ru/company/itinvest/blog/266115/"><img src="https://habrastorage.org/files/1d9/ef2/d53/1d9ef2d537754253800f99e2e2075d04.png"></a> <br><br>  Using the example of the <a href="http://habrahabr.ru/company/itinvest/blog/265553/">previous material,</a> we have seen how one of the properties of HFT orders, their high failure rate, can be used to evaluate various types of orders when forming the basis of a trading strategy.  In this post, we will look at one more feature and a simple strategy based on it.  A characteristic feature of this and the previous material is that they describe the obvious features of high-frequency orders. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If we talk about stereotypes about HFT-trading, the first thing that comes to mind (after frequent failures) is a small average value of the transaction [1].  It is believed that traders of any type who use algorithms in their work place small ‚Äúwaiting‚Äù orders.  HFT market makers do this because they want to selectively trade with small, aggressive players to avoid loss of liquidity at the entire price level.  Algorithms that increase liquidity place small orders, since they need to hide their intention to trade in larger volumes in order to keep the price at the right level as long as possible. <a name="habracut"></a><br><br>  Naturally, with aggressive trading, things can be somewhat different - algorithms that seek to ‚Äúhide their intentions‚Äù are at risk from other robots: they can use the liquidity remaining in the chosen price range.  For aggressive HFT algorithms, this desire not to impersonate does not matter, so it is assumed that they eliminate all liquidity that can bring profit.  However, in the previous article, we noted that for aggressive traders from the EdgeX exchange, this behavior, oddly enough, is uncharacteristic. <br><br>  In view of the above, we will find out whether, according to the market, this tendency of placing small orders by robots can be revealed.  We could just follow the behavior of orders of different sizes after the transaction, but it would be better to take into account all orders at the current price level.  And if this is possible, then we will take them into account on all exchanges.  To do this, you can measure a variety of indicators, but I will compare situations when there are no orders on any of the exchanges at the time of the transaction, the size of which is much less than 2 whole lots (200 stocks). <br><br><img src="https://habrastorage.org/files/d92/550/f88/d92550f88545448b9d8109e04260d26a.png"><br><br>  <i>Top chart: Dependence of trading results on the market value on the Nasdaq exchange, taking into account the ‚Äúage‚Äù of the order and the presence of orders of no more than 201 shares at a given price.</i>  <i>Under the size of the order refers to the initial size at the time of the appearance of the order in the summaries of data on the market, excluding any changes in its size due to execution, processing or updating the system.</i>  <i>Orders placed for trust trading are included in the sample.</i>  <i>Commission and compensation payments are not taken into account;</i>  <i>in the sample there are no data for some exchanges.</i>  <i>Bottom chart: the volume of shares on the Nasdaq, taking into account trust trading.</i> <br><br><img src="https://habrastorage.org/files/cf9/152/ead/cf9152ead3b842a7889d2a913ea876ad.png"><br><br>  <i>The same graphics for EdgeX.</i>  <i>The bottom chart also shows the stock volume on the Nasdaq</i> <br><br>  The strong influence of the presence of small orders on the long-term results of the transaction is noticeable.  If there are no small orders on the Nasdaq exchange and the processed order has been placed recently (less than 1 second ago), the passive side in the auction has a negative impact on their outcome.  It is worth noting that self-sufficiency on the Nasdaq with passive trading, in principle, can bring considerable income because of the size of compensation payments of approximately 0.30 cents. <br><br>  This fact contradicts the earlier hypothesis that the absence of small orders may indicate a smaller number of bidding algorithms and reduced risk.  I didn‚Äôt check if this is really true, but this behavior may correspond to the placement of large orders by robots during sharp fluctuations in the glass in an attempt to get compensation. <br><br>  If the entire market knows that the price is close to the approximate value of a tick, it can be assumed that anyone who places orders to buy / sell faster than others will be able to receive compensation.  In such a situation, it would be logical to place large orders.  Such actions are a common speculation, but they, by and large, would indicate an unfavorable market situation in our examples. <br><br>  The situation will change completely if we take a look at the orders placed on the Nasdaq more than a second ago, which corresponds to the initial hypothesis.  The absence of small orders on the Nasdaq corresponds to quite low liquidity, while after trading we lose almost a cent.  The same happens with orders placed both a long time ago and recently on EdgeX: the ‚Äúage‚Äù of orders and their size only reinforces the effect.  The situation is repeated on all the exchanges I have reviewed.  I can not say why Nasdaq stands out in the presence of recently placed orders in the auction, but I note that this is the fastest investment exchange with an intensive flow of messages, and exchanges can behave quite peculiarly without access to the best quotation system (NBBO). <br><br>  If the market functioned truly efficiently, we would most likely be faced with a much less strong effect of this kind.  One can imagine, for example, how aggressive traders would become less active if there were a certain proportion of small orders on the market.  This would have prompted market makers and passive algorithms to place larger orders in order to trade with these players.  In the end, we would notice how the effect decreases or disappears.  I note that the mechanisms for implementing this approach do not quite correspond to the mechanisms for reducing the effect of the difference between long-standing and recently placed orders;  As a rule, the algorithm can easily change the size of the order, but it will be difficult for it to change the duration of its exposure. <br><br>  Now we can select low-risk ‚Äúwaiting‚Äù orders using this method;  we can model the strategy just as we did in the previous post.  Namely: <br><br><ol><li>  We monitor all orders on all available exchanges, the size of which did not exceed 201 shares at the time of their placement. </li><li>  If the order placed more than 5 seconds ago has started to be executed, while there are no small orders on the market or recently (less than 100 ms back) placed orders, then </li><li>  We send orders to other exchanges at the same price.  In the previous example, we traded in one tick more aggressively, but here we cannot simulate the same situation, because this strategy is not limited to expensive stocks. </li></ol><br>  Note that the strategy is not verified.  If we use the Nasdaq data as signal data, we get the following result: <br><br><img src="https://habrastorage.org/files/1d9/ef2/d53/1d9ef2d537754253800f99e2e2075d04.png"><br><br>  <i>Top chart: The dependence of the results of simulated trades on the market price on different exchanges.</i>  <i>The simulation was conducted during the week in August 2014.</i>  <i>The size of each simulated order is 100 shares.</i>  <i>Bottom chart: The volume of Nasdaq shares excluding simulated trades.</i> <br><br>  The volume is small, but, nevertheless, even with the deduction of the commission we get a decent net profit, especially on EdgeX.  EdgeX, as we have already seen, can accept larger orders.  If you send orders with a volume of 1000 shares on EdgeX, then this strategy will bring about 5 thousand dollars a day only in this direction.  This is just an example, but I note that the Nasdaq-&gt; EdgeX pair is not the only one that is suitable for this strategy, especially if we have a restriction on trading in cheap stocks.  In addition, if we are going to trade in expensive shares of 1 cent more aggressively [of the market], the volume may be much larger. <br><br>  Once again, we noted the importance of tracking the characteristics of counterparty orders.  It's pretty funny that we can use such stupid HFT stereotypes in order to get fairly predictable results.  As if the whole community of algorithmic traders are not aware of their influence on the market. <br><br>  [1] In the introduction to <a href="http://www.sec.gov/marketstructure/research/hft_lit_review_march_2014.pdf">the literature review</a> compiled by the Securities and Exchange Commission, it says: <br>  The main characteristics of high-frequency trading are the high transfer rate of messages, a sharp increase in the number of refusals and changes in orders, a high indicator of the volume of transactions made, the small size of transactions and an increase in trading speed.  These characteristics are usually associated with the more common phenomenon of algorithmic and automated trading in one form or another. </div><p>Source: <a href="https://habr.com/ru/post/266115/">https://habr.com/ru/post/266115/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../266105/index.html">Autumn Rambler.iOS Meeting</a></li>
<li><a href="../266107/index.html">3CX API - what are they and what to do with them? Third Party Plugins (Part 2)</a></li>
<li><a href="../266109/index.html">GPS service ViaLatM - scripting language</a></li>
<li><a href="../266111/index.html">Large-scale migration of records in the database: how it does Stripe</a></li>
<li><a href="../266113/index.html">Vertical padding between columns using Sass using the bootstrap grid example</a></li>
<li><a href="../266117/index.html">Playing pure Java from beginner, for beginners</a></li>
<li><a href="../266119/index.html">Security Week 36: jailbreak-robbery, farewell to RC4, porosity of routers</a></li>
<li><a href="../266121/index.html">Setting the overall balance of games three in a row</a></li>
<li><a href="../266125/index.html">New HP Hyper Convergence Systems</a></li>
<li><a href="../266127/index.html">Multiplatform audio player in C ++ and OpenAL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Verify compliance with the coding standards for PHP through git</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the development of the project are often involved developers of different levels. This leads to the fact that there is no strict format for writing...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Verify compliance with the coding standards for PHP through git</h1><div class="post__text post__text-html js-mediator-article">  In the development of the project are often involved developers of different levels.  This leads to the fact that there is no strict format for writing code.  The quality of the code on the project has to be constantly monitored by senior developers, and this takes a lot of time from them. <br><br>  In order to <s>punish govnokoderov to</s> alleviate the suffering of those who make review of the code, you can use automatic code verification tools that everyone has known for a long time.  This is PEAR and PHP Code Sniffer. <br><a name="habracut"></a><br><br>  Most of the projects of the company where I work are made on Drupal, so an example of checking compliance with Drupal coding standards will be considered, although all of the tools described below can be applied to other standards, such as Zend. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      More recently, a set of rules has appeared for testing Drupal coding standards via PHP Code Sniffer.  Install and configure it is very simple, the most difficult thing starts next.  How to make everyone check their code?  The influence of the human factor affects, the first one forgot, the second did not want to, and the third simply believes that its code cannot contain errors and in general all this is a waste of time. <br><br>  The solution could be <s>forced</s> voluntarily-enforcing the introduction of verification code in the development process.  In order for us not to have to stand with a stick over each programmer, we will use the git version control system.  Thanks to git hooks, you can easily add your own scripts to be executed with certain git operations, for example commit. <br><br>  The first step is to add a code verification script to the pre-commit hook.  When the developer commits his code, the modified files will be automatically checked.  If errors are found, the commit operation is interrupted and a list of errors is displayed: <br><br><img src="https://habrastorage.org/storage2/efd/f8f/ea4/efdf8fea4392f3b93dd9ce95b5cddc23.png" alt="image"><br><br>  The code can only be committed when all errors are corrected.  Great, now we don‚Äôt allow adding ‚Äúbad‚Äù code to the project repository!  But there is still the human factor.  Again, someone forgets to add the verification script to the .git / hooks folder of his project, someone is too lazy to correct errors and he sets aside for later, etc., and the ‚Äúsmartest‚Äù simply use git commit --no-verify, because now they are not up to mistakes.  In the latter case, git will not invoke the pre-commit hook and the modified files will go to the repository without verification. <br><br>  To deal with this, we use the post-receive hook.  This hook is triggered after adding the code to the remote repository.  The script that will be called in a post-receive hook checks the modified files for errors and sends a report to the mailbox of one or more senior developers who are responsible for the quality of the code on the project. <br><br>  The report sent by mail looks like this: <br><br><img src="https://habrastorage.org/storage2/c37/7f4/fc6/c377f4fc603b440f7a0507d771f133f7.png" alt="image"><br><br>  Thus it is easy to automate the process of monitoring the quality of the code on the project. <br><br>  <b>Strengths of this method:</b> <br><ul><li>  Centralized control; </li><li>  You cannot completely avoid checking the code; </li><li>  Code verification scripts do not change the source files and do not block the addition of code in the case of a hotfix; </li><li>  Scripts are easy to install and configure; </li><li>  In addition to the errors of the Drupal coding standards, functional errors are displayed.  For example, that you forgot to use the function t or check_plain (and this is a security hole) when displaying data on the page. </li></ul><br>  <b>Disadvantages:</b> <br><ul><li>  If you add this tool in the middle of development, all the old errors will manifest and at first it will be difficult to clean them. </li></ul><br>  <b>Resources:</b> <br><ul><li>  <a href="http://drupal.org/project/drupalcs">Drupal Code Sniffer</a> </li><li>  <a href="">A set of scripts to automatically check the code through git</a> </li><li>  <a href="http://badscript.net/blogpost/avtomaticheskaya-proverka-drupal-code-style-cherez-git">Instructions for installing and configuring scripts in Russian</a> </li></ul><br><br>  <b>UPD 05/19/2012:</b> <br><br>  <b>Added the ability to ignore file scanning using the configuration file.</b> <br><br>  In order not to check some files and directories, you need to create a .hooks_ignore file in the project root.  Then put in it the paths to files and directories that you do not want to check.  This may be the core of the engine or third-party modules. <br>  Sample content for .hooks_ignore file <br> <code>includes <br> sites/all/modules/contrib <br> sites/all/themes/garland/template.php <br></code> <br>  The first two lines allow you to exclude from checking the full directory with all the files inside, and the third excludes a specific file. <br>  For added convenience, the .hooks_ignore file should be brought under version control, so that it is also stored in the repository and is shared by all developers on the project.  And also so that post-receive hook can use it when checking in a remote repository. <br><br>  The source code for Drupal.org and GitHub has been updated. <br><br>  I am waiting for your wishes and comments on this small project. </div><p>Source: <a href="https://habr.com/ru/post/141447/">https://habr.com/ru/post/141447/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../141439/index.html">We write the first project on the Play Framework 2.0</a></li>
<li><a href="../141440/index.html">Data Filters on ASP.NET MVC and Entity Framework</a></li>
<li><a href="../141441/index.html">Search for repetitions in a two-dimensional array, or the right tool</a></li>
<li><a href="../141442/index.html">Accelerate your Arduino</a></li>
<li><a href="../141444/index.html">Django Gmap v3 Widget - geolocation with search, saving coordinates and addresses in JSONField</a></li>
<li><a href="../141448/index.html">CodeIgniter Command Line library - a small assistant for working with CLI</a></li>
<li><a href="../141450/index.html">Build: markitUp, fancybox, elFinder - a great replacement for WYSIWYG editors</a></li>
<li><a href="../141451/index.html">IE8 memory leaks, or a scary fairy tale with a happy ending</a></li>
<li><a href="../141454/index.html">A set of useful utilities and libraries in the .NET world</a></li>
<li><a href="../141456/index.html">Yandex launches disk</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How does the injector work?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article will discuss the work of the "brains" that control the engine of your car or motorcycle. I will try on my fingers and explain in general w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How does the injector work?</h1><div class="post__text post__text-html js-mediator-article"> The article will discuss the work of the "brains" that control the engine of your car or motorcycle.  I will try on my fingers and explain in general what is happening and how. <br><br>  What do those ‚Äúbrains‚Äù do and what are they for?  Electronics is an alternative to other systems that perform the same functions.  The carburetor was engaged in fuel metering, ignition was controlled by mechanical or vacuum ignition timing corrector.  In general, it is not possible to realize all this with a single electronic device and for quite a long time this is exactly what happened.  On cars, motorcycles, chainsaws, petrol generators, and in many, many other places, the very systems that the injector is intended to replace have worked and continue to work. <br>  Why did it take to change something?  Why demolish existing proven and highly reliable systems?  It's simple - the race for efficiency, environmental friendliness and power.  The accuracy of the systems described above is insufficient to provide the desired level of environmental friendliness and power, and the electronic engine control systems themselves began to appear quite a long time ago. <br><a name="habracut"></a><br>  I will omit the principle of operation of piston internal combustion engines, many are familiar with how the engine works, and those who are not familiar will not suffer too much.  In terms of the operation of the power supply system and the ignition system, the engine is simply a converter of the air-fuel mixture into mechanical energy.  You can consider it as a black box, with some features. <br><br>  So, we have fuel (gasoline, ethanol, propane or methane), there is air and the desire to get mechanical energy out of it.  The difficulty lies in the fact that to obtain the characteristics of interest to us, it is necessary to mix fuel and air in precisely defined proportions and set them on fire at a fairly precise point in time.  Moreover, with insufficient accuracy, we will get degraded performance. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The whole essence of the "brain" is reduced to the dosing of fuel and ignition of the mixture in the engine cylinders.  These are the main functions.  In addition to them, there are also additional ones - turbine control, transmission control. <br><br>  The subsystem that deals with the dosing of fuel is called the <b>injector</b> , the ignition is involved in the <b>ignition of the</b> fuel.  Air enters the engine in a ‚Äúnatural‚Äù order.  The engine itself draws air; its amount can only be limited to reduce engine power.  We do not need maximum power all the time, most of the time the power is just limited.  In the case of the turbine air enters the engine forcibly, but this does not change the essence.  There is as much air as we can and we control its quantity with the help of a pedal. <br>  How much fuel do we need to feed into the engine and how to dose it?  There is a so-called stoichiometric ratio, showing that in order to fully burn a kilogram of fuel, we need a certain amount of air.  For gasoline, this ratio is 14.7: 1.  also called AFR (Air Fuel Rate in English) This is not an axiom, it is a kind of optimum.  The mixture may be "poorer", it may have less fuel.  Such a mixture burns worse, the engine gets hotter, but everything burns down completely.  These values ‚Äã‚Äãare upwards - AFR 15 and more.  Maybe ‚Äúricher‚Äù when there is more fuel - AFR 14 or less.  With this ratio, the mixture does not burn completely, but the engine power is maximum.  There are limitations in this and the other direction - if you get too carried away, the engine will not work.  You can not just pour 20 parts of fuel and expect a proportional increase in power. <br><br>  So, to determine how much fuel we need to feed into the engine, we need to know how much air enters it.  Then everything is simple - from the amount of air by the ratio we determine the amount of gasoline and it's done! <br>  Wait a minute, how can we determine how much air enters the engine?  There are several ways to do this.  Usually use one of the following sensors: <br><br>  <b><a href="http://ru.wikipedia.org/wiki/%25D0%2594%25D0%259C%25D0%25A0%25D0%2592">DFID or MAF</a></b> - A dtchik of an assortment of air conditioning.  This sensor measures the amount of air passing through it.  As suggested by Wikipedia - ‚ÄúThe sensor consists of two platinum filaments heated by electric current.  Through one thread, cooling it, passes the air, the second is the control.  By changing the current passing through the air-cooled platinum filament, the amount of air entering the engine is calculated. "  Sensors of this type are often installed in civilian cars.  In general, everything is quite simple.  Looks like this is exactly what you need!  That's about it. <br><br>  Other type of sensors <br><br>  <b>DBP or MAP</b> is the absolute value of the absolute control.  This sensor is connected to the intake manifold and measures the vacuum (or overpressure, in the case of supercharging) in the manifold.  Based on the readings of this sensor and temperature sensors, crankshaft rotational speeds, it is also possible to calculate the volume of incoming air, which is what we need.  To correct his testimony, one must also know the pressure of the surrounding air.  To measure the atmospheric pressure or put another one of the same sensor, which continuously measures it, or just before the engine starts to measure pressure.  In the second case, it could be a nuisance if you rushed from the seashore straight to Everest. <br>  MAP is often put on sports cars. <br><br>  One of these sensors is installed, the presence of one of them is mandatory. <br>  Well, how much air enters the engine, we can roughly calculate. <br>  Another mandatory sensor is <br>  <b>DPKV</b> or <b>D.</b> <b>p.</b> Position <b>for</b> deer <b>in</b> ala.  This sensor allows the brain to know exactly what position the crankshaft is in.  Why do we need it?  It is not enough to know how much fuel should be fed to the engine, it is necessary to feed it at a certain point in time.  Yes, and light the mixture in the cylinders, too, must be strictly on time.  So without this sensor - no way.  There are several types of such sensors, but most of them are either induction, or Hall sensors, or similar.  In general - proximity sensors, similar to those that work, for example, in the drive of your hard drive.  Or in coolers. <br>  The next sensor, which, together with DPKV, provides even more information about what is happening in the engine at this particular moment - <b>DPRV</b> - the driver of the position ppred <b>in</b> ala.  Also called a phase sensor.  With the help of this sensor one can understand in which of the cylinders at the moment the intake stroke, where we need to supply fuel, in which cylinder we have the compression stroke and time to ignite the mixture.  By the principle of operation, it is similar to DPKV, but often somewhat simpler.  In general, the same thing, but on the camshaft. <br><br>  This set of sensors should be enough for us to start the engine.  At the very least, this is enough to get an idea of ‚Äã‚Äãhow much fuel is to be served, when to do it and when to light the resulting cocktail. <br>  So let us then serve and set fire!  (not to be confused with kindle and combo) <br><br>  <b>Actuators</b> <br><br>  Fuel is dosed by <b><a href="http://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25BE%25D1%2580%25D1%2581%25D1%2583%25D0%25BD%25D0%25BA%25D0%25B0">nozzles</a></b> or in other words ‚Äúinjectors‚Äù.  Yes, yes, it is by the name of this node that all this disgrace is called by us.  The nozzle is nothing particularly interesting.  Just an electromechanical valve.  Two wires and pipeline with fuel pressure.  The voltage was applied to the terminals - the injector opened, the current transmission stopped - the injector closed.  For simplicity, let us first assume that the nozzle opens and closes instantly.  Then, to estimate the amount of fuel passing through it, we only need to know its <b>static performance</b> .  It‚Äôs just the amount of fuel that goes through the nozzle in a minute.  The nozzle was opened, the volume of gasoline was measured, which flowed through it in a minute ‚Äî we received the main parameter.  Now for accurate dosing we just need to open and close the nozzle for a certain time.  It turns out that the dosing is made by "exposure", if we talk in terms of photographers.  The longer the time at which we open the nozzle, the more fuel we will pour into the engine. <br>  A mixture of ignition carries all the same permanent spark plug, which faithfully served for this purpose.  And the ignition coil is also in place.  Here it is only controlled by ‚Äúbrains‚Äù.  The ignition has not changed, but KDPV and DPRV is important for its work, so without these sensors it will not be. <br><br>  In general, this can be considered, and there is in general terms how the injector works.  We look at the readings of the sensors, measure the necessary amount of fuel and open the nozzle for the calculated time.  And so every beat.  Those.  depending on the frequency - 100 times per second at a frequency of 6000 rpm of the crankshaft.  Often?  Yes, not so much. <br><br>  Go ahead? <br><br>  In real engines, things are a bit more complicated.  Accurately calculate how much air enters the engine is not so simple.  To adjust the values, you need sensors for the <b>temperature of the coolant</b> - just a thermal sensor, similar to what the temperature on the dashboard shows.  And the <b>temperature sensor of the incoming air</b> .  In general, it is slightly different from the first one, and its twin brother is functionally altogether - it also simply measures the temperature, but not the engine, but the air entering the engine.  Why do we need to adjust something?  The fact is that while the engine is cold, until it warms to a certain temperature, the fuel evaporates not so well, and it is the fumes that burn.  Accordingly, we need to supply more fuel for the engine to work.  So we take our value for the optimal ratio, measure the engine temperature and adjust this is our value.  You also need to adjust the moment of ignition of the mixture in the cylinders - for the same reasons.  And here, too, corrected. <br><br>  Another not very pleasant moment is the nozzle, which we have adopted as ideal - in fact, it is not.  First, it takes time for it to open and then close.  Accordingly, at this time, she also delivers fuel, but in smaller quantities.  An amendment is also being made to this.  The opening and closing time depends on the voltage of the on-board network.  It is one thing when the generator spits on the whole and in the 14V network, and another thing when the generator is dead and the battery is discharged to indecent 10V.  The nozzle opening time varies and must be adjusted.  Few dead generator, it is necessary to go and the engine should not stop working in such conditions. <br><br>  We didn‚Äôt have enough actuators to work at idle, when we don‚Äôt touch the pedal at all - the engine should not stall, its work must be supported.  To do this, there is a special actuating device - the <b>IAC</b> - the regulator <b>x a</b> roller <b>x</b> .  This is such a stepping motor (less often just an electromagnet), which, through a special channel, gives the engine a "sigh" past the throttle valve closing the air.  The clever brain does not allow the engine to wither away and opens this valve slightly when the speed decreases.  But it does not give way to disagreement either - it covers it when the momentum increases too much. <br><br>  It would be nice if we also know how much the driver presses on the accelerator pedal.  For these purposes, they do not look at the position of the pedal, but at the position of the flap that this pedal controls.  The sensor is called - <b>TPS</b> - A dTik of the position of the sensor module.  Technically, it is simply a potentiometer that measures at what angle the throttle axis is turned.  This is why we need to know how much a driver presses on the floor, you ask?  It's simple, we need to know when to turn on the idle mode (remember about the IAC), when the driver is thirsty for thrills and energetically presses on the pedal - not time to save, pour from the heart! <br><br>  Ecological standards strictly enough control what ‚Äúexhales‚Äù (let it exhales) our engine.  So with all the desire to pour "by eye" - it is impossible.  need to control the composition of the exhaust gases.  How to do it?  For this purpose, there is a so-called <b>lambda</b> oxygen <b>probe</b> or sensor - a sensor that indicates whether the mixture burned out entirely, whether there is fuel in the exhaust gases or free oxygen.  According to the testimony of this sensor, the injector can correct its behavior, either by increasing or decreasing the amount of fuel supplied.  It is necessary quite often - gasoline is different everywhere, and even just being stored in a canister or tank - is aging.  And so on our gas stations can be legends.  Accordingly, its burning regimes are not at all constant.  On top of that, the performance of the injectors can "float".  After all, as you understand, the calculation is based on their constant performance, and the nozzle may become clogged with time, its performance may decrease. <br>  And the norms are strict, and gasoline is expensive, and you have to go.  The attentive reader noticed that this sensor alone is enough to provide feedback.  We look at the composition of the exhaust gases, if not all of them burn out - we pour less.  If it burned clean - we pour more. <br>  Lambda probes are of two types - narrowband and broadband.  They differ in accuracy.  The first only show the rich or poor we have a mixture, the second show how rich or poor it is.  Even exactly indicate the AFR mentioned at the beginning of the article.  Well, the price, of course.  The first costs $ 25, the second - $ 200.  With lambda, too, not everything is simple - they are quite capricious, require a certain temperature to work, and this is not always possible, in some types of probes, the working element is specially heated from the on-board network.  Yes, lambda may not be one, but this is subtlety. <br><br>  Another sensor used to analyze what is happening in the engine is a knock sensor.  Detonation is the process of burning a fuel that is explosive.  In normal mode, the fuel just burns, when detonated, the fuel explodes.  It's bad for the engine - it's like hammering a piston.  No one likes being hit with a hammer on it - the piston is no exception.  This phenomenon is extremely undesirable and to determine that the mixture detonates and use such a sensor.  It is similar in principle to a microphone that ‚Äúlistens‚Äù to the engine (the sensor is mounted on the cylinder block) and tries to filter out the engine noise and hear where the detonation is, and where it is normal work.  Everything is not simple here.  To facilitate the work of this sensor, another sensor of a rough road is installed, which will show that it is our roads that make so much noise, and not the engine.  The demand for this sensor is increasing on turbo engines. <br><br>  As a result, the brains themselves work approximately as follows: <br>  There is a so-called fuel card - a table in which it is written what composition the mixture should be.  The table has three dimensions - engine crankshaft rotational speed, engine load and AFR itself.  Just take from the table the value put there by an experienced friend. <br>  We adjust this value in accordance with the readings of the temperature sensors, the lambda probe, the knock sensor, the change in the throttle position and in accordance with all these amendments (some of them are also on the plates) we calculate the necessary amount of fuel.  We recalculate the volume of fuel during the opening of the nozzle in accordance with its performance, adjust the time in accordance with the voltage of the on-board network and at the time of admission - open the nozzle for the calculated time. <br><br>  As you can see, there is nothing complicated or abstruse here.  Just the tables, maybe the PID controller places, the factors of influence of certain factors and as a result just the opening time of the nozzle. <br>  Ignition is the same, only there is a map of angles, similar to the fuel map (also a table) and also adjustments according to the readings of the sensors. <br><br>  In normal mode, everything works, but what if one of the sensors fails?  And how to understand this?  If the temperature sensor, for example, shows that the engine is heated to 200 degrees, or that the mixture detonates despite all the adjustments?  This is the reasoning of the brain.  Calculate that the sensor is lying, disregard its readings, ignite the ‚Äúcheck engine‚Äù on the panel and continue working.  Due to this behavior, the engine will remain operational when some sensors fail (not all, as you understand) and will allow you to get to the service station. <br><br>  Yes, many of you will notice that the injector is in fact a fairly simple device.  And schematically there is nothing military - the incoming values ‚Äã‚Äãare read by the ADC, and so the output is purely binary.  Well, the output transistors, well, rather tough working conditions.  But this is not a space far away. <br>  Regarding the operation of the firmware - it also seems like everything is not so difficult.  In my opinion, simpler than any image recognition algorithms and all that.  In the process of setting the firmware itself, no one touches usually.  In the sense that open source, adjust algorithms, optimize something - this is not.  Just software that allows you to change those same fuel cards and other factors.  And the engineers are already engaged in the firmware at the factories.  Or mere mortals who are interested. <br>  Yes, yes, not everyone is willing to pay for the "brains" of space money, but someone might just want more control over what is happening.  All this led to the fact that there are several projects of quite accessible "brains".  There is a megasquirt - <a href="http://www.megamanual.com/index.html">www.megamanual.com/index.html</a> , for this hardware base a custom firmware with advanced functionality was later written and maintained - <a href="http://msextra.com/doc/index.html">msextra.com/doc/index.html.</a> On the last site there are even diagrams of these ‚Äúbrains‚Äù It will be interesting to someone from electronics engineers.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And programmers may be interested in looking at the code. </font><font style="vertical-align: inherit;">If I am not mistaken, he is here. </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msextra.com/doc/ms2extra/files/release/ms2extra_3.2.1_release.zip</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> There is also VEMS - </font></font><a href="http://www.vems.hu/wiki/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.vems.hu/wiki</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> which was first called megasquirtAVR, but now by itself. </font><font style="vertical-align: inherit;">I also saw such guys here - </font></font><a href="http://forum.diyefi.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forum.diyefi.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> there they have some kind of their own project FreeEMS. </font><font style="vertical-align: inherit;">In my opinion, all this shows that everything is not so difficult and sometimes even very accessible. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I hope it turned out quite interesting and fairly understandable. </font><font style="vertical-align: inherit;">About typos please write in a personal. </font><font style="vertical-align: inherit;">If where wrong - correct.</font></font></div><p>Source: <a href="https://habr.com/ru/post/141095/">https://habr.com/ru/post/141095/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../141089/index.html">Online courses Stanford University, Berkley and MIT in an accessible form</a></li>
<li><a href="../141090/index.html">A child in a family geek or baby monitor with his own hands</a></li>
<li><a href="../141091/index.html">Google will sell tablets via online store</a></li>
<li><a href="../141093/index.html">How big are arrays (and values) in PHP? (Hint: VERY BIG)</a></li>
<li><a href="../141094/index.html">WebMoney on Mac</a></li>
<li><a href="../141096/index.html">Video review tablet Samsung Series 7 Slate</a></li>
<li><a href="../141097/index.html">Microsoft requires manufacturers to take seriously the quality of touch panels for Windows 8</a></li>
<li><a href="../141098/index.html">Alternativa3D is now open source</a></li>
<li><a href="../141099/index.html">How to beat piracy?</a></li>
<li><a href="../141102/index.html">Howto: Amazon SES PHP mailer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
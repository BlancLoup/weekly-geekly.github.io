<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Filling Bitrix through internal integration mechanisms with 1C without 1C</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article we will tell you about your experience of integration with Bitrix and about some features of this system from the point of view of an ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Filling Bitrix through internal integration mechanisms with 1C without 1C</h1><div class="post__text post__text-html js-mediator-article"> In this article we will tell you about your experience of integration with Bitrix and about some features of this system from the point of view of an integrator.  Our company is engaged in information support of e-commerce catalogs, and in a simple way, we fill online stores and electronic catalogs automatically using internal products.  Our responsibilities include filling online stores with merchandise, integrating supplier bases with store databases, analyzing competitor price lists, updating warehouse, prices, etc. <br><a name="habracut"></a><br>  It should also be noted that we already had clients whose e-commerce applications worked on the basis of Bitrix.  However, for some reason, they always asked us to provide data in the form of text files of different formats.  We did and everything suited everyone.  However, a logical question nevertheless arose: Why is the bitrix one, and everyone has different formats? <br><br>  Finally, one of our customers needed to organize the import of data directly into Bitrix.  We downloaded the Beatrix demo for stores and found that it has the ability to import data in a csv format.  And since we have been successfully using this format for a long time, it was decided to use it to solve our problem.  After evaluating the cost of the project and specifying all the details with the customer, we set to work. <br><br>  <b>Trying CSV.</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Starting to actually fill in the data, it was found that using the csv format is not very convenient, in view of the customer‚Äôs requirement to transfer the parameters of the goods.  csv was discarded because importing goods with parameters is very inconvenient in this mode, the bitrix required obscure headers for the csv file, but they were more similar to the internal field names and there was no desire to deal with it right away and it is unlikely that this method would bring the desired result .  Those.  if you need to do a simple import where you need to transfer the ‚ÄúProduct Name‚Äù, ‚ÄúDescription‚Äù, ‚ÄúPrice‚Äù and ‚ÄúPicture‚Äù - then yes - this method will do, but if something more, then you need to look for another method. <br><br>  <b>Bitrix supports the following import options</b> , we found this out after examining the system in more detail: <br>  - Import via csv; <br>  - Import CommerceML; <br>  - Import XML; <br>  - Import through 1C. <br><br>  I‚Äôll say right away that in the end I chose to import goods to the store through 1C, and here‚Äôs why - read below. <br><br>  <b>Import using CommerceML.</b> <br><br>  This method which initially seemed the most promising, on the Internet, there are many different articles about what is CommerceML format and how cool that it is such a uniform format for e-commerce.  It is strangely true that the official site of this format did not open, but honestly found and downloaded the xsd format, found several examples and began to analyze.  The first thing that causes cultural shock is the Russian language in the tag names, but by making a bet on the locality of products and their accessibility for users, it can be assumed that this method is the most suitable for the Russian-speaking population and, accordingly, users.  Then we made some test files with our hands and started testing the fill.  It didn‚Äôt work as we needed and it wasn‚Äôt clear why we couldn‚Äôt pour prices and stock right away. <br>  Through trial and error, we put a test CommerceML file into XML import and a miracle - something started to appear on the site as we wanted, but still could not display prices - only the nomenclature hung on the site.  This podsovyvanie CommerceML file to import XML worked, but it was felt that something is not the same should not be. <br><br>  <b>Mechanisms 1C.</b> <br><br>  Later it turned out that there is a method that almost everyone uses - and this is an unloading from 1C.  Having figured out that uploading consists of two import.xml files and offers.xml and making examples of these files, they started testing them again on the real Bitrix site, alternately loading them into the CommerceML import procedure, then into the XML import procedure, and the desired result was not obtained.  Somewhere on the forums there was a phrase that the procedure for importing CommerceML requires the file format 1.x, and the one we generated was version 2.x, so I started to figure out how to import these import.xml and offers.xml which were obviously valid, but for some reason they didn‚Äôt want to be displayed in the store. <br>  Having clearly understood that it is necessary to learn how to import these two files and knowing that they are generated from 1c, there appeared an understanding that it is necessary to 1c in order to import them.  1C can do this via the web.  1C receives as a parameter a link to a web processor (you can say a service), during the import process 1c transfers files to the site, and then sequentially imports two files.  I already wanted to write a 1c emulation program, but suddenly I came across an interesting extension for Bitrix, which emulates importing from 1c directly from Bitrix!  Bingo, now everything has come together. <br>  Further, the process of setting up the import process from the import.xml files and offers.xml without 1c to the Bitrix-controlled store, without using 1c, will be described. <br><br>  <b>Important steps of the import process in Bitrix mechanism through 1C:</b> <br><br>  1) In order to do <b>without 1C</b> , you should use the magnificent extension - <b>bx_1c_import_lite.php</b> (link to it at the end of the article), copy it to the root and then open it in the browser.  By opening this link we get the ability to import files import.xml and offers.xml. <br><br><img src="https://habrastorage.org/storage1/a5cb6315/68ade1ae/19112c28/1a1610b9.png"><br><br>  2) According to the documentation, the files import.xml and offers.xml should be copied to the uploads / 1c_catalog folder, but in fact it turned out that you need to copy these two files to the root folder 1c_catalog, after creating it. <br><br>  3) Next, you should give the user (in our case, the Administrator) the ability to import ( <b>set access rights</b> ) through the 1c interface, shown in the following picture. <br><br><img src="https://habrastorage.org/storage1/57816dd7/c1611e00/54bb6bf5/fddc6e69.png"><br><br>  4) The next task that needs to be addressed is the <b>display of the catalog</b> , this item actually we did at the very beginning of our research of the bitrix, but it is important here and now.  To display the catalog, select the correct display components, the general setting idea is shown in the following figure: <br>  those.  You need to open the catalog page in the visual editor, then change the visual component of this page to the ‚Äúcatalog‚Äù of the available components, in the figure they are on the right.  After that, dragging the component onto the page, double-clicking on it to start editing, setting all the required settings one by one. <br><br>  5) <b>Properties</b> .  In fact, at this stage, we needed to light on the site more than one thousand properties on the product cards.  And only the Article and Price glowed, although the admin panel showed that there are properties on a product and properties on the information block of the catalog.  Later it turned out that the properties in the bitrix are displayed on the product page only if they set the ‚ÄúMnemonic property code‚Äù.  Putting a couple of hands and making sure that the billing was correct, we made attempts to find out how to set these properties through the import.xml and offers.xml files, but found nothing suitable, after which the following script was written that filled the mnemonic codes in the browser page (it‚Äôs strange that Bitrix has no such functionality out of the box) <br>  <b>Here is the javascript code:</b> <br><br> <code>var elems = document.getElementsByTagName('*'); <br> var t = 0; <br> for(var i=0; i&lt;elems.length; i++) <br> { <br> var el = elems[i]; <br> if (el.type == 'text') <br> { <br> if (el.value == ¬ª) <br> { <br> el.value = 'CATL_' + t; <br> t = t + 1; <br> } <br> } <br> } <br> alert(t);</code> <br> <br>  Actually, this is where the whole process of filling the bitrix ends and we got what was needed, namely, a beautiful product card, with a big picture and the right price, a warehouse and a beautiful display of properties.  An example of one product card is shown in the following image: <br><br><img src="http://habrastorage.org/storage1/582f2dc7/8b356294/3f74b9b4/3081ea05.png"><br><br>  Having received the experience of the first acquaintance with Bitrix, I would like to <b>share my impressions about the system</b> <b>(from the point of view of the integrator and the data provider)</b> : <br>  1) Bitrix has tremendous opportunities right out of the box; <br>  2) Initially, Bitrix is ‚Äã‚Äãa general purpose CMS, and cosmetic settings should be made after installation for use as a store; <br>  3) Bitrix is ‚Äã‚Äãfor business.  A huge number of studios that work with bitrix.  They can always be ordered development and advice; <br>  4) The support of the CommerceML 2.0 format used by Bitrix during the import through 1C is the best of those with which we had to work (and today we support 17 cms), and the implementation itself is just great. <br><br>  In the end, we got a happy customer with a full store and what's important - experience with bitrix.  I hope the article will be useful for all integrating with the bitrix, because it describes the main points that you can not notice immediately when meeting with this product. <br><br>  <b>Links used:</b> <br><br>  <a href="http://habrahabr.ru/company/bitrix/blog/131344/">http://habrahabr.ru/company/bitrix/blog/131344/</a> <br>  <a href="http://dev.1c-bitrix.ru/community/webdev/group/78/blog/1654/">http://dev.1c-bitrix.ru/community/webdev/group/78/blog/1654/</a> <br>  <a href="http://catalogloader.com/">http://catalogloader.com</a> </div><p>Source: <a href="https://habr.com/ru/post/133993/">https://habr.com/ru/post/133993/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../133988/index.html">Gingerbread holds 50.51% of the market for Android smartphones</a></li>
<li><a href="../133989/index.html">System of settings and change of versions of programs: evolution of viable forms</a></li>
<li><a href="../133990/index.html">OpenOffice COM Automation: Reading Clipboard Content</a></li>
<li><a href="../133991/index.html">US court rejected Apple‚Äôs claim against Samsung</a></li>
<li><a href="../133992/index.html">Droider Show # 18. "Apple" is not passed!</a></li>
<li><a href="../133994/index.html">Creating a PostgreSQL Load Tester</a></li>
<li><a href="../133996/index.html">And again about sorting: choose the best algorithm</a></li>
<li><a href="../133997/index.html">TES 5: Skyrim song bard</a></li>
<li><a href="../133998/index.html">Work with binary data using typed arrays</a></li>
<li><a href="../133999/index.html">Wanted.VC Digest # 24</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
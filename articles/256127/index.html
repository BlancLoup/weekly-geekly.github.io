<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Anonymous Functions in Swift</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This publication is an outline of the relevant section of the remarkable book ‚ÄúiOS 8 Programming Fundamentals with Swift‚Äù by Matt Neuburg, O'Reilly, 2...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Anonymous Functions in Swift</h1><div class="post__text post__text-html js-mediator-article">  This publication is an outline of the relevant section of the remarkable book <a href="http://shop.oreilly.com/product/0636920034278.do">‚ÄúiOS 8 Programming Fundamentals with Swift‚Äù by</a> Matt Neuburg, O'Reilly, 2015. An article describing the use of anonymous functions may be interesting for beginners or useful as a cheat sheet for more advanced developers. <br><br>  Consider an example: <br><br><pre><code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">whatToAnimate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> {<span class="hljs-comment"><span class="hljs-comment">//self.myButton     Self.myButton.frame.origin.y += 20 } func whatToDoLater(finished:Bool) { printLn(‚Äúfinished: \(finished)‚Äù) } UIView.animateWithDuration( 0.4, animations: whatToAnimate, completion: whatToDoLater)</span></span></code> </pre> <br>  There is some oddity in this section of code.  I declare whatToAnimate and whatToDoLater functions only to transfer these functions to the next line of code.  And indeed, the names of these functions are no longer needed for anything ‚Äî neither the names nor the functions will ever be reused again.  It would be good to transfer only the bodies of these functions, without the need to declare their names. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Such functions are called anonymous, they have the right to exist and are often used in Swift. <br><a name="habracut"></a><br><h3>  Creating an anonymous function </h3><br>  To create an anonymous function, we do two things: <br><ol><li>  Create a function body, including surrounding curly braces, but without a function declaration. </li><li>  If necessary, in the first line inside the curly brackets, after the in command, we describe the function argument list and the type of the returned variable. </li></ol><br>  Consider an example of how to convert a function to an anonymous one.  Source Function Code: <br><br><pre> <code class="hljs swift"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">whatToAnimate</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-type"><span class="hljs-type">Self</span></span>.mybutton.frame.origin.y += <span class="hljs-number"><span class="hljs-number">20</span></span> }</code> </pre><br>  Here is an example of an anonymous function that performs the same task.  We moved the list of arguments and the return type inside the curly braces: <br><br><pre> <code class="hljs rust"> { () -&gt; () <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.myButton.frame.origin.y += <span class="hljs-number"><span class="hljs-number">20</span></span> }</code> </pre><br>  Now that we know how to create an anonymous function, let's see how we can use it.  In our call to animateWithDuration, the point at which we call functions is the place where we pass the arguments to this function.  So, we can create an anonymous function right at the same point, like this: <br><br><pre> <code class="hljs rust"> UIView.animateWithDuration(<span class="hljs-number"><span class="hljs-number">0.4</span></span>, animations: { () -&gt; () <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.myButton.frame.origin.y += <span class="hljs-number"><span class="hljs-number">20</span></span> } , completion: { (finished:Bool) -&gt; () <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> printLn(‚Äúfinished: \(finished)‚Äù) })</code> </pre><br>  Anonymous functions are very often used in Swift, so you should make sure that we easily read and write such code.  Anonymous functions are so common and so important that there are some abbreviations used in their creation.  Consider such cases. <br><br><h3>  Omit the return type </h3><br>  If the compiler already knows what type of variable the function returns, then we can omit the arrow operator, the type and specification of the variable. <br><br><pre> <code class="hljs objectivec"> <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>.animateWithDuration(<span class="hljs-number"><span class="hljs-number">0.4</span></span>, animations: { () <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.myButton.frame.origin.y += <span class="hljs-number"><span class="hljs-number">20</span></span> }, completion: { (finished:Bool) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> printLn(‚Äúfinished: \(finished)‚Äù) })</code> </pre><br><br><h3>  We omit the string with the in operator when there are no arguments in it. </h3><br>  If an anonymous function takes no arguments and if the type of the returned variable can be omitted, then the line with the in command can be omitted entirely: <br><br><pre> <code class="hljs objectivec"> <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>.animateWithDuration(<span class="hljs-number"><span class="hljs-number">0.4</span></span>, animations: { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.myButton.frame.origin.y += <span class="hljs-number"><span class="hljs-number">20</span></span> }, ompletion: { (finished:Bool) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> printLn(‚Äúfinished: \(finished)‚Äù) })</code> </pre><br><br><h3>  Omitting argument types </h3><br>  If an anonymous function takes arguments, and their types are known to the compiler, then these types can be omitted: <br><br><pre> <code class="hljs objectivec"> <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>.animateWithDuration(<span class="hljs-number"><span class="hljs-number">0.4</span></span>, animations: { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.myButton.frame.origin.y += <span class="hljs-number"><span class="hljs-number">20</span></span> }, completion: { (finished) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> printLn(‚Äúfinished: \(finished)‚Äù) })</code> </pre><br><br><h3>  Omit brackets </h3><br>  If argument types can be omitted, then parentheses around these arguments can be omitted: <br><br><pre> <code class="hljs objectivec"> <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>.animateWithDuration(<span class="hljs-number"><span class="hljs-number">0.4</span></span>, animations: { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.myButton.frame.origin.y += <span class="hljs-number"><span class="hljs-number">20</span></span> }, completion: { finished <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> printLn(‚Äúfinished: \(finished)‚Äù) })</code> </pre><br><br><h3>  We omit the line with in, even if it has arguments </h3><br>  If the return type can be omitted, and if the argument types are known to the compiler, you can omit the string with in and refer to the arguments directly from the body of the anonymous function using the names $ 0, $ 1, and so on in order: <br><br><pre> <code class="hljs objectivec"> <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>.animateWithDuration(<span class="hljs-number"><span class="hljs-number">0.4</span></span>, animations: { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.myButton.frame.origin.y += <span class="hljs-number"><span class="hljs-number">20</span></span> }, completion: { printLn(‚Äúfinished: \($<span class="hljs-number"><span class="hljs-number">0</span></span>)‚Äù) })</code> </pre><br><br><h3>  Omit the argument names </h3><br>  If your anonymous function does not need arguments, then you can omit the arguments, replacing their names with an underscore in the line with in: <br><br><pre> <code class="hljs objectivec"> <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>.animateWithDuration(<span class="hljs-number"><span class="hljs-number">0.4</span></span>, animations: { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.myButton.frame.origin.y += <span class="hljs-number"><span class="hljs-number">20</span></span> }, completion: { _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> printLn(‚Äúfinished!‚Äù) })</code> </pre><br><br>  Note.  If your anonymous function accepts arguments, you must use them anyway.  You can omit the string with in and use arguments for their names like $ 0, $ 1 and so on, or you can save the string with in and replace the arguments with an underscore, but you cannot omit the string with in at the same time and not use the arguments their names are $ 0, $ 1.  If you do this, your code will not be compiled. <br><br><h3>  We omit the names of the arguments of the calling function. </h3><br>  If your anonymous function is the last parameter that is passed in the call, then you can close the call with a parenthesis to the last parameter, and then put the body of the anonymous function without specifying the names of the arguments.  This method is called the trailing function. <br><br><pre> <code class="hljs objectivec"> <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>.animateWithDuration(<span class="hljs-number"><span class="hljs-number">0.4</span></span>, animations: { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.myButton.frame.origin.y += <span class="hljs-number"><span class="hljs-number">20</span></span> }) { _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> printLn(‚Äúfinished!‚Äù) })</code> </pre><br><br><h3>  We omit the brackets of the calling function. </h3><br>  If you use a closing function and the function you are calling does not accept any other parameters besides the function you are passing, you can omit empty brackets in the call.  For example, I will declare and call another function: <br><br><pre> <code class="hljs swift"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doThis</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(f: </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span> -&gt; ()) { f() } doThis { <span class="hljs-comment"><span class="hljs-comment">//    printLn(‚ÄúHello‚Äù) }</span></span></code> </pre><br>  This is the only situation in which you can omit the parentheses in the function call. <br><br><h3>  Omit the keyword return </h3><br>  If the body of an anonymous function consists of only one statement and this statement consists of a return value with the keyword return, then the keyword return may be omitted.  In other words, in a situation where we expect the function to return a value, if the body of the anonymous function consists of only one statement, Swift implies that this statement is an expression whose value will be returned from the anonymous function: <br><br><pre> <code class="hljs swift"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sayHello</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">String</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ‚Äú<span class="hljs-type"><span class="hljs-type">Hello</span></span>‚Äù } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">performAndPrint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(f: </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">String</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> s = f() printLn(s) } performAndPrint { sayHello() <span class="hljs-comment"><span class="hljs-comment">// return sayHello()   performAndPrint }</span></span></code> </pre><br><br><h3>  Practical use </h3><br>  Consider an example.  We have an array of variables and we need to get a new array consisting of the same values ‚Äã‚Äãmultiplied by 2, called using the map method.  The array method map takes a function that takes an argument and returns a variable of the same type as the array element.  Our array consists of Int variables, therefore we will pass to the map method a function that takes an Int parameter and returns an Int.  We could write an entire function, such as <br><br><pre> <code class="hljs swift"> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr = [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doubleMe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i:Int)</span></span></span></span> -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i*<span class="hljs-number"><span class="hljs-number">2</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr2 = arr.<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>(doubleMe)</code> </pre><br>  However, this approach does not fully utilize Swift.  We don't need the doubleMe function anywhere else, so it may well become anonymous.  The type of variable it returns is known, so we don‚Äôt need to specify it.  There is only one parameter, and we are going to use it, but we do not need a string with in if we refer to the parameter as $ 0.  The body of our function consists of a single statement, and this is a return, so that we can omit return.  And the map function does not accept any other parameters, so we can omit the parentheses and immediately after the anonymous function specify the name: <br><br><pre> <code class="hljs swift"> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr = [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr2 = arr.<span class="hljs-built_in"><span class="hljs-built_in">map</span></span> {$<span class="hljs-number"><span class="hljs-number">0</span></span>*<span class="hljs-number"><span class="hljs-number">2</span></span>}</code> </pre><br>  If you start using anonymous features, you will find that you often take advantage of the benefits they provide.  In addition, you will often reduce the amount of code (but not to the detriment of the code) by putting entire anonymous functions on a single line with a function call. </div><p>Source: <a href="https://habr.com/ru/post/256127/">https://habr.com/ru/post/256127/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256109/index.html">Ways to organize CSS-code</a></li>
<li><a href="../256111/index.html">Symphony of self-winding</a></li>
<li><a href="../256115/index.html">Development Tools HL7 (HL7v2, HL7v3, CDA)</a></li>
<li><a href="../256117/index.html">Some interesting and useful things for web developer # 42</a></li>
<li><a href="../256123/index.html">The digest of interesting materials from the world of Drupal # 8</a></li>
<li><a href="../256129/index.html">Creating a local network using the existing 220v power network</a></li>
<li><a href="../256131/index.html">The digest of events from the world D</a></li>
<li><a href="../256133/index.html">Apple Watch's first successes, App Annie and Tapjoy reports, Europe vs. Google - and other news of the week for a mobile developer</a></li>
<li><a href="../256137/index.html">API and SOA Management</a></li>
<li><a href="../256139/index.html">ASA5525-X + MS CA Windows Server 2012R2 - two-factor authentication</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
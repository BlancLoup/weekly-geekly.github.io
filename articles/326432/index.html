<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Windows 10 Creators Update: What's new in Bash / WSL and Windows Console</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When Windows 10 Anniversary Update (AU) was released, the Windows Subsystem for Linux (WSL) subsystem was still far from complete and suffered from ma...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Windows 10 Creators Update: What's new in Bash / WSL and Windows Console</h1><div class="post__text post__text-html js-mediator-article">  When Windows 10 Anniversary Update (AU) was released, the Windows Subsystem for Linux (WSL) subsystem was still far from complete and suffered from many incompatibilities, especially with popular development tools like node.js, Java, etc. <br><br>  However, it was important to transfer this amazing new feature into the hands of real users, so that we could learn from them - from YOU - what exactly WSL needs, what works, what doesn't work, etc. <br><br>  And the community responded! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Thus, this new release of the Windows subsystem for Linux and the Bash console was created by you and for you! <br><a name="habracut"></a><br>  On behalf of the WSL and Console development teams, I want to express my sincere thanks to everyone who tried Bash / WSL for the last 12+ months, and especially to those of you who documented problems in our <a href="https://github.com/microsoft/bashonwindows">GitHub repository</a> , contacted <a href="https://twitter.com/richturn_ms">me on Twitter</a> , voted for suggestions in <a href="https://wpdev.uservoice.com/forums/266908-command-prompt">our UserVoice</a> , asked questions on <a href="http://stackoverflow.com/questions/tagged/wsl">StackOverflow</a> , <a href="http://askubuntu.com/questions/tagged/wsl">AskUbuntu</a> , <a href="https://www.reddit.com/r/bashonubuntuonwindows/">Reddit</a> , on our <a href="https://blogs.msdn.microsoft.com/commandline/">Command-Line</a> <a href="https://blogs.msdn.microsoft.com/wsl/">blog, WSL Team blog</a> and everywhere. <br><br>  Significant improvements in Bash / WSL and Windows Console, which came out with Windows 10 Creators Update, were largely due to you! <br><br><h1>  What's new in WSL? </h1><br>  During the development of Windows 10 Creators Update (CU), the WSL development team implemented hundreds of fixes and improvements, most of which are listed in <a href="https://msdn.microsoft.com/en-us/commandline/wsl/release_notes">WSL release notes</a> .  We highlighted some of the most notable features of Console and WSL in our <a href="https://blogs.msdn.microsoft.com/commandline/">Command-Line blog</a> .  We thought that a summary list of the most important features and improvements would be useful. <br><br>  So, here's what's new in Bash / WSL and the Console in Windows 10 Creators Update: <br><br><h2>  Greater compatibility </h2><br>  The main goal of Win10 CU was to drastically improve the depth and completeness of WSL compatibility with the <a href="https://en.wikipedia.org/wiki/Linux_kernel_interfaces">Linux System Call Interface (SCI)</a> kernel interfaces.  By expanding and improving our system call implementations, we increased the number of tools, platforms, execution tools, and other things that our users need to run. <br><br>  Result?  In Win10 CU, most popular development tools work as expected, including: <br><br><ul><li>  <b>Key tools</b> : apt, sed, grep, awk, top, tmux, ssh, scp, etc. </li><li>  <b>Shells</b> : Bash, zsh, fish, etc. </li><li>  <b>Development tools</b> : vim, emacs, nano, git, gdb, etc. </li><li>  <b>Languages ‚Äã‚Äãand platforms</b> : Node.js and npm, Ruby and Gems, Java and Maven, Python and Pip, C / C ++, C # and .NET Core and Nuget, Go, Rust, Haskell, Elixir / Erlang, etc. </li><li>  <b>Systems and services</b> : sshd, Apache, lighttpd, nginx, MySQL, PostgreSQL </li><li>  And much more. </li></ul><br>  <i><b>Note</b> : Some of you can go ahead and fearlessly launch applications and X / GUI desktops on WSL.</i>  <i>Although we do not explicitly support WSL X / GUI applications / desktops, we do not in any way block or prevent their launch.</i>  <i>So if you manage to launch your favorite editor, desktop, browser, etc., then great.</i>  <i>But keep in mind that we are still concentrating all our efforts on ensuring really high-quality work of the command line so that you can run in the console all the development tools you need.</i> <br><br><h2>  Ubuntu support 16.04 </h2><br>  While Win10 Anniversary Update came with support for Ubuntu 14.04, in the new Win10 CU update, WSL now supports Ubuntu 16.04.  All new instances of Bash installed on Win10 CU will now install Ubuntu 16.04. <br><br>  If you want to know which version of Ubuntu works for you, type the following command in the Bash console on Ubuntu in the Windows Console: <br><br><pre><code class="bash hljs">$ lsb_release -a No LSB modules are available. Distributor ID: Ubuntu Description: Ubuntu 16.04.2 LTS Release: 16.04 Codename: xenial</code> </pre> <br>  <b>Important note</b> : Existing Ubuntu 14.04 instances are NOT automatically updated as of 16.04.  <b>You need to manually update your instance on Ubuntu 16.04 in one of two ways</b> : <br><br><ol><li>  Removal and replacement (recommended) </li><li>  In-place upgrade </li></ol><br><h3>  Removal and replacement </h3><br>  If you are currently running an Ubuntu 14.04 instance, then we recommend removing it and replacing it with a fresh new Ubuntu 16.04 instance. <br><br>  WARNING: <b>The following instructions will destroy your existing distribution and all files that you stored in the Linux file system</b> .  Therefore, <font color="red"><b>be sure to copy / transfer any Linux files you want to save</b></font> , for example, to the Windows folder (/ mnt / c / temp / wslbackup / ...) BEFORE deleting and replacing your instance! <br><br>  To remove and reinstall your Ubuntu instance, run the following commands from the Cmd / PowerShell console: <br><br><pre> <code class="hljs tex">C:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">&gt;</span></span></span></span> lxrun /uninstall /full /y ... C:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">&gt;</span></span></span></span> lxrun /install</code> </pre> <br>  The <code>lxrun /install</code> team will then download and install a fresh new copy of Ubuntu 16.04 on your machine. <br><br><h3>  In-place upgrade </h3><br>  If your Ubuntu instance has a particularly complex configuration, you <i>can</i> upgrade it in place, although the result may not be optimal. <br><br>  If you want to upgrade your instance in place, use <a href="https://help.ubuntu.com/lts/serverguide/installing-upgrading.html">the Ubuntu instructions</a> to update your existing instance: <br><br><pre> <code class="bash hljs">$ sudo <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>-release-upgrade</code> </pre> <br><h2>  Ifconfig and Network Connection List Support </h2><br>  One of the biggest drawbacks of Win10 AU was the lack of a list of network connections, which prevented tools like ifconfig, gulp, npm, and others from working correctly. <br><br>  This has been fixed in the Win10 CU version, so you can use ifconfig to list connections and explore the configuration of available network adapters: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cc0/b58/87f/cc0b5887f804b823adb8c79af219225a.png"><br><br><h2>  Network Ping and ICMP Support </h2><br>  Another problem that Win10 AU users often faced was the inability of network administrators to ping end network equipment.  This is now fixed in Win10 CU: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3c5/b7b/78c/3c5b7b78c282e18d3ffb2c3027cd69bb.png"><br><br><h2>  Support for file change notifications (INOTIFY) </h2><br>  Another popular improvement was the ability for tools to register for file change notifications.  This is essential functionality that is often used by developers for the web, Node.js, Ruby and Python, and many others. <br><br>  For example, if you are working on the node.js website, then after editing the source code vim, Emacs, Sublime Text, VS Code, etc., you may want the server to download updated sources each time you save, so that when you update the browser instantly displayed. <br><br>  Now you can do it!  WSL supports <a href="http://man7.org/linux/man-pages/man7/inotify.7.html">inotify</a> , with which applications can register for notifications of changes in the file system, which then become triggers for actions, such as rebuilding a project and restarting a local web server.  This works for both DrvFS and the LxFs file system. <br><br>  It is important that these file change notifications are now supported on the Windows file system.  So if you edit the project source code, which is stored in the Windows file system, using an editor with a Windows GUI, such as VSCode, Visual Studio, SublimeText, Notepad ++, etc., and at the same time, node.js works in the environment Bash / WSL for local output of the site, then all changes will normally appear in it immediately after the change in the source file. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ea/894/e2e/1ea894e2e55329a57484e9b8cf80084e.png"><br><br><h2>  Compatibility Windows &lt;-&gt; Linux </h2><br>  The main goal of creating WSL was to reduce the ‚Äúfeel‚Äù when you run Windows tools along with command line tools and Linux environments.  When we released WSL in Windows 10 AU, we put Linux and Windows next to each other, but there was still a big ‚Äúgap‚Äù between them - although both systems could share some files, each of the environments was quite isolated from the other. . <br><br>  Users often said that they want to be able to run Windows applications and Bash consoles, and run Linux and Windows applications.  So we added this feature! <br><br>  In Windows 10 Creators Update, you can run Windows applications and tools from the Bash console. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/57f/3d1/da7/57f3d1da7c141e7bcc618386462909fc.png"><br><br>  ... and you can run Linux binaries / commands / scripts from Windows: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0b4/433/769/0b4433769dc8f43230e6ce56ad819f97.png"><br><br>  This feature is described in more detail in a <a href="https://blogs.msdn.microsoft.com/commandline/2016/10/19/interop-between-windows-and-bash/">separate blog post</a> . <br><br><h2>  UNIX and Netlink socket enhancements </h2><br>  Some aspects of UNIX sockets and Netlink sockets were not supported in Anniversary Update. <br><br>  Creators Update in WSL adds UNIX datagram sockets and Netlink sockets, options and properties, so many modern tools will receive various forms of interprocess communication under WSL. <br><br>  See the <a href="https://msdn.microsoft.com/en-us/commandline/wsl/release_notes">WSL Release Notes for</a> more details. <br><br><h2>  IPv6 and TCP socket enhancements </h2><br>  When preparing Creators Update, the WSL and Windows Core Networking teams worked together to implement WSL support for several additional options and TCP and IPv6 socket properties.  This gives expanded support for IPv6 and others to a wide range of tools and technologies that rely on the various functions of network sockets. <br><br>  See the <a href="https://msdn.microsoft.com/en-us/commandline/wsl/release_notes">WSL Release Notes for</a> more details. <br><br><h2>  Various WSL enhancements </h2><br>  The WSL enhancements listed above are only a small selection of the most visible and important changes, but Creators Update includes hundreds of other WSL enhancements.  Let us mention some more of them, and do not forget to study <a href="https://msdn.microsoft.com/commandline/wsl/release_notes">release notes</a> for additional details. <br><br><ul><li>  Linux processes are set up for the enumeration infrastructure (enumeration) in the Windows Process, so that they are displayed in TaskManager, etc. </li><li>  Added functions for <a href="https://blogs.msdn.microsoft.com/wsl/2016/11/01/wsl-antivirus-and-firewall-compatibility/">antiviruses and firewalls to understand Linux processes</a> . </li><li>  Memory sharing support, as required for PostgreSQL and other tools. </li></ul><br><h1>  Windows Console and command line enhancements </h1><br>  The Windows Console is one of the most fundamental parts of the entire operating system and has been part of Windows for several decades.  About two years ago, a new Windows Console development team was formed, and it made the most significant restructuring of the Windows console in more than 30 years! <br><br>  One of the main reasons for the cardinal upgrade of the console was that it should display the output of Linux command line tools and applications running under WSL.  The development team has also implemented some of the much-needed upgrades and changes in the internal structure of the console, which will make it much faster and easier to roll out new features in the future. <br><br>  So, what's new in the console in Win10 CU? <br><br><h2>  Many improvements to VT control sequences </h2><br>  Since the console was originally created without * NIX support, it could not handle various behaviors and output format codes ( <a href="https://en.wikipedia.org/wiki/ANSI_escape_code">ANSI and VT escape sequences</a> ) generated by tools and * NIX command line applications. <br><br>  Now the problem is resolved. <br><br>  In Windows 10 Anniversary Update, the console was finalized, and it was able to handle the most common VT sequences, allowing you to correctly display most of the text with simple formatting.  However, some advanced scripts were not supported. <br><br>  In the new version of Windows Console, support for VT sequences was further expanded to correctly handle more complex VT sequences, so the console now supports many advanced features of the complex text-based interface <a href="http://www.vim.org/">vim</a> , <a href="http://www.gnu.org/software/emacs/">emacs</a> , <a href="http://midnight-commander.org/">Midnight Commander</a> , <a href="https://tmux.github.io/">tmux</a> , <a href="http://hisham.hm/htop/">htop,</a> and other programs. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d44/85c/c7a/d4485cc7ae89cd4cfe25e6a09b100149.png"><br><br><h2>  24-bit color support </h2><br>  Another common community request was console support for more than 16 colors.  Support for 256 colors and more is very important when working with modern increasingly complex and rich command-line tools, shells, etc. <br><br>  In Win10 Creators Update, the console has been updated and supports full, beautiful 24-bit color! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2be/6b9/78c/2be6b978c284e19d0df499f74b6b82ce.png"><br><br>  For details, see the corresponding <a href="https://blogs.msdn.microsoft.com/commandline/2016/09/22/24-bit-color-in-the-windows-console/">blog post with the announcement of 24-bit color support</a> . <br><br><h2>  Mouse support </h2><br>  The number of rich text UIs is constantly growing, and users want mouse support for tools like Midnight Commander, Htop, and others, so we added mouse support in Win10 CU. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/867/ada/32d/867ada32d659d7f2f129ad386d618a1e.png"><br>  <i>Artistic rendering of the author for illustration purposes</i> <br><br><h2>  Symbolic links in Windows without administrator rights </h2><br>  Symbolic links (symlinks) are an important tool that is comprehensively used under Linux, but not so actively under Windows, because it requires administrator rights to create symbolic links.  The console, in which symbolic links are created, had to be upgraded to admin rights - which users rarely do. <br><br>  In the Windows 10 Creators Update version, the restriction on creating symbolic links under any rights is removed for users who have <a href="https://docs.microsoft.com/en-us/windows/uwp/get-started/enable-your-device-for-development">activated developer mode</a> , so that symbolic links are created from any console. <br><br>  See the <a href="https://blogs.windows.com/buildingapps/2016/12/02/symlinks-windows-10">announcement</a> for more details on symbolic links, with examples. <br><br><h1>  What's next? </h1><br>  So, are we done?  Nooo!  Not even close finished! <br><br>  For both WSL and Windows Console, there is a whole line of future improvements, new features and capabilities, which we really want to work on. <br><br>  In addition, although Console and WSL are significantly improved in Creators Update, it is important to note that WSL here retains beta status, even though we cut some rough edges and sharp corners, and also improved some of the core functionality and features. <br><br>  We continue to move forward with many planned improvements and great new features.  Expect many interesting things in future releases of Windows 10. If you want to be among the first to get access and see the improvements planned for the next release of Windows 10, then <a href="https://insider.windows.com/">participate in the Windows Insider program</a> and set the Windows Insider Update Ring setting to fast mode. <br><br>  As always, <b>please leave your feedback</b> .  Let me know if you find problems when using WSL, in <a href="https://github.com/microsoft/bashonwindows">the WSL repository on GitHub</a> , feel free <a href="https://twitter.com/richturn_ms">to ask questions on Twitter</a> , <a href="https://wpdev.uservoice.com/forums/266908-command-prompt">suggest new features via UserVoice</a> , have great discussions on <a href="http://reddit.com/r/bashonubuntuonwindows/">Reddit</a> , <a href="http://stackoverflow.com/questions/tagged/wsl">StackOverflow</a> , <a href="https://superuser.com/questions/tagged/windows-linux-subsystem">SuperUser</a> and other sites, and leave comments on the <a href="https://blogs.msdn.microsoft.com/commandline/">Command-Line</a> blogs and the <a href="https://blogs.msdn.microsoft.com/wsl/">WSL Team</a> . <br><br>  Forward! </div><p>Source: <a href="https://habr.com/ru/post/326432/">https://habr.com/ru/post/326432/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../326418/index.html">Open machine learning course. Topic 8. Gigabyte training with Vowpal Wabbit</a></li>
<li><a href="../326420/index.html">Overview of the Citrix XenServer 7.1 Hypervisor Innovations</a></li>
<li><a href="../326424/index.html">Playstation VR games that can already be played</a></li>
<li><a href="../326428/index.html">node.js beats binary data when working on http because of the default encoding - we treat and hate</a></li>
<li><a href="../326430/index.html">Two vacancies for the price of one in April on My Circle</a></li>
<li><a href="../326434/index.html">PHDays Online Contests: Yes CTF</a></li>
<li><a href="../326436/index.html">Why large databases do not work as you want, or about the unfulfilled dreams of SQL queries</a></li>
<li><a href="../326438/index.html">Moscow Workshops ACM ICPC: how Fiztech created an international camp</a></li>
<li><a href="../326440/index.html">Failover Evolution in PostgreSQL: Replication Phase</a></li>
<li><a href="../326442/index.html">Asynchronous functions 101</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
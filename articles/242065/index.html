<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Organization of cellular communication in the subway - the experience of St. Petersburg</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Typical antenna placement on the tunnel arch 


 In transition 

 For us, communications workers, one of the complex features of the St. Petersburg me...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Organization of cellular communication in the subway - the experience of St. Petersburg</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/6af/a24/b92/6afa24b92f734ff9a51535d53224d626.jpeg"><br>  <i>Typical antenna placement on the tunnel arch</i> <br><br><img src="https://habrastorage.org/files/d92/34f/03d/d9234f03d3e94144acbcf1874242c4e1.jpeg"><br>  <i>In transition</i> <br><br>  <b>For us, communications workers, one of the complex features of the St. Petersburg metro is the presence of closed-type stations</b> , the so-called ‚Äúhorizontal elevators‚Äù.  At such stations, the train pulls up to the platform, ‚Äújoins‚Äù with the train‚Äôs doors to the platform‚Äôs doors, then a pair of doors simultaneously open. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Such metal doors protect not only from monsters from hauls and suicides, but also perfectly shield the cellular signal.  Therefore, when opening a platform to an uplink base station, several hundreds of subscribers simultaneously begin to connect, and a kind of DDoS attack is obtained. <br><br>  The second problem is long escalators, which often go not to the lobby, but through a small hall to the ‚Äúdeaf‚Äù underground passage. <a name="habracut"></a><br><br><img src="https://habrastorage.org/files/5c4/472/310/5c4472310fe34824922126c31bfe7c32.png"><br>  <i>Fragment of the scheme</i> <br><br><h4>  General situation </h4><br>  Cellular communication in the subway is needed, and is needed quite strongly.  Subways of various cities are usually closed strategic objects, so they have quite strict restrictions on the possibilities of organizing communications, installation, and so on.  In our case, there is one provider in the metro that provides a transport channel and one certified contractor engaged in installation work and maintenance.  This is quite a favorable situation, because these two companies have all the necessary tolerances and can carry out the same emergency work very quickly.  In other cities there may be problems with the fact that for any movement you need to get approval for 5-6 days.  We have routine maintenance are coordinated much faster, it is possible to quickly carry out repairs. <br><br>  Communication in the subway is not implemented as in the city.  The city uses the so-called macro cells - powerful devices designed for many subscribers over a large area.  The subway stations have the following radio planning features: <br><ol><li>  Coverage areas, as a rule, are quite small - this is a platform, transitions and escalators. </li><li>  These areas are often elongated (for example, a high escalator), and the possibility of mounting can only be on one side of the object. </li><li>  Subscribers in rush hour in a cell can reach as much as in the "big" cell on the surface. </li><li>  There are almost no difficulties with interference and intersections with neighboring cells - there are no corny neighbors except for the junction point with the surface.  The exception is open hauls, but we have very few of them. </li><li>  In many places, people are close enough to the radiating equipment, so special attention is paid to its security. </li><li>  In the past six months, the demand of metro subscribers for Internet traffic has sharply increased. </li><li>  Our metro is deep enough: unlike the ‚Äúshallow‚Äù European subway, there are almost no situations when urban cells can be used to cover platforms or when their signal ‚Äúbreaks through‚Äù into a stage or junction. </li></ol><br><br><img src="https://habrastorage.org/files/0f8/d26/9ea/0f8d269ea3fa4a5599ea2dee63d0a724.jpeg"><br>  <i>Antenna at the escalator</i> <br><br>  Due to the peculiarities of our metro, an antenna cable was laid in the tunnels (in fact, a long piece of hardware with antenna holes) To organize communication in tunnels, we need access to this cable, which we do not have yet, but it may appear in the future. <br><br><h4>  Background </h4><br>  The first cycle of works was carried out in 2004‚Äì2005: then 2G stations and repeaters were installed at the metro station to cover the crossings.  The control modules of the base stations themselves (everything that was not antennas) were installed in special technical rooms (server rooms) at the stations - you probably saw these always forbidden doors at the edge of the platform or in the crossings.  One server is used by all four city operators, and the subway contractor is responsible for its operation.  If you need to touch something with your hands - our specialist is assigned a special attendant who opens all the doors and monitors the work. <br><br>  At the beginning of this year we began a large-scale replacement of equipment in St. Petersburg.  One of the main points is the transition from one vendor to another.  The first new stations of the 3G station were tested in the test zone, then we installed one at the station and conducted a beta test, and then upgraded all the base stations of the metro.  In just three months, the new equipment was broadcast on 64 stations. <br><br>  As a result, the following work was done: <br><ol><li>  The repeaters were removed and replaced with regular sectors. </li><li>  2G stations are dismantled and replaced by 2G-3G stations. </li><li>  The transport channel has been expanded to 30 Mbps per station.  We have the opportunity to expand it further as necessary, but in practice this is enough for voice and surfing.  If you are alone at the station and are standing near the antenna, you can get 42 Mbit / s under the standard, but in fact there will be about 30 due to transport restrictions.  If a lot of people - respectively, the channel is divided between them.  At the same time, we carried out a set of works on reserving channels for our part - we are talking about all the data transfer points to our core network, which are not dependent on the metropolitan provider.  In particular, for example, we remove separately the data of 2G and 3G stations, which, in fact, gives some protection against failure of the feeder or unit at the BS.  The remaining failures are connected with transport, which does not depend on us, and concerns all operators at once. </li><li>  At the same time reconfigured the BS, in more detail below. </li><li>  We put a reserve in case of connection to the radiating cable in the sections - when it can be used, we will be able to raise the service in a matter of days, without changing the BS hardware. </li></ol><br><br><img src="https://habrastorage.org/files/ccb/6ad/403/ccb6ad403f1f4e27bc71bd71274b21bc.jpeg"><br>  <i>Installation of 19 ‚Äùrack and combiner unit.</i> <br><br><img src="https://habrastorage.org/files/c31/4b1/16b/c314b116b5f947f68c73f3f28ecb12a9.jpeg"><br>  <i>Installation of multi-band operators combiners.</i> <br><br><img src="https://habrastorage.org/files/85f/2a2/35f/85f2a235f92a4c7baec87c18c62a5094.jpeg"><br>  <i>Installation of blocks RRU 900 and 2100 ranges</i> <br><br><img src="https://habrastorage.org/files/5cd/287/267/5cd28726797b47adbde3780323cf1068.png"><br><br><h4>  Installation </h4><br>  We practically did not change positions, so the principles of installation remained the same as in 2004-2005: <br><ul><li>  Platforms are covered with antennas located on the arch of the tunnel.  By the way, nothing can be installed in the tunnel itself: a special train runs there that measures the dimensions - it will bring down everything that sticks out. </li><li>  Escalators are covered with antennas on the arch below, pointing upwards.  The exception is especially long escalators like the position on the Admiralteyskaya (the deepest station of the St. Petersburg metro today) - there the coating is made from two sides. </li><li>  Transitions - from one of the points, most often - closest to the server end. </li><li>  Equipment BS is located at the stations in the technical premises in the usual 19-inch racks, most often - two units. </li><li>  Transport - 30 Mbit / s Ethernet. </li></ul><br><br><img src="https://habrastorage.org/files/e4f/f34/819/e4ff348196154c12b282fb2ff4db0f3f.png"><br><br><img src="https://habrastorage.org/files/a3a/e3a/77b/a3ae3a77b0c4498baee468ca0ab6d7c7.jpeg"><br>  <i>19 ‚Äùrack with installed base station units, power supply and transport router.</i> <br><br>  At the same time, as in the usual procedure for starting the BS on the surface, when the radiation level is measured several times for different organizations, there is a special procedure in the metro.  Not only the radiation of the sector is checked, but the total electromagnetic flux from all emitters (there can be 4-8 of them in one place, using a pair of antennas per operator). <br><br>  In fact, this means another difficult thing for us - 3G stations give about 2 watts of output power, which means a small signal propagation zone.  Here we meet the problem of horizontal elevators.  Fortunately, the 2G-signal has the best penetrating power, and is able to pass into the tunnel for some distance (pay attention to the gaps under the doors on the platform - just 2G shines in them). <br><br>  When the train comes to the station, first, some subscribers get 2G, then the rest ‚Äúbreak‚Äù to the 3G station, interrupting the uplink, then due to interference, some fall off or go to 2G, and only 15-20 seconds (or up to 30 seconds rush hour) all are connected.  This is exactly the problem of simultaneous requests, and not BS resources ‚Äî there are plenty of them there, given the possible transition to LTE in the future. <br><br><img src="https://habrastorage.org/files/57c/bb9/8c3/57cbb98c33ff46ed8ec5cedc2fce3a8a.png"><br>  <i>The change in traffic by day for 2 months of summer in MB is blue by day, with black - averaged.</i> <br><br>  When replacing, the BS manufacturer‚Äôs engineers rang the entire feeder path, measuring the SWR and if necessary the contractor replaced the interconnecting cables.  They also hammered the "pig" settings for the subway, which we then reconfigured for each specific station.  For the most part, the work is automated, but at first it was necessary to dig deeper.  The fact is that on alpha and beta tests we did not reveal one specific problem that occurs only during rush hour loads.  I had to tinker a bit with transport equipment to solve this controller problem - but, in general, following two months of operation, everything went smoothly.  We were waiting for big surprises from the new iron. <br><br><h4>  Seamless handover on urban macro </h4><br>  Urban cells ‚Äúblow out‚Äù most often into the lobby like in a normal room, and the signal can normally be caught right up to the beginning of the escalator.  If the signal power from the bottom of the mini-cell and the signal from the macro cell is enough, they quite normally transfer the subscriber to each other via a standard handover.  By the way, we have cells from different manufacturers, but, surprisingly, there were no problems with the configuration - there is a standard protocol, and there were no surprises. <br><br>  There are situations when the signal strength for handover is not enough.  These are the stations where the exit is made to the underpass: the transition architecture itself is designed to shield the signal at cellular frequencies.  In this case, of course, there will be a network loss for a few seconds while the subscribers are leaving.  Colleagues in other cities sometimes decide whether to install mini-hundred or additional sectors in the lobbies or passages, but in St. Petersburg this is not the case, at least for now. <br><br>  So, when we updated the BS, we did the standard indoor tests.  Based on the tests, the neighbors were removed or added by hands, which made it possible to achieve a very high-quality seamless transition. <br><br>  At peak hours, the number of subscribers usually doubles from the normal cell load, and at some points, such as subway exits, the density of subscribers is very high.  Colleagues in Moscow in some positions have solutions that turn the antenna of the macrocell to the exit of the metro at 9-10 am and 18-19 pm, and during the day they raise the antennas a little higher, on traffic jams.  We do not use such motors.  Electric tilt angle control is possible (there are motors), but programmed changes in the angle for the CNN metro are not performed. <br><br>  Drive tests are carried out regularly, as the network ‚Äúfrom above‚Äù changes.  According to the results often come optimized parameters.  The visiting team writes us a service note about what needs to be changed, our scripts analyze the note and collect configs, plus immediately wrap them in batch files.  It looks like this: in the afternoon, engineers go for tests, in the evening they issue a memo, in the morning we come to the office and see the finished packages on the patch.  Check the parameters and just roll on the BS. </div><p>Source: <a href="https://habr.com/ru/post/242065/">https://habr.com/ru/post/242065/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../242053/index.html">Networking in Windows Server Technical Preview</a></li>
<li><a href="../242055/index.html">Google Analytics: User Id and multichannel sequences</a></li>
<li><a href="../242057/index.html">How to increase the conversion rate of a landing page using the psychology of desire</a></li>
<li><a href="../242061/index.html">SSL Certification Centers on Innovations with SHA-2</a></li>
<li><a href="../242063/index.html">The White House is thinking about choosing a new data center for its infrastructure</a></li>
<li><a href="../242067/index.html">Localized date formatting in Laravel</a></li>
<li><a href="../242069/index.html">Binary Serialization in Unity 3D / Visual Studio Application</a></li>
<li><a href="../242071/index.html">Runet in pictures XVIII. Bank cards in Russia and the world</a></li>
<li><a href="../242073/index.html">Command infrastructure for the user to invoke actions in the MVVM pattern</a></li>
<li><a href="../242075/index.html">How to deploy web sites in Microsoft Azure?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>GPS monitoring - analysis of message attributes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this post, the Hamlet question ‚ÄúTo be or not to be‚Äù is put to the attribute in the message history. It describes the approach taken in the GPS moni...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>GPS monitoring - analysis of message attributes</h1><div class="post__text post__text-html js-mediator-article">  In this post, the Hamlet question ‚ÄúTo be or not to be‚Äù is put to the attribute in the message history.  It describes the approach taken in the GPS monitoring system <a href="http://www.euler2012.com/apps/vialat_ru.html">ViaLatM</a> , and argues in favor of these decisions. <br><br>  The set of attributes sent by trackers is quite wide.  It varies from 2-3 basic ones for personal trackers and beacons, to dozens (including information from connected sensors and CAN buses), coming from telematics devices installed on vehicles. <br><br>  Here we will discuss some of the basic attributes that are sent by most types of devices: speed, direction of motion, validity of coordinates, DOP factors and the number of satellites. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Less than a year ago, we posted on our website <a href="http://www.euler2012.com/articles_ru.html">two small articles</a> on the speed and attributes of geolocation, in which we briefly touched upon the issues raised in this post. <br><br>  By reducing the number of attributes stored in the history of messages, we <b>optimize the amount of</b> disk space and <b>increase the speed of</b> generating reports (traffic, parking, visiting geozones, ...) and displaying tracks at certain time intervals. <br><br>  In this case, <b>for the last</b> message received from the device, <b>all</b> message <b>attributes</b> are stored and available for display and processing. <a name="habracut"></a><br><br><h3>  Speed </h3>  Trackers convey the instantaneous speed of an object.  This speed is calculated on the basis of determining the coordinates by satellite and therefore has an error.  In ViaLatM, we do not maintain instantaneous speed in message history.  It is displayed for the last event, and in reports the average speed is used instead, which can be calculated based on the distance and time interval between two adjacent points.  Below on the graph the red line corresponds to the instantaneous speed, the blue - to the average speed. <img src="https://habrastorage.org/files/55b/55c/576/55b55c5765ed472d9e89f3858e4238b0.png">  The graphics are quite similar.  For the user, the average speed gives much more useful information.  If the tracker's transmission interval of messages when moving is long enough (for example, 10 minutes), then the instantaneous speed may not display the real picture.  Assume that the instantaneous speed at the entrance and exit of the ‚Äútraffic jam‚Äù is 60 km / h, and the distance between two points is 1 km.  Then the average speed for the moment of departure from the traffic jam will be 6 km / h and this is more appropriate for the actual situation. <br><br>  Statistical studies have shown that the smaller the time interval between messages on moving objects, the smaller the deviations between the average and instantaneous speed.  In most trackers, when moving, messages are transmitted more often than in parking states. <br><br>  In this case, the control and the formation of notifications of violation of the speed limit is based on the instantaneous speed.  In these cases, the instantaneous speed is stored in the violation notification settings. <br><br><h3>  Direction of travel </h3>  When working with a message archive, we did not find the use of this attribute.  Yes, and when observing an object in real time, perhaps the only possible benefit from it is when the message came at a fork in two roads, and the user can understand which way the object will continue to move. <br><br><h3>  Sign of location validity </h3>  Most device types return a sign of correct location.  The attribute is processed, but not stored.  The presence of coordinates in the saved message is a fact of their validity.  If a message arrived with a sign of incorrect determination of coordinates, and the coordinates themselves are present, then they are deleted before saving the message in the archive. <br><br><h3>  Number of satellites </h3>  The number of satellites for which the location is determined also carries little information.  Sometimes with the visibility of 3 satellites, the location can be determined more accurately than with 10, if the latter are located on the line.  Coordinates in ViaLatM are not saved if the number of satellites is less than 3. <br><br><h3>  DOP attributes </h3>  DOP attributes (HDOP, VDOP, PDOP and TDOP) are factors that impair accuracy, which are transmitted in messages by some types of devices.  For ordinary users, it is more obvious to calculate and display the accuracy of determining coordinates on the basis of their values.  The green circle in the figure shows the accuracy of the coordinates for the last event. <img src="https://habrastorage.org/files/d6a/7da/de3/d6a7dade35dc4fbc936b2edf11e472e8.png">  Purple broken line is a device trace (device track in the last 10 minutes, but not more than 20 points).  In the current version, we maintain the accuracy of determining the coordinates for all events.  But maybe it does not need to do for moving. <br><br><h3>  GSM signal strength </h3>  Another attribute with which it is not clear what to do to the ordinary user.  According to its meaning, it is possible to make a conclusion about how well a cellular communication works in one place or another.  For monitoring this concerns the issue of data transmission over GPRS.  But what conclusions can be made on the basis of the attribute value is not clear to us. <br><br><h3>  "What we do not store, calculating crying" </h3>  Parameters that are not saved cannot be restored (direction of movement, validity of determination of coordinates, number of satellites and GSM signal level), but so far we have not encountered a case when a working tracker would need to get at least one of these parameters. <br><br>  Regarding the instantaneous speed, as noted above, it is close to the calculated average speed, which, in our opinion, is more informative.  There is a problem here.  If the device did not set the maximum permissible speed (accordingly, no alert notifications about the speed limit violation were generated), then generating a report on speeding takes more time than if the instantaneous speed was maintained.  Statistics of user access to reports showed that this report is requested to an order of magnitude less often than reports on traffic, parking, visiting geozones and alarm events.  The choice was made in favor of accelerating the formation of more frequently requested reports. <br><br>  In the ViaLatM system, the device can be transferred to a <b>test mode</b> in which all message attributes are saved.  This mode is used at the stage of connecting new types of devices or testing devices, the correct operation of which is in doubt.  Messages of this kind are not stored in the standard archive of events, but in a separate archive (it is possible to export events from this archive to the standard one). <br><br><h3>  Conclusion </h3><br>  In the ViaLatM system we adhere to the principles: <ul><li>  Save only what is used and cannot be calculated </li><li>  Display only what is useful information for the user. </li></ul><br>  Each of the principles should be approached carefully. <br><br>  If some attribute (from potentially calculated) is often used in reports and its calculation requires significant resources, then you should think about its permanent storage. <br><br>  The question of what information is useful for the user is unlikely to have an unambiguous definite answer.  When the GSM signal level attribute was constantly stored and displayed in reports in our system, we polled 10 users.  All amicably answered that the attribute is needed (let it be, it does not interfere).  When we removed this attribute from persistent storage and display in reports, only one of the surveyed users noticed its disappearance.  But the question of how he uses it, he did not give a clear answer, and it was not difficult for us to convince him that he did not need him.  This is a question of psychology.  People will not refuse additional functions because they do not want to waste time thinking about how much they really need them (‚ÄúMaybe it‚Äôs useful‚Äù and you have nothing to break your head).  But one of the most important tasks of developers is to remove all unnecessary. <br><br>  We will be grateful to habravchanam for expressing ideas and criticizing our approaches. </div><p>Source: <a href="https://habr.com/ru/post/239051/">https://habr.com/ru/post/239051/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../239041/index.html">Why be an implementation engineer</a></li>
<li><a href="../239043/index.html">How we made the radio, and why we want to fly</a></li>
<li><a href="../239045/index.html">Cleanser for cleaning thoughts</a></li>
<li><a href="../239047/index.html">Communications Minister Nikiforov proposes to operators to increase prices for 4G tariffs</a></li>
<li><a href="../239049/index.html">How we opened the store in the shopping center MEGA: history of errors</a></li>
<li><a href="../239055/index.html">Meet-up "Gear 2 / S smart watch for developers" will be held today!</a></li>
<li><a href="../239057/index.html">URANUS: the first working desktop SLA (stereolithography) printer</a></li>
<li><a href="../239061/index.html">Silent computer: only wire cutters and a soldering iron. Success story</a></li>
<li><a href="../239063/index.html">Closed testing of new technology from Infobox</a></li>
<li><a href="../239065/index.html">Javascript Interview Questions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
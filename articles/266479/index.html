<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Happy tickets up to 300 digits</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It all started with a test job for the job ‚Äújs-developer, Node.js-developer‚Äù, and then I was besieged: the task for happy tickets. 

 Count the number...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Happy tickets up to 300 digits</h1><div class="post__text post__text-html js-mediator-article">  It all started with a test job for the job ‚Äújs-developer, Node.js-developer‚Äù, and then I was besieged: the task for happy tickets. <br><br><blockquote>  Count the number of lucky tickets for 2, 4, 6, 8 and 10 digital values. <br></blockquote><br>  I am sure that many people have done this banal task several times, but, as a rule, for 6 digits ( <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2587%25D0%25B0%25D1%2581%25D1%2582%25D0%25BB%25D0%25B8%25D0%25B2%25D1%258B%25D0%25B9_%25D0%25B1%25D0%25B8%25D0%25BB%25D0%25B5%25D1%2582">for those who do not understand what will be discussed</a> ). <br><a name="habracut"></a><br>  Banal solution: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sum = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">num</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      var str = num.toString(), arr = str.split(''), s = 0; arr.forEach(function(value){ s+=parseInt(value); }); return s; }, luckyTickets = function(len){ var lenMiddle = len/2, maxSize = Math.pow(10,lenMiddle), result = 0; for(var i=0;i&lt;maxSize;i++) for(j=0;j&lt;maxSize;j++) if( sum(i) == sum(j) ) result++; return result; }; console.log( luckyTickets(8) ); // 4 816 030</span></span></code> </pre> <br>  You can also see <a href="https://ru.wikibooks.org/wiki/%25D0%25A0%25D0%25B5%25D0%25B0%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2586%25D0%25B8%25D0%25B8_%25D0%25B0%25D0%25BB%25D0%25B3%25D0%25BE%25D1%2580%25D0%25B8%25D1%2582%25D0%25BC%25D0%25BE%25D0%25B2/%25D0%259F%25D0%25BE%25D0%25B4%25D1%2581%25D1%2587%25D1%2591%25D1%2582_%25D1%2581%25D1%2587%25D0%25B0%25D1%2581%25D1%2582%25D0%25BB%25D0%25B8%25D0%25B2%25D1%258B%25D1%2585_%25D0%25B1%25D0%25B8%25D0%25BB%25D0%25B5%25D1%2582%25D0%25BE%25D0%25B2">here</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And if the number 10?  thirty?  200?  Trouble  I had to wait long for the result: the analog in PHP (5.3) was ‚Äúdying‚Äù, even when I gave 10 numbers and set_time_limit (3600). <br><br>  Now back to the world of JS.  Despite the fact that simple loops in Node.js are executed faster than in PHP, the execution time still does not suit me (1 029 458 ms). <br><br>  And now enough of this dull text, go to an alternative solution. <br><br>  The clue itself turned out to be in Kvant magazine, No. 12 (1976), pp.68‚Äì70 ( <a href="http://www.ega-math.narod.ru/Quant/Tickets.htm">electronic version</a> ). <br><br>  There you can also see the output - a table with which you can easily find out the ‚Äúamount of happiness‚Äù in tickets of 2 (n = 1), 4 (n = 2), 6 (n = 3) and 8 (n = 4) numbers. <br><br>  How to fill the table is shown below: <br><br><img src="https://habrastorage.org/files/87d/be7/aa0/87dbe7aa02e14647be04c7ff97528ffa.png" alt="table"><br><br>  That is, the sum of 10 elements of the previous column, for which the index is &lt;= the desired value.  The number of lucky tickets is equal to the sum of each value squared in a specific column: <br><br>  - for n = 1 (2 digits) -&gt; 1 ^ 2 + 1 ^ 2 + ... + 1 ^ 2 = 10; <br>  - for n = 2 (4 digits) -&gt; 1 ^ 2 + 2 ^ 2 + ... + 1 ^ 2 = 670; <br>  - for n = 3 (6 digits) -&gt; 1 ^ 2 + 3 ^ 2 + ... + 75 ^ 2 + ... + 1 ^ 2 = 55 252; <br>  - for n = 4 (8 digits) -&gt; 1 ^ 2 + 3 ^ 2 + ... + 670 ^ 2 + ... + 1 ^ 2 = 4 816 030; <br><br>  Further our turn. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> getNextArr = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">prevArr</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//        var newLen = prevArr.length + 9, //       9 arr = []; //   for(var i=0; i&lt;newLen; i++){ var q = 0; //    for(j=0; j&lt;10; j++) //  10   if(prevArr[ij]) // ...      q+=prevArr[ij]; //  arr[i] = q; //  arr.push(q); } return arr; }, luckyTickets = function(num){ //    var arr = [], //   result = 0; // ,    for(i=0;i&lt;10;i++) arr.push(1); //     10  for(i=0;i&lt;(num/2-1);i++) //    arr = getNextArr(arr); //    arr.forEach(function(v){ result+=Math.pow(v,2); }); //       return result; };</span></span></code> </pre><br>  Well, you need to check: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( luckyTickets(<span class="hljs-number"><span class="hljs-number">300</span></span>) ); <span class="hljs-comment"><span class="hljs-comment">// 8.014950093120178e+297 **</span></span></code> </pre><br>  Actually, what it was all about: a runtime of 106 ms (!!!), it‚Äôs scary to imagine what would happen when using the banal method. <br><br>  * all javascript checked on Node.js (x32) <br>  ** maximum length of ticket number - 310, more?  - the result goes to the Infinity area. <br>  *** This is my first article on Habr√© for the last 3 years, please do not throw stones. </div><p>Source: <a href="https://habr.com/ru/post/266479/">https://habr.com/ru/post/266479/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../266469/index.html">Intellectual lighting - we get used to this term. Plus a remark from Redwood: lighting should be comfortable, economical and safe</a></li>
<li><a href="../266471/index.html">As I wrote a guitar tuner under iOs on Swift. And also a little about DSP, standing waves and how to achieve an accuracy of ¬± 0.1 Hz</a></li>
<li><a href="../266473/index.html">Thoughts on deploying web applications on a test server</a></li>
<li><a href="../266475/index.html">Flour choice or "Big Three" vs Supermicro</a></li>
<li><a href="../266477/index.html">Install JBoss BPM Suite</a></li>
<li><a href="../266481/index.html">Work with Ansible - tasks with several unknowns</a></li>
<li><a href="../266483/index.html">How to attract users, select the icon of your application and earn the first million? Read in the news of the week for a mobile developer</a></li>
<li><a href="../266485/index.html">CVSS 3.0 Vulnerability Assessment</a></li>
<li><a href="../266487/index.html">How to organize database testing in dUnit</a></li>
<li><a href="../266489/index.html">Cyberband Carbanak returns with a new arsenal of malware</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
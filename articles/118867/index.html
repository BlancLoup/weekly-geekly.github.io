<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sales tracking with Google Analytics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Trying to adhere to the tradition, I publish the translation of the next article from the android-developers blog. This time, the article is devoted t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sales tracking with Google Analytics</h1><div class="post__text post__text-html js-mediator-article">  <i>Trying to adhere to the tradition, I publish the translation of the next article from the <a href="http://android-developers.blogspot.com/">android-developers</a> blog.</i>  <i>This time, the article is devoted to tracking sales within applications using the Google Analytics Android SDK.</i> <br><br><h4>  Why is it important? </h4><br>  If you distribute certain products through your application, then most likely you will want to know what the real income generated by sales.  And also, for example, a list of the most popular or best-selling goods. <br><a name="habracut"></a><br><br><h4>  Before you start </h4><br>  First, you need to configure to use the Google Analytics Android SDK.  If you haven‚Äôt already done this, check out the <a href="http://code.google.com/mobile/analytics/docs/android/">SDK documentation</a> .  The following implies that you have configured your application to interact with the SDK.  Also, we will assume that in your code you have already declared the ‚Äútracking‚Äù object of Google Analytics: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="java hljs">GoogleAnalyticsTracker tracker;</code> </pre> <br><br>  The object must be initialized in the <b>onCreate ()</b> method, and the <b>start ()</b> method is called for it. <br><br><pre> <code class="java hljs">tracker = GoogleAnalyticsTracker.getInstance(); tracker.start(<span class="hljs-string"><span class="hljs-string">"UA-YOUR-ACCOUNT-HERE"</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>);</code> </pre><br><br><h4>  Transaction tracking </h4><br>  The best place to track a single transaction will be the confirmation of the purchase.  Suppose you have a method called after confirming a purchase.  The tracking code should be placed there: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPurchaseConfirmed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List purchases)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   Google Analytics      }</span></span></code> </pre><br><br>  The Google Analytcs SDK provides a transaction object to store all the information you need to collect.  The next step is to copy the information from the list of purchase objects (PurchaseObjects) into the transaction object (Transaction). <br><br>  The transaction object uses a <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2582%25D1%2580%25D0%25BE%25D0%25B8%25D1%2582%25D0%25B5%25D0%25BB%25D1%258C_%2528%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F%2529">builder</a> pattern, in which the constructor needs to pass the required arguments, and the remaining arguments are set optionally using setters: <br><br><pre> <code class="java hljs">Transaction.Builder builder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Transaction.Builder( purchase.getOrderId(), purchase.getTotal()) .setTotalTax(purchase.getTotalTax()) .setShippingCost(purchase.getShippingCost() .setStoreName(purchase.getStoreName());</code> </pre><br><br>  Now you can pass the information to the transaction object: <br><br><pre> <code class="java hljs">tracker.addTransaction(builder.build());</code> </pre><br><br><h4>  Tracking all parts of a transaction </h4><br>  The next step is tracking parts of the transaction.  This is somewhat similar to tracking a single transaction.  Use the <b>Item</b> class from the Google Analytics SDK.  Google Analytics uses OrderID as a common identifier to associate multiple items in a transaction.  Each object of sale (PurchaseObjects) has its own list of items.  You can walk through them with an elementary iterator: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (ListItem listItem : purchase.getListItems()) { Item.Builder itemBuilder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item.Builder( purchase.getOrderId(), listItem.getItemSKU(), listItem.getPrice(), listItem.getCount()) .setItemCategory(listItem.getItemCategory()) .setItemName(listItem.getItemName()); <span class="hljs-comment"><span class="hljs-comment">//      . orderId -  // Google Analytics       . tracker.addItem(itemBuilder.build()); }</span></span></code> </pre><br><br><h4>  Submitting data to Google Analytics </h4><br>  After all transactions and items have been added, you can call the method: <br><br><pre> <code class="java hljs">tracker.trackTransactions();</code> </pre><br><br>  And it will send your data to Google Analytics. <br><br><h4>  View reports </h4><br>  After the data has been collected, you can view reports through <b>Conversions -&gt; Ecommerce -&gt; Product Performance</b> . <br><br> <a href=""><img src="http://1.bp.blogspot.com/-fmzQa1c5-VI/TcMPk3Z4beI/AAAAAAAAAcY/6u3uPpy9EDs/s400/ecommerce.png" alt="image"></a> <br><br>  You will see how much revenue individual goods bring you.  Can you identify the most "running" and so on.  The picture shows that people buy a lot of potions, which generate the main income :-) <br>  It is also clear that blue swords buy more often red, which means that people like blue things more;  and do not need to add to the application a lot of red. <br><br><h4>  Conclusion </h4><br>  You can learn more about this SDK from the <a href="http://code.google.com/mobile/analytics/docs/android/">documentation</a> .  It also promises that the upcoming I / O session will be dedicated to the use of Google Analytics in Android applications. </div><p>Source: <a href="https://habr.com/ru/post/118867/">https://habr.com/ru/post/118867/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../118858/index.html">But it would be nice ...</a></li>
<li><a href="../118859/index.html">Yandex remembers!</a></li>
<li><a href="../118860/index.html">What sites do you visit everyday?</a></li>
<li><a href="../118862/index.html">How to build a tower</a></li>
<li><a href="../118864/index.html">Free-lance.ru and Webmoney distribute gifts</a></li>
<li><a href="../118869/index.html">How fast is the internet at google office?</a></li>
<li><a href="../118870/index.html">Writers and readers - analysis of the structure of comments LJ TOP-500, part 1</a></li>
<li><a href="../118871/index.html">Usability usa</a></li>
<li><a href="../118873/index.html">Efficient labor organization</a></li>
<li><a href="../118878/index.html">ITsrach.ru - do not keep in yourself!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
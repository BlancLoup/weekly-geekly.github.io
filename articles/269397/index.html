<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Instant download of desktop and mobile sites: part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habrovchane! Today we talk about optimizing the speed of loading the site. This is the first thing that the user pays attention especially when en...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Instant download of desktop and mobile sites: part 1</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://habrahabr.ru/company/mobilizetoday/blog/269397"><img src="https://habrastorage.org/files/60b/3be/6e8/60b3be6e865e4cedab2abd4deba22496.jpg" alt="Web optimization"></a> <br><br>  Hi, Habrovchane!  Today we talk about optimizing the speed of loading the site.  This is the first thing that the user pays attention especially when entering from mobile devices.  What problems leads to the low speed of the site: <br>  - reduced conversion ( <a href="http://www.getelastic.com/how-walmart-cas-responsive-redesign-boost-conversion-by-20">Walmart study</a> ); <br>  - reduction of audience coverage; <br>  - increase in bounce rate; <br>  - reducing the availability of the site; <br>  - reducing the speed of indexation by search robots. <br><a name="habracut"></a><br><h2>  In the series of articles we will consider the stages and methods of site optimization. </h2><br><ol><li>  Analysis and evaluation of the current state of the site. </li><li>  Tools and approaches to reduce bitmaps. </li><li>  Reducing vector images. </li><li>  Minimize the number of requests. </li><li>  Font optimization. </li><li>  Caching </li><li>  The structure of web pages. </li><li>  Using CDN. </li><li>  Optimization of CSS, HTML and JavaScript code. </li><li>  Improved usability. </li></ol><br><br><h2>  1. Analysis and evaluation of the current state of the site </h2><br>  Most often, the optimization is done in fact on work projects.  Therefore, we will analyze the current state of the pages to determine the list of priority improvements. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Google Insights PageSpeed </h3><br><img src="https://habrastorage.org/files/b1f/201/80a/b1f20180aeb548a6b03eed5ea0d4f5c5.png"><br><br>  <a href="http%253A%252F%252Fwww.mobilizetoday.ru">Page Speed ‚Äã‚ÄãInsights</a> measures web page loading speed.  The URL is checked twice - with a regular and mobile user agent.  Score PageSpeed ‚Äã‚Äãcan be from 0 to 100 points.  The higher the score, the better.  If the page has scored more than 85 points, then it loads quickly. <br><br>  <strong>An acceptable result can be considered an assessment: 70-80 points.</strong> <br><br>  Please note that PageSpeed ‚Äã‚ÄãInsights is constantly evolving, so as new rules are added or analytical algorithms are improved, the score sometimes changes. <br><br>  PageSpeed ‚Äã‚ÄãInsights defines how you can improve the following indicators: <br><ul><li>  document object model load time: the total time from the moment the page is requested to the moment it is drawn. </li><li>  full page load time: the total time from the moment the page is requested to its full display in the browser. </li></ul><br>  Since the connection speed is different for different users, PageSpeed ‚Äã‚ÄãInsights considers only the web-independent aspects of the operation of the page: server configuration, HTML structure, use of external resources (images, JavaScript and CSS).  Therefore, we can optimize the relative page load speed, absolute in much the same depends on the speed of connection to the network.  In addition, the service offers download optimized images, JavaScript and CSS resources for the analyzed page. <br><br>  Each recommendation has a priority indicator corresponding to its importance: <br><img src="https://habrastorage.org/files/55f/9f4/501/55f9f4501b0b4c55bec1d9529faf8191.png"><br><br>  To automate the debugging process, you can use <a href="https://developers.google.com/speed/pagespeed/optimization">PageSpeed ‚Äã‚ÄãTools</a> . <br><br><h3>  Pingdom </h3><br><img src="https://habrastorage.org/files/528/070/bb4/528070bb4c1b4ad39291e8745952b723.png"><br><br>  Using the <a href="&amp;xid=17259,1500003,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhr3-C4rjGKRNbg70yXyy9cYDB_DA#!/cBWFeU/">Pingdom service, we</a> measure the speed of access to the actual page, performance, general results for the page, as well as in separate tabs, we can evaluate the correctness of the DNS server settings and make a ping check to the host or ip address.  The test is convenient for evaluating performance before and after optimization. <br><br><h3>  Chrome devtools </h3><br>  The Networks tab in DevTools allows you to evaluate the boot order, speed, page size and emulate various types of connections.  When reanalyzing, it is advisable to disable the cache to improve the performance of the first user visit (‚Äúcold load‚Äù). <br><br><img src="https://habrastorage.org/files/8be/2ef/cc7/8be2efcc769347d4828a59832fa31bf5.png"><br><br>  As a basic benchmark for an adaptive site, we take the following indicators: <br><br><ul><li>  <strong>Mobile version of the site</strong> <br>  Download speed: 2-3 seconds <br>  Page size: 1 MB or less (if possible 500 KB or less) </li></ul><br><ul><li>  <strong>Desktop version</strong> <br>  Download speed: 2-3 seconds <br>  Page size: 2 MB or less </li></ul><br>  During this time, not all content may be shown, but the upper part, visible without scrolling.  While the visitor views the materials available to him, the rest of the content will be downloaded. <br><br><h2>  2. Tools and approaches to reducing raster images </h2><br>  In most cases, the most resource-intensive is the process of downloading images, taking into account the number of devices and permissions.  Optimizing the size and quality of images using image editors does not give the maximum effect.  Usually, Internet graphics can be compressed by 10-40%, without loss of quality, including reducing the number of colors and transcoding files. <br><br>  But it is optimal to use specialized programs and web services, three of them will be discussed below.  As an experiment, the same sets of GIF, PNG and JPG images were taken, each of which is a sample of web graphics. <br><br><h3>  ImageOptim (Mac) </h3><br><img src="https://habrastorage.org/files/e8e/6d1/91d/e8e6d191d09c4083bcbb9d56352380d7.jpg"><br><br>  Easy to use desktop application with open source <a href="https://imageoptim.com/">ImageOptim</a> for MacOS allows you to reduce the size by 10-30% GIF, JPEG and PNG without any loss of quality.  This is achieved by removing metadata and unnecessary color profiles without re-encoding or reducing the number of colors. <br><br>  The ImageOptim interface is also quite convenient.  Drag a single file, group or folder and the program will begin to compress them with the replacement of the source files and displaying the results. <br><br><h3>  FileOptimizer (Win) </h3><br><img src="https://habrastorage.org/files/7de/359/c93/7de359c938bd4841beb425475be3ad32.png"><br><br>  In addition to lossless compression of standard formats, <a href="http://nikkhokkho.sourceforge.net/static.php%3Fpage%3DFileOptimizer">FileOptimizer features are</a> quite extensive.  It also reduces executables, archives, Microsoft Office documents, PDFs, and more.  The way of working with the program is similar to ImageOptim. <br><br><h3>  PUNYpng (Web) </h3><br>  <a href="http://www.punypng.com/">PUNYpng</a> is a web service that applies compression at 16-32% lossless.  Registration is free, but restrictions apply: you can download only 15 images in batch mode, each not more than 150 kb.  For $ 2 per month, you can upgrade your account to PRO, allowing you to improve compression and upload more files. <br><br><h3>  Lossless compression results table </h3><table border="1"><tbody><tr><th>  Tool </th><th>  Platform </th><th>  PNG,% </th><th>  JPG,% </th><th>  GIF,% </th></tr><tr><td>  <a href="https://imageoptim.com/"><b>ImageOptim</b></a> </td><td>  Mac </td><td>  17,8 </td><td>  18.3 </td><td>  <font color="green"><b>16.2</b></font> </td></tr><tr><td>  <a href="http://nikkhokkho.sourceforge.net/static.php%3Fpage%3DFileOptimizer"><b>Fileoptimizer</b></a> </td><td>  Win </td><td>  <font color="green"><b>42.2</b></font> </td><td>  17.7 </td><td>  15.9 </td></tr><tr><th>  <a href="http://www.punypng.com/"><b>Punypng</b></a> </th><td>  Web </td><td>  32.1 </td><td>  <font color="green"><b>27.5</b></font> </td><td>  16.1 </td></tr></tbody></table>  <a href="http://habrahabr.ru/post/168251/">A complete overview of image compression tools.</a> <br><br>  There is no one perfect format, tool or optimization algorithm that would be suitable for all images.  To get the best result, you should choose the format and its settings depending on the content, as well as visual and technical requirements. <br><br>  Useful links to other tools: <br><ul><li>  <a href="http://www.imagemagick.org/script/index.php">ImageMagick</a> is a command line utility and image editor with a large set of functions ( <a href="http://habrahabr.ru/post/261625/">instructions for setting up</a> ). </li><li>  <a href="http://www.graphicsmagick.org/">GraphicsMagick</a> is an ImageMagick branch providing better performance thanks to support for multiprocessing. </li><li>  <a href="http://www.lcdf.org/gifsicle/">Gifsicle</a> - creates and optimizes GIFs. </li><li>  <a href="http://jpegclub.org/jpegtran/">Jpegtran</a> - optimizes jpeg images. </li><li>  <a href="https://pngquant.org/">Pngquant</a> - compresses lossy PNGs. </li></ul><br><br><h3>  Retina display support </h3><br>  Making mindless support for Retina can be resource intensive, so you must first make sure that you need to support it.  To clearly display an image of 100x100 on the screen, say the iPhone, you need to prepare an image of 200x200 in size and display it in a size of 100x100 by compressing the scales. <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hoge.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--       hoge.jpg - 200x200 --&gt;</span></span></code> </pre> <br>  Of course, the file size of the image used becomes larger, so you need to use image compression as described above.  For JPG, set the compression level to about 30-50.  If there is a concern that quality will be lost, it is best to experiment with the level of compression to find the optimal one. <br><br><h3>  Srcset attribute (HTML5) </h3><br>  The attribute allows the browser to select the most appropriate version of the image based on data such as information reception speed, delay, <abbr title="Pixels per inch, pixels per inch is the unit of measurement for the resolution of a monitor.">PPI</abbr> , device orientation, etc.  The idea is to free the developer from the need to describe the conditions under which one or another version of the image should be used.  It is necessary to specify only the data on the image, size and density, and the browser will decide for itself what is best to use in this situation. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hoge.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">srcset</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hoge@2x.jpg 2x"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><h3>  Picture tag (HTML5) </h3><br>  Similar to the srcset attribute, <a href="http://caniuse.com/">supported</a> so far only in Chrome, Firefox and Opera browsers. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">picture</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">media</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"(min-width: 320px)"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">srcset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s.jpg 1x, s@2x.jpg 2x"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">media</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"(min-width: 640px)"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">srcset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"b.jpg 1x, b@2x.jpg 2x"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s.jpg"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">picture</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><h3>  CSS sprites </h3><br>  Using sprites can improve performance, reduce the weight of graphics and organize the interface elements.  Thanks to a single server load of all the elements at once (icons or buttons) in one file.  And with CSS, you can display each element separately.  To automate the process of creating sprites, you can use the <a href="http://compass-style.org/">Compass framework</a> or the <a href="http://gruntjs.com/">Grunt collector</a> . <br><br><h3>  Data: URI </h3><br>  There is an alternative for generating CSS sprites based <a href="http://habrahabr.ru/post/46801/">on data: uri</a> .  It minimizes the number of calls to the server and automates the process of assembling and regenerating sprites. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"data:image/gif;base64,R0lGODdhMAAwAPAAAAAAAP///ywAAAAAMAAw AAAC8IyPqcvt3wCcDkiLc7C0qwyGHhSWpjQu5yqmCYsapyuvUUlvONmOZtfzgFz ByTB10QgxOR0TqBQejhRNzOfkVJ+5YiUqrXF5Y5lKh/DeuNcP5yLWGsEbtLiOSp a/TPg7JpJHxyendzWTBfX0cxOnKPjgBzi4diinWGdkF8kjdfnycQZXZeYGejmJl ZeGl9i2icVqaNVailT6F5iJ90m6mvuTS4OK05M0vDk0Q4XUtwvKOzrcd3iq9uis F81M1OIcR7lEewwcLp7tuNNkM3uNna3F2JQFo97Vriy/Xl4/f1cf5VWzXyym7PH hhx4dbgYKAAA7"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  But it has limitations: the data encoded in Base64 in this way is about 33% larger in size than their binary equivalent. <br><br>  To be continued‚Ä¶ </div><p>Source: <a href="https://habr.com/ru/post/269397/">https://habr.com/ru/post/269397/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269387/index.html">Oracle regular expressions. Dangerous range</a></li>
<li><a href="../269389/index.html">Xamarin.UITest</a></li>
<li><a href="../269391/index.html">ShishNashKi</a></li>
<li><a href="../269393/index.html">Security Week 43: hard prime numbers, cryptography in HDD, Adobe and Oracle patches</a></li>
<li><a href="../269395/index.html">Golden Site distributed elephants to the best Internet projects.</a></li>
<li><a href="../269399/index.html">Application Lifecycle in Windows 8.1 and UWP</a></li>
<li><a href="../269401/index.html">The three most significant innovations with the arrival of watchOS2</a></li>
<li><a href="../269407/index.html">This is not paranoia: sources of threats in the GSM system and protection from them.</a></li>
<li><a href="../269411/index.html">10 apps to learn Python on Android devices</a></li>
<li><a href="../269415/index.html">Unreal vs. Unity: what is the best way to develop mobile games?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
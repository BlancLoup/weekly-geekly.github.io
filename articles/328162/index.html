<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Count to three: three</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Threefold counter 
 So, we continue the conversation. In this article I will tell you how to make a ternary counter. I remind you that I want to make ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Count to three: three</h1><div class="post__text post__text-html js-mediator-article"><h2>  Threefold counter </h2><br>  So, we continue the conversation.  In this article I will tell you how to make a ternary counter.  I remind you that I want to make the simplest, but programmable piece of hardware that works on the ternary logic.  The answer to the question "why?" Look <a href="https://habrahabr.ru/post/324062/">here</a> . <br><br>  This is the third article, as soon as it is ready, it will be continued.  Table of contents: <br><br><ul><li>  <a href="https://habrahabr.ru/post/324062/">We count to three: time (ternary multiplexer and adders)</a> </li><li>  <a href="https://habrahabr.ru/post/324650/">We count to three: two (memory)</a> </li><li>  <b>We count to three: three (counters)</b> </li><li>  <a href="https://habrahabr.ru/post/337606/">We count to three: four (one-digit computer and a three-team command system)</a> </li></ul><br>  As usual, in my articles there are more pictures than text.  Here is the main piece of hardware, which will be discussed today: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/d43/bd5/1de/d43bd51de67b865cfe93870e72fe5b23.jpg"><br><a name="habracut"></a><br><h1>  Summary of the previous series </h1><br><h2>  Threefold multiplexer </h2><br>  I remind you that the only element used in the whole structure will be a ternary multiplexer, which, in fact, is a three-position switch.  Logically, this is a five-pin thing: one of them (sel) receives the three-way selector signal, and, depending on it, one of the three input signals inN, inO or inP is output to the multiplexer (out): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fa6/2f1/326/fa62f1326b7053dc3054e614053ba6c3.png"><br><br>  This is how the board looks like which carries two (de-) multiplexers on itself.  Following the <a href="http://nedocon.com/store/trimux/">original name</a> , I will call it the word Trimux. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/61d/0d5/fae/61d0d5fae166668f0a2db308f18dc163.jpg"><br><br>  If the multiplexer is simply connected as a repeater, supplying -5V, 0V, + 5V to the legs N, O, P, respectively, then when applying to the input S of the triangle at output C there will be a stepped signal: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/440/3ce/fa5/4403cefa53cd2d2d91d7c8bf8109c161.jpg"><br><br>  Today I will use only two things: a half adder and a memory cell. <br><br><hr><br><h2>  Semi-adder </h2><br>  In the <a href="https://habrahabr.ru/post/324062/">first article,</a> we detailed the work of the half-adder.  On the layout it looks like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/40d/318/8fc/40d3188fce64b8dace3c986a856270b7.jpg"><br><br>  The top layout is directly a half adder, and the bottom one is an I / O board.  Since I would need a fair amount of half-adders, and each time I would need to assemble a separate dummy too time consuming, I decided to make a separate half-adder board.  Here is what the diluted board looks like: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/015/e81/d10/015e81d102b09531a1e5fc984842dc8d.png"><br><br>  This is already made: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/77e/2a0/c81/77e2a0c81fece88384d230bce17d2863.jpg"><img src="https://habrastorage.org/getpro/habr/post_images/25a/265/d51/25a265d51521349bce5b12daeae71874.jpg"><br><br>  Three trims will be inserted into this board.  This is not a departure from my intention to use exclusively multiplexers as a building block, since in fact I only have wires on the auxiliary board, which save me time.  Even the resistors I have are only as a paranoid current limit, they can be safely thrown out.  Calculations are still engaged in trims.  Here I am testing the work of the half-adder, the I / O board has also outgrown the layout: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/725/04a/e1a/72504ae1ad3bd1bdaa147bc82153d03d.jpg"><br><br>  Well, here are the modules of half-adders that are ready for operation: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/31a/f35/f38/31af35f3802c7eb24a03aee51a6c1b23.jpg"><br><br><hr><br><h2>  Trinity memory </h2><br>  In the <a href="https://habrahabr.ru/post/324650/">second article,</a> we dealt with the fact that on one trimmix (on two three-way multiplexers), you can make a memory cell (a three-way latch) with memorization by level.  Well, if you collect two ternary latches in the master and slave, you can get a memory cell with dynamic control, which is triggered on the front of the clock signal (ternary master-slave flip-flap-flop). <br><br>  Moreover, in the comments to the previous article, the respected <a href="https://habrahabr.ru/users/mayorovp/" class="user_link">mayorovp</a> proposed a variant that uses only four multiplexers.  I promised to try it and try it! <br>  Here is his proposal, which I have customized for my needs: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f78/362/ad8/f78362ad8a82dbec69f66c829628862f.png"><br><br>  This cell remembers the output Q value applied to the input A, when the input of the clock signal makes two consecutive steps NO, OP. <br><br>  Exactly as with a half-adder, I decided to make a separate memory block, here is a divorced board: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/786/9a7/3c2/7869a73c2748d0569996b8d71bcc37ab.png"><br><br>  She bears on herself two separate ternary latches, triggered by level.  If we install four jumpers, we get the above-described dynamic memory cell. <br><br>  This is what a handkerchief looks like: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6d9/0e0/d18/6d90e0d18695e8915db822c7e01edaed.jpg"><br><br>  Well, here is the finished module: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fd2/56f/ef6/fd256fef6f27b3ae3aaea214a88c6017.jpg"><br><br><hr><br><h1>  The simplest ternary counter </h1><br>  So we can abstract ourselves slightly from the multiplexer itself and use higher-level blocks.  Let's take three memory cells and three half-adders.  This is enough to create a simple three-way counter. <br><br>  In total, we have six ready blocks that can be put together like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b49/281/a45/b49281a45015504d589223892012b5db.png"><br><br>  The termination ramp is fed to the clock input.  In fact, a memory cell plus a half adder gives the simplest frequency divider.  If instead of the red one, you submit a minus one, then the counter will subtract.  This is how our counter on the layout looks like, the three left LEDs on the I / O board show the status of three memory cells, the rightmost switch is used for manual clocking of the counter: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ad/0e3/cbc/0ad0e3cbc964b40be1f6abf14cbd6364.jpg"><br><br>  And here is a video where I simply click through all 27 possible states of our counter: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/BXJR8TIzrho" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Among the shortcomings of this counter, it can be noted that when it is turned on, its state is not very well defined (in practice, after a long shutdown, it will be in the zero state).  Yes, and reset this counter is nontrivial.  At least I have not found an easy way. <br><br><hr><br><h1>  Let's complicate </h1><br>  So, it works not badly, thanks a <a href="https://habrahabr.ru/users/mayorovp/" class="user_link">lot</a> to <a href="https://habrahabr.ru/users/mayorovp/" class="user_link">mayorovp</a> for the suggested memory option.  If you go back to the previous article, I used two more multiplexers to create a dynamic memory cell than suggested by <a href="https://habrahabr.ru/users/mayorovp/" class="user_link">mayorovp</a> .  Let's try with them: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/49e/4b0/93c/49e4b093cacc62ffba487aa4e01e1d08.png"><br><br>  This counter works exactly the same as the previous one, but has two more multiplexers.  What for?  Because I so want!  Please note that the inputs Bm and As (I painted them gray) are not used in this scheme.  The clock signal on the master latch is never positive, and on the slave is never negative. <br><br>  And now let's add two more multiplexers to the circuit: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/867/d53/889/867d53889d465e52d34d63cb177c2680.png"><br><br>  If the incoming signal R is equal to minus one, then the counter is absolutely equivalent to the previous one.  But what happens if it is zero or positive?  The latches will remember what is applied to the inputs Bm and As! <br><br>  We received a ternary counter, which can count in both directions, and the value of which can be rewritten if necessary, by applying the necessary number to the latches and resetting the signal R. Here is a video with a detailed description of the work: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/T3u3iVJdfaQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  So, with the help of thirty-four multiplexers (seventeen trimux), a fully functional ternary counter is assembled.  Its digit capacity can be finished to the required one by adding one memory block and one half adder per trit. <br><br>  Look at how Alexander Shabarshin <a href="http://www.nedopc.org/forum/viewtopic.php%3Ff%3D79%26t%3D60%26start%3D15">suggests</a> making a minute counter in ternary hours (or seconds, hours, the scheme is the same): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/73f/0aa/bf5/73f0aabf58dc9c888b56718df45aab06.png"><br><br>  At one o'clock sixty minutes, so we have to use four tritas.  Four tritas can store 81 different values, but in a balanced ternary system, they represent values ‚Äã‚Äãfrom -40 to 40. So, how can we represent, for example, 45 minutes?  Alexander very ingeniously suggests saying that now is not 45 minutes, but at fifteen o'clock!  The five multiplexers at the bottom right of the circuit just reset the minute counter after an hour. <br><br>  For today everything, next time we will try to calculate something. <br><br><h1>  Bonus: food </h1><br><div class="spoiler">  <b class="spoiler_title">Brief description of the manufacture of BP</b> <div class="spoiler_text">  When I wrote the first two articles, in order to get bipolar power, I used the simplest resistor divider, which was mercilessly heated.  Since I had to make a triangle generator, which also requires bipolar power, but already ¬± 12 V, then I decided that two LATRs in one circuit are already overkill and skolhozil BP.  I ordered ready-made power modules in China, put together: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3fa/4ae/e3a/3fa4aee3a9471753f6924d140e664deb.jpg"><br><br>  I do not know why, but for some reason before the power supply unit I inserted a power filter.  Since here we are talking about 230 volts, the casing is required, picked up a 3mm thick PVC sheet, bent on a nichrome wire: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/78e/702/9a4/78e7029a41531d958efae1b917114908.jpg"><br><br>  Got something like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/aab/c1d/a1c/aabc1da1cf72ad2cd6ab651d910969f4.jpg"><br><br>  Here is the open power supply: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1fb/abb/893/1fbabb8937b7865e2571dcf788b1ec10.jpg"><br><br>  And so ready to use: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7ea/d1b/a95/7ead1ba95952a50a10dec77bb97afd82.jpg"><br><br>  The total cost did not count, but would roughly estimate the bucks at thirty. <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/328162/">https://habr.com/ru/post/328162/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../328148/index.html">BK-0010 emulator on FPGA - part 2</a></li>
<li><a href="../328152/index.html">As I wrote my Redux</a></li>
<li><a href="../328156/index.html">How Studying Smalltalk Can Improve Your Programming Skills</a></li>
<li><a href="../328158/index.html">As we did a short-term forecast of precipitation. Lecture in Yandex</a></li>
<li><a href="../328160/index.html">Change in perception of complexity</a></li>
<li><a href="../328164/index.html">IaaS Digest: ‚ÄúvCloud and His Friends‚Äù</a></li>
<li><a href="../328170/index.html">Profiling and optimizing symbolic computations for a future server</a></li>
<li><a href="../328172/index.html">By the day of communication: the history of IP-telephony</a></li>
<li><a href="../328174/index.html">Azure-IaaS-Digest # 15 (April)</a></li>
<li><a href="../328178/index.html">The digest of fresh materials from the world of the frontend for the last week No. 261 (May 1 - 7, 2017)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Expanding Ansible functionality with modules</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Under the hood of the d2c.io service , we actively use Ansible ‚Äî from creating virtual machines in the clouds of providers and installing the necessar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Expanding Ansible functionality with modules</h1><div class="post__text post__text-html js-mediator-article"><p><img align="left" src="https://habrastorage.org/webt/lu/rl/ma/lurlmap5e-ovvy-vfz9rzmpi0hi.jpeg">  Under the hood of the <a href="https://d2c.io/">d2c.io</a> service <a href="https://d2c.io/">,</a> we actively use Ansible ‚Äî from creating virtual machines in the clouds of providers and installing the necessary software, to managing Docker containers with client applications. </p><br><p>  <a href="https://habrahabr.ru/company/d2cio/blog/344046/">In the article on expanding the functionality of Ansible,</a> we partially considered the difference between plugins and modules.  In short, the main difference is that the former are performed on the local machine where Ansible is installed, and the latter are on the target ones. </p><br><p> The main task of plug-ins is to influence the progress of the playbook, add new possibilities of loading and processing data.  The task of the modules is to expand the list of systems and services that Ansible can manage.  For example, to create a server on the Vultr site - the vultr module, to create a user in a self-made authorization system for an office WiFi network - the <code>mywifiauth_user</code> module. </p><a name="habracut"></a><br><h3 id="princip-raboty-moduley">  The principle of the modules </h3><br><p>  A module is a small program that: </p><br><ul><li>  executed on target host </li><li>  can accept parameters as input (via parameter file) </li><li>  reports on its work to standard output in JSON format </li></ul><br><p>  The process of module execution looks like this: </p><br><ul><li>  From the queue of execution Ansible takes the following task.  Specifies the name of the module to use. </li><li>  If there is a action-plugin of the same name, executes it ( <a href="https://habrahabr.ru/company/d2cio/blog/344046/">see article about plugins part 1</a> ). <br>  The plugin can do the preparatory work.  For example, it will copy files from the management machine to the target host in advance. </li><li>  Prepares a parameter file for a module </li><li>  Depending on the type of module: <br><ul><li>  for modules that do not use ‚ÄúAnsible Framework‚Äù: copies the parameters file and the executable file of the module to the target host. </li><li>  for modules based on <a href="https://github.com/ansible/ansible/blob/64db935b25bbaad0fe290e3ef39f34e5a3ac5a9c/lib/ansible/module_utils/basic.py">AnsibleModule</a> : forms and delivers to the target host a self-extracting Python file containing all the necessary Ansible auxiliary classes, a parameter file and a module file itself.  Such a ‚Äúpackage‚Äù is necessary for the operation of the pipelining mode ( <a href="https://habrahabr.ru/company/d2cio/blog/343368/">see the article about Ansible acceleration</a> ). </li></ul></li><li>  Launches a module or ‚Äúpackage‚Äù on a remote host. </li><li>  The module performs useful work. </li><li>  Ansible receives the result of the module as a JSON object from the standard output. </li></ul><br><p>  Most often, the target hosts are remote machines, servers and devices: for example, the <a href="http://docs.ansible.com/ansible/latest/user_module.html">user</a> module manages users on the same host on which it is running.  Some modules, on the contrary, are more often run on the local host using <code>connection: local</code> , <code>local_action</code> or <code>delegate_to: localhost</code> .  A striking example of this is cloud management modules, such as <a href="http://docs.ansible.com/ansible/latest/ec2_module.html">ec2</a> .  They require setting the credentials, which are most often available on the management machine.  The <a href="http://docs.ansible.com/ansible/latest/wait_for_module.html">wait_for</a> module to wait for the opening of TCP ports also often runs on the local machine.  It is used, for example, to wait until the remote server restarts and an SSH connection becomes available. </p><br><h3 id="prosteyshiy-modul">  Simplest module </h3><br><p>  Modules can be created in any language.  Starting with Ansible 2.2 modules can be binary executable files.  Let's make the simplest module on <code>bash</code> : </p><br><pre> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta">#!/bin/bash echo '{</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"changed"</span></span></span><span class="hljs-meta">:false,</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"date"</span></span></span><span class="hljs-meta">:</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"'$(date)'"</span></span></span><span class="hljs-meta">}'</span></span></code> </pre> <br><p>  Save this code in the file ./library/bash_mod.sh and check: </p><br><pre> <code class="hljs javascript">$ ansible localhost -m bash_mod localhost | <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SUCCESS</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"date"</span></span>: <span class="hljs-string"><span class="hljs-string">", 6  2017 . 17:00:32 (MSK)"</span></span> }</code> </pre> <br><p>  Ansible receives information about the results of the modules from their standard output.  All output must be a valid JSON object <em>(therefore, you cannot debug modules using print statements)</em> .  Depending on the value of the service properties, Ansible can make different decisions.  One of these properties: <code>changed</code> .  For example, you can change its value in bash_mod from <code>false</code> to <code>true</code> and see that Ansible now considers that your module has changed something on the target host, the output has turned yellow. </p><br><h3 id="vhodnye-parametry">  Input parameters </h3><br><p>  There are several ways to get input parameters for a module: </p><br><ul><li>  Through a file with <code>key=value</code> pairs, separated by spaces.  Used for modules in interpreted languages.  The path to the file with parameters is passed to the module as the only command line parameter.  For example, for our module on <code>bash</code> . </li><li>  Through a file with a JSON object.  Used for binary modules, modules based on <code>AnsibleModule</code> and modules in interpreted languages, the body of which contains the word <code>WANT_JSON</code> .  For example, in our <code>bash</code> module you can add the comment <code># WANT_JSON</code> . </li><li>  Through injecting a JSON object into a file.  Used for modules in interpreted languages, the body of which has a marker <code>&lt;&lt;INCLUDE_ANSIBLE_MODULE_JSON_ARGS&gt;&gt;</code> .  Before sending the module to the target host, this string will be replaced with a JSON object with parameters. </li></ul><br><p>  If you create a module based on <code>AnsibleModule</code> , then there is no need to take care of how parameters are passed - the base class will do all the underhood work. </p><br><h3 id="klass-ansiblemodule">  Class <code>AnsibleModule</code> </h3><br><p>  To simplify the development of custom modules in Ansible there is a class <code>AnsibleModule</code> .  It takes on the processing of parameters, checking their types and valid values, and also provides a set of auxiliary methods for working with files, checksums and other things. </p><br><p>  As a basic example, look at the <code>ping</code> module code: </p><br><pre> <code class="hljs python"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ansible.module_utils.basic <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AnsibleModule <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> module = AnsibleModule( argument_spec=dict( data=dict(required=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, default=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>), ), supports_check_mode=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span> ) result = dict(ping=<span class="hljs-string"><span class="hljs-string">'pong'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> module.params[<span class="hljs-string"><span class="hljs-string">'data'</span></span>]: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> module.params[<span class="hljs-string"><span class="hljs-string">'data'</span></span>] == <span class="hljs-string"><span class="hljs-string">'crash'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> Exception(<span class="hljs-string"><span class="hljs-string">"boom"</span></span>) result[<span class="hljs-string"><span class="hljs-string">'ping'</span></span>] = module.params[<span class="hljs-string"><span class="hljs-string">'data'</span></span>] module.exit_json(**result) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">'__main__'</span></span>: main()</code> </pre> <br><p>  A module is described that has the only valid, but optional, parameter <code>data</code> .  It supports verification mode, the <code>--check</code> key when starting Ansible.  As a result, returns <code>pong</code> or the value of the <code>data</code> parameter.  If to transfer <code>crash</code> as data, the module "falls" with an error. </p><br><p>  For more complex examples, you can refer to the <a href="https://github.com/ansible/ansible/tree/devel/lib/ansible/modules">code of other modules</a> .  In this regard, it is convenient that Ansible is an open source project. </p><br><h3 id="primer-modulya">  Module example </h3><br><p>  One of the convenient cases for writing a module is a wrapper for <code>shell</code> commands.  If you can do some operation on the target host via the command line using the <code>shell</code> / <code>command</code> modules, but you need to use it often in different playbooks and you want to make the code beautiful and readable.  I will analyze a little mythical, but no less working, an example of setting the volume level in the operating system: </p><br><pre> <code class="hljs pgsql">#!/usr/bin/python # -*- coding: utf<span class="hljs-number"><span class="hljs-number">-8</span></span> -*- DOCUMENTATION = <span class="hljs-string"><span class="hljs-string">''' --- module: osx_volume short_description: Set OS X volume level description: - Set OS X volume level or mute flag options: level: description: - Volume level to be applied aliases: - volume required: false muted: description: - Set mute on/off required: false author: - Konstantin Suvorov '''</span></span> EXAMPLES = <span class="hljs-string"><span class="hljs-string">''' - name: Set volume to 25 osx_volume: level: 25 - name: Mute osx_volume: muted: yes '''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ansible.module_utils.basic <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AnsibleModule <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> subprocess <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span>, check_output def get_volume(): <span class="hljs-keyword"><span class="hljs-keyword">level</span></span> = check_output([<span class="hljs-string"><span class="hljs-string">'osascript'</span></span>,<span class="hljs-string"><span class="hljs-string">'-e'</span></span>,<span class="hljs-string"><span class="hljs-string">'output volume of (get volume settings)'</span></span>]).strip() muted = check_output([<span class="hljs-string"><span class="hljs-string">'osascript'</span></span>,<span class="hljs-string"><span class="hljs-string">'-e'</span></span>,<span class="hljs-string"><span class="hljs-string">'output muted of (get volume settings)'</span></span>]).strip() muted = (muted.lower() == "true") <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">level</span></span>), muted) def set_volume(<span class="hljs-keyword"><span class="hljs-keyword">level</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, muted=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">call</span></span>([<span class="hljs-string"><span class="hljs-string">'osascript'</span></span>,<span class="hljs-string"><span class="hljs-string">'-e'</span></span>,<span class="hljs-string"><span class="hljs-string">'set volume output volume {}'</span></span>.format(<span class="hljs-keyword"><span class="hljs-keyword">level</span></span>)]) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> muted <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: mute_str = <span class="hljs-string"><span class="hljs-string">'true'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> muted <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">'false'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span>([<span class="hljs-string"><span class="hljs-string">'osascript'</span></span>,<span class="hljs-string"><span class="hljs-string">'-e'</span></span>,<span class="hljs-string"><span class="hljs-string">'set volume output muted {}'</span></span>.format(mute_str)]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> get_volume() def main(): module = AnsibleModule( argument_spec=dict( <span class="hljs-keyword"><span class="hljs-keyword">level</span></span>=dict(<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>=<span class="hljs-string"><span class="hljs-string">'int'</span></span>, required=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, default=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, aliases=[<span class="hljs-string"><span class="hljs-string">'volume'</span></span>]), muted=dict(<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>=<span class="hljs-string"><span class="hljs-string">'bool'</span></span>, required=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, default=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>) ), supports_check_mode=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span> ) req_level = module.params[<span class="hljs-string"><span class="hljs-string">'level'</span></span>] req_muted = module.params[<span class="hljs-string"><span class="hljs-string">'muted'</span></span>] l, m = get_volume() result = dict(<span class="hljs-keyword"><span class="hljs-keyword">level</span></span>=(req_level <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> req_level <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> l), muted=(req_muted <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> req_muted <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> m), changed=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> req_level <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> l != req_level: result[<span class="hljs-string"><span class="hljs-string">'changed'</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> elif req_muted <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> m != req_muted: result[<span class="hljs-string"><span class="hljs-string">'changed'</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> module.check_mode <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> result[<span class="hljs-string"><span class="hljs-string">'changed'</span></span>]: module.exit_json(**result) new_l, new_m = set_volume(<span class="hljs-keyword"><span class="hljs-keyword">level</span></span>=req_level, muted=req_muted) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> req_level <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> new_l != req_level: module.fail_json(msg="Failed to set requested volume level {} (actual {})!".format(req_level, new_l)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> req_muted <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> new_m != req_muted: module.fail_json(msg="Failed to set requested mute flag {} (actual {})!".format(req_muted, new_m)) module.exit_json(**result) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">'__main__'</span></span>: main()</code> </pre> <br><p>  I will not disassemble the module code in detail - you can see it yourself.  The module adjusts the volume level, controls the <code>mute</code> mode in MacOS.  Supports dry-run mode.  It will display the status <code>changed=true</code> if the values ‚Äã‚Äãshould change.  The module is idempotent, and if you apply it twice with the same parameters, it will not do anything and will display the status <code>changed=false</code> . </p><br><h3 id="otladka-moduley">  Debugging modules </h3><br><p>  An option without any preparatory work - run Ansible with the <code>ANSIBLE_KEEP_REMOTE_FILES=1</code> setting <code>ANSIBLE_KEEP_REMOTE_FILES=1</code> and the <code>-vvv</code> logging <code>-vvv</code> .  In this case, Ansible will not delete the generated module and parameter files, but will leave them in a temporary folder on the target host.  Advanced logging will allow you to see the path of the directory in which the files are located. </p><br><p>  We go to the target host on SSH, go to the desired folder, for example, <code>cd /tmp/ansible-tmp-1488291604.43-129413612218427</code> .  Now we can locally run, modify and debug our module.  If the module is written based on <code>AnsibleModule</code> , then it can be run with debugging commands: </p><br><ul><li>  <code>explode</code> - unpack the "archive" in the folder for further modification </li><li>  <code>execute</code> - launch the module from the folder obtained in the previous step </li></ul><br><p>  For example, if we debug the <code>ping</code> module in this way, then: </p><br><ul><li>  <code>./ping.py</code> - run the module from the "package" </li><li>  <code>./ping.py explode</code> - will unpack the module and parameters in the <code>debug_dir</code> folder </li><li>  <code>./ping.py execute</code> - run the module from the debug_dir <code>debug_dir</code> (with all the changes we make there) </li></ul><br><p>  Another option is to use the <a href="https://github.com/ansible/ansible/blob/devel/hacking/test-module">test-module</a> utility.  It allows you to prepare the file with the parameters and the "packaging" of the module in the same way as Ansible does in real work.  This option allows you to test modules locally and much faster than through Ansible;  easier to connect debugger. </p><br><h3 id="rasprostranenie-moduley">  Module Distribution </h3><br><p>  In order for Ansible to ‚Äúsee‚Äù the module, it must be located on the local machine in the module search paths.  By default, this is the <code>./library</code> directory next to the playbook, but this setting can be changed in the configuration file or through environment variables. </p><br><p>  If you are using roles, there may also be a <code>library</code> folder with your module inside the role, for example <code>./roles/myrole/library/mymodule.py</code> .  In this case, if the role <code>myrole</code> was applied in the <code>myrole</code> , then <code>mymodule</code> will become available.  The role can even be empty, without the <code>tasks/main.yml</code> . </p><br><h3 id="dokumentirovanie-moduley">  Documenting Modules </h3><br><p>  Modules are useful for documenting!  If the documentation inside Python modules is described in the <code>DOCUMENTATION</code> and <code>EXAMPLES</code> variables in accordance with a specific format (see example above), then information about your module can be conveniently viewed using the <code>ansible-doc</code> utility from the standard Ansible package. </p><br><p>  In addition to the reference information about the module, this utility can generate "snippets" for inserting into the code of playbooks, for example: </p><br><pre> <code class="hljs pgsql">$ ansible-doc -s postgresql_db - <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> remove PostgreSQL databases <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> a remote host. action: postgresql_db <span class="hljs-keyword"><span class="hljs-keyword">encoding</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">Encoding</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">database</span></span> lc_collate # <span class="hljs-keyword"><span class="hljs-keyword">Collation</span></span> <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> (LC_COLLATE) <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> use <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the data lc_ctype # <span class="hljs-type"><span class="hljs-type">Character</span></span> classification (LC_CTYPE) <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> use <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> t login_host # Host running the <span class="hljs-keyword"><span class="hljs-keyword">database</span></span> login_password # The <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> used <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> authenticate <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> login_unix_socket # <span class="hljs-type"><span class="hljs-type">Path</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> a Unix <span class="hljs-keyword"><span class="hljs-keyword">domain</span></span> socket <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> connecti login_user # The username used <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> authenticate <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span>= # <span class="hljs-type"><span class="hljs-type">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">database</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> remove <span class="hljs-keyword"><span class="hljs-keyword">owner</span></span> # <span class="hljs-type"><span class="hljs-type">Name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">role</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">owner</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the databas port # <span class="hljs-keyword"><span class="hljs-keyword">Database</span></span> port <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>. ssl_mode # Determines whether <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> what priority a secu ssl_rootcert # Specifies the <span class="hljs-type"><span class="hljs-type">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> a file containing SSL cer state # The <span class="hljs-keyword"><span class="hljs-keyword">database</span></span> state <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">Template</span></span> used <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">database</span></span></code> </pre> <br><hr><br><p>  Well, it's time to complete the article on modules.  Given the previous articles, you can now extend the functionality of Ansible in all directions!  If you have any questions, ask in the comments - I will try to answer or prepare another article.  Stay tuned! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/348118/">https://habr.com/ru/post/348118/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348106/index.html">Office 365. An example of working with the Microsoft Graph API in Angular5 using ADAL JS. ADAL JS vs MSAL JS</a></li>
<li><a href="../348108/index.html">How to destroy the Internet?</a></li>
<li><a href="../348110/index.html">Visualization of data for moviegoers: scrap movie recommendations and make interactive graph</a></li>
<li><a href="../348112/index.html">Wolfram Language (Mathematica) Virtual Textbook, 5th Edition</a></li>
<li><a href="../348116/index.html">‚ÄúProgrammer pragmatist. The journey from the apprentice to the master ": briefly about the main thing (part one)</a></li>
<li><a href="../348120/index.html">Managing Internet modules Laurent from RouterOS MikroTik</a></li>
<li><a href="../348122/index.html">Issue # 9: IT training - current issues and challenges from leading companies</a></li>
<li><a href="../348124/index.html">Why most people do not use two-factor authentication?</a></li>
<li><a href="../348126/index.html">Can I use the CQRS pattern in GO?</a></li>
<li><a href="../348128/index.html">R as a lifeline for the system administrator</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
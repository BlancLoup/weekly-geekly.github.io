<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Visualization of static and dynamic networks on R, part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Very many systems and phenomena are representable in the form of networks, i.e. a set of objects and relationships between them. The network is not on...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Visualization of static and dynamic networks on R, part 1</h1><div class="post__text post__text-html js-mediator-article">  Very many systems and phenomena are representable in the form of networks, i.e.  a set of objects and relationships between them.  The network is not only an abstraction, but also an illustrative data visualization tool.  You can display the importance of an object, the weight of each connection, indicate the key groups of elements, highlight them and emphasize the connections between them.  The main task of visualization is to submit key information about the properties of a system or phenomenon as easy as possible for perception.  In the ideal case, system analysis and visualization of its results can be done within a single tool.  R with its extensive package of packages allows it. <br><a name="habracut"></a><br><h4>  Introduction: Network Visualization </h4><br>  The main thing when designing a network visualization is the goal to be achieved.  What structural properties would we like to highlight? <br><img src="https://habrastorage.org/files/92d/8e5/453/92d8e5453f0543aa8bf59211fe0a1ea7.png" width="75%"><br><br>  Network maps are by no means the only graph visualization tool - in some cases, other formats for representing networks are preferable, even simple graphs of key properties. <br><img src="https://habrastorage.org/files/1dc/f60/6d6/1dcf606d67904c928a7bba6739b9c8c1.png" width="75%"><br><br>  In maps of networks, as well as in other visualization formats, there are several key settings that affect the final result.  The main ones are color, size, shape and relative position. <br><img src="https://habrastorage.org/files/bf2/22c/7cd/bf222c7cd8c34645b14577db4f2c14a0.png" width="75%">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Modern graph views are optimized based on performance requirements and aesthetic considerations.  In particular, it is necessary to minimize the overlap and intersection of the edges, to establish the same length of edges in the graph. <br><img src="https://habrastorage.org/files/11a/631/c0a/11a631c0a6ca499fa058c131c8dbbb88.png" width="75%"><br><br><h4>  Data format, size and preparation </h4><br>  In this guide, we will mainly work with two small datasets.  Both contain information about the media.  One contains a network of hyperlinks and mentions in news resources.  Another is a network of links between objects and mass media consumers.  Although there is little data in the examples, many of the ideas from the generated visualizations can be extended to medium and large networks.  For the same reason, we will rarely use visual tools, for example, the shape of vertex symbols: they are almost impossible to distinguish in large graphs.  Moreover, when displaying very large networks, you can even hide edges, since you need to focus on identifying and displaying groups of vertices.  Generally speaking, the size of networks that can be visualized with R is limited only by the amount of RAM in your machine.  But it should be emphasized that in many cases the visualization of large networks in the form of a giant pom-pom is far less useful than graphs with the key properties of the graph. <br><br>  This guide uses several key packages that must be installed before proceeding.  Some more libraries will be mentioned, but they are optional and can be skipped.  The following main libraries will be used - <a href="http://igraph.org/">igraph</a> (supported by <a href="http://gaborcsardi.org/">Gabor Zardi</a> and <a href="http://hal.elte.hu/~nepusz/">Tamas Nepush</a> ), <a href="http://cran.r-project.org/web/packages/sna/">sna</a> , <a href="http://cran.r-project.org/web/packages/network/">network</a> (supported by <a href="http://erzuli.ss.uci.edu/~buttsc/">Carter Butts</a> and <a href="http://statnet.org/">the Statnet team</a> ) and <a href="http://cran.r-project.org/web/packages/ndtv/">ndtv</a> (supported by <a href="http://skyeome.net/wordpress/">Sky Bender de Moll</a> ). <br><pre><code class="python hljs">install.packages(<span class="hljs-string"><span class="hljs-string">"igraph"</span></span>) install.packages(<span class="hljs-string"><span class="hljs-string">"network"</span></span>) install.packages(<span class="hljs-string"><span class="hljs-string">"sna"</span></span>) install.packages(<span class="hljs-string"><span class="hljs-string">"ndtv"</span></span>)</code> </pre> <br><br><h4>  Data Set 1: Edge List </h4><br>  The first data set to work with consists of two files: ‚ÄúMedia-Example-NODES.csv‚Äù and ‚ÄúMedia-Example-EDGES.csv‚Äù (you can download it <a href="">here</a> ). <br><pre> <code class="python hljs">nodes &lt;- read.csv(<span class="hljs-string"><span class="hljs-string">"Dataset1-Media-Example-NODES.csv"</span></span>, header=T, <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>=T) links &lt;- read.csv(<span class="hljs-string"><span class="hljs-string">"Dataset1-Media-Example-EDGES.csv"</span></span>, header=T, <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>=T)</code> </pre><br>  Examine the data: <br><pre> <code class="python hljs">head(nodes) head(links) nrow(nodes); length(unique(nodes$id)) nrow(links); nrow(unique(links[,c(<span class="hljs-string"><span class="hljs-string">"from"</span></span>, <span class="hljs-string"><span class="hljs-string">"to"</span></span>)]))</code> </pre><br>  Please note that there are more edges than unique ‚Äúfrom‚Äù - ‚Äúto‚Äù combinations.  This means that there are cases in the data when there is more than one connection between two vertices.  We will roll all the edges of the same type between two nodes, summing their weights using the <code>aggregate()</code> function on "from", "to" and "type": <br><pre> <code class="python hljs">links &lt;- aggregate(links[,<span class="hljs-number"><span class="hljs-number">3</span></span>], links[,<span class="hljs-number"><span class="hljs-number">-3</span></span>], sum) links &lt;- links[order(links$<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>, links$to),] colnames(links)[<span class="hljs-number"><span class="hljs-number">4</span></span>] &lt;- <span class="hljs-string"><span class="hljs-string">"weight"</span></span> rownames(links) &lt;- NULL</code> </pre><br><br><h4>  Data Set 2: Matrix </h4><br><pre> <code class="python hljs">nodes2 &lt;- read.csv(<span class="hljs-string"><span class="hljs-string">"Dataset2-Media-User-Example-NODES.csv"</span></span>, header=T, <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>=T) links2 &lt;- read.csv(<span class="hljs-string"><span class="hljs-string">"Dataset2-Media-User-Example-EDGES.csv"</span></span>, header=T, row.names=<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br>  Examine the data: <br><pre> <code class="python hljs">head(nodes2) head(links2)</code> </pre><br>  You can verify that the links2 is the mating matrix for a two-way network: <br><pre> <code class="python hljs">links2 &lt;- <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.matrix(links2) dim(links2) dim(nodes2)</code> </pre><br><br><h4>  Network visualization: first steps with <i>igraph</i> </h4><br>  Let's start by turning the source data into a <a href="http://igraph.org/">igraph</a> network.  To do this, we use the function igraph graph.data.frame, which takes as input two data blocks: d and vertices. <br><ul><li>  <b>d</b> describes the edges of the network.  The first two columns contain the identifiers of the starting and ending vertices for each edge.  The following columns are the parameters of the edge (weight, type, label, other). </li><li>  <b>vertices</b> starts with a vertex identifier column.  All the following columns are interpreted as vertex parameters. </li></ul><br><pre> <code class="python hljs">library(igraph) net &lt;- graph.data.frame(links, nodes, directed=T) net</code> </pre><br><pre> <code class="diff hljs">## IGRAPH DNW- 17 49 -- ## + attr: name (v/c), media (v/c), media.type (v/n), type.label ## (v/c), audience.size (v/n), type (e/c), weight (e/n)</code> </pre><br>  The description of the igraph object begins with four letters: <br><ol><li>  D or U - for directed or undirected graph, respectively. </li><li>  N - for a named graph (where nodes have an attribute <code>name</code> ). </li><li>  W for a weighted graph (where links have a <code>weight</code> attribute). </li><li>  B - for a two-sided graph (where nodes have a <code>type</code> attribute). </li></ol><br>  The next two numbers (17 49) indicate the number of vertices and edges in the graph.  The description also lists the properties of vertices and edges, for example: <br><ul><li>  <code>(g/c)</code> - string property at graph level </li><li>  <code>(v/c)</code> - vertex-level string property </li><li>  <code>(e/n)</code> - property-number at edge level </li></ul><br>  It is also easy to access vertices, edges and their attributes: <br><pre> <code class="python hljs">E(net) <span class="hljs-comment"><span class="hljs-comment">#   "net" V(net) #   "net" E(net)$type #   "type" V(net)$media #   "media" #       : net[1,] net[5,7]</span></span></code> </pre><br>  Now that there is a igraph network, you can make the first attempt to build it. <br><pre> <code class="python hljs">plot(net) <span class="hljs-comment"><span class="hljs-comment">#  !</span></span></code> </pre><br><img src="https://habrastorage.org/files/d4f/e42/3d4/d4fe423d4f174efdb6fefbaf099db865.png" width="30%"><br><br>  It turned out not too beautiful.  Let's start improving the picture by removing the cycles in the graph. <br><pre> <code class="python hljs">net &lt;- simplify(net, remove.multiple = F, remove.loops = T)</code> </pre><br>  You can note that you could use <code>simplify</code> to collapse several edges into one by summing their weights with a command like <code>simplify(net, edge.attr.comb=list(Weight="sum","ignore"))</code> .  The problem is that the combination does not take into account the type of the edge (in our data, ‚Äúhyperlinks‚Äù - links and ‚Äúmentions‚Äù - references). <br><br>  Let's also reduce the size of the arrows and remove the labels (by setting them to <code>NA</code> ): <br><pre> <code class="python hljs">plot(net, edge.arrow.size=<span class="hljs-number"><span class="hljs-number">.4</span></span>,vertex.label=NA)</code> </pre><br><img src="https://habrastorage.org/files/255/c0a/43d/255c0a43d41248098a87a7ff2999daa6.png" width="30%"><br><br>  In part 2: fonts and colors in graphs R. </div><p>Source: <a href="https://habr.com/ru/post/262079/">https://habr.com/ru/post/262079/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../262069/index.html">RabbitMQ Spring tutorial</a></li>
<li><a href="../262071/index.html">How to correctly select and buy Backup Exec 15</a></li>
<li><a href="../262073/index.html">Horizontal scaling of database servers for OLTP systems, or what is on the market</a></li>
<li><a href="../262075/index.html">Writing for Apple Watch something harder Hello, world</a></li>
<li><a href="../262077/index.html">Digest of grocery design, June 2015</a></li>
<li><a href="../262081/index.html">My encryption algorithm</a></li>
<li><a href="../262083/index.html">Wallix vs balabit. Comparison of admin control software [rdp]</a></li>
<li><a href="../262085/index.html">We are looking for speakers! AndroidDevs Meetup 2</a></li>
<li><a href="../262087/index.html">Interview with the coordinator of the Code Club project on teaching children 9-11 years old the basics of programming</a></li>
<li><a href="../262089/index.html">Adding an OpenCV library to an Android Studio project</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
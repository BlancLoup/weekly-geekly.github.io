<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Setting up Ubuntu 8.10 for coding under NVIDIA CUDA</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I decided to get serious about programming distributed computing using this technology. I won‚Äôt tell you in detail what it is, I‚Äôll just say that CUDA...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Setting up Ubuntu 8.10 for coding under NVIDIA CUDA</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/dff/c90/728/dffc90728cb11ca78c9419858e55bb75.jpg" alt="image" align="left"><br><br>  I decided to get serious about programming distributed computing using this technology.  I won‚Äôt tell you in detail what it is, I‚Äôll just say that CUDA is designed for distributed computing not on a processor, but on a video card chip, which allows non-graphical calculations at a phenomenal speed (the performance of the GeForce 8800 GTX chip in mathematical calculations is approximately equal to 180 (!) - nuclear Pentium 4 1.5 GHz).  This is mainly used to solve scientific problems, such as modeling various complex systems.  By the way, this technology uses the latest version of Adobe Photoshop (CS4) - rendering of images and many effects are processed using CUDA.  The technology is supported by video cards on NVIDIA chips from 8 series and newer, including, of course, Quadro and Tesla. <br><br>  No sooner said than done.  I will customize my ubuntu for this case, and at the same time I will tell about my experience;) <br><a name="habracut"></a><br>  <i>Note:</i> <br>  1. Examples for CUDA can be safely written and compiled even on a computer without a supported video card, but they will work a hundred times slower than if it is available. <br>  2. There is a known problem - CUDA has a bad relationship with the gcc-4.3 compiler, which is installed by default in Ubuntu 8.10, so you have to roll back to gcc-4.1.  Details below :) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Let's start! </h4><br>  First, install the necessary libraries. <br> <code>$ sudo apt-get install linux-headers-`uname -r` binutils pkg-config build-essential xserver-xorg-dev libc-dev</code> <br> <br>  The most important thing here is libc-dev, without its presence nothing will work. <br><br>  Great, continue!  Now set up the compiler.  First, download the gcc and g ++ version we need (this is important - their version must be the same).  The easiest way to do this is through Synaptic, finding gcc-4.1 and g ++ - 4.1 there, but you can also write it to the console: <br> <code>$ sudo apt-get install gcc-4.1 g++-4.1</code> <br> <br>  We need to configure the system to use the compiler we need (see ADF at the end!).  This is done ridiculously simple: <br> <code>$ sudo rm -d /usr/bin/gcc <br> $ sudo ln -s /usr/bin/gcc-4.1 /usr/bin/gcc <br> $ sudo rm -d /usr/bin/g++ <br> $ sudo ln -s /usr/bin/g++-4.1 /usr/bin/g++</code> <br> <br>  By the way, it is easy to replace the ‚Äúold‚Äù compiler - it is enough to replace 4.1 in the above commands with 4.3. <br>  And, of course, we need the CUDA components themselves - the video driver, the toolkit and the SDK.  We take them from the <a href="http://www.nvidia.com/object/cuda_get.html">home site</a> .  We specify the system 8.04, everything will work fine and so. <br><br>  Since we are going to use the latest version - choose packages for 2.1: <br>  1. CUDA Driver - NVIDIA-Linux-x86-180.06-pkg1.run <br>  (Thanks to Comrade <b>Frosty</b> - driver version 180.22 was recently released, you can download it, of course, from the <a href="http://www.nvidia.ru/object/linux_display_ia32_180.22_ru.html">official site</a> . The installation procedure is no different) <br>  2. CUDA Toolkit - cuda-linux-rel-nightly-2.1.1635-3065709.run <br>  3. CUDA SDK code samples - cuda-sdk-linux-2.10.1126.1520-3141441.run <br><br>  Save them somewhere on the disk (it is desirable that the path to them does not contain spaces and Cyrillic characters) and install <b>chmod + x</b> for all three packages.  The preliminary stage is completed! <br><br><h4>  Actually installation. </h4><br>  First you need to put the video driver.  It is set as standard: <br> <code>$ sudo -s -H <br> # /etc/init.d/gdm stop</code> <br> <br>  Hit Ctrl + Alt + F1 and log in.  Then: <br> <code># sh NVIDIA-Linux-x86-180.06-pkg1.run</code> <br>  We are offered to download precompiled headers from the NVIDIA server.  Refuse. <br>  Then we are offered to compile them for our core.  We agree. <br>  We are waiting for a few seconds - and voila!  The driver is installed. <br>  Now you can run X-Server again: <br> <code># /etc/init.d/gdm start</code> <br> <br>  Now we need to tweak one file a bit: <br> <code>$ sudo gedit /etc/default/linux-restricted-modules-common</code> <br> <br>  there you need to fix the line on this <br><blockquote>  DISABLED_MODULES = "nvidia nvidia_legacy nvidia_new" </blockquote><br>  Save and rebuy.  If the X server does not start, you can simply restore the configuration file: <br> <code>$ sudo cp /etc/X11/xorg.conf.backup /etc/X11/xorg.conf</code> <br> <br>  and review their actions for errors. <br><br>  Fine!  Now install the remaining two components: <br> <code>$ sudo ./cuda-linux-rel-nightly-2.1.1635-3065709.run <br> $ sudo ./cuda-sdk-linux-2.10.1126.1520-3141441.run</code> <br> <br>  The paths (in the first case, <b>/ usr / local / cuda</b> and <b>$ HOME / NVIDIA_CUDA_SDK</b> in the second) should be left as default in order to avoid. <br><br>  Now we dig a little environment variables.  They are stored in <b>/ etc / environment</b> in Ubuntu.  You need to add to <b>PATH</b> : "/ usr / local / cuda: / usr / local / cuda / bin".  And then it remains to edit one file: <br> <code>$ sudo gedit /etc/ld.so.conf</code> <br> <br>  Add to the end <br><blockquote>  # NVIDIA CUDA v2.1 support <br>  / usr / local / cuda / lib </blockquote><br>  and type <b>ldconfig</b> : <br> <code>$ sudo ldconfig</code> <br> <br>  Everything, it is possible to start to rejoice!  Now we go to the SDK directory and try to collect examples. <br> <code>$ cd ~/NVIDIA_CUDA_SDK <br> $ make</code> <br> <br>  By the way, do not forget about the parameters of the command <b>make</b> .  When compiling code under CUDA, they may be: <br>  - release configuration - <b>make</b> <br>  - debug configuration - <b>make dbg = 1</b> <br>  - emurelease configuration - <b>make emu = 1</b> <br>  - emudebug configuration - <b>make emu = 1 dbg = 1</b> <br><br>  Do not forget that if there is no compatible video card on your computer, you must set the parameter <b>emu = 1</b> . <br><br>  That's all!  Now, if everything is assembled correctly (if not, double-check if the version of gcc and g ++ is right), you can go to the <b>~ / NVIDIA_CUDA_SDK / bin / linux / release /</b> directory and enjoy the examples.  Personally, I liked <b>fluidsGL the most</b> . <br><br>  If there are any shortcomings - I will try to fix it.  Good luck! <br><br>  <b>APD</b> : I was asked at once by two comrades ( <a href="http://3dm.habrahabr.ru/">3dm</a> and <a href="http://timyr-lan.livejournal.com/profile">timyr_lan</a> ) to correct the way to change the default compiler.  Thanks for the amendment. <br>  Correct to do this: <br><blockquote>  export CC = "gcc-4.1" <br>  export CPP = "cpp-4.1" <br>  export CXX = "g ++ - 4.1" <br><br>  Register in ~ / .bashrc or just set these variables before compiling CUDA code. </blockquote><br><br>  <b>APD2</b> : Number 2 option, even simpler: <br><blockquote>  $ <code>gedit ~/NVIDIA_CUDA_SDK/common/common.mk</code> <br>  # Compilers <br>  NVCC: = $ (CUDA_INSTALL_PATH) / bin / nvcc. <br>  CXX: = g ++ - 4.1 <br>  CC: = gcc-4.1 <br>  LINK: = g ++ - 4.1 -fPIC </blockquote></div><p>Source: <a href="https://habr.com/ru/post/48720/">https://habr.com/ru/post/48720/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../48708/index.html">Interesting facts about platforms for smartphones. Ideal not.</a></li>
<li><a href="../48711/index.html">The same idea sold 2 times?</a></li>
<li><a href="../48712/index.html">Have you used mock objects?</a></li>
<li><a href="../48714/index.html">Game Set</a></li>
<li><a href="../48717/index.html">In pursuit of illiteracy</a></li>
<li><a href="../48721/index.html">How to distribute 4.5 exabytes</a></li>
<li><a href="../48723/index.html">Client and CGI programs in PHP with common environment variables in bash_profile</a></li>
<li><a href="../48724/index.html">Virtual Debit Card</a></li>
<li><a href="../48725/index.html">Crayon Physics Deluxe has been released.</a></li>
<li><a href="../48726/index.html">Send POST via file_get_contents ()</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
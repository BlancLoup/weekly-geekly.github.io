<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Inclusion of a shared address book in Zimbra</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In our company, Zimbra Collaboration Server is used as the mail server. And although when typing the address, suitable names are automatically substit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Inclusion of a shared address book in Zimbra</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/2bb/74c/081/2bb74c081802c164ec7e5e28017ebf86.jpg" align="left">  In our company, Zimbra Collaboration Server is used as the mail server.  And although when typing the address, suitable names are automatically substituted into the address field, once the task was to make a general address book based on the GAL (global address list).  The advantage of this book is that it is always up to date, account operations (delete / add / edit) are automatically applied to the book and displayed to all users.  In principle, the task is not difficult, but as it turned out, somewhat complicated.  Therefore, I will describe the whole process in order to help those who are faced with a similar one.  And also I will give examples of correcting possible errors. <br><br>  <i>The description concerns the Zimbra Coloboration Server version 7.1.x installed on the Ubuntu server.</i>  <i>Describes the GAL setting in Internal mode.</i>  <i>Used materials from the article <a href="http://wiki.zimbra.com/wiki/GAL_Sync_Account">GAL Sync Account</a> , as well as Zimbra forum</i> <br><a name="habracut"></a><br>  In general terms, the operation looks like this.  To get a user with a shared address book, which after a certain interval is synchronized with the GAL server. <br><br>  <i>The official guide suggests using the name galsync@domain.com.</i>  <i>In general, it does not matter what the name of this user will be called and what the name of the address book will be.</i>  <i>Share name users can always change.</i>  <i>But if you want originality, you can choose a name to your taste.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In our case, the account will be called addressbook@rabota.loc, and the share will be named users. <br><br>  <i>Think through the username in advance.</i>  <i>After activating it as a GAL sync, changing it will be not only impossible, but rather problematic.</i>  <i>In no case do not delete the created user galsync.</i>  <i>To correct the error received in the future is also difficult.</i> <br><br>  You can perform the operation on the establishment of the user galsync with a shared resource from the command line on behalf of the user zimbra: <br> <code>zmgsautil createAccount -a addressbook@rabota.loc -n users --domain rabota.loc -t zimbra -f users</code> <br> <br>  To synchronize your address book with a GAL: <br> <code>zmgsautil forceSync -a addressbook@rabota.loc -n users</code> <br> <img src="https://habrastorage.org/storage2/91e/096/a74/91e096a74e90012a5335bc83cf99445b.png"><br><br>  Or through admin panel: <br>  In the Administration Server window, in the ‚ÄúConfiguration‚Äù section, select ‚ÄúDomains‚Äù, select the domain name, go to the GAL tab, Click the ‚ÄúConfigure GAL‚Äù button. <br><img src="https://habrastorage.org/storage2/95f/4cc/822/95f4cc822ccb628733a48b83a60f5717.png"><br><br>  Enter user galsync name, share name, update time (minimum 60 seconds). <br><img src="https://habrastorage.org/storage2/c51/dfb/168/c51dfb168a2e9d069c70e3a5529a02a9.png"><br><br>  Click "Next", click "Finish". <br>  After that, the GAL settings will look like this: <br><img src="https://habrastorage.org/storage2/ac5/626/efd/ac5626efd14ad207a5398e5eaf6b3cde.png"><br><br>  To synchronize the address book of a new user with the GAL list, execute the command on behalf of the Zimbra user: <br> <code>zmgsautil forceSync -a addressbook@rabota.loc -n users</code> <br> <br>  You can make sure that the user is created by looking at the list of accounts. <br><img src="https://habrastorage.org/storage2/991/541/460/991541460b30c72a047b9b222e2a36c0.png"><br><br>  Next, go to the next step - sharing the book for access. <br>  Go to the addressbook of the user addressbook, <br><img src="https://habrastorage.org/storage2/c43/7f4/a8a/c437f4a8aeb07fd6bea4247be9c70360.png"><br><br>  Right-click on the _users folder, select "Shared access to the address book", enter the user (s), define access rights, click "OK". <br><img src="https://habrastorage.org/storage2/b05/b16/8b4/b05b168b441726f1ae8ddf5621d0537a.png"><br><br>  Now we go into the mail of the user who was given access.  And we see something like the following message: <br><img src="https://habrastorage.org/storage2/c37/841/b94/c37841b94efbe067544492bfc2917ed0.png"><br><br><img src="https://habrastorage.org/storage2/3ed/126/c12/3ed126c12ee88828353abd7c31ca30d3.png"><br><br>  Click the button ‚ÄúAccept the sharing profile‚Äù, call the resource the desired name <br><img src="https://habrastorage.org/storage2/310/11d/28f/31011d28f5956931c33b291a316ad1b5.png"><br><br>  and get the address book automatically synchronized with the GAL. <br><img src="https://habrastorage.org/storage2/1fa/1e4/168/1fa1e4168543bb3c8497237f68bf601a.png"><br><br>  <b>Error correction.</b> <br>  And so you disobeyed the advice above and decided to change the user created by GALsync.  Unfortunately, it will not work to change it with admin tools.  To do this, have to resort to using the command line. <br><br>  On behalf of Zimbra user: <br> <code>$ zmgsautil deleteAccount -a addressbook@rabota.loc <br> $ zmgsautil createAccount -a galuser@rabota.loc -n gbook --domain rabota.loc -t zimbra -f gbook <br> <i> : galuser@rabota.loc 76fd93f6-39ea-4f55-92ea-7ed6f8442dd8</i> <br> $ zmprov modifyDomain rabota.loc zimbraGalAccountId 76fd93f6-39ea-4f55-92ea-7ed6f8442dd8</code> <br> <br>  After that, in the Administration Server window, in the Configuration section, select Domains, select the domain name, go to the GAL tab, change the GAL polling interval, and click Save.  The purpose of this procedure to achieve the message "There is no such account" <br><img src="https://habrastorage.org/storage2/cc0/70c/6b7/cc070c6b74c6e8e7cf7ab38860f61a16.png"><br><br>  Without this step, for some reason, the changes are not applied.  But after that, click "Configure GAL" and in the window "GAL Setup Wizard" we see the newly created user. <br><img src="https://habrastorage.org/storage2/f47/e0e/3b6/f47e0e3b685c032fecc5ff124b0fbc8a.png"><br><br>  Do not forget to click "Next" and "OK" <br><br>  And one more case of an error I had to deal with was removing a galsync user from the admin area.  This is a blunder.  Its result is this: <br><img src="https://habrastorage.org/storage2/e73/840/8af/e738408af2b5a0e5c77ff47078f097d0.png"><br><br>  This error is almost solved: <br> <code>$ zmgsautil createAccount -a galuser@rabota.loc -n gbook --domain rabota.loc -t zimbra -f gbook <br> <i> : galuser@rabota.loc 76fd93f6-39ea-4f55-92ea-7ed6f8442dd8</i> <br> $ zmprov modifyDomain rabota.loc zimbraGalAccountId 76fd93f6-39ea-4f55-92ea-7ed6f8442dd8</code> </div><p>Source: <a href="https://habr.com/ru/post/134981/">https://habr.com/ru/post/134981/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../134972/index.html">Automating the processing of citizens in the E1 system of the Euphrates - as we did</a></li>
<li><a href="../134973/index.html">Connecting the HP LJ 1010/1015/1018/1020 printer in Linux Debian (Ubuntu) with CUPS 1.4 and higher</a></li>
<li><a href="../134974/index.html">Installing Redis + Redis PHP + phpRedisAdmin on the production server in 15 minutes</a></li>
<li><a href="../134977/index.html">Customer is always right</a></li>
<li><a href="../134979/index.html">Graphics Station Virtualization on Parallels Workstation Extreme</a></li>
<li><a href="../134982/index.html">Storing passwords in Chrome</a></li>
<li><a href="../134985/index.html">We use home Internet MTS</a></li>
<li><a href="../134987/index.html">uWSGI includes full PHP support.</a></li>
<li><a href="../134989/index.html">Sketch - 100 seconds about SmartTV</a></li>
<li><a href="../134990/index.html">JRuby acceleration three times after installing JDK 7u2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
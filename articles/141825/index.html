<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Protecting traffic with Comodo TrustConnect and DNSCrypt</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Previously, I did not pay enough attention to encryption, since the data transmitted in public places was not of great importance, but today I saw thi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Protecting traffic with Comodo TrustConnect and DNSCrypt</h1><div class="post__text post__text-html js-mediator-article">  Previously, I did not pay enough attention to encryption, since the data transmitted in public places was not of great importance, but today I saw this as the other side of the coin.  At the institute, as usual, on a pair of computer science, students sat on VKontakte, Habr√©, and other resources and foreshadowed nothing.  Everyone was ignorant of what was happening on the other side of the network.  And there was going on WireShark, kindly showing the teacher of the addresses of the pages visited, the spurs and, accordingly, the index of the "attention" of the students.  At this point, I realized - we are in danger of not passing the session. <br>  Then I decided to find a way to hide actions on the network. <br><a name="habracut"></a><br><br><h4>  Search for a solution </h4><br>  Earlier I used TOR, but its speed was low, and I didn‚Äôt trust him that he would hide all requests on all ports.  Then I began, for the umpteenth time, to look for a free VPN.  And then where do not take the <a href="http://habrahabr.ru/post/141483/">article about Comodo TrustConnect</a> (since my article is its logical continuation, first read it).  I started to happily install packages and register, though I was confused by the phrase about blocked ports, but it was expected that at least HTTP would work tolerably.  Free cheese in a mousetrap showed its true face.  I launch VPN, but the pages do not open - the DNS does not pass. <br><br><h4>  Google to the rescue </h4><br>  Armed with Google an hour later, we find that the DNS is simply blocked and must be redirected. <br>  I will briefly describe the VPN setup for Linux (detailed on the site after registration): we put openvpn, then just copy ca.crt and free_client.conf from the instructions on the site in / etc / openvpn. <br>  Then you can create a pass file, write a login on the first line, a second password (but it‚Äôs better not to keep everything in clear text) <br>  Then we run <br> <code>sudo openvpn --config /etc/openvpn/free_client.conf --auth-user-pass /etc/openvpn/pass</code> <br>  Well, add to /etc/openvpn/free_client.conf: <br> <code>route &lt; DNS&gt; 255.255.255.255 net_gateway</code> <br>  And lo and behold, everything works! <br>  That's just in tcpdump you can see how DNS requests are sent and the visited site is lit! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  DNS encrypted </h4><br>  Fortunately, 10 minutes later, DNSCrypt from OpenDNS was found.  Under Archlinux, it was enough to install the dnscrypt-proxy package from aur and run it.  In the log gives the address through which the requests go.  To work we enter instead of the DNS in the free_client.conf config this address.  For example in my case <br> <code>route 208.67.220.220 255.255.255.255 net_gateway</code> <br>  Everything, after that, all traffic goes through VPN, and DNS requests go through DNSCrypt.  In tcpdump addresses are not lit.  Beauty. </div><p>Source: <a href="https://habr.com/ru/post/141825/">https://habr.com/ru/post/141825/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../141817/index.html">Simple parallax effect for a promo site</a></li>
<li><a href="../141818/index.html">Mozilla developers introduced Firefox build with WebRTC support and browser video chat</a></li>
<li><a href="../141819/index.html">Music players in Android</a></li>
<li><a href="../141820/index.html">Today IndexTank turns off all its servers</a></li>
<li><a href="../141822/index.html">Speakers at UA PyCon</a></li>
<li><a href="../141826/index.html">Tim Cook will open the D10 conference</a></li>
<li><a href="../141827/index.html">The simplest compression algorithms: RLE and LZ77</a></li>
<li><a href="../141829/index.html">Samba <3.6.4 (CVE-2012-1182) remote execution of arbitrary code with root-rights</a></li>
<li><a href="../141830/index.html">How Instagram prepared for the launch of the Android application</a></li>
<li><a href="../141832/index.html">Google Chrome 19 introduces open tabs sync.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Abnormal GraphQL in Electron or as I wrote a desktop client for Tinder</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prehistory 





 Hi, Habr. At the beginning of the winter of 2016, I became lonely again. After some time, I decided to get a profile in Tinder. All ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Abnormal GraphQL in Electron or as I wrote a desktop client for Tinder</h1><div class="post__text post__text-html js-mediator-article"><h1 id="predystoriya">  Prehistory </h1><br><p><img src="https://habrastorage.org/web/cb1/9a3/659/cb19a3659f094e0ca6abd3e652090f6a.jpg" alt="frustration and decision"></p><br><p>  Hi, Habr.  At the beginning of the winter of 2016, I became lonely again.  After some time, I decided to get a profile in Tinder.  All would be nothing, but gradually fatigue began to accumulate due to the impossibility of typing normally on the physical keyboard.  I saw several solutions to this problem: </p><br><ul><li>  Put up and continue to use the official app for your smartphone </li><li>  Use <a href="http://www.bluestacks.com/">BlueStacks</a> with the official Android app. </li><li>  Use existing desktop clients ( <a href="https://github.com/drux31/tinderplusplus">Tinder ++</a> ) </li><li>  Write your </li></ul><br><p>  The first version did not suit me because of the fundamental superiority of the real keyboard over the screen.  The second option was not suitable due to the fact that after all this would be an application that was not optimized for the desktop.  The third option was all good except design, bugs, and low activity in the repository.  Later, Tinder ++ received a letter from Tinder lawyers and the project was completely folded.  Thus, for me personally, the choice was obvious. </p><a name="habracut"></a><br><h1 id="start">  Start </h1><br><p><img src="https://habrastorage.org/web/0f4/dec/58d/0f4dec58d1e9419ca527e3114de06f66.jpg" alt="man is swamped by terms"></p><br><p>  First of all, it should be noted that Tinder does not have an open API, but it was <a href="https://gist.github.com/rtt/10403467">opened</a> in 2014 using MITM.  That was enough for writing a client. </p><br><p>  Perhaps the only thing that almost did not change during the difficult fate of the project was <a href="https://electron.atom.io/">Electron</a> . </p><br><p>  I was impatient to play around with <a href="https://facebook.github.io/react/">React</a> , so the standard combination react + <a href="http://redux.js.org/">redux</a> + <a href="https://redux-saga.js.org/">redux-saga</a> + <a href="https://facebook.github.io/immutable-js/">immutable</a> was chosen.  By May, the first version was written, but there were problems with <del>  my crooked hands </del>  architecture.  It turned out that in order to make redux fast, a lot of manual work is required: memoization, shouldComponentUpdate, selector factories, and the like. </p><br><div class="spoiler">  <b class="spoiler_title">Looking back, it‚Äôs probably not the case.</b> <div class="spoiler_text"><p>  Also, perhaps, it was not worth every time to request the whole story and merge it with the existing store using Immutable.Map.mergeDeep </p></div></div><br><p>  In any case, the verbosity of redux and redux-saga began to bore me.  My constant impression was that the library was struggling with me instead of helping. </p><br><div class="spoiler">  <b class="spoiler_title">About Redux</b> <div class="spoiler_text"><p>  I do not want to say that redux is a bad library.  From an aesthetic point of view, it is very elegant.  And if it allows you to write good code, then this is the most important thing.  However, it cannot be denied that it is usually required to create a lot of auxiliary code along the way, even for simple things. </p></div></div><br><p>  So, the redux style did not suit me, but in the logs I blamed it and react.  I had only one thing left. </p><br><h1 id="perestat-pisat">  Stop writing </h1><br><p><img src="https://habrastorage.org/web/2bc/ab7/c17/2bcab7c176564828b4c6d144bc59981c.jpg" alt="pain and sadness"></p><br><p>  Of course, the title is slightly provocative.  In fact, the diploma protection period, the session, the collection of documents for the magistracy, military training, and moving to another country approached.  But as soon as everything got better, I moved on to the next item. </p><br><h1 id="perepisat-vsyo-1">  Rewrite everything # 1 </h1><br><p>  New stack included <a href="https://infernojs.org/">Inferno</a> and <a href="https://mobx.js.org/">MobX</a> .  Both of these libraries promised good performance with a minimum of hands-on work (as it turned out later, not quite).  In general, it was pleasant to work with them, thanks to MobX, the code became much more concise, but at the same time three problems grew. </p><br><h3 id="gde-hranit-istoriyu">  Where to store the story? </h3><br><p><img src="https://habrastorage.org/web/fbc/175/b15/fbc175b159d94e44b068a1596e8bd5fe.jpg" alt="original data path"></p><br><p>  The first obvious solution was to use localStorage.  For this, I used the wonderful <a href="https://localforage.github.io/localForage/">localForage</a> library.  However, JSON.stringify and JSON.parse with each saving and retrieving of history (and the history was saved anew each time completely with each update) did not add joy.  Even the fact that now I requested only updates from the server and merged them with history did not allow achieving the desired performance. </p><br><p><img src="https://habrastorage.org/web/9a9/af3/bfd/9a9af3bfdf95460084f465091466a788.jpg" alt="data path with IndexedDB to WebWorker"></p><br><p>  The next solution was to use IndexedDB, and for maximum performance, the <a href="http://dexie.org/">Dexie.js</a> library was chosen.  It quickly became clear that updating only the changed data significantly adds speed, but the interface lags were still noticeable.  Then I made all the work with IndexedDB in WebWorker and everything seemed to be working out. </p><br><h3 id="kak-sinhronizirovat-dannye">  How to synchronize data? </h3><br><p><img src="https://habrastorage.org/web/89e/707/5b0/89e7075b05684bec80e889eacd6c4d14.jpg" alt="full data path with IndexedDB to WebWorker + MobX"></p><br><p>  To request the Tinder API, you need to install special headers for mimicry under their Android client.  For security reasons, browser-based JS does not support such tricks, so all requests were made from the main process of Electron. </p><br><p>  Thus, the data passed the following way: </p><br><ol><li>  Receiving from the server in the main process and sending to WebWorker </li><li>  Processing, writing to IndexedDB, and sending to renderer </li><li>  Writing to MobX repositories, which provided an interface update </li></ol><br><p>  This made it possible to achieve acceptable performance, but the stores expanded and each time carefully merging the data into IndexedDB, and then in MobX meant doing the same job twice with your hands.  In addition, there was a third problem. </p><br><h3 id="syraya-infrastruktura-inferno">  Inferno Raw Infrastructure </h3><br><p><img src="https://habrastorage.org/web/4e9/fe2/688/4e9fe2688b4e47d8be1380119e4b3053.jpg" alt="developer against mammoth"></p><br><p>  Inferno defeats competitors in speed in almost all benchmarks, but developer productivity is just as important.  Despite the existence of inferno-compat, many React libraries still did not work.  It was hardly possible to start the <a href="http://www.material-ui.com/">material-ui</a> , did not load <a href="https://bvaughn.github.io/react-virtualized">react-vistualized</a> . </p><br><h3 id="reshenie-o-perehode">  Transition decision </h3><br><p>  Of course, most of the missing things were pretty simple and easy to write on your own.  In some places it was possible to start a React library using a pair of dirty hacks.  But in general, this situation began to bore me, as did the manual synchronization of the database and reactive storage.  I tried to contribute to the Inferno repository, but for a long time I did not have enough.  Three processes for such a simple application also seemed brute force.  I wanted something declarative and not requiring a heap of code for support. </p><br><h1 id="perepisat-vsyo-2">  Rewrite all number 2 </h1><br><p><img src="https://habrastorage.org/web/50f/6c6/5bf/50f6c65bf3b047eca6149adf9dd1fd6c.jpg" alt="data path with GraphQL"></p><br><p>  This time the decision was more balanced.  Compatibility with React is needed - we just use React, such benchmarks are important only if you display thousands of elements.  Do not like too many processes - it means data should be stored in the same place where they come from, in the main process.  In general, I like MobX and its advantages, but it becomes not very convenient to work with large storages - hence, MobX remains as a manager of the local state of components, and for global data something else is used. </p><br><p>  If you read the title of the article, then <em>something else</em> will be obvious to you.  Of course, this is GraphQL.  <a href="http://dev.apollodata.com/">Apollo is</a> used as a client.  At first, the solution will seem unusual, but with a little thought, you will find many advantages: </p><br><ul><li>  Data is not transmitted over the network, but via IPC, which means there is practically no delay. </li><li>  Apollo automatically merges data in its redux repository </li><li>  Declarative data feed to components </li><li>  Ready solutions for complex things like optimistic updates </li></ul><br><p>  Of course, in Apollo, by default there is no support for IPC, but it is possible to create your own network interface.  It is very simple: </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { ipcRenderer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'electron'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { GRAPHQL } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'shared/constants'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uuid <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'uuid'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { print } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'graphql/language/printer'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ElectronInterface</span></span></span><span class="hljs-class"> </span></span>{ ipc listeners = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(ipc = ipcRenderer) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ipc = ipc <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ipc.on(GRAPHQL, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.listener) } listener = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event, args</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { id, payload } = args <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!id) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Listener ID is not present!'</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> resolve = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.listeners.get(id) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!resolve) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">`Listener with id </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${id}</span></span></span><span class="hljs-string"> does not exist!`</span></span>) } resolve(payload) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.listeners.delete(id) } printRequest(request) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...request, <span class="hljs-attr"><span class="hljs-attr">query</span></span>: print(request.query) } } generateMessage(id, request) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { id, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.printRequest(request) } } setListener(request, resolve) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = uuid.v1() <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.listeners.set(id, resolve) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> message = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.generateMessage(id, request) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ipc.send(GRAPHQL, message) } query = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">request</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setListener.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, request)) } }</code> </pre> <br><p>  The following is the request processing code in the main process.  All factories create ServerAPI class methods. </p><br><p>  Code to execute GraphQL query: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// @flow import { ServerAPI } from './ServerAPI' import { graphql } from 'graphql' export default function callGraphQLFactory(instance: ServerAPI) { return function callGraphQL(payload: any) { const { query, variables, operationName } = payload return graphql( instance.schema, query, null, instance, variables, operationName ) } }</span></span></code> </pre><br><p>  Code to create a response message: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// @flow export default function generateMessage(id: string, res: any) { return { id, payload: res } }</span></span></code> </pre> <br><p>  The code that processes the request and returns the data: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// @flow import { ServerAPI } from './ServerAPI' import { GRAPHQL } from 'shared/constants' type RequestArguments = { id: string, payload: any } export default function processRequestFactory(instance: ServerAPI) { return async function processRequest(event: Event, args: RequestArguments) { const { id, payload } = args const res = await instance.callGraphQL(payload) const message = instance.generateMessage(id, res) if (instance.app.window !== null) { instance.app.window.webContents.send(GRAPHQL, message) } } }</span></span></code> </pre> <br><p>  And finally, in the constructor, create a subscriber to the message: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { ipcMain } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'electron'</span></span> ipcMain.on(GRAPHQL, instance.processRequest)</code> </pre> <br><p>  Now, when each update is received, it is recorded in the <a href="https://github.com/louischatriot/nedb">NeDB</a> database, then the main process sends a message to the renderer process about the need to <a href="https://github.com/louischatriot/nedb">re-request the</a> actual data using IPC. </p><br><h1 id="dopolneniya">  Additions </h1><br><h3 id="navigaciya">  Navigation </h3><br><p>  I didn‚Äôt want to use <a href="https://reacttraining.com/react-router/">react-router for a</a> long time.  The fact is that I found their large-scale rewriting of the API and was not eager to step on the same rake again.  Therefore, first I connected a <a href="http://router5.github.io/">router5</a> + self-written middleware that syncs in MobX.  Inside Electron, de facto, there are no URLs in the usual sense, so the idea of ‚Äã‚Äãstoring the state of navigation in a jet vault was excellent.  However, despite the fact that such a bundle gives you complete control over navigation, sometimes it requires too much extra code. </p><br><p>  I combined the transition to react-router @ v4 with a partial transition from Flexbox to a CSS Grid.  These things seem to be made for each other.  It seems that this time the react-router command really worked! </p><br><h3 id="sistema-sborki">  Assembly system </h3><br><p>  At first I used <a href="https://webpack.github.io/">webpack</a> and <a href="https://github.com/electron-userland/electron-packager">electron-packager</a> , but during the last major change I switched to <a href="https://beta.electronforge.io/">electron-forge</a> .  As far as I understand, in the future this package will become a standard solution for building and distributing applications on Electron.  It includes an electron-packager for assembly and <a href="https://github.com/electron/electron-compile">electron-compile</a> , which allows JS / TS transpiling, compiling other formats (Less, Stylus, SCSS), and much more with almost no configuration. </p><br><h1 id="rezultaty">  results </h1><br><p><img src="https://habrastorage.org/web/552/359/f87/552359f871df4cbfa1ecf41a5e25acb8.jpg" alt="pins in graphql"></p><br><p>  With GraphQL, I got rid of a large amount of my code (and hence my bugs).  Adding new features to the code has become much easier.  I and the application began to work faster. </p><br><p>  I hope that this approach will help someone in creating his applications on Electron.  I plan to allocate the implementation of GraphQL-over-IPC in a separate npm package, so that it can be conveniently used. </p><br><h1 id="plany-razvitiya">  Development plans </h1><br><p>  For version 2.0, I would like to </p><br><ul><li>  Rewrite to TypeScript at least the main process </li><li>  Add search for messages and contacts </li><li>  Add the ability to block the user and edit your profile </li></ul><br><h1 id="dlya-interesuyuschihsya">  For those interested </h1><br><p>  ‚Üí <a href="https://github.com/wasd171/chatinder">GitHub</a> <br>  ‚Üí <a href="https://wasd171.github.io/chatinder">Site</a> </p><br><div class="spoiler">  <b class="spoiler_title">Screenshot</b> <div class="spoiler_text"><p><img src="https://wasd171.github.io/chatinder/assets/screenshot.png" alt="screenshot"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">findings</b> <div class="spoiler_text"><ul><li>  Declarative is better than imperative </li><li>  If you are sure that you want to rewrite everything to X, then first think: <br><ul><li>  Is it worth rewriting? </li><li>  Is X the best choice? </li><li>  Spend a week searching for alternatives and weigh all the pros and cons </li></ul></li></ul></div></div><br><p>  Thanks to <a href="https://www.facebook.com/scriberka">Julia Kurdi</a> for the wonderful illustrations! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/331446/">https://habr.com/ru/post/331446/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331436/index.html">Monitoring System Delays with JHiccup</a></li>
<li><a href="../331438/index.html">Artificial Intelligence Half-Life SDK: Retrospective</a></li>
<li><a href="../331440/index.html">Medici effect or is it possible to cross a peach and melon or Windows and iOs</a></li>
<li><a href="../331442/index.html">Consider Kotlin more closely</a></li>
<li><a href="../331444/index.html">Dynamic Apache NiFi cluster creation</a></li>
<li><a href="../331448/index.html">‚ÄúI can't just walk with the flag‚Äú Postgres - our everything ‚Äù. We need to prove with our hands that this works ‚Äù- Alexey Lustin</a></li>
<li><a href="../331450/index.html">Post-mortem Age of Empires</a></li>
<li><a href="../331452/index.html">Make QR Codes Great Again or Apple‚Äôs Camera Revolution</a></li>
<li><a href="../331454/index.html">Using music instead of a language course in learning a foreign language</a></li>
<li><a href="../331456/index.html">How we gopher apples fed or effective backend on Go for iOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
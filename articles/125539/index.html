<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>As in PVS-Studio, we solved one engineering problem for several years.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At first, I wanted to call this note ‚ÄúHow PVS-Studio allows CHEAP to introduce static code analysis into the development process‚Äù, but did not dare be...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>As in PVS-Studio, we solved one engineering problem for several years.</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/94d/812/99b/94d81299bef776eef690ed0c1107aaa4.png" align="left"><br>  At first, I wanted to call this note ‚ÄúHow PVS-Studio allows CHEAP to introduce static code analysis into the development process‚Äù, but did not dare because of the ambiguous interpretation of the word ‚Äúcheap‚Äù.  Therefore, I will talk about one engineering problem that we constantly had to solve in order for people to use our product.  Looking ahead, I will say that I think we have solved it. <br><br><a name="habracut"></a><br><br>  So, having developed the first version of the static code analyzer (which was then called Viva64 and detected 64-bit errors) at the beginning of 2007, we were faced with the problem of introducing the tool with clients.  Our client is a company in which at least several dozen developers, and at least several hundred thousand lines of code.  Any static analyzer on such a code will give a bunch of warnings.  For example, we received up to several thousand messages per project with our tool. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Yes, of course, there is a problem with the false positives of the analyzer.  However, any analyzer has false positives and cannot get away from them.  There was a question - what to do with a large number of messages that the user receives?  That is, the problem looks like this.  The potential user downloads the program (trial), starts it and receives ten thousand messages.  Naturally, it saddens him, then uninstall, and we lost the client. <br><br>  The first thing we did was immediately remove the duplicate messages.  The analyzer checks projects in C / C ++ and it happens that an error in the .h file can be generated when checking several .cpp files that use it.  We do not duplicate it.  Then we added the ability to filter the analysis results (and constantly improve them): filtering by error code, by message text, the ability to not check files by mask, etc.  All this allowed to significantly reduce the number of messages, but only after setting.  The user for the first time still received a mountain of messages.  Thus, message filtering is an important tool, but it did not solve the original problem ‚Äî the difficulty of integrating the tool into the development process. <br><br>  Then a new mechanism ‚ÄúMark as False Alarm‚Äù appeared in the analyzer.  This is an insertion into the code of comments of a special type (// - V112) for suppressing the messages of the analyzer.  By marking the code in this way in the future you can receive messages about problems only in those code fragments where there is no such markup yet.  Ideally, this is just a new code.  Although the problem of integrating the analyzer into the team development process has become a bit simpler, all the same, it is necessary that several people from the team first tag the code, eliminating the obviously garbage messages. <br><br>  The next step to solving the implementation problem was the ability to check only files modified in the last few days.  This is much closer to starting to benefit from static analysis right away.  But the problem still remains.  The user does not know about this feature, and if it is turned on by default, it will not be clear why so few files are checked.  But, again, the direction seemed to us correct. <br><br>  Therefore, we went ahead and made a new super feature ‚ÄúIncremental Analysis after Build‚Äù.  Now the analyzer is launched immediately after compilation and checks only those files that were ‚Äúhit‚Äù by the user's edits.  Unlike checking files for several days (when edits of the development team could be checked), now the user sees ONLY errors in the code that he directly touches. <br><br>  The programmer will no longer worry about a large amount of code that he does not touch.  Perhaps this code for more than 5 years.  It is practically not modified and most of the defects in it have already been fixed.  This code does not need to rush to check in the first place and the analyzer does not.  The programmer will see warnings only in fresh code.  And if he has extra time, he will always be able to check the whole project, looking in the most rarely visited places. <br><br>  Yes, there are still false analyzer alarms.  Yes, all the same, filters have not lost their relevance.  But another important.  We managed to reduce the cost of IMPLEMENTATION (the cost of human effort for commissioning) of the static analyzer to zero.  That is, now the person downloads a static analyzer, installs it, and immediately starts to benefit from it without any additional actions. <br><br>  However, it lacked the finishing touch.  Everything is good, but only that the analyzer found errors was very poorly noticeable.  Changing the color of the window icon of PVS-Studio (as we did at first) is not so noticeable, and in Visual Studio 2005 it will not work at all.  The solution was a pop-up notification. <br><img src="https://habrastorage.org/getpro/habr/post_images/42d/d9e/1dc/42dd9e1dc6edc1ca3f285135fc327c08.png"><br>  Of course, we all do not like all sorts of annoying pop-up notifications.  But in this case, it will be clearly useful to the programmer, and will rarely appear, provided that he does not abuse errors in the code. <br><br>  Thus, the engineering problem of introducing static analysis into the development process was solved.  Therefore, in PVS-Studio 4.34, the Incremental Analysis after Build mode will be enabled by default. <br><br>  The conclusion is simple.  Now, developers can not be afraid of the difficulties of implementing static code analysis, but simply <a href="http://www.viva64.com/ru/pvs-studio-download/">download</a> PVS-Studio, install it and look at the errors that will be detected in the newly developed code. </div><p>Source: <a href="https://habr.com/ru/post/125539/">https://habr.com/ru/post/125539/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../125528/index.html">As the modern image codecs shake the sound. JPEG2000 vs MP3</a></li>
<li><a href="../125529/index.html">How Amazon App Store Deals Developers</a></li>
<li><a href="../125530/index.html">Nginx will receive full support for HTTP / 1.1 Keep-Alive connections with back-end</a></li>
<li><a href="../125533/index.html">Search for public transport in mobile 2GIS</a></li>
<li><a href="../125534/index.html">WordPress Theme Vulnerability</a></li>
<li><a href="../125540/index.html">Layar Announces Launch Of New Layar Vision Platform</a></li>
<li><a href="../125544/index.html">‚ÄúGmail phone‚Äù has become cheaper and localized in 38 languages.</a></li>
<li><a href="../125545/index.html">How to correctly comment on the code</a></li>
<li><a href="../125547/index.html">Guerrilla marketing - your weapon in social networks</a></li>
<li><a href="../125548/index.html">Where to get capital to budding entrepreneurs - continued</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Prism Developer Guide - Part 5, MVVM Pattern Implementation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Table of contents 


1. Introduction 
2. Initializing Prism Applications 
3. Manage dependencies between components 
4. Modular Application Developmen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Prism Developer Guide - Part 5, MVVM Pattern Implementation</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <b>Table of contents</b> <br><ol><li>  <a href="http://habrahabr.ru/post/176851/">Introduction</a> </li><li>  <a href="http://habrahabr.ru/post/176853/">Initializing Prism Applications</a> </li><li>  <a href="http://habrahabr.ru/post/176861/">Manage dependencies between components</a> </li><li>  <a href="http://habrahabr.ru/post/176863/">Modular Application Development</a> </li><li>  <a href="http://habrahabr.ru/post/176867/">Implementation of the MVVM pattern</a> </li><li>  <a href="http://habrahabr.ru/post/176869/">Advanced MVVM scripts</a> </li><li>  <a href="http://habrahabr.ru/post/176895/">Creating user interface</a> <br><ol><li>  <a href="http://habrahabr.ru/post/177925/">User Interface Design Recommendations</a> </li></ol></li><li>  <a href="http://habrahabr.ru/post/178009/">Navigation</a> <ol><li>  <a href="http://habrahabr.ru/post/182052/">View-Based Navigation (View-Based Navigation)</a> </li></ol></li><li>  <a href="http://habrahabr.ru/post/182580/">The interaction between loosely coupled components</a> </li></ol></blockquote><br>  The <i>Model-View-ViewModel</i> pattern (MVVM, model-view-view model) helps you to separate business logic and view logic from the user interface.  Supporting the division of responsibility between application logic and UI can make your application easier to test, support, and develop.  It can also significantly improve the reusability of the code and allow developers and designers to collaborate more easily when developing relevant parts of the application. <br><br>  Using the MVVM pattern, the application user interface, presentation logic, and business logic are divided into three separate classes.  This is a view that encapsulates the UI and its logic, a view model that encapsulates view logic and its states, and a model that encapsulates the business logic of the application and data. <br><br>  Prism includes examples and sample implementations that show how to implement the MVVM pattern in Silverlight or in WPF applications.  The Prism library also provides functions that can help implement this pattern.  These functions embody the most common methods for implementing the MVVM pattern and are designed to provide testability and compatibility with Expression Blend and Visual Studio. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This chapter gives a brief overview of the MVVM pattern and describes how to implement it.  Chapter 6 describes how to implement more complex MVVM scripts using the Prism library. <br><br><h3>  Responsibilities and Characteristics of Classes </h3><br>  The MVVM pattern is a close variation of the <i>Presentation Model</i> pattern, optimized to better align with some of the basic WPF and Silverlight features, such as data binding, data patterns, commands, and behavior. <br><br>  In the MVVM pattern, the view encapsulates the UI and any UI logic, the view model encapsulates view logic and its states, and the model encapsulates business logic and data.  The view interacts with the view model through data binding, command, and notification events.  The view model requests data from the model, or subscribe to notifications about their changes, and coordinates updates of the state of the model, and also converts, validates and aggregates, if necessary, the data to display them in the view. <br><br>  The following illustration shows the three parts of the MVVM pattern and their interaction. <br><br><img title="MVVM classes and their interaction." src="https://habrastorage.org/getpro/habr/post_images/f5b/e59/a0c/f5be59a0c9fc545a67d0b1da85f9ec7f.png" alt=" MVVM   ."><br><a name="habracut"></a><br>  As with all patterns of shared views, the key to effectively using the MVVM pattern lies in understanding how to divide your application code into the correct classes, and in understanding the ways in which these classes interact in different scenarios.  The following sections describe the responsibilities and characteristics of each of the classes in the MVVM pattern. <br><br><h4>  <i>View</i> Class </h4><br>  The presentation is responsible for determining what the user sees on the screen.  Ideally, the code-behind view contains only the constructor, which calls the <code>InitializeComponent</code> method.  In some cases, the code-behind may contain UI logic code that implements visual behavior that is difficult or ineffective to express in XAML, such as complex animations, or when the code must directly control the visual elements that are part of the presentation.  It is not allowed to put logic code that needs testing into a representation.  Typically, the code in the code-behind view can be tested through UI automation. <br><br>  In Silverlight and WPF, data binding expressions in a view are evaluated against its data context.  In MVVM, the view model is set as the view data context.  The view model implements properties and commands to which the view can be associated, and notifies the view of any state changes through change notification events.  Usually there is a direct relationship between the view and its view model. <br><br>  Views are generally inherited from the <code>Control</code> or <code>UserControl</code> classes.  However, in some cases, a view may be represented by a data template that defines the elements of the UI that will be used to visually represent the object.  Using data templates, the developer can easily define how the presentation model will be rendered, or can change its default visual presentation without changing the underlying object or its behavior directly. <br><br>  Data templates can be thought of as representations that lack code-behind.  They are designed to bind to certain types of the view model when it should be mapped to the UI.  At run time, the view, as defined by the template, is automatically created and the corresponding view model is set by its data context. <br><br>  In WPF, you can associate a data template with an application-level view model.  Then WPF will automatically apply this data template to any objects of the representation model of the specified type whenever they appear in the UI.  This is known as implicit data patterns.  In Silverlight, you must explicitly define the data template for the view model object within the control that is supposed to display it.  The data template can be defined as embedded in the control that uses it, or defined in the resource dictionary outside the parent view and declaratively combined with the view resource dictionary. <br><br>  Summing up, the presentation has the following key characteristics: <br><ul><li>  A view is a visual element, such as a window, page, user control, or data template.  The view defines the controls, their layout and style. </li><li>  A view references a view model through its <code>DataContext</code> property.  The controls in the view are bound to the properties and commands of the view model. </li><li>  The view can customize the data binding behavior between the view and the view model.  For example, a view can use value converters to format the data that will be shown in the UI, or use validation rules to provide additional validation of user input. </li><li>  The view defines and processes the visual behavior of the UI, such as animations or transitions, which can be triggered by changing the state of the view model, or through user interaction with the UI. </li><li>  Code-behind views can define UI logic to implement some visual behavior that is difficult to express in XAML, or which requires direct references to certain UI controls defined in the view. </li></ul><br><h4>  <i>View Model</i> Class </h4><br>  The view model in the MVVM pattern encapsulates view logic and data for display.  She has no direct reference to the representation or knowledge of the implementation or type of representation.  The view model implements properties and commands to which the view can bind data and notifies the view of any state changes through notification events.  The properties and commands that the view model provides determine the functionality required by the UI, but the view determines how this functionality will be presented to the user. <br><br>  The view model is responsible for coordinating the interaction of the view with the required classes of the model.  Often, there is a one-to-many relationship between the view model and the model classes.  A view model can substitute model classes directly into views so that controls in the view can bind data directly to them.  In this case, model classes must be designed to support data binding and the corresponding change notification events.  For more information about this scenario, see the ‚ÄúData Binding‚Äù section later in this topic. <br><br>  A view model can transform or manipulate model data so that the view can easily use it.  The view model may have additional properties for the specific needs of the view.  These properties usually cannot be part of the model.  For example, the view model can combine the value of two fields to make it easier to display them on the screen, or it can calculate the number of remaining characters as you type for fields with a limited string length.  The view model can also implement data validation logic to ensure their consistency. <br><br>  The view model can also define logical states that the view can use for visual changes in the UI.  A view can define markup or style changes that reflect the state of the view model.  For example, the view model may have a state that indicates that data is asynchronously transmitted to the web service.  The view can show animation during this state to provide visual feedback to the user. <br><br>  Typically, the view model defines commands or actions that can be represented in the UI and invoked by the user.  A typical example is when the view model provides the <code>Submit</code> command, which allows the user to submit data to a web service or repository.  A view can present this command as a button so that the user can press it to transfer data.  As a rule, when a command becomes unavailable, its associated view in the UI becomes disabled.  Commands allow you to encapsulate user actions and separate them from their visual presentation. <br><br>  In summary, the presentation model has the following key characteristics: <br><ul><li>  It is not a visual class and is not inherited from any WPF or Silverlight base class.  It encapsulates the presentation logic needed to support user actions in the application.  The view model is tested independently of the view and model. </li><li>  Usually does not directly refer to the presentation.  It implements the properties and commands to which the view can bind data.  It notifies the view of any state changes through the notification events of the <code>INotifyPropertyChanged</code> and <code>INotifyCollectionChanged</code> . </li><li>  Coordinates the interaction of the view with the model.  It can transform or manipulate data so that it can be easily used by the view, and it can implement additional properties that may not be present in the model.  It can also implement data validation via the <code>IDataErrorInfo</code> or <code>INotifyDataErrorInfo</code> . </li><li>  It can determine the logical states that the view can visually present to the user. </li></ul><br><blockquote>  <b>The note.</b>  <b>View or view model?</b> <br>  Often the definition of where a particular functionality should be implemented is not obvious.  The general rule is: Anything related to a particular visual display and that can be upgraded later (even if you are not currently planning to upgrade it) should be included in the presentation;  anything important to the logic of the application should go into the view model.  In addition, since the view model should not have any explicitly defined knowledge of certain visual elements in the view, code to programmatically control visual elements within the view must be in the view code-behind or encapsulated in behaviors ( <i>Behaviors</i> ).  Similarly, the code for getting or manipulating the data items that should be displayed in a view through data binding must be in the view model.  For example, the highlight color of the selected item in the list box must be defined in the view, but the list of items to display and a link to the selected item must be defined in the view model. </blockquote><br><h4>  Model Class </h4><br>  The model in the MVVM pattern encapsulates business logic and data.  Business logic is defined as any application logic that deals with extracting and managing application data and in order to make sure that business rules are satisfied that guarantee the consistency and validity of the data.  To maximize reusability, models should not contain presentation-specific information, logic, or behavior. <br><br>  Typically, the model represents the essence of the subject area of ‚Äã‚Äãthe client part of the application.  It can contain data structures based on the application's data model and any business and validation logic.  A model may also have access to data and a cache, although usually a separate data repository or the corresponding service is used for this.  Often, the model and data access layer are automatically generated as part of the ADO.NET Entity Framework infrastructure, WCF Data Services, or WCF RIA Services. <br><br>  Typically, the model implements the means to facilitate binding to the view.  This usually means that notifications of changes to properties or collections are supported via the <code>INotifyPropertyChanged</code> and <code>INotifyCollectionChanged</code> .  Classes of models that provide collections of objects are typically inherited from the <code><code>ObservableCollection,     INotifyCollectionChanged .             <code>IDataErrorInfo</code> ( <code>INotifyDataErrorInfo</code> ).     WPF  Silverlight    UI,     .             UI. <br> <b></b> <br> <code>,        ?</code> <br>        ,     <code>INotifyPropertyChanged</code> , <code>INotifyCollectionChanged</code> , <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> .     , ,          .         .        ,    ,        . <br>      : <br>      ,      -.             ,   -    .                  ,    .             <code>INotifyPropertyChanged</code>  <code>INotifyCollectionChanged</code> .        .  ,    ,     <code>ObservableCollection.</code> <br>             <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> . <br>         ,       . <br></code></code> class <code><code>ObservableCollection,     INotifyCollectionChanged</code> .             <code>IDataErrorInfo</code> ( <code>INotifyDataErrorInfo</code> ).     WPF  Silverlight    UI,     .             UI. <br> <b></b> <br> <code>,        ?</code> <br>        ,     <code>INotifyPropertyChanged</code> , <code>INotifyCollectionChanged</code> , <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> .     , ,          .         .        ,    ,        . <br>      : <br>      ,      -.             ,   -    .                  ,    .             <code>INotifyPropertyChanged</code>  <code>INotifyCollectionChanged</code> .        .  ,    ,     <code>ObservableCollection.</code> <br>             <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> . <br>         ,       . <br></code> <code><code>ObservableCollection,     INotifyCollectionChanged</code> .             <code>IDataErrorInfo</code> ( <code>INotifyDataErrorInfo</code> ).     WPF  Silverlight    UI,     .             UI. <br> <b></b> <br> <code>,        ?</code> <br>        ,     <code>INotifyPropertyChanged</code> , <code>INotifyCollectionChanged</code> , <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> .     , ,          .         .        ,    ,        . <br>      : <br>      ,      -.             ,   -    .                  ,    .             <code>INotifyPropertyChanged</code>  <code>INotifyCollectionChanged</code> .        .  ,    ,     <code>ObservableCollection.</code> <br>             <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> . <br>         ,       . <br></code> <blockquote> <code><code>ObservableCollection,     INotifyCollectionChanged</code> .             <code>IDataErrorInfo</code> ( <code>INotifyDataErrorInfo</code> ).     WPF  Silverlight    UI,     .             UI. <br> <b></b> <br> <code>,        ?</code> <br>        ,     <code>INotifyPropertyChanged</code> , <code>INotifyCollectionChanged</code> , <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> .     , ,          .         .        ,    ,        . <br>      : <br>      ,      -.             ,   -    .                  ,    .             <code>INotifyPropertyChanged</code>  <code>INotifyCollectionChanged</code> .        .  ,    ,     <code>ObservableCollection.</code> <br>             <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> . <br>         ,       . <br></code> </blockquote> <code><code>ObservableCollection,     INotifyCollectionChanged</code> .             <code>IDataErrorInfo</code> ( <code>INotifyDataErrorInfo</code> ).     WPF  Silverlight    UI,     .             UI. <br> <b></b> <br> <code>,        ?</code> <br>        ,     <code>INotifyPropertyChanged</code> , <code>INotifyCollectionChanged</code> , <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> .     , ,          .         .        ,    ,        . <br>      : <br>      ,      -.             ,   -    .                  ,    .             <code>INotifyPropertyChanged</code>  <code>INotifyCollectionChanged</code> .        .  ,    ,     <code>ObservableCollection.</code> <br>             <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> . <br>         ,       . <br></code> <ul><li> <code><code>ObservableCollection,     INotifyCollectionChanged</code> .             <code>IDataErrorInfo</code> ( <code>INotifyDataErrorInfo</code> ).     WPF  Silverlight    UI,     .             UI. <br> <b></b> <br> <code>,        ?</code> <br>        ,     <code>INotifyPropertyChanged</code> , <code>INotifyCollectionChanged</code> , <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> .     , ,          .         .        ,    ,        . <br>      : <br>      ,      -.             ,   -    .                  ,    .             <code>INotifyPropertyChanged</code>  <code>INotifyCollectionChanged</code> .        .  ,    ,     <code>ObservableCollection.</code> <br>             <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> . <br>         ,       . <br></code> </li> <li> <code><code>ObservableCollection,     INotifyCollectionChanged</code> .             <code>IDataErrorInfo</code> ( <code>INotifyDataErrorInfo</code> ).     WPF  Silverlight    UI,     .             UI. <br> <b></b> <br> <code>,        ?</code> <br>        ,     <code>INotifyPropertyChanged</code> , <code>INotifyCollectionChanged</code> , <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> .     , ,          .         .        ,    ,        . <br>      : <br>      ,      -.             ,   -    .                  ,    .             <code>INotifyPropertyChanged</code>  <code>INotifyCollectionChanged</code> .        .  ,    ,     <code>ObservableCollection.</code> <br>             <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> . <br>         ,       . <br></code> </li> <li> <code><code>ObservableCollection,     INotifyCollectionChanged</code> .             <code>IDataErrorInfo</code> ( <code>INotifyDataErrorInfo</code> ).     WPF  Silverlight    UI,     .             UI. <br> <b></b> <br> <code>,        ?</code> <br>        ,     <code>INotifyPropertyChanged</code> , <code>INotifyCollectionChanged</code> , <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> .     , ,          .         .        ,    ,        . <br>      : <br>      ,      -.             ,   -    .                  ,    .             <code>INotifyPropertyChanged</code>  <code>INotifyCollectionChanged</code> .        .  ,    ,     <code>ObservableCollection.</code> <br>             <code>IDataErrorInfo</code> ,  <code>INotifyDataErrorInfo</code> . <br>         ,       . <br></code> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/176867/">https://habr.com/ru/post/176867/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../176853/index.html">Prism Developer Guide - Part 2, Initializing Prism Applications</a></li>
<li><a href="../176857/index.html">Stanford invented a fully passive air conditioner</a></li>
<li><a href="../176859/index.html">Chronicles of LinguaLeo: how we did ‚ÄúDialogues in English‚Äù with Node.js and DynamoDB</a></li>
<li><a href="../176861/index.html">Prism Developer Guide - Part 3, managing dependencies between components</a></li>
<li><a href="../176863/index.html">Prism Developer Guide - Part 4, Modular Application Development</a></li>
<li><a href="../176869/index.html">Prism Developer Guide - Part 6, Advanced MVVM Scripts</a></li>
<li><a href="../176877/index.html">How we did the Rubens Pipe</a></li>
<li><a href="../176879/index.html">ePayService at RIF + CIB 2013</a></li>
<li><a href="../176881/index.html">Mitap-group ‚ÄúMoscow Cassandra Users‚Äù starts</a></li>
<li><a href="../176883/index.html">Metric # 4 - Podcast on technologies and design of interfaces and services</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
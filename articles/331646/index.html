<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÄúThere is no such problem in Tarantula as a strong degradation with time and under load‚Äù - Vasily Soshnikov</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we are talking with Vasily Soshnikov , architect and developer of the domestic open source DBMS Tarantool . 

 Due to its ability to provide hig...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>‚ÄúThere is no such problem in Tarantula as a strong degradation with time and under load‚Äù - Vasily Soshnikov</h1><div class="post__text post__text-html js-mediator-article"> <i>Today we are talking with <a href="http://pgday.ru/ru/2017/speakers/120%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3Dsoshnikov"><b>Vasily Soshnikov</b></a> , architect and developer of the domestic open source <b>DBMS Tarantool</b> .</i> <i><br><br></i>  <i>Due to its ability to provide <b>high bandwidth on OLTP-loads</b> , Tarantula enjoys extraordinary popularity and demand among high-tech companies.</i>  <i>Today, Tarantula is used by the largest domestic Web services, telecommunications operators and many other representatives of big business.</i> <i><br><br></i>  <i>At PG Day'17 Russia, Vasily will conduct an <b><a href="http://pgday.ru/ru/2017/papers/147%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3Dsoshnikov">intensive practical course</a></b> on building a scalable distributed architecture for OLTP tasks using only two tools: <b>Tarantool</b> and <b>nginx</b> .</i>  <i>All participants of the course will listen to a brief educational program on the architecture and internal structure of the Tarantula, after which they will <b>plunge</b> into a <b>3-hour practice</b> , during which a fault-tolerant and scalable service will be built from scratch.</i> <i>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </i>  <i>As part of today's conversation, Vasily told about the development of the Tarantula and its role in this process, shared examples of tasks that are solved with the help of Tarantool, spoke about the structure of the roadmap and the principles of the appearance of new ‚Äúfeatures‚Äù in it.</i> <br><br><img src="https://habrastorage.org/web/8f5/1c9/6a5/8f51c96a589f4cafb21d3ba1f382c1cc.jpg"><br><br>  <i><b>PG Day: Vasily, tell me briefly about yourself: who are you, what are you doing, what problems do you solve?</b></i> <br><br>  <b>Vasily</b> : I am a senior developer / architect.  My responsibilities include design and development.  I also sometimes intersect with the business, managerial and organizational components.  It is difficult to characterize my work in one word.  Now I am developing and promoting an open source project Tarantool.  Also sometimes I help other third-party projects, for example <b>Centrifugo</b> (this is a message broker for the web). <br><a name="habracut"></a><br>  Speaking of my passion is video streaming.  I dealt with them once in my life, it was in the RBC company, I created the whole backend for RBC-TV.  It was probably my most interesting project in terms of architecture and code. <br><br>  <i><b>PG Day: What exactly are you doing inside the Tarantool project?</b></i> <br><br>  <b>Basil</b> : Basically, planning and architectural solutions based on Tarantool itself, developing core parts and external modules.  For example, from those developed by me: <b>Tarantool Curl</b> is the binding of libcurl in Tarantool;  <b>Tarantool MQTT</b> - binding for MQTT;  and the module for <b>nginx</b> is a reverse proxy module that converts the HTTP request flow into the Tarantula protocol and vice versa.  As for the core, I recently took part in the transfer of an external project to the core.  It was Tarantool Curl, HTTP is necessary for everyone in the database. <br><br>  <i><b>PG Day: How many people are employed in developing the Tarantula?</b></i>  <i><b>Is there such a thing as a core team?</b></i> <br><br>  <b>Vasily</b> : Yes, of course.  In fact, it is not only developers.  This is also technical writers, a bit of marketing and some others.  In total we are <b>21</b> people.  These are those who sit in Moscow, in the office of Mail.ru, and develop Tarantula.  People from our community make a big contribution.  For example, they add new connectors for different languages, invent features and even implement them! <br><br>  <i><b>PG Day: Why is the Tarantula cool as a database?</b></i>  <i><b>What makes it different from other products?</b></i> <br><br>  <b>Vasily</b> : The answer is simple - OLTP.  In Tarantula there is no such problem as severe degradation with time and under load.  Any disk database, and even some in-memory, is severely degraded.  For example, the same <b>Redis</b> , when it is heavily loaded and at the same time makes a <b>snapshot</b> - we get x2 to the size of the memory and brakes, and this, I note, also occurs under load.  Tarantool doesn‚Äôt have these drawbacks, plus it‚Äôs transactional. <br><br>  Today there are few databases that actually work with predictable latency (response time) and predictable degradation.  Every day I see how the Tarantula works in ‚Äúprod‚Äù, and I know that it will work even in a year, even if the profile of the load changes. <br><br>  <i><b>PG Day: How is such predictability and stability achieved at high transaction loads achieved?</b></i> <br><br>  <b>Vasily</b> : In the <b>internal architecture</b> .  In general, this will be my master class.  Therefore, I do not want to tell now.  If I tell now, it will not be very interesting to listeners.  Who is interested, he will go on the road and will fall into several articles and reports by Konstantin Osipov.  And it is better to come to the master class!  I will draw a beautiful scheme, I will have a rationale on the slides why this works so fast and stably.  So be patient a little more. <br><br>  <i><b>PG Day: Suddenly, but well, such an answer is accepted!</b></i>  <i><b>As I understand it, do you plan to combine theory with practice in a master class?</b></i> <br><br>  <b>Vasily</b> : I have several sections planned.  The first section is the shortest, without practice.  It is about <b>how the Tarantula is built from the inside</b> , what it is and how to use it.  We will also discuss the problems that exist in it;  it is very important - during operation to be aware of all the problems!  The second part - it will be a very light <b>practice</b> .  We will launch Tarantool, see how it works, what the concept of the <b>Application server is</b> .  The third part is the most difficult, we will create a full-fledged service, we will scale it up and, as the cherry on the cake, we will make it all fault tolerant.  I summarize.  Theories will be about 50 minutes, then only practice. <br><br>  <i><b>PG Day: Do participants need knowledge of some programming languages ‚Äã‚Äãor something else?</b></i>  <i><b>Any level of preparation to participate in the practical part?</b></i> <br><br>  <b>Vasily</b> : No, it will not be required, only laptops.  The language of Lua is primitive, I will explain it to everyone.  Configuration files can be taken from my github, I will give a link. <br><br>  <i><b>PG Day: It turns out a kind of plug-n-play: how to take the minimum number of tools and immediately start creating a working architecture.</b></i> <br><br>  <b>Vasily</b> : That's right.  We will create a project that satisfies two requirements: <b>predictable scaling</b> and <b>fault tolerance</b> .  Two technologies will be used: the Tarantula and the nginx (the reverse proxy module I spoke about). <br><br>  <i><b>PG Day: What features do you want to add to the Tarantula?</b></i>  <i><b>Do something cool now that will appear in it soon?</b></i> <br><br>  <b>Vasily</b> : First I want to say that we have a <b>completely open roadmap</b> , which can be influenced by the community.  Probably, SQL is one of the biggest features that is being developed right now, an alpha version is already available.  Our plan: catch up with it to stable, and then start implementing distributed SQL and a full query planner. <br><br>  <i><b>PG Day: Does SQL mean standard SQL or some kind of?</b></i> <br><br>  <b>Basil</b> : We took the <b>SQLite3</b> parser.  SQL standard, if memory serves me, 2003.  But, one must understand that there are some non-standard things in it. <br><br>  <i><b>PG Day: Are there any plans to make the Tarantula SQL built-in compatible with popular DBMSs?</b></i> <br><br>  <b>Vasily</b> : We had such thoughts, but, to be honest, we still do not see much value in this.  Still, I want to keep some originality.  If this is done, then for a specific customer, who will ask us to do it.  But within the framework of the development of a common project, it is unlikely.  Even in the roadmap you will not find it. <br><br>  <i><b>PG Day: Tarantula - is it something that should be taken at the start, when the launch of the product starts, or are there any examples of application in the already established infrastructure?</b></i> <br><br>  <b>Vasily</b> : For new projects, definitely yes.  For old Tarantool can solve some problems.  Let me remind you, OLTP is an ideal case for Tarantool, and this is or will be in all projects. <br><br>  There was a great case recently: Tarantula was used as a <b>read-only replica in the MySQL cluster</b> , all of which made it possible to greatly unload the MySQL cluster and increase the response time.  Created this company Mamba (Wamba). <br><br>  Speaking of the community, colleagues from Mamba themselves developed replication mechanisms between these bases and laid them out in open source for general use.  We learned about this to everyone when a person in our community chat started actively asking about replication. <br><br>  We also have one client who <b>replicated through Oracle GoldenGate in Tarantool</b> .  The scheme is the same: the entire OLTP load is transferred to Tarantool.  This allowed them to save a lot of money and increase response time. <br><br>  <i><b>PG Day: If a company wants to bring your expertise to adapt Tarantool to their realities, what should be done?</b></i> <br><br>  <b>Vasily</b> : On a contract basis. <br><br>  <i><b>PG Day: There are examples of using the Tarantula for other purposes?</b></i>  <i><b>Any recommendations on this?</b></i> <br><br>  <b>Vasily</b> : Yes.  There are people who are trying to make very heavy analytics using one copy of Tarantool!  Without even trying to build a multi-layered architecture that scales easily and flexibly.  This is the most frequent anti-pattern that I have met. <br><br>  A typical story looks like this: first, they make small requests, get high speed and rejoice;  then they start to do very, very heavy queries, Tarantool works worse and this is quite logical, for OLAP you need a completely different architecture, and it must be thought out at the design stage.  Tarantool may be an OLAP base, but this is not the best case for it. <br><br>  <i><b>PG Day: Do you have an idea to make Tarantula a product suitable for stable and fast OLAP?</b></i>  <i><b>Or is it still contrary to his ideology?</b></i> <br><br>  <b>Vasily</b> : Thoughts are there, but this is not yet in the roadmap.  We try to do what we are strong at.  Namely - to <b>process a large number of small transactions</b> , it is quite understandable and large market.  It is clear where to go.  Starting a big development on OLAP without a specific customer is not the best way. <br><br>  <i><b>PG Day: Is the current roadmap formed from current requirements and real precedents?</b></i> <br><br>  <b>Vasily</b> : That's right.  We have several different types of roadmap tasks.  There are very small (roughly speaking, add some option) and rather large (some big problem to eliminate).  There is another type - new <b>development</b> .  All this is made up of the requirements of our customers, users and our own vision of the product. <br><br>  <i><b>PG Day: And at what point do you understand that there is some kind of feature that should get into the roadmap of the product?</b></i> <br><br>  <b>Vasily</b> : This is a difficult question.  It happens quite differently.  I can retell my recent experience. <br><br>  There was such a task: to add the ability to return HTTP statuses and headers from Tarantool to the nginx module.  The idea hung about a year, many voted for this idea, but my hands did not reach implementation.  We got there when two customers appeared who say: ‚ÄúGuys, we have SOAP and REST everywhere, and we really need status codes‚Äù.  Naturally, the feature immediately appeared in open source. <br><br>  <i><b>PG Day: We have already talked a little about the content of the master class.</b></i>  <i><b>Who will be useful in the first place?</b></i> <br><br>  <b>Vasily</b> : I will speak about <b>architecture</b> , about <b>programming</b> - about what I am strong at.  Therefore, first of all, architects, developers.  In general, I invite everyone who wants to learn how to create new projects on the basis of the Tarantula or to apply them to existing ones. <br><br>  <i><b>PG Day: Thank you, Vasily!</b></i>  <i><b>I want to thank you for the time you have given us.</b></i>  <i><b>We look forward to our meeting in St. Petersburg.</b></i> <br><br>  <b>Vasily</b> : Mutually, Roman!  Really looking forward to.  For me it will be an interesting experience. </div><p>Source: <a href="https://habr.com/ru/post/331646/">https://habr.com/ru/post/331646/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331636/index.html">Overview of the main sections of the conference PG Day'17 Russia</a></li>
<li><a href="../331638/index.html">Headache from using math software</a></li>
<li><a href="../331640/index.html">Announcement of Mobius 2017 Moscow: the conquest of Moscow</a></li>
<li><a href="../331642/index.html">Business planning in the gaming industry</a></li>
<li><a href="../331644/index.html">The story of one application: mobile "1C: Management of our company"</a></li>
<li><a href="../331648/index.html">Manual monitoring of site availability (simple tools overview)</a></li>
<li><a href="../331650/index.html">How Pony Express Manages to Deliver</a></li>
<li><a href="../331652/index.html">Google Developers Group and Softline organize the first in Russia "Google Cloud Developer Meetup # 1"</a></li>
<li><a href="../331654/index.html">Warehouse management system using CQRS and Event Sourcing. Setting Requirements</a></li>
<li><a href="../331656/index.html">Protected workplace based on VDI Huawei FusionCloud Desktop Solution 6.1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Auto dependency injection in javascript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 As we all know, javascript is a language in which it is very easy to shoot yourself in the foot. Working with this language for almost ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Auto dependency injection in javascript</h1><div class="post__text post__text-html js-mediator-article"><h3>  Introduction </h3><br>  As we all know, javascript is a language in which it is very easy to shoot yourself in the foot.  Working with this language for almost five years, I have often come across the fact that javascript provides very scant tools for creating high-level abstractions.  And when creating full-fledged MVVM / MVP applications, you encounter the fact that the main problem is the difficulty of keeping the code and abstraction clean, not to mention fully following <a href="http://en.wikipedia.org/wiki/SOLID_(object-oriented_design)">SOLID</a> principles. <br><br>  Over time, I came to understand that one of the main patterns that could help me is <a href="http://en.wikipedia.org/wiki/Dependency_injection">Dependency Injection</a> .  And I decided to experiment with it in JS. <br>  Of course, JS does not provide tools to fully follow this pattern (the elementary absence of the same reflections), so I decided to put on several Acceptance Criteria, which I would like to achieve by adapting this pattern to such a unique environment as JS. <br><a name="habracut"></a><br>  1. Get rid of all possible global variables.  (except for common libraries) <br>  2. The ability to upgrade or change the behavior of the application without changing its code. <br>  3. Have a complete dependency map. <br>  4. Remove all "implicit" in the structure of the application. <br>  <b>5. Make a code that can be covered with tests for 100%</b> <br><br>  After several days of thinking about how I want to see DI manager, I wrote it literally in one evening.  Then, on the weekend, I wrote a small application (WYSIWYG template editor) to look at the bottlenecks in this application creation approach.  As a result, I came to a small manager, providing access to all components of the application, as well as being able to assemble components using the JSON configuration. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Attention please.</b>  Immediately prudpredzhuyu - that this is not a classic Dependency Injection pattern, but very adapted to the JS environment and to my needs, so do not send me with kicks to read the specification.  Criticism will be very happy. <br><br><h3>  Examples of using </h3><br><h5>  Case 1 </h5><br>  The GreeterClass class, which welcomes the user, the greeting method and text is set by injection: <br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> GreeterClass = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.say = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> method = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._getGreetMethod(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> greet = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._getTextMsg(); method(greet); }; }; SERVICES[<span class="hljs-string"><span class="hljs-string">'constructor'</span></span>][<span class="hljs-string"><span class="hljs-string">'greet-class'</span></span>] = GreeterClass; <span class="hljs-comment"><span class="hljs-comment">//      DI</span></span></code> </pre> <br>  We describe the class dependencies: <br><pre> <code class="javascript hljs">SERVICES[<span class="hljs-string"><span class="hljs-string">'dependency'</span></span>][<span class="hljs-string"><span class="hljs-string">'greet-class'</span></span>] = { <span class="hljs-string"><span class="hljs-string">'greetMethod'</span></span> : {<span class="hljs-string"><span class="hljs-string">'object'</span></span> : <span class="hljs-string"><span class="hljs-string">'alert'</span></span>}, <span class="hljs-string"><span class="hljs-string">'textMsg'</span></span> : {<span class="hljs-string"><span class="hljs-string">'value'</span></span> : <span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>} };</code> </pre><br>  We request an instance of the GreeterClass class and call the say method: <br><pre> <code class="javascript hljs">DI.get(<span class="hljs-string"><span class="hljs-string">'greet-class'</span></span>).say();</code> </pre><br>  Result: <br><img src="https://habrastorage.org/storage2/6ee/dad/08d/6eedad08dbefe14d6786cfa4d1fb92f0.png"><br><br><h5>  UPD </h5><br>  This article is not about code, but about the approach to code organization, but I think it‚Äôs worth explaining what happened here.  After the call: <pre> <code class="javascript hljs">DI.get(<span class="hljs-string"><span class="hljs-string">'greet-class'</span></span>).say();</code> </pre> <br>  The following processes occur in DI: <br>  1. Look for 'greet-class' in the list of services, after it is instantiated. <br>  2. Dependencies are loaded. <br>  3. There is a check - whether there are methods in 'greet-class' with the same name as the dependencies. <br>  4. If such methods are not observed - they are created, with the name coinciding with the name of the dependency and a kind of prefix _get.  Such a method returns an injected dependency when called. <br>  5. If such methods exist, they are called, and the dependency is passed as an argument. <br><br>  That is, the methods ._getGreetMethod () and.  _getTextMsg () is art and is created dynamically in the DI manager. <br>  To make it clearer, I made an example with a predefined method: <br><pre> <code class="javascript hljs">SERVICES[<span class="hljs-string"><span class="hljs-string">'constructor'</span></span>][<span class="hljs-string"><span class="hljs-string">'stack'</span></span>] = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stack = []; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.flush = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(stack); }; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.push = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*** some actions ***/</span></span> stack.push(el); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; }; } SERVICES[<span class="hljs-string"><span class="hljs-string">'dependency'</span></span>][<span class="hljs-string"><span class="hljs-string">'stack'</span></span>] = { <span class="hljs-string"><span class="hljs-string">'push'</span></span> : [ {<span class="hljs-string"><span class="hljs-string">'value'</span></span> : <span class="hljs-number"><span class="hljs-number">1</span></span>}, {<span class="hljs-string"><span class="hljs-string">'value'</span></span> : <span class="hljs-number"><span class="hljs-number">2</span></span>}, {<span class="hljs-string"><span class="hljs-string">'value'</span></span> : <span class="hljs-number"><span class="hljs-number">3</span></span>} ] }; DI.get(<span class="hljs-string"><span class="hljs-string">'stack'</span></span>).flush(); <span class="hljs-comment"><span class="hljs-comment">// [1,2,3]</span></span></code> </pre><br>  Here DI called the native push method for each dependency. <br><br><h5>  Case 2 </h5><br>  Let us face the challenge of changing the output method: <br><pre> <code class="javascript hljs">SERVICES[<span class="hljs-string"><span class="hljs-string">'dependency'</span></span>][<span class="hljs-string"><span class="hljs-string">'greet-class'</span></span>] = { <span class="hljs-string"><span class="hljs-string">'greetMethod'</span></span> : {<span class="hljs-string"><span class="hljs-string">'object'</span></span> : <span class="hljs-string"><span class="hljs-string">'console.log'</span></span>}, <span class="hljs-string"><span class="hljs-string">'textMsg'</span></span> : {<span class="hljs-string"><span class="hljs-string">'value'</span></span> : <span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>} };</code> </pre><br><br>  Result: <br><img src="https://habrastorage.org/storage2/0be/853/fee/0be853fee31cb33982478c460c48af8d.png"><br><br>  I changed the implementation without changing the abstraction, which is what I wanted. <br><br><h5>  Case 3 </h5><br>  Now a simple object is injected into greetMethod, but it can also be another service with its dependencies. <br>  DI also has several other responsibilities.  For example, it may be something like a <a href="http://en.wikipedia.org/wiki/Multiton_pattern">"multion"</a> <br><br>  Example: <br><pre> <code class="javascript hljs">SERVICES[<span class="hljs-string"><span class="hljs-string">'config'</span></span>][<span class="hljs-string"><span class="hljs-string">'greet-class'</span></span>] = { <span class="hljs-string"><span class="hljs-string">'singleton'</span></span> : <span class="hljs-literal"><span class="hljs-literal">true</span></span> } DI.get(<span class="hljs-string"><span class="hljs-string">'greet-class'</span></span>) === DI.get(<span class="hljs-string"><span class="hljs-string">'greet-class'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// true</span></span></code> </pre><br><br><h5>  Case 4 </h5><br>  Substitution dependencies find: <br><pre> <code class="javascript hljs">DI.get(<span class="hljs-string"><span class="hljs-string">'greet-class'</span></span>).say(); <span class="hljs-comment"><span class="hljs-comment">// Hello world DI.get('greet-class', {'textMsg' : {'value' : 'Bye world'}}).say(); //Bye world</span></span></code> </pre><br><br><h5>  Case 5 </h5><br>  The ability to create "hacks" that do not fit into the concept of DI (sometimes necessary); <br><pre> <code class="javascript hljs">SERVICES[<span class="hljs-string"><span class="hljs-string">'dependency'</span></span>][<span class="hljs-string"><span class="hljs-string">'greet-class'</span></span>] = { <span class="hljs-string"><span class="hljs-string">'greetMethod'</span></span> : {<span class="hljs-string"><span class="hljs-string">'value'</span></span> : <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">txt</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML = txt}}, <span class="hljs-string"><span class="hljs-string">'textMsg'</span></span> : {<span class="hljs-string"><span class="hljs-string">'value'</span></span> : <span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>} }; DI.get(<span class="hljs-string"><span class="hljs-string">'greet-class'</span></span>).say();</code> </pre><br><br>  Result: <br><img src="https://habrastorage.org/storage2/8a6/a1c/b67/8a6a1cb679c104b8697a1c37bf1e89fe.png"><br><br><h3>  Total </h3><br>  And this is what my DI config looks like for a test application: <br>  / * not yet without hacks * / <br><pre> <code class="javascript hljs">DEPENDENCY[<span class="hljs-string"><span class="hljs-string">'application'</span></span>] = { <span class="hljs-string"><span class="hljs-string">'template-manager'</span></span> : { <span class="hljs-string"><span class="hljs-string">'addWidgetModel'</span></span> : [ { <span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'widget-model'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span> : { <span class="hljs-string"><span class="hljs-string">'domainObject'</span></span> : {<span class="hljs-string"><span class="hljs-string">'instance'</span></span> : <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> WidgetDO(incomingWidget);}}} <span class="hljs-comment"><span class="hljs-comment">/*</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> remove this hack*/</span></span> }, { <span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'widget-model'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span> : { <span class="hljs-string"><span class="hljs-string">'domainObject'</span></span> : {<span class="hljs-string"><span class="hljs-string">'instance'</span></span> : <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> WidgetDO(incomingWidget2);}}} <span class="hljs-comment"><span class="hljs-comment">/*</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> remove this hack*/</span></span> } ], <span class="hljs-string"><span class="hljs-string">'toolsManager'</span></span> : { <span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'widget-manager'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span> :{ <span class="hljs-string"><span class="hljs-string">'addRenderer'</span></span> : { <span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'text-tools-renderer'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span> : { <span class="hljs-string"><span class="hljs-string">'richView'</span></span> : { <span class="hljs-string"><span class="hljs-string">'service-constructor'</span></span> : <span class="hljs-string"><span class="hljs-string">'rich-view'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span>: { <span class="hljs-string"><span class="hljs-string">'setEventManager'</span></span> : { <span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'event-manager'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span> : { <span class="hljs-string"><span class="hljs-string">'setContext'</span></span> : {<span class="hljs-string"><span class="hljs-string">'poll'</span></span> : <span class="hljs-string"><span class="hljs-string">'rich-view'</span></span>} } }, <span class="hljs-string"><span class="hljs-string">'template'</span></span> : {<span class="hljs-string"><span class="hljs-string">'value'</span></span> : <span class="hljs-string"><span class="hljs-string">'code/template/tools.html'</span></span>} } } } }, <span class="hljs-string"><span class="hljs-string">'addHandler'</span></span> : {<span class="hljs-string"><span class="hljs-string">'instance'</span></span> : <span class="hljs-string"><span class="hljs-string">'TextToolsHandler'</span></span>}, <span class="hljs-string"><span class="hljs-string">'containerRenderer'</span></span> : { <span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'rich-view'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span>: { <span class="hljs-string"><span class="hljs-string">'setEventManager'</span></span> : { <span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'event-manager'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span> : { <span class="hljs-string"><span class="hljs-string">'setContext'</span></span> : {<span class="hljs-string"><span class="hljs-string">'poll'</span></span> : <span class="hljs-string"><span class="hljs-string">'rich-view'</span></span>} } }, <span class="hljs-string"><span class="hljs-string">'template'</span></span> : {<span class="hljs-string"><span class="hljs-string">'value'</span></span> : <span class="hljs-string"><span class="hljs-string">'code/template/tools-container.html'</span></span>} } } } }, <span class="hljs-string"><span class="hljs-string">'editorManager'</span></span> : { <span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'widget-manager'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span> :{ <span class="hljs-string"><span class="hljs-string">'addRenderer'</span></span> : { <span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'text-editor-renderer'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span> : { <span class="hljs-string"><span class="hljs-string">'globalEventManager'</span></span> : {<span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'global-event-manager'</span></span>}, <span class="hljs-string"><span class="hljs-string">'richView'</span></span> : { <span class="hljs-string"><span class="hljs-string">'service-constructor'</span></span> : <span class="hljs-string"><span class="hljs-string">'rich-view'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span>: { <span class="hljs-string"><span class="hljs-string">'setEventManager'</span></span> : { <span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'event-manager'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span> : { <span class="hljs-string"><span class="hljs-string">'setContext'</span></span> : {<span class="hljs-string"><span class="hljs-string">'poll'</span></span> : <span class="hljs-string"><span class="hljs-string">'rich-view'</span></span>} } }, <span class="hljs-string"><span class="hljs-string">'template'</span></span> : {<span class="hljs-string"><span class="hljs-string">'value'</span></span> : <span class="hljs-string"><span class="hljs-string">'code/template/editor.html'</span></span>} } } } }, <span class="hljs-string"><span class="hljs-string">'addHandler'</span></span> : {<span class="hljs-string"><span class="hljs-string">'instance'</span></span> : <span class="hljs-string"><span class="hljs-string">'TextEditorHandler'</span></span>}, <span class="hljs-string"><span class="hljs-string">'containerRenderer'</span></span> : { <span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'rich-view'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span>: { <span class="hljs-string"><span class="hljs-string">'setEventManager'</span></span> : { <span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'event-manager'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span> : { <span class="hljs-string"><span class="hljs-string">'setContext'</span></span> : {<span class="hljs-string"><span class="hljs-string">'poll'</span></span> : <span class="hljs-string"><span class="hljs-string">'rich-view'</span></span>} } }, <span class="hljs-string"><span class="hljs-string">'template'</span></span> : {<span class="hljs-string"><span class="hljs-string">'value'</span></span> : <span class="hljs-string"><span class="hljs-string">'code/template/editor-container.html'</span></span>} } } } }, <span class="hljs-string"><span class="hljs-string">'applicationRenderer'</span></span> : { <span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'rich-view'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span>: { <span class="hljs-string"><span class="hljs-string">'setEventManager'</span></span> : { <span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'event-manager'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span> : { <span class="hljs-string"><span class="hljs-string">'setContext'</span></span> : {<span class="hljs-string"><span class="hljs-string">'poll'</span></span> : <span class="hljs-string"><span class="hljs-string">'rich-view'</span></span>} } }, <span class="hljs-string"><span class="hljs-string">'template'</span></span> : {<span class="hljs-string"><span class="hljs-string">'value'</span></span> : <span class="hljs-string"><span class="hljs-string">'code/template/application.html'</span></span>} }} }, <span class="hljs-string"><span class="hljs-string">'widget-manager'</span></span> : {}, <span class="hljs-string"><span class="hljs-string">'widget-model'</span></span> : { <span class="hljs-string"><span class="hljs-string">'eventManager'</span></span> : { <span class="hljs-string"><span class="hljs-string">'service'</span></span> : <span class="hljs-string"><span class="hljs-string">'event-manager'</span></span>, <span class="hljs-string"><span class="hljs-string">'dependency'</span></span> : { <span class="hljs-string"><span class="hljs-string">'setContext'</span></span> : {<span class="hljs-string"><span class="hljs-string">'poll'</span></span> : <span class="hljs-string"><span class="hljs-string">'widget-model'</span></span>} } } }, <span class="hljs-string"><span class="hljs-string">'global-event-manager'</span></span> : { <span class="hljs-string"><span class="hljs-string">'context'</span></span> : {<span class="hljs-string"><span class="hljs-string">'object'</span></span> : <span class="hljs-string"><span class="hljs-string">'window'</span></span>} } }; SERVICES[<span class="hljs-string"><span class="hljs-string">'config'</span></span>] = { <span class="hljs-string"><span class="hljs-string">'global-event-manager'</span></span> : { <span class="hljs-string"><span class="hljs-string">'singleton'</span></span> : <span class="hljs-literal"><span class="hljs-literal">true</span></span> } };</code> </pre><br>  Wow, so many nestings and zavimost?  Well, imagine how to understand all this when even there is no such card. <br>  In my opinion it is very convenient, the map of the entire application is immediately visible, it is possible to take it all in, and most importantly, this approach makes you write the correct code. <br><br>  <b>Another very important point</b> is that this config may be generated on the server and vary from different parameters, for example, for privileged users the config may differ from the standard one, as a result it will see another application. <br><br>  I believe that this approach justifies itself, but I would like to hear objective criticism of both the approach and the manager himself. <br><br>  <a href="">The DI code on GIThub</a> I must say that many moments ‚Äúmay be easier‚Äù, but at the moment I am working on applications for Samsung SmartTV, so it is ‚Äúadapted‚Äù in some places.  He also tried to adhere to the <a href="http://en.wikipedia.org/wiki/KISS_principle">KISS</a> principle.  Naturally, if DI justifies itself, I will add two drivers for reading the config with JSON and XML. <br><br>  <a href="">The demo application about which was written above</a> - wrote directly under webkit, in other browsers did not test.  Alas. <br><br>  PS: I'm already using this approach at work, happy as an elephant.  For complete happiness, it remains only to some kind of contract manager to connect. <br><br>  <b>* Case 1 updated</b> </div><p>Source: <a href="https://habr.com/ru/post/149912/">https://habr.com/ru/post/149912/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149905/index.html">Oracle tightens the screws</a></li>
<li><a href="../149907/index.html">Overview of MyDLP Open Data Control System</a></li>
<li><a href="../149908/index.html">Smartphones with Intel processors will appear in Russia soon</a></li>
<li><a href="../149909/index.html">Stream animation rendering in Qt Quick 2.0</a></li>
<li><a href="../149911/index.html">Optimization of the algorithm for checking the Delaunay condition through the equation of the circumscribed circle and its application</a></li>
<li><a href="../149913/index.html">Maemo-MeeGo story</a></li>
<li><a href="../149914/index.html">Turn the Raspberry Pi into a retro gaming console</a></li>
<li><a href="../149915/index.html">State services. Registration of SP or all is not so transparent</a></li>
<li><a href="../149916/index.html">How to make Time Machine back up to a network drive</a></li>
<li><a href="../149917/index.html">Do you listen to music while working?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
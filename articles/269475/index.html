<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CQRS, UI, based on tasks, Event sources ... ah</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Remark from me. It was not easy to choose terminology, so I am ready to edit the translation in the process in order to improve the understanding of t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CQRS, UI, based on tasks, Event sources ... ah</h1><div class="post__text post__text-html js-mediator-article">  <i>Remark from me.</i>  <i>It was not easy to choose terminology, so I am ready to edit the translation in the process in order to improve the understanding of the text.</i> <br><br>  Many are mistaken about what constitutes a CQRS.  They view CQRS as an architecture, although it is not.  CQRS is a simple template with many architectural features.  CQRS is not the ultimate consistency, eventful, or messaging, it is not a model for reading and writing, and not the use of event sources.  I will try to describe in a few paragraphs what a CQRS is, and then I will consider how it relates to other patterns. <br><a name="habracut"></a><br>  <b>CQRS Command and Query Responsibility Segregation</b> <br><br>  When you start working with CQRS, you need to understand that CQRS is the creation of two objects that were previously one.  The separation is based on the fact that methods are commands or queries (Meyer used the same definition in Command and Query Separation, a command is any method that changes state, and a request is a method that returns a value). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When most people talk about CQRS, they mean applying an approach to an object, which is an application service.  Consider the following pseudo-service code. <br><br>  <b>CustomerService</b> <br><br>  void MakeCustomerPreferred (CustomerId) <br>  Customer GetCustomer (CustomerId) <br>  CustomerSet GetCustomersWithName (Name) <br>  CustomerSet GetPreferredCustomers () <br>  void ChangeCustomerLocale (CustomerId, NewLocale) <br>  void CreateCustomer (Customer) <br>  void EditCustomerDetails (CustomerDetails) <br><br>  Applying CQRS on this will result in two services. <br><br>  <b>CustomerWriteService</b> <br><br>  void MakeCustomerPreferred (CustomerId) <br>  void ChangeCustomerLocale (CustomerId, NewLocale) <br>  void CreateCustomer (Customer) <br>  void EditCustomerDetails (CustomerDetails) <br><br>  <b>CustomerReadService</b> <br><br>  Customer GetCustomer (CustomerId) <br>  CustomerSet GetCustomersWithName (Name) <br>  CustomerSet GetPreferredCustomers () <br><br>  That's all.  This is the whole picture of the CQRS template.  No more. ... It seems entertaining when we describe it in this form, doesn't it?  This division provides an opportunity to bring something interesting in architectural terms.  And what is very important - it helps to stop the process of mental retardation, because two people use the same data, and besides that, they must also use the same <b>data model.</b> <br><br>  The greatest advantage is that it recognizes different architectural properties when working with commands and requests ... For example, it allows us to place two services in different ways: we can place the read service on 25 servers, and the write service on two.  Processing commands and requests is fundamentally asymmetrical, symmetric scaling of these services does not make much sense. <br><br>  <b>Task Based UI (Task Based UI)</b> <br><br>  The task-based user interface is quite different from the CRUD-based interface.  In it, you keep track of what the user is doing, and promote teams that represent his intentions.  I would like to emphasize that CQRS does not require a task-based interface.  You can apply CQRS in a CRUD application (although, for example, creating separate models will be much more difficult). <br><br>  But there is one thing that really requires a similar interface - this is a domain model. <br><br>  The application service layer in the domain model is the tasks that the system can perform.  It is not just such processes as copying data into a domain object and saving it ... Do not forget about the behavior with the object.  Before moving on, let's see what happens if we do it anyway. <br><br>  In our ubiquitous language, there would be no other verbs other than ‚ÄúCreate,‚Äù ‚ÄúDelete,‚Äù and ‚ÄúChange.‚Äù  And as long as there are many domains in which the language is such, you should not use the principle of domain models to build a system. <br><br>  The concept of such an interface does not intend to be part of the CQRS, and the domain may have similar commands, it must follow the user's intentions, which is very important.  Was this update forced or not?  What's the difference?  Depends on what question you put before yourself. <br><br>  Moving on to the next pattern that is misleading in CQRS <br><br>  <b>Sources of events</b> <br><br>  I would like to clarify that when I use this term, I do not mean everything that is written in <a href="http://www.martinfowler.com/bliki/WhatIsaBliki.html">bliki</a> .  I refer to the storage of the current state as a series of events and resume the system state by repeating these series of events ... <br><br>  On the command side of the equation, since ‚Äúreading‚Äù is no longer part of the domain, saving events can be a great way to maintain the current state.  The value will increase if you decide on two separate models (a model for reading and a model for recording) and if you need to integrate them, then you will most likely do this through events.  Since the event persists, why not just use one model to manage the state? <br><br>  <b>Messaging template</b> <br><br>  It is not necessary to use this approach with CQRS.  However, if you divide your data models, you will most likely use messaging between them, because in this case new possibilities appear. <br><br>  Finally, I approached the last ‚Äúapproach‚Äù, although I don‚Äôt like to call it that, because in reality this is a concept that people put in their definitions of CQRS, which goes hand in hand with messaging ... <br><br>  <b>Ultimate consistency</b> <br><br>  The principle of ultimate consistency is also quite often introduced between services.  This is done in view of many architectural motives.  But the biggest advantage is that it allows you to increase scalability and availability.  If you remember the CAP theorem, it says that if there is no consistency, it reinforces the other two properties.  This is very good for models if they are separated, but this is by no means a property of CQRS specifically. <br><br>  Now we can see that CQRS is actually quite a simple template.  Everything that revolves around CQRS is not only CQRS, but also the architectural properties of the integration of the two services.  In other words, the most interesting thing is not the CQRS template, but the decisions that are made on the go.  There are many interesting solutions that were involved in the system, where they decided to use CQRS ... but this is not only CQRS by itself. </div><p>Source: <a href="https://habr.com/ru/post/269475/">https://habr.com/ru/post/269475/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269465/index.html">We have problems with promises</a></li>
<li><a href="../269467/index.html">Transfer. Cutting corners: why rails can kill ruby</a></li>
<li><a href="../269469/index.html">Payler is back, or a story about conflicts and their consequences</a></li>
<li><a href="../269471/index.html">Marshmallow. This must be done by everyone. Add SDK 23 support to our applications.</a></li>
<li><a href="../269473/index.html">Using gitlab continuous integration for deployment</a></li>
<li><a href="../269477/index.html">Why I bet on Elixir</a></li>
<li><a href="../269479/index.html">Conveniently create Composition Root using Autofac</a></li>
<li><a href="../269481/index.html">I am writing a CMS for PHP. Part 2</a></li>
<li><a href="../269487/index.html">The digest of interesting materials for the mobile developer # 126 (October 19-25)</a></li>
<li><a href="../269489/index.html">How to make friends AWS Lambda and PostgreSQL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
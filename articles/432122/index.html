<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Xcode and advanced debugging in LLDB: Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, today I offer you the second part of the article about debugging applications in LLDB. 

 In the first part, we figured out how to use...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Xcode and advanced debugging in LLDB: Part 2</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon, today I offer you the second part of the article about debugging applications in LLDB. <br><br>  In the first part, we figured out how to use breakpoints in Xcode to modify the existing properties of variables and add a line of code through instruction instructions. <br><br>  I created a demo project intentionally with a few bugs in order to figure out how to use different types of breakpoints in LLDB to debug an application. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you have not studied the first part of the article, better start with it.  Let me remind you of the important rule of this tutorial: Until the end of this article, you do not stop the compiler and do not restart the application after the very first run.  You correct errors during program execution. <br><a name="habracut"></a><br>  <b>Watchpoints</b> <br><br>  So, the following error in the application: <br><br>  <i>3. You can upload posts more than 7 times.</i> <br><br>  How to reproduce the error: <br><br><ul><li>  Turn on the Internet on your iPhone / simulator </li><li>  Scroll down to the end of the table to load more posts. </li><li>  You can upload posts more than 7 times (Although the user should not have such an opportunity in this application). </li></ul><br>  As one of the options for detecting errors, you need to find out how the integer <i>pageNumber</i> variable is updated after new posts are uploaded to the page.  Since you are still not very familiar with my code, you have to spend some time to understand what is going on in it. <br><br>  Do not worry.  Let's apply some magic. <br><br>  From the first part of the article, we learned that the GET HTTP request is performed in the <i>pragma mark Networking</i> section.  It contains exactly one <i>loadPosts</i> function.  Put a breakpoint on the first line of this function and pull the table down to update.  The compiler will stop at this breakpoint. <br><br><img src="https://habrastorage.org/webt/gg/rd/wq/ggrdwq_c8zezh0eryalmj_yr6xy.png" alt="image"><br>  <i>Objective c</i> <br><br><img src="https://habrastorage.org/webt/4z/fa/gh/4zfaghwfq-ul5i0ydferg26rhsg.png" alt="image"><br>  <i>Swift</i> <br><br>  In the bottom window of the debugger, click on the "Show variables" button.  On the left, a new window will pop up, in which you will see all the variables of PostsTableViewController. <br><br><img src="https://habrastorage.org/webt/dt/lm/v6/dtlmv6arqywkmaeku0r7g6ibamu.png" alt="image"><br><br>  Point the cursor to the pageNumber variable, right-click and select ‚ÄúWatch _pageNumber‚Äù / ‚ÄúWatch pageNumber‚Äù for Objective-C and Swift, respectively. <br><br><img src="https://habrastorage.org/webt/6x/6t/-v/6x6t-v_tvu6re53bnufw-kjk96w.png" alt="image"><br>  <i>Objective c</i> <br><br><img src="https://habrastorage.org/webt/p4/dk/nu/p4dknu-mwwpg0ep0kruupp-c3no.png" alt="image"><br>  <i>Swift</i> <br><br>  Thus, you have created a so-called watchpoint for the pageNumber variable.  A watchpoint is a breakpoint type that stops the debugger every time the value of the variable it is set to changes. <br><br><img src="https://habrastorage.org/webt/dn/86/rr/dn86rrhnz6ntwcsqvr57hdpctyw.png" alt="image"><br>  <i>Objective c</i> <br><br><img src="https://habrastorage.org/webt/nz/fl/rk/nzflrkgw-fb4zsdgeasqbil3m4o.png" alt="image"><br>  <i>Swift</i> <br><br>  Continue with the program.  The debugger stops and you see something like the following: <br><br>  <b>Objective c</b> <br><br><img src="https://habrastorage.org/webt/hy/ew/5c/hyew5c2_0tqfdwstkpjy3mtq1as.png" alt="image"><br><br><ol><li>  Records of old and new values ‚Äã‚Äãof <i>pageNumber</i> variable. </li><li>  Tracking a stack of code that changes the value of the <i>pageNumber</i> variable. </li><li>  The current point that caused the change to the <i>pageNumber</i> variable is the setter method of this variable. </li></ol><br>  If you refer to item 1 in the stack tracking, it will lead you to the following code snippet: <br><br><img src="https://habrastorage.org/webt/li/qc/ma/liqcmas4b7cjleyofwbbkrsac0u.png" alt="image"><br><br>  <b>Swift</b> <br><br><img src="https://habrastorage.org/webt/jf/ug/bf/jfugbf11anrcjroqqpikijthzm0.png" alt="image"><br><br><ol><li>  The debugger informs you that the observation point you have set has revealed something. </li><li>  Tracking a stack of code that changes the value of the <i>pageNumber</i> variable. </li><li>  The current point that caused the change to the <i>pageNumber</i> variable is the <i>updateForNetworkCallEnd</i> function. </li></ol><br>  It is logical to conclude that every time after a successful HTTP GET request, the <i>pageNumber</i> variable is incremented by 1 as long as the <i>state</i> variable (such as enum) is in the ‚Äúactive‚Äù state.  This variable can have 2 states: either active (‚Äúactive‚Äù) or inactive (‚Äúinactive‚Äù).  The state ‚Äúactive‚Äù implies that the user can upload posts (that is, the limit of 7 downloads is not reached).  The ‚Äúinactive‚Äù state, on the contrary, implies that the user will no longer be able to load posts.  As a result, we need to add logic to the <i>updateForNetworkCallEnd</i> function, which checks the <i>pageNumber</i> variable and sets the <i>state to the</i> corresponding state. <br><br>  As you may have guessed, it is much easier to first test the hypothesis without stopping the compiler before making changes to the code. <br><br>  I note that in the <i>pragma mark Support</i> section, we already have the function we need ( <i>setToInactiveState</i> ), which sets the <i>state</i> variable to ‚Äúinactive‚Äù. <br>  Add a breakpoint one line above the <i>if</i> condition.  Also add the following instruction command to the debugger. <br><br>  <b>Objective c</b> <br><br><pre><code class="objectivec hljs">expression <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.pageNumber &gt;= <span class="hljs-number"><span class="hljs-number">7</span></span>) {[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> setToInactiveState]}</code> </pre> <br><img src="https://habrastorage.org/webt/n1/xq/i6/n1xqi6cete7y7axy3mwhmaoiypo.png" alt="image"><br><br>  <b>Swift</b> <br><br><pre> <code class="objectivec hljs">expression <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.pageNumber &gt;= <span class="hljs-number"><span class="hljs-number">7</span></span>) {setToInactiveState()}</code> </pre> <br><br><img src="https://habrastorage.org/webt/o6/q-/-k/o6q--kvxy7om339ov4hvq8elh40.png" alt="image"><br><br>  After that, delete the very first breakpoint you used to set the watchpoint.  Also deactivate the watchpoint itself. <br><br><img src="https://habrastorage.org/webt/8t/tw/xv/8ttwxvs9yktf5mm4fupg6sxmhnc.png" alt="image"><br>  <i>Objective c</i> <br><br><img src="https://habrastorage.org/webt/u2/73/nf/u273nfcotvsi2b_ulsygpyjgkje.png" alt="image"><br>  <i>Objective c</i> <br><br><img src="https://habrastorage.org/webt/zm/8r/vr/zm8rvrmo4zxy12unx4ifgc13ifa.png" alt="image"><br>  <i>Swift</i> <br><br><img src="https://habrastorage.org/webt/f6/jv/bz/f6jvbzg0gq56-8wl_8wcw-4q_j8.png" alt="image"><br>  <i>Swift</i> <br><br>  Now scroll up the tables, pull down to refresh and start flipping. <br>  Everything worked out!  But it is too early to celebrate, we still have one bug to fix! <br><br>  <b>What's next?</b> <br><br>  The final, third part of the article, in which we will learn about another type of breakpoint - symbolic breakpoints. </div><p>Source: <a href="https://habr.com/ru/post/432122/">https://habr.com/ru/post/432122/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../432112/index.html">Intel XMM 8160 - Universal Multi-Mode 5G Modem</a></li>
<li><a href="../432114/index.html">Using SVG paths in canvas to move objects</a></li>
<li><a href="../432116/index.html">JS synchronous trend: survey</a></li>
<li><a href="../432118/index.html">A project manager with TK in his hands is not yet a sign of project management.</a></li>
<li><a href="../432120/index.html">Lenovo will pay laptop owners compensation of $ 8.3 million for installing Superfish malware</a></li>
<li><a href="../432128/index.html">Crutches, Narnia, Ninja procrusts: three pains of a timlid in a startup</a></li>
<li><a href="../432130/index.html">Autumn mitapy on mobile development in the office Tutu.ru</a></li>
<li><a href="../432132/index.html">William Shakespeare: the difficulty of translating sonnets into Russian</a></li>
<li><a href="../432134/index.html">Environment generation based on sound and music in Unity3D. Part 2. Creating 2D tracks from music</a></li>
<li><a href="../432136/index.html">Cool the CPU in the data center - laser 3D printing will help</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
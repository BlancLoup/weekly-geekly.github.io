<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bypassing cycles through hard links</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hard link 
 A hard link is a variable that is a synonym for another variable to which it refers. To create a hard link, you must write "&" in front of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bypassing cycles through hard links</h1><div class="post__text post__text-html js-mediator-article"><h5>  Hard link </h5><br>  A hard link is a variable that is a synonym for another variable to which it refers.  To create a hard link, you must write "&amp;" in front of the variable. <br><a name="habracut"></a><br><h6>  <b>Example of a hard link ad:</b> </h6><br><pre><code class="php hljs">$a = <span class="hljs-number"><span class="hljs-number">1</span></span> ; <span class="hljs-comment"><span class="hljs-comment">//   $b = &amp;$a ; // $b   $a echo $b ; // 1</span></span></code> </pre> <br><br><h5>  By sabzh </h5><br>  Many of us faced such a task: it is necessary to obtain the object we are looking for, from an array of objects of the same type.  Of course, this is a trivial task, and it can be easily solved with the help of a regular loop, but suppose that our array consists of a fairly large number of elements.  In this case, the cycle has a detrimental effect on performance in general.  In addition, if this task is carried out repeatedly, it will further aggravate the situation. <br><br>  To solve this problem, an array-bundle containing hard links, each of which is under its own unique key obtained by hashing, is perfect. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h6>  It is clear what this decision is: </h6><br><img src="https://habrastorage.org/storage2/256/933/541/256933541113f49e29d65f742186a95c.jpg" alt="Visually"><br><br><h5>  Script for testing </h5><br>  <a href="https://habr.com/ru/post/166601/">We skip and look at the code as a whole, if you don‚Äôt want to read the code building process</a> <br><br><h6>  1. Build a test array of objects. </h6><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $List = <span class="hljs-keyword"><span class="hljs-keyword">Array</span></span>(); <span class="hljs-comment"><span class="hljs-comment">//     public $Links = Array(); //      public $Count = NULL ; //    public function Fill() //   { for( $i=0; $i &lt; $this-&gt;Count; $i++ ) { $Obj = &amp;$this-&gt;List[]; //    $Obj = new Obj($i); $Key = md5($i); $this-&gt;Links[$Key] = &amp;$Obj; //     } } } class Obj //   { public $Id = NULL; public function __construct( $Id ) { $this-&gt;Id = $Id; } } $Main = new Main(); $Main-&gt;Count = 1000; //  ,      $Main-&gt;Fill(); /*   , print_r( $Main-&gt;List ): Array ( [0] =&gt; Obj Object ( [Id] =&gt; 0 ) [1] =&gt; Obj Object ( [Id] =&gt; 1 ) [2] =&gt; Obj Object ( [Id] =&gt; 2 ) ... ) */</span></span></code> </pre><br><h6>  1. We determine the search function of the element by ID (cycle, and through links). </h6><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span></span>{ ... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Search_Cycle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( $Id )</span></span></span><span class="hljs-function"> </span></span>{ $Limit = count( <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;List ); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( $i=<span class="hljs-number"><span class="hljs-number">0</span></span>; $i &lt; $Limit; $i++ ) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;List[$i]-&gt;Id == $Id ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;List[$i]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Search_Link</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( $Id )</span></span></span><span class="hljs-function"> </span></span>{ $Key = md5($i); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;Links[$Key] ) == <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;Links[$Key]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>; } ... }</code> </pre><br><br>  It is worth noting that the element search algorithm is built on the generated keys, and therefore does not depend on the size of the array in which the element is searched.  From this it follows that in the process of testing, this algorithm will show identical results at all stages. <br><br><h6>  3. We will add the code for the test </h6><br><pre> <code class="php hljs">... $Count = <span class="hljs-number"><span class="hljs-number">100</span></span> ; <span class="hljs-comment"><span class="hljs-comment">//        //     10  for( $t=0; $t &lt; $Main-&gt;Count; $t++ ) { echo 'Test with ID: ' . $t . ' - started.'; //   ,      $Start = microtime( TRUE ); for( $i=0; $i &lt; $Count; $i++ ) $Main-&gt;Search_Cycle( $t ); $Time = round( microtime( TRUE ) - $Start , 4 ); echo '&lt;br /&gt;Search_Cycle() time: ' . $Time; //   ,      $Start = microtime( TRUE ); for( $i=0; $i &lt; $Count; $i++ ) $Main-&gt;Search_Link( $t ); $Time = round( microtime( TRUE ) - $Start , 4 ); echo '&lt;br /&gt; Search_Link() time: ' . $Time; echo '&lt;br /&gt;&lt;br /&gt;'; }</span></span></code> </pre><br><br>  This code searches each element of the source array ( <b>$ Count</b> times) using these two functions, counts the search time for each, and displays the result. <br><br><a name="fullcode"></a><br><h6>  Code in general </h6><br>  As a result, you should get this code: <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $List = <span class="hljs-keyword"><span class="hljs-keyword">Array</span></span>(); <span class="hljs-comment"><span class="hljs-comment">//     public $Links = Array(); //      public $Count = NULL ; //    public function Fill() //   { for( $i=0; $i &lt; $this-&gt;Count; $i++ ) { $Obj = &amp;$this-&gt;List[]; //    $Obj = new Obj($i); $Key = md5($i); $this-&gt;Links[$Key] = &amp;$Obj; //     } } public function Search_Cycle( $Id ) { $Limit = count( $this-&gt;List ); for( $i=0; $i &lt; $Limit; $i++ ) if( $this-&gt;List[$i]-&gt;Id == $Id ) return $this-&gt;List[$i]; return NULL; } public function Search_Link( $Id ) { $Key = md5($Id); if( isset( $this-&gt;Links[$Key] ) == TRUE ) return $this-&gt;Links[$Key]; return NULL; } } class Obj //   { public $Id = NULL; public function __construct( $Id ) { $this-&gt;Id = $Id; } } $Main = new Main(); $Main-&gt;Count = 1000; //  ,      $Main-&gt;Fill(); /*   , print_r( $Main-&gt;List ): Array ( [0] =&gt; Obj Object ( [Id] =&gt; 0 ) [1] =&gt; Obj Object ( [Id] =&gt; 1 ) [2] =&gt; Obj Object ( [Id] =&gt; 2 ) ... ) */ $Count = 100 ; //        //     10  for( $t=0; $t &lt; $Main-&gt;Count; $t++ ) { echo 'Test with ID: ' . $t . ' - started.'; //   ,      $Start = microtime( TRUE ); for( $i=0; $i &lt; $Count; $i++ ) $Main-&gt;Search_Cycle( $t ); $Time = round( microtime( TRUE ) - $Start , 4 ); echo '&lt;br /&gt;Search_Cycle() time: ' . $Time; //   ,      $Start = microtime( TRUE ); for( $i=0; $i &lt; $Count; $i++ ) $Main-&gt;Search_Link( $t ); $Time = round( microtime( TRUE ) - $Start , 4 ); echo '&lt;br /&gt; Search_Link() time: ' . $Time; echo '&lt;br /&gt;&lt;br /&gt;'; }</span></span></code> </pre><br><br>  For testing, we just need to run the script. <br><br><h5>  Testing </h5><br>  Running the script, we obtained results about the time of the search element.  Since the search for each element was performed 100 times in a row (to get real numbers), any value that you see below is divided by one hundred, to get the most realistic picture. <br><br><h6>  Results: </h6><br>  Vertically on the charts - search speed.  Horizontal - ID of the desired object. <br><br>  The graph is unfortunately an image, so you can not pull-poke. <br><br>  <b>Search function Search_Cycle () - using the loop.</b> <br><img src="https://habrastorage.org/storage2/558/581/938/5585819386da3a674cda8b8205a7e6f4.jpg"><br><br>  <b>Search function Search_Link_Cycle () - with the help of hard links.</b> <br><img src="https://habrastorage.org/storage2/609/a58/cb2/609a58cb2b0af01a48021e160e77d21a.jpg"><br><br>  The key point in the study of these graphs is that a search with a cycle works faster than links, with the number of elements less than 6 (0.002 sec. Against 0.004 sec.). <br><br><h5>  Total </h5><br>  Obviously, working with hard links is much faster, because they do not depend on the size of the array, and are referenced directly to the object.  However, they lose the search based on the cycle, with a small array size (if you do not take into account that this difference is simply insignificant). <br><br>  What to use - everyone has the right to choose himself, but using this method when searching in large arrays - you will significantly win performance and instantly find the object, regardless of the size of the array. </div><p>Source: <a href="https://habr.com/ru/post/166601/">https://habr.com/ru/post/166601/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../166589/index.html">We continue to invent function</a></li>
<li><a href="../166593/index.html">Case in the ocean</a></li>
<li><a href="../166595/index.html">The most reliable storage medium</a></li>
<li><a href="../166597/index.html">Competition for the best scheme of the Moscow metro</a></li>
<li><a href="../166599/index.html">3D printing and Nokia Lumia 820</a></li>
<li><a href="../166603/index.html">AgileBaseCamp Conference: VALUE Driven Development, February 2nd, Kiev</a></li>
<li><a href="../166605/index.html">The Copyright Act in the digital age: the greatest legal scam in the world</a></li>
<li><a href="../166607/index.html">AXFR - return</a></li>
<li><a href="../166609/index.html">Is it hard to work as a programmer?</a></li>
<li><a href="../166611/index.html">ReSpeller - spelling plugin for ReSharper</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
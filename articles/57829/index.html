<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Making a gem for RubyGems</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We collect stones for Ruby 
 It often happens that you drag pieces of code from project to project. Such pieces are very convenient to make in externa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Making a gem for RubyGems</h1><div class="post__text post__text-html js-mediator-article"><h2>  We collect stones for Ruby </h2><br>  It often happens that you drag pieces of code from project to project.  Such pieces are very convenient to make in external files, modules.  For this Ruby exists in RubyGems - application manager and libraries, decorated in a single file package - gem.  And it turned out to be very easy to assemble such a gem, and most importantly, to make it accessible to any machine connected to the Internet. <br><br><a name="habracut"></a><br><br><h2>  Raw materials </h2><br>  So, it all starts with the code that must be collected in the heme.  I have a small wrapper class for the API of the <a href="http://renoter.com/">Renoter</a> microblogging service, recently lit up in <a href="http://renoter.com/">Habr√©</a> .  Here it is - <a href="http://pastie.org/453300">pastie.org/453300</a> As you can see, there is only one class here, of the dependencies, only the JSON library. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I made all of the following actions in MacOS X 10.5.6, although in other OSes there are hardly any strong differences.  Also I had installed: <br><ul><li>  Ruby 1.8.6 </li><li>  RubyGems 1.3.2 </li><li>  Git 1.6.2.2 </li></ul><br><br><h2>  Getting started </h2><br>  First of all, go and create a git repository on <a href="http://github.com/">GitHub`s</a> .  The point here is that we kill several birds with one stone: first, the problem of distribution of the heme is solved, it will always be available on the server <a href="http://gems.github.com/">gems.github.com</a> , as username-gemname.  Secondly, it is an excellent and popular platform for hosting source codes.  And third, perhaps the most delicious: github is able to independently collect your gem, and recompile in case of an update.  On this we will stop later.  So, create a new repository, and tick the ‚ÄúRubyGem‚Äù item in the settings. <br><br>  Now go to the file structure. <br><blockquote>  mkdir renoter <br>  cd renoter <br>  mkdir lib <br>  touch README <br>  touch renoter.gemspec <br></blockquote><br>  It looks like the necessary minimum.  Copy the renoter.rb file containing the above code to the lib folder.  I will remove the logout method from it in order to later show the gem update. <br><img src="http://www.picamatic.com/show/2009/04/21/04/17/3352445_674x519.png"><br><br>  Now we will write something in the README, this file will be displayed on the project page in github. <br><blockquote><code>Renoter Gem <br> -------------------------------- <br> <br> Usage: <br> <br> require 'renoter' <br> <br> r = Renoter.new <br> public_timeline = r.public_timeline # Last 20 statuses <br> <br> if(r.login('user', 'password')) <br> r.update_status 'Hello from ruby!' <br> print 'OK!' <br> else <br> print 'Login failed' <br> end <br> <br> friends_timeline = r.friends_timeline('5') # Last 5 freinds statuses <br> <br> <br> For more functionality see documentation. <br></code> <br></blockquote><br>  Moving to the renoter.gemspec file.  Actually this is one of the main files, namely, this is the configuration file on the basis of which the gem will be assembled.  I just comment on my own, for additional documentation you can go to offsite. <br><img src="http://www.picamatic.com/show/2009/04/21/05/19/3353146_905x490.png"><br>  That turned out to be a config.  Note that I enabled the generation of rdoc documentation, so you need to arrange the file renoter.rb.  On this, in principle, all preparations end, and it is time to check the assembly of heme.  Go to the console, and give the following commands: <br><blockquote>  gem build renoter.gemspec <br></blockquote><br>  And if everything before this step was done correctly, we should get the assembled gem file, called renoter-0.0.1.gem.  Delete the resulting gem file. <br><br>  Now let's do github.  Here again, everything is simple: go to the directory heme, and command: <br><blockquote>  git init <br>  git add * <br>  git commit -m 'Commit renoter gem, 0.0.1' <br>  git remote add origin git@github.com: cheetah / renoter.git <br>  git push origin master <br></blockquote><br>  Github asks for your password, and having received it obediently commits the entire folder.  Now you can lie back in your chair, as the great operating system told us, or make a cup of coffee.  It will take about 15 minutes for your gem to gather.  When the gem is collected, github will notify you by e-mail and in private messages, and your gem will appear on this <a href="http://gems.github.com/list.html">list</a> .  Now you can install it: <br><blockquote>  gem sources -a <a href="http://gems.github.com/">gems.github.com</a> (add server, maybe you have it already added) <br>  sudo gem install cheetah-renoter <br></blockquote><br>  Everything gem is installed with the generated documentation, and it can be used. <br><br><h2>  Update </h2><br>  Remember, I said, then that github can rebuild gems after an update?  Add the logout method that I cleaned to the renoter.rb file and verify this.  You also need to change the version of the gem to the next, change the parameter s.version to 0.0.2 in the renoter.gemspec file Now commit again: <br><blockquote>  git add * <br>  git commit -m 'Commit renoter gem, 0.0.2' <br>  git push <br></blockquote><br>  And again the notification comes to the post office, that the heme is reassembled, can be updated. <br><blockquote>  sudo gem update cheetah-renoter <br></blockquote><br><br><h2>  Result </h2><br>  Although basically I did all this for self-study, in the end it turned out to be quite a working gem. <br>  Source codes can be found here - <a href="http://github.com/cheetah/renoter">github.com/cheetah/renoter</a> <br><br><h2>  Materials on topic </h2><br><ul><li>  <a href="http://rubygems.org/read/chapter/5">RubyGems Manual</a> </li><li>  <a href="http://rubygems.org/read/chapter/20">Gemspec reference</a> </li><li>  <a href="http://gems.github.com/">GitHub RubyGems</a> </li></ul><br><br></div><p>Source: <a href="https://habr.com/ru/post/57829/">https://habr.com/ru/post/57829/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../57823/index.html">International Forum "Internet Ukraine '2009" will be held in Kiev on April 22-24</a></li>
<li><a href="../57824/index.html">Should I make a successful programmer a project manager?</a></li>
<li><a href="../57826/index.html">In defense of the developers</a></li>
<li><a href="../57827/index.html">Determining gender by navigation history, step 2</a></li>
<li><a href="../57828/index.html">Obama will be given a "red button" to turn off the Internet</a></li>
<li><a href="../57830/index.html">Futurology Internet</a></li>
<li><a href="../57832/index.html">"Knol" spoke in Russian</a></li>
<li><a href="../57833/index.html">Information from Yandex.Subbotnik</a></li>
<li><a href="../57836/index.html">Washington is the first city with free mobile TV.</a></li>
<li><a href="../57837/index.html">The World Digital Library has opened</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
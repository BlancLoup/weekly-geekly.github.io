<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Game editor for platformer - post-mortem</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About 2.5 years ago we conceived a simple project - a platformer with certain properties: hardcore, as dynamic as possible, without firing. The platfo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Game editor for platformer - post-mortem</h1><div class="post__text post__text-html js-mediator-article">  About 2.5 years ago we conceived a simple project - a platformer with certain properties: hardcore, as dynamic as possible, without firing.  The platform is iOS, since we only work with it - and Android at that time was not yet a serious alternative.  For the standard was chosen not yet released at that time Super Meat Boy. <br>  Since the platformer is not a game where you can get by with the great power of the generator rand, a full-fledged, powerful and convenient level editor was needed. <br><br><img src="https://habrastorage.org/storage2/e46/59e/2ed/e4659e2ed4146d6a18710a8f8d60f10e.jpg"><br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Thus the story begins </h4><br>  This matter was conceived as a simple ‚Äúproject for a month,‚Äù since the success of the genre on mobile platforms was not very likely to be believed.  As we did, the topic of a separate large article - but this article is specifically devoted to the ‚Äúevolution‚Äù of the editor, so I will not dwell on other details.  The main thing that turned out so that we liked the basic prototype so much that it was decided to ‚Äúadd features‚Äù.  And then it turned out that the creation of levels takes 10 times longer than it seemed to us a priori, and the project imperceptibly resulted in the most ambitious long-term construction that ever left our modest team (we are two - a programmer and an artist) - the game took small two years. <br><br>  During this time the game has changed a little bit: <br><img src="https://habrastorage.org/storage2/04a/dd6/407/04add640752f5131fb6cd91f419d1d46.png"><br><br><h4>  Meet the Editor </h4><br>  So, editor.  I came up with a level editor right on the iPad - for two reasons.  First of all, my ‚Äúengine‚Äù does not support other platforms except iOS.  That is, to make an editor on a PC, one would have to either port the entire ‚Äúengine‚Äù and the whole game - which one did not want, or write the editor separately from the game, without the ability to play at once - which one did not want either. <br><br>  The second reason is that it seemed like a great opportunity to create levels anywhere - in the subway, in nature, in a cafe, in a bath ... but just lying on the sofa after all!  And this is true, although it turned out to be difficult with nature - the screen glares strongly, and with an anti-glare film it just goes blind.  Plus, you can immediately play exactly as intended on the target device - which is impossible in the case of a PC. <br><img src="https://habrastorage.org/storage2/ea4/ba1/2be/ea4ba12be23978732a8b9898db646be9.png"><br><br><h4>  He said - let's go! </h4><br>  I did the first version of the editor pretty quickly - in a few days.  The history did not preserve its appearance, but it practically does not differ from the current one - the editor is for internal use, and what is the point of making beauty that the player will not see? <br>  The final version with the additional menu open looks like this: <br><br><img src="https://habrastorage.org/storage2/ee9/218/38a/ee921838a0a64c99dc5a9a1e339ac3ac.png"><br><br>  The ideology was simple - it all started with the object number zero, which was added by a special button.  After that, cloning to a victorious end took place - new objects were no longer added.  At first the old one was copied, then the sprite index was selected for it, and the object was put in the right place.  Despite the primitivism, the scheme worked well.  It's funny, but for 2 years we chose the index of the sprite ‚Äúto the touch‚Äù - with the help of a slider, in which all the sprites in a row were just scrolling: <br><br><img src="https://habrastorage.org/storage2/1df/c93/7c0/1dfc937c0993aef5d52a2eae883c8f28.png"><br><br>  It would seem - terribly uncomfortable.  But since in most cases the objects were not added again - and those that were already on the screen were copied, it turned out that this was not a problem.  In the end, I was bored, and I made a ‚Äúnormal‚Äù dialogue for choosing a sprite, but it didn‚Äôt add much speed. <br><br><img src="https://habrastorage.org/storage2/276/8ae/208/2768ae208838044da5a2de25a41f42c9.png"><br><br><h4>  What (else) went right </h4><br>  Although postmortems are usually written for the games themselves, and not for editors, the traditional rubric seems logical to me.  So, finds: <br><br><ol><li>  One of the first things encoded was the following thing - the ability to duplicate the current object to any of the four sides.  On the one hand, this may seem obvious - but the usefulness of this was not immediately realized - it seemed wasteful to waste screen space on as many as four buttons that do the same thing.  Moreover, if you click on any of the duplicate buttons, and without releasing to drive it across the screen, the object immediately began moving to the intended location. <br>  There was even a fifth similar button - it copied the object without saving the parameters, setting default values. <br>  This "feature" gave a convenient way to arrange repeating objects, in particular, tiles. <br><br></li><li>  The second handy thing was the ability to delete objects using a simple tap in a certain corner of the screen - in our case, in the upper left.  Initially, there was a ‚Äúbasket‚Äù in which it was necessary to put objects by drag &amp; drop, but it turned out that objects must be permanently deleted - and dragandrop is not enough for this to be quick and convenient.  It turned out that after a certain time we had developed a certain grip of the device - the iPad kept its left hand in such a way that the thumb was right on the virtual basket, while the right hand controlled the selection of objects for subsequent deletion.  It became so natural that the extra objects were removed in a matter of moments. <br><br></li><li>  Double tap to go to the selection mode of the object (s), after releasing the object was fixed and the editor switched to the move mode, which was stopped either by repeated double tap or switching to the move mode on the map.  This made it possible, firstly, to see the object that we move, without covering it with a finger, and secondly, to reduce the likelihood of accidental movement. <br></li></ol><br>  Perhaps this ends with brilliant insights, and an extensive list of what was called ‚Äúlearned in a hard way‚Äù began.  There are no forests behind the trees, the project did not want to end, and we got into that same eternal cycle, familiar from the Starcraft article - the game was all the time ‚Äúa month before the release‚Äù.  And since the ‚Äúmonth‚Äù remained before the release, I didn‚Äôt want to waste time on improving the editor, which cost dozens and hundreds of wasted hours. <br><br><h4>  What went wrong, very very wrong. <br></h4><br><br><ol><li>  <b>Undo.</b>  In the editor, and still no Undo.  Almost not - one move operation returns - that's all.  It seemed not so important, but it seemed that it would take a long time to implement a common pool for each operation, dynamically allocate megabytes of memory to preserve large-scale changes ... And initially, the absence of Undo was compensated by deficiency number 2, which is described below.  As a result, many hours (in general) were spent on the restoration of objects accidentally hooked by a big, clumsy finger.  Or to delete a dozen objects accidentally duplicated ‚Äúby‚Äù.  This problem did not attract attention to itself, since it didn‚Äôt happen quite often, but when I looked back, I regret to admit that the absence of this operation would have spent many times more time than its implementation would take. <br><br></li><li>  <b>Mass selection.</b>  Yes, it was impossible to select objects more than one at a time.  It did not seem important, it seemed difficult to implement - the same problem as in the first case.  In fact, this led to the fact that in the game before the final stage there was no copy / paste, which means that each of the order of 50,000 objects in the game was put by hand, to its unique point - except when they were copied to a nearby cell using those same commands duplication.  Profit here is the greater uniqueness of the levels - since it was impossible to copy the whole pieces of the level, everything was created anew each time.  But as a drawback - a clear waste of time, and at times. <br><br></li><li>  <b>Animation of objects.</b>  All parameters were set with the help of sliders, although some ‚Äúhelpers‚Äù still were.  As a result, if it was necessary for the trigger to trigger an animation from a certain distance - and ended exactly where needed, and not a pixel further, it would take 20-30 iterations to manually adjust the parameters.  As a result, most of the levels cannot boast sly or interesting animations, and the levels are mostly static. <br>  A logical and simple solution now seems to be a simple movement of an object in the editor, with automatic calculation of the desired speed, but at that time such a simple thought had not occurred. <br><br></li><li> <b>Accuracy.</b>  Perhaps the biggest scourge was the next problem ‚Äî the insufficient accuracy of moving objects ‚Äî it was impossible to move the object to the desired point ‚Äî because of the touchscreen and fingers as an input device.  To ‚Äúsolve‚Äù this problem, two things were implemented ‚Äî a snap (so-called) grid, and the impossibility of moving an object to an odd pixel (that is, in fact, a grid with a cell size = 2). <br>  This partially solved the problem, but unfortunately some objects were of the ‚Äúwrong‚Äù size, and did not join the grid, moreover, sometimes you could forget to turn on the grid in advance, and a whole bunch of objects turned out to be past that grid itself - and as a result you had to either fix the position of objects to the grid with ‚Äúhandles‚Äù, or ‚Äúscore‚Äù on the grid and play a fun game ‚Äúhit the pixel with your finger in both coordinates from only 15th time‚Äù. <br>  The correct decision, which took more than a year, turned out to be a simple fix of five lines - which, by pressing a certain button, reduced the speed of moving objects several times. <br><br></li><li>  <b>Hotkeys.</b>  It turned out that the most frequent operations are: <br>  - turn the object <br>  - change of orientation (flip) along the x and y axes <br>  - disabling collisions <br>  - change zIndex (drawing order, which was set manually) <br><br>  For them, it took from one to three tapas.  It was necessary to select an object, and then call the parameter editing panel, which was often closed, as it covered a decent part of the screen, and accordingly switch the object directly.  It took a lot of time to do this, but it didn‚Äôt work to place these operations as separate buttons - they didn‚Äôt fit on the screen, the place ran out from all sides, and I didn‚Äôt want to do the second row - this would reduce the scope.  To solve this problem, it was decided to ‚Äúscrew‚Äù the external keyboard.  An adapter for the USB keyboard was bought (in the best traditions of Stierlitz called the Camera Connection Kit), and several wasted nights were spent trying to make it work.  It turned out with the help of ‚Äúhack‚Äù - an invisible text form of 1 pixel.  And it turned out that working at the same time with the iPad and external keyboard is inconvenient.  You need a third hand - one holds the device, the other manipulates objects, the third presses the buttons. <br>  "Feature" remained unclaimed. <br><br></li><li>  <b>The interface as a whole.</b>  It did not seem important or necessary, but the interface, not much disturbing as a whole, was losing much potential and extensibility.  At the moment I, starting a new editor from scratch, first of all would take care of the following things: <br><br><ul><li>  Convenient drop-down menus to select release commands. </li><li>  Panels coming out from behind the screen on ‚Äúsvaypu‚Äù, just like the panel called ‚ÄúNotifications‚Äù on iOS. </li><li>  Cyclic scrolling of a set of buttons - so that you can select the operations you need specifically now, and thus accommodate more ‚Äúquick access‚Äú commands. </li><li>  Multitouch for frequent commands such as flip, rotate, scale, zoom.  I tried to do it at the very beginning of my work, but I didn‚Äôt spend enough time on it - unsatisfactory results were obtained and the work was postponed until better times, which never came - but in vain. </li></ul><br></li></ol><br><h4>  In the end. <br></h4><br>  In the end, we released the game, and it all ended well.  Well, almost - with sales has not quite turned out, but we are working on it.  So far we can only modestly boast an incredibly high average rating on Google Play - 4.9 units, that is, the fact that people do not like the game, but they like it very, very much. <br>  The idea of ‚Äã‚Äãcreating an editor inside the game and exclusively for the ipad is debatable, but it was not the worst. <br><br><img src="https://habrastorage.org/storage2/456/1aa/3c1/4561aa3c1e251a2952e12e9101a0cbb6.png"></div><p>Source: <a href="https://habr.com/ru/post/178487/">https://habr.com/ru/post/178487/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../178473/index.html">edn: extensible data notation</a></li>
<li><a href="../178475/index.html">Becoming an analyst</a></li>
<li><a href="../178477/index.html">Overview of the restrictions imposed on exceptions, for example, inheritance and interface implementation</a></li>
<li><a href="../178481/index.html">A quick way to create an installer for a Java program</a></li>
<li><a href="../178483/index.html">Is there life in the world of PostPC? Part 3: having fun with iOS</a></li>
<li><a href="../178489/index.html">Protecting Citrix Web Interface against brute-force attacks with CAPTCHA</a></li>
<li><a href="../178491/index.html">Digest of upcoming IT events for May 2013</a></li>
<li><a href="../178493/index.html">How I taught parents to download Turkish TV shows with one click.</a></li>
<li><a href="../178497/index.html">Catalog of tools for developing mobile applications</a></li>
<li><a href="../178499/index.html">The use of car DVRs in Austria is prohibited</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Components. Example</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="to the beginning of the notes about the components 

 Drop-down list 

 Create a simple component dropdown list. (Note that in the code of all notes t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Components. Example</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://habrahabr.ru/post/209350/">to the beginning of the notes about the components</a> <br><br><h1>  Drop-down list </h1><br><br>  Create a simple component dropdown list.  (Note that in the code of all notes there will be no jQuery).  Suppose we have an anchor (input form), and let, when it receives focus, a drop-down list of predefined values ‚Äã‚Äãappears under it.  When you click on the list item, we get its value in an arbitrary function. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href=""><img src="https://raw2.github.com/mbykov/articles/master/Components/img/example-dd.png" alt="image text"></a> <br><br>  The sample code is available at <a href="https://github.com/mbykov/component-dropdown-example">https://github.com/mbykov/component-dropdown-example</a> .  Clone it and open the file <code>test/example.html</code> in the browser, click on <code>input</code> . <br><br><a name="habracut"></a><br><br>  Create the skeleton components of this example: <br><br><pre> <code class="bash hljs">$ component create dropdown-example repo (username/project): mbykov/component-dropdown-example description: simple dropdown example . . .</code> </pre><br><br>  in components.json you need to specify the components we need: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"component/domify"</span></span>: <span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"component/each"</span></span>: <span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"component/classes"</span></span>: <span class="hljs-string"><span class="hljs-string">"*"</span></span> },</code> </pre><br><br>  And execute <code>$ make</code> .  In the <code>Makefile</code> file you will see, in particular, (about the makefile format in the <a href="">makefile vs. grunt</a> note): <br><br><pre> <code class="javascript hljs">build: components index.js dropdown.css @component build --dev components: component.json @component install --dev</code> </pre><br><br>  This means that the <code>component</code> install all the dependencies and create the <code>build/build.js  build/build.css</code> .  (I renamed the original dd-example.css to dropdown.css, and corrected the Makefile accordingly). <br><br><h2>  creating an example </h2><br><br>  Now create an example.  Create a <code>test</code> directory and in it a file <code>example.html</code> , the essence of which <br><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"anchor"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> anchor = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.querySelector(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'#anchor'</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> Dropdown = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">require</span></span></span><span class="javascript">(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'dd-example'</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> dd = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> Dropdown(anchor); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  And in the <code>index.js</code> file we add the main content: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> domify = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'domify'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> classes = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'classes'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> each = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'each'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = Dropdown; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dropdown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">anchor</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(anchor); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; }</code> </pre><br><br>  Pay attention to <code>return this</code> - this is important.  Now we can create a chain of methods for our component.  Each following method gets all the same this. <br><br>  Now make again, and reload the test page (as long as we don‚Äôt use watch, so make manually).  In Fayerbag we see that everything goes as it should, we see an anchor. <br><br>  Let's write the <code>dropdown</code> component itself. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dropdown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">anchor</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _div = domify(<span class="hljs-string"><span class="hljs-string">'&lt;div class="dropdown-div"&gt;&lt;/div&gt;'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _list = domify(<span class="hljs-string"><span class="hljs-string">'&lt;ul class="dropdown-list"&gt;&lt;/ul&gt;'</span></span>); _div.appendChild(_list); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.list = _list; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.div = _div; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.anchor = anchor; anchor.parentNode.insertBefore(_div, anchor.nextSibling); anchor.focus(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; }</code> </pre><br><br>  What's going on here? <br><br>  We create two objects, <code>_list</code> and <code>_list</code> .  Underlining it is convenient for me to select DOM objects (we no longer need underscore, and the $ sign somehow doesn‚Äôt look, but it's a matter of taste).  In real life, of course, you need to place the html in template.html, and call it <code>require('template')</code> .  I do not here for clarity of the code. <br><br>  In the lines of <code>this.list = _list</code> save these objects as attributes of this object, this is useful in the method chain.  And add a new object to the page. <br><br><pre> <code class="javascript hljs">$ make</code> </pre><br><br>  But nothing has changed?  That's right, now you need to show a list with predefined values ‚Äã‚Äãwhen clicking on the anchor.  Add to the _div and the .css file the class hidden, and to the Dropdow function, click on the anchor, and the toggle () method: <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; anchor.onclick = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">)</span></span>{ self.toggle(); classes(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.div).remove(<span class="hljs-string"><span class="hljs-string">'hidden'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre><br><br>  and create a method that will show the values <br><br><pre> <code class="javascript hljs">Dropdown.prototype.render = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">values</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; values.each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> added = domify(<span class="hljs-string"><span class="hljs-string">'&lt;li class="dropdown-line"&gt;&lt;/li&gt;'</span></span>); added.textContent = value; self.list.appendChild(added); }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; }</code> </pre><br><br>  let's add in the example text example.html a call to the <code>render</code> method with predefined values: <code>var values = [' '...</code> <br><br><pre> <code class="javascript hljs"> dd.render(values)</code> </pre><br><br>  There is no semicolon after the line.  This is not an error; on the next line, the following component method will be called - .select (). <br><br>  Now we will output the value when clicking on the list row in an arbitrary callback to our component (Kolbek in the example will be just console.log). <br><br><pre> <code class="javascript hljs">Dropdown.prototype.select = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">cb</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.list.onclick = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value = e.target.textContent; anchor.value = value; self.hide(); cb(value); }; }</code> </pre><br><br>  here we do not need to return <code>return this</code> at the end of the function, because this is the end of the chain.  Call the <code>.select</code> method in <code>example.html</code> , in which we output the value to the console.  Voila. <br><br><h2>  conclusion </h2><br><br>  Quite the last, and not directly related to the example - the list is displayed not under the anchor, but at the beginning of the line.  But for beauty, we align the list - this is one line in the main function: <br><br><pre> <code class="javascript hljs"> _div.style.left = getOffset(anchor).left +<span class="hljs-string"><span class="hljs-string">'px'</span></span>;</code> </pre><br><br>  I got the getOffset function from Mathew Muellera, thanks to him. <br><br>  When creating this example and my ‚Äúadult‚Äù dropdown component, I was guided by the examples of older colleagues: <code>component/dropdown</code> , <code>stagas/dropdown</code> , <code>bmcmahen/dropdown</code> , <code>matthewmueller/autocomplete</code> .  True, they all use jQuery, which is why I wrote my <code>mbykov/dropdown</code> - it is designed for json-data obtained from <code>couchdb</code> , so it has its own characteristics. <br><br>  Now you can use this drop-down list as many times as you like, with any predefined values, on one page or on many. <br><br>  <i>to be continued</i> </div><p>Source: <a href="https://habr.com/ru/post/209354/">https://habr.com/ru/post/209354/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../209342/index.html">Role-playing technology. Part 1. Technology and magic</a></li>
<li><a href="../209346/index.html">How I tested the IDE of the company "Multiklet"</a></li>
<li><a href="../209348/index.html">Recovering LSI RAID Controller firmware</a></li>
<li><a href="../209350/index.html">Components by TJHolowaychuk</a></li>
<li><a href="../209352/index.html">Scaling is simple. Part Two - Caching</a></li>
<li><a href="../209356/index.html">How to force the process to use the new DNS server address from the updated resolv.conf without restarting the process itself</a></li>
<li><a href="../209360/index.html">Video recordings of reports on the stream ‚ÄúJavaScript on backend‚Äù of the FOSS Sea conference</a></li>
<li><a href="../209362/index.html">14 tools for web design and web development for 2014</a></li>
<li><a href="../209364/index.html">Tronsmart T1000 - ‚Äúeasy‚Äù media player for broadcasting images to the big screen</a></li>
<li><a href="../209368/index.html">Chef for 21 days. Part two. Creating and using a cookbook</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
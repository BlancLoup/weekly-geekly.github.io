<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Language Lua and Corona SDK (2/3 part)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is the second of the three parts of the article on the basic concepts of the Lua language for the Corona SDK (if you have not read the first part...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Language Lua and Corona SDK (2/3 part)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/89f/564/c46/89f564c460e901d92e4564afd30e447f.jpg" alt="image"><br><br>  This is the second of the three parts of the article on the basic concepts of the Lua language for the <a href="https://coronalabs.com/">Corona SDK</a> (if you have not read the <a href="https://habrahabr.ru/post/344304/">first part I</a> advise you to start with it), in this part we will look at all the data types in the language.  You will learn how to initialize variables of all types, use their values, and convert one type to another.  This article is extremely important in the matter of learning the language and I tried to add a large number of valuable tips that will allow you to avoid many mistakes when you write your games. <br><a name="habracut"></a><br><h1>  Types of data and their conversion </h1><br>  Lua has 8 data types.  Before considering the types I will focus on the standard function of the lua language - type.  This function returns a string with the name of the data type of the specified variable or data.  An example of using the type function: <br><br><pre><code class="lua hljs">n = <span class="hljs-literal"><span class="hljs-literal">nil</span></span> st = <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-built_in"><span class="hljs-built_in">pi</span></span> = <span class="hljs-number"><span class="hljs-number">3.14</span></span> func = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="hljs-keyword"><span class="hljs-keyword">end</span></span> t = {} b = <span class="hljs-literal"><span class="hljs-literal">true</span></span> co = coroutine.<span class="hljs-built_in"><span class="hljs-built_in">create</span></span>(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="hljs-keyword"><span class="hljs-keyword">end</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>(n), <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>(st), <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">pi</span></span>), <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>(func), <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>(t), <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>(b), <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>(co)) <span class="hljs-comment"><span class="hljs-comment">--: nil string number function table boolean thread</span></span></code> </pre> <br>  Next, consider the types of the language Lua. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Nil type </h3><br>  This data type defaults to any variable that has no value assigned.  All nil variables are nil.  You can assign this type to a variable in two ways: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> B = <span class="hljs-literal"><span class="hljs-literal">nil</span></span><span class="hljs-comment"><span class="hljs-comment">--   local A--    -- -        nil</span></span></code> </pre> <br>  It is worth noting that if a variable has not been initialized in the current scope, its type and value will be nil.  A variable having a nil type can be compared in the order of comparing a logical variable having a value of false through the logical not operation, but in reality these types are not similar, I will give an example: <br><br><pre> <code class="lua hljs">n = <span class="hljs-literal"><span class="hljs-literal">nil</span></span> b = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> n <span class="hljs-keyword"><span class="hljs-keyword">then</span></span><span class="hljs-comment"><span class="hljs-comment">--true print(1) end if not b then--true print(2) end if b == n then--false print(3) end --&gt;&gt; 1 --&gt;&gt; 2</span></span></code> </pre> <br><h3>  Type boolean </h3><br>  The type boolean is also called a boolean or boolean type, since it is used to implement comparison operations.  As already mentioned above, boolean has only 2 possible values ‚Äã‚Äãof false and true ( <i>false and true</i> ).  Since all the comparison operations return exactly these values ‚Äã‚Äã- the variables of this type can be initialized by assigning the values ‚Äã‚Äãof the comparative operation to them, it can also be initialized by directly assigning the values.  Variables of type boolean can be compared only with equality and inequality operations, as well as directly as a comparison condition in if / elseif <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--    b1 = false b2 = true --   b3 = b1 ~= b2--true b4 = b1 == b2--false if b1 == b3 then--true print(true) end if b3 then print(true) end</span></span></code> </pre> <br><h3>  Type number </h3><br>  An extended numerical type, its full description is significantly beyond the scope of this text, so inquisitive users can follow the <a href="https://en.wikipedia.org/wiki/IEEE_754-1985">link</a> and become familiar with the specification in detail.  I can only say that both negative and positive numbers, both integers and floating point, can accommodate this type, at certain levels of positive and negative digit capacity, an automatic transition to the exponential form of numbers takes place, the limits of bit capacity depend on the device‚Äôs processor capacity, but currently <a href="https://coronalabs.com/">Corona SDK</a> has support for Android 4.0.3+, which most likely means that all available devices will be 64 bit.  To initialize variables of the number type, it is sufficient either to explicitly assign a value in one of the available formats, either assign the result of a calculation to a variable, or equate it with another variable of this type.  I note that any variable of type number in operations of logical comparison returns true, even 0 (and even -1), this should be taken into account by fans of the language c ++ ( <i>and similar</i> ) where 0 is the equivalent of false.  I will give an example of operations with the number type: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> a,b = <span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span><span class="hljs-comment"><span class="hljs-comment">--  local c = a + b--   --   d = 12e5 -- 1 200 000 e = 2e-3 -- 0.002 --   f = 0x234 -- 564 --  j = 1.23 k = .55 -- 0.55 -    1      </span></span></code> </pre> <br>  Number variables can be performed using a series of numerical operations, the main of which are shown in the example: <br><br><pre> <code class="lua hljs">a = b + c <span class="hljs-comment"><span class="hljs-comment">--  a = b - c -- a = b * c --  a = b / c --  a = b % c --    a = b ^ c -- b   c</span></span></code> </pre> <br><h3>  Type string </h3><br>  The String type is quite well developed in Lua and, complete with variables, this type comes with many amenities.  How to create string variables: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> st1 = <span class="hljs-string"><span class="hljs-string">'qwert'</span></span><span class="hljs-comment"><span class="hljs-comment">--  st2 = st1--   st3 = st1 .. st2--   </span></span></code> </pre> <br>  As you noticed from the example, the concatenation ( <i>concatenation</i> ) of strings is performed by two points, and the concatenation process itself can be used as one of the ways to convert a number into a string, I will give an example: <br><br><pre> <code class="lua hljs">i = <span class="hljs-number"><span class="hljs-number">10</span></span><span class="hljs-comment"><span class="hljs-comment">--number st = '11'--string konc1 = 1 .. st --  konc2 = 100..''--       string print(konc1, konc2, type(konc1) , type(konc2 )--&gt;&gt;111 100 string string</span></span></code> </pre> <br>  As you can see, the translation from number to string is quite simple.  I want to note that if you use a string concatenation, it is best to put a space between the clutch operator and operands, but this is not always necessary, but it‚Äôs best to get used to it because, firstly, it‚Äôs so prettier and clearer, and secondly if one of the operands - a number ( <i>not a variable equal to a number, but a number</i> ), then if you <b>do not</b> put a space, the error " <i>malformed number near</i> " will occur.  There are more traditional approaches to converting, I will give an example of a transfer to both sides: <br><br><pre> <code class="lua hljs">i1 = <span class="hljs-number"><span class="hljs-number">1</span></span> s1 = <span class="hljs-string"><span class="hljs-string">'11'</span></span> i2 = <span class="hljs-built_in"><span class="hljs-built_in">tonumber</span></span>(s1)<span class="hljs-comment"><span class="hljs-comment">-- string -&gt; number s2 = tostring(i1)--  number -&gt; string</span></span></code> </pre> <br>  I would also like to add that the implicit conversion of a string into a number also exists, but I strongly advise you not to do this ‚Äî this is completely ugly and will almost certainly lead to a complex error: <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--      st = '10' i = 10 + st print(i, type(i))--&gt;&gt; 20 number</span></span></code> </pre> <br>  When initializing variables of the string type, it is not uncommon for complex moments to arise, which I will briefly describe and present ways to solve them: <br><br><ul><li>  The string has a double or single quotation mark - this is solved in one of two ways: either you need to put the "\" in front of the symbol, this action escapes the character preventing it from completing the open quotation, or use another kind of quotation marks, in Lua as the opening symbol and closing strings can be used in both single and double quotes. </li><li>  In the line there is a slash character "\". This causes difficulties. As the interpreter believes that the character standing after the slash is the manager, to solve this problem, you must enter another slash and the string "\\" will be considered as if the character 1 </li></ul><br>  As I wrote above, the string contains a lot of useful amenities, they are implemented using the functions that we consider below. <br><br><h4>  string.len (s) / s: len () </h4><br>  The function allows you to determine the length of the string.  This, like most of the other functions from the <b>string</b> library, can be used in two ways, but there are features, below is an example of use: <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--  string.len(s) local st = 'Hello World!' local len_st = string.len(st) print(len_st)--&gt;&gt;12 --  s:len() local le_st = st:len() print(len_st)--&gt;&gt;12 --    print(string.len('Examlpe string'))--&gt;&gt;14 --   -    --      print('Examlpe string':len())--&gt;&gt; Error: ')' expected near ':'</span></span></code> </pre> <br>  As you may have noticed, there is an incorrect way to use the function, the comments explain the essence of the error.  The rule of using functions common to all other functions of the library, so in the future I will not stop on this in detail. <br><br><h4>  string.byte (s [, i [, j]]) / s: byte ([i [, j]]) </h4><br>  The function returns the character codes of the string from i-th to j-th.  Parameters i and j are not required and if you do not specify j, only the code of the i-th element will be returned, if you do not specify i, but specify j, character codes from the first to the jth will be returned, unless you specify i and j will be returned code of the first character in the string.  I will give an example of using the function: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> s = <span class="hljs-string"><span class="hljs-string">'Example'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(s:<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span>())<span class="hljs-comment"><span class="hljs-comment">--  &gt;&gt; 69 print(string.byte(s, 3))--  &gt;&gt; 97 print(string.byte(s,nil, 4))--   4- &gt;&gt; 69 120 97 109 print(s:byte(nil, s:len()))--  &gt;&gt; 69 120 97 109 112 108 101</span></span></code> </pre> <br><h4>  string.char (i1, i2, ...) </h4><br>  One or more parameters with character numbers are passed to the function, and a string equal to all the characters transferred is returned.  This function has the opposite purpose with respect to the string.char () function.  Examples of using: <br><br><pre> <code class="lua hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">char</span></span>(<span class="hljs-number"><span class="hljs-number">65</span></span>)) <span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; A print(string.char(72,101,108,108,111)) --&gt;&gt; Hello local s = 'Example' print(string.char(s:byte(1,s:len())))-- s:byte   --- st        &gt;&gt; Example</span></span></code> </pre> <br><h4>  string.find (s, pattern [, index [, no_regular]]) <br>  s: find (pattern [, index [, no_regular]]) </h4><br>  Using the find function, you can find in the string s the position of the pattern pattern or nil if not found.  Pattern pattern can be either a string or a regular expression ( <i>you will learn more about regular expressions in a separate chapter</i> ).  Consider the simplest version of the use of find. We next turn to the features of the optional parameters: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> s = <span class="hljs-string"><span class="hljs-string">"Hello Lua!"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">find</span></span>(s,<span class="hljs-string"><span class="hljs-string">"Lua"</span></span>))<span class="hljs-comment"><span class="hljs-comment">--      --  Lua   s &gt;&gt; 7 9 print(s:find("%sL"))--    " -- L       " &gt;&gt; 6 7</span></span></code> </pre> <br>  The index parameter defaults to 1 and this means that the position of the first found entry is returned if you search from the beginning, if you set index to 3, then the third entry in the string will be returned from the beginning, but if -3, then the 3rd entry with end of line.  The parameter no_regular is logical, i.e.  true / false (true / false), the default parameter is false, if set to true, then the pattern parameter will always be perceived as a regular string, even if you enter a regular expression into it.  I will give an example of the expanded use of find: <br><br><pre> <code class="lua hljs">s = <span class="hljs-string"><span class="hljs-string">'La La La La %sLa La'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(s:<span class="hljs-built_in"><span class="hljs-built_in">find</span></span>(<span class="hljs-string"><span class="hljs-string">'La'</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)) <span class="hljs-comment"><span class="hljs-comment">--    &gt;&gt; 4 5 print(s:find('La', -2)) --    &gt;&gt; 18 19 print(s:find('%sLa', 1, true)) --&gt;&gt;  ,    &gt;&gt; 13 16</span></span></code> </pre> <br><h4>  string.format (s, e1, e2, ...) <br>  s: format (e1, e2, ...) </h4><br>  The string.format function creates a formatted string with a set of arguments.  At first glance, this function may seem complicated in understanding, but in fact it can greatly simplify many constructions when outputting final information, as well as very conveniently used for other indirect transformations, for example, from number to a string of hexadecimal code.  I will give the simplest example: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> sum1,sum2 = <span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-number"><span class="hljs-number">200</span></span><span class="hljs-comment"><span class="hljs-comment">--   print(string.format('Value1: %d, Value2: %d', sum1,sum2))--&gt;&gt; Value1: 100, Value2: 200</span></span></code> </pre> <br>  As you can see, first comes the format of the line, which contains arguments showing how to use the parameters following this parameter.  There are 11 ( <i>c, d, E, e, f, g, i, o, u, X, x</i> ) arguments for controlling numeric values ‚Äã‚Äãand 2 ( <i>s, q</i> ) arguments for managing strings.  Then I‚Äôll briefly dwell on each argument and then give examples of usage: <br><br><ul><li>  % s - the parameter is considered a string and is simply inserted </li><li>  % q - the parameter is considered a string and is inserted in double quotes </li><li>  % c - instead of a number, the symbol will be substituted whose number in the corresponding parameter </li><li>  % d - the transferred number will simply be inserted without changing </li><li>  % i - the number is represented as an integer with the sign Signed type integer </li><li>  % u - the number is represented as an unsigned integer unsigned integer </li><li>  % o - the number is converted to the octal number system </li><li>  % x,% X - the number is converted to hexadecimal notation, the case of letters in a string will depend on the register of the argument </li><li>  % f,% g - the number is considered to be real (floating point), for% f the format is full, for% g shortened to 5 decimal places </li><li>  % E,% e - the number will be converted to an exponential form, the register of the letter E in the string will depend on the register of the argument </li></ul><br><pre> <code class="lua hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">format</span></span>(<span class="hljs-string"><span class="hljs-string">'Number: %d, Signed: %i, Unsigned: %u'</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-number"><span class="hljs-number">-100</span></span>,<span class="hljs-number"><span class="hljs-number">-200</span></span>)) <span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; Number: 100, Signed: -100, Unsigned: 4294967096 print(string.format("%c%c%c%c%c%c%c", 69,120,97,109,112,108,101)) --&gt;&gt; Example print(string.format("%e, %E", math.pi,math.pi))--&gt;&gt; 3.141593e+000, 3.141593E+000 print(string.format("%f, %g", math.pi,math.pi))--&gt;&gt; 3.141593, 3.14159 print(string.format("%o, %x, %X", 1024,4069,16382)) --&gt;&gt; 2000, fe5, 3FFE print(string.format("%s %q", "Hello", "Corona SDK!"))--&gt;&gt; Hello "Corona SDK!"</span></span></code> </pre> <br><h4>  string.lower (s) / s: lower () </h4><br>  The function converts all characters in a string to lower case: <br><br><pre> <code class="lua hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">lower</span></span>(<span class="hljs-string"><span class="hljs-string">'Hello World!'</span></span>)) <span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; hello world!</span></span></code> </pre> <br><h4>  string.upper (s) / s: upper () </h4><br>  The function converts all characters in the string to uppercase: <br><br><pre> <code class="lua hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">upper</span></span>(<span class="hljs-string"><span class="hljs-string">'Hello World!'</span></span>)) <span class="hljs-comment"><span class="hljs-comment">--&gt;&gt;HELLO WORLD!</span></span></code> </pre> <br><h4>  string.rep (s, n) / s: rep (n) </h4><br>  The function is passed a string and the number n, the string is returned repeated n times: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> s = <span class="hljs-string"><span class="hljs-string">'Corona '</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(s:<span class="hljs-built_in"><span class="hljs-built_in">rep</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>))<span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; Corona Corona Corona</span></span></code> </pre> <br><h4>  string.reverse (s) / s: reverse () </h4><br>  The function returns the passed string with characters in reverse order: <br><br><pre> <code class="lua hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">reverse</span></span>(<span class="hljs-string"><span class="hljs-string">'9876543210'</span></span>)) <span class="hljs-comment"><span class="hljs-comment">--&gt;0123456789</span></span></code> </pre> <br><h4>  string.match (s, pattern [, index]) <br>  s: match (pattern [, index]) </h4><br>  The string.match function finds the occurrence in string s according to the regular expression pattern and returns the capture parameters.  About captures using regular expressions will be described in detail in the appropriate section.  The function has an optional index parameter, which is equal to 1 by default and determines from which account the entry into the template is to be captured, it should be noted that the negative Index value, by analogy with string.find, is not supported: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> reg = <span class="hljs-string"><span class="hljs-string">" (%w+):(%d+)"</span></span><span class="hljs-comment"><span class="hljs-comment">--    2  local s = " force:30, speed:25"--     local key, value = s:match(reg, 2)--    print(key, value)--&gt;&gt; speed 25</span></span></code> </pre> <br><h4>  string.gmatch (s, pattern) <br>  s: gmatch (pattern) </h4><br>  The string.gmacth function is in many respects similar to the string.macth function, but it is intended to be used as an argument in a loop (for more information about loops, see the corresponding section).  string.gmacth returns the captures of all occurrences in the string, i.e.  no need to specify index, it looks like the following example: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> reg = <span class="hljs-string"><span class="hljs-string">" (%w+):(%d+)"</span></span><span class="hljs-comment"><span class="hljs-comment">--    2  local s = " force:30, speed:25"--     for key, value in s:gmatch(reg) do--     print(key, value) end --&gt;&gt; force 30 --&gt;&gt; speed 25</span></span></code> </pre> <br>  Cyclic capture is the most powerful tool for Lua to use which can greatly facilitate many routine operations for parsing complex string values. <br><br><h4>  string.sub (s, i [, j]) <br>  s: sub (i [, j]) </h4><br>  The string.sub function returns the substring of the passed string.  The substring starts with the i-th character.  If the third argument j is not specified, the substring will end at the end of the string.  If the third argument is specified, the substring ends with the jth character.  If i or j has a negative value, the count comes from the end of the line.  I will give examples of use: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> s = <span class="hljs-string"><span class="hljs-string">'To be or not to be'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(s:<span class="hljs-built_in"><span class="hljs-built_in">sub</span></span>(<span class="hljs-number"><span class="hljs-number">7</span></span>))<span class="hljs-comment"><span class="hljs-comment">--&gt;&gt;or not to be print(s:sub(7,12))--&gt;&gt;or not print(s:sub(-5))--&gt;&gt;to be print(s:sub(4,-3))--&gt;&gt;be or not to print(s:sub(-8,-4))--&gt;&gt;ot to</span></span></code> </pre> <br><h4>  string.gsub (s, pattern, replace [, n]) <br>  s: gsub (pattern, replace [, n]) </h4><br>  The string.gsub function is one of the most powerful functions of the language.  The function has several applications in the simplest case; it replaces in the string s all matches specified in the pattern with the value specified in replace in all places, using n you can limit the number of substitutions, the function will return the resulting string and the number of substitutions: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> s = <span class="hljs-string"><span class="hljs-string">'dust ist fantastisch'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(s:<span class="hljs-built_in"><span class="hljs-built_in">gsub</span></span>(<span class="hljs-string"><span class="hljs-string">'s'</span></span>,<span class="hljs-string"><span class="hljs-string">'S'</span></span>))<span class="hljs-comment"><span class="hljs-comment">--&gt;&gt;duSt iSt fantaStiSch 4 local s = 'lalalalala' print(s:gsub('a','A',3))--&gt;&gt;lAlAlAlala 3</span></span></code> </pre> <br>  As in the case of string.find, a regular expression (capture) can be used as a search pattern.  Capture arguments can be placed according to indices% index_number: <br><br><pre> <code class="lua hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">gsub</span></span>(<span class="hljs-string"><span class="hljs-string">"lalalalala"</span></span>, <span class="hljs-string"><span class="hljs-string">"(l)(a)"</span></span>, <span class="hljs-string"><span class="hljs-string">"%2%1"</span></span>)) <span class="hljs-comment"><span class="hljs-comment">--  l  a --      --&gt;&gt; alalalalal 5</span></span></code> </pre> <br>  As the replace parameter, a function can be used while parameters captured by a regular expression will be passed to it as parameters. <br><br><pre> <code class="lua hljs"><span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">gsub</span></span>(<span class="hljs-string"><span class="hljs-string">"12 23 34"</span></span>, <span class="hljs-string"><span class="hljs-string">"(%d+)"</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>)<span class="hljs-comment"><span class="hljs-comment">--     --&gt;&gt; 12 --&gt;&gt; 23 --&gt;&gt; 34</span></span></code> </pre> <br><br><h3>  A few words about utf-8. </h3><br>  Most of the functions of the string library cannot correctly work with the <a href="https://ru.wikipedia.org/wiki/UTF-8">utf-8</a> format for this reason, strings with a national encoding and other special characters will not be correctly processed.  To solve these problems, the Corona SDK has a separate <a href="https://docs.coronalabs.com/plugin/utf8/index.html">utf</a> library, which has both analogs of functions from the string library and several of its facilities.  This library will be discussed in more detail in the context of studying the Corona SDK, or readers can study it themselves. <br><br><h3>  Type table </h3><br>  The type table (table) is the most basic type of data representation in Lua, in the most general sense, almost all the main entities in a language are tables, even source files.  How to create tables and how to work with them: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> t = {}<span class="hljs-comment"><span class="hljs-comment">--   t['key1'] = 'name1'--  key1   "name1" t['key2'] = {}--  key2   t['key2']['key3'] = 123--  key3   key2</span></span></code> </pre> <br>  The exact same table can be initialized in another way: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> t = { key1 = <span class="hljs-string"><span class="hljs-string">'name1'</span></span>, key2 = { key3 = <span class="hljs-number"><span class="hljs-number">123</span></span>, }, }</code> </pre> <br>  notice these entries are identical: <br><br><pre> <code class="lua hljs">t[<span class="hljs-string"><span class="hljs-string">'key1'</span></span>] = <span class="hljs-string"><span class="hljs-string">'name1'</span></span> t.key1 = <span class="hljs-string"><span class="hljs-string">'name1'</span></span></code> </pre> <br>  there is a sense in the first record type only if a numeric value is used as a key: <br><br><pre> <code class="lua hljs">t[<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">111</span></span><span class="hljs-comment"><span class="hljs-comment">--  t.1 = 111--   </span></span></code> </pre> <br>  The values ‚Äã‚Äãrecorded in the table are readable and writeable: <br><br><pre> <code class="lua hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(t.key1)<span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; name1 t.key1 = 'name2' print(t.key1)--&gt;&gt; name2</span></span></code> </pre> <br>  To clear the entire contents of the table, you can use one of the following methods: <br><br><pre> <code class="lua hljs">t = {}<span class="hljs-comment"><span class="hljs-comment">--   -     table.remove(t)--    </span></span></code> </pre> <br>  If you want to delete one of the table keys, this can be done in two ways: <br><br><pre> <code class="lua hljs">t.key1 = <span class="hljs-literal"><span class="hljs-literal">nil</span></span><span class="hljs-comment"><span class="hljs-comment">-- nil   table.remove(t, key1)--    </span></span></code> </pre> <br>  The most natural way to initialize tables in Lua is to create a numbered array, this is done in the following way: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> t = {<span class="hljs-number"><span class="hljs-number">23</span></span>, <span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-number"><span class="hljs-number">3.14</span></span>, <span class="hljs-string"><span class="hljs-string">'vasia'</span></span>, {<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-string"><span class="hljs-string">'a'</span></span>}}</code> </pre> <br>  In fact, if you do not specify the key when initializing the table, the numbering occurs in the order of increasing starting 1 (for most developers, numbering from 0 is more natural, but in Lua it is not so, you need to remember about it), so  The initialized table actually looks like this: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> t = { [<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">23</span></span>, [<span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-number"><span class="hljs-number">45</span></span>, [<span class="hljs-number"><span class="hljs-number">3</span></span>] = <span class="hljs-number"><span class="hljs-number">3.14</span></span>, [<span class="hljs-number"><span class="hljs-number">4</span></span>] = <span class="hljs-string"><span class="hljs-string">'vasia'</span></span>, [<span class="hljs-number"><span class="hljs-number">5</span></span>] = { [<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">12</span></span>, [<span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-string"><span class="hljs-string">'a'</span></span>, }, }</code> </pre> <br>  As you can see, ‚Äúunder the hood‚Äù quite significant transformations took place with the data.  Numbered tables in Lua have special properties, for example, by adding the # symbol to the table name, you get the number of strictly numbered values ‚Äã‚Äãin the table: <br><br><pre> <code class="lua hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(#t)<span class="hljs-comment"><span class="hljs-comment">--&gt;&gt;5 print(#t[5])--&gt;&gt;2 (     5)</span></span></code> </pre> <br>  If you add to the table a new strictly numbered key obtained through # the size of the table will increase: <br><br><pre> <code class="lua hljs">t[#t+<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-string"><span class="hljs-string">'kolia'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(#t)<span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; 6</span></span></code> </pre> <br>  If you delete one of the keys by assigning nil, for example, the key [3] the continuous part of the numbered array decreases to just 2 keys [1] and [2], which cannot lead to further errors due to misunderstanding, for this reason I advised above to delete Keys from the table using table.remove, as with this, if you delete the key, the other strictly numbered values ‚Äã‚Äãwill be shifted: <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--   t[3] = nil print(#t)--&gt;&gt; 2 --   table.remove(t,3) print(#t)--&gt;&gt; 5</span></span></code> </pre> <br>  After correct removal of the key, the table will look like: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> t = { [<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">23</span></span>, [<span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-number"><span class="hljs-number">45</span></span>, [<span class="hljs-number"><span class="hljs-number">3</span></span>] = <span class="hljs-string"><span class="hljs-string">'vasia'</span></span>, [<span class="hljs-number"><span class="hljs-number">4</span></span>] = { [<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">12</span></span>, [<span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-string"><span class="hljs-string">'a'</span></span>, }, [<span class="hljs-number"><span class="hljs-number">5</span></span>] = <span class="hljs-string"><span class="hljs-string">'kolia'</span></span>, }</code> </pre> <br>  You can add other unnumbered keys to the strict-numbered table, this will not affect the performance of the table, but these keys will also not be taken into account when getting the size through #: <br><br><pre> <code class="lua hljs">t.key = <span class="hljs-string"><span class="hljs-string">'name1'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(t.key, #t)<span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; name1 5</span></span></code> </pre> <br>  To bypass all the numbered values ‚Äã‚Äãof the table by the cyclic operation, there is a function ipairs, it is used as an argument of the for loop by analogy with string.gmatch: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> key, value <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">ipairs</span></span>(t) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(key, value) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; 1 23 --&gt;&gt; 2 45 --&gt;&gt; 3 vasia --&gt;&gt; 4 table: 00000000 --&gt;&gt; 5 kolia</span></span></code> </pre> <br>  If you want to bypass the cycle all values ‚Äã‚Äãincluding those not strictly numbered, use the pairs function: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> key, value <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">pairs</span></span>(t) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(key, value) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; 2 45 --&gt;&gt; key name1 --&gt;&gt; 3 vasia --&gt;&gt; 1 23 --&gt;&gt; 4 table: 00000000 --&gt;&gt; 5 kolia</span></span></code> </pre> <br>  Note?  that when using pairs, the sequence of outputting values ‚Äã‚Äãis not strict, but in general rather confusing, this should be taken into account.  In conclusion, I want to note that you can use pairs / ipairs as you pass the value of the table, or by creating it directly into a call like this: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> key, value <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">ipairs</span></span>{<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-number"><span class="hljs-number">20</span></span>,<span class="hljs-number"><span class="hljs-number">30</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(key, value) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; 1 10 --&gt;&gt; 2 20 --&gt;&gt; 3 30 for key, value in pairs{key1 = 34,key2 = 65, key3 = 12} do print(key, value) end --&gt;&gt; key1 34 --&gt;&gt; key3 12 --&gt;&gt; key2 65</span></span></code> </pre> <br><h3>  Function type </h3><br>  The function type has all user-defined functions and standard language functions.  I will give an example: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> summ = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a,b)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + b <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>(summ))<span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; function print(type(print))--&gt;&gt; function</span></span></code> </pre> <br>  You will learn more about how to use functions in the appropriate section. <br><br><h3>  Thread type </h3><br>  Thread is a separate thread of code execution.  I will try to briefly explain what it is.  All code of your Lua project is executed in a single execution thread, if there is a need to execute an object of type thread is created in a separate thread.  The following code is used for creation: <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--  local co = coroutine.create(function () --    end) print('TYPE: '..type(co))--&gt;&gt; thread</span></span></code> </pre> <br><br>     thread,         ,        coroutine.resume   thread.             -       .           coroutine.yield(),        .           coroutine.resume.             ,        .  Those.         coroutine.resume   . <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--  local co = coroutine.create(function () local num = 1--     while true do print(num)--   num = num + 1-- coroutine.yield()--   resume end end) print('TYPE: '..type(co)) --     coroutine.resume(co)--&gt;&gt; 1 coroutine.resume(co)--&gt;&gt; 2 coroutine.resume(co)--&gt;&gt; 3</span></span></code> </pre> <br><br>      ,             .        ,         ,           . <br><br><h3>  userdata </h3><br>  userdata   Lua            ,    C().  Those.        Lua   userdata.         ,       . <br><br><h2>  Conclusion </h2><br>          Lua                  ,      <a href="https://coronalabs.com/">Corona SDK</a> ,           <a href="https://habrahabr.ru/post/344562/"></a>   . </div><p>Source: <a href="https://habr.com/ru/post/344312/">https://habr.com/ru/post/344312/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344298/index.html">Ubuntu OpenBox installation and configuration</a></li>
<li><a href="../344302/index.html">Multi-ary functions in Java</a></li>
<li><a href="../344304/index.html">Language Lua and Corona SDK (1/3 part)</a></li>
<li><a href="../344306/index.html">Life at the Unity Asset Store. Briefly</a></li>
<li><a href="../344310/index.html">Fake design</a></li>
<li><a href="../344314/index.html">Dagger 2 for novice Android developers. Dagger 2. Part 1</a></li>
<li><a href="../344320/index.html">Sparse matrices: how scientists accelerated machine learning on the GPU</a></li>
<li><a href="../344324/index.html">Continuous integration and deployment of Docker in GitLab CI</a></li>
<li><a href="../344326/index.html">Introduction to VxLAN</a></li>
<li><a href="../344328/index.html">Accelerate the site. How to understand if this is relevant for your site</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>RThrust - automatic testing system for BC motors</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have been fond of multicopters for quite some time, and all this time I have been looking for ways to make the copters fly longer. 
 A typical fligh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>RThrust - automatic testing system for BC motors</h1><div class="post__text post__text-html js-mediator-article">  I have been fond of multicopters for quite some time, and all this time I have been looking for ways to make the copters fly longer. <br>  A typical flight time for an inexpensive copter is 7-15 minutes.  Frustratingly little.  My current quadcopter flies 19 minutes.  And I spent a lot of time on the choice of regulators and the VMG for him, most often making assumptions in the context of insufficient data. <br>  The key to flight duration is an energy efficient propeller group.  What does it mean?  The combination of the motor and propeller should make the most of the energy used to create thrust.  That is, to lift as much weight as possible, consuming as little energy as possible.  Measure the efficiency of the motor group in grams per watt.  The forums often found various devices, consisting of weights and attachments for the motor plus some wattmeter.  Sometimes it costs purely with weights to find out what kind of traction the VMG creates. <br>  However, the measurement error is usually very high, starting with the fact that we can not accurately determine both the thrust, which oscillates (the motor constantly changes turns) and the power, which also floats quite strongly.  As a result, the error is comparable with the difference between the motors. <br>  This situation does not suit me, considering that motors and propellers differ in cost up to a dozen times, you need to understand whether it is worth paying more. <br>  As a result, I built a test stand on which the VMG is mounted and its parameters are measured: <br><img align="left" alt="RThrustLogo" src="https://habrastorage.org/getpro/habr/post_images/8ce/5f4/f2c/8ce5f4f2c893c9715673f3e5be39fadd.png" title="RThrustLogo">  - Thrust up to 1g <br>  -Battery voltage with an accuracy of 0.01V <br>  - Current with an accuracy of 0.1A-0.2A approximately (depends on current) <br><img src="https://habrastorage.org/storage2/44a/644/e49/44a644e490ee4a36b3eeafdecca913b5.jpg"><br>  I did not know which blog to place the information in, so far I have placed it here. <br><a name="habracut"></a><br>  All these parameters are removed for each value of the control signal for the speed controller in 1% increments. <br>  Additionally, the power and efficiency of the VMG are calculated for each point. <br>  According to the data obtained, graphs are constructed.  Horizontal - the position of the throttle stick in percent.  Vertical - measured and calculated values ‚Äã‚Äãfor a given position of the throttle stick. <br><img src="https://habrastorage.org/storage2/ea0/4e8/54f/ea04e854fc90ed252339d7b6cc2a5c3d.png"><br>  Since I‚Äôm a software engineer, the stand performs all testing automatically. <br>  Program features: <br>  The motor can be controlled manually by observing real-time data for an approximate motor estimate.  This is done by simply moving the slider or manually entering a value from 100 to 200 (control pulse from 1 to 2 ms).  On the right, a visual indicator shows the position of the virtual gas knob for the entered number. <br>  Noise filtering is performed for all captured data. <br>  For current and efficiency, additional filtering is also available, since  due to the peculiarities of the brushless motor, its consumption constantly jumps and noise appears on the graph, if the data is not filtered. <br>  The values ‚Äã‚Äãof the reference voltages used by the test bench can be changed, as well as the coefficients of the voltage dividers. <br>  All settings are saved by the program automatically in the ini file. <br>  The measurement time for each gas step can be specified in milliseconds.  Good results are obtained by measuring 800 ms per step, then the entire test of the motor takes about 1m 20 seconds. <br>  At any time you can press ESC and the test will stop, the motor will be stopped. <br>  If you drive with the mouse over the graph, then under it the program will show the values ‚Äã‚Äãof all the graphs for this position of the ‚Äúgas knob‚Äù. <br>  The graph can be enlarged and viewed in more detail, you can drag it with a mouse, looking at the piece of interest. <br>  Any graph can be turned off to view other data, and vertical scaling is automatically performed so that all marked graphs fit. <br>  Measurement results can be saved to the ".mpp" file. <br>  Also in the current version of the program, the function of comparing the parameters of the VMG appeared: <br><img src="https://habrastorage.org/storage2/f07/cbd/a20/f07cbda20dd9934c10789b1dd8253794.png"><br>  It is possible to compare not only different motors, but also the same motor with different propellers or batteries, as well as construct graphs of reduced efficiency versus thrust, taking into account the body weight of the VMG. <br>  Later, maybe I will do data export in CSV format, for processing in Excel, for example. <br>  I did a few dozen tests and got some interesting results.  For example, the effectiveness depends on the state of charge of the battery, as I guessed.  Not all batteries are equally useful, and on the graph it is noticeable to the naked eye.  Not all speed controllers are equally good, but there is a lot of conjecture around them, and the stand allowed to visually see what the difference is between the regulators and even compare the same controller with the factory and alternative firmware. <br>  Analyzing the data, I developed a methodology for selecting the VMG for a specific task.  Perhaps this will be implemented as an automatic selection module by parameters.  Then it will be possible to choose the most effective VMG for a specific copter. <br>  The hardware is implemented on a 32-bit microcontroller STM32F100RB.  The program part works under any modern Windows, no .net and other pribluda is not required. <br>  For those who wish to test their VMG, I suggest to contact.  Depending on how interesting this VMG is to me, I can do the test for free. <br>  Stand features: <br>  - Voltage up to 4S (will be up to 6S) <br>  - The measured current to 30A.  (Will be up to 50A) <br>  -VGG up to 5kg. <br>  - On the stand climb propellers up to 80cm long. <br>  - Regulators with control of standard PWM signal, that is, any hobby. <br><br>  The whole measurement process looks like this (reduced testing time for the demonstration). <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/SI8DsBtEto8%3Ffeature%3Doembed&amp;xid=17259,1500004,15700023,15700186,15700191,15700253&amp;usg=ALkJrhj8QdXs0ciY2eo7DV7U_wtmxomacg" frameborder="0" allowfullscreen=""></iframe><br><br>  To modify the voltage and current there are no special problems, you need only a few parts. <br>  It is also possible to assemble such a stand to order, but as long as I don‚Äôt have time to plant a finished device, so if you need a stand, it will take some time ‚Äî not all components are in stock. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Most importantly, I offer those who wish to test their VMG for free with Habr and get its data. <br></div><p>Source: <a href="https://habr.com/ru/post/187146/">https://habr.com/ru/post/187146/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../187126/index.html">Google, Apple and Facebook want to disclose NSA requests</a></li>
<li><a href="../187130/index.html">How to become the Mayor of Krasnodar</a></li>
<li><a href="../187136/index.html">G.fast may be adopted in 2014</a></li>
<li><a href="../187138/index.html">Highscreen Omega Q - Budget Quad</a></li>
<li><a href="../187142/index.html">Development of IntelliJ IDEA plugin. Part 2</a></li>
<li><a href="../187148/index.html">Comparison of two GPS Data Loggers</a></li>
<li><a href="../187152/index.html">Newcomer</a></li>
<li><a href="../187154/index.html">Spaghetti article about spaghetti code</a></li>
<li><a href="../187158/index.html">Russian Open Quadcopter Championship</a></li>
<li><a href="../187162/index.html">Just5 Brick Presentation: How I Met Thomofon + Answers to Habroid Questions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
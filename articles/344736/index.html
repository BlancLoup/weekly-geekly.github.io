<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unlucky Notes on Azure Cloud Hosting</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I would like to talk about how you can publish a website in Azure. This is quite simple, but I will not talk about very simple things, as this is not ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unlucky Notes on Azure Cloud Hosting</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://habrahabr.ru/post/344736/"><img src="https://habrastorage.org/webt/em/by/mw/embymwta7yj-bqlb7ohhk_-sgyq.jpeg"></a> <br>  I would like to talk about how you can publish a website in Azure.  This is quite simple, but I will not talk about very simple things, as this is not at all interesting.  You will not find anything about complicated things either.  I‚Äôll just write about what I liked and what even surprised me a little. <br><br>  Rolling up is not a lot of letters, a lot of praises, a bit of criticism, as well as a description of some of the features of Azure hosting, about which, it would seem, everyone should know ... <br><a name="habracut"></a><br>  In order to create a website, you need to click + and select the Web application item in the ‚ÄúInternet + Mobile Devices‚Äù category. <br><br><img src="https://habrastorage.org/webt/wn/-u/r5/wn-ur5yu9upni-xhmu15ft8umym.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Then if you want to figure it out yourself.  I will only clarify the minimum tariff for Windows hosting, which at the moment I managed to find: <br><br><img src="https://habrastorage.org/webt/jw/qi/bl/jwqiblrgogfulcfi3thlypfuyra.png"><br><br>  You can use the hosting for free, but if you need to host a domain, the cost is under $ 10.  For hosting a single website, this is not particularly cheap.  But if you need to host several, then it is more profitable to choose a basic or standard price category.  The price will be 3-4 times higher, but you can host several sites at the same time.  Support for SSL and many other useful features will appear.  As a result, it may happen that the cost of hosting per website is not quite comparable to the cost of a regular non-cloud hosting. <br><br>  I always didn‚Äôt like access via FTP only.  After all, using the online file manager is quite convenient.  And for some reason I thought that the deployment in Azure comes only from Visual Studio or version control systems.  I was surprised to find this: <br><br><img src="https://habrastorage.org/webt/ab/7g/lg/ab7glgqdxhuqtpt7qzfv4e2tjgu.png"><br><br>  Publishing by uploading files to OneDrive and DropBox is clearly a great option for me.  The rest everything turned out exactly as I imagined. <br><br>  In order to find out which credits to use for FTP connection, you need to download the publication profile file. <br><br><img src="https://habrastorage.org/webt/dm/dh/7z/dmdh7zy7mqmglx1gpdobfneay9w.png"><br><br>  This is a plain text file in which you can find the URL username and password. <br><br>  If you are migrating your site to the cloud, it is very likely that the video will not be played immediately after the migration.  Also, the correct fonts may not be displayed.  To solve this, it is necessary in web.config to match file extensions with its MIME (most likely this is required in order to avoid MIME Sniffing). <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">system.webServer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">staticContent</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">remove</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".mp4"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mimeMap</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".mp4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mimeType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video/mp4"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">remove</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".woff"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mimeMap</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".woff"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mimeType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"font/woff"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">clientCache</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">cacheControlMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UseMaxAge"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">cacheControlMaxAge</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"7.00:00:00"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">staticContent</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">system.webServer</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  In addition, if your site was previously located on a Russian hosting, it can ‚Äúfly off‚Äù the date format due to a culture change.  Easy to fix.  In the same web.config you need to add <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">globalization</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">requestEncoding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">responseEncoding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">culture</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru-RU"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">uiCulture</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru-RU"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  In addition, your date will change to UTC.  To return it to your favorite time zone, you need to add a setting with the name WEBSITE_TIME_ZONE and a value that you can take from your local Windows registry to the Application settings.  You need to open regedit and go to HKLM \ Software \ Microsoft \ Windows Nt \ CurrentVersion \ Time Zones.  here you can choose your own time zone.  For example, ‚ÄúBelarus Standard Time‚Äù suits me. <br><br>  Now a few words and screenshots about the functionality of a la file manager.  Azure uses an engine called Kudu, in which you can browse the contents of directories and edit files.  This is not the only opportunity for Kudu. <br><br><img src="https://habrastorage.org/webt/nb/tb/sk/nbtbskui8lhc2lsxol_u4hjxsaw.png"><br><br>  Under the link "Forward" we get into a new window <br><br><img src="https://habrastorage.org/webt/ug/eb/se/ugebseffbouezfvgwakjev3cbbo.png"><br><br>  From which already on the link CMD we get to the manager <br><br><img src="https://habrastorage.org/webt/nq/hi/rp/nqhirplkbizynk9clzsbzdmclvm.png"><br><br>  Not the most obvious way to find a file manager.  It is not very obvious that you can download files from your computer using drag and drop. <br><br>  But the menu item where you can add a domain is quite simple to find - the item ‚ÄúCustom domains‚Äù.  But as it turned out, in my case, everything is not so simple. <br>  The fact is that Azure allows you to specify a domain using CNAME or A record. <br><br>  And my domain name registrar does not allow specifying CNAME for a domain.  Yes, and in this way there is a minus.  <a href="http://www.yourdomain.com/">www.yourdomain.com</a> address will be tied, while yourdomain.com is not. <br><br>  A record remains.  This method requires either your registrar to manage the DNS, or create a DNS in Azure.  I chose the second option, because the capabilities of my registrar did not give me the right to have another choice.  In addition, Azure-ovsky DNS costs a penny, or rather cents.  At the moment it is: <br><br>  The first 25 hosted DNS zones - 50 cents per month <br>  The first billion DNS queries per month is 40 cents. <br><br>  After creating the DNS zone, the SOA and NS record sets will be created automatically. <br><br><img src="https://habrastorage.org/webt/4m/hf/q6/4mhfq6dfo4h3a3coxatmrurs2ru.png"><br><br>  You need to add recordsets with the names @ and www, type A and a value equal to the IP of your web application.  You can find IP in the ‚ÄúUser Domains‚Äù item of your application.  Additionally, you need to add a TXT record with the name @ for your alias xxxxx.azurewebsites.net This is only necessary to confirm that you are the domain master.  After confirmation, this entry can be deleted. <br><br>  After adding the record sets to DNS, go back to the ‚ÄúCustom domains‚Äù item and add host names with type A Record.  Need to add 2 names.  One with www, and the second without. <br><br><img src="https://habrastorage.org/webt/eo/p7/h1/eop7h1tpd2ckcmzaieqescmchds.png"><br><br>  One of the advantages of migrating hosting to Azure is that the database connection string can be removed from the web.config to a more secure storage.  In addition, you can make some parameters.  Moreover, it concerns not only web.config and ASP.NET.  You can save connection strings and parameters of other programming languages. <br><br><img src="https://habrastorage.org/webt/u4/4e/j_/u44ej_epfyoeli3enatkagmkgxk.png"><br><br>  The downside is the lack of mail support.  Rather, it is, but it is included in Office365.  This seems rather inconvenient to me, although it should be recognized that outlook mail has historically been closer to Live than to Azure. <br><br>  I transferred my mail to Yandex.  Again, I was surprised that it was free.  It turns out that now you can buy a domain only in order to have a beautiful email address.  The domain verification process is quite simple.  It is not necessary to delegate a domain to Yandex.  The easiest way to create a file in the root directory. <br><br><img src="https://habrastorage.org/webt/5o/eo/co/5oeocogem8lloieswrltc0vehkm.png"><br><br>  And after that you need to add a set of DNS records with the following parameters: <br><br><img src="https://habrastorage.org/webt/y2/6a/gr/y26agrb-831-ap1yx-mpmsp8yfm.png"></div><p>Source: <a href="https://habr.com/ru/post/344736/">https://habr.com/ru/post/344736/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344724/index.html">Analysis summary hh.ru: a lot of graphs and some sexism and discrimination</a></li>
<li><a href="../344726/index.html">A quick overview of symfony. Relevance. Should I try?</a></li>
<li><a href="../344728/index.html">Expansion of models in Eloquent ORM</a></li>
<li><a href="../344730/index.html">The story of Ilona Mask - Infographics</a></li>
<li><a href="../344734/index.html">PVS-Studio 2018: CWE, Java, RPG, macOS, Keil, IAR, MISRA</a></li>
<li><a href="../344738/index.html">Projection modeling</a></li>
<li><a href="../344740/index.html">Information security of bank non-cash payments. Part 1 - Economic Foundations</a></li>
<li><a href="../344744/index.html">We connect pay via Apple Pay on the site</a></li>
<li><a href="../344746/index.html">Be my burger</a></li>
<li><a href="../344758/index.html">Announcement of HolyJS 2018 Piter: how does the 1988 affect the 2018th</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
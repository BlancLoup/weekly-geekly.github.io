<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mail Server on Zimbra Collaboration Suite</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Not so long ago, I began to develop a project for switching my office to free (not necessarily free) software. In this project, one of the most import...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mail Server on Zimbra Collaboration Suite</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/b37/db3/e1d/b37db3e1d089c77eb61f3e7f2f2a9f4e.jpg"><br><br>  Not so long ago, I began to develop a project for switching my office to free (not necessarily free) software.  In this project, one of the most important part was the rejection of the mail host and the transition to your mail server based on open source software. <br><br>  I plan to implement this part of my project this summer.  But I began to prepare for it now.  It was necessary to find a serious alternative to Exchenge and Outlook.  The choice focused on the "Zimbra Collaboration Suite". 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Benefits:</b> <br><br>  - Has your email client Zimbra.  Which allows users to share calendar, workflow, mail contacts, etc.  There are versions for MacOs, Windows, Linux. <br>  - It has a powerful plugin system.  The so-called Zimlet.  Plug-ins are developed officially, as well as by the users themselves.  You can implement anything. <br>  - Web version of the client.  You can climb to the mail anywhere in the world from any browser. <br>  - Integration with Active Directory. <br>  - Antivirus \ antispam protection right out of the box. <br><br><habracut><a name="habracut"></a><br><br>  Actually in this article I will describe the installation of the Zimbra Collaboration Suite based on Debian.  The article will be ported from my personal blog, so don't blame it on the quality. <br><br>  Screenshots below. <br><br>  <b><u>Zimbra</u></b> - Full mail server (as well as the client).  Which provides administrators and their end-users with innovative features that can solve the difficulties faced by organizations using today's communications infrastructure.  The main advantages include: compatibility with Windows, Mac, GNU \ Linux;  scalability;  flexible management;  Russian language;  common mail components for corporate work;  web client, etc. <br><br>  * <a href="http://www.zimbra.com/products/admin_benefits.html">Familiarize yourself with the Zimbra server features for admin</a> <br>  * <a href="http://www.zimbra.com/products/end_user_benefits.html">Familiarize yourself with the Zimbra server features for the mail user</a> <br><br>  In this article I will tell and show you how to set up a full-fledged mail server for the company. <br><br>  It is assumed that the initial installation / configuration of Debian was performed.  I chose Debian etch 4.0 r6 (Lenny doesn't support ZIMBRA in this stable version).  standard installation without graphical shell, network settings, update repositories were made and ssh server was installed for convenience. <br><br>  <b>My settings:</b> <br><br>  Server name - mail <br>  Domain Name - adsl.ru <br>  Hostname - mail.adsl.ru <br>  Ip address of the server - (I put on the external, here I bring an approximate ip) 172.16.251.130 <br><br>  To begin, assign the hostname to the ip server.  rule file hosts <br><br>  <i>vim / etc / hosts</i> <br><br> <code>127.0.0.1 localhost <br> 172.16.251.130 mail.adsl.ru mail <br> <br> # The following lines are desirable for IPv6 capable hosts <br> ::1 ip6-localhost ip6-loopback <br> fe00::0 ip6-localnet <br> ff00::0 ip6-mcastprefix <br> ff02::1 ip6-allnodes <br> ff02::2 ip6-allrouters <br> ff02::3 ip6-allhosts</code> <br> <br>  And we also rule our hostname on the correct one and then we must be overloaded (so that there are no conflicts): <br>  <i>vim / etc / hostname</i> <br><br> <code>mail.ads.ru</code> <br> <br>  <i>reboot</i> <br><br>  After reboot, check our hostname: <br><br>  <i>hostname -f</i> <br><br> <code>mail.adsl.ru</code> <br> <br>  Next, we rule the DNS resolv.conf file.  Let me remind you that in your LAN (or on the Internet) there should be a DNS server where A and MX records are written to your server with Zimbra (it is also advisable to have a PTR record). <br><br>  <i>vim /etc/resolv.conf</i> <br><br> <code>nameserver 172.16.251.2</code> <br> <br>  Now remove the Exim packages.  because  several mail agents are useless to us, Zimbra has its own. <br><br>  <i>apt-get remove ‚Äìpurge exim4 exim4-base exim4-config exim4-daemon-light</i> <br><br>  After that, install additional necessary packages that may be needed to install the mailer: <br><br>  <i>apt-get install libc6-i686 sudo libidn11 curl fetchmail libgmp3c2 libexpat1 libgetopt-mixed-perl libxml2 libstdc ++ 6 libpcre3 libltdl3</i> <br><br>  We will now proceed directly to the installation of the Zimbra mail server.  Because  Zimbra is a back-up archive with a bunch of packages, create an install folder where we download this archive, unzip it and install it. <br>  <i>mkdir / install</i> <i><br></i>  <i>cd / install</i> <br><br>  Go to the site Zimbra for downloading the latest version - <a href="http://www.zimbra.com/community/downloads.html">www.zimbra.com/community/downloads.html</a> <br>  We find in the Dtbian platforms, copy the link to the archive and upload it on our server.  At the end of the jump unzip archive. <br><br>  <i>wget <a href="">h.yimg.com/lo/downloads/5.0.12_GA/zcs-5.0.12_GA_2789.DEBIAN4.0.20090126055528.tgz</a></i> <i><br></i>  <i>tar xvfz zcs-5.0.12_GA_2789.DEBIAN4.0.20090126055528.tgz</i> <br><br>  We start the installation.  Go to the unwrapped folder and run the installation script. <br><br>  <i>cd /install/zcs-5.0.12_GA_2789.DEBIAN4.0.20090126055528</i> <i><br></i>  <i>./install.sh -l</i> <br><br>  Read the license agreement and press Enter.  Zimbra will then check the installed additional software.  And it will give something like: <br><br> <code>Checking for prerequisites‚Ä¶ <br> NPTL‚Ä¶FOUND <br> sudo‚Ä¶FOUND sudo-1.6.8p12-4 <br> ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. <br> Prerequisite check complete. <br> Checking for standard system perl‚Ä¶ <br> perl-5.8.8‚Ä¶FOUND standard system perl-5.8.8</code> <br> <br>  Now the installer will ask which packages to install: <br><br> <code>Install zimbra-ldap [Y] Y <br> Install zimbra-logger [Y] Y <br> Install zimbra-mta [Y] Y <br> Install zimbra-snmp [Y] Y <br> Install zimbra-store [Y] Y <br> Install zimbra-apache [Y] Y <br> Install zimbra-spell [Y] Y <br> Install zimbra-proxy [N] N <br> <br> The system will be modified. Continue? [N] Y</code> <br> <br>  The installation has begun.  It will take some time. <br>  After installation, the so-called main menu appears: <br><br> <code>Main menu <br> <br> 1) Common Configuration: <br> 2) zimbra-ldap: Enabled <br> 3) zimbra-store: Enabled <br> +Create Admin User: yes <br> +Admin user to create: admin@mail.adsl.ru <br> ******* +Admin Password UNSET <br> +Enable automated spam training: yes <br> ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ <br> x) Expand menu <br> q) Quit <br> Address unconfigured (**) items (? ‚Äì help)</code> <br> <br>  As you can see you are shown the menu where the default settings are displayed.  If you wish, you can change them.  I am only interested in the password for the root here, change it to my own.  Click the number 3 presses Enter and enter the submenu. <br><br> <code><a href="http://mail.adsl.ru/"></a> Store configuration <br> <br> 1) Status: Enabled <br> 2) Create Admin User: yes <br> 3) Admin user to create: admin@server1.example.com <br> ** 4) Admin Password UNSET <br> 5) Enable automated spam training: yes <br> 6) Spam training user: spam.m0bqyoayc@mail.adsl.ru <br> ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. <br> 17) Use spell check server: yes <br> 18) Spell server URL: mail.adsl.ru:7780/aspell.php <br> <br> Select, or 'r' for previous menu [r]</code> <br> <br>  Click the number 4 and Enter.  Enter a new password + Enter.  Press Enter.  And back to the main menu. <br><br> <code>Main menu <br> <br> 1) Common Configuration: <br> 2) zimbra-ldap: Enabled <br> 3) zimbra-store: Enabled <br> 4) zimbra-mta: Enabled <br> 5) zimbra-snmp: Enabled <br> 6) zimbra-logger: Enabled <br> 7) zimbra-spell: Enabled <br> 8) Default Class of Service Configuration: <br> r) Start servers after configuration yes <br> s) Save config to file <br> x) Expand menu <br> q) Quit <br> <br> *** CONFIGURATION COMPLETE ‚Äì press 'a' to apply <br> Select from menu, or press 'a' to apply config (? ‚Äì help)</code> <br> <br>  Now you need to confirm the configuration.  Enter the letter a and click on Enter. <br>  After that, the system will ask us a few questions.  The standard answer is Enter.  At the end, click on Y. <br><br> <code>Save configuration data to a file? [Yes] Enter <br> Save config in file: [/opt/zimbra/config.5422] <br> Saving config in /opt/zimbra/config.5422‚Ä¶done. <br> The system will be modified ‚Äì continue? [No] Y</code> <br> <br>  Next, the installer will configure the server.  It takes time.  During this, you'll see the following: <br><br> <code>Operations logged to /tmp/zmsetup.02062008-135354.log <br> Setting local config values‚Ä¶done. <br> Setting up CA‚Ä¶done. <br> Creating SSL certificate‚Ä¶done. <br> Initializing ldap‚Ä¶done. <br> Setting replication password‚Ä¶done. <br> Setting Postfix password‚Ä¶done. <br> Setting amavis password‚Ä¶done. <br> Deploying CA to /opt/zimbra/conf/ca ‚Ä¶done. <br> Creating server entry for mail.adsl.ru‚Ä¶done. <br> Setting spell check URL‚Ä¶done. <br> Setting service ports on mail.adsl.com‚Ä¶done. <br> Adding server1.example.com to zimbraMailHostPool in default COS‚Ä¶done. <br> Installing skins‚Ä¶ <br> hotrod <br> ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶. <br> Initializing mta config‚Ä¶done. <br> Configuring SNMP‚Ä¶done. <br> Setting services on mail.adsl.ru‚Ä¶done. <br> Setting up zimbra crontab‚Ä¶done. <br> Setting up syslog.conf‚Ä¶done.</code> <br> <br>  At the end, the installer will ask you if you want to register the server?  This is not a mandatory procedure.  I politely refuse typing the letter N. (If you want to register, press Enter).  Next, the system will be initialized: <br><br> <code>Starting servers‚Ä¶done. <br> Checking for deprecated zimlets‚Ä¶done. <br> Installing zimlets‚Ä¶ <br> com_zimbra_date <br> ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. <br> com_zimbra_email <br> done. <br> Initializing Documents‚Ä¶done. <br> Restarting mailboxd‚Ä¶done. <br> <br> Moving /tmp/zmsetup.02062008-135354.log to /opt/zimbra/log</code> <br> <br>  Well, in principle all.  Hit Enter to exit the installer. <br><br>  If you chose the standard Zimbra installation, then you will have the following ports to work with the server: <br><br>  Web mail access: 80 <br>  Secure access to webmail: 443 <br>  IMAP server port: 143 <br>  IMAP server SSL port: 993 <br>  POP server port: 110 <br>  POP server SSL port: 995 <br>  Server management console: <a href="http://serverhost/">serverhost</a> : 7780 / aspell.php <br>  Now we will check whether all Zimbra services have started.  To do this, we enter the console using the Zimbra account and enter the verification command: <br><br>  <i>su - zimbra</i> <i><br></i>  <i>zmcontrol status</i> <br><br>  The server will respond: <br><br> <code>Host mail.adsl.ru <br> antispam Running <br> antivirus Running <br> ldap Running <br> logger Running <br> mailbox Running <br> mta Running <br> snmp Running <br> spell Running <br> stats Running</code> <br> <br>  If one or more services have not been started, then enter the command: <br><br>  <i>zmcontrol start</i> <br><br>  Exit Zimbra account: <br><br>  <i>exit</i> <br><br>  Well that's all.  With the installation sorted out.  Now all server settings will come through the Web interface. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/b37/db3/e1d/b37db3e1d089c77eb61f3e7f2f2a9f4e.jpg"><br><br>  Enter the management console (admin login, your password) - <a href="https://mail.adsl.ru/">mail.adsl.ru</a> : 7071 / zimbraAdmin / <br><br>  Actually I propose to get acquainted with the interface and settings.  I think even the most knowledgeable person will deal with them.  By the way, the web client for mail is available at <a href="http://mail.adsl.ru/">mail.adsl.ru</a> <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/9fc/fe8/ef7/9fcfe8ef727e650d5f3f2b215b2a139d.png"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/151/44d/85c/15144d85cae43f3186dc99b8450da2d3.png"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/87c/4b4/74c/87c4b474cc740959686747b1976d442f.png"><br><br>  <b>Well, what is the result?</b> <br><br>  And in the end, I plan to introduce Zimbra in the summer. <br>  The only negative using Zimbra is that it demanding server resources in principle.  Because  for example, the Web interface ... (it is written in AJAX), if 100 users use it at the same time, the usual Pentium4 will not cope here naturally.  ;) </habracut></div><p>Source: <a href="https://habr.com/ru/post/60377/">https://habr.com/ru/post/60377/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../60365/index.html">Modern warfare 2</a></li>
<li><a href="../60368/index.html">Disable touchpad scrolling after viewing fullscreen video in Firefox</a></li>
<li><a href="../60369/index.html">Regexp and Python: extracting tokens from text</a></li>
<li><a href="../60370/index.html">Experiment: How it works ... maps.google.com + maps.live.com</a></li>
<li><a href="../60374/index.html">Budgets Salaries. Dollars, euros or local currency (rubles, hryvnia, etc.)</a></li>
<li><a href="../60378/index.html">The answer to business vs the rest</a></li>
<li><a href="../60380/index.html">Data on Last.fm users got into the RIAA. All the same</a></li>
<li><a href="../60381/index.html">IT-radio "PROMOTION": recording broadcast number 1</a></li>
<li><a href="../60382/index.html">Fedora 11 is delayed</a></li>
<li><a href="../60383/index.html">What does an accident look like?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
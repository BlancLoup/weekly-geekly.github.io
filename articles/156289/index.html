<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Intel¬Æ Inspector XE 2013: Automatic Real-Time Verification and Debugging</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Testing and finding bugs is an integral and not the most interesting part of the software development process. To get rid of the routine, everyone tri...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Intel¬Æ Inspector XE 2013: Automatic Real-Time Verification and Debugging</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/c33/72e/f0e/c3372ef0ef01737acddd0a80cef1172b.png"><br><br>  Testing and finding bugs is an integral and not the most interesting part of the software development process.  To get rid of the routine, everyone tries to automate this process.  And if specialized self-made tests are created to check the functionality of the application, the search for errors of a general type is not always covered by them.  For example, is your application checked for memory leaks or data races?  This article will look at how to use the updated Inspector XE 2013 in two ways: <br><br><ul><li>  For regular automatic testing (regression testing) </li><li>  To manually search for the causes of the problem in a pair with a debugger </li></ul><br><a name="habracut"></a><br><h4>  Why do I need Inspector XE? </h4><br>  Inspector XE is a tool for analyzing the correctness of code from Intel Parallel Studio XE, but it is also supplied as a separate product.  Its purpose is to search for memory errors (leaks, access to uninitialized memory, etc.) and problems caused by the interaction of streams (data races, deadlock, etc.).  At the same time, the problem does not have to show itself - if there is a potential deadlock (interlocking), Inspector XE will find it, even if the program does not ‚Äúhang‚Äù (but the code branches in which it may occur are executed). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/643/f6e/03d/643f6e03d24dee0771fddef9be7ff78a.png"><br><br>  The inspector uses dynamic analysis, i.e.  not the source code is analyzed, but the executable process.  During execution, the inspector analyzes what happens in the application, how it allocates and frees the memory, creates threads, uses synchronization objects, etc., and then gives the programmer a list of the problems found: <br><br><img src="https://habrastorage.org/storage2/3c5/4d9/fef/3c54d9fef7cf3bbea186f0f110711b7e.png"><br><br>  A separate problem can be studied in more detail in the source view: <br><br><img src="https://habrastorage.org/storage2/896/6f2/286/8966f2286009654e439132ce733d193f.png"><br><br>  Static source code analysis is also available, but it is executed by the Intel compiler.  And Inspector XE displays, visualizes analysis results, allows them to filter, manage the state of problems, etc.  In this post we will not discuss this topic. <br><br>  By the way, Inspector XE works with code in C / C ++, C # and Fortran.  Available for two operating systems: Windows * and Linux *.  Both have two interfaces: GUI and command line.  In addition, in Windows it also integrates into Microsoft Visual Studio *. <br><br>  You can inspect, in principle, any executable file.  However, there are several recommendations to increase the likelihood of finding problems, see them in the source code and not spend too much time on it: <br><ul><li>  Compile with / MDd, / ZI, / Od keys and link with / DEBUG and / FIXED: NO (using the example of Microsoft compiler and linker).  Binding of binaries and sources requires symbolic information, and optimization should be turned off so that the Inspector XE is not confused by the compiler. </li><li>  To search for multithreading errors, if possible, reduce the load on the application.  For example, minimize the size of the input data.  This will save time, because  Inspector XE slows down the program - the costs of dynamic analysis and binary instrumentation.  Reducing the load will not affect the result, because the inspector is looking for potential interoperability problems. </li><li>  To search for memory errors, on the contrary, it is better to use the full set of data, since  for this type of errors, real problems are detected. </li><li>  Pick tests that activate different branches of the code.  If the code branch was not executed, it will not be analyzed. </li></ul><br><br><h4>  Automated Testing </h4><br>  Inspector XE is a verification tool.  And in order to maintain the quality and stability of software at a high level, verification should be carried out regularly.  You can, for example, run a test by an inspector during a night regression test.  To do this, use the command interface tool.  The syntax for Inspector XE for Linux * and Windows * is the same.  An example of starting the analysis of a test application in Windows: <br><br><pre><code class="hljs pgsql">inspxe-cl -collect mi3 -knob resources=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span> -knob still-allocated-memory=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span> -knob stack-depth=<span class="hljs-number"><span class="hljs-number">16</span></span> -knob <span class="hljs-keyword"><span class="hljs-keyword">analyze</span></span>-stack=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span> <span class="hljs-comment"><span class="hljs-comment">-- D:\tests\testapps\mem_error.exe</span></span></code> </pre> <br>  The command line always starts with the launch of the inspector itself - ‚Äúinspxe-cl‚Äù.  The key ‚Äú-collect‚Äù says that the analysis should be run, ‚Äú-mi3‚Äù - the type of analysis (search for memory errors, or ‚ÄúLocate memory problems‚Äù).  Next are the other parameters of the analysis and the path to the analyzed application.  Full syntax and parameter reference can be printed with the command ‚Äúinspxe-cl -help‚Äù.  In addition, if you are already working in the GUI and want to run the same analysis on the command line, there is a ‚ÄúCommand line‚Äù button that will form a ready-made command line for the analysis configured in the GUI. <br><br>  After completing the analysis, Inspector XE will create a folder with the results files.  They can be viewed in the GUI, and the results collected on Linux can be viewed on another Windows machine (and vice versa).  However, a simple run of the analysis from the script, followed by a manual review of the results is not full automation.  Therefore, the inspector has the ability to print information about problems found in the CLI: <br><br><pre> <code class="hljs tex">inspxe-cl -report problems -r D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tests</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testapps</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r</span></span></span></span>002mi3</code> </pre> <br><pre> <code class="hljs tex">P1: Error: Mismatched allocation/deallocation New Problem P1.1: Mismatched allocation/deallocation D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tests</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testapps</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mem</span></span></span></span>_error.cpp(48): Error X10: Allocation site: Function start: Module D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tests</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testapps</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mem</span></span></span></span>_error.exe D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tests</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testapps</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mem</span></span></span></span>_error.cpp(49): Error X9: Mismatched deallocation site: Function start: Module D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tests</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testapps</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mem</span></span></span></span>_error.exe P3: Error: Invalid memory access New Problem P3.1: Invalid memory access D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tests</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testapps</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mem</span></span></span></span>_error.cpp (40): Error X4: Allocation site: Function start: Module D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tests</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testapps</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mem</span></span></span></span>_error.exe D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tests</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testapps</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mem</span></span></span></span>_error.cpp (42): Error X5: Deallocation site: Function start: Module D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tests</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testapps</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mem</span></span></span></span>_error.exe D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tests</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testapps</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mem</span></span></span></span>_error.cpp (44): Error X3: Read: Function start: Module D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tests</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testapps</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mem</span></span></span></span>_error.exe</code> </pre><br>  If the plain text is not suitable, you can export to csv, or print it in XML format, so that you can parse with all sorts of Perl and Python: <br><br><pre> <code class="hljs pgsql">inspxe-cl -report problems ‚Äì<span class="hljs-keyword"><span class="hljs-keyword">format</span></span>=<span class="hljs-type"><span class="hljs-type">xml</span></span> -r D:\tests\r002mi3\</code> </pre> <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pset</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"P1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Mismatched allocation/deallocation"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">state</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"New"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">severity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Error"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">obs</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"X1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Allocation site"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">state</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"New"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">severity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Error"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">stack</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"10"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">module</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" D:\tests\testapps\mem_error.exe"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">file</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"D:\tests\testapps\mem_error.cpp‚Äú func="</span></span></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start</span></span></span><span class="hljs-tag">" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">line</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"48"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">module</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" D:\tests\testapps\mem_error.exe "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">file</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"D:\tests\testapps\mem_error.cpp‚Äú func="</span></span></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start1</span></span></span><span class="hljs-tag">" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">line</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"84"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">module</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"C:\Windows\syswow64\kernel32.dll‚Äú func="</span></span></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">BaseThreadInitThunk</span></span></span><span class="hljs-tag">" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">line</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"78792"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">stack</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">obs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">obs</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"X2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Mismatched deallocation site"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">state</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"New"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">severity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Error"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">stack</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"9"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">module</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" D:\tests\testapps\mem_error.exe "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">file</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"D:\tests\testapps\mem_error.cpp‚Äú func="</span></span></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start</span></span></span><span class="hljs-tag">" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">line</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"49"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">module</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" D:\tests\testapps\mem_error.exe "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">file</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"D:\tests\testapps\mem_error.cpp‚Äú func="</span></span></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">start1</span></span></span><span class="hljs-tag">" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">line</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"84"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">stack</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">obs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pset</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Of the variety of problems, of which quite a lot can be found on a large project, it is still necessary to filter out new and noteworthy ones.  Inspector XE has the ability to assign status problems (New, Confirmed, Fixed, etc.).  If the project is inspected regularly, then the dynamics are interesting first of all - has something new appeared after the recent changes?  For such a case, Inspector XE can combine information about problems from different launches, giving a summary of the changes: <br><br><pre> <code class="hljs tex">inspxe-cl ‚Äìmerge-states D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tests</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r</span></span></span></span>000mi3<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>-r D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tests</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r</span></span></span></span>001mi3<span class="hljs-tag"><span class="hljs-tag">\</span></span></code> </pre> <br><pre> <code class="hljs tex">inspxe-cl -report status -r D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tests</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">r</span></span></span></span>001mi3<span class="hljs-tag"><span class="hljs-tag">\</span></span></code> </pre> <br><pre> <code class="hljs pgsql"><span class="hljs-number"><span class="hljs-number">9</span></span> problem(s) <span class="hljs-built_in"><span class="hljs-built_in">found</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> Investigated <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> investigated Breakdown <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> state: <span class="hljs-number"><span class="hljs-number">2</span></span> Confirmed <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> a problem <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> fixed <span class="hljs-number"><span class="hljs-number">2</span></span> Regression</code> </pre><br>  Inspector XE can be very useful for finding potential ‚Äúmultithreading errors‚Äù.  Consider a simple C ++ example with data race.  The loop is parallelized using OpenMP.  The space of iterations is divided into small portions and can be executed in parallel: <br><br><pre> <code class="hljs vbscript">#pragma omp parallel <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> shared(j) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;MAX; i++) { printf(<span class="hljs-string"><span class="hljs-string">"j=%d "</span></span>, j++); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(j != MAX) printf(‚Äú<span class="hljs-keyword"><span class="hljs-keyword">error</span></span>\n‚Äù);</code> </pre><br>  So that this race sometimes manifests itself, it took us to use MAX&gt; 1,000,000,000, the test worked for more than 10 minutes.  Inspector XE finds such a problem with MAX = 10 and in 10 seconds, because  looking for potential data races.  The example is, of course, highly refined, but can be used for illustration.  In such cases, the inspector will increase the effectiveness of the test run ‚Äî more problems found per unit time. <br><br>  To narrow the search area, only some application modules can be analyzed: <br><br><pre> <code class="hljs pgsql">inspxe-cl -collect mi1 -module-<span class="hljs-keyword"><span class="hljs-keyword">filter</span></span> module1.dll,module2.dll -module-<span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>-mode <span class="hljs-keyword"><span class="hljs-keyword">exclude</span></span> <span class="hljs-comment"><span class="hljs-comment">-- D:\tests\testapps\mem_error.exe</span></span></code> </pre><br>  The ‚Äú-module-filter-mode‚Äù parameter determines whether we want to exclude the specified modules from the analysis (exclude) or vice versa, to analyze only them (include). <br><br>  If you need to analyze a child process - for example, if an application is launched from a script, use the ‚Äú-executable-of-interest‚Äù option: <br><br><pre> <code class="hljs tex">inspxe-cl -collect mi1 -executable-of-interest mem_error.exe -- D:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tests</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testapps</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">startup</span></span></span></span>_script.bat</code> </pre><br>  The results obtained from the inspector may use different team members.  To transport the result, use the ‚Äúexport‚Äù option.  It packs the result into one archive, along with some source codes, so that you don‚Äôt have to configure the project, file paths, etc: on another machine: <br><br><pre> <code class="hljs pgsql">inspxe-cl -export -archive-<span class="hljs-type"><span class="hljs-type">name</span></span> my-<span class="hljs-built_in"><span class="hljs-built_in">new</span></span>-archived_result.inspxez -<span class="hljs-keyword"><span class="hljs-keyword">include</span></span>-sources -result-dir myRes</code> </pre><br>  For teamwork can also be useful: <br><ul><li>  Ability to make text reports and comments about problems </li><li>  Protection against simultaneous editing of results by different users </li><li>  General rules of repression.  If, for example, the inspector found a problem in another module (system library), which you are not going to fix, you can mark it specifically - suppress it so that it does not litter the result.  Suppression rules are stored in a special file that can be shared by the whole team. </li></ul><br>  Everything.  Now it remains to integrate the launch of Inspector XE and the parsing of analysis results into scripts that perform night testing, but this is individual and is not covered in this post. <br><br><h4>  Inspector + debugger = two pair of boots </h4><br>  Another use model for Inspector XE is to search for problems manually to get to the bottom of its cause.  Perhaps there is some kind of bug in the program - sometimes it hangs or falls.  Or night testing by the inspector found a new problem that needs to be studied.  Or you just decided to sit down and check once again the reliability of your creation. <br><br>  In these cases, Inspector XE integration with debuggers will be useful.  This functionality appeared not so long ago - in version 2013. At the moment, integration with gdb debuggers and Intel Debugger on Linux * and Visual Studio Debugger on Windows * is supported. <br><br>  If we are looking for an unknown problem (something in the application is sometimes buggy), to launch the inspector together with the debugger in the analysis settings, select ‚ÄúEnable debugger when problem detected‚Äù: <br><br><img src="http://habrastorage.org/storage2/100/ca7/b92/100ca7b92bca04792fbdf62f2f5f96d2.png"><br><br>  Now we run the analysis and wait - as soon as a problem is found, Inspector XE will stop the execution, and you can dig into it with a debugger.  This will be done for all problems found. <br><br>  If we have already set our sights on some kind of bug found on night testing, open the analysis results in the inspector, right click on the problem, select ‚ÄúDebug This Problem‚Äù.  Inspector XE will launch the same analysis again, and as soon as the noted problem manifests itself again, you will be loaded into the debugging session at the place of its origin: <br><br><img src="http://habrastorage.org/storage2/89b/e5c/daf/89be5cdafa6c528e655e6443cb2065a7.png"><br><br>  You can also set your breakpoint and select the third option to start the debugger in the configuration of the inspector's analysis: <br><br><img src="http://habrastorage.org/storage2/a6b/376/a83/a6b376a83f5a54f71b48b28b0aed3769.png"><br><br>  In this case, Inspector XE will not analyze anything until execution stops at this breakpoint.  And if you select "Continue with Inspector XE‚Äù in the Debug menu (Visual Studio), the execution will continue, but already with inspection.  Then everything will go according to the first scenario, with a stop at each found problem.  This is useful in order to reduce the analysis time and eliminate uninteresting code in this context (for example, long initialization). <br><br><h4>  Summary </h4><br>  Inspector XE is a versatile tool for finding memory errors and multi-threaded execution.  Due to dynamic analysis, quite complex, deep-seated problems can be detected.  Because of it, the time of the program execution under the analysis can increase significantly.  Inspector XE 2013 can be used to work in the GUI, paired with a debugger, helping to find the roots of tricky problems, and for automated verification.  But in both cases it serves to increase the stability of the code - the more problems there are and the sooner it is done, the more reliable the finished application will be. <br><br>  <a href="http://software.intel.com/en-us/intel-inspector-xe">Intel Inspector XE</a> <br><br>  <a href="http://software.intel.com/en-us/intel-parallel-studio-xe/">Intel Parallel Studio XE 2013</a> <br><br>  <a href="http://software.intel.com/en-us/articles/intel-inspector-xe-2011-documentation">Inspector XE 2013 documentation</a> </div><p>Source: <a href="https://habr.com/ru/post/156289/">https://habr.com/ru/post/156289/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../156277/index.html">How easy it is to connect any OPC server sensor to the narodmon.ru project</a></li>
<li><a href="../156279/index.html">Fuelphp in the field</a></li>
<li><a href="../156281/index.html">The benefits of a scientific approach for startups</a></li>
<li><a href="../156283/index.html">AnnotatedSQL lib - automatic database generation in Android</a></li>
<li><a href="../156285/index.html">Disable editing model properties in ASP.NET MVC</a></li>
<li><a href="../156291/index.html">A selection of tools for efficient frontend development</a></li>
<li><a href="../156293/index.html">Uploading files to Yii</a></li>
<li><a href="../156295/index.html">AutoTracker software. Work with routes and schedules</a></li>
<li><a href="../156299/index.html">Gartner: 10 defining technological trends for the next 5 years</a></li>
<li><a href="../156303/index.html">The Windows Store apps I use everyday, part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
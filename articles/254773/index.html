<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Normalization of relationships. Six normal forms</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this topic I will touch on 6 normal forms and methods for bringing tables into these forms. 

 The process of designing a database using the NF met...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Normalization of relationships. Six normal forms</h1><div class="post__text post__text-html js-mediator-article">  In this topic I will touch on 6 normal forms and methods for bringing tables into these forms. <br><br>  The process of designing a database using the NF method is iterative and consists in the sequential transfer of the relation from 1NF to NF of a higher order according to certain rules.  Each next NF is limited to a certain type of functional dependencies and the elimination of the corresponding anomalies when performing operations on database relations, as well as preserving the properties of previous NFs. <br><a name="habracut"></a><br><h4>  Terms Used </h4><br>  <b>An attribute</b> is a property of some entity.  Often called a table field. <br><br>  <b>An attribute domain</b> is the set of valid values ‚Äã‚Äãthat an attribute can take. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>A tuple</b> is a finite set of interrelated valid attribute values ‚Äã‚Äãthat together describe an entity (a row of a table). <br><br>  <b>A relation</b> is a finite set of tuples (table). <br><br>  <b>A relationship diagram</b> is a finite set of attributes that define an entity.  In other words, this is a table structure consisting of a specific set of fields. <br><br>  <b>Projection</b> is a relation obtained from a given by deleting and (or) rearranging certain attributes. <br><br>  <b>The functional relationship</b> between the attributes (attribute sets) X and Y means that for any valid set of tuples in this respect: if two tuples match the value of X, then they match the value of Y. For example, if the value of the attribute "Company Name" is Canonical Ltd , then the value of the Headquarters attribute in such a tuple will always be Millbank Tower, London, United Kingdom.  Designation: {X} -&gt; {Y}. <br><br>  <b>The normal form</b> is a requirement imposed on the structure of tables in the theory of relational databases to eliminate redundant functional dependencies between attributes (table fields) from the database. <br><br>  <b>The method of normal forms (NF)</b> consists in gathering information about the objects of solving the problem within one relationship and the subsequent decomposition of this relationship into several interrelated relations based on the procedures for normalizing relations. <br><br>  <b>The goal of normalization</b> is to eliminate redundant data duplication, which is the cause of anomalies that have arisen when adding, editing and deleting tuples (rows of a table). <br><br>  <b>Anomaly</b> is such a situation in the database table, which leads to a contradiction in the database or significantly complicates the processing of the database.  The reason is unnecessary duplication of data in the table, which is caused by the presence of functional dependencies on non-key attributes. <br><br>  <b>Anomalies-modifications</b> are manifested in the fact that a change in one data may entail viewing the entire table and a corresponding change in some records of the table. <br><br>  <b>Anomalies-deletions</b> - when deleting a tuple from the table, information that is not directly connected with the record being deleted may disappear. <br><br>  <b>Anomalies-additions</b> occur when the information in the table cannot be placed until it is complete, or the insertion of a record requires additional viewing of the table. <br><br><h4>  First normal form </h4><br>  A relation is in 1NF, if all its attributes are simple, all domains used must contain only scalar values.  There should be no repetitions of rows in the table. <br><br>  For example, there is a table "Cars": <br><br><table><tbody><tr><td>  Firm </td><td>  Models </td></tr><tr><td>  BMW </td><td>  M5, X5M, M1 </td></tr><tr><td>  Nissan </td><td>  GT-R </td></tr></tbody></table><br>  Violation of the normalization of 1NF occurs in BMW models, because  One cell contains a list of 3 elements: M5, X5M, M1, i.e.  it is not atomic.  Let's translate the table to 1NF: <br><table><tbody><tr><td>  Firm </td><td>  Models </td></tr><tr><td>  BMW </td><td>  M5 </td></tr><tr><td>  BMW </td><td>  X5M </td></tr><tr><td>  BMW </td><td>  M1 </td></tr><tr><td>  Nissan </td><td>  GT-R </td></tr></tbody></table><br><h4>  Second normal form </h4><br>  A relation is in 2NF if it is in 1NF and every non-key attribute is irreducibly dependent on the Primary Key (PC). <br><br>  Irreducibility means that the potential key does not contain a smaller subset of attributes, from which this functional dependence can also be derived. <br><br>  For example, given the table: <br><br><table><tbody><tr><td>  <u>Model</u> </td><td>  <u>Firm</u> </td><td>  Price </td><td>  A discount </td></tr><tr><td>  M5 </td><td>  BMW </td><td>  5,500,000 </td><td>  five% </td></tr><tr><td>  X5M </td><td>  BMW </td><td>  6000000 </td><td>  five% </td></tr><tr><td>  M1 </td><td>  BMW </td><td>  2.5 million </td><td>  five% </td></tr><tr><td>  GT-R </td><td>  Nissan </td><td>  5,000,000 </td><td>  ten% </td></tr></tbody></table><br>  The table is in the first normal form, but not in the second.  The price of the car depends on the model and the company.  Discount depends on the company, that is, the dependence on the primary key is incomplete.  This is corrected by decomposition into two relationships in which non-key attributes depend on the PC. <br><br><table><tbody><tr><td>  <u>Model</u> </td><td>  <u>Firm</u> </td><td>  Price </td></tr><tr><td>  M5 </td><td>  BMW </td><td>  5,500,000 </td></tr><tr><td>  X5M </td><td>  BMW </td><td>  6000000 </td></tr><tr><td>  M1 </td><td>  BMW </td><td>  2.5 million </td></tr><tr><td>  GT-R </td><td>  Nissan </td><td>  5,000,000 </td></tr></tbody></table><br><table><tbody><tr><td>  <u>Firm</u> </td><td>  A discount </td></tr><tr><td>  BMW </td><td>  five% </td></tr><tr><td>  Nissan </td><td>  ten% </td></tr></tbody></table><br><br><h4>  Third normal form </h4><br>  The relationship is in 3NF when it is in 2NF and each non-key attribute is non-transitively dependent on the primary key.  Simply put, the second rule requires you to take out all non-key fields, the contents of which can refer to several entries in a table in separate tables. <br><br>  Consider the table: <br><br><table><tbody><tr><td>  <u>Model</u> </td><td>  Score </td><td>  Phone </td></tr><tr><td>  BMW </td><td>  Real-auto </td><td>  87-33-98 </td></tr><tr><td>  Audi </td><td>  Real-auto </td><td>  87-33-98 </td></tr><tr><td>  Nissan </td><td>  Next-Auto </td><td>  94-54-12 </td></tr></tbody></table><br><br>  The table is in 2NF, but not in 3NF. <br>  In relation to the attribute "Model" is the primary key.  Cars do not have personal phones, and the phone depends solely on the store. <br>  Thus, in relation to the following functional dependencies exist: Model ‚Üí Store, Shop ‚Üí Phone, Model ‚Üí Phone. <br>  Dependency Model ‚Üí Phone is transitive, therefore, the relationship is not in 3NF. <br>  As a result of the separation of the original relationship, two relations are obtained that are in 3NF: <br><br><br>  Real-auto   87-33-98 <br>  Real-auto   87-33-98 <br>  Next-Auto   94-54-12 <br><table><tbody><tr><td>  <u>Model</u> </td><td>  Score </td></tr><tr><td>  BMW </td><td>  Real-auto </td></tr><tr><td>  Audi </td><td>  Real-auto </td></tr><tr><td>  Nissan </td><td>  Next-Auto </td></tr></tbody></table><br><br><h4>  Beuys-Codd Normal Form (NFBC) (a particular form of the third normal form) </h4><br>  The definition of 3NF is not quite suitable for the following relationships: <br>  1) the relationship has two or more potential keys; <br>  2) two or more potential keys are composite; <br>  3) they intersect, i.e.  have at least one attribute. <br><br>  For relationships that have one potential key (primary), the NFBK is 3NF. <br><br>  The relation is in the NFBK, when each non-trivial and left-irreducible functional dependence has a potential key as a determinant. <br><br>  Suppose we consider a relationship that represents data on parking a day: <br><br><table><tbody><tr><td>  Parking number </td><td>  Start time </td><td>  End time </td><td>  Rate </td></tr><tr><td>  one </td><td>  09:30 </td><td>  10:30 </td><td>  Thrifty </td></tr><tr><td>  one </td><td>  11:00 </td><td>  12:00 </td><td>  Thrifty </td></tr><tr><td>  one </td><td>  2:00 pm </td><td>  3:30 pm </td><td>  Standard </td></tr><tr><td>  2 </td><td>  10:00 </td><td>  12:00 </td><td>  Premium V </td></tr><tr><td>  2 </td><td>  12:00 </td><td>  2:00 pm </td><td>  Premium V </td></tr><tr><td>  2 </td><td>  3:00 pm </td><td>  18:00 </td><td>  Premium A </td></tr></tbody></table><br>  The tariff has a unique name and depends on the selected parking and the availability of benefits, in particular: <br><ul><li>  "Thrifty": parking 1 for beneficiaries </li><li>  "Standard": parking 1 for non-beneficiaries </li><li>  "Premium-A": parking 2 for beneficiaries </li><li>  "Premium-B": parking 2 for non-beneficiaries. </li></ul><br>  Thus, the following composite primary keys are possible: {Parking number, Start time}, {Parking number, End time}, {Rate, Start time}, {Rate, End time}. <br><br>  The ratio is in 3NF.  The requirements of the second normal form are satisfied, since all attributes are included in one of the potential keys, and there are no non-key attributes in relation.  There are also no transitive dependencies, which meets the requirements of the third normal form.  However, there is a functional dependence Tariff ‚Üí Parking number, in which the left part (determinant) is not a potential key of the relationship, that is, the relationship is not in Boyes-Codd normal form. <br><br>  The disadvantage of this structure is that, for example, by mistake, the ‚ÄúThrifty‚Äù tariff can be attributed to booking a second parking, although it can only apply to the first parking. <br><br>  It is possible to improve the structure by decomposing a relationship into two and adding an attribute. <b>It has benefits</b> , obtaining relations satisfying NFBK (the attributes included in the primary key are underlined.): <br><br>  <b>Tariffs</b> <br><table><tbody><tr><td>  <u>Rate</u> </td><td>  Parking number </td><td>  It has benefits </td></tr><tr><td>  Thrifty </td><td>  one </td><td>  Yes </td></tr><tr><td>  Standard </td><td>  one </td><td>  Not </td></tr><tr><td>  Premium A </td><td>  2 </td><td>  Yes </td></tr><tr><td>  Premium V </td><td>  2 </td><td>  Not </td></tr></tbody></table><br>  <b>Booking</b> <br><table><tbody><tr><td>  <u>Rate</u> </td><td>  <u>Start time</u> </td><td>  End time </td></tr><tr><td>  Thrifty </td><td>  09:30 </td><td>  10:30 </td></tr><tr><td>  Thrifty </td><td>  11:00 </td><td>  12:00 </td></tr><tr><td>  Standard </td><td>  2:00 pm </td><td>  3:30 pm </td></tr><tr><td>  Premium V </td><td>  10:00 </td><td>  12:00 </td></tr><tr><td>  Premium V </td><td>  12:00 </td><td>  2:00 pm </td></tr><tr><td>  Premium A </td><td>  3:00 pm </td><td>  18:00 </td></tr></tbody></table><br><h4>  Fourth normal form </h4><br>  A relation is in 4NF if it is in the NFBK and all nontrivial multivalued dependencies are in fact functional dependencies on its potential keys. <br><br>  In relation to R (A, B, C), there is a <b>multi-valued relationship</b> RA -&gt; -&gt; RB if and only if the set of values ‚Äã‚Äãof B, corresponding to a pair of values ‚Äã‚Äãof A and C, depends only on A and does not depend on C. <br><br>  Suppose that restaurants produce different types of pizza, and restaurant delivery services operate only in certain areas of the city.  The composite primary key of the corresponding relationship variable includes three attributes: {Restaurant, Pizza Type, Delivery Area}. <br><br>  This relationship variable does not correspond to 4NF, since there is the following multivalued relationship: <br>  {Restaurant} ‚Üí {Type of pizza} <br>  {Restaurant} ‚Üí {Delivery Area} <br><br>  That is, for example, when adding a new type of pizza, you will have to make one new tuple for each delivery area.  A logical anomaly is possible, in which only certain delivery areas from the areas served by the restaurant will correspond to a certain type of pizza. <br><br>  To prevent anomalies, you need to decompose the relationship by placing independent facts in different relationships.  In this example, decompose into {Restaurant, Kind of Pizza} and {Restaurant, Delivery Area}. <br><br>  However, if we add an attribute functionally dependent on a potential key to the original relationship variable, for example, the price taking into account the cost of delivery ({Restaurant, Pizza Type, Delivery Area} ‚Üí Price), then the resulting ratio will be in 4NF and it cannot be decomposed without losses. <br><br><h4>  Fifth normal form </h4><br>  Relations are in 5NF if it is in 4NF and there are no complex dependent connections between attributes. <br>  If ‚ÄúAttribute depends on‚Äú Attribute_2 ‚Äù, and‚Äú Attribute_2 ‚Äùin turn depends on‚Äú Attribute_3 ‚Äù, and‚Äú Attribute_3 ‚Äùdepends on‚Äú Attribute_1 ‚Äù, then all three attributes are necessarily included in one tuple. <br><br>  This is a very strict requirement that can only be met under additional conditions.  In practice, it is difficult to find an example of the implementation of this requirement in its pure form. <br><br>  For example, some table contains three attributes "Supplier", "Product" and "Buyer".  Buyer1 purchases several Products from Supplier1.  Buyer 1 purchased a new Product from the Supplier2.  Then, by virtue of the above requirement I, the supplier1 is obliged to supply the Purchaser1 with the same new Product, and the Supplier2 must supply the Purchaser 1, with the exception of the new Goods, the entire product line of the Supplier1.  This does not happen in practice.  The buyer is free in his choice of goods.  Therefore, to eliminate this difficulty, all three attributes are spread across different relationships (tables).  After selecting three new relationships (Supplier, Product and Buyer), you need to remember that when retrieving information (for example, About Buyers and Products), you need to connect all three relations in the request.  Any combination of the combination of two relationships from the sin will inevitably lead to the extraction of incorrect (incorrect) information.  Some DBMS are equipped with special mechanisms that eliminate the extraction of unreliable information.  Nevertheless, the general recommendation should be followed: the database structure should be structured in such a way as to avoid the use of 4NF and 5NF. <br><br>  The fifth normal form is focused on working with dependent compounds.  These dependent connections between the three attributes are very rare.  Dependent connections between four, five or more attributes are almost impossible to specify. <br><br><h4>  Domain Key Normal Form </h4><br>  A relationship variable is in DK / NF if and only if each constraint imposed on it is a logical consequence of domain constraints and key constraints imposed on a given relationship variable. <br>  Domain Restriction - a restriction that requires you to use values ‚Äã‚Äãfrom a specific domain for a particular attribute.  The restriction is essentially the task of specifying a list (or a logical equivalent of a list) of valid values ‚Äã‚Äãof a type and declaring that the specified attribute has a given type. <br><br>  Key constraint is a constraint stating that some attribute or combination of attributes is a potential key. <br><br>  Any relationship variable that is in DK / NF is necessarily in 5NF.  However, not any relationship variable can be brought to DK / NF. <br><br><h4>  Sixth normal form </h4><br>  A relation variable is in the sixth normal form if and only if it satisfies all nontrivial dependencies of the connection.  It follows from the definition that a variable is in 6NF if and only if it is irreducible, that is, it cannot be subjected to further decomposition without loss.  Each relationship variable that is in 6NF is also in 5NF. <br><br>  The idea of ‚Äã‚Äã"decomposition to the end" was put forward before the start of research in the field of historical data, but did not find support.  However, for historical databases, the maximum possible decomposition allows you to combat redundancy and simplifies maintaining the integrity of the database. <br><br>  For historical databases, U_ operators are defined, which unpack the relations by the specified attributes, perform the corresponding operation, and package the result obtained.  In this example, the connection of the projections of the relationship should be made using the operator U_JOIN. <br><br>  <b>Workers</b> <br><table><tbody><tr><td>  <u>Tab.‚Ññ</u> </td><td>  <u>Time</u> </td><td>  Position </td><td>  Home address </td></tr><tr><td>  6575 </td><td>  01-01-2000: 10-02-2003 </td><td>  locksmith </td><td>  Lenin St., 10 </td></tr><tr><td>  6575 </td><td>  11-02-2003: 15-06-2006 </td><td>  locksmith </td><td>  22 Sovetskaya St. </td></tr><tr><td>  6575 </td><td>  06/16/2006: 05/03/2009 </td><td>  brigadier </td><td>  22 Sovetskaya St. </td></tr></tbody></table><br>  The variable ‚ÄúEmployees‚Äù is not in 6NF and can be decomposed into the variable ‚ÄúEmployees 'Positions‚Äù and ‚ÄúEmployers' Home Addresses‚Äù. <br><br>  <b>Employees positions</b> <br><table><tbody><tr><td>  <u>Tab.‚Ññ</u> </td><td>  <u>Time</u> </td><td>  Position </td></tr><tr><td>  6575 </td><td>  01-01-2000: 10-02-2003 </td><td>  locksmith </td></tr><tr><td>  6575 </td><td>  06/16/2006: 05/03/2009 </td><td>  brigadier </td></tr></tbody></table><br>  <b>Employees' home addresses</b> <br><table><tbody><tr><td>  <u>Tab.‚Ññ</u> </td><td>  <u>Time</u> </td><td>  Home address </td></tr><tr><td>  6575 </td><td>  01-01-2000: 10-02-2003 </td><td>  Lenin St., 10 </td></tr><tr><td>  6575 </td><td>  11-02-2003: 15-06-2006 </td><td>  22 Sovetskaya St. </td></tr></tbody></table><br><h4>  Literature </h4><br>  For a more in-depth and thorough study of the topic considered, the book ‚ÄúIntroduction to Database Systems‚Äù by Chris J. Data is recommended, on the basis of which this article was written. </div><p>Source: <a href="https://habr.com/ru/post/254773/">https://habr.com/ru/post/254773/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../254763/index.html">We get acquainted with Fabric.js. Part 3</a></li>
<li><a href="../254765/index.html">Comparative analysis of scanners RSL</a></li>
<li><a href="../254767/index.html">Qooxdoo. Developing a TODO List</a></li>
<li><a href="../254769/index.html">Unfunny April Fool's joke from the developers of Magic Lantern</a></li>
<li><a href="../254771/index.html">New Vapor IO data center concept: versatility and space saving</a></li>
<li><a href="../254775/index.html">Web Injection Evolution Part 2</a></li>
<li><a href="../254777/index.html">Audit of TrueCrypt code completed</a></li>
<li><a href="../254781/index.html">Introduction to the capabilities of the Realtek RTL 8332M switch processor</a></li>
<li><a href="../254785/index.html">We need instant messengers. More messengers</a></li>
<li><a href="../254787/index.html">Perl 6: nextsame and its relatives</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
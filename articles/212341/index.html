<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A simple way to modify the Android application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It happens after the release of the application of its source code somewhere disappear. True, it happens all the time? And nothing remains but to deco...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A simple way to modify the Android application</h1><div class="post__text post__text-html js-mediator-article">  It happens after the release of the application of its source code somewhere disappear.  True, it happens all the time?  And nothing remains but to decompile it and correct a few hundred lines of code and all this needs to be done as quickly as possible. <br><br>  So I had the task to modify the application with just its apk.  And those who have been decompiling applications know how hard it is to compile it later. <br><a name="habracut"></a><br><h4>  Decompilation </h4><br>  For Android, the following utilities exist: <br><ul><li>  <a href="http://code.google.com/p/android-apktool/">ApkTool</a> for decompiling resources. </li><li>  <a href="http://code.google.com/p/dex2jar/">Dex2Jar</a> to convert dex to jar. </li><li>  <a href="https://github.com/fanhongtao/ApkDecompiler/tree/master/jd-gui-0.3.5.windows">JD-GUI</a> for getting sources from jar. </li><li>  I also recommend <a href="http://varaneckas.com/jad/">JAD</a> , some places are better decompiled than JD-GUI. </li></ul><br>  Information on their use on the Internet is enough. <br><br>  If you try to build an application after decompiling, then most likely it will not compile because of errors, cycles and conditions are especially hard to decompile.  Some errors are easily corrected, but again it will not be easy to understand the multitude of conditional transitions, and when their number is more than one hundred or even several thousand, then this way to restore the application loses its efficiency, it is faster to write everything anew. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It was at this point that the experiments with decompilation could be completed, but laziness was the engine of progress and a new method was born. <br><br><h4>  Class overrides </h4><br>  So jar is a library, so why not just connect it to a new project?  We throw it into the libs folder, inherit from the main activation and compile.  Everything works, the main thing is that the class names do not match, so the package names should be different, or at least the generated BuildConfig and R will match. <br><br>  In this way, you can inherit from Activity, Service, BroadcastReceiver, and possibly some other classes declared in the manifest. You will also need to specify new class names in the manifest, otherwise they will not be used. <br><br>  Now you can redefine virtual functions, but only, all the more so, the final keyword will not allow this to be done and inherited too, so we go further. <br><br><h4>  Class replacement </h4><br>  Having unzipped the jar library, we get class files, these are compiled classes, note that when building a project in the bin / classes folder, the same class files lie, and what if you slip the files from the library there ... <br><br>  Not everything is so simple, first you need to compile the project.  To use the classes of the original application, you need to somehow attach it to the project, but not export.  This is done simply: from the libs folder Eclipse itself exports libraries, so move the jar library to the lib folder and connect it to the project, in Eclipse it is Project-&gt; Preferences-&gt; Java Build Path-&gt; Libraries-&gt; Add Jars ... further in the Order and Export tab you need to make sure that the checkbox is not set, because we do not need to export the library, everything will be in the class files. <br><br>  Now we take some class from the decompiled source of the application, fix the compilation errors in it, add, for example, show a dialog to make sure that the new class is used.  Next, we clear the project, in Eclipse it is Project-&gt; Clean, copy the class files into the bin / classes folder, build the project and everything works! <br><br>  With the following builds of the project there is no need to clean it up, so using this method is quite convenient.  To make it easier to correct errors after decompiling, I used the sources from JD-GUI and JAD, which was usually enough. <br><br>  But now the time has come to collect the release version, and for it, of course, the obfuscator is used and it will give out hundreds of errors for class name matches and unresolved references.  Now it's time to remove the classes that have been replaced from the compiled class files, there should be no errors after that.  Another unpleasant feature of the release build is that you need to clear the project each time and copy the class files, otherwise they disappear somewhere. <br><br><h4>  Conclusion </h4><br>  In this way, only modified files are decompiled, which eliminates the correction of errors in all source codes and improves reliability, since all part of the code will undergo a process of decompilation - correction - compilation. <br><br>  Most likely, it will not be possible to hide all traces from the original application, the names of non-obfuscated classes such as Activity and Service, as well as the names of their packages will be preserved and will be available after decompiling the modified application, but for pirated versions this is not a problem, which is why it is worth protecting application protection methods are similar to other methods of protection against code changes. <br><br>  <a href="http://docs.oracle.com/javase/tutorial/deployment/jar/update.html">Updating classes in jar</a> - the idea of ‚Äã‚Äãreplacing classes came from this feature for the jar library. </div><p>Source: <a href="https://habr.com/ru/post/212341/">https://habr.com/ru/post/212341/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../212323/index.html">Five ways to burn for a programmer</a></li>
<li><a href="../212329/index.html">Facebook is trying to block the developer console in Chrome</a></li>
<li><a href="../212333/index.html">wxWidgets. Trifle, but nice</a></li>
<li><a href="../212335/index.html">Exchange software: Tools for creating trading robots</a></li>
<li><a href="../212339/index.html">The beginning of the system architecture. Philosophy and language. Part 1</a></li>
<li><a href="../212343/index.html">On electricity to the Crimea</a></li>
<li><a href="../212345/index.html">A very simple way to handle ajax requests in MODx Revolution</a></li>
<li><a href="../212347/index.html">Bootstrap Modal Iframe Crutch</a></li>
<li><a href="../212349/index.html">Business Intelligence using MS SQL Server 2008 R2 in a company using 1C accounting systems</a></li>
<li><a href="../212351/index.html">Parsing protocol World Of Tanks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
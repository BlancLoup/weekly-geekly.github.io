<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>All covered with tests, absolutely all</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The Agitar Software company offers a rather interesting metric to assess the quality of the program code. The formula with the unambiguous name CRAP a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>All covered with tests, absolutely all</h1><div class="post__text post__text-html js-mediator-article">  The Agitar Software company offers a rather interesting metric to assess the quality of the program code.  The formula with the unambiguous name CRAP allows you to assess whether the developer will exclaim ‚ÄúOh crap!‚Äù After learning that he was happy to support the code. <br><br><a name="habracut"></a>  Of course, there is no absolutely reliable way to determine whether a certain piece of code is ‚Äúcrappy‚Äù or not.  However, it is intuitively clear that such a review is likely to receive an unnecessarily complicated, tangled code.  And since writing automated tests (for example, using JUnit or PHPUnit) for confusing code is not a trivial thing, it usually turns out not to be covered with tests at all.  The presence of unit-tests means not only monitoring the performance of the code, but also a more understandable architecture of the application, as well as the fact that the developers took care of the costs of support. <br><br>  <strong>How it works</strong> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you go into mathematics, the CRAP value (Change Risk Analysis and Prediction) for a single method, m, is calculated using the formula: <br><br>  <em>CRAP (m) = comp (m) ^ 2 * (1 - cov (m) / 100) ^ 3 + comp (m)</em> <br><br>  where <em>comp (m)</em> is the so-called <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity">cyclomatic complexity of</a> method m, defined as the number of paths inside the method plus one, and <em>cov (m)</em> is the percentage of code covered by tests. <br><br>  In other words, a low CRAP index means a relatively small risk when the code changes: the code is simple and its performance is well controlled by tests.  A high index means that making changes is rather risky: the complexity of the code combined with a small number of tests gives a rather dangerous combination, you can be sure that something will break in the most unpredictable place.  Thus, the CRAP-index can be lowered either by writing unit tests for complex code sections, or by using refactoring this complexity can be reduced.  Of course, it‚Äôs preferable to have both, since the presence of tests helps to avoid errors during refactoring. <br><br>  <strong>Crap4j</strong> <br><br>  So far there is only one implementation of the CRAP formula, in the form of the crap4j Eclipse plugin for Java.  As acknowledged by the developers themselves, all threshold values ‚Äã‚Äãare purely experimental.  The CRAP-index of a single method can vary from 1 (for the method of complexity 1, covered with tests for 100%) to fairly impressive numbers (for example, the method of complexity 100 without a single test will receive 10,100 points).  It was decided, for a start, to use the threshold of 30 points as the border from which the crappy code begins.  For example, methods with complexity 10, 75% covered with tests, are not yet considered as crap, as well as methods with complexity 2 without tests in general. <br><br>  At the project level, statistics show the percentage of methods with a crap-index above 30. A project can have up to 5% of such methods (however, nothing prevents you from adopting your own threshold values).  In addition, crap4j shows the so-called CRAP load - this is an estimate of the amount of work needed to correct crappy-methods, taking into account the missing number of tests and refactoring necessary for writing them. <br><br>  Like any of the existing metrics, CRAP is, of course, not perfect.  The code can be completely covered by useless tests, or contain a complex method, which, however, is easier to understand than the 3 more simple ones.  Higher-level metrics that are oriented towards the application architecture (such as <a href="http://en.wikipedia.org/wiki/Coupling_(computer_science)">coupling</a> and <a href="http://en.wikipedia.org/wiki/Cohesion_%2528computer_science%2529">cohesion</a> ) are not taken into account.  Nevertheless, the formula provides enough useful information and an extensive field for experiments. <br><br>  <a href="http://www.crap4j.org/">Crap4j Home</a> |  <a href="http://www.junitfactory.com/crap4j/update/">Eclipse Update Site</a> |  Enjoy! <br><br>  More on the topic: <br>  <a href="http://www.artima.com/weblogs/viewpost.jsp%3Fthread%3D210575">Pardon My French, But This Code Is CRAP</a> <br>  <a href="http://www.artima.com/weblogs/viewpost.jsp%3Fthread%3D215899">The Code CRAP Metric Hits the Fan - Introducing the crap4j Plug-in</a> <br><br></div><p>Source: <a href="https://habr.com/ru/post/18118/">https://habr.com/ru/post/18118/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../18117/index.html">A new book by Vadim Panov - "Bonfires on the altars".</a></li>
<li><a href="../181173/index.html">Servers and data centers in the Netherlands - operating experience</a></li>
<li><a href="../181175/index.html">Does the programmer need free buns?</a></li>
<li><a href="../181177/index.html">Veeam Backup & Replication: tips and tricks. Part 1</a></li>
<li><a href="../181179/index.html">Features of jQuery fadeIn, fadeOut, and fadeTo methods</a></li>
<li><a href="../181187/index.html">Household computer BK-0010-01. Take two</a></li>
<li><a href="../18119/index.html">5 innovations that will change the world in the next 5 years</a></li>
<li><a href="../181193/index.html">Creator Mode, Manager Mode</a></li>
<li><a href="../181195/index.html">Unexpected results from a simple MySQL query</a></li>
<li><a href="../181197/index.html">WordPress turns 10 years old</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
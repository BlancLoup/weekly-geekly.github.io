<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quick Start with Google Test</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Google Test is Google 's framework for unit testing C ++ code. The overall architecture slightly resembles the generally accepted boost :: test and Cp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Quick Start with Google Test</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/572/b0d/701/572b0d701e7d9712106546aafaf9ab8f.jpg"><br>  <b>Google Test</b> is <b>Google</b> 's framework for unit testing C ++ code.  The overall architecture slightly resembles the generally accepted boost :: test and CppUnit, although it is slightly different in details (for me, to the better).  A large review article of this framework has somehow <a href="http://habrahabr.ru/post/119090/">run through</a> Habr√©, but now it is in some broken state (the code is not displayed), and it seems to me too difficult to get started.  Therefore, I will briefly describe ‚ÄúHello world‚Äù on the Google Test, pointing out several potential problems that you may encounter when using the Google Test when developing under Visual Studio. <br><a name="habracut"></a><br><br><h4>  Assembly </h4><br><ol><li>  Download the <a href="http://code.google.com/p/googletest/downloads/detail%3Fname%3Dgtest-1.6.0.zip%26can%3D2%26q%3D">archive with the code</a> , unzip. </li><li>  There are two files in the gtest-1.6.0 \ msvc folder: gtest.sln and gtest-md.sln.  These are the Solution Files in Visual Studio.  They differ in assembly options: gtest.sln collects code with the / MT key, and gtest-md.sln with the / MD key.  If you do not know what these keys are responsible for - you can read, for example, <a href="http://stackoverflow.com/questions/757418/should-i-compile-with-md-or-mt">here</a> or <a href="http://msdn.microsoft.com/en-us/library/2kzt1wy3%2528v%3Dvs.80%2529.aspx">here</a> .  You must compile the same version that the project you are going to test is going with.  <b>This is important, otherwise you will get a bunch of unintelligible linker errors.</b>  Check with which keys your project is going to be here: <br><br><img src="https://habrastorage.org/storage2/548/d40/399/548d403997bf729c76be7b9591b8b8b6.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Google Test code is successfully built by Visual Studio 2008 \ 2010 (I haven't tried it with others).  At the output you will receive the files gtestd.lib \ gtest.lib (for debugging and release configurations).  With the assembly on this all. <br></li></ol><br><br><h4>  Hello world </h4><br><ol><li>  Open the Solution that you are going to test.  Add a new project to it (console C ++ application). </li><li>  In this project, we add a dependency on the gtestd.lib \ gtest.lib libraries compiled in the second step, the path to the Google Test include folder, dependencies on the projects in your solution that you are going to test. <br><br><img src="https://habrastorage.org/storage2/13c/070/1d9/13c0701d99a4c3a9480312c790432b9b.png"><br><br><img src="https://habrastorage.org/storage2/f9e/3da/75c/f9e3da75cb473307a639dbe2df5bc6e5.png"><br><br></li><li>  We write the following code in the main test project file: <br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"stdafx.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"gtest/gtest.h"</span></span></span><span class="hljs-meta"> class CRectTest : public ::testing::Test { }; TEST_F(CRectTest, CheckPerimeter) { CSomeRect rect; rect.x = 5; rect.y = 6; ASSERT_TRUE(rect.GetPerimeter() == 22); } int main(int argc, char **argv) { ::testing::InitGoogleTest(&amp;argc, argv); return RUN_ALL_TESTS(); }</span></span></code> </pre> <br><br>  Here we are testing a certain class of rectangle for the correctness of the perimeter calculation.  You have noticed how handy - you do not need to register each test in the main-function, or even write test method declarations in the header files. <br><br></li><li>  We start the test project.  We see the following: <br><img src="https://habrastorage.org/storage2/3bf/423/616/3bf423616ca2518d32a49c26271beb03.png"><br></li></ol><br><br><h4>  Rake </h4><br><h5>  Number one </h5><br>  Make no mistake with the choice of compiled solution in the second step.  If you make a mistake and forget - to find out what the error will later be actually not real. <br><br><h5>  Number two </h5><br>  If you plan to spread the main test application and the tests themselves for different projects, you will encounter one tricky problem.  The fact is that Google units are essentially static classes and the Visual C ++ compiler, because of the bug it has, will simply throw out these classes during the compilation process.  To avoid this bug you need to get out the way described <a href="http://code.google.com/p/googletest/wiki/Primer">here</a> . <br><br><h5>  Number three </h5><br>  Do not forget that the tested static libraries need not be enough to add in the dependencies (Dependencies) of the test project, they need to be added to the references (References), otherwise we will get linking errors. <br><br><h4>  Additional materials </h4><br>  <a href="http://habrahabr.ru/post/119090/">Slightly deeper article on Habr√©</a> <br>  <a href="http://code.google.com/p/googletest/wiki/Primer">Quick start in native documentation</a> <br>  <a href="http://code.google.com/p/googletest/wiki/FAQ">Frequently asked Questions</a> <br>  <a href="http://code.google.com/p/googletest/wiki/AdvancedGuide">Advanced use of the framework</a> <br>  <a href="http://googletestaddin.codeplex.com/">Visual Studio Plugin to Run Tests</a> <br><br>  Successes in testing. <br>  Happy New Year! </div><p>Source: <a href="https://habr.com/ru/post/164471/">https://habr.com/ru/post/164471/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../164459/index.html">Smart charging Kweller X-1800. Charge nickel correctly</a></li>
<li><a href="../164461/index.html">From January 1, 2013, Universal Electronic Cards will be issued.</a></li>
<li><a href="../164463/index.html">Practical experience. How to finally start to do your health ?!</a></li>
<li><a href="../164465/index.html">Habrasorsing 2</a></li>
<li><a href="../164469/index.html">The history of handheld computers in faces. Part 2</a></li>
<li><a href="../164475/index.html">5 APIs that will change the web in 2013</a></li>
<li><a href="../164477/index.html">Drawing Snowflakes with SVG</a></li>
<li><a href="../164479/index.html">Multiple Assertions without interruption in one unit test using NUnit as an example</a></li>
<li><a href="../164481/index.html">Happy new year, Habr!</a></li>
<li><a href="../164483/index.html">Another look at the Entity Framework: performance and pitfalls</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
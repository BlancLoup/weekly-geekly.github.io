<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>WordPress Command Prompt</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="WordPress is becoming more and more like an operating system in a variety of settings and functions. As a result, the execution of tasks in the admin ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>WordPress Command Prompt</h1><div class="post__text post__text-html js-mediator-article">  WordPress is becoming more and more like an operating system in a variety of settings and functions.  As a result, the execution of tasks in the admin panel is too slow to work, which is especially noticeable when performing routine actions. <br><br>  Any developer and administrator, going to a certain level of professionalism, seeks to automate and simplify such actions.  In the case of an operating system, a tool to do this exists.  This is the command line. <br><br>  The benefits of using the command line are well known.  Is there a similar tool to manage WordPress?  It turns out, yes.  This is wp-cli, a command line interface for WordPress. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's see what it is. <br><br><h6>  System requirements </h6><br>  We will need: <br><ul><li>  Developer site <a href="http://wp-cli.org/">wp-cli</a> . </li><li>  UNIX-like environment (OS X, Linux, FreeBSD, Cygwin). </li><li>  PHP is not older than version 5.3.2. </li><li>  WordPress is not older than version 3.4. </li></ul><br><h6>  Installation </h6><br>  Download the installation script from the wp-cli website and run it: <br><pre><code class="bash hljs">curl http://wp-cli.org/installer.sh | bash</code> </pre> <br>  All that is needed, the script will do by itself. <br>  Other installation methods are described <a href="https://github.com/wp-cli/wp-cli/wiki/Alternative-Install-Methods">here</a> . <br><br><h6>  Job </h6><br>  To start working with WordPress, you need to go to the directory where it is installed and be able to connect to its database. <br>  After that we command <pre> <code class="bash hljs">wp</code> </pre>  and get a list of commands: <br><ul><li>  wp blog empty </li><li>  wp cache add | decr | delete | flush | get | incr | replace | set | type </li><li>  wp cap add | list | remove </li><li>  wp comment approve | count | create | delete | last | spam | status | trash | unapprove | unspam | untrash </li><li>  wp core config | download | init-tests | install | install-network | is-installed | update | update-db | version </li><li>  wp db cli | create | drop | export | import | optimize | query | repair | reset </li><li>  wp eval </li><li>  wp eval-file </li><li>  wp export </li><li>  wp help </li><li>  wp media import | regenerate </li><li>  wp option add | delete | get | update </li><li>  wp plugin activate | deactivate | delete | install | list | path | status | toggle | uninstall | update | update-all </li><li>  wp post create | delete | edit | generate | get | list | update </li><li>  wp post-meta add | delete | get | update </li><li>  wp rewrite dump | flush | structure </li><li>  wp role create | delete | exists | list </li><li>  wp scaffold _s | child-theme | plugin | plugin-tests | post-type | taxonomy </li><li>  wp search-replace </li><li>  wp shell </li><li>  wp term create | delete | list | update </li><li>  wp theme activate | delete | install | list | path | status | update | update-all </li><li>  wp transient delete | get | set | type </li><li>  wp user add-role | create | delete | generate | import-csv | list | remove-role | set-role | update </li><li>  wp user-meta add | delete | get | update </li></ul><br>  For each team, if you want to get help: <br><pre> <code class="bash hljs">wp <span class="hljs-built_in"><span class="hljs-built_in">help</span></span> &lt;<span class="hljs-built_in"><span class="hljs-built_in">command</span></span>&gt;</code> </pre><br>  But you can start from scratch and install WordPress with wp-cli first.  Download the latest version of WordPress in the folder ./wp: <br><pre> <code class="bash hljs">wp core download --locale=ru_RU --path=wp</code> </pre><br>  A directory will be created (wp in our case) into which WordPress will be installed. <br>  Go to the wp directory: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> wp</code> </pre><br>  Create wp-config.php: <br><pre> <code class="bash hljs">wp core config --dbname=wpcli --dbuser=root --dbpass=alkdfhqiu</code> </pre><br><pre> <code class="bash hljs">Success: Generated wp-config.php file.</code> </pre><br>  And finally, install Wordpress: <br><pre> <code class="bash hljs">wp core install --url=wp.home --admin_password=ralrfaier --admin_email=xxx@yyy.zz --title=<span class="hljs-string"><span class="hljs-string">"Wordpress   wp-cli"</span></span></code> </pre><br><pre> <code class="bash hljs">/sendmail: Cannot open mail:25 Success: WordPress installed successfully.</code> </pre><br>  Well, WordPress is installed.  It is easy to see that wp-cli is trying to send a message about this to the administrator‚Äôs email address. <br>  To check if WordPress is installed, use the command <br><pre> <code class="bash hljs">wp core is-installed</code> </pre><br>  Well, let's create a user? <br><pre> <code class="bash hljs">wp user create VI moio@milo.ru --role=author --user_pass=qiwKKkjhKIU --user_registered=2013-06-29 --display_name=<span class="hljs-string"><span class="hljs-string">" "</span></span></code> </pre><br><pre> <code class="bash hljs">Success: Created user 3.</code> </pre><br>  Here 3 is the identifier of the created user. <br>  What kind of users do we have now? <pre> <code class="bash hljs">wp user list</code> </pre> <br>  We get the list in the form of a table: <br><pre> <code class="bash hljs">+----+------------+---------------------------------+--------------+---------------------+---------------+ | ID | user_login | display_name | user_email | user_registered | roles | +----+------------+---------------------------------+--------------+---------------------+---------------+ | 1 | admin | admin | xxx@yyy.zz | 2013-06-29 03:50:49 | administrator | | 3 | VI |   | moio@milo.ru | 2013-06-29 00:00:00 | author | +----+------------+---------------------------------+--------------+---------------------+---------------+</code> </pre> <br>  The table, as we see, turns out to be wide, you have to configure the terminal for this work. <br>  There is an interesting wp user generate command that allows you to create many users at once.  This may be necessary when testing plugins. <br><pre> <code class="bash hljs">wp user generate --count=10 --role=subscriber</code> </pre> <br><pre> <code class="bash hljs">wp user list</code> </pre> <br><pre> <code class="bash hljs">+----+------------+---------------------------------+--------------+---------------------+---------------+ | ID | user_login | display_name | user_email | user_registered | roles | +----+------------+---------------------------------+--------------+---------------------+---------------+ | 1 | admin | admin | xxx@yyy.zz | 2013-06-29 03:50:49 | administrator | | 12 | user_1_10 | User 10 | | 2013-06-29 08:00:48 | subscriber | | 13 | user_1_11 | User 11 | | 2013-06-29 08:00:48 | subscriber | | 4 | user_1_2 | User 2 | | 2013-06-29 08:00:48 | subscriber | | 5 | user_1_3 | User 3 | | 2013-06-29 08:00:48 | subscriber | | 6 | user_1_4 | User 4 | | 2013-06-29 08:00:48 | subscriber | | 7 | user_1_5 | User 5 | | 2013-06-29 08:00:48 | subscriber | | 8 | user_1_6 | User 6 | | 2013-06-29 08:00:48 | subscriber | | 9 | user_1_7 | User 7 | | 2013-06-29 08:00:48 | subscriber | | 10 | user_1_8 | User 8 | | 2013-06-29 08:00:48 | subscriber | | 11 | user_1_9 | User 9 | | 2013-06-29 08:00:48 | subscriber | | 3 | VI |   | moio@milo.ru | 2013-06-29 00:00:00 | author | +----+------------+---------------------------------+--------------+---------------------+---------------+</code> </pre> <br>  Change user VI - because of him the table is a curve: <br><pre> <code class="bash hljs">wp user update 3 --display_name=<span class="hljs-string"><span class="hljs-string">"Vasiliy Ivanovich"</span></span></code> </pre><br><pre> <code class="bash hljs">Success: Updated user 3.</code> </pre><br>  Check it out. <br><pre> <code class="bash hljs">wp user list</code> </pre><br><pre> <code class="bash hljs">+----+------------+-------------------+--------------+---------------------+---------------+ | ID | user_login | display_name | user_email | user_registered | roles | +----+------------+-------------------+--------------+---------------------+---------------+ | 1 | admin | admin | xxx@yyy.zz | 2013-06-29 03:50:49 | administrator | | 12 | user_1_10 | User 10 | | 2013-06-29 08:00:48 | subscriber | | 13 | user_1_11 | User 11 | | 2013-06-29 08:00:48 | subscriber | | 4 | user_1_2 | User 2 | | 2013-06-29 08:00:48 | subscriber | | 5 | user_1_3 | User 3 | | 2013-06-29 08:00:48 | subscriber | | 6 | user_1_4 | User 4 | | 2013-06-29 08:00:48 | subscriber | | 7 | user_1_5 | User 5 | | 2013-06-29 08:00:48 | subscriber | | 8 | user_1_6 | User 6 | | 2013-06-29 08:00:48 | subscriber | | 9 | user_1_7 | User 7 | | 2013-06-29 08:00:48 | subscriber | | 10 | user_1_8 | User 8 | | 2013-06-29 08:00:48 | subscriber | | 11 | user_1_9 | User 9 | | 2013-06-29 08:00:48 | subscriber | | 3 | VI | Vasiliy Ivanovich | moio@milo.ru | 2013-06-29 00:00:00 | author | +----+------------+-------------------+--------------+---------------------+---------------+</code> </pre><br>  Well, now it's ok.  Although declared full support for utf-8.  There is no ideal in life ... Well, nothing will be finalized. <br>  We can delete the user <br><pre> <code class="bash hljs">wp user delete 3</code> </pre><br><pre> <code class="bash hljs">Success: Deleted user 3.</code> </pre><br>  What else?  You can create, assign roles to users.  Naturally, you can work with records.  Create: <br><pre> <code class="bash hljs">wp post create --post_type=post --post_title=<span class="hljs-string"><span class="hljs-string">" ‚Ññ1"</span></span> --post-status=future --post_date=<span class="hljs-string"><span class="hljs-string">"2013-05-01 07:00:00"</span></span></code> </pre><br><pre> <code class="bash hljs">Success: Created post 3.</code> </pre><br>  Like users, entries can be made in bulk: <br><pre> <code class="bash hljs">--count=10 --post_author=VI</code> </pre><br>  Get: <br><pre> <code class="bash hljs">wp post list</code> </pre><br><pre> <code class="bash hljs">+----+-----------------------+---------------------+---------------------+-------------+ | ID | post_title | post_name | post_date | post_status | +----+-----------------------+---------------------+---------------------+-------------+ | 3 | Post title | name | 2013-06-29 12:50:48 | draft | | 7 |  2 | post-2 | 2013-06-29 12:45:40 | publish | | 8 |  3 | post-3 | 2013-06-29 12:45:40 | publish | | 9 |  4 | post-4 | 2013-06-29 12:45:40 | publish | | 10 |  5 | post-5 | 2013-06-29 12:45:40 | publish | | 11 |  6 | post-6 | 2013-06-29 12:45:40 | publish | | 12 |  7 | post-7 | 2013-06-29 12:45:40 | publish | | 13 |  8 | post-8 | 2013-06-29 12:45:40 | publish | | 14 |  9 | post-9 | 2013-06-29 12:45:40 | publish | | 15 |  10 | post-10 | 2013-06-29 12:45:40 | publish | | 16 |  11 | post-11 | 2013-06-29 12:45:40 | publish | PHP Warning: sprintf(): Too few arguments <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /home/andyudol/.composer/vendor/wp-cli/php-cli-tools/lib/cli/Streams.php on line 38 +----+-----------------------+---------------------+---------------------+-------------+</code> </pre><br>  Ops!  Some kind of mistake.  And where Russian letters, the table is damaged.  Well, nothing, the project is young, correct.  And what is the version, by the way? <br><pre> <code class="bash hljs">wp --info</code> </pre><br><pre> <code class="bash hljs">PHP binary: /usr/lib64/php5.4/bin/php PHP version: 5.4.13--pl0-gentoo php.ini used: /etc/php/cli-php5.4/php.ini wp-cli root: /home/andyudol/.composer/vendor/wp-cli/wp-cli/php/ wp-cli config: wp-cli version: 0.10.2</code> </pre><br>  0.10.2.  Well, yes, a young project.  On github.com, they have been present for about 2 years.  Not so young ... <br>  By the way, this is the latest version.  I just just updated.  This is how it is done: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/.composer php composer.phar update</code> </pre><br>  And what about the promised automation?  Delete some records.  Let's do this with this script: <br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> 7 9 11 12 16 <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$i</span></span> wp post delete <span class="hljs-variable"><span class="hljs-variable">$i</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre><br>  On the screen we will see: <br><pre> <code class="bash hljs">Success: Trashed post 7. Success: Trashed post 9. Success: Trashed post 11. Success: Trashed post 12. Success: Trashed post 16.</code> </pre><br>  Well, what else is interesting? <br>  There are commands to simplify the creation of plug-ins, themes, taxonomies and record types. <br>  For example, create a blank for the plugin: <br><pre> <code class="bash hljs">wp scaffold plugin zabor --plugin_name=<span class="hljs-string"><span class="hljs-string">"  "</span></span></code> </pre>  We see: <br><pre> <code class="bash hljs">Success: Created /home/andyudol/wp/wp-content/plugins/zabor Success: Created <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> files.</code> </pre>  We are informed that the plugin directory and test files have been created.  In fact, the main plugin file has also been created. <br>  Let now we need to test this plugin.  Commanding <br><pre> <code class="bash hljs">wp core init-tests ~/svn/wp-tests --dbname=wp_db --dbuser=root --dbpass=wpdbpass</code> </pre>  The WordPress testing library will be loaded and configured. <br>  Go to the plugin directory <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> wp-content/plugins/zabor</code> </pre>  and run the test <br><pre> <code class="bash hljs">WP_TESTS_DIR=~/svn/wp-tests phpunit</code> </pre><br>  What else? <br>  Work with the database: create / delete, export / import and a few more commands. <br>  Search and replace in database.  It is useful when transferring the database. <br>  Manage user roles and permissions. <br>  Caching management <br>  Manage rewrite rules. <br>  Manage arbitrary record fields and additional user profile fields. <br>  There are commands that allow you to run any PHP code: <br>  wp eval - from the command line, <br>  wp eval-file - from file. <br>  And the wp shell command opens an interactive PHP console. <br>  Yes, and a little more detail about the export.  The wp export command allows, in addition to everything that is possible by regular WordPress tools, first, to export individual entries (or several, given by their identifiers) and, secondly, there is the possibility of exporting not into one file, but into several, containing the specified number of records. <br><pre> <code class="bash hljs">wp <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> --post__in=12,124, 325</code> </pre><br><pre> <code class="bash hljs">wp <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> --file_item_count=30</code> </pre><br><hr><br>  Well, that's all, each team is not ready to describe in detail yet, there is not enough experience with it.  When will be, then there will be a continuation.  May be. </div><p>Source: <a href="https://habr.com/ru/post/185428/">https://habr.com/ru/post/185428/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../185418/index.html">Onyx Boox i63SL Kepler - reader based on Android</a></li>
<li><a href="../185420/index.html">Organize the search for molecular structures using the Lucene and Chemistry Development Kit</a></li>
<li><a href="../185422/index.html">Introduction to EagleMQ</a></li>
<li><a href="../185424/index.html">Reducing the cost of ownership of a large online store</a></li>
<li><a href="../185426/index.html">Reflections on the topic of user rating</a></li>
<li><a href="../185434/index.html">Photo review of cabinets of KUB-Ukraine plant</a></li>
<li><a href="../185440/index.html">Russian President signed anti-piracy law</a></li>
<li><a href="../185442/index.html">Freedom comments! Or "each according to merit"</a></li>
<li><a href="../185444/index.html">Github Releases: Release Releases</a></li>
<li><a href="../185446/index.html">EFF stood up for the hacker who found the vulnerability on the AT & T site and got behind the bars</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
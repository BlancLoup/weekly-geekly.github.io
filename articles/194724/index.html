<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HOLO - Music Analysis System - Version 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 

 A little less than a year ago I wrote an article on Habr√© about a program I‚Äôm developing under the name HOLO . 
 In short, the program...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HOLO - Music Analysis System - Version 2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/ed6/0e4/dd4/ed60e4dd4bc38b9cb277d14f67e6a789.png" alt="image"><br><h4>  Introduction </h4><br><br>  A little less than a year ago <a href="http://habrahabr.ru/post/161005/">I wrote</a> an article <a href="http://habrahabr.ru/post/161005/">on Habr√©</a> about a program <a href="http://habrahabr.ru/post/161005/">I‚Äôm</a> developing under the name <b>HOLO</b> . <img src="https://habrastorage.org/getpro/habr/post_images/766/a37/940/766a37940f8f85db170e49aea2f2e6eb.png" alt="image"><br>  In short, the program ‚Äúlistens‚Äù to your music collection and then allows you to visually explore the array of collected data, as well as compile playlists similar to the specified sample tracks. <br>  Positive feedback allowed us to keep enthusiasm.  One person even went on the link and attempted to rewrite the application from .NET WinForms to WPF, but after some intermediate successes, he suddenly disappeared from view.  I don‚Äôt blame him, as I understand that the project is very hard in content, and being a programmer in core work, it was difficult to devote enough time to HOLO. <br>  Nevertheless, I myself delayed the release of the new version, but there are more positive reasons for this than banal laziness. <br><br><h5>  Opportunities </h5><br>  Generally speaking, from the point of view of the psychology of perception of sound, the task is very subjective.  Each person will assess in his own way whether Jeanne Aguzarova and Zemfira are similar, Led Zeppelin and Iron Maiden, System of a Down and Metallica.  But intensive testing on himself and friends showed that some things can still be expressed in numbers.  For some genres of music is better, for some worse. <br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/post_images/c6d/bfa/030/c6dbfa0302d737439719b150a097e772.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, at the moment <b>HOLO (The music amalgamation system) is</b> able to: <br><br><h6>  Collecting (harvesting) information about musical records on the user's computer </h6><br>  Relative to the previous version, the algorithm of both mechanical file processing and statistical sound processing was significantly reworked.  In particular, the possibility of parallel processing of files in several streams. <br>  Statistical processing, in short, now looks like this: <br>  1) A fragment of parameterizable length is extracted from the file, starting at 20% of the total length. <br>  2) The fragment is cut into a parameterizable number of pieces with a parameterizable overlap percentage. <br>  3) Pieces are converted to FFT format, subjected to smoothing and cleaning; <br>  4) Having a certain set of pre-prepared "centroids", the distance of each piece to each of these centroids is estimated.  Centroids are spectrograms of specially selected fragments of sound 4096/44100 seconds long. <br><img src="https://habrastorage.org/getpro/habr/post_images/18a/326/d39/18a326d39ca58ce610e5ad88862e1a1c.png" alt="image"><br><br>  5) The temporal dynamics of the distances to the centroids roll up into the transition matrix of the composition sound fragments between centroids.  For example, if the sound does not change for a long time (within the distance to the nearest centroid), then the value in the diagonal cell of the transition matrix will be greater; <br>  6) The transition matrix is ‚Äã‚Äãthe result of statistical processing. <br><br><h6>  Collecting results in a database </h6><br>  There has been no change.  As before, SQLite works for the good of the country. <br><img src="https://habrastorage.org/getpro/habr/post_images/440/874/27e/44087427e1bd09cf1d26b23af21a37a6.png" alt="image"><br><br><h6>  Playlist generation based on any number of sample entries provided </h6><br>  Here, too, the changes almost did not happen.  Top left list - the contents of the database.  Lower left list - samples to search.  The right list is the resulting playlist.  By clicking on the ‚ÄúSave and open ...‚Äù button, a .m3u8 file is created that opens any program that recognizes M3U playlists. <br><img src="https://habrastorage.org/getpro/habr/post_images/1b3/706/e8b/1b3706e8bfb5678e006a9d934b7cb8c6.png" alt="image"><br><br><h6>  Visualization of statistics for each individual track </h6><br>  This is a new feature of the program that allows you to visualize the transition matrix (see the statistical processing algorithm above). <br>  By itself, the visualized matrix is ‚Äã‚Äãof no benefit to the user and is basically a decorative element of the program. <br>  However, it is often possible to observe how certain compositions are grouped near different centroids. <br><img src="https://habrastorage.org/getpro/habr/post_images/75b/aa0/365/75baa0365750310ee9a8129d8f1e905a.png" alt="image"><img src="https://habrastorage.org/getpro/habr/post_images/bb1/9d4/d94/bb19d4d9487bc6e1fd6b9992aeed9f3f.png" alt="image"><img src="https://habrastorage.org/getpro/habr/post_images/81d/e3d/e58/81de3de5855750e807ecef917e643ae7.png" alt="image"><br><br><h6>  Visualize the entire database </h6><br>  But this is perhaps the most complex and fresh functionality. <br>  The first visualization method is the <b>classic scatter plot</b> .  The problem is that there are too many data to build it in the database - with seven centroids, the transition matrix contains 49 elements, respectively, we deal with 49 coordinates of each processed file.  In this case, very often up to half of these coordinates are zero, which also does not add to the visibility.  An analysis of the main components came to the rescue, with the help of which it is possible to minimize a lot of useful information in 5-7 dimensions that can be visualized using two coordinates on a plane, plus three RGB color coordinates.  As a result, the database scatterplot is a multi-colored cloud, which, however, can be parameterized quite flexibly, as well as shifted and scaled. <br><img src="https://habrastorage.org/getpro/habr/post_images/4be/4bc/391/4be4bc3911a61dc6b5a75b0193ae3e35.png" alt="image"><br><br>  The second way of visualization is a <b>graph on parallel coordinates</b> .  In this embodiment, a large number of coordinates are represented as an appropriate number of parallel axes, and each composition is represented as a polyline passing through a point on each of the axes.  For better clarity, broken lines are replaced by splines, and therefore the graph looks like a braided spit.  Of course, data compression with the help of principal component analysis is also useful for the streamer. <br><img src="https://habrastorage.org/getpro/habr/post_images/261/ec7/703/261ec7703814d88a97b965289fe67557.png" alt="image"><br><br><h5>  And try? </h5><br>  If you are using Windows XP and newer, you have .NET Framework 4.0, and you also have the ACM codec installed for reading MP3 files (do not ask how to check its availability, I don‚Äôt know myself), then you can try the distribution kit <a href="https://docs.google.com/file/d/0B07oznb_RwUNUGFIRHp0R3d3dXM/edit%3Fusp%3Dsharing">here</a> . <br>  Fans of studying the source code will have to wait until the normal repository is configured. <br><br><h5>  Benefits </h5><br>  Similar solutions from Apple, Google, Pandora Radio, Last.fm were analyzed.  In all cases, the search is conducted according to metadata, which is at least unsportsmanlike, but at most, subjective and subject to the opinions of living appraisers. <br>  In contrast, HOLO is still an impartial reviewer and referee, a system without a teacher.  I used the word ‚Äúbye‚Äù because I plan to introduce some kind of adjustment to the tastes of the user, an auxiliary subsystem of learning with a teacher. <br>  And, of course, a big plus is that any item in the playlist is at your disposal, no streaming from remote servers, everything is under your control. <br><br><h5>  Restrictions </h5><br>  Unfortunately, it was not without them: <br>  1) So far, only Win-platform; <br>  2) For now only MP3 files 44.1kHz 16 bit; <br>  3) With a base size of more than 10 thousand tracks x 10 centroids (~ 1 million records in the database), the formation rate of the playlist begins to exceed half a minute and is not parallelized yet; <br>  4) It is impossible to resume the collection of the database, just start anew; <br>  5) To specify multiple folders or exclude folders to collect while you can not, use symbolic links; <br>  6) For any acceptable speed of database dialing, the tracks are not ‚Äúlistened‚Äù entirely, only a fragment from 1 to 3 minutes long.  Therefore, everything that does not fall into this framework does not affect the analysis and the formation of playlists.  This is one of the most common reasons for exclaiming ‚ÄúWTF ?!‚Äù when listening to a playlist. <br>  7) But this is not the only reason, unfortunately.  Discarding all the metadata about the files, the quality of the search is not yet perfect, please understand.  But in ~ 80% of cases, the playlist will consist of things similar to the sample in tempo, sound density, volume and genre as a whole. <br><br><h5>  Afterword </h5><br>  At the moment, the program has grown to more than hundreds of kilobytes of code.  Due to the fact that C # programming is not my profession, the quality in some places can shake the imagination.  I would be pleased with informative reviews and volunteers who could help in the following aspects: <br>  0) offer the best way of feedback for those who want to test the application at their place; <br>  1) erasure <s>shit</s> code to a decent state; <br>  2) optimizing the speed of work, and, if possible, avoiding SQLite for executing queries; <br>  3) finish UI; <br>  4) expansion of the set of formats supported except MP3 to FLAC, AAC and OGG. <br>  5) avoiding the NAudio platform-dependent library, which does MP3 decoding.  This, perhaps, is the only thing that will not allow to compile HOLO under Mono and, accordingly, to run on all platforms supported by it. <br>  Write in the LAN. <br><br>  <b>UPD:</b> The project repository <a href="https://github.com/johnnybuggy/HOLO">is here</a> . </div><p>Source: <a href="https://habr.com/ru/post/194724/">https://habr.com/ru/post/194724/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../194712/index.html">Start pre-order Meizu MX3!</a></li>
<li><a href="../194714/index.html">Guide to designing relational databases (14-15 part of 15) [translation]</a></li>
<li><a href="../194716/index.html">Expand the context menu of the Start button in Windows 8.1</a></li>
<li><a href="../194718/index.html">The creators of the printed gun "Liberator" created "The Pirate Bay" for 3D-models</a></li>
<li><a href="../194722/index.html">Interview with Gabriel Hurley, OpenStack Horizon Project</a></li>
<li><a href="../194726/index.html">STL Container Selection Algorithm</a></li>
<li><a href="../194728/index.html">The digest of interesting news and materials from the world of PHP over the past two weeks, number 26 (September 8-22, 2013)</a></li>
<li><a href="../194730/index.html">Apple Touch ID - fingerprint scanner in iPhone 5S hacked</a></li>
<li><a href="../194732/index.html">Chaos Computer Club hack Touch ID</a></li>
<li><a href="../194734/index.html">Add Motion Blur Effect to WPF Applications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
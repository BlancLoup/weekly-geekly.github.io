<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Authoring Perl Modules</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When developing pearl modules, you have to do a lot of work, which is practically not related to the tasks and module code - from creating a dozen gen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Authoring Perl Modules</h1><div class="post__text post__text-html js-mediator-article">  When developing pearl modules, you have to do a lot of work, which is practically not related to the tasks and module code - from creating a dozen generic files / directories to doing a dozen identical operations necessary for the release of a new version. <br><br>  In addition to being <b>boring, lazy, and often leads to errors</b> (due to the need to update meta-information ‚Äî such as the version number ‚Äî in several files or the inadvertent omission of some commands during release), everything is further complicated by Perl TIMTOWTDI ‚Äî there are several different build systems , all have their advantages and disadvantages (but there is no simple label with their enumeration), and none of them <b>is recommended by</b> any official or community. <br><br>  In addition, many of us have been writing on pearl for many years, and the last time they read <a href="http://perldoc.perl.org/perlnewmod.html">perlnewmod</a> was studying pearl.  As a result, when new modules are created, this is often done <b>in the style of 15 years ago</b> , and <b>the assembly system is chosen almost randomly</b> - either the ancient, but familiar and precisely able <a href="https://metacpan.org/pod/ExtUtils::MakeMaker">EUMM</a> , or one of the others (not because she needs , but simply in the hope that it will be easier and more convenient for EUMM, without creating new problems ... which it does create with time). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The following briefly describes the tools available at the beginning of 2015 that can facilitate the process of developing pearl modules, make your modules more modern, and make it easier for other developers to refine your modules.  I tried to list their main pros and cons, but because  I myself did not use everything, I will supplement / correct this list in accordance with your comments. <br><br><a name="habracut"></a><ul><li>  <a href="https://habr.com/ru/post/249767/">Tasks</a> </li><li>  <a href="https://habr.com/ru/post/249767/">$ VERSION</a> <ul><li>  <a href="https://habr.com/ru/post/249767/">Old decimal / Old-style decimal</a> </li><li>  <a href="https://habr.com/ru/post/249767/">Dotted-number / dotted-decimal</a> </li><li>  <a href="https://habr.com/ru/post/249767/">Semantic / Semantic</a> </li><li>  <a href="https://habr.com/ru/post/249767/">TRIAL</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/249767/">Skeleton Module / Boilerplate</a> <ul><li>  <a href="https://habr.com/ru/post/249767/">h2xs</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/249767/">Build</a> <ul><li>  <a href="https://habr.com/ru/post/249767/">ExtUtils :: MakeMaker (aka EUMM)</a> </li><li>  <a href="https://habr.com/ru/post/249767/">Module :: Build (aka MB)</a> </li><li>  <a href="https://habr.com/ru/post/249767/">Module :: Install (aka MI)</a> </li><li>  <a href="https://habr.com/ru/post/249767/">Module :: Build :: Tiny (aka MBT)</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/249767/">Dependency Management / Dependencies</a> <ul><li>  <a href="https://habr.com/ru/post/249767/">cpanfile</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/249767/">Version Control / VCS</a> <ul><li>  <a href="https://habr.com/ru/post/249767/">Github</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/249767/">Continuous Integration / CI</a> <ul><li>  <a href="https://habr.com/ru/post/249767/">CPAN Testers</a> </li><li>  <a href="https://habr.com/ru/post/249767/">GitHub + Travis CI</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/249767/">Release / Release</a> <ul><li>  <a href="https://habr.com/ru/post/249767/">App :: scan_prereqs_cpanfile</a> </li><li>  <a href="https://habr.com/ru/post/249767/">Perl :: Version</a> </li><li>  <a href="https://habr.com/ru/post/249767/">CPAN :: Uploader</a> </li><li>  <a href="https://habr.com/ru/post/249767/">Github</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/249767/">Support / Support</a> <ul><li>  <a href="https://habr.com/ru/post/249767/">CPAN RT</a> </li><li>  <a href="https://habr.com/ru/post/249767/">Github</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/249767/">Authoring / Authoring</a> <ul><li>  <a href="https://habr.com/ru/post/249767/">Dist :: Zilla</a> </li><li>  <a href="https://habr.com/ru/post/249767/">Dist :: Milla</a> </li><li>  <a href="https://habr.com/ru/post/249767/">Minilla</a> </li><li>  <a href="https://habr.com/ru/post/249767/">ShipIt</a> </li><li>  <a href="https://habr.com/ru/post/249767/">App :: ModuleBuildTiny</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/249767/">Summary</a> </li><li>  <a href="https://habr.com/ru/post/249767/">Different usefulness for the authors of the modules</a> </li></ul><br><a name="tasks"></a><h1>  Tasks </h1><br>  So let's create a list of tasks that are usually included in the process of authoring Perl modules. <br><br>  <b>Tasks when creating a new module:</b> <ol><li>  set name / email author </li><li>  determine license </li><li>  select build system </li><li>  select additional features: <ul><li>  XS support </li><li>  basic test suite (checking documentation, spelling, code quality, dependencies, build system files, etc.) </li><li>  automatic generation of README from module documentation </li><li>  use VCS </li><li>  integration with GitHub, Travis CI </li></ul></li><li>  create a skeleton module - a directory with a bunch of files needed for its development and release: <ul><li>  the skeleton of the module itself and documentation </li><li>  basic test suite </li><li>  Changes </li><li>  README </li><li>  LICENSE </li><li>  build system files </li><li>  dependency list (sometimes included in build system files) </li><li>  when using VCS: repository and its settings </li></ul></li></ol><br>  <b>Tasks in the release of the new version:</b> <ol><li>  update the list of dependencies </li><li>  assemble module </li><li>  run tests </li><li>  select a new version number and change it in several files (in some files - in several places) </li><li>  describe changes to Changes </li><li>  add current date and release version to Changes </li><li>  update README </li><li>  when using VCS: <ol><li>  commit changes to version, Changes, and all other modified files </li><li>  add tag for new version </li><li>  when using central repo (GitHub) - send changes to it </li></ol></li><li>  create archive with module </li><li>  pour it on CPAN </li></ol><br>  Ideally, all decisions necessary when creating a new module (except for the need for XS) need to be taken once, and in the future to create new modules with one command.  And with the release, ideally, one team should perform all the steps except for choosing a new version number and a description of changes in Changes. <br><br>  <b>Update:</b> if you read it here, and did not understand what kind of ‚Äúauthoring‚Äù is and how it differs from the usual use of Makefile.PL/Build.PL - read these <a href="https://habr.com/ru/post/249767/">two</a> <a href="https://habr.com/ru/post/249767/">comments</a> . <br><br><a name="version"></a><h1>  $ VERSION </h1><br><blockquote>  In a perfect world, I would never <a href="http://www.dagolden.com/index.php/369/version-numbers-should-be-boring/">write a blog about version numbers</a> in Perl. <br>  "Version numbers should be boring" - David Golden </blockquote>  Before proceeding to the essence of the question, it is necessary to describe one problem: the choice of format for the module version.  Although it is not directly related to the topic of the article, this choice must be made during the authoring process, and it is not as simple as it may seem. <br><br>  There are <b>so many</b> ways to incorrectly declare the version of your module, so I will list only the correct ones - there are a lot of them. <br><br><a name="version-old-decimal"></a><h2>  Old decimal / Old-style decimal </h2><br>  Stable releases (two / three digits, as you like): <br><br><pre><code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">our</span></span> $VERSION = <span class="hljs-string"><span class="hljs-string">'0.08'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">our</span></span> $VERSION = <span class="hljs-string"><span class="hljs-string">'0.008'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">package</span></span> MyModule <span class="hljs-number"><span class="hljs-number">0</span></span>.08; <span class="hljs-comment"><span class="hljs-comment"># need perl-5.12 package MyModule 0.008; # need perl-5.12</span></span></code> </pre> <br>  Alpha versions for testing CPAN Testers before the release of <code>0.09</code> / <code>0.009</code> : <br><br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">our</span></span> $VERSION = <span class="hljs-string"><span class="hljs-string">'0.08_01'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">our</span></span> $VERSION = <span class="hljs-string"><span class="hljs-string">'0.008_001'</span></span>;</code> </pre> <br>  Or, considering that users won't see alpha versions anyway, you can use two independent sequences for stable and unstable releases: <a href="http://www.cpan.org/modules/04pause.html">an example</a> . <br><br><a name="version-dotted-decimal"></a><h2>  Dotted-number / dotted-decimal </h2><br>  Stable releases (3 or more numbers can be used in the version): <br><br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> version; <span class="hljs-keyword"><span class="hljs-keyword">our</span></span> $VERSION = <span class="hljs-string"><span class="hljs-string">'v0.8.0'</span></span>; <span class="hljs-comment"><span class="hljs-comment"># need perl-5.8.1 our $VERSION = 'v0.8.0'; # need perl-5.10 package MyModule v0.8.0; # need perl-5.12</span></span></code> </pre> <br>  Alpha versions for testing CPAN Testers before <code>v0.8.1</code> release: <br><br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> version; <span class="hljs-keyword"><span class="hljs-keyword">our</span></span> $VERSION = <span class="hljs-string"><span class="hljs-string">'v0.8.0_1'</span></span>; <span class="hljs-comment"><span class="hljs-comment"># need perl-5.8.1 our $VERSION = 'v0.8.0_1'; # need perl-5.10</span></span></code> </pre> <br>  Although <code>"v0.8_1"</code> can also be used as an alpha version between the stable <code>"v0.8.0"</code> and <code>"v0.8.1"</code> but this version can only be one - if you need to release several alpha versions, then release the stable one with the number <code>"v0.8.1"</code> will not work. <br><br><a name="version-semantic"></a><h2>  Semantic / Semantic </h2><br>  At the moment there is no possibility to <b>fully</b> comply with the <a href="http://semver.org/lang/ru/">specification of semantic versioning</a> - the pre-release versions defined as <code>"1.2.3-alpha1"</code> cannot be applied to pearl modules.  The closest option would be the above-described 3-element dot-number version - you can follow the rules for determining the next stable version according to the specification, and instead of textual pre-release versions release numerical alpha versions. <br><br><a name="version-trial"></a><h2>  TRIAL </h2><br>  You have already noticed that the alpha version is, as our foreign colleagues say, ‚Äúpain in the ass‚Äù.  In fact, this is not about real ‚Äúalpha‚Äù - real alpha, beta and other pre-release versions are described in the semantic versioning specification and are not supported by pearl.  The point is to give the <b>CPAN the command ‚Äúdo not index‚Äù</b> this version.  Thus, we mix two data types in one variable (version number and flag for CPAN), which is bad style, looks ugly, confuses (what to choose before releasing <code>"v0.8.1"</code> - <code>"v0.8_1"</code> or <code>"v0.8.0_1"</code> ?) and creates other problems: the alpha version cannot be set in the package, in some old (up to 5.8.1) versions of perl, they do not work correctly. <br><br>  Not so long ago, a new way was added to CPAN to give the command ‚Äúdo not index‚Äù this version - if the word <code>"TRIAL"</code> is in the archive name with the module.  Thus, you can no longer use the "alpha" version.  Some utilities ( <a href="https://metacpan.org/pod/Dist::Zilla">Dist :: Zilla</a> , <a href="https://metacpan.org/pod/shipit">shipit</a> , ...) support the parameter to be added to the archive name with the <code>"-TRIAL"</code> module before being <code>"-TRIAL"</code> to the CPAN.  Note that <code>"v1.2.3-TRIAL"</code> (unlike <code>"v1.2_3"</code> ) is the usual version of <code>"v1.2.3"</code> , so the next one after it should be <code>"v1.2.4"</code> or <code>"v1.2.4-TRIAL"</code> . <br><br><a name="boilerplate"></a><h1>  Skeleton Module / Boilerplate </h1><br>  These utilities create a directory with a new module, filling it with a basic set of necessary files for some pattern.  This is the oldest, and, until now, the main way to create a new module.  The problem with this approach is that a significant portion of these files are not enough to create once, they need to be constantly updated when new versions of the module are released.  Therefore, many gradually begin to use more complex solutions instead of these utilities (usually based on Dist :: Zilla). <br><br><a name="boilerplate-h2xs"></a><h2>  h2xs, Module :: Starter </h2><br>  The use of these modules is described in <a href="http://perldoc.perl.org/perlnewmod.html">perlnewmod</a> , but the point is that they are very outdated, practically <a href="http://perlmonks.org/%3Fnode_id%3D949081">not supported</a> , too complex and not flexible enough. <br><br>  On CPAN, you can find some more <a href="https://metacpan.org/pod/ExtUtils::ModuleMaker">similar</a> <a href="https://metacpan.org/pod/Distribution::Cooker">modules</a> , but all that I saw were tailored to the needs of their authors and were not very flexibly configured - in fact, the task of generating a catalog with a new module using a template is so simple that almost everyone writes their own bike ( mine is a script for 20 lines in <code>~/bin/</code> , which is also absolutely not customizable). <br><br><a name="build"></a><h1>  Build </h1><br>  With 95% of modules containing several pm-files, tests and a small piece of XS as standard, any assembly system will cope with it. <br><br>  Starting from 5.10.1 there is support for configure_requires - i.e.  you can now in <code>META.{json,yml}</code> specify which modules should be installed <b>before</b> running <code>perl Makefile.PL</code> or <code>perl Build.PL</code> .  In other words, now it does not matter whether the user has installed, for example, <a href="https://metacpan.org/pod/Module::Build::Tiny">Module :: Build :: Tiny</a> - you can use it to build your own module.  Or you can write your build system for your modules. <br><br><a name="build-eumm"></a><h2>  ExtUtils :: MakeMaker (aka EUMM) </h2><br>  <b>Features:</b> <ul><li>  requires <code>make</code> </li><li>  there is dependency graph support (using <code>make</code> ) </li></ul><br>  <b>Disadvantages:</b> <ul><li>  to change the build process, you usually have to change the <code>Makefile</code> (either by appending a piece to it, or somehow transforming it; moreover, it must be done portably in both the <code>Makefile</code> format and the shell commands used in it) - which is very strong complicates <ul><li>  when making changes you need to write portable code </li></ul></li><li>  too big and complicated, <a href="http://stackoverflow.com/a/214717/113120">nobody wants to support and develop it</a> </li><li>  it is difficult to write plugins to it and it is difficult to connect several plug-ins at the same time </li></ul><br>  <b>Advantages:</b> <ul><li>  the most flexible of all alternatives, therefore in difficult cases you have to use only EUMM </li></ul><br><a name="build-mb"></a><h2>  Module :: Build (aka MB) </h2><br>  <b>Features:</b> <ul><li>  there is enough perl to work, no <code>make</code> needed, no knowledge how to write a portable <code>Makefile</code> </li><li>  there is no dependency graph support (what does it depend on when building) </li><li>  removed from core (modules distributed with perl) ‚Äîthat won't affect anything (thanks to configure_requires), but caused a <a href="https://ru.wikipedia.org/wiki/FUD">FUD</a> wave;  in fact, no <b>new</b> reasons for avoiding it have appeared, and if the old reasons did not stop you, continue to use it calmly and continue </li></ul><br>  <b>Disadvantages:</b> <ul><li>  too big and complicated, nobody wants to support and develop it </li><li>  because of the architecture similar to EUMM (for the extension you need to write code that will be used to generate other code that will already be executed), it has the same problem - it is difficult to write plugins and it is difficult to connect several plugins at the same time ( <a href="https://metacpan.org/pod/Module::Build::Pluggable">Module :: Build</a> recently appeared <a href="https://metacpan.org/pod/Module::Build::Pluggable">: : Pluggable</a> , which is trying to solve the other half of this problem) </li></ul><br>  <b>Advantages:</b> <ul><li>  use and, in small volumes, expand much easier than EUMM </li></ul><br><a name="build-mi"></a><h2>  Module :: Install (aka MI) </h2><br>  <b>Features:</b> <ul><li>  wrapper over EUMM </li></ul><br>  <b>Disadvantages:</b> <ul><li>  trying to solve the problem of the lack of at that time configure_requires by copying itself and all the plugins in <code>inc/</code> necessary for building the current module ‚Äî which, in turn, created new problems (and now has no meaning at all) ‚Äîfrom the need to re-issue its module to fix the bug in the bundled version of the MI to the inconvenience when using VCS due to the fact that the code relating to the MI is constantly updated in the repository </li></ul><br>  <b>Advantages:</b> <ul><li>  simple and intuitive interface </li></ul><br>  Despite the unanimous dislike of the community for EUMM and <a href="https://metacpan.org/pod/Module::Build">Module :: Build</a> , I got the impression that <a href="https://metacpan.org/pod/Module::Install">Module :: Install has</a> lately stopped being taken seriously at all - the problems it creates from time to time outweighed its merits. <br><br><a name="build-mbt"></a><h2>  Module :: Build :: Tiny (aka MBT) </h2><br>  <b>Features:</b> <ul><li>  An experiment that showed that it is possible to make an assembly system on a pearl sufficient for most modules, just 120 lines of code </li></ul><br>  Your <code>Build.PL</code> looks like this: <br><br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-number"><span class="hljs-number">5.008001</span></span>; <span class="hljs-comment"><span class="hljs-comment"># only if you need it use Module::Build::Tiny; Build_PL();</span></span></code> </pre> <br>  Strangely enough, you can even use it - using the <a href="https://metacpan.org/pod/cpanfile">cpanfile</a> file for managing dependencies and the auxiliary utility <a href="https://metacpan.org/pod/mbtiny">mbtiny</a> for authoring (generating <code>Build.PL</code> , <code>MANIFEST</code> and <code>META.{json,yml}</code> , preparing the archive with the module - what the Module :: Build and that does not apply to the module <b>building</b> process).  Either use Dist :: Zilla instead of <code>mbtiny</code> (by the way, <a href="https://metacpan.org/pod/Dist::Milla">Dist :: Milla</a> and <a href="https://metacpan.org/pod/Minilla">Minilla</a> use MBT - for such clever systems it is very convenient when the build system does only its work and does not take on "extra" tasks). <br><br><a name="deps"></a><h1>  Dependency Management / Dependencies </h1><br><a name="deps-cpanfile"></a><h2>  cpanfile </h2><br>  This is an approach in which dependencies are specified separately from the build system, in the <code>cpanfile</code> file.  There are several reasons to do this: <br><br><ul><li>  If you use different build systems in different modules, using the cpanfile allows you to forget about the differences in syntax (and restrictions ‚Äî EUMM and Module :: Install do not fully support <a href="https://metacpan.org/pod/CPAN::Meta::Spec">CPAN :: Meta :: Spec 2.0</a> ) of different build systems and use the <b>same format for all</b> (by the way, compatible with the Module :: Install format). </li><li>  In the same way, you can set dependencies not only for pearl modules, but also for <b>ordinary applications</b> (which usually do not have a <code>Makefile.PL</code> or <code>Build.PL</code> and there is simply no way to specify dependencies) - actually, it was for this feature that cpanfile was developed.  Moreover, you can set an alternative source for a separate dependency, from where to get it - from the private CPAN mirror, from git, etc. </li><li>  You can install all the dependencies via <code>cpanm --installdeps .</code>  or <a href="https://metacpan.org/pod/Carton">carton</a> without <code>META.{json,yml}</code> files. </li><li>  When using Module :: Install, you can not keep in the <code>inc/</code> and <code>META.{json,yml}</code> repository <code>META.{json,yml}</code> and correctly specify the dependence on Module :: Install as ‚Äúdevelop‚Äù (author_requires) and not ‚Äúconfigure‚Äù (configure_requires).  At the same time, other developers who have not installed Module :: Install will be able to install it via <code>cpanm --with-develop --installdeps .</code>  or <code>carton</code> . </li></ul><br><a name="vcs"></a><h1>  Version Control / VCS </h1><br>  In the case of pearl modules, you need to keep in mind that, on the one hand, <b>you need to</b> store all the files <b>necessary for building the</b> module (so that it can be <b>installed directly from the repository</b> via <code>cpanm</code> and that other developers get the <b>working</b> version of the project after the fork), and on the other hand, avoid littering it with unnecessary auto-generated files (for example, Module :: Install files in <code>inc/</code> ) - because you commit them all the time, plus they will litter the diff, etc.  This is especially true for Dist :: Zilla users - if you want to receive pull requests, then you shouldn‚Äôt require that those who want to fix you some trifles have to install 150-200 additional modules to start the project build. <br><br><a name="vcs-github"></a><h2>  Github </h2><br>  When using <a href="https://github.com/">GitHub,</a> you most likely have to either write an additional description of the module in <code>README.md</code> , or configure the automatic generation of this file from the module's POD documentation.  And in the second case, you may need to add additional elements - for example, the project build status in Travis CI. <br><br><a name="ci"></a><h1>  Continuous Integration / CI </h1><br><a name="ci-cpan"></a><h2>  CPAN Testers </h2><br>  Until April 2013, <a href="http://cpantesters.org/">CPAN Testers</a> did not support a separate indication of <a href="https://metacpan.org/pod/CPAN::Meta::Spec">test_requires</a> (dependencies required only for running tests).  In this case, the assembly system has long given the opportunity to indicate them ... but it did not work.  As a result, some module developers were very upset, they released a new version without any clever test_requires and forgot about this feature.  So, it is <b>already possible</b> !  <a href="http://weblog.bulknews.net/post/46653336492/test-requires-all-the-way">Details of test_requires support by different versions of build systems.</a> <br><br>  In principle, the CPAN Testers service covers basic needs, but it has one drawback: testing occurs <b>after release</b> .  To drive a module through CPAN Testers before release, you need to release special <b>alpha versions</b> - and it‚Äôs still a release, and CPAN Testers doesn‚Äôt work that fast. <br><br><a name="ci-travis"></a><h2>  GitHub + Travis CI </h2><br>  By connecting to the repository with a module on GitHub <a href="https://travis-ci.org/">Travis CI,</a> you can automate testing of the current version of the module <b>before release</b> on <a href="http://about.travis-ci.org/docs/user/languages/perl/">several versions of perl</a> (although this is not so cool in terms of different platforms like CPAN Testers, but it's still better than running tests on your own machine ). <br><br><a name="release"></a><h1>  Release / Release </h1><br><a name="release-cpanfile"></a><h2>  App :: scan_prereqs_cpanfile </h2><br>  Provides the <a href="https://metacpan.org/pod/scan-prereqs-cpanfile">scan-prereqs-cpanfile command</a> to analyze module dependencies and generate a <code>cpanfile</code> or display differences from the current <code>cpanfile</code> (if it was modified manually and simply re-generating it is not the best idea). <br><br><a name="release-version"></a><h2>  Perl :: Version </h2><br>  Provides the <a href="https://metacpan.org/pod/distribution/Perl-Version/examples/perl-reversion">perl-reversion</a> command to change the version number in (almost) all module files. <br><br>  Supports <code>README</code> , but not <code>README.md</code> . <br><br><a name="release-upload"></a><h2>  CPAN :: Uploader </h2><br>  Provides the <a href="https://metacpan.org/pod/cpan-upload">cpan-upload</a> command for <a href="https://metacpan.org/pod/cpan-upload">uploading</a> modules to CPAN from the command line.  The config file <code>~/.pause</code> with login / password for PAUSE can be encrypted by GnuPG. <br><br><a name="release-github"></a><h2>  Github </h2><br>  Unfortunately, GitHub is not yet able to automatically upload pearl modules to CPAN (although, probably, technically, it would be more correct to say that this CPAN does not know how to download modules from GitHub) when adding a tag for a new version (as is the case with plug-ins for jQuery).  But anyway, I'll leave this point here, all of a sudden, the right people will see it and add a feature. <br><br><a name="support"></a><h1>  Support / Support </h1><br><a name="support-rt"></a><h2>  CPAN RT </h2><br>  <a href="https://rt.cpan.org/">The bug tracker CPAN</a> has been the only available option for many years.  Given its awkward interface, it was very sad.  On the other hand, it can be used even if you <b>do not use VCS</b> when developing a module. <br><br>  Fortunately, now it is possible to specify in <code>META.{json,yml}</code> (not with handles, of course, but through the build system used) <b>an alternative bug tracker</b> (for example, on GitHub).  Unfortunately, although this will change the links to the bug tracker on the CPAN and <a href="https://metacpan.org/">MetaCPAN sites</a> , this will not disable the ability to add tickets for your module to the CPAN RT (but it shows a notification that the preferred bug tracker is in a different place).  Of course, after changing the bug tracker, the <b>current bugs remain in RT</b> . <br><br><a name="support-github"></a><h2>  Github </h2><br>  I will not describe the advantages and convenience of supporting projects on GitHub (especially conspicuous compared with CPAN RT).  Moreover, even if you don‚Äôt like Git, you can work with Mercurial locally without any problems and still keep the project on GitHub (via the <a href="http://hg-git.github.io/">hg-git</a> plugin). <br><br>  If you want to move current tickets from CPAN RT to GitHub Issues, you can try using <a href="https://github.com/dagolden/zzz-rt-to-github">rt-to-github.pl</a> or this <a href="https://gist.github.com/markstos/5096483">modification of</a> its old version. <br><br><a name="authoring"></a><h1>  Authoring / Authoring </h1><br>  In this section, utilities will be described completely taking on the process of authoring modules, often using the above-described utilities to solve individual authoring subtasks. <br><br>  I have two servers, one has just been installed, there are only 27 CPAN modules, on the second one many pearl projects have been developed for many years, 248 CPAN modules are installed there.  I calculated how many additional CPAN modules have to be installed on each of the servers for the utilities described in this section: <br><br><ul><li>  Dist :: Zilla (without additional plug-ins) requires 162 modules on the first and 83 modules on the second server. </li><li>  Dist :: Milla (in fact, a selection of plugins for Dist :: Zilla) requires 257 and 166 modules. </li><li>  Minilla (which declares minimum dependencies as one of the main advantages) - 126 and 41 modules. </li><li>  ShipIt - 1 and 1. </li><li>  App :: ModuleBuildTiny - 8 and 6. </li></ul><br><a name="authoring-distzilla"></a><h2>  Dist :: Zilla </h2><br>  This is a real monster.  <b>He does everything!</b>  On CPAN, there are now about 900 modules included in 480 distributions that extend Dist :: Zilla.  Of these 480 distributions, 315 are plug-ins (Dist :: Zilla :: Plugin :: *), and another 100 are different collections of these plug-ins (Dist :: Zilla :: PluginBundle :: *). <br><br>  There are only two problems: how many days you need to spend, so that he starts doing what you personally need, and the number of modules you need to install to use it. <br><br>  On the first problem - I can not say anything.  I did not dare to get involved and try to customize it for myself.  Who did it - share your impressions in the comments. <br><br>  The second problem is also quite important - if you want to receive patches and pull requests to your module, it is necessary that those who wish to make changes to it can be done simply enough.  If they need to install half of the CPAN to correct a couple of lines (the author claims that <a href="http://www.dagolden.com/index.php/2293/why-installing-distzilla-is-slow-and-what-you-can-do-about-it/">not half, but only 0.6%</a> ) and deal with a non-standard build process, you will not wait for the patch. <br><br><a name="authoring-distmilla"></a><h2>  Dist :: Milla </h2><br>  <b>Features:</b> <ul><li>  just a selection of plugins for Dist :: Zilla and a utility wrapper </li><li>  Perl license is used, to change it, replace it with another one in POD </li><li>  there is no automatic detection and update of dependencies, they need to be described manually in <code>cpanfile</code> <ul><li>  you can use <code>scan-prereqs-cpanfile --diff=cpanfile</code> to quickly find all new connected modules that have not yet been added to <code>cpanfile</code> </li></ul></li><li>  you can choose which build system will be used: Module :: Build :: Tiny (by default), Module :: Build or EUMM, but I'm not sure that you can use all the features of the selected build system - <code>Build.PL</code> doesn't make sense to edit, it‚Äôs each build is re-generated </li></ul><br>  <b>Disadvantages (compared to Dist :: Zilla):</b> <ul><li>  An even greater number of dependencies that need to be installed ... but this, to a large extent, is compensated by the fact that you can save a few days on drawing up your own collection of plug-ins, which is not the fact that it would be less <ul><li>  however, as soon as you want to add a new feature, for example the output of a badge with the Travis CI report in README.md, you will still need to search for and connect the <a href="https://metacpan.org/pod/Dist::Zilla::Plugin::GitHubREADME::Badge">additional</a> Dist :: Zilla <a href="https://metacpan.org/pod/Dist::Zilla::Plugin::GitHubREADME::Badge">plugin</a> </li></ul></li><li>  like XS-modules are not supported (probably will need to connect an additional plugin) </li></ul><br>  <b>Advantages:</b> <ul><li>  Many popular Dist :: Zilla plugins modify the module code and / or documentation (or depend on the plugins that do it), forcing you to change your workflow - there are basically no such plugins in Dist :: Milla: your code and documentation are changed only by you (excluding update <code>$VERSION</code> upon release) <ul><li>  instead of changing the code / documentation based on the given meta-data, Dist :: Milla works in the opposite direction, calculating the meta-data based on the code, documentation, and repository ‚Äî as build systems like Module :: Install or Module have always done: : Build </li></ul></li><li>  Unlike most modules using Dist :: Zilla, third-party developers can easily participate in the development of modules using Dist :: Milla - they do not need to install Dist :: Zilla themselves or deal with a non-standard build process, your module looks, builds, tests and installs like all normal modules <ul><li>  in particular, your module can be installed directly from GitHub </li></ul></li><li>  there is no need to spend a few days on selecting and setting up your own set of plug-ins for Dist :: Zilla, you can immediately start using a fairly good starter set, and then modify it as needed </li><li>  support of migration of an existing module using another build or authoring system on Dist :: Milla </li></ul><br><a name="authoring-minilla"></a><h2>  Minilla </h2><br>  <b>Features:</b> <ul><li>  almost identical to Dist :: Milla with default settings </li></ul><br>  <b>Disadvantages:</b> <ul><li>  <b>hardly configurable</b> </li></ul><br>  <b>Advantages:</b> <ul><li>  compatible with standard build / install process </li><li>  does not use Dist :: Zilla </li><li>  significantly less dependencies than Dist :: Milla </li><li>  supports XS </li><li>  support for migrating an existing module using another Minilla build or authoring system </li></ul><br>  If you do authoring in almost the same way as Tokuhiro Matsuno (by Minilla), or if you are exactly how authoring is done, the main thing is that everything works out of the box itself in a fairly modern way (i.e. using git and GitHub) and not required the installation of a wild number of modules - Minilla is ideal for you.  If you need to do something differently, you will have to look for a replacement for him (most likely she will be Dist :: Milla). <br><br><a name="authoring-shipit"></a><h2>  ShipIt </h2><br>    <code>shipit</code>   ,     . <br><br>      <code>.shipit</code> ,  : <br><br><pre> steps = FindVersion, ChangeVersion, CheckChangeLog, DistTest, Commit, Tag, MakeDist, UploadCPAN </pre><br>     <code>shipit</code>     <code>.shipit</code> : <br><br><ol><li>       </li><li>       </li><li>     <code>Changes</code>     </li><li>   ( <code>Makefile.PL</code>  <code>Build.PL</code> ) </li><li>  commit ( Git/Mercurial/SVN) </li><li>  tag    </li><li>     </li><li>    CPAN </li></ol><br>       ,    CPAN  <a href="https://metacpan.org/search%3Fq%3Dshipit%253A%253Astep"> </a> ( <code>README</code>  POD,    POD,       ,   ., ‚Ä¶). <br><br>  ,   ShipIt  ‚Äî      ,        Dist::Milla     ShipIt  Dist::Milla.    ShipIt    ,      , ,    .  ,      ,        Dist::Zilla       ShipIt.  <a href="http://stackoverflow.com/a/5898913/113120"></a>  Dist::Zilla (   ShipIt     Dist::Zilla)   ShipIt ‚Äî       .  , <b></b>  Dist::Zilla     . <br><br><a name="authoring-ambt"></a><h2> App::ModuleBuildTiny </h2><br>  ,       .    ,   0.005,     ‚Ä¶        ,        Module::Build::Tiny ,   Dist::Zilla  Minilla. <br><br>       ,          .     ¬´A standalone authoring tool¬ª,       .               (   )        Dist::Zilla. <br><br>   ‚Äî       CPAN: <br><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">mkdir</span></span> -p Example-MBtiny/lib/Example/ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> Example-MBtiny vi lib/Example/MBtiny.pm mbtiny dist</code> </pre> <br>    <code>Example-MBtiny-$VERSION.tar.gz</code>     CPAN.          -    <code>lib/Example/MBtiny.pm</code>   . <br><br>   (  - )   ,          GitHub: <code>README.md</code> , <code>LICENSE</code> , <code>Changes</code> , <code>t/*</code> , <code>.gitignore</code> , <code>.travis.yml</code>     ,         GitHub. <br><br>   ‚Äî     <code>mbtiny</code> : <br><br><ul><li>    <code>mbtiny test</code>  <code>mbtiny dist</code> ,     ,     <code>Build.PL</code> , <code>MANIFEST</code>  <code>META.{json,yml}</code>          . ,           CPAN,       ‚Äî        <code>cpanm</code>             -     pull-request. </li><li>   ‚Äî  <code>mbtiny regenerate</code>   <code>Build.PL</code> , <code>MANIFEST</code>  <code>META.{json,yml}</code>     .     ,   ,     ‚Äî      . </li></ul><br>   GitHub     <code>metamerge.json</code> ,       <code>META.{json,yml}</code> : <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"resources"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"bugtracker"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"web"</span></span> : <span class="hljs-string"><span class="hljs-string">"https://github.com/powerman/Example-MBtiny/issues"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"homepage"</span></span> : <span class="hljs-string"><span class="hljs-string">"https://github.com/powerman/Example-MBtiny"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"repository"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span> : <span class="hljs-string"><span class="hljs-string">"git"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span> : <span class="hljs-string"><span class="hljs-string">"git://github.com/powerman/Example-MBtiny.git"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"web"</span></span> : <span class="hljs-string"><span class="hljs-string">"https://github.com/powerman/Example-MBtiny"</span></span> } } }</code> </pre> <br>       : <br><br><pre> <code class="hljs dos"># update dependencies scan-prereqs-cpanfile &gt;cpanfile # ... update META.* from cpanfile <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> you added META.* into the repo mbtiny regenerate # build &amp; test mbtiny test # update version everywhere <span class="hljs-built_in"><span class="hljs-built_in">ver</span></span>=<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span> perl-reversion -<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> $<span class="hljs-built_in"><span class="hljs-built_in">ver</span></span> # don't forget to update version &amp; <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> vi Changes # regenerate README.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> with badges cp BADGES.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> README.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> pod2markdown lib/Example/MBtiny.pm &gt;&gt; README.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> # release git commit -a -m "release $<span class="hljs-built_in"><span class="hljs-built_in">ver</span></span>" git tag $<span class="hljs-built_in"><span class="hljs-built_in">ver</span></span> git push mbtiny dist cpan-upload Example-MBtiny-$<span class="hljs-built_in"><span class="hljs-built_in">ver</span></span>.tar.gz</code> </pre> <br>  ,       ‚Äî   , - , - .      .     (,       )        Dist::Zilla. <br><br><a name="resume"></a><h1>  Summary </h1><br><ul><li>        ,    ,       <code>use 5.010001;</code> </li><li>     <code>our $VERSION="v1.2.3";</code> <ul><li>     ,      </li><li>  -         <code>"-TRIAL"</code>       </li></ul></li><li>      Module::Build::Tiny   Module::Build (     MBT) </li><li>     <code>cpanfile</code> </li><li>    GitHub,    GitHub  <code>META.json</code> <ul><li>  Travis CI </li></ul></li></ul><br>        ‚Äî     .     : <br><br><ul><li> Minilla,         -    </li><li> Dist::Milla,   Minilla   - ,      Dist::Zilla         </li><li> App::ModuleBuildTiny,      ,       </li></ul><br><a name="links"></a><h1>      </h1><br><ul><li> <a href="http://perlmonks.org/%3Fnode_id%3D1009586">What are the files in a CPAN  distribution?</a> </li><li> <a href="http://www.dagolden.com/index.php/2098/the-annotated-lancaster-consensus/">The  Annotated Lancaster Consensus</a> </li><li> <a href="http://wiki.cpantesters.org/wiki/CPANAuthorNotes">CPAN Authors FAQ</a> </li><li> <a href="http://cpants.cpanauthors.org/kwalitee">Kwalitee indicators</a> </li><li> <a href="http://perlmaven.com/how-to-add-link-to-version-control-system-of-a-cpan-distributions">How  to convince Meta CPAN to show a link to the version control system of a  distribution?</a> </li><li> <a href="http://pragmaticperl.com/issues/14/pragmaticperl-14-minilla-%25D1%2581%25D0%25B8%25D1%2581%25D1%2582%25D0%25B5%25D0%25BC%25D0%25B0-%25D0%25BF%25D0%25BE%25D0%25B4%25D0%25B3%25D0%25BE%25D1%2582%25D0%25BE%25D0%25B2%25D0%25BA%25D0%25B8-%25D0%25B4%25D0%25B8%25D1%2581%25D1%2582%25D1%2580%25D0%25B8%25D0%25B1%25D1%2583%25D1%2582%25D0%25B8%25D0%25B2%25D0%25BE%25D0%25B2-%25D0%25B4%25D0%25BB%25D1%258F-cpan.html">Minilla  ‚Äî     CPAN @ Pragmatic Perl #14</a> </li><li> <a href="https://metacpan.org/pod/CPAN::Changes::Spec">    Changes</a> </li><li> <a href="https://metacpan.org/pod/CPAN::Meta::Spec">  META.* </a> </li></ul><br> ______________________ <br><h6>    <a href="https://github.com/powerman/asciidoc-habrahabr-backend">habrahabr backend</a>  <a href="http://asciidoc.org/">AsciiDoc</a> . </h6></div><p>Source: <a href="https://habr.com/ru/post/249767/">https://habr.com/ru/post/249767/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../249755/index.html">Cards, Troika, payments</a></li>
<li><a href="../249757/index.html">How to hack Yandex two-factor authentication</a></li>
<li><a href="../249759/index.html">Sample Feature Engineering in Machine Learning</a></li>
<li><a href="../249761/index.html">Sberbank Online: find out personal data by phone</a></li>
<li><a href="../249765/index.html">How I fought adware on google play and lost</a></li>
<li><a href="../249769/index.html">The ‚ÄúUnread issues‚Äù plugin - as we notify employees in Redmine. General concept</a></li>
<li><a href="../249771/index.html">How and why we do TLS in Yandex</a></li>
<li><a href="../249773/index.html">DevCon 2015: announcement of the first speakers and conference reports</a></li>
<li><a href="../249775/index.html">Zombies are attacking the App Store, Android is catching up with iOS, Liam Neeson is taking revenge on the offender - and other news of the week for a mobile developer</a></li>
<li><a href="../249777/index.html">Why did we make the Beeline application for Windows Phone and that there is something in this OS that is not in iOS and Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
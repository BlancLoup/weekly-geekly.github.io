<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Entertaining analysis of one expression with square brackets</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Why in javascript: 



>1+[[]+[]]-[]+[[]-[]]-1 9  
 In general, it is difficult at first glance to understand why. 

 What do you think [[]+[]]-[]+[[]...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Entertaining analysis of one expression with square brackets</h1><div class="post__text post__text-html js-mediator-article">  Why in javascript: <br><br><pre><code class="javascript hljs">&gt;<span class="hljs-number"><span class="hljs-number">1</span></span>+[[]+[]]-[]+[[]-[]]<span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span></code> </pre> <a name="habracut"></a><br>  In general, it is difficult at first glance to understand why. <br><br>  What do you think <code>[[]+[]]-[]+[[]-[]]==9</code> ? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And here is no: <br><br><pre> <code class="javascript hljs">&gt; [[]+[]]-[]+[[]-[]] <span class="hljs-string"><span class="hljs-string">"00"</span></span></code> </pre> <br>  But we know that when added to a line in JS, concatenation occurs, and then the first expression would seem to be 99: <br><br><pre> <code class="javascript hljs">&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-string"><span class="hljs-string">"00"</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">99</span></span></code> </pre> <br>  How so? <br><br>  We'll have to disassemble from the beginning, first about two zeros: <br><br><pre> <code class="javascript hljs">&gt; []+[] <span class="hljs-string"><span class="hljs-string">""</span></span></code> </pre> <br>  Here it is clear that empty arrays turned into empty lines and when folded together they gave rise to an empty string. <br><br><pre> <code class="javascript hljs">&gt; [<span class="hljs-string"><span class="hljs-string">""</span></span>]-[] <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br>  It is also understandable here, if you understand that the second empty array is from the point of view of arithmetic zero, and the empty string (to which the first array is given for arithmetic) is also zero.  Zero minus zero as long as it makes sense.  The second part also becomes immediately clear: <br><br><pre> <code class="javascript hljs">&gt; [[]-[]] [<span class="hljs-number"><span class="hljs-number">0</span></span>]</code> </pre> <br>  So we have a normal zero, and a zero in the array, adding them, is reduced to lines and concatenated: <br><br><pre> <code class="javascript hljs">&gt; <span class="hljs-number"><span class="hljs-number">0</span></span>+[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-string"><span class="hljs-string">"00"</span></span></code> </pre> <br>  With double zero everything is clear.  Where did the 9 come from? <br><br>  We read the addition, as expected, from left to right: <br><br><pre> <code class="javascript hljs">&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>+[[]+[]] <span class="hljs-string"><span class="hljs-string">"1"</span></span></code> </pre> <br>  With a large number of square brackets we already understood, an array with an empty string led to an empty string and turned the whole unit into a one-line ... <br><br><pre> <code class="javascript hljs">&gt; <span class="hljs-string"><span class="hljs-string">"1"</span></span>-[] <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>  ... and then subtracting zero turned it back into an integer. <br><br><pre> <code class="javascript hljs">&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>+[[]-[]] <span class="hljs-string"><span class="hljs-string">"10"</span></span></code> </pre> <br>  The set of square brackets on the right is ["0"], which turns into a string representation of the array, and is added to the unit, which again turned into a string for this. <br>  And the final chord is quite obvious: <br><br><pre> <code class="javascript hljs">&gt; <span class="hljs-string"><span class="hljs-string">"10"</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span></code> </pre> <br>  And it looks all right ... <br><br>  In general, people make the full language of the Javascript interpreter using only the characters of brackets, the exclamation mark and plus: <a href="http://www.jsfuck.com/">http://www.jsfuck.com/</a> and then use it to bypass filtering by regular expressions in eBay: <a href="http://thedailywtf.com/articles/bidding-on-security">http://thedailywtf.com/articles / bidding-on-security</a> <br></div><p>Source: <a href="https://habr.com/ru/post/279507/">https://habr.com/ru/post/279507/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../279497/index.html">Pwn2Own 2016: first results</a></li>
<li><a href="../279499/index.html">My bike or how I saved my nerve cells</a></li>
<li><a href="../279501/index.html">Multi-exclusion or Want to share one interesting architectural trick</a></li>
<li><a href="../279503/index.html">Critical vulnerabilities of the BIND DNS server allow you to remotely disable it and conduct DoS attacks</a></li>
<li><a href="../279505/index.html">Setting up a repository server based on SCM-Manager under Debian</a></li>
<li><a href="../279509/index.html">Programmatic process lookup by name in QNX 6.5.0</a></li>
<li><a href="../279511/index.html">How to write an email to IT professionals: 5 tips</a></li>
<li><a href="../279513/index.html">Quick start a new application on React using nwb</a></li>
<li><a href="../279515/index.html">Use highcharts.js to create server side charts</a></li>
<li><a href="../279517/index.html">We write VoIP iOS chat on CORE AUDIO for VK Mobile Challenge contest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Operating Systems: Three Easy Pieces. Part 1: Intro (translation)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction to operating systems 
 Hi, Habr! I want to bring to your attention a series of articles-translations of one interesting in my opinion lit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Operating Systems: Three Easy Pieces. Part 1: Intro (translation)</h1><div class="post__text post__text-html js-mediator-article"><h1>  Introduction to operating systems </h1><br>  Hi, Habr!  I want to bring to your attention a series of articles-translations of one interesting in my opinion literature - OSTEP.  This material takes a rather in-depth look at the work of unix-like operating systems, namely, working with processes, various schedulers, memory, and other similar components that make up a modern OS.  The original of all materials you can see <a href="http://pages.cs.wisc.edu/~remzi/OSTEP/">here</a> .  Please note that the translation was made unprofessionally (fairly freely), but I hope I saved the general meaning. <br><br>  Laboratory work on this subject can be found here: <br><br><ul><li>  original: <a href="http://pages.cs.wisc.edu/~remzi/OSTEP/Homework/homework.html">pages.cs.wisc.edu/~remzi/OSTEP/Homework/homework.html</a> </li><li>  original: <a href="https://github.com/remzi-arpacidusseau/ostep-code">github.com/remzi-arpacidusseau/ostep-code</a> </li><li>  my personal adaptation: <a href="https://github.com/bykvaadm/OS/tree/master/ostep">github.com/bykvaadm/OS/tree/master/ostep</a> </li><li>  <a href="https://habr.com/en/post/449026/">Part 3: Scheduler Introduction</a> </li></ul><br>  Other parts: <br><ul><li>  <a href="https://habr.com/en/post/446340/">Part 1: Intro</a> </li><li>  <a href="https://habr.com/en/post/446866/">Part 2: Abstraction: the process</a> </li><li>  <a href="https://habr.com/en/post/447182/">Part 3: Introduction to the Process API</a> </li><li>  <a href="https://habr.com/en/post/449026/">Part 4: Scheduler Introduction</a> </li></ul><br>  And you can also look to me on the channel in the <a href="https://t.me/bykvaadm">telegram</a> =) <br><a name="habracut"></a><br><h3>  Work program </h3><br>  What happens when a program works?  Running programs does one simple thing - it executes instructions.  Every second, millions and even possibly billions of instructions are retrieved by the processor from RAM, in turn, it decodes them (for example, recognizes what type, these instructions belong to) and executes.  This can be the addition of two numbers, memory access, test conditions, the transition to the function and so on.  After the end of the execution of one instruction, the processor proceeds to the execution of another.  And so the instruction for the instruction, they are executed until the program ends. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This example is naturally considered simplified - in fact, to speed up the processor, modern hardware allows you to execute instructions out of turn, calculate possible results, execute instructions at the same time and similar tricks. <br><br><h3>  Von Neuman model of computation </h3><br>  The simplified form of work described by us is similar to the Von Neumann model of computation.  <i>Von Neumann is one of the pioneers of computer systems, he is also one of the authors of game theory</i> .  While the program is running, a lot of other events occur, many other processes and third-party logic are running, the main purpose of which is to simplify the launch, operation and maintenance of the system. <br><br>  There is a set of software that is responsible for the ease of running programs (or even allowing several programs to run simultaneously), it allows programs to share the same memory, as well as interact with different devices.  This set of software (software) is in fact called the operating system and its task is to ensure that the system works correctly and efficiently, as well as ensure the simplicity of managing this system. <br><br><h2>  operating system </h2><br>  <b>An operating system, or OS for short, is a complex of interconnected programs designed to manage computer resources and organize user interaction with a computer</b> . <br><br>  The OS achieves its effectiveness primarily through the most important technique - the <b>virtualization</b> technique.  The OS interacts with a physical resource (processor, memory, disk, and the like) and transforms it into a more general, more capable and simpler form of use for itself.  Therefore, for a common understanding, you can very roughly compare the operating system with a virtual machine. <br><br>  In order to allow users to give commands to the operating system and thus use the capabilities of the virtual machine (such as running the program, allocating memory, accessing the file, and so on), the operating system provides some interface called the <b>API</b> (application programming interface) and to which you can make calls (call).  A typical operating system makes it possible to make hundreds of system calls. <br><br>  Finally, since virtualization allows multiple programs to work (thus sharing the CPU), and simultaneously access their instructions and data (thereby sharing memory), and also access the disks (thus sharing I / O devices) ), the operating system is also called the resource manager.  Each processor, disk, and memory is a system resource, and thus the task of managing these resources becomes one of the roles of the operating system, doing it efficiently, honestly or, on the contrary, depending on the task for which this operating system is designed. <br><br><h3>  CPU virtualization </h3><br>  Consider the following program: <br>  (https://www.youtube.com/watch?v=zDwT5fUcki4) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c56/c0b/c51/c56c0bc510a1eadcd7aa2bc34447408a.jpg" alt="image"><br><br>  It does not perform any special actions, in fact, all that it does is to call the <b>spin</b> () function, whose task is to cyclically check the time and return after one second has passed.  Thus, it repeats endlessly the string that the user passed as an argument. <br><br>  Run this program and pass the ‚ÄúA‚Äù symbol to it with the argument.  The result is not very interesting - the system simply executes the program, which periodically displays the symbol ‚ÄúA‚Äù. <br><br>  Now let's try the option when running multiple instances of the same program, but displaying different letters to make it clearer.  In this case, the result will be somewhat different.  Despite the fact that we have one processor, the program runs simultaneously.  How is that?  And it turns out that the operating system, not without the help of the capabilities of the equipment, creates an illusion.  The illusion that there are several virtual processors in the system, turning one physical processor into a theoretically infinite number and thus allowing the programs to run at the same time.  This illusion is called <i>CPU virtualization</i> . <br><br>  This picture gives rise to many questions, for example, if several programs want to start at the same time, which one will be launched?  The ‚Äúpolicies‚Äù of the OS are responsible for this question.  Politicians are used in many places of the OS and answer similar questions, as well as they are the basic mechanisms that the OS embodies.  Hence, the role of the OS as a resource manager. <br><br><h3>  Memory virtualization </h3><br>  Now let's look at memory.  <b>The physical model of memory in modern systems is represented as an array of bytes</b> .  To read from memory, you need to specify the <b>address of the cell</b> to access it.  To record or update data, you must also specify the data and the address of the cell where to write them. <br><br>  Memory access occurs constantly in the process of the program.  The program stores all its data structure in memory, and accesses it by executing various instructions.  The instructions, meanwhile, are also stored in the memory, so it is also accessed for every request to the next instruction. <br><br><h4>  Call malloc () </h4><br>  Consider the following program that allocates a memory area using the <b>malloc ()</b> call (https://youtu.be/jnlKRnoT1m0): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/97d/6d2/f1a/97d6d2f1aca175f6c43705062f63b6e6.jpg" alt="image"><br><br>  The program does several things.  First, allocates a certain amount of memory (line 7), then displays the address of the selected cell (line 9), writes zero to the first slot of the allocated memory.  Next, the program enters a loop in which it increments the value stored in memory at the address in the variable ‚Äúp‚Äù.  It also displays the process id of itself.  <b>The process identifier is unique for each running process</b> .  Having started several copies, we will come across an interesting result: In the first case, if you do nothing and just run several copies, then the addresses will be different.  But this does not fall under our theory!  True, because in modern distributions, memory randomization is enabled by default.  If you turn it off, we get the expected result - the memory addresses of two simultaneously running programs will be the same. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b2a/4cf/cc7/b2a4cfcc71c75ce77e3902f98afdf53d.jpg" alt="image"><br><br>  <b>The result is that two independent programs work with their own private address spaces, which in turn are displayed by the operating system in physical memory</b> .  Therefore, the use of memory addresses within one program will not affect the others in any way, and it seems to each program that it has its own piece of physical memory, which is entirely at its disposal.  The reality, however, is that physical memory is a shared resource managed by the operating system. <br><br><h3>  Consistency </h3><br>  Another important topic within operating systems is <b>consistency</b> .  This term is used when it comes to problems in the system that may arise when working with many things at the same time within the same program.  Consistency problems occur even in the operating system itself.  In the previous examples with memory and processor virtualization, we realized that the OS manages many things at the same time ‚Äî it starts the first process, then the second, and so on.  As it turned out, this behavior can lead to some problems.  For example, modern multi-threaded programs have such difficulties. <br><br>  Consider the following program: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ada/30a/3ef/ada30a3efbf4ac132b446c4805b98b92.jpg" alt="image"><br><br>  The program in the main function creates two threads using the <b>Pthread_create ()</b> call.  In this example, the stream can be thought of as a function running in the same memory space along with other functions, with the number of functions running simultaneously clearly more than one.  In this example, each thread starts and executes the <b>worker ()</b> function, <b>which in turn simply increments the variable,.</b> <br><br>  Let's run this program with an argument of 1000. As you might have guessed, the result should be 2000, since each thread incremented a variable 1000 times.  However, things are not so simple.  Let's try to run the program with the number of repetitions an order of magnitude more. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5e9/25e/15b/5e925e15bd79e998639af0fbe69dcaed.jpg" alt="image"><br><br>  By supplying a number to the input, for example, 100000, we expect to see the number 200000 at the output. However, by running the number 100000 several times, we will not only not see the correct answer, but we will get various incorrect answers.  The answer lies in the fact that to increase the number requires three operations - extracting the number from the memory, incrementing and then writing the number back.  Since all these instructions are not carried out atomically (all at the same time), such strange things can occur.  This problem is called programming <b>race condition</b> .  When unknown forces at an unknown time can affect the performance of any of your operations. </div><p>Source: <a href="https://habr.com/ru/post/446340/">https://habr.com/ru/post/446340/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../446330/index.html">Spaghetti Automatic Machines</a></li>
<li><a href="../446332/index.html">IBM System i (aka AS / 400) - How we did auto tests for green screen applications</a></li>
<li><a href="../446334/index.html">Thinking about IT careers and tips for beginners</a></li>
<li><a href="../446336/index.html">How to disable standard passwords and make everyone hate you</a></li>
<li><a href="../446338/index.html">SVG 3D: create, rotate and animate</a></li>
<li><a href="../446342/index.html">The Impact of Transparent Huge Pages on System Performance</a></li>
<li><a href="../446344/index.html">Building blocks distributed applications. Second approximation</a></li>
<li><a href="../446346/index.html">Develop applications for Android - as if to be (demonetized) by YouTube</a></li>
<li><a href="../446348/index.html">Simple JSON-RPC-like API for PHP</a></li>
<li><a href="../446350/index.html">What eventually killed AirPower</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Linux and newspaper layout (not for professionals)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Here you are, for example. You do think that everything ends after death, right? 

 ‚ÄúRight ...‚Äù several voices in the hall responded. [...] 

 - And t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Linux and newspaper layout (not for professionals)</h1><div class="post__text post__text-html js-mediator-article"><blockquote><p>  Here you are, for example.  You do think that everything ends after death, right? </p><p>  ‚ÄúRight ...‚Äù several voices in the hall responded.  [...] </p><p>  - And the current does not flow through the air.  Right? </p><p>  - Right‚Ä¶ </p><p>  - And without Windows or MacOS it is impossible to produce a prepress newspaper? </p></blockquote><br><p>  Wrong.  With the help of Linux you can, of course, do not everything, but much more than you think. </p><br><p>  Fifteen years ago, the advertising agency where I worked began to chuck the roasted rooster about unlicensed software.  The chief estimated the possibilities and decided that he would be able to carve out from the budget the sum for the purchase of five Windows + Office licenses, one 1C 7.7 and a couple of Corel Draw.  At the same time, 10 advertising managers should have worked on 1C, and Windows was absolutely necessary for designers. </p><br><p>  We had a good admin;  He also estimated the possibilities, consulted with colleagues and wondered: why specifically sales managers need Windows? </p><br><a name="habracut"></a><p>  With the help of a downgrade, he made a pair of dll files from a single Windows XP terminal server, installed 1C there, and installed Ubuntu on all the management machines with a single shortcut on the desktop - ‚ÄúConnect to server‚Äù.  Further, the idea of ‚Äã‚Äãthe chief began to move in the direction of ‚Äúwhy do we need computers in the office at all, if managers can connect to the terminal server right from home?‚Äù, There were great prospects ahead. </p><br><p>  And we would live happily ever after, but it was necessary to somehow still impose our advertising newspaper.  In Korela it was absolutely impossible to do this.  Adobe products categorically refused to buy products - and not only because of prices: this corporation snapped on all advertising enterprises of our city in bulk (preemptively sounded, according to the principle: if you do advertising, it means you have Photoshop stealing!) And we are polite invited to the prosecutor's office to show our licenses.  We showed the licenses, but Adobe was seriously offended and the prosecutor's office was assured that we never had any business with the products of this corporation and we are not going to have it. </p><br><p>  You could, of course, buy QuarkXpress or start developing Scribus.  But by this time we already had a certain data processing system, there was some level of automation.  A convenient storage system for advertising layouts, a ‚Äúcorrect‚Äù data structure describing layouts, led us to the following thought: why do we need a visual program for printing layout in general?  Advertizing layouts are after all just rectangles, arrange them in rows and columns on the newspaper page - naked mathematics.  Why is there a man with a mouse in his hand? </p><br><h3>  Data </h3><br><p>  In 1C, managers created a ‚ÄúAdvertising Layout‚Äù document, which, among other things, indicated: layout dimensions, a page in a newspaper and coordinates on a page.  It is clear that there could be a lot of collisions.  Which should have been resolved by the general manager. </p><br><p>  The situation was complicated by the characteristics of the final product - the newspaper: there must be a number of pages (pages), necessarily a multiple of four.  And for some printing machines - a multiple of eight. </p><br><p>  This means that the general manager must constantly monitor the amount of advertising and give feedback to clients in a timely manner.  If, for example, the material for the next issue has accumulated by 33 pages, part of the advertising layouts will have to be thrown out of this issue - transfer to the next or reduce the size, or even think of something, and manage to coordinate all this with the client before handing over the newspaper to the printing house ( and not to put customers before the fact after the release). </p><br><h3>  Visualization </h3><br><p>  To resolve a collision ‚Äî the overlay of two layouts ‚Äî the main manager must see this overlay.  You will say, the imposition of coordinates is easier and safer to detect programmatically.  The way it is.  But what does the program do with the problem found?  And a combined method appears: the program, having detected the overlay, ‚Äúdrops‚Äù the layout from the page and marks it in a special way, and the main manager already looks at all the ‚Äúdropped‚Äù layouts and decides what to do with them. </p><br><p>  He does this no longer in 1C, but on a web page, where all the thumbnails of the layouts are located exactly as on the corresponding newspaper page (but the list of ‚Äúdropped‚Äù layouts is somewhere on the side).  Therefore, in the following, we will call the main manager simply a ‚Äúlayout designer‚Äù. </p><br><p>  In order for the layouts to be displayed on the web page, the layout designer, before starting the layout, uploads the data from 1C and loads it into Mysql.  And then opens in the browser address <a href="http://localhost/verstka/">localhost / verstka</a> .  Or, say, in the summer, when the coder is constantly living in the country, an address like #http: //nasha-gazeta.ru/verstka/. </p><br><p>  On a web page layout, javascript using the technology drag-end-drop allows the layout maker to move the thumbnails of the layouts with both the mouse and keyboard arrows.  After any stopping of the layout, ajax writes new layout coordinates to Mysql.  After the end of the current layout, the layout designer uploads new data from Mysql and loads it back into 1C.  After that, managers working with clients can agree on the new state of the layouts.  And so several times around, until everyone is happy. </p><br><p>  In the end, everything is agreed, all layouts are placed;  we have completely made up the newspaper "virtually."  But what will we carry to the printing house? </p><br><h3>  Printing Layout </h3><br><p>  Typography needs a postscript or pdf file.  If you have ever worked in advertising, you know how a pdf file for a printing house is made: you click in the program like InDesign or Corel Draw on the File - Export menu, select the format you want and create a pdf file (postscript).  Or create the same file through the menu File - Print.  But what does this print file have inside? </p><br><p>  If a person places a number of layouts taken from the disk of his computer in a visual printing layout program, then, when exporting or printing, the program will also put all these source files with the necessary coordinates into a common postscript file.  That is, the final file is the files of separate layouts combined together, each of which is preceded by a pair of special commands in the postscript language indicating coordinates and some other details. </p><br><p> The postscript file is a plain text file with a set of data and instructions.  Approximately as an html file, only sizes are larger.  You can open this file in a text editor, find the instruction <code>150 250 moveto</code> , replace the number 250 by 300, and some element during printing will shift by 50. True, the question remains: will shift by 50 what and in what direction? </p><br><p>  There are several not quite familiar rules in postscript: everything is measured in points - such conventional units that are less than millimeters 2.8346456692913 times;  A point of reference coordinates is located in the lower left corner of the page (and not in the upper left, as you used to). </p><br><p>  That is, the command <code>150 250 moveto</code> , entered on a ‚Äúclean sheet‚Äù, means that we moved from the bottom left point of the page 53 mm to the right and 88 mm up. </p><br><p>  The following difficulty arises from the size of printing files: we cannot, of course, open and edit print files of 100 megabytes in a text editor ‚Äî that would be very inconvenient.  Fortunately, layouts can be put together on the same page, without putting the entire contents of the file into the text of the whole page, but using something like links ‚Äî specifying the paths to the files and the combination of the <strong>file</strong> , <strong>run</strong> and <strong>flush</strong> commands: </p><br><pre> <code class="hljs scala">%%    /<span class="hljs-type"><span class="hljs-type">PasteFile</span></span> { grestore gsave x1 y1 translate {/f1 f10 (r) file <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function">} </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stopped</span></span></span><span class="hljs-function"> </span></span>{} {f10 run} ifelse f10 = flush } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">%%</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">/f10</span></span></span><span class="hljs-function"> </span></span>(/home/verstka/shablon/fon_bw.eps) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">/x1</span></span></span><span class="hljs-function"> 7.7 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">/y1</span></span></span><span class="hljs-function"> 49 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PasteFile</span></span></span></span></code> </pre> <br><p>  Thus, we get almost a complete analogue of the html-file, which also usually contains links to images, and not the pictures themselves.  Unfortunately, this small postscript layout text file cannot be sent to the printing company, since the layout files associated with it are stored separately and during printing (and the font files, by the way, too) will not be accessible. </p><br><p>  At the last stage, you need to put everything together - embed the content of each layout in the page.  This can be done with the help of the wonderful Ghostscript program.  If you use the ps2pdf method, you can immediately get the final pdf for the print shop from our small file;  If the printer requires ps files, you can use the Ghostscript program to create a ‚Äúfull‚Äù postscript file using the ps2ps method. </p><br><p>  Our typography program was just a small php script on a web server.  She generated postscript text files with links to layout files, using information from a database describing the coordinates and sizes of the layouts.  She then called the Ghostscript interpreter and created files that were completely ready to be sent to the print shop.  If necessary, imposition was just as easy to create: small text files of separate strips were connected to each other with the addition of <code>rotate</code> and <code>translate</code> instructions. </p><br><h3>  Features of implementation </h3><br><p>  The described layout program seems to be quite able to work under Windows.  But a machine with a web server, where it all happened, had to be a <strong>file server</strong> , if necessary: ‚Äã‚Äãafter all, all the layout files that have access to a large number of people ‚Äî both designers and managers ‚Äî are stored together and stored ‚Äî for example, to copy ready layout received from the client, or vice versa, print the layout and send for approval. </p><br><p>  But Windows XP has one very unpleasant feature - a limit on the number of connections.  At one time it spoiled us a lot of blood.  In one case (with a terminal server) our admin solved this problem by hacking Windows XP, in the other (with a repository of advertising layouts) by installing Linux.  And in what case was there less risk for the enterprise? </p><br><p>  The main conclusion I made for myself is that a system administrator is absolutely necessary for a small enterprise.  It can be coming, it can be an outsourcing from some company, it does not matter.  The main thing that he was not afraid of Linux.  Then you will stop being afraid of him.  I've stopped.  I just wrote the same layout program in php and javascript.  Started on Windows.  But since the admin has transplanted me to Linux, I don‚Äôt want to hear about Windows anymore - so Linux has been convenient for me in all respects. </p><br><p>  The second conclusion is almost TRIZ: if you cannot solve the problem, divide it into parts and space them in space and time.  An advertising agency may well live without the highly specialized software of the Adobe Corporation, indicating in the rules for working with clients: layouts are accepted in eps format.  If you do not have a ready-made layout, we will stamp it with your own resources in Korela.  And for VIP clients, you can use the same outsourcing - entrust the production of layouts to third parties, cool designers. </p><br><p>  The third conclusion: Linux in a modern small enterprise does not survive because of objective reasons - not because it is too complicated or loses Windows, but because the office people are mostly lazy and curious.  People just do not want to learn something new.  And the shops helpfully slip the familiar ‚ÄúWindows‚Äù to them. </p><br><p>  Now in the company where I work, all the managers work with the client base and sales through the web - they do not depend on the operating system.  A car with 1C and a bank client stands alone in the corner - purely for an accountant.  But Linux is only on two old client machines.  Because when you buy a new computer, it already has Windows.  At the same time, everything is bogging down on its OS, but in different ways: if sitting on Linux cannot really show anything but vague anxiety that they are ‚Äúnot in the mainstream‚Äù, then Windows 10 lovers are cursing for a very specific reason: they cannot print files on the nearby HP 1100 printer. But nobody wants to change to Linux anyway. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/346530/">https://habr.com/ru/post/346530/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../346514/index.html">Nigerian stories of the Russian developer</a></li>
<li><a href="../346518/index.html">How much slower will your system after patches for Specter-Meltdown?</a></li>
<li><a href="../346520/index.html">Python, PHP, Golang, and DevOps knowledge tests: AvitoQuiz quiz analysis on Highload</a></li>
<li><a href="../346524/index.html">Meltdown and Specter for the cloud: our risk assessment and how we patched</a></li>
<li><a href="../346526/index.html">One is not a warrior in the field: advantages from working in a company on a remote</a></li>
<li><a href="../346532/index.html">Basics of lossy audio coding. Testing Opus 1.3 Beta</a></li>
<li><a href="../346534/index.html">10 years have passed, and no one has figured out how to use the blockchain</a></li>
<li><a href="../346536/index.html">Mobile devices from the inside. The image structure of partitions containing the file system. Part 2</a></li>
<li><a href="../346538/index.html">Animation in mobile applications. We test Kite compositor</a></li>
<li><a href="../346540/index.html">On the problems of determining the location of the subscriber when he calls 112</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
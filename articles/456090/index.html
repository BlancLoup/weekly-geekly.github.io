<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to unit testing in Unity</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Are you curious how unit testing works in Unity? Don't know what unit testing is in general? If you answered positively to these questions, then this ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to unit testing in Unity</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b63/9d9/71f/b639d971f3e2a10105d91bb3c94fdbb1.jpg" alt="image"></div><br>  Are you curious how unit testing works in Unity?  Don't know what unit testing is in general?  If you answered positively to these questions, then this tutorial will be useful to you.  From it you will learn about unit testing the following: <br><br><ul><li>  What it is </li><li>  Its benefits </li><li>  Advantages and disadvantages </li><li>  How it works in Unity when using Test Runner </li><li>  How to write and run unit tests that will be tested </li></ul><br><blockquote>  <em>Note</em> : this tutorial assumes that you are familiar with C # and the basics of developing in Unity.  If you are new to Unity, then <a href="https://www.raywenderlich.com/unity">first study the other tutorials on this engine</a> . </blockquote><h2>  What is a unit test? </h2><br>  Before delving into the code, it is important to get a clear understanding of what unit testing is.  Simply put, unit testing is testing ... units. <br><br>  <em>The unit test</em> (ideally) is intended for testing a separate unit of code.  The composition of a ‚Äúunit‚Äù may vary, but it is important to remember that unit testing must test exactly one ‚Äúelement‚Äù at a time. <br><a name="habracut"></a><br>  Unit tests need to be created to verify that a small logical fragment of code in a particular script runs exactly as you expect.  It can be difficult to understand before you start writing your own unit tests, so let's look at an example: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      You have written a method that allows the user to enter a name.  The method is written in such a way that numbers are not allowed in the name, and the name itself may consist of only ten or less characters.  Your method intercepts each keystroke and adds the corresponding character in the <code>name</code> field: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> name = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateNameWithCharacter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">: character</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 if (!Char.IsLetter(char)) { return; } // 2 if (name.Length &gt; 10) { return; } // 3 name += character; }</span></span></code> </pre> <br>  What's going on here: <br><br><ol><li>  If the character is not a letter, the code pre-exits the function and does not add the character to the string. </li><li>  If the name is ten or more characters long, the code does not allow the user to add another character. </li><li>  If these two checks are passed, the code adds a character to the end of the name. </li></ol><br>  This unit can be tested because it is a ‚Äúmodule‚Äù of the work being done.  Unit tests <i>enforce the</i> logic of the method. <br><br><h2>  Example of unit tests </h2><br>  How do we write unit tests for the <code>UpdateNameWithCharacter</code> method? <br><br>  Before we begin to implement these unit tests, you need to carefully consider what these tests do and come up with names for them. <br><br>  Look at the examples of unit test names shown below.  From the titles it should be clear that they check: <br><br> <code>UpdateNameDoesntAllowCharacterAddingToNameIfNameIsTenOrMoreCharactersInLength</code> <br> <br> <code>UpdateNameAllowsLettersToBeAddedToName</code> <br> <br> <code>UpdateNameDoesntAllowNonLettersToBeAddedToName</code> <br> <br>  From these test method names, we can see that we are really checking whether the unit is working with the <code>UpdateNameWithCharacter</code> method.  These test names may seem too long and detailed, but this is to our advantage. <br><br>  Each unit test you write is part of a test suite.  <em>The complex of tests</em> contains all unit tests related to the logical group of the functional (for example, ‚Äúunit tests of combat‚Äù).  If any test in the kit fails the test, then the entire test suite fails. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/20d/1e7/0ed/20d1e70ed7231be0c0cfd5f6f082751c.png"></div><br><h2>  Running game </h2><br>  Open the <em>Crashteroids Starter project</em> (you can download it <a href="">from here</a> ), and then open the <em>Game</em> scene from the <em>Assets / RW / Scenes</em> folder. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/029/6fd/316/0296fd31696c7e75eeea4ec626709277.jpg"></div><br>  Click on <em>Play</em> to launch Crashteroids, and then click on the <em>Start Game</em> button.  Move the spacecraft with the <em>left</em> and <em>right</em> arrows on the keyboard. <br><br>  To shoot a laser beam, press the <em>spacebar</em> .  If the beam hits an asteroid, the score will increase by one.  If the asteroid collides with the ship, the ship explodes and the game ends (with the ability to start over). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c2f/cea/c40/c2fceac408455035e41f3c9c268ff448.jpg"></div><br>  Try to play a little and make sure that after the asteroid collides with the ship, the inscription Game Over appears. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b5/55f/fa6/0b555ffa69f33fb09fb17204197af889.jpg"></div><br><h2>  Getting started with Unity Test Runner </h2><br>  Now that we know how the game is executed, it is time to write unit tests to check that everything works as it should.  Thus, if you (or someone else) decide to update the game, you will be sure that the update will not break anything that worked before. <br><br>  To write tests, you first need to learn about Unity Test Runner.  <em>Test Runner</em> allows you to perform tests and check whether they pass successfully.  To open the Unity Test Runner, select <em>Window ‚ñ∏ General ‚ñ∏ Test Runner</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f48/f31/aa4/f48f31aa4fc16c486b2161c75ba772af.jpg"></div><br>  After Test Runner opens in a new window, you can simplify your life by clicking on the Test Runner window and <em>dragging</em> it into place next to the Scene window. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e10/25b/408/e1025b408f785453827a962ce33aff67.gif"></div><br><h2>  Preparing NUnit and Test Folders </h2><br>  Test Runner is a unit-testing function provided by Unity, but it uses the <em>NUnit</em> framework.  When you start working with unit tests more seriously, I recommend learning the <a href="https://github.com/nunit/docs/wiki">NUnit wiki</a> to learn more.  About everything you need for the first time will be discussed in this article. <br><br>  To run the tests, we first need to create a test folder in which the test classes will be stored. <br><br>  In the <em>Project</em> window <em>,</em> select the <em>RW</em> folder.  Look at the <em>Test Runner</em> window and make sure <em>PlayMode is</em> selected. <br><br>  Click the button called <em>Create PlayMode Test Assembly Folder</em> .  You will see a new folder appear in the RW folder.  We are satisfied with the standard name <em>Tests</em> , so you can just press <em>Enter</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5f5/be4/df3/5f5be4df386c8f262c4a3c257b55319f.gif"></div><br>  You may be wondering what these two different tabs are inside the Test Runner. <br><br>  The <em>PlayMode</em> tab <em>is</em> used for tests performed in Play mode (when the game is running in real time).  The tests on the <em>EditMode</em> tab <em>are</em> performed outside of Play mode, which is useful for testing things like the user behaviors in the Inspector. <br><br>  In this tutorial we will look at PlayMode tests.  But when you get comfortable, you can try experimenting with testing in EditMode.  <em>When working with Test Runner in this tutorial, always check that the PlayMode tab is selected</em> . <br><br><h2>  What is in the test suite? </h2><br>  As we learned above, a unit test is a function that tests the behavior of a small specific code fragment.  Since a unit test is a method, it must be in a class file to run it. <br><br>  Test Runner bypasses all test class files and runs unit tests from them.  A class file containing unit tests is called a test suite. <br><br>  In the test suite, we logically subdivide our tests.  We must divide the test code into separate logical sets (for example, a test suite for physics and a separate battle kit).  In this tutorial, we need only one set of tests, and it is time to create it. <br><br><h2>  Preparation of the test assembly and test suite </h2><br>  Select the <em>Tests</em> folder and in the <em>Test Runner</em> window click on the <em>Create Test Script in current folder</em> button.  Name the new file <em>TestSuite</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c64/0ab/968/c640ab968dfd79a3c72e2a99bc5daa2c.gif"></div><br>  In addition to the new C # file, the Unity engine also creates another file called <em>Tests.asmdef</em> .  This is the <em>assembly definition file</em> , which is used to show Unity where the dependencies of the test file are located.  This is necessary because the code of the finished application is contained separately from the test code. <br><br>  If you have a situation where Unity cannot find test files or tests, then make sure that there is an assembly definition file in which your test suite is included.  The next step is to configure it. <br><br>  In order for the test code to have access to the classes of the game, we will create an assembly of the code of the classes and specify a link in the assembly Tests.  Click on the <em>Scripts</em> folder to select it.  Right-click on this folder and select <em>Create Assembly Definition</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b8/24c/84a/5b824c84ad6686493c41951751030b8d.jpg"></div><br>  Name the file <em>GameAssembly</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/21b/bd6/c96/21bbd6c968426c23ea7839dd9f747355.png"></div><br>  Click on the <em>Tests</em> folder, and then on the <em>Tests</em> assembly definition file.  In the <em>Inspector,</em> click on the <em>plus</em> button under the heading <em>Assembly Definition References</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4be/fc3/d13/4befc3d13ea67e5ec94b707d04582a3d.png"></div><br>  You will see the <em>Missing Reference</em> field.  Click the <em>dot</em> next to this field to open a selection window.  Select the <em>GameAssembly</em> file. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/727/990/57f/72799057fe5ff62ba5c997d5ec2a7563.jpg"></div><br>  You should see the GameAssembly assembly file in the links section.  Click the <em>Apply</em> button to save these changes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a16/bf5/259/a16bf525984f2f23b819d9b2d0e37a2b.png"></div><br>  If you do not follow these steps, you will not be able to reference the game class files inside the unit test files.  Having dealt with this, you can proceed to the code. <br><br><h2>  We write the first unit test </h2><br>  Double-click the <em>TestSuite</em> script to open it in the code editor.  Replace all the code with this: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.TestTools; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> NUnit.Framework; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TestSuite</span></span> { }</code> </pre> <br>  What tests do we need to write?  Honestly, even in such a tiny game like the Crashteroids, you can write quite a few tests to check that everything works as it should.  In this tutorial, we will limit ourselves to only key areas: collision recognition and basic game mechanics. <br><br><blockquote>  <em>Note</em> : when it comes to writing a production level product test, it‚Äôs worth taking enough time to consider all the boundary cases that need to be tested in all areas of the code. </blockquote><br>  As a first test, it would be nice to check if the asteroids really are moving down.  It will be difficult for them to encounter a ship if they move away from it!  Add the following method and private variable to the <em>TestSuite</em> script: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Game game; <span class="hljs-comment"><span class="hljs-comment">// 1 [UnityTest] public IEnumerator AsteroidsMoveDown() { // 2 GameObject gameGameObject = MonoBehaviour.Instantiate(Resources.Load&lt;GameObject&gt;("Prefabs/Game")); game = gameGameObject.GetComponent&lt;Game&gt;(); // 3 GameObject asteroid = game.GetSpawner().SpawnAsteroid(); // 4 float initialYPos = asteroid.transform.position.y; // 5 yield return new WaitForSeconds(0.1f); // 6 Assert.Less(asteroid.transform.position.y, initialYPos); // 7 Object.Destroy(game.gameObject); }</span></span></code> </pre> <br>  There are only a few lines of code, but they do a lot of things.  So let's stop and deal with each part: <br><br><ol><li>  This is <em>an attribute</em> .  Attributes define specific compiler behaviors.  This attribute tells the Unity compiler that the code is a unit test.  Because of this, it will appear in Test Runner when running tests. </li><li>  Create an instance of Game.  Everything else is embedded in the game, so when we create it, it will contain everything that needs to be tested.  In a production environment, most likely all the elements will not be inside the same prefab.  Therefore, you will need to recreate all the objects needed in the scene. </li><li>  Here we create an asteroid so that we can monitor whether it is moving.  The <code>SpawnAsteroid</code> method returns an instance of the created asteroid.  The Asteroid component has a <code>Move</code> method (if you are curious about how movement works, you can take a look at the <em>Asteroid</em> script inside <em>RW / Scripts</em> ). </li><li>  Tracking the original position is necessary to ensure that the asteroid is shifted down. </li><li>  All Unity unit tests are Corutin, so you need to add a soft return.  We also add a time step of 0.1 seconds to simulate the passage of time over which the asteroid should have moved down.  If you do not need to simulate a time step, you can return null. </li><li>  This is the stage of <em>approval (assertion)</em> , in which we assert that the position of the asteroid is less than the initial position (that is, it moved down).  Understanding assertions is an important part of unit testing, and NUnit provides various assertion methods.  Passing or failing a test is determined by this line. </li><li>  Of course, no one curses you for the mess left after the tests are completed, but other tests may fail because of it.  It is always important to clean up (delete or reset) the code after a unit test so that when you start the next unit test there are no artifacts that could affect this test.  We just need to delete the game object, because for each test we create a completely new game instance. </li></ol><br><h2>  Passing tests </h2><br>  Great, you wrote your first unit test, but how do you know if it works?  Of course, with the help of Test Runner!  In the Test Runner window, expand all the lines with arrows.  You should see the <code>AsteroidsMoveDown</code> test in the list with gray circles: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d4c/5d4/05a/d4c5d405a1aa5aded204806790a07233.jpg"></div><br>  A gray circle indicates that the test has not yet been performed.  If the test was started and passed, then a green arrow is displayed next to it.  If the test was completed with an error, then a red X will be displayed next to it. Run the test by pressing the <em>RunAll</em> button. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d45/da5/8c9/d45da58c99e0db679578aabab6e5601b.jpg"></div><br>  This will create a temporary scene and run the test.  Upon completion, you should see the test pass. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/640/16b/19e/64016b19e01a68544a1644b61ffb5c57.jpg"></div><br>  You have successfully written the first unit test, stating that the asteroids created are moving down. <br><br><blockquote>  <em>Note</em> : before you start writing your own unit tests, you need to understand the implementation you are testing.  If you are curious how the logic you are testing works, then examine the code in the <em>RW / Scripts</em> folder. </blockquote><br><h2>  Using integration tests </h2><br>  Before moving deeper into the rabbit hole of unit tests, it's time to tell you what integration tests are and how they differ from unit testing. <br><br>  <em>Integration tests</em> are tests that check how code ‚Äúmodules‚Äù work together.  ‚ÄúModule‚Äù is another fuzzy term.  An important difference is that the integration tests should test the operation of the software in this production (that is, when the player really plays the game). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f01/824/6f3/f018246f3658664a77104a1fa1dc045b.png"></div><br>  Let's say you made a fighting game where a player kills monsters.  You can create an integration test to make sure that when a player kills 100 enemies, an achievement is opened (‚Äúachivka‚Äù). <br><br>  This test will affect several code modules.  Most likely, it will be related to the physics engine (collision detection), enemy dispatchers (tracking the health of the enemy and handling damage, as well as moving to other related events) and the event tracker, tracking all triggered events (for example, ‚Äúmonster killed‚Äù).  Then, when it is time to unlock the achievement, he can call the achievement manager. <br><br>  The integration test will simulate a player who kills 100 monsters and see if an achievement is unlocked.  It is very different from the unit test, because it tests large components of the code that work together. <br><br>  In this tutorial, we will not study integration tests, but this should show the difference between the ‚Äúunit‚Äù of the work (and why it is being unit-tested) and the ‚Äúmodule‚Äù of the code (and why it is being tested integrationally). <br><br><h2>  Adding test to test suite </h2><br>  The next test will test the end of the game when the ship collides with an asteroid.  After opening <em>TestSuite</em> in the code <em>editor</em> , add the test shown below under the first unit test and save the file: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">UnityTest</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameOverOccursOnAsteroidCollision</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameObject gameGameObject = MonoBehaviour.Instantiate(Resources.Load&lt;GameObject&gt;(<span class="hljs-string"><span class="hljs-string">"Prefabs/Game"</span></span>)); Game game = gameGameObject.GetComponent&lt;Game&gt;(); GameObject asteroid = game.GetSpawner().SpawnAsteroid(); <span class="hljs-comment"><span class="hljs-comment">//1 asteroid.transform.position = game.GetShip().transform.position; //2 yield return new WaitForSeconds(0.1f); //3 Assert.True(game.isGameOver); Object.Destroy(game.gameObject); }</span></span></code> </pre> <br>  We have already seen most of this code in the previous test, but there are some differences: <br><br><ol><li>  We are forcing the asteroid and the ship to collide, clearly setting the asteroid with the same position as the ship.  This will create a collision of their hitboxes and lead to the end of the game.  If you're curious how this code works, then take a look at the <em>Ship</em> , <em>Game</em> , and <em>Asteroid</em> files in the Scripts folder. </li><li>  The time step is needed for the physics engine's Collision event to fire, so a delay of 0.1 seconds is returned. </li><li>  This is a statement of truth, and it checks that the <code>gameOver</code> flag in the Game script is true.  The flag takes the value true while the game is running, when the ship is destroyed, that is, we test to make sure that it is set to true after the ship is destroyed. </li></ol><br>  Return to the Test Runner window and you will see that a new unit test has appeared there. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a8/f52/b28/4a8f52b2875ca90a37b74348435e3da5.jpg"></div><br>  This time we will run only this one instead of the entire test suite.  Click on <em>GameOverOccursOnAsteroidCollision</em> , and then on the <em>Run Selected</em> button. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7e2/0f5/fbd/7e20f5fbd8b4a8a6ff849fea66c90ed1.jpg"></div><br>  And voila, we passed another test. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/966/02f/869/96602f869c59d8218407a7ce2e57df7d.jpg"></div><br><h2>  Stages of customization and destruction </h2><br>  You may have noticed that in our two tests there is a repeating code: where the Game object is created and where the link to the Game script is specified: <br><br><pre> <code class="cs hljs">GameObject gameGameObject = MonoBehaviour.Instantiate(Resources.Load&lt;GameObject&gt;(<span class="hljs-string"><span class="hljs-string">"Prefabs/Game"</span></span>)); game = gameGameObject.GetComponent&lt;Game&gt;();</code> </pre> <br>  You will also notice that the replay is in the destruction of the Game game object: <br><br><pre> <code class="cs hljs">Object.Destroy(game.gameObject);</code> </pre> <br>  When testing this happens very often.  When it comes to running unit tests, there are actually two stages: the <em>‚Äúsetup‚Äù (Setup)</em> phase and the <em>‚ÄúTear Down‚Äù</em> phase. <br><br>  All code inside the Setup method will be executed before the unit test (in this bundle), and all code inside the Tear Down method will be executed after the unit test (in this bundle). <br><br>  It is time to simplify our lives by moving the setup and tear down code into special methods.  Open the code editor and add the following code to the beginning of the <em>TestSuite</em> file, right before the first [UnityTest] attribute: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">SetUp</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Setup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameObject gameGameObject = MonoBehaviour.Instantiate(Resources.Load&lt;GameObject&gt;(<span class="hljs-string"><span class="hljs-string">"Prefabs/Game"</span></span>)); game = gameGameObject.GetComponent&lt;Game&gt;(); }</code> </pre> <br>  The <code>SetUp</code> attribute indicates that this method is called before each test <code>SetUp</code> . <br><br>  Then add the following method and save the file: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">TearDown</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Teardown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Object.Destroy(game.gameObject); }</code> </pre> <br>  The <code>TearDown</code> attribute indicates that this method is called after the execution of each test. <br><br>  Having prepared the code for tuning and destruction, we will remove the lines of code present in these methods and replace them with calls to the corresponding methods.  After that the code will look like this: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TestSuite</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Game game; [SetUp] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Setup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameObject gameGameObject = MonoBehaviour.Instantiate(Resources.Load&lt;GameObject&gt;(<span class="hljs-string"><span class="hljs-string">"Prefabs/Game"</span></span>)); game = gameGameObject.GetComponent&lt;Game&gt;(); } [TearDown] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Teardown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Object.Destroy(game.gameObject); } [UnityTest] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AsteroidsMoveDown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameObject asteroid = game.GetSpawner().SpawnAsteroid(); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> initialYPos = asteroid.transform.position.y; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> return new </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForSeconds</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.1f</span></span></span></span></span><span class="hljs-function">)</span></span>; Assert.Less(asteroid.transform.position.y, initialYPos); } [UnityTest] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameOverOccursOnAsteroidCollision</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameObject asteroid = game.GetSpawner().SpawnAsteroid(); asteroid.transform.position = game.GetShip().transform.position; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> return new </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForSeconds</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.1f</span></span></span></span></span><span class="hljs-function">)</span></span>; Assert.True(game.isGameOver); } }</code> </pre> <br><h2>  Test Game Over and Laser Shooting </h2><br>  Having prepared the methods of adjustment and destruction that simplify our life, we can proceed to adding new tests in which they are used.  The following test should verify that when a player clicks the <em>New Game</em> , the <em>gameOver bool</em> value is not true.  Add such a test to the end of the file and save it: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">UnityTest</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NewGameRestartsGame</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//1 game.isGameOver = true; game.NewGame(); //2 Assert.False(game.isGameOver); yield return null; }</span></span></code> </pre> <br>  This should seem familiar to you, but it is worth mentioning the following: <br><br><ol><li>  This piece of code prepares this test to ensure that the boolean <code>gameOver</code> flag must be true.  When calling the <code>NewGame</code> method, it must set the flag to <code>false</code> again. </li><li>  Here we claim that bool <code>isGameOver</code> is <code>false</code> , which should be true when calling a new game. </li></ol><br>  Go back to the Test Runner and you should see that there is a new test <em>NewGameRestartsGame</em> .  Run this test, as we did before, and you will see that it is successfully executed: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b63/9d9/71f/b639d971f3e2a10105d91bb3c94fdbb1.jpg"></div><br><h2>  The statement about the movement of the laser beam </h2><br>  The next test you need to add is a test of the laser beam being fired by the ship flying upwards (similar to the first unit test we wrote).  Open the <em>TestSuite</em> file in the editor.  Add the following method and save the file: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">UnityTest</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LaserMovesUp</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 GameObject laser = game.GetShip().SpawnLaser(); // 2 float initialYPos = laser.transform.position.y; yield return new WaitForSeconds(0.1f); // 3 Assert.Greater(laser.transform.position.y, initialYPos); }</span></span></code> </pre> <br>  This is what this code does: <br><br><ol><li>  Receives a link to the created laser beam emitted from the ship. </li><li>  The starting position is recorded so that we can check that it is moving up. </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This statement corresponds to the statement from the unit test </font></font><code>AsteroidsMoveDown</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, only now we claim that the value is greater (that is, the laser moves up).</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Save the file and return to Test Runner. </font><font style="vertical-align: inherit;">Run the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LaserMovesUp</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> test </font><font style="vertical-align: inherit;">and watch it pass:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ce/a15/242/2cea152426f82ea491345ead3f0eaa94.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now you should begin to understand how everything works, so it‚Äôs time to add the last two tests and complete the tutorial. </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Check that the laser destroys asteroids </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Further we will be convinced that at hit the laser destroys an asteroid. </font><font style="vertical-align: inherit;">Open the editor and add the </font><font style="vertical-align: inherit;">following test </font><font style="vertical-align: inherit;">to the end of </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TestSuite</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and then save the file:</font></font><br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">UnityTest</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LaserDestroysAsteroid</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 GameObject asteroid = game.GetSpawner().SpawnAsteroid(); asteroid.transform.position = Vector3.zero; GameObject laser = game.GetShip().SpawnLaser(); laser.transform.position = Vector3.zero; yield return new WaitForSeconds(0.1f); // 2 UnityEngine.Assertions.Assert.IsNull(asteroid); }</span></span></code> </pre> <br>  Here's how it works: <br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We create an asteroid and a laser beam, and assign them the same position to trigger a collision. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is a special test with an important difference. </font><font style="vertical-align: inherit;">See that we explicitly use </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UnityEngine.Assertions</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for this test </font><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">This is because Unity has a special </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Null</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> class </font><font style="vertical-align: inherit;">that is different from the ‚Äúregular‚Äù Null class. </font><font style="vertical-align: inherit;">NUnit framework approval </font></font><code>Assert.IsNull()</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will not work</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in Unity checks to null. </font><font style="vertical-align: inherit;">When checking for null in Unity, you need to explicitly use UnityEngine.Assertions.Assert, and not Assert from NUnit.</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Return to the Test Runner and launch a new test. </font><font style="vertical-align: inherit;">You will see a green icon pleasing us.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/275/80f/1b2/27580f1b206647e0a2fd09c43577ee8f.jpg"></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Test or not test - that is the question </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deciding to stick with unit tests is not an easy decision, and should not be taken lightly. However, the benefits of tests are worth the effort. There is even a development methodology, called </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test-driven development</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Test Driven Development, TDD). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Working as part of TDD, you write tests before writing the application logic itself. First, you create tests, make sure that the program does not pass them, and then write only the code intended for passing the tests. It‚Äôs a very different approach to coding, but it guarantees that you are writing code in a testable manner. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keep this in mind when you start working on the next project. But for now, it's time to write your own unit tests, for which you need a game, which we have given you.</font></font><br><br><blockquote> <em></em> :    ‚Äî    ,    .   ,           .    ¬´¬ª ,   ,      .   ,             .        ,        .       ,     ,            . </blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Testing can be a great investment, so it‚Äôs worth considering the advantages and disadvantages of adding unit testing to your project: </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Advantages of unit testing </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Unit testing has many important advantages, including the following: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It gives confidence that the method behaves as expected. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It serves as documentation for new people studying the code base (unit tests are great for teaching). </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Makes you write code in a testable way. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Allows you to isolate and fix errors faster. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Does not allow future updates to add new bugs to the old working code (they are called regression errors). </font></font></li></ul><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lack of unit testing </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">However, you may not have the time or budget for unit testing. </font><font style="vertical-align: inherit;">Here are its shortcomings that need to be taken into account:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Writing tests may take longer than the code itself. </font></font></li><li>       . </li><li>      . </li><li> ,        . </li><li>         ,    -. </li><li>     (       ),       . </li><li> -    . </li><li> UI  . </li><li>           . </li><li>              . </li></ul><br><h2>  ,       </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is time to write the last test. </font><font style="vertical-align: inherit;">Open the code editor, add the code shown below to the end of the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TestSuite</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file </font><font style="vertical-align: inherit;">and save it:</font></font><br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">UnityTest</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DestroyedAsteroidRaisesScore</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 GameObject asteroid = game.GetSpawner().SpawnAsteroid(); asteroid.transform.position = Vector3.zero; GameObject laser = game.GetShip().SpawnLaser(); laser.transform.position = Vector3.zero; yield return new WaitForSeconds(0.1f); // 2 Assert.AreEqual(game.score, 1); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is an important test, verifying that when a player destroys an asteroid, the score increases. </font><font style="vertical-align: inherit;">This is what it consists of:</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We create an asteroid and a laser beam, and put them in one position. </font><font style="vertical-align: inherit;">Due to this, there is a collision that triggers an increase in the account.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The statement that game.score is now equal to 1 (and not 0, as it was at the beginning). </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Save the code and go back to Test Runner to run this last test and see if the game is running: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e5d/d4c/0ee/e5dd4c0ee4ad72e21a180621c65c11ba.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Awesome! </font><font style="vertical-align: inherit;">All tests passed.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Where to go next? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the article we reviewed a large amount of information. </font><font style="vertical-align: inherit;">If you want to compare your work with the final project, then look at it in the </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">archive</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the link to which is also indicated at the beginning of the article. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">From this tutorial, you learned what unit tests are and how to write them in Unity. </font><font style="vertical-align: inherit;">In addition, you wrote six unit tests that successfully passed the code, and met some of the advantages and disadvantages of unit testing. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feeling confident? </font><font style="vertical-align: inherit;">Then you can write many more tests. </font><font style="vertical-align: inherit;">Examine the game class files and try to write unit tests for other parts of the code. </font><font style="vertical-align: inherit;">Consider adding tests for the following scenarios:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Each type of asteroid at the touch of a ship leads to the end of the game. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Running a new game clears the score. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Movement left and right for the ship is working properly. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you want to increase your level of knowledge about unit testing, then it is worth exploring </font></font><a href="https://en.wikipedia.org/wiki/Dependency_injection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dependency injection</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://en.wikipedia.org/wiki/Mock_object"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">frameworks for working with mock objects</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">This can greatly simplify test setup. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Also read the </font></font><a href="https://github.com/nunit/docs/wiki/NUnit-Documentation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUnit documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to learn more about the NUnit framework. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And feel free to share your thoughts and questions on the forums. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Successful testing!</font></font></div><p>Source: <a href="https://habr.com/ru/post/456090/">https://habr.com/ru/post/456090/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../456078/index.html">Projection of corporate conflict on network connectivity</a></li>
<li><a href="../45608/index.html">Sparko</a></li>
<li><a href="../456080/index.html">Which student needs a magician and which AI do we need?</a></li>
<li><a href="../456086/index.html">iOS Storyboards: analysis of the pros and cons, best practices</a></li>
<li><a href="../456088/index.html">Big Data Analysis Problems</a></li>
<li><a href="../456094/index.html">Read datasheets 2: SPI on STM32; PWM, timers and interrupts on STM8</a></li>
<li><a href="../456096/index.html">What does the average reader Geektimes, soaring in the clouds</a></li>
<li><a href="../456098/index.html">Russian ICT as the foundation of national information security</a></li>
<li><a href="../4561/index.html">Internet Explorer 7 caused a wave of criticism in the blogosphere</a></li>
<li><a href="../456100/index.html">Now in the new package - Kingston A400 in M.2 format hurries to the market</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
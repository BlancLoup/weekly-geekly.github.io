<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Graphics Station Virtualization on Parallels Workstation Extreme</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have already described in the article "Consolidation of CAD-systems" a solution that allows you to work remotely on a professional graphics station ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Graphics Station Virtualization on Parallels Workstation Extreme</h1><div class="post__text post__text-html js-mediator-article">  I have already described in the article <a href="http://habrahabr.ru/company/depocomputers/blog/131078/">"Consolidation of CAD-systems" a</a> solution that allows you to work remotely on a professional graphics station via PCoIP.  But this technology allows for a 1: 1 connection, i.e.  one user works remotely on one physical graphic station.  Such an implementation fits a narrow range of tasks and does not allow several users to simultaneously use the hardware resources of the graphics station.  In order to provide multi-user access to a single hardware platform, you must resort to virtualization. <img src="https://habrastorage.org/getpro/habr/post_images/d41/55e/7a7/d4155e7a7a156ce3a684af405b4c05b9.jpg" align="left"><br>  Today there are several products that allow you to use the resources of a 3D video adapter in a virtual machine.  Some of the most popular solutions are Microsoft RemoteFX, Citrix HDX 3D Professional Graphics, VMware View, and Parallels Workstation Extreme. <br>  Engineers DEPO Computers for many months conduct research and testing of these technologies, optimize the settings, modify the configuration.  The main task is virtualization with efficient use of a physical graphics processor in a virtual machine for working in heavy CAD applications.  There are two main difficulties in implementing such a solution: the ability of the virtual machine to use the maximum functionality of a 3D video card, and the ability of the data transfer protocol to provide maximum quality and performance.  I plan to devote separate articles to the RemoteFX and HDX 3D Pro technologies. <br>  Parallels Workstation Extreme solution, unlike other examples, supports PC-ip card with hardware compression of the stream transmitted over the network.  In this regard, it is able to provide the best performance results. <br><a name="habracut"></a><br>  For testing, I chose a configuration for virtualizing three graphics stations on a single hardware platform.  The model range of professional graphics stations DEPO Race found a suitable solution - this is the <a href="http://bit.ly/s3jmNt">G790R</a> model with support for up to 4 full-sized NVIDIA Quadro or Tesla cards.  I installed 3 Quadro 4000 video cards and 3 Teradici host cards for hardware compression in a workstation.  For the rest of the parameters, the system includes 2 Intel Xeon E5620 processors, 48GB ECC Reg Memory and two arrays: RAID1 from 2x2TB SATA disks for local OS, and RAID5 from 4x2TB SATA disks for virtual machines. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b2d/aae/da6/b2daaeda6ea593b16a11f2d2c783418f.jpg"><br><br>  First of all, I downloaded a trial version of <a href="http://www.parallels.com/r/pdfs/pwe/PCoIP_Solution_Brief.PDF">Parallels Workstation 6 Extreme</a> from the <a href="http://www.parallels.com/ru/products/extreme/audience/remote-working/">Parallels.com</a> website and installed it on the graphics station.  The software has a convenient and intuitive interface.  When creating a virtual machine, we allocate for it the necessary number of threads (in our case, 4, because we have 2x4-core processors in the system and 16 threads - 4 goes to the local and 4 to each virtual machine).  We also allocate RAM and disk space.  After creating one virtual machine, you need to install an OS on it and make two more clones. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/d03/bb2/263/d03bb2263e8f7a9b65d8e7d97bf8569e.jpg"><br><br>  After installing the OS you need to make a more detailed setting.  For each workstation device, it is necessary to determine the membership.  Those.  choose what it refers to - a host or virtual server.  To do this, all Quadro 4000, host cards, network and sound controllers are transferred to the ‚ÄúVirtual Machines‚Äù status, and everything that does not need to be forwarded to the virtual environment remains ‚ÄúHost Computer‚Äù status. <br><br><img src="https://habrastorage.org/storage2/131/ae4/451/131ae4451dae527466a895c3c968f98a.jpg"><br><br>  Then you need to make the distribution of resources between the virtual machines.  Each virtual machine is assigned its own video adapter, a network and sound controller, a physical or logical disk (or a dedicated area), a PCoIP controller, which will provide the connection between the virtual machine and the portal. <br><br><img src="https://habrastorage.org/storage2/5ee/db5/25d/5eedb525d20c0c2371fca654f022cf8c.jpg"><br><br><img src="https://habrastorage.org/storage2/215/c7a/971/215c7a971b4e43076f1830a2656232d1.jpg"><br><br><img src="https://habrastorage.org/storage2/e46/c29/795/e46c29795ae115f7ba47c9d767aefd62.jpg"><br><br><img src="https://habrastorage.org/storage2/16e/ed3/ad8/16eed3ad82a831935a171cf39f031024.jpg"><br><br><img src="https://habrastorage.org/storage2/52c/5cd/fae/52c5cdfae81dff62f457d34197da55b3.jpg"><br><br>  This is followed by some administration settings and a full-featured graphic station with a professional 3D video adapter at our disposal! <br><br><img src="https://habrastorage.org/storage2/ff6/c29/c47/ff6c29c47e3691e5a65363bd4c6f94cc.jpg"><br><br>  Since it was planned to create an environment for CAD applications, it was decided to test how much the performance of the Quadro 4000 in a virtual environment would decrease?  Testing was carried out using the SPEC synthetic package. <br><img src="https://habrastorage.org/storage2/9ae/5ca/c5b/9ae5cac5bd8c8537f8feecfbefdfd09a.jpg"><br><br>  The results clarified the situation: in some applications, productivity turned out to be at the level of performance in local work, while in others there was a decrease (in some places to the level of Quadro 2000).  I was very pleased with this result, because  I got the first working solution for virtualization not whimsical to the software, convenient and easy to set up and provide adequate performance. <br><br>  Based on this technology, a solution for <a href="http://bit.ly/zn1BGi">optimizing CAD-systems has been built</a> . </div><p>Source: <a href="https://habr.com/ru/post/134979/">https://habr.com/ru/post/134979/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../134969/index.html">Solaris 11 kernel source</a></li>
<li><a href="../134972/index.html">Automating the processing of citizens in the E1 system of the Euphrates - as we did</a></li>
<li><a href="../134973/index.html">Connecting the HP LJ 1010/1015/1018/1020 printer in Linux Debian (Ubuntu) with CUPS 1.4 and higher</a></li>
<li><a href="../134974/index.html">Installing Redis + Redis PHP + phpRedisAdmin on the production server in 15 minutes</a></li>
<li><a href="../134977/index.html">Customer is always right</a></li>
<li><a href="../134981/index.html">Inclusion of a shared address book in Zimbra</a></li>
<li><a href="../134982/index.html">Storing passwords in Chrome</a></li>
<li><a href="../134985/index.html">We use home Internet MTS</a></li>
<li><a href="../134987/index.html">uWSGI includes full PHP support.</a></li>
<li><a href="../134989/index.html">Sketch - 100 seconds about SmartTV</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Gem ice_cube for recurring events</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In some projects it is required to allow the user to set up rules for recurring events. Sometimes the rules of events can be quite complicated, for ex...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Gem ice_cube for recurring events</h1><div class="post__text post__text-html js-mediator-article">  In some projects it is required to allow the user to set up rules for recurring events.  Sometimes the rules of events can be quite complicated, for example, ‚Äúevery penultimate day of a month‚Äù or ‚Äúevery second Friday of a month before a certain date‚Äú.  To solve such problems, you can successfully use <a href="http://seejohnrun.github.com/ice_cube/">gem ice_cube</a> . <br><a name="habracut"></a><br>  Gem ice_cube allows you to set rules for recurring events using an iCalendar-like API and serialize / deserialize schedules in YAML and Ruby Hash formats.  Ice_cube allows you to store only one schedule, and not immediately generate hundreds of events on before.  We chose ice_cube because of the convenient and flexible API, constant updates and bug fixes, popularity among other developers. <br><br>  Installation gem: <br><br><pre><code class="bash hljs">gem install ice_cube</code> </pre> <br>  To create a schedule, you need to use the IceCube :: Schedule class: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'rubygems'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'ice_cube'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">include</span></span> IceCube <span class="hljs-comment"><span class="hljs-comment"># : # - /   # { # :duration =&gt; 3600 -    # :end_time =&gt; Time.now + 3600 -   # } schedule = Schedule.new(Date.today) #   schedule.add_recurrence_time(Date.today) #   schedule.add_exception_time(Date.today + 1)</span></span></code> </pre><br>  To create recurrence rules, use the IceCube :: Rule class.  Ice_ube supports the rules for daily, weekly, monthly, annual, hourly, every minute and every second repetitions.  Some examples of use (a more complete list of examples can be found on the project page): <br><br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment">#  4-  schedule.add_recurrence_rule Rule.daily(4) #   ,     schedule.add_recurrence_rule Rule.weekly(2).day(:monday, :friday) #  10, 20 ,      schedule.add_recurrence_rule Rule.monthly.day_of_month(10, 20, -1) #  ,       schedule.add_recurrence_rule Rule.monthly.day_of_week( :monday =&gt; [1], :tuesday =&gt; [-1] ) #  ,  50    100    schedule.add_recurrence_rule Rule.yearly.day_of_year(50, -100)</span></span></code> </pre><br>  Several rules can be combined in one schedule, including exclusive rules: <br><br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment">#  4-  /     schedule.add_recurrence_rule Rule.daily(4) schedule.add_exception_rule Rule.weekly.day(1, 5)</span></span></code> </pre><br>  For rules, you can set limits on the number of repetitions and up to a certain date: <br><br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment">#  2- ,   schedule.add_recurrence_rule Rule.daily(2).count(10) #  2- ,    schedule.add_recurrence_rule Rule.daily(2).until(Date.today.next_month - Date.today.day)</span></span></code> </pre><br>  Now, perhaps the most interesting is the schedule requests: <br><br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment">#    schedule.all_occurrences #       schedule.occurrences((Date.today + 5).to_time) #     schedule.occurs_at?(Time.now) #     schedule.occurs_on?(Date.today) #     schedule.occurs_between?(Time.now, (Date.today + 5).to_time) #    schedule.first schedule.first(3) #    schedule.next_occurrence #  3   schedule.next_occurrences(3) #    schedule.remaining_occurrences</span></span></code> </pre><br>  Serialization of data in YAML / HASH / iCal formats: <br><br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># YAML yaml = schedule.to_yaml Schedule.from_yaml(yaml) # Hash hash = schedule.to_hash Schedule.from_hash(hash) # iCalendar schedule.to_ical</span></span></code> </pre><br>  We use gem ice_cube to implement a calendar of recurring events along with FullCalendar and DelayedJob, an example of use can be found on <a href="http://demo.inexfinance.com/main/events/calendar">this page</a> . <br><br>  Some examples for this article are taken from official documentation.  If you have questions or comments, I will be glad to answer them. <br><br>  References: <br>  <a href="http://github.com/seejohnrun/ice_cube">github.com/seejohnrun/ice_cube</a> - project page on GitHub. <br>  <a href="http://seejohnrun.github.com/ice_cube/static/ice_cube_ruby_nyc.pdf">seejohnrun.github.com/ice_cube/static/ice_cube_ruby_nyc.pdf</a> - presentation ice_cube. <br>  <a href="http://seejohnrun.github.com/ice_cube/static/lsrc_ice_cube.pdf">seejohnrun.github.com/ice_cube/static/lsrc_ice_cube.pdf</a> - another presentation. <br>  <a href="https://www.inexfinance.com/en/blog/2012/12/2/gem_ice_cube">www.inexfinance.com/en/blog/2012/12/2/gem_ice_cube</a> - English version of this article. <br>  <a href="https://github.com/inex-finance/blog-examples">github.com/inex-finance/blog-examples</a> are examples from this article. </div><p>Source: <a href="https://habr.com/ru/post/161123/">https://habr.com/ru/post/161123/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../161111/index.html">Smart Object in Photoshop - will help both layout designers and designers</a></li>
<li><a href="../161113/index.html">Review of Denn computer mice from the Black Fox line</a></li>
<li><a href="../161115/index.html">Trailer + Website + Promotion Strategy</a></li>
<li><a href="../161117/index.html">GEEK WEEK # 3 | GAME VIDEO DIGEST</a></li>
<li><a href="../161119/index.html">Overview of startup projects over the past week in Asia</a></li>
<li><a href="../161125/index.html">Heated flash memory up to 800 ¬∞ C</a></li>
<li><a href="../161127/index.html">There is a third-party website for viewing Windows Store applications for Windows 8</a></li>
<li><a href="../161129/index.html">Self-made external antenna for CDMA2000 / EVDO standard (Intertelecom, PeopleNet operators)</a></li>
<li><a href="../161135/index.html">How to please the investor (and not only). 10 errors in the presentation of the project</a></li>
<li><a href="../161139/index.html">Conference High Performance Conference 3.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
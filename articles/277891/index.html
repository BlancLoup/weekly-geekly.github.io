<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we transported the data center of a western company to the Russian Federation due to the law on personal data</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For foreign companies, the story of the IT infrastructure is very simple: as they grew up in the West, this is how everything remained. In Russia, as ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we transported the data center of a western company to the Russian Federation due to the law on personal data</h1><div class="post__text post__text-html js-mediator-article">  For foreign companies, the story of the IT infrastructure is very simple: as they grew up in the West, this is how everything remained.  In Russia, as a rule, there are not even engineers, and all services are provided from anywhere in Ireland, Frankfurt, Boston or other cities where the parent organization and its data centers are located. <br><br>  Dramatically, the situation changed after the entry into force of the amendments to FZ-152, stating that the personal data of Russian citizens need to be recorded, systematized, stored and processed using databases that are exclusively in our country.  Some companies have decided to raise data centers in Moscow in order not to lose business.  In our case, it turned out like this (some components and names have been changed, since there is a non-disclosure agreement - foreigners are what you want): <br><br><img src="https://habrastorage.org/files/8b4/296/657/8b42966578144f868e291d0a63dac8f1.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The difficulties of the sea, for example, are: <br><ul><li>  The complete lack of IT staff in the Russian office, which deals with the migration of systems and the management of the entire project as a whole - you need to communicate with networkers from Europe or the USA and developers, for example, from Shanghai. </li><li>  It is not enough to raise the proxy structure - you really need to process the data in Russia.  And, then, in Moscow (or in another city, but, as a rule, the action takes place in the capital), an instance of CMS, mail, application software for working with sales, accounting, and so on should be deployed. </li><li>  It is necessary to transport all this quickly and without significant downtime, and then also support it in terms of infrastructure (the butt in this case is supported by ‚Äúnative‚Äù IT teams). </li></ul><a name="habracut"></a><br><br><h4>  Formulation of the problem </h4><br>  <b>Firstly, it was quite difficult to form an exact technical project.</b>  And generally understand what and how to do it.  The specifics are very simple - in Russia there is an office that does business, and not IT.  And if for us CMS, ERP, workflow and mail server are different things, then from the point of view of the manager it is the same system.  Therefore, the Russian representative of the company acted solely as a legal entity with whom the contract was signed.  Absolutely all negotiations took place with foreign colleagues.  Even the contract was in two languages.  At the beginning, their specialists came on an excursion to our data centers: their IT vice as guests, our tops as guides. <br><br>  <b>Secondly, geography.</b>  The site and administrators in one time zone, the developers in another, we - in the third.  There was no language barrier, fortunately, the entire IT world speaks English, and even with the Chinese, there was no misunderstanding. <br><br>  Thirdly, it was necessary to understand what is PD in their information exchange, that is, to connect lawyers.  As a result, lawyers concluded that the PD for this company is any data by which a person can be identified.  The storage and processing of full names, photos, various indirect signs of the type of place of employment with indication of the position, addresses of accounts in social networks got there.  At the same time, Twitter addresses with nicknames are not PD.  By the way, we <a href="https://habrahabr.ru/company/croc/blog/256217/">conducted a</a> small educational program not so long ago. <br><br>  It is very good that we had a lot of initial data.  The story about the move is this: the less input you have - the more expensive the solution.  You are laying the most expensive product that can do everything, the most expensive licenses - but you can not win the competition, because the customer will not like the price.  We spent our time - showed that we can figure it out.  And it turned out much cheaper for the customer. <br>  As a result, the primary transfer tasks and the secondary certification certification were formed.  The story is that the regulator will first look at companies with foreign origins - where their data is.  If abroad - blocking can be done much faster than moving systems.  And the second question that requires a deeper thoughtful digging is the certification of system elements.  In our practice, no one resolves these issues at once.  First moving, then checking everything on the ground, then the rest.  These are two different projects. <br><br>  Part A - moving - took six months from the first contact. <br><br><h4>  Stages </h4><br>  First, we provided a test zone of several virtual machines, for which the customer performed the so-called proof of concept.  CROC performed the task of an infrastructure provider ‚Äî servers, storage, and a network. <br><br>  Representatives of the customer made test hyphens, checking how the connection is established, how fast the data is transmitted, how to deploy the system within what we provide.  Roughly speaking, studied the toolkit. <br><br>  Then the combat equipment was received and installed.  At this point, the transfer of real systems began, but without transferring the actual load - in order to see that the systems are working, load tests were performed.  Then he was moving himself downtown at the weekend. <br><br><h4>  Infrastructure </h4><br>  We needed communication with three data centers, so we worked closely with our foreign colleagues in a bundle.  Except for the difficulties with time zones, everything went smoothly and at a very high level of mutual understanding. <br><br>  As a result, we completely created the infrastructure for the Russian site, and the customer poured data on it on our own under our supervision in case of surprises.  Our part is infrastructure to the level of an operating system and a virtual machine.  Addressing agreed almost immediately, and our network architect worked with their architect side by side.  Internal addressing is fully consistent with their original network.  Public addresses are Russian - because our channels are already used. <br><br><img src="https://habrastorage.org/files/583/5e2/d29/5835e2d295d24169a43a75ecedc16c89.png"><br>  <i>The simplest case is the backup scheme.</i> <br><br><h4>  A useful lesson in data collection </h4><br>  At first glance, the project seems to be quite simple - they say, the business is to assemble here the same thing that the customer has in Europe.  At the customer, these services are also in different data centers, plus they immediately wanted to evaluate the subsequent modernization - and all these requirements do not always fit well with ‚Äújust transfer‚Äù, it‚Äôs necessary to explain and figure out. <br><br>  Identifying the infrastructure requirements and coordinating the terms of reference took half the time of the order, that is, almost three months.  It was possible to save time very well due to the fact that we were able to create special questionnaires in the form of a list of closed questions ("yes" / "no" or 3-5 options) - in order to clearly receive information from the customer.  Before that, I had experience with open questions on a similar move - and the answers were such that I had to go for two more iterations.  Here we received quite a lot of information initially and could offer our options. <br><br>  In most cases, this approach is justified.  But in a couple of places we caught some nuances that, in the end, made migration a bit more difficult - despite the increased labor costs, we did it at our own expense, because we chose the approach with a closed questionnaire. <br><br>  Plus local features, of course.  For example, we coordinated the deadlines with the battles - foreign colleagues do not always represent the actual delivery time of the equipment.  They do not understand that it is not always possible to bring something specific in the Russian Federation.  Prices are not like theirs - they are different at us, and what is more expensive in Europe may be cheaper.  Or vice versa. <br><br>  What we were surprised by is their ideal thoroughness in everything that concerns the existing standards and rules, written often 10 years ago.  All this works for them at an honest 100 percent, and not at 20-80, as we often see in Russia.  With us, any standard rule is considered as some kind of useful recommendation.  They have - like an iron barrier. <br><br>  Or here's a migration plan.  Our operational changes are made simply by a call, but it does not work for them.  It is necessary to register, attach a scheme, then send letters and wait for Monday.  No overtime.  They are accustomed to work measuredly, slowly and kayfno, but for five plus. <br><br>  We also did not always see their structure: at the stage of communication, you don‚Äôt even always know who you are communicating with.  And you think - ok, we agreed, tomorrow they will demand.  And this man in Ireland, iron in America, has his own IT team, with whom he still has to coordinate everything, and they have to show the project to the team leader in China.  While the letter with the answer will pass - at least two days because of time zones.  There are many separate business divisions, and each technical unit has its own wishes, especially for the future.  Reconciling with 10 people per copy is perfectly normal. <br><br>  Or, in general, a plague example: update the firmware of the router - we have the IT chief decides, and they have all these 10 people at once, and the developers of the butt also go there. <br><br>  We implemented them on our own, and later the customer turned to us for support, not only at the infrastructure level, but also at the operating system level. <br><br>  Now they have the next step - disaster recovery.  We offer - there are two of our data centers, between them are thick independent channels for synchronous replication.  Ready to switch or recover at any time, in other words to build any solution. <br><br><h4>  Total </h4><br>  We agreed on switching downtime, moved 32 hours later (most downtime is the final data synchronization and production tests), coordinating the work of all the teams.  Now the system has been working without any complaints for several months.  Briefly, the story went like this: installation of hardware, assembly, testing, rolling infrastructure software, raising virtualization, initial setup, maintenance and implementation of their systems, more tests - the customer‚Äôs team went on.  Sometimes they asked us to help with their tasks, for example, on the butt performance tests, we picked along with them, looking for bottlenecks in the infrastructure.  We have all sorts of services, yet we are the first in IT infrastructures in Russia.  Here they all boldly and enjoyed to the general happiness.  Their networkers looked into the project only a couple of times, and when there were drawdowns on international channels, the rest of the time, no one, except applied scientists, is involved in the operation.  After the introduction of 2 weeks, we were in the mode of enhanced support, that is, every day we discussed with their specialists statuses and minor improvements.  Now we provide infrastructure: servers, storage systems, networks, balancers, information security devices, virtualization, backup system.  Plus, all this in the failover mode is reserved in the second data center, due to which the SLA is 99.9% for all levels of infrastructure. <br><br><h4>  Links </h4><br><ul><li>  <a href="https://habrahabr.ru/company/croc/blog/147474/">Excursion to our data center T-III "Compressor"</a> (T3 project, T3 object, T3 operation) </li><li>  <a href="https://habrahabr.ru/company/croc/blog/270549/">Data migration of one bank</a> </li><li>  <a href="https://habrahabr.ru/company/croc/blog/272795/">Distributed data storage systems</a> (part of software-defined data center) </li><li>  My mail is RSayfutdinov@croc.ru </li></ul></div><p>Source: <a href="https://habr.com/ru/post/277891/">https://habr.com/ru/post/277891/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277873/index.html">Embedded World 2016: where does the embedded world go?</a></li>
<li><a href="../277875/index.html">Microsoft acquires Xamarin</a></li>
<li><a href="../277885/index.html">How 3D robot scans</a></li>
<li><a href="../277887/index.html">Corporate calendar shooting: how the story was created with EastBanc Technologies employees in roles</a></li>
<li><a href="../277889/index.html">Zabbix 3.0: Interface</a></li>
<li><a href="../277893/index.html">Sessions and memory management in the assembly Vivaldi 1.0.403.15</a></li>
<li><a href="../277895/index.html">How to create email-auto-answers: Analysis of 100 applications to support services of IT companies</a></li>
<li><a href="../277897/index.html">Project Performance Test</a></li>
<li><a href="../277899/index.html">Article about microcontroller EFM32ZG110F32</a></li>
<li><a href="../277901/index.html">A bit about 2FA: Two-factor authentication</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Music lovers dedicated, or do Internet radio "in an adult"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings to the habrip users! 

 This most interesting story is about the legal differences between Google and Yandex‚Äôs work in Russia, how you can m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Music lovers dedicated, or do Internet radio "in an adult"</h1><div class="post__text post__text-html js-mediator-article"> Greetings to the habrip users! <br><br>  This most interesting story is about the legal differences between Google and Yandex‚Äôs work in Russia, how you can make a commercial product almost single-handedly, without knowing anything about Unix-systems, and even, in general, poorly understanding the work of Windows, but very loving music, and how not to splurge on advertising on the Internet.  We will also dispel several well-known myths about the creation and operation of our radio station) <br><br>  Under the cut - seven circles of hell and all my troubles in the world of beauty (music, of course) with all the details and some photos. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      All of us (or almost) love music and radio as well.  Probably someone thought it that it would be nice to become a DJ, in a microphone voice to attract the opposite audience, put songs on the air and be popular and in demand.  But all illusions quickly broke about reality. <br><br>  It so happened that for completely random circumstances, I had to work at one time first on one of the television companies in the Urals, and then (and even now) in a company that broadcasts several commercial radio stations in the middle cities of the Urals.  It was then that it turned out that the music was not put on the air by a DJ, but by a music editor, and that it was impossible to say anything, and generally all outlets should be pre-registered (recommended from Moscow), and you should plan conversations with listeners before going on the air.  Everything turned out to be more prosaic and mundane, unfortunately. <br><br>  <b>And here we begin to expose the first myth.</b> <b><br><br></b>  <b>1. Radio is expensive and unavailable.</b> <br>  In fact, to create your own broadcast (that is, in the FM band) station is not so much needed.  Only: develop a frequency (if the city is up to 200 thousand people, then without a competition for development), get a certificate of media registration (generally a penny), issue a broadcast and coherent license (also not that expensive), buy a transmitter (from 100 thousand ) + antenna feeder (from 10 thousand) + antenna itself (from 20 thousand) + broadcasting machine (from 10 thousand) + broadcasting software (from 3 thousand rubles), make a project on SES (from 25 thousand), and hand over the communication object representatives of Roskomnadzor. <br>  Of course, along the way there are many other pitfalls, but on the whole it is not so difficult, especially there are specialized companies that, for a certain percentage, will do all the paper work themselves and by eliminating mistakes in them, they will do everything faster than you. <br><br>  I don‚Äôt hide it, I don‚Äôt want to work for the ‚Äúuncle‚Äù all my life, but I want my radio).  The radio radio is not as inaccessible as it is sometimes shown on Habr√©, but the Internet radio station is still cheaper and provides more opportunities for development.  So it was decided to make my Internet station (inspired by the success of two of my good friends, Kraftway-I and Alexei).  It took more than half a year from the thought in my head to the actual implementation, although the actual implementation took about a month. <br><br>  We proceed to the consideration of the points. <br><br>  <b>1. Definition of station format</b> <br>  Everything is simple and difficult at the same time.  My thoughts were flying in my head about the music I adored from the time of the 90s and early 2000s.  It is the one that will come in the coming years to replace the music of the 80s.  Actually, I wanted to make a start precisely from this, in order not to produce station clones.  It should be noted that the reality again corrected this paragraph, more on this later. <br><br>  <b>2. It follows from the first item.</b>  <b>Music base station.</b> <br>  Preparation began in January.  It was immediately determined that the source code for the entire database would be mainly files in lossless - lossless audio compression formats, because we wanted good quality with a minimum bitrate of the stream.  Each track is trimmed, long introductions and finishes are removed from it, if the song is very long - it is made of radio duration (from 2.40 to 3.40), it turns out to be cut out pieces and mixing in tempo and meaning.  Further, it is normalized, that is, the entire base was brought to the same level so that there were no differences in volume on the air and even the presence of signal processing before sending to the server would not completely solve the problem if there are tracks with different levels.  Some songs are even aligned to high frequencies, if there are few of them (as a rule, this is old mastering, from the time of the 90s).  All base processing was done in Sound Forge.  At the time of this writing, there were almost 1,500 tracks in the database.  This is a bit of a reality.  The ratio of Russian to foreign - 50/50. <br><br><img src="https://habrastorage.org/storage2/b6f/849/980/b6f8499806085cd28aae7c6f461a10c6.jpg"><br><br>  Next, it was necessary to identify the categories of songs and sort them by them.  The principle of programming is temporary, that is, we sort songs by years when they were released and played.  Identified - the 90th, early 2000s, mid 2000s and modern.  Additional division into Russian / foreign, plus another category Goldov, i.e. the old well-known and favorite songs. <br><br>  <b>3. Name of the station and its logo.</b> <br>  The name was thought up quickly.  In Kazan in the 90s and in the early 2000s there was a station of the same name - Passage, at that time there was a trendy and popular music that was spinning and it was on it that I grew up.  Unfortunately, now this station does not exist, it was replaced by one of the federal for young people. <br>  Logo.  Everything was not so simple with him, since there was not a single thought about how he could look and what could be present in him.  I am not able to draw, like anything else, so an order was created on a popular resource for freelancers.  The contractor was determined fairly quickly by the rating and the views of employers and within a few days the station logo was ready. <br><br><img src="https://habrastorage.org/storage2/074/703/c5b/074703c5bbfacbcef17cc318002b2f46.jpg"><br><br>  <b>4. Registration of the ether.</b> <br>  If we make the quality of broadcasting good, then the design of the air should be at the level - it was with these thoughts that one of the studios was found on the network, which made a reading for a reasonable fee.  Were read a couple of phrases, the names of different intonations, and all this for only 500 rubles.  Next, the jingles need to be collected and production libraries come to the rescue, which are easy to find on the network and the jingles are collected in the sound editor. <br><br><img src="https://habrastorage.org/storage2/61c/288/e97/61c288e9775ba690c50176be13522b13.jpg"><br><br>  Plus, DTMF signals were generated in Forge for automation, in case a relay will be organized (this is a reserve for the future) and also added to a part of the jingles for regional windows. <br><br>  <b>5. Actually more to the point and to the topic.</b>  <b>Broadcast station (software)</b> <br>  Originally it was my laptop at work. <br><br>  Of the benefits - a permanent channel to the Internet (but not quite stable), connecting to UPS with powerful batteries. <br><br>  It would seem that everything is fine - Jin launched (a free product for broadcasting automation, everything is good, but in the free version there is no import of playlists, i.e., you can fill the schedule for the day only with pens. I really love music, but not so much as to be perverted ) and make things up to yourself.  But here a few problems appeared.  Gene doesn‚Äôt know how to rotate tracks at all, import doesn‚Äôt support, and even the sound from it when using external processing (more on that later) when opening the gluing editor just a little bit for a second.  Therefore, the software has been replaced (at least at the initial stage exactly) with a similar, but cheaper and simpler product for broadcast automation.  From the pros - there are fade settings between groups of files; it can rotate files into folders very easily in a single playlist.  Of the minuses, there is no gluing editor, i.e., no individual gluing can be done. <br>  The player created clocks, that is, watch sheets, each created a rotation between folders with categories, prescribed rules for not repeating tracks and selecting them from folders. <br><br><img src="https://habrastorage.org/storage2/bd8/992/f8f/bd8992f8ff5b8003e45dcfbbb34d6340.jpg"><br><br>  This is the simplest rotation, in the near future a transition to a much more advanced rotator is planned. <br>  I also note that all serious software for broadcasting is available only under Windows, this influenced the choice of system for servers. <br><br>  <b>5.1 Signal Processing</b> <br>  This is also an important point, because some of the even untwisted stations do not use it and both the sound and the overall volume of the volume suffer, some conversely are so carried away that it is hard to listen.  For what it is needed - we slightly align the overall level, normalize, expand the stereo panorama, process the bottoms, raise the average level. <br>  In the network you can find several programs for such tasks, they are all paid, although there are exceptions in the form of part of the free modules, in fact one of these was chosen. <br><br><img src="https://habrastorage.org/storage2/cae/17e/a5c/cae17ea5c34be2c015b7953c993ad8f5.jpg"><br><br>  It was not so difficult to rebuild it, the problem arose in that it was necessary to ‚Äúembed‚Äù the processing between the on-air software and the encoders.  Then came to the aid of vac, or rather 2 pieces.  The player plays the first cable, the signal is removed from it by the player and output to the second cable, from which the signal for the encoders is taken.  Thus, there are no D / A conversions and we have a processed signal.  It was possible to fasten the processing in the form of a plug-in directly into the broadcast program, but this is a dependence on this software, and secondly, if something happens to the on-air software, we will not have signal processing, even from a backup player. <br>  It is also worth paying attention to such a moment that when connecting to a remote machine with windows on board via a remote desktop, any audio devices disappear completely, and if programs using them are running at that moment, a tricky situation occurs with the work stopping.  Therefore, Radmin was chosen, and there are analogues (including free ones) with which everything works. <br><br>  <b>5.2 Iron (broadcasting machine)</b> <br>  And now for the gland now - it was originally thought to me (and my comrade) that broadcasting from a place where the unstable Internet is not Feng Shui.  It is said - done, ordered VPS on Windows, with average parameters - 2 cores approximately 1.6 GHz each, 2 gigabytes of RAM, about 50 GB of hard disk space and all this for 1200 rubles per month.  The music base was downloaded with the clothes of the air, the processing was established, the virtual cables were projected, the broadcast software config and the sheets were uploaded.  All is ready.  We start.  What we hear is a crash, clicks, and when connecting remotely, it‚Äôs even worse (we remember that we cannot connect to it via remote desktop).  After talking with comrade Alexey (he is to some extent a competitor to me, even if a potential one), I came to the conclusion that the VPS is evil and we must get off of it.  As a result, 3 different virtual servers with different virtualization systems were tested - clicks and cod on the sound everywhere. <br><br>  That's how I ended up in a hetzner, and in the most severe form - on Win Server 2008 on a physical server, bought at auction.  Athlon 2 cores, 2 GB of RAM, 400 gigabyte mirror, system license.  The initial payment was almost 2900, which is very noticeable for a beginner) <br><br>  So, everything was again copied to the server and installed and even started.  Initially, everything began to play and my joy knew no bounds.  Nothing groaned and clicked.  ... Until I connect to the server.  It turned out that when I connected, and some other "hard" actions on the server, I again undermined the broadcast.  Pretty angry, I found a free analogue of the radmin, but he did not solve the problem, although explosions were already observed in other actions.  There was an attempt to find out what the problem was - but the processor load on the connection was not very large, signal processing also took about 20-25% of the processor, so it was not possible to find the truth.  The only conclusion was made - you need to try a more powerful machine. <br><br>  A small such animal was purchased for broadcasting) Core i7 950 (4 cores at 3.06 GHz), 24 GB DDR3, 1.5 TB mirror, and also a license for Windows, there was less than just nothing, all this pleasure was even more expensive.  I will not begin to describe the re-installation and launch - I will just say that everything works fine, apparently all the same there were not enough resources. <br><br>  <b>6. Server with distribution of threads.</b> <br>  As a result, the first server in the hetzner became the distributing thread).  Although not.  This was preceded by the order of slots for broadcasting on one of the specialized sites, quite popular.  There were 2 BUT - expensive slots (for example, 100 slots for 128 kbps stand as a dedicated server - 1500 per month) and the inability to broadcast in anything other than mp3 (the last flaw was recently fixed by adding aac + support).  Therefore, literally a week after the official launch (with advertising and some kind of parody to the site), the translation of all links to your server began.  On it shoutcast (for mp3 streams) and icecast (aac + and ogg vorbis) are lifted. <br><br><img src="https://habrastorage.org/storage2/7f5/b0e/1ae/7f5b0e1ae592d6023beab8398ddcad4e.jpg"><br><br>  Why all this is not on Eyskaste alone? <br><br>  <b>7. Coding quality.</b> <br>  Initially, I really like the simplecast encoder because of the very decent quality of encoding to mp3 at low bitrates.  All good - supports both servers, but can not take tags for transmission from external sources, as its free open source counterpart - edcast (can take from files, from a web server and even from the names of windows in the system).  And on-air software can only work directly with showkast.  Why not use edkast?  The reason is simple - disgusting coding quality, simpcast encodes with mp3pro codec, and only Lame edcast and slipping the first one to the second one failed because of different file formats. <br><br><img src="https://habrastorage.org/storage2/9b7/9fd/468/9b79fd468819d63bc56eee85b87a4e5b.jpg"><br><br>  Also, I will note that the transliteration of Russian characters is included in the on-air software, otherwise some players do not normally display the names.  This also has yet to be dealt with. <br><br>  <b>8. Website</b> <br>  As the song says - "I blinded him from what was."  In my opinion for radio it is a little less important than what goes directly on the air.  Therefore, it is slightly forgotten and postponed until better times.  Domains under it were registered right before the opening, both in the .ru zone and in the Russian Federation.  Maning hosting, less than 100 rubles per month) <br><br>  <b>9. Advertising.</b> <br>  This is a very important point.  We all understand that without advertising and promotion any, even the most beautiful radio, will go to fame for years and more.  Therefore, scraping the bottom of the barrel, scraping something on Yandex Direct and Google Editors.  The first, without thinking twice, refused to advertise me, asking me to provide documents confirming the right to use someone else's intellectual property (i.e., in fact, they needed an agreement with RAO on copyright and with the second organization on related). <br><br><img src="https://habrastorage.org/storage2/025/fd4/713/025fd4713b3fefc2f058415e36795b84.jpg"><br><br>  But Google gladly began to spend my money on transitions on the ad.  So, on the day went from about 50-100 transitions (this is for my modest budget).  Also, the station was placed in almost all major directories of radio stations in Russia and Ukraine (Kazakhstan is still slowing down), and on 2 of them charge on the first page in the very top (for 1 thousand on each).  The largest catalog with a large number of visitors (about 70-80 thousand per day) is still not responding to the mail, and the other (better known, but with slightly lower rates) is simply already occupied by my competitors and there is no place there, and when - nobody knows.  The station has also been added to the TuneIn directory.  There was an attempt to stay in contact - the effectiveness is very doubtful, while when changing the logo to a modified version, my ad was closed, although it turned around for half a day in the status Allowed.  This moment is not completely clear to me, to be honest. <br><br>  In general, it is told very briefly, there was still a lot of passing.  The project started on March 19, 2012, at the moment there are about 2-3 hundreds of listeners per day, and for all these days more than 1 thousand people listened to the radio, with an advertising budget of 3 thousand rubles per month.  The format of these days has undergone changes in a more pop and modern side, but it has not lost the music of past years.  Every day the audience grows and there are a lot of plans - this is the launch of a full-fledged site, the launch of streams in aac + and Ogg (they are already working, but in the test), with different bitrates. the music base is replenished daily, I want the radio to be as interesting as possible.  At the same time, the main points are the complete absence of presenters - this is enough everywhere, both on the Internet and on the air, high quality of sound and information, maximum server and broadcast uptime, competent programming of the air and a wider repertoire.  Also, there are thoughts to create a second station with a very interesting format, but unfortunately, not widely used in Russia. <br><br>  Ahead will be the registration of individual entrepreneurs, obtaining a certificate for registration of mass media in Moscow and signing a contract for work with radioactive waste. <br><br>  <b>And here we will dispel the second myth</b> <br><br>  <b>2. Each performer must meet in person and enter into an agreement.</b> <br>  Nonsense!  There are organizations that are authorized to represent the rights of performers and rightholders (RAO, WIPO and others), they can and should enter into an agreement in order to work in the legal field and have the opportunity to get into the catalogs of Akado Radio, Audio Rambler, Yandex Direct and others.  As a rule, they ask for from 1.5 to 3 percent of revenue (depending on many factors). <br><br>  This is the first series of material: How to make a radio is finished, if there are any questions, suggestions, constructive criticism - I‚Äôm happy to hear and answer) </div><p>Source: <a href="https://habr.com/ru/post/141225/">https://habr.com/ru/post/141225/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../141219/index.html">Droider Show # 34.Three Epic Fail</a></li>
<li><a href="../141220/index.html">Overview of the Airon Flash chasofon: a gadget for athletes and not only</a></li>
<li><a href="../141221/index.html">Applicants for new gTLDs will compete in ‚Äúdigital shooting‚Äù</a></li>
<li><a href="../141222/index.html">DAZ 3D inc has extended the promotion of free distribution of programs</a></li>
<li><a href="../141223/index.html">Private Cloud vs Data-Center (just for fun)</a></li>
<li><a href="../141226/index.html">We try IPv6 in a home network</a></li>
<li><a href="../141227/index.html">80386 Silent Web Server running Linux</a></li>
<li><a href="../141228/index.html">Text Segmentation Algorithms</a></li>
<li><a href="../141229/index.html">Exynos 5250: More Smarter, More Greener!</a></li>
<li><a href="../141231/index.html">Spamhaus, without thinking, will throw a nuclear bomb on you, suspecting of involvement in spamming</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
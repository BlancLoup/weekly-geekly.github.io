<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How Dodo Pizza Delivers Pizza Using Microsoft Azure Cloud</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue to talk about the use of the Microsoft cloud for solution development companies (ISVs). In this issue, Dodo Pizza is already an internatio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How Dodo Pizza Delivers Pizza Using Microsoft Azure Cloud</h1><div class="post__text post__text-html js-mediator-article"><blockquote><p>  <em>We continue to talk about the use of the Microsoft cloud for solution development companies (ISVs).</em>  <em>In this issue, Dodo Pizza is already an international network based in Syktyvkar, whose feature is <a href="http://sila-uma.ru/aboutdodo/">the Dodo IP cloud information system</a> , which is deeply integrated into all business processes of the organization and franchise.</em>  <em>This article was prepared with the participation of several people, Fedor Ovchinnikov, CEO of Dodo Pizza, as well as the implementation team - Alexander Shibanov, Andrei Morevsky, Arseny Kravchenko and Gleb Lesnikov.</em>  <em><a href="https://vc.ru/p/dodo-usa">Interestingly, while we were preparing the article, Dodo Pizza should already start working in the USA</a> .</em> </p></blockquote><br><br><img src="https://habrastorage.org/files/76b/9d6/cc1/76b9d6cc10254f47abe1b0aa1e9506a7.png"><br><br><a name="habracut"></a><br>  <b>Fedor Ovchinnikov:</b> Good afternoon!  Our company appeared 5 years ago in Syktyvkar.  This is a small town in northern Russia.  Here we still have our <a href="https://youtu.be/Ml3JAW98vAg"><u>headquarters</u></a> , while the company has offices in Moscow and the United States.  Today ‚ÄúDodo Pizza‚Äù is an international network of pizzerias in six countries.  In 2015, the network revenue exceeded <a href="http://dodopizza.info/milliard/"><u>1 billion rubles</u></a> .  The main product of the company is a franchise, the core of which is its own information system Dodo IS.  Our system is implemented in the form of a website.  Franchisee partners work with it as a SaaS service.  With the deep integration of the system and business, using the capabilities of the Internet, mobile gadgets in the kitchen, with the help of Dodo IS we achieve greater efficiency and transparency of business.  In fact, ‚ÄúDodo Pizza‚Äù is an IT company or a ‚Äúcyborg company‚Äù, that is, it is both an IT and a retail company.  But unlike 100% of IT companies, we sell to our customers, that is, franchisees.  IT system with business system and brand.  A key feature of our business is openness to customers, investors, partners.  Openness does not allow us to work badly, since everything becomes immediately visible.  Our cloud-based information system allows real-time display of key metrics of our business. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Dodo "IP" is the heart of the entire network.  Today, more than 80 pizzerias in six countries, a single call center, our sites depend on it.  And all this web!  We even have a cash desk in a restaurant running in a browser.  We were looking for the best solution in terms of reliability, quality, ease of maintenance.  Physical servers are not a very flexible solution, plus some services have already been virtualized through Hyper-V, so the cloud was a logical continuation of the development.  It was not terrible - it's just a virtual machine, they have nothing to fear.  On Azure, the choice was largely due to the participation in the Microsoft BizSpark start-up support program and the BizSpark + Cloud Grants as Azure resources for $ 60,000 - yet, you need to touch the cloud in order to understand whether you need it or not. <br><br>  In this case, of course, the cloud is primarily a tool.  Business must set tasks, and we, in turn, must solve them.  A good tool allows you to make better decisions.  The flexibility of the cloud allows you to make more, better, come up with many options and try everything.  If we talk about the consequences of the transition, then at the transition to the cloud, we rather saved than spent.  We spent several dozen man-hours of one sysadmin, and in return received a year of free work of servers.  I don‚Äôt think what else is possible. <br>  In 2016, we plan to increase the network to 180 pizzerias, our goal by 2020 is to open more than 2,000 pizzerias around the world.  Now open pizzerias in the United States and China.  All of them will be interconnected via our Dodo IS information system, that is, through a web service.  The more pizzerias we have, the greater the role of our web service Dodo IS for effective management.  At the same time, we will still depend on a ‚Äúcloud‚Äù on a large scale. <br><br>  It must be said that it was very difficult for us to begin.  But this concerns any startup, in our country the situation was aggravated by the fact that we were in Syktyvkar, far from the ‚Äúventure‚Äù money and technology centers. <br>  The main problem for the business could be downtime and / or data loss.  Something could be sharpened by iron servers.  By itself, relocation is always a big risk.  But the expectations were more than justified, now we are satisfied.  There were no problems for business, all our initial difficulties had no effect on business and users.  The cloud is, first of all, excellent scalability.  We are growing very fast, we open pizzerias in Europe, America and China, the clouds enable us to conveniently deploy the system instances. <br><br>  <b>What is</b> <b>DodoIS</b> <b>made</b> <b>from</b> <b>?</b> <br><br><img src="https://habrastorage.org/files/2fa/aac/607/2faaac607b00471eae54d08904a352e9.png"><br><br>  Web application on ASP.NET MVC, Windows Server, IIS, CentOS, NGINX, MySQL (Percona Server).  We use NGINX for reverse proxy and TLS.  Behind NGINX are our backends in the form of IIS servers, on which business logic resides.  Percona Server works as a relational database.  For a variety of production caches, we use the Azure Redis Cache.  The applications themselves are written in ASP.NET. <br><br>  <b>What is</b> <b>used</b> <b>in</b> <b>development</b> <b>?</b> <br><br>  Visual Studio, ReSharper, Bitbucket, JIRA, Confluence, TeamCity, Azure Application Insights.  Programmers work in Visual Studio 2015 with ReSharper. <br><br>  For version control, we use Mercurial (Bitbucket), JIRA for tasks, Confluence for documentation.  Deploy through PowerShell once a week, Continuous Integration - TeamCity.  We actively use Application Insights for two things - load ratings of different backend API and failed requests / exceptions, however, our application generates too many events and we select their monthly limit in 5-6 days.  Soon we will do Sampling and this will cease to be a problem.  Typical use case - when we see an unusual load on backends / base, go to AppInsights and look at the most frequent requests.  Another typical use case is when something slows down for no reason, we filter by URL and look at the query execution time, and this is absolutely without rewriting the application, i.e.  we just add the AppInsights monitor to the server <br><br>  <b>Architecture</b> <br><br>  Our system is conventionally divided into two parts: one part is back office - everything related to pizza production, reporting, personnel, etc.  These are employees of 80 pizzerias and a management company. <br><br>  The second part is our customers who interact with the system through the site.  At the moment, the site takes more than 40% of all orders and serves ~ 6,000 unique visitors per day. <br><br>  We planned the architecture from the very beginning.  There was a fear that the project would be highly loaded and a monolithic solution (even if broken down by layers) would not work.  But, taking into account the high risk of a startup and limited funding, we still decided to make a monolithic architecture with standard layering (UI, BL, DAL).  This is a clear architecture, with a low threshold of entry and it gave us the opportunity for rapid development.  Over time, based on the needs of the business, the architecture evolved several times, but in fact remained a monolith. <br><br>  Now we are preparing a system for future growth, namely for clusters.  We started to use Redis Cache, we will soon make a farm of IIS servers.  We also plan to switch to Percona XtraDB Cluster and translate the statics to CDN. <br><br>  <b>What happened?</b>  <b>First migration attempts</b> <br><br>  We simply created several virtual machines, repeating our previous servers.  Removed NGINX-reverse proxy, believing that they do not make sense.  Thus, it practically did not differ from local servers in the data center.  The servers were installed on the same number of cores as they were, they worked perfectly.  Part of the machines that already worked under Hyper-V, we very quickly dragged and copied the image without any problems. <br><br><img src="https://habrastorage.org/files/fb2/5a8/1da/fb25a81da44c434a90ea32ce23e5bde3.png"><br><br>  <b>Difficulties and inconvenience</b> <br><br>  <a href="http://manage.windowsazure.com/">The old portal</a> was uncomfortable, the <a href="http://portal.azure.com/">new one is</a> much better.  Did not know the specifics of the Azure Storage magnetic disks.  Balancer broke off old TCP sessions, our application was not ready for this.  Initially did not use virtual networks.  There was a lack of entry-level manuals, such a FAQ for switches from iron to clouds, like ‚Äúif you migrate to the cloud, remember that ...‚Äù.  Available manuals were dated 2012-2013, which often did not fit into the new realities. <br><br>  <b>findings</b> <br><br>  In our industry, cloud-based solutions, native Windows applications, are commonly used.  We believe that this is not the most effective approach, for example, McDonaldsa new versions of software appear every six months. <br>  The main conclusion of our migration is that for a fast-growing business, the public cloud is ready to offer for any demand.  It also became clear that we are unlikely to go to physical servers.  I think it is meaningless for Habr to talk about the benefits of clouds, the most important thing is that we are satisfied and the business has no difficulties. <br><br>  Passage about collective work: Fedor Ovchinnikov, Alexander Shibanov, Andrei Morevsky, Arseny Kravchenko.  Interviewed by <a href="http://habrahabr.ru/users/ahriman">Alexander Belotserkovsky</a> . </div><p>Source: <a href="https://habr.com/ru/post/277821/">https://habr.com/ru/post/277821/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277809/index.html">Working with email: How to reduce the number of incoming messages to zero</a></li>
<li><a href="../277811/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 20. ‚ÄúThe Starlight Room‚Äù</a></li>
<li><a href="../277813/index.html">We catch everything with the help of CoordinatorLayout Behavior</a></li>
<li><a href="../277817/index.html">Framer Tutorial: Custom device, Input fields, flowing loading and a rainbow at the end</a></li>
<li><a href="../277819/index.html">How does Google Search work?</a></li>
<li><a href="../277823/index.html">Subtleties Javascript / Node.js. Increase productivity tenfold</a></li>
<li><a href="../277825/index.html">DIY connector for ESP8266 ESP-12</a></li>
<li><a href="../277827/index.html">Robert Metcalfe: EtherNet's dad, a great engineer and fig predictor (but he answered for the words)</a></li>
<li><a href="../277829/index.html">The movement of the robot to a point with given coordinates</a></li>
<li><a href="../277833/index.html">Welcome to MoscowJS February 25</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
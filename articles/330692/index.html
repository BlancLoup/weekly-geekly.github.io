<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Idiomatic Redux: Redo's Tao, Part 1 - Realization and Design</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Thoughts on what requirements Redux puts forward, how the use of Redux is intended and what is possible with Redux. 
 Introduction 


 I spent a lot o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">ğŸ”</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">ğŸ“œ</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">â¬†ï¸</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">â¬‡ï¸</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Idiomatic Redux: Redo's Tao, Part 1 - Realization and Design</h1><div class="post__text post__text-html js-mediator-article"><p>  Thoughts on what requirements Redux puts forward, how the use of Redux is intended and what is possible with Redux. </p><br><h2>  Introduction </h2><br><p>  I spent a lot of time discussing online patterns of using Redux, whether it was helping those who study Redux in <a href="https://www.reactiflux.com/">Reactiflux channels</a> , discussions about possible changes to the Redux library API on Github, or discussing various aspects of Redux in the comments to threads on <a href="https://www.reddit.com/r/reactjs/">Reddit 'e</a> or <a href="https://news.ycombinator.com/">HN (HackerNews)</a> .  Over time, I developed my own opinion about what constitutes good, idiomatic Redux code, and I would like to share some of these thoughts.  Despite my status as a <a href="https://github.com/markerikson">maintainer of</a> Redux, <strong>these are just opinions</strong> , but I prefer to think that they are good enough approaches. </p><br><p>  Redux, in its essence, is an incredibly simple pattern.  It saves the value, performs one function to update the value when needed, and notifies any subscribers that something has changed. </p><br><p>  Despite this simplicity, or perhaps because of it, there is a wide range of hikes, opinions and views on how to use Redux.  Many of these approaches are widely at variance with the concepts and examples from the documentation. </p><br><p>  At the same time, there are <a href="https://habrahabr.ru/post/330072/">continuing complaints about</a> how Redux â€œforcesâ€ you to do things in certain ways.  Many of these complaints actually include concepts related to how Redux is commonly used, and not the actual restrictions imposed by the Redux library itself.  (For example, only in one recent HN thread I saw complaints: â€œtoo much template codeâ€, â€œaction constants and action creators are not neededâ€, â€œI have to edit too many files to add one featureâ€, â€œwhy do I Should I switch between files to get to my logic? "," Terms and names are too complicated to learn or confusing, "and <em>too</em> many others.) </p><a name="habracut"></a><br><p>  As I explored, read, discussed, and studied the variety of ways to use Redux and the ideas shared in the community, I came to the conclusion that <strong>it is important to distinguish between how Redux actually works, <em>conceived</em> ways of its conceptual use, and almost infinite number of ways <em>to</em> use Redux.</strong>  I would like to touch upon several aspects of using Redux and discuss how they fit into these categories.  In general, I hope to explain why there are specific patterns and practices of using Redux, Redux's philosophy and design, and what I consider to be â€œidiomaticâ€ and â€œnon-idiomaticâ€ using Redux. </p><br><p>  This post will be divided into two parts.  In <strong>"Part 1 - Implementation and Design",</strong> we will look at the actual implementation of Redux, what specific restrictions it imposes, and why these restrictions exist.  Then, we will consider the initial design and design goals for Redux, based on the discussions and statements of the authors (especially at the early stage of the development process). </p><br><p>  In <strong>â€œPart 2 - Practice and Philosophyâ€</strong> we explore common practices that are widely used in Redux applications, and describe why these practices exist in the first place.  Finally, we will look at a number of â€œalternativeâ€ approaches to using Redux and discuss why many of them are <em>possible</em> , but not necessarily <em>â€œidiomatic</em> . <em>â€</em> </p><br><h2>  The Basics </h2><br><h3>  Learning the Three Principles </h3><br><p>  Let's start with a look at the now famous <a href="http://redux.js.org/docs/introduction/ThreePrinciples.html">Three Principles of Redux</a> </p><br><ul><li>  <strong>Single source of truth: The</strong> state of your entire application is stored in a tree of objects inside a single repository. </li><li>  <strong>The state is read-</strong> only <strong>:</strong> The only way to change the state is to issue an action â€” an object that describes what happened. </li><li>  <strong>Changes are performed by pure functions:</strong> To specify how the state tree is transformed by action, you write pure reducer. </li></ul><br><p>  In a very real sense, <strong>each of these statements is a lie!</strong>  (or, borrowing a classic replica from Return to DJ, <strong>"they are true ... from a certain point of view."</strong> ) </p><br><ul><li>  â€œSingle source of truthâ€ is wrong, because (according <a href="http://redux.js.org/docs/faq/OrganizingState.html">to the Redux</a> FAQ) <a href="http://redux.js.org/docs/faq/OrganizingState.html">you do not need to put <em>everything</em> in Redux</a> , the state of the repository <em>does not have to</em> be an object, and you <a href="http://redux.js.org/docs/faq/StoreSetup.html">donâ€™t even need to have a single store.</a> </li><li>  â€œThe state is read-onlyâ€ is incorrect, since in fact nothing prevents the rest of the application from modifying the current state tree. </li><li>  And â€œChanges are performed by pure functionsâ€ is incorrect, because the reducer functions can also mutate the state tree directly or trigger other side effects. </li></ul><br><p>  But if these statements are not completely true, why are they needed at all?  <strong>These principles are not fixed rules or literal statements about the implementation of Redux</strong> .  Rather, they form a <strong>statement about the concept of how Redux <em>should be</em> used.</strong> </p><br><p>  This topic will continue in the rest of the current discussion.  Due to the fact that Redux is such a minimal library in terms of implementation, it requires so little or imposes on a technical level.  This raises a valuable side discussion that is worth a look. </p><br><h3>  "Language" or "Meta-language" </h3><br><p>  In his speech on <a href="https://www.youtube.com/watch%3Fv%3D_0T5OSSzxms%26list%3DPLb0IAmt7-GS3fZ46IGFirdqKTIxlws7e0%26index%3D34">ReactConf 2017 â€œTaming Meta-Languageâ€,</a> Cheng Lu describes that only the source code is â€œlanguageâ€, and everything else, like comments, tests, documentation, tutorials, blog posts, and conferences, is â€œmeta-languageâ€ .  In other words, the source code itself can transmit only a certain piece of information.  Many additional layers of information transfer at the person level require that people understand â€œlanguageâ€. </p><br><p>  Further, Cheng Lu continues to discuss how the displacement of additional concepts into the language itself allows us to express more information through the medium of the source code, without resorting to the use of a â€œmeta-languageâ€ to convey ideas.  From this point of view, <strong>Redux is a tiny â€œlanguageâ€ and almost all the information about how to use it is actually a â€œmeta-languageâ€</strong> . </p><br><p>  The â€œlanguageâ€ (in this case, the main Redux library) has minimal expressiveness, and therefore the concepts, norms and ideas surrounding Redux are all at the â€œmeta-languageâ€ level.  (In fact, the post <a href="http://frantic.im/meta-language">Understanding "Taming Meta-Language"</a> , which lists the ideas from Cheng Lu's speech, calls Redux a concrete example of these ideas.) Ultimately, this means <strong>understanding why certain practices exist around Redux, and decisions about what is and is not â€œidiomaticâ€ will include opinions and discussions, not just a definition based on the source code</strong> . </p><br><h2>  How Redux really works </h2><br><p>  Before we go deep into the philosophical side of things, it is important to understand what technical expectations Redux really has.  A look at the insides and implementation will be informative. </p><br><h3>  Redux kernel: createStore </h3><br><p>  The createStore function is the central part of the Redux functionality.  If we cut off comments, error checking, and code for a couple of advanced features, such as store enhancers (storage amplifiers â€” features that enhance the capabilities of the store â€” translator's note) and observables, this is what createStore looks like (sample code borrowed from â€œbuild mini Reduxâ€ Â»Tutorial called <a href="http://paulserraino.com/javascript/2016/02/16/hacking-redux.html">" Hacking Redux "</a> ): </p><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createStore</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reducer</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> state; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> listeners = [] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getState</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">listener</span></span></span><span class="hljs-function">) </span></span>{ listeners.push(listener) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> unsubscribe() { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> index = listeners.indexOf(listener) listeners.splice(index, <span class="hljs-number"><span class="hljs-number">1</span></span>) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispatch</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">action</span></span></span><span class="hljs-function">) </span></span>{ state = reducer(state, action) listeners.forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">listener</span></span></span><span class="hljs-function"> =&gt;</span></span> listener()) } dispatch({}) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { dispatch, subscribe, getState } }</code> </pre> <br><p>  This is about 25 lines of code, but they still include key functionality.  The code keeps track of the current state value and the set of subscribers, updates the value and notifies subscribers when action is dispatched, and provides an API for the store. </p><br><p>  Take a look at all the things that this fragment <em>does not include</em> : </p><br><ul><li>  Immunity </li><li>  â€œNet Functionsâ€ </li><li>  Middleware (intermediate software layer between "sending" action and reducer'ami - translator's note) </li><li>  Normalization </li><li>  Selectors </li><li>  Thunks </li><li>  Sagas </li><li>  Should action types be strings or <a href="https://learn.javascript.ru/symbol">Characters</a> , and should they be constant or inline? </li><li>  Do you need to use action creators (functions that create actiones â€” the translator's note) to construct these actions </li><li>  Should the store contain non-serializable elements, such as promises or class instances </li><li>  Should data be stored normalized or hierarchical </li><li>  Where should asynchronous logic live </li></ul><br><p>  In this vein, it is worth quoting Dan Abramov's pull-request for an example of a â€œclassic counterâ€: </p><br><blockquote>  A new example of â€œclassic counterâ€ aims to dispel the myth that Redux requires Webpack, React, hot reboot, sagas, action creators, constants, Babel, npm, CSS modules, decorators, excellent knowledge of Latin, subscriptions to <a href="https://egghead.io/courses/getting-started-with-redux">Egghead</a> , Degree, or <a href="http://ru.harrypotter.wikia.com/wiki/%25D0%25A1%25D1%2582%25D0%25B0%25D0%25BD%25D0%25B4%25D0%25B0%25D1%2580%25D1%2582%25D1%258B_%25D0%259E%25D0%25B1%25D1%2583%25D1%2587%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F_%25D0%2592%25D0%25BE%25D0%25BB%25D1%2588%25D0%25B5%25D0%25B1%25D1%2581%25D1%2582%25D0%25B2%25D1%2583">S.O.V.</a>  No, this is just HTML, some handicraft script tags and good old DOM manipulations.  Enjoy! </blockquote><br><p>  <strong>The dispatch function inside createStore simply calls the function-reducer and stores any return value</strong> .  And yet, despite this, the elements in that list of ideas are widely regarded as concepts that a good application on Redux should take care of. </p><br><p>  Having explained all those things to which createStore <em>does not</em> matter, it is important to note that this function actually requires.  This createStore function imposes two specific restrictions: <strong>actions that go to the store must be simple objects</strong> , and <strong>actions must have a "type" field not equal to undefined</strong> . </p><br><p>  Both of these limitations stem from the original concept of "Flux architecture."  Quoting the <a href="https://facebook.github.io/react/blog/2014/07/30/flux-actions-and-the-dispatcher.html">Flux Actions</a> section <a href="https://facebook.github.io/react/blog/2014/07/30/flux-actions-and-the-dispatcher.html">and Dispatcher</a> from the Flux documentation: </p><br><blockquote>  When new data enters the system, both through the person interacting with the application and through the web api call, this data is packaged into an action object containing the new data fields and the specific action type.  We often create a library of helper methods called ActionCreators that not only create an action object, but also pass an action to the dispatcher.  Different actions are identified by the â€œtypeâ€ attribute.  When all the stores get an action, they usually use this attribute to determine if they should react to it and how.  In the application, Flux, stor's and view control themselves;  they are not affected by external objects.  Actions come to stor through callback functions that they define and register, and not by installation methods (setters). </blockquote><br><p>  Initially, Redux did not require a special â€œtypeâ€ field, but later a validation check was added to help catch possible typos or incorrect import of action constants, and to avoid useless arguments about the basic structure of objects. </p><br><h3>  Built-in utility: <strong>combineReducers</strong> </h3><br><p>  Here we begin to observe some limitations familiar to more people.  <strong>combineReducers</strong> expects that every cutoff reducer passed into it will â€œcorrectlyâ€ respond to an unknown action, returning its default state and never return undefined.  She also expects that the value of the current state is a simple JS object, and that there is an exact correspondence between the keys in the current state object and in the object of the-reducer function.  Finally, <strong>combineReducers</strong> checks for equality by reference, to determine if all the cutoff reducer has returned to its previous value.  If all returned values â€‹â€‹look like previous values, <strong>combineReducers</strong> assumes that nothing has changed anywhere and, as an optimization, returns the original root state object. </p><br><h3>  Primary Advantage: Redux Developer Tools (DevTools) </h3><br><p>  The Redux developerâ€™s tools consist of two main parts: an enhancer for the store, which implements time travel by tracking disputed actions, and a user interface that allows you to view and manage history.  By itself, the store enhancer does not care about the contents of action or state, it simply stores action in memory.  Initially, the developer tools interface had to be rendered inside the component tree of your application, and it also did not care about the content of the action or state.  However, the <a href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd%3Fhl%3Dru">Redux DevTools extension</a> works in a separate process (at least in Chrome), and therefore requires the serializability of all actions and states, so that all possibilities of moving in time work correctly and quickly.  The ability to import and export state and action also requires that they be serializable. </p><br><p>  Another semi-demanding requirement for debugging is through immobility and clean functions.  If the function-reducer mutates the state, then the transition between the actons in the debugger will result in inconsistent values.  If the reducer has side effects, then these side effects will occur every time DevTools repeats action.  In both cases, debugging by moving in time will not work completely as expected. </p><br><h3>  Main UI Bundles: React-Redux and connect </h3><br><p>  The mutation becomes a real problem in the <strong>connect</strong> function from React-Redux.  The wrapper components generated by <strong>connect</strong> implement many optimizations to ensure that the wrapped components are rendered only when they are actually needed.  These optimizations revolve around reference equality tests to determine if the data has changed. </p><br><p>  In particular, every time action is dispatched and subscribers are notified, <strong>connect</strong> checks if the root state object has changed.  If not, <strong>connect</strong> assumes that nothing has changed in the state, and skips further rendering work (That's why <strong>combineReducers</strong> tries, as far as possible, to return the same root state object).  If the root state object <em>has changed</em> , <strong>connect</strong> will call the provided function mapStateToProps, and perform a shallow test for equality between the current result and the previous one, to determine if the props calculated from the store data has changed.  Again, if the content of the data looks the same, <strong>connect</strong> will not render the wrapped component.  These equality checks in <strong>connect</strong> are the reason why random state mutations do not lead to component re-rendering, this is because <strong>connect</strong> assumes that the data has not changed and no re-rendering is needed. </p><br><h3>  Related Libraries: React and Reselect </h3><br><p>  Immunity also matters in other libraries, often used in conjunction with Redux.  The Reselect library creates memory selector functions commonly used to extract data from the Redux state tree.  Memorization of values, as a rule, relies on the check of referential equality, to determine whether the input parameters coincide with those previously used. </p><br><p>  Also, although the React component can implement <strong>shouldComponentUpdate</strong> using whatever logic it wants, the most common implementation relies on shallow checks of the equality of current props and new incoming props, for example: </p><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> !shallowEqual(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props, nextProps)</code> </pre> <br><p>  In any case, data mutation usually leads to undesirable behavior.  Memorizing selector functions will not return the correct values, and React's optimized components will not be rendered when they should. </p><br><h3>  Summing up Redux technical requirements </h3><br><p>  The central function of Redux createStore in itself imposes only two restrictions on how you should write your code: actions should be simple objects, and must contain a certain type.  It does not care about immunity, serializability, side effects, or what type field actually takes on value. </p><br><p>  With this in mind, <strong>widely used parts around this kernel, including Redux DevTools, React-Redux, React, and Reselect, <em>really rely</em> on the proper use of immunity, serializability of action / state, and pure redundancy functions</strong> .  The main logic of the application can work normally if these expectations are ignored, but, with high probability, debugging by time movement and re-rendering of components will break.  They will also affect any other uses associated with consistency. </p><br><p>  It is important to note that immobility, serializability and pure functions are not imposed in any way by Redux.  The function-reducer may well mutate its state or make an AJAX call.  Any other part of the application may well call getState () and modify the contents of the state tree directly.  It is fully possible to place promises, functions, symbols, class instances, or other non-serializable values â€‹â€‹in action or state tree.  You <em>should</em> not do any of this, but it is <em>possible</em> . </p><br><h2>  Redux Design and Design </h2><br><p>  Keeping in mind these technical limitations, we can pay attention to how the use of Redux is conceived.  To better understand this thought, it is helpful to look at the ideas that led to the initial development of Redux. </p><br><h3>  Impact on Redux and its goals </h3><br><p>  The Introduction section in the Redux documentation contains several basic ideas that influenced the development and concepts of Redux, in the themes <a href="http://redux.js.org/docs/introduction/Motivation.html">Motivation, Key Concepts, and Predecessors</a> .  As a brief summary: </p><br><ul><li>  The main goal of Redux is the <strong>predictability of state mutations</strong> , by imposing restrictions on how and when changes can occur.  Redux borrows the idea of â€‹â€‹â€œFlux Architectureâ€ about separating change logic from the rest of the application, and using simple â€œactionâ€ objects to describe the changes that should occur. </li><li>  Opportunities for developers, such as debugging over time, are among the key uses for Redux.  Consequently, <strong>restrictions such as immobility and serializability exist mainly to make such features available during development</strong> , as well as to simplify tracking data flow and change logic. </li><li> Redux        ,        . </li><li>  Flux    Â«storesÂ» ()    . Redux    Â«stor'Â»         ,      /. </li><li>   -reducer       -reducer'.         ,     ,          ,      Flux'   store.waitFor(),   . </li></ul><br><p>           README Redux'a. </p><br><blockquote><h4>     </h4><br><ul><li>         ,   Redux. </li><li>  (Stores, Action Creator', )   <a href="https://webpack.js.org/concepts/hot-module-replacement/">Â«Â» </a> . </li><li>   Flux',         . </li><li>   -    Flux. </li><li>     ,     ,     <a href="https://toster.ru/q/241481">Â«Â»</a> . </li><li>        :    JS , , <a href="https://facebook.github.io/immutable-js/">ImmutableJS</a>  .. </li><li>  , Redux       ,       . </li><li>      ,    Stor'. </li><li>        (,   , /)     </li><li>   ,     <a href="https://github.com/gaearon/redux/issues/99"> </a>  <a href="https://gist.github.com/skevy/8a4ffc3cfdaf5fd68739"> </a>   Redux. </li><li>      stor'  action'.   â€”   . </li><li>        (mocks). </li><li>   Â«Â» Stor',     Stor'    . </li><li>  API . </li><li>    Â«Â» ? </li></ul><br></blockquote><br><h3>     </h3><br><p>   Redux,  issue-,         ,         Redux. </p><br><h4> <strong>Redux      Flux</strong> </h4><br><p> Redux   Â« Â»       Flux.        Flux:  Â« (dispatching) action'Â»,   action' â€”      type,  Â« Â» action' (action creators), ,  Â« Â»         ,   . </p><br><p>     Â« Redux  Â»,       : Â«   Flux'    Flux  Â». </p><br><h4> <strong>     </strong> </h4><br><p>    Redux',     ,       .     ,    . </p><br><p>  ,        action,       ,       ,   action   (     ).   store  ,    ,   action    ,    . </p><br><p>   Â« Â»  Â«    Â»       ,               . </p><br><h4> <strong> action'    </strong> </h4><br><p>   Redux'         type  action',  ,   action'      . Redux DevTools       type    action',     ,    . </p><br><p>  ,      ,     .   ,   action      .  ,  ,    action    ,       action .         action  (, SET_DATA),       action  ,       . </p><br><h4> <strong>Redux       </strong> </h4><br><p> Redux        ,   ,       ,    .     ,  :    ,   ,       . </p><br><p>    , Redux       ,      ,         ,        ,   Â«Â»  Â«Â». ( ,      Redux'    ,      ,  :          â€”       .) </p><br><h4> <strong>Redux   </strong> </h4><br><p>  reducer'           ,   ,  -reducer      .  reducer'            â€”         AJAX . </p><br><p> AJAX      -   -  ,   ,   ,  - .   ,             . </p><br><h4> <strong>-reducer'     </strong> </h4><br><p> Redux    Â«Â»   Flux      store.     Flux  Redux        Â«Â»      Flux .  Flux    UsersStore, PostsStore  CommentsStore,   Redux     ,  : { users, posts, comments }. </p><br><p>    ,        ,               .            ,      .  ,   Â«reducer Â»       , ,   ,     <em></em> .   Â« reducer'Â»         .   <strong>combineReducers</strong>    Redux'      . </p><br><p>   -reducer              ,   ,       action'    reducer' ,            .      ,   action'     reducer' ,    Redux'.    : Â«action'   1--  reducer'.Â» </p><br><h4> <strong>      </strong> </h4><br><p> Redux    Â«Â».     (  applyMiddleware  store enhancers)    ,         ,       ,       . </p><br><p> <strong>Redux          .       -reducer,  <em></em> </strong> .    <strong>combineReducers</strong> ,      â€”    reducer' .         reducer'    . <strong>  ,    reducer'     ,    â€”    ,     </strong> . </p><br><p>    Flux', Stor'    waitFor(),        .  CommentsStore     PostsStore  ,    ,    PostsStore.waitFor(),  ,       PostsStore .  ,      .   ,  Redux          -reducer'   . </p><br><p>      ( )       <a href="https://gist.github.com/gaearon/d77ca812015c0356654f">Â«Combining Stateless StoresÂ»</a> </p><br><blockquote>   , commentsReducer       action'.      hasCommentReallyBeenAdded ().       API. ,     Â« Â»,     : reducer       .   store  . ,   ,  -     . </blockquote><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">commentsReducer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state = initialState, action, hasPostReallyBeenAdded</span></span></span><span class="hljs-function">) </span></span>{} <span class="hljs-comment"><span class="hljs-comment">//    export default function rootReducer(state = initialState, action) { const postState = postsReducer(state.post, action); const {hasPostReallyBeenAdded} = postState; const commentState = commentsReducer(state.comments, action, hasPostReallyBeenAdded); return { post : postState, comments : commentState }; }</span></span></code> </pre><br><p>      Â«reducer'  Â».  reducer      reducer',      /  . </p><br><h4> <strong>API Redux'   </strong> </h4><br><p>             Redux'.       : </p><br><p> <a href="https://github.com/reactjs/redux/pull/195">Andrew â€” #195:</a> </p><br><blockquote>   API â€”   API.    middleware  stor'       ,          Redux â€”     dispatch()  createStore() .      ,   1.0.        .        ,  API. </blockquote><br><p> <a href="https://github.com/reactjs/redux/issues/216">Dan â€” #216:</a> </p><br><blockquote>      Redux   NuclearJS: <br><ul><li>       ImmutableJS </li><li>     API   </li><li>    ,       Redux   -  </li></ul><br><p>  Redux     ,      . </p><br><p>       API  createStore,        .  ,    (Reducer, Action Creator)          -   Redux.  ,  Redux      ,       ,   . </p></blockquote><br><h4> <strong>Redux    ,  </strong> </h4><br><p>     Â« APIÂ».   Flux,   Flummox ,     ,     (, START/SUCCESS/FAILURE action'  ).    -    ,    ,    . </p><br><p>         <a href="https://hashnode.com/ama/with-redux-cisteui6p005gzx53fstg8t6l">Hashnode AMA (/)    </a> : </p><br><p> <a href="https://github.com/reactjs/redux/pull/55">Andrew â€” #55:</a> </p><br><blockquote>     action'          ,      action middleware,     middlewar',       ,     . </blockquote><br><p> <a href="https://github.com/reactjs/redux/issues/215">Andrew â€” #215:</a> </p><br><blockquote>  ,    ,     Redux ,        ,       ,     ,        Flummox.          ,            . <p>     (  â€¦   Slack)    Ko  Flux .   ,   ,     Â«Â»   ,    reduxjs   Github'. </p></blockquote><br><p> <a href="https://hashnode.com/ama/with-redux-cisteui6p005gzx53fstg8t6l">Dan â€” Hashnode AMA:</a> </p><br><blockquote>     -    Redux',   ,       Rx      .  ,      ,        Redux  Rx,       middlewar'. </blockquote><br><p> <a href="https://hashnode.com/ama/with-redux-cisteui6p005gzx53fstg8t6l">Andrew â€” Hashnode AMA:</a> </p><br><blockquote> ,   middleware API  ,  ,           .    Flux â€” Flummox â€” ,  ,  -middleware.  -   ,  - ,    ,          .  Redux  ,       ,  ,      . Redux Thunk    ,     .   ,      / .   ! </blockquote><br><h2>   </h2><br><p>          .        ,    Redux   ,    .      README,  Redux'     ,        ,     API  . ,       Redux     ,  Redux    ,       . </p><br><p>    <a href="http://blog.isquaredsoftware.com/2017/05/idiomatic-redux-tao-of-redux-part-2/"> Redux',  2 â€”   </a> ,     ,      Redux,           Â«Â» ,    Redux. </p><br><hr><br><p>  <a href="http://blog.isquaredsoftware.com/2017/05/idiomatic-redux-tao-of-redux-part-1/">A source</a> </p><br><p>          ,            ,     . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/330692/">https://habr.com/ru/post/330692/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../330680/index.html">Estimation of aging parameters using wearable electronics. Lecture in Yandex</a></li>
<li><a href="../330682/index.html">Create a dynamic VKontakte cover.</a></li>
<li><a href="../330684/index.html">The use of national languages â€‹â€‹in SPL programming</a></li>
<li><a href="../330686/index.html">Tutorial: Creating a simple 2D game on Android</a></li>
<li><a href="../330690/index.html">Optimization of combinatorial algorithms</a></li>
<li><a href="../330694/index.html">The digest of fresh materials from the world of the frontend for the last week â„–266 (June 5 - 11, 2017)</a></li>
<li><a href="../330696/index.html">PHP Digest number 110 - the latest news, materials and tools (May 28 - June 11, 2017)</a></li>
<li><a href="../330702/index.html">SQL Server Integration Services (SSIS) for Beginners - Part 2</a></li>
<li><a href="../330704/index.html">Create your own custom Style plugin - Theming Views in Drupal 8</a></li>
<li><a href="../330706/index.html">Responsive Bar Charts with Bokeh, Flask and Python 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
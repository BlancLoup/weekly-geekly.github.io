<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Install Juniper JunOS 10 M / T series</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article describes the installation of Juniper JunOS version 10.4 for M / T series routers on a VMware virtual stand and the subsequent conversion...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Install Juniper JunOS 10 M / T series</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/e3bca521/71c92387/a8b6da88/f940b4fd.jpg"><br><h5>  <i>This article describes the installation of Juniper JunOS version 10.4 for M / T series routers on a VMware virtual stand and the subsequent conversion to QEMU Image for use in GNS3.</i> <br></h5><br><h4>  Pro version </h4><br>  We install the latest version of JunOS, but I would like to note that the installation of earlier versions is done in the same way, so you can take any JunOS OS install media without thinking, there are also no technical reservations about domestic versions containing cryo modules. <br><br><h4>  General idea </h4><br>  JunOS is based on FreeBSD and hardware <i>partly</i> on the x86 architecture, which I mentioned in my previous article. <br>  The plan is: <br>  creating a virtual machine -&gt; installing FreeBSD -&gt; installing JunOS on FreeBSD, after deceiving the PIC check -&gt; completing the installation of JunOS -&gt; converting for QEMU. <br><br>  <i>There are a lot of screenshots under the cut.</i> <br><a name="habracut"></a><br><h4>  Let's get started </h4><br>  At the end of the article I give a link to the reference material. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And so we create a virtual machine with a similar configuration: <br><img src="https://habrastorage.org/storage/eb77ad62/1ca94464/d739192a/9573e5a6.jpg"><br><br>  RAM should set 512MB at the time of installation, after you decide. <br>  NIC is better to take one, then it will not be difficult to use more. <br>  8GB HDD is enough, no more than 2.5GB will actually be occupied <br>  I took 4.11-RELEASE-i386-miniinst.iso as a basis. <br>  To emulate a console interface, you can use the HW Virtual Serial Port from the HW-Group, create a pair of COM ports, pair up.  Assign one to a virtual machine (in our case COM3), connect to the other console. <br><img src="https://habrastorage.org/storage/74cc9766/108e8d8c/7287d6e6/f762fb06.jpg"><br><br><img src="https://habrastorage.org/storage/f1c5f7ad/8f42339e/cd843fa6/e7dfa529.jpg"><br><br>  We make disk layout: <br><img src="https://habrastorage.org/storage/500754b4/6e09da8c/98227d78/946c2b89.jpg"><br><br>  - Click "c", set the value "500M" &lt;press enter&gt;, then select "FS", then enter "/" &lt;press enter&gt; <br>  - Click "c", set the value "500M" &lt;press enter&gt;, then select "Swap" <br>  - Click "c", set the value "100M" &lt;press enter&gt;, then select "FS", then enter "/ config" &lt;press enter&gt; <br>  - Click "c", agree with the set value &lt;press enter&gt;, select "FS", enter "/ var" &lt;press enter&gt;, thus we get a partition the size of everything that remains unused after creating the previous ones. <br>  - Click "q" to complete this operation. <br><br><img src="https://habrastorage.org/storage/61a02751/e3c5f34f/60dd2d08/c49af7c1.jpg"><br><br>  Choose "Exit" <br><img src="https://habrastorage.org/storage/995e46b2/0b3d1ab6/2df04da6/153a787f.jpg"><br><br>  Select the source CD / DVD <br><img src="https://habrastorage.org/storage/d2c23195/33ec693b/5e36c8ef/59fe8143.jpg"><br><br><img src="https://habrastorage.org/storage/0665b03d/814eed92/6e58508c/20abd72d.jpg"><br><br><img src="https://habrastorage.org/storage/0ac1b2ef/199420f6/c3e5082d/307273a1.jpg"><br><br><br>  Set the root password, after <br><img src="https://habrastorage.org/storage/f1daf1b8/363bee14/68d0c8db/29f1f143.jpg"><br><br>  Configure the network: <br><img src="https://habrastorage.org/storage/33146a8b/64c6ef87/22820d29/78483c17.jpg"><br><img src="https://habrastorage.org/storage/89af5a27/53c03f80/d4174d7f/70c446b8.jpg"><br><br>  Choose our adapter: <br><img src="https://habrastorage.org/storage/4d51c889/93880761/04baf94f/0e7fa179.jpg"><br><br><br><br>  Although if you, for example, made a bridge to your network and have DHCP there, you can automatically receive it. <br><img src="https://habrastorage.org/storage/94258592/826511e8/60a967f3/9c3746e3.jpg"><br><br>  Or manually set: <br><img src="https://habrastorage.org/storage/a3c09a7e/976f25b2/896b86c3/0b95c5ae.jpg"><br><br>  Agree with: <br><img src="https://habrastorage.org/storage/3b3a695e/842948dc/d7ee87e1/105b235b.jpg"><br><br>  Exit and &lt;hit enter&gt; <br><img src="https://habrastorage.org/storage/d0d17cb6/0c0b944f/1108fede/3f9cd982.jpg"><br><br>  Find the item "Exit install" and exit. <br><img src="https://habrastorage.org/storage/72e35bfe/a1caa064/24139581/6dfce4b5.jpg"><br><br>  All of our FreeBSD is ready to install JunOS. <br>  The important point: you need to make an edit in the virtual machine configuration. <br>  File with VMX extension: <br>  Find the string <br> <code>scsi0.present = "TRUE"</code> <br>  and replace the value with FALSE <br>  the string <br> <code>scsi0.virtualDev = "lsilogic"</code> <br>  just delete. <br>  Save the file, run our virtual system, these edits will eliminate problems with SCSI, Junper is loaded exclusively from the IDE. <br><br><h4>  Soon it will be JunOS ... </h4><br>  The next step is to copy to / var / tmp, archive with install JunOS media. <br>  The way to do this is up to you, for example, to raise FTP on a machine and download on FreeBSD <s>(I used Pablo`s FTP Server as the server).</s> <br>  <b>It is important that before downloading the file via FTP, switch to binary mode by the client.</b> <br>  Maybe it will be easier for you to mount USB to a virtual machine or something else. <br><br>  And we have jinstall-xxx-xxx-signed.tgz in / var / tmp, now we need to do a trick: <br>  Do something like: <br> <code>#mkdir blah;cd blah;tar zxvf ../jinstall-xxx-xxx-signed.tgz <br> #mkdir blah;cd blah;tar zxvf ../jinstall-xxx-xxx.tgz <br> #mkdir blah;cd blah;tar zxvf ../pkgtools.tgz <br> #cp -v /usr/bin/true bin/checkpic <br>     ,   PIC <br> #tar zcvf ../pkgtools.tgz * <br> #cd ../;rm -rf blah <br> #tar zcfv /var/tmp/jinstall-xxx-xxx.tgz *</code> <br> <br>  I also advise you to remove unnecessary folders and files from unpacking and install: <br> <code>#pkg_add -f jinstall-xxx-xxx.tgz</code> <br> <br><img src="https://habrastorage.org/storage/bfacd6e0/97b33f77/6bcae61e/0fed1b81.jpg"><br><br>  After installation we will execute <br> <code>shutdown -r now</code> <br> <br><img src="https://habrastorage.org/storage/2f4fded6/6da999e4/2a74fbf7/4e76b58c.jpg"><br><br>  Overload.  Wait until the installation is complete and the login prompt appears. <br>  Log in, log in to the team of the same name, correctly shut down JunOS with the request system halt command <br><br><h4>  Conversion </h4><br>  To use our virtual router in a GNS3 environment, an image for QEMU is required. <br>  To get it, we use the qemu-img utility, which is part of QEMU.  The command to convert from me looks like this: <br> <code>qemu-img convert juniper.vmdk -O qcow juniper.img</code> <br> <br>  After receiving the coveted image, create a new juniper router profile in QEMU, add an instance to the workspace and launch it. <br>  The same familiar inscription BTX loader, according to the advice received in the comments to the first article, will not just wait, but open the console and we will be able to observe the JunOS boot.  And at the end of time we will see a greeting. <br><br>  Curtain <b>show version</b> : <br><img src="https://habrastorage.org/storage/16386a40/c8f5f366/4381abba/6a9e4f65.jpg"><br><br>  Now we have JunOS 10, you can start experimenting. <br><br><h5>  The next article is a JunOS build based on the J series recovery image. <br>  Conclusions about the possibilities of virtualization JunOS on the PC, examples of what is ‚Äúgood‚Äù and what is absolutely ‚Äúbad. </h5><br><br><h4>  Reference materials: </h4><br>  <b>Joost's Blog</b> - <a href="http://joost.blogsite.org/wordpress/%3Fp%3D15">joost.blogsite.org/wordpress/?p=15</a> <br>  <b>zloBlog</b> - <a href="http://www.zlonet.ru/page/ustanovka-junos-10-na-pc">www.zlonet.ru/page/ustanovka-junos-10-na-pc</a> <br><br><h4>  Thanks for attention. </h4><br><br>  UPD 17.01: Edit errors. </div><p>Source: <a href="https://habr.com/ru/post/111974/">https://habr.com/ru/post/111974/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../111965/index.html">My first PDA: Casio E-15</a></li>
<li><a href="../111966/index.html">Atomic tablet Odeon TPC-10, part one</a></li>
<li><a href="../111967/index.html">Introducing Kohana 3.0 - Part 6</a></li>
<li><a href="../111968/index.html">Audit of system calls in Linux</a></li>
<li><a href="../111972/index.html">Fire Fox Anatomy</a></li>
<li><a href="../111975/index.html">January Startup Crash Test - in search of projects</a></li>
<li><a href="../111976/index.html">Automation in the service of relevance</a></li>
<li><a href="../111977/index.html">Automated checking of PHP code at commit</a></li>
<li><a href="../111978/index.html">We define user login by its SID using MS SQL</a></li>
<li><a href="../111979/index.html">HTML to PDF</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Drupal optimization</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Drupal is a content widespread CMS and this has put its mark on it - the basic delivery of Drupal is not a ready-made solution for a ce...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Drupal optimization</h1><div class="post__text post__text-html js-mediator-article">  <b>Introduction</b> <br>  Drupal is a content widespread CMS and this has put its mark on it - the basic delivery of Drupal is not a ready-made solution for a certain type of site, but a foundation for its creation.  There are ‚Äúassemblies‚Äù based on Drupal specialized for certain types of sites, for example: news sites.  But such assemblies are currently not very common and are poorly supported.  In this regard, when creating an Internet site based on the standard Drupal delivery, a large number of ready-made additional modules and themes for Drupal are used, or new modules and themes are being developed specifically for the Internet site being created.  The last stage of work on the site is its optimization, which can be divided into 4 steps: <br><ul><li>  built-in Drupal optimization; </li><li>  optimization of Drupal using modules; </li><li>  optimization of the configuration and maintenance of Drupal; </li><li>  server optimization. </li></ul><br><a name="habracut"></a>  <b>Native Drupal Optimization</b> <br><br>  1. Disable all unused modules.  Since when generating a page before sending it to the user's browser, the code of certain modules can be executed, even if the functionality of this module is not used on the site.  The processor time of the server will be spent on code execution, which will lead to a longer page generation.  An example of such a module is Statistics.  Instead of statistics provided by this module, you can use the statistics of the service - Google Analytics. <br><br>  2. When creating a site, we use Drupal version 6, since it has better implemented internal caching tools.  Also in the additional modules (Views, Panel, etc.) for Drupal version 6, effective caching methods are implemented.  Unfortunately, not all Drupal version 5 modules are implemented for Drupal version 6 (for example, the Sphinx module), let's not forget about it when planning the development of an Internet site.  Further we will consider only Drupal version 6. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      3. Let's think about ways to use modules like CCK (Content Construction Kit) before implementing the plan when creating the site.  For example, a simple task of storing thousands of types of products in the site database, their names and descriptions, is solved with the help of: <br><ul><li>  creating thousands of taxonomy terms and linking them to a specific type of material, </li><li>  add a specific CCK field material to a specific material in which the product type will be stored. </li></ul><br>  With the complication of the problem using the condition that all types of products should be divided into 10 groups, the problem is solved in two ways.  Option one, using taxonomy: <br><ul><li>  Taxonomy allows you to create a hierarchy of terms in the dictionary, i.e.  There are 10 first-level terms in the glossary and the remaining terms will be descendants of one of these 10 terms.  Create the desired hierarchy of terms in the dictionary. </li><li>  Install an additional module - Hierarchical Select (http://drupal.org/project/hierarchical_select), which allows, depending on the nesting levels of the taxonomy dictionary, to display a certain number of drop-downs from squeaks.  Those.  When a new product article is added to the site, a user will be shown one drop-down list in which you can select one of 10 first-level terms (group of product types).  After making a selection, the user will be shown another drop-down list in which the descendants of this term will be displayed in the hierarchical terminology tree of the given taxonomy dictionary (product types). </li></ul><br>  Option two, using CCK: <br><ul><li>  It is necessary for a certain material to add 2 additional CCK fields, one for storing product groups, the second for storing product types. </li><li>  It is necessary to adjust the interaction of these fields depending on the choice of values ‚Äã‚Äãin them. </li></ul><br>  The main error in solving such problems creates an additional load on the database: <br><ul><li>  creation of a specific material 10 CCK fields, field for each group; </li><li>  when creating a CCK field for a certain material, its length is not indicated (therefore, by default it is considered that it is the maximum possible). </li></ul><br>  4. We use built-in Drupal caching.  It allows you to cache information retrieved from the database, as well as information obtained by processing the extracted information from PHP. <br><br>  Caching of the menu system, input format filters, administration variables (for example: site name) and module settings is done automatically.  The remaining caching options can be configured on the page: Management -&gt; Performance ( <a href="http://www.example.ru/admin/settings/performance">http://www.example.ru/admin/settings/performance</a> ). <br><br>  On this page you can configure: <br><ul><li>  page compression; </li><li>  block caching; </li><li>  CSS file optimization; </li><li>  javascript file optimization. </li></ul><br>  Turn on page caching in normal mode.  In this mode of page caching, when viewing the page for the first time (by an anonymous, unregistered user in the system), the generated page is saved in the cache.  Later, when viewing this page (by an anonymous user), it is not re-generated, but taken from the cache, which significantly speeds up the work of Drupal. <br><br>  When page caching is turned on in the aggressive mode, when the page is generated, the loading and unloading of the included modules is skipped, so some modules may not work correctly or not at all. <br><br>  Configure the minimum page cache lifetime for anonymous users.  This parameter determines how long after the page is cached, whether the content of this page is updated or not.  If updated, the cache of this page is cleared.  Those.  if the site administrator has changed the page content, he will see it immediately, and anonymous users, only after the minimum cache lifetime. <br><br>  Enable page compression to save compressed page cache and to transfer the page to the user's browser in a compressed form if it supports gzip compression.  Compression is performed using the zlib library installed as an extension in PHP. <br><br>  Enable caching of blocks.  The principle of block caching is similar to the page caching principle.  For a super user (the first registered user when installing Drupal, his id is 1) the blocks are never cached. <br><br>  Enable optimization of CSS and JavaScript files.  This will reduce their size and the number of accesses to the server when pages are loaded into the browser.  All CSS and JavaScript files are collected in one (your file for CSS and your own for JavaScript).  That reduces the number of calls to the server when the page loads. <br><br>  <b>Optimize Drupal with modules</b> <br><br>  1. Install the Authenticated User Page Caching (Authcache) module, you can download it at the Internet address - <a href="http://drupal.org/project/authcache">http://drupal.org/project/authcache</a> .  This module allows you to cache pages for both anonymous users and authenticated (‚Äúlogged in‚Äù) users more qualitatively than Drupal's inline caching.  When installing this module, you need to reconfigure the dynamic content on the pages (for example: display the name of the authenticated user). <br><br>  Authcache saves a compressed page cache for each user or role separately.  The cache is stored in a database or in a third-party caching facility (memcahed, APC, etc.).  Cached versions of pages for authenticated users (except for the super user) are transmitted using AJAX, so a very fast page display in the browser is achieved.  If the authenticated user has javascript disabled in the browser, he gets non-cache pages.  On some servers, the page loading speed is reduced to 1 millisecond. <br><br>  To install the module: <br><ul><li>  download it; </li><li>  unpack the module in the / sites / all / modules folder; </li><li>  Copy the ajax_authcache.php file from the module folder to the root directory of the site (the index.php file is also located there); </li><li>  open the settings.php file (in the / sites / default folder) and add the following code (no notes for // ...) to the beginning of the file after the &lt;? php tag: </li></ul><br>  $ conf ['cache_inc'] = './sites/all/modules/authcache/api/authcache.inc'; <br>  $ conf ['authcache'] = array ( <br>  'default' =&gt; array ( <br>  // caching technology - apc, memcache, db, file, eacc or xcache <br>  'engine' =&gt; 'db', <br>  // if we use memcached (host: port, e..g, 'localhost: 11211') <br>  'server' =&gt; array (), <br>  // if we use memcached shared single process <br>  'shared' =&gt; TRUE <br>  // prefix key cache (for multiple sites) <br>  'prefix' =&gt; '', <br>  // if we use caching on files - specify their path <br>  // save <br>  'path' =&gt; 'files / filecache', <br>  // static array cache (advanced) // static cache array (advanced) <br>  'static' =&gt; FALSE, <br>  ), <br>  ); <br><br>  In this code, the Authcache module settings are set.  We specify that we will store the page cache in the database ('engine' =&gt; 'db'), so all other settings do not matter, leave them unchanged.  More information about the parameters of this code can be found on the page - <a href="http://drupal.org/project/cacherouter">http://drupal.org/project/cacherouter</a> (in English). <br><br>  Enable the Authcache module on the page: Management -&gt; Modules ( <a href="http://www.example.ru/admin/build/modules">http://www.example.ru/admin/build/modules</a> ).  After that, we configure its operation on the page: Management -&gt; Performance -&gt; Authcache ( <a href="http://www.example.ru/admin/settings/performance/authcache">http://www.example.ru/admin/settings/performance/authcache</a> ): <br><ul><li>  specify the roles for which you want to cache the content; </li><li>  cancel all user sessions (checkbox - Invalidate all user sessions) at the first start; </li><li>  setting the cache storage time (in hours); </li><li>  press the button to save and clear the cache (Save &amp; clear cached pages) to save the changes. </li></ul><br><br>  Change the settings of the elements on the pages of the site, so that the page for different users belonging to the same role would look the same (ie, for example: we will forbid users to control the visibility of blocks on the site, if such blocks exist). <br><br>  We use variables in theme templates: <br><ul><li>  $ user_name - to display the name of the authenticated user; </li><li>  $ user_link - to display links related to the user profile; </li><li>  $ is_page_authcache - if set to TRUE then all the hooks of this theme template will be saved to the cache. </li></ul><br>  You can also get acquainted with an example - / sites / all / modules / authcache / modules / authcache_example, which shows how to configure blocks with custom content (with user content). <br><br>  2. If you need to cache pages only for anonymous users (without authenticated users), you can install the Cache Router module.  This module underlies the Authcache module and caches pages better than the built-in Drupal caching.  Download the module at the Internet address - <a href="http://drupal.org/project/authcache">http://drupal.org/project/authcache</a> .  After downloading, unpack the module in the / sites / all / modules folder.  Enable the Cache Router module on the page: Management -&gt; Modules ( <a href="http://www.example.ru/admin/build/modules">http://www.example.ru/admin/build/modules</a> ).  Open the settings.php file (in the / sites / default folder) and add the following code to the beginning of the file before the &lt;? Php tag: <br><br>  $ conf ['cache_inc'] = './sites/all/modules/cacherouter/cacherouter.inc'; <br>  $ conf ['cacherouter'] = array ( <br>  'default' =&gt; array ( <br>  'engine' =&gt; 'db', <br>  'server' =&gt; array (), <br>  'shared' =&gt; TRUE <br>  'prefix' =&gt; '', <br>  'path' =&gt; 'sites / default / files / filecache', <br>  'static' =&gt; FALSE, <br>  'fast_cache' =&gt; TRUE, <br>  ), <br>  ); <br><br>  3. After the implementation of the actions above, the pages of the created site will be given by the server to the user's browser in a compressed form, but CSS and JavaScript are not.  Fix this: <br><ul><li>  let's download the CSS Gzip module from the page - <a href="http://drupal.org/project/css_gzip">http://drupal.org/project/css_gzip</a> ; </li><li>  Download the JavaScript Aggregator module from <a href="http://drupal.org/project/javascript_aggregator">http://drupal.org/project/javascript_aggregator</a> ; </li><li>  unpack the modules in the / sites / all / modules folder; </li><li>  enable modules on the page: Management -&gt; Modules ( <a href="http://www.example.ru/admin/build/modules">http://www.example.ru/admin/build/modules</a> ); </li><li>  enable CSS and JavaScript compression on the page: Management -&gt; Performance ( <a href="http://www.example.ru/admin/settings/performance">http://www.example.ru/admin/settings/performance</a> ), ticking the checkboxes - GZip CSS and GZip JavaScript; </li><li>  let's make a change to the .htaccess file located in the root directory of the site (based on the data from the README.txt module of the CSS Gzip module), assign the following code to the &lt;IfModule mod_rewrite.c&gt; and &lt;/ IfModule&gt; tags: </li></ul><br>  ### START CSS GZIP ### <br>  # Requires mod_mime to be enabled. <br>  &lt;IfModule mod_mime.c&gt; <br>  # Send any files ending in .gz with x-gzip encoding in the header. <br>  AddEncoding x-gzip .gz <br>  &lt;/ IfModule&gt; <br>  # Gzip compressed css files of the type 'text / css'. <br>  &lt;FilesMatch "\ .css \ .gz $"&gt; <br>  ForceType text / css <br>  &lt;/ FilesMatch&gt; <br>  &lt;IfModule mod_rewrite.c&gt; <br>  RewriteEngine on <br>  # Serve gzip compressed css files <br>  RewriteCond% {HTTP: Accept-encoding} gzip <br>  RewriteCond% {REQUEST_FILENAME} \. Gz -s <br>  RewriteRule ^ (. *) \. Css $ 1 \ .css \ .gz [L, QSA, T = text / css] <br>  &lt;/ IfModule&gt; <br>  ### End CSS GZIP ### <br><ul><li>  save the settings and clear the cache. </li></ul><br>  If you need to use additional CSS and JavaScript in the skin templates, it is advisable to connect them using the commands: <br><ul><li>  drupal_add_css ('path to CSS relative to the root directory of the site'); </li><li>  drupal_add_js ('path to javascript relative to the root directory of the site'); </li></ul><br>  in order to be optimized (included in one source CSS or JavaScript file) and compressed, along with all other CSS or JavaScript files used on the site. <br><br>  <b>Optimize Drupal configuration and maintenance</b> <br><br>  From optimizing Drupal using modules, let's move on to more complex optimization ‚Äî optimizing the configuration and maintenance of Drupal. <br><br>  1. Reduce the storage time of user sessions.  Since Drupal stores them in its database, reducing their storage time will unload the database, especially if thousands of users come to the site per day.  By default, sessions are stored for 55 hours, reducing their storage time to 24 hours.  To do this, on the server in the / sites / default folder in the settings.php file, change the line: <br><br>  ini_set ('session.gc_maxlifetime', 200000); <br><br>  on: <br><br>  ini_set ('session.gc_maxlifetime', 86400);  // 24 hours (in seconds) <br><br>  Also in this file, you can shorten the lifetime of cached session pages to 24 hours by changing the line: <br><br>  ini_set ('session.cache_expire', 200000); <br><br>  on: <br><br>  ini_set ('session.cache_expire', 1440);  // 24 hours (in minutes) <br><br>  Lastly, in the same file, we change the cookie storage time in the user's browser, reducing it to 24 hours: <br><br>  ini_set ('session.cookie_lifetime', 86400);  // 24 hours (in seconds) <br><br>  If you set the storage time for cookies in the user's browser to 0, then the cookie will be deleted immediately after the Internet browser is closed by the user. <br><br>  2. Reduce the number of messages logging the work site, stored in the database.  On the page: Manage -&gt; Reports and Messages -&gt; Database Reports ( <a href="http://www.example.ru/admin/settings/logging/dblog">http://www.example.ru/admin/settings/logging/dblog</a> ), set the required maximum of reports stored in the database.  These reports are useful for viewing site hacking attempts, so the minimum that you can select is 100 entries.  You can view these reports by going to the Manage -&gt; Recent entries in the system log ( <a href="http://www.example.ru/admin/reports/dblog">http://www.example.ru/admin/reports/dblog</a> ). <br><br>  3. Configure the execution of regular procedures (cron tasks), since when they are executed, the logs of the site logging messages, outdated cache entries, and other statistical data are cleared.  The easiest way to configure automatic startup of regular procedures is to install the module - Poormanscron.  Download this module at the Internet address - <a href="http://drupal.org/project/poormanscron">http://drupal.org/project/poormanscron</a> .  We will unpack it into the / sites / all / modules folder, activate the module on the page: Management -&gt; Modules ( <a href="http://www.example.ru/admin/build/modules">http://www.example.ru/admin/build/modules</a> ).  Set the Cron launch interval on the page: Management -&gt; Poormanscron ( <a href="http://www.example.ru/admin/settings/poormanscron">http://www.example.ru/admin/settings/poormanscron</a> ) to 360 minutes (once every 6 hours). <br><br>  4. Drupal has a Throttle module, which estimates the number of visitors to the site and disables some functionality if the threshold set by the administrator is reached.  After activating the module on the page: Management -&gt; Modules ( <a href="http://www.example.ru/admin/build/modules">http://www.example.ru/admin/build/modules</a> ), you can see that some of the modules on this page have checkboxes next to the enable checkboxes - whether this module should be controlled by Throttle or not.  Also, some blocks can be regulated by Throttle (Control -&gt; Blocks ( <a href="http://www.example.ru/admin/build/block">http://www.example.ru/admin/build/block</a> )).  Throttle settings are made on the Manage -&gt; Regulator page ( <a href="http://www.example.ru/admin/settings/throttle">http://www.example.ru/admin/settings/throttle</a> ), where you specify the minimum number of anonymous visitors and the minimum number of registered users to enable site restriction for them.  On this page, we also set the probabilistic limiter of the autoregulator to 20%, so that for one out of every 5 requests for issuing a page to the browser to the user, a query is made to the database to determine the load on the site. <br><br>  <b>Server optimization</b> <br><br>  Since the site server can work under different operating systems: <br><ul><li>  Windows </li><li>  Lunux </li><li>  Freebsd </li></ul><br>  then in each case the server optimization settings will be different (i.e., the installation of eAccelerator in Windows and Lunux is very different).  Below are only the basic recommendations for server optimization.  Details of the recommendations considered only the installation of a PHP accelerator on the Ubuntu 8.04 server, since the PHP accelerator significantly speeds up the work of the site. <br><br>  1. Install eAccelerator, it is a PHP accelerator, the main purpose of which is to cache the binary representation of the code. <br><br>  Connect to the server via SSH and log in as root.  Run the commands to install the additional php5-dev package: <br><br>  sudo apt-get install php5-dev <br>  sudo apt-get install make <br><br>  Run the commands to install eAccelerator: <br><br>  sudo cd / tmp / <br>  sudo wget <a href="">bart.eaccelerator.net/source/0.9.5.3/eaccelerator-0.9.5.3.tar.bz2</a> <br>  sudo tar xvjf eaccelerator-0.9.5.3.tar.bz2 <br>  sudo cd eaccelerator-0.9.5.3 <br>  sudo phpize <br>  sudo ./configure --enable-eaccelerator = shared <br>  sudo make <br>  sudo make install <br><br>  Let's edit the php.ini file in the / etc / php5 / apache2 folder, insert the code in the beginning of the file after the [PHP] tag: <br><br>  ;  eAccelerator configuration <br>  ;  Note that it can be installed as a PHP extension or as a zend_extension <br>  ;  If you are using php you need use <br>  ;  zend_extension_ts instead of zend_extension <br>  ; extension = "/usr/lib/php5/20060613+lfs/eaccelerator.so" <br>  zend_extension = "/usr/lib/php5/20060613+lfs/eaccelerator.so" <br>  eaccelerator.shm_size = "16" <br>  eaccelerator.cache_dir = "/ var / cache / eaccelerator" <br>  eaccelerator.enable = "1" <br>  eaccelerator.optimizer = "1" <br>  eaccelerator.check_mtime = "1" <br>  eaccelerator.debug = "0" <br>  eaccelerator.filter = "" <br>  eaccelerator.shm_max = "0" <br>  eaccelerator.shm_ttl = "0" <br>  eaccelerator.shm_prune_period = "0" <br>  eaccelerator.shm_only = "0" <br>  eaccelerator.compress = "1" <br>  eaccelerator.compress_level = "9" <br>  eaccelerator.allowed_admin_path = "/ var / www / eaccelerator" <br><br>  When using Zend Optimizer and / or ionCube Loader, the code above will look like this: <br><br>  ;  eAccelerator configuration <br>  ;  Note that it can be installed as a PHP extension or as a zend_extension <br>  ;  If you are using php you need use <br>  ;  zend_extension_ts instead of zend_extension <br>  ; extension = "/usr/lib/php5/20060613+lfs/eaccelerator.so" <br>  zend_extension = "/usr/lib/php5/20060613+lfs/eaccelerator.so" <br>  eaccelerator.shm_size = "16" <br>  eaccelerator.cache_dir = "/ var / cache / eaccelerator" <br>  eaccelerator.enable = "1" <br>  eaccelerator.optimizer = "1" <br>  eaccelerator.check_mtime = "1" <br>  eaccelerator.debug = "0" <br>  eaccelerator.filter = "" <br>  eaccelerator.shm_max = "0" <br>  eaccelerator.shm_ttl = "0" <br>  eaccelerator.shm_prune_period = "0" <br>  eaccelerator.shm_only = "0" <br>  eaccelerator.compress = "1" <br>  eaccelerator.compress_level = "9" <br>  eaccelerator.allowed_admin_path = "/ var / www / eaccelerator" <br><br>  ;  ionCube Loader configuration <br>  zend_extension = / usr / local / lib / ioncube / ioncube_loader_lin_5.2.so <br><br>  ;  Zend Optimizer configuration <br>  zend_extension = / usr / local / lib / Zend / ZendOptimizer.so <br>  zend_optimizer.optimization_level = 15 <br><br>  Create a cache directory for eAccelerator by running the following commands: <br><br>  sudo mkdir -p / var / cache / eaccelerator <br>  sudo chmod 0777 / var / cache / eaccelerator <br><br>  Restart Apache: <br><br>  sudo /etc/init.d/apache2 restart <br><br>  2. We recommend that you install the nginx Web server and configure it to work with the Apache Web server so that the pages are sent to the browser by the Apache user, and the static content (CSS, JavaScript, photos, etc.) is nginx.  Or completely replace the Apache web server with the nginx web server. <br><br>  3. Install the mod_expires module in Apache, which allows Drupal to send Expires HTTP headers by caching all static files (images, css, javascript, etc.) in the user's Internet browser for a certain period or until new versions of files appear.  The settings for interaction between Drupal and the mod_expires module of the Apache Web server are located in the .htaccess file in the root directory of the site: <br><br>  # Enable mod_expires. <br>  &lt;IfModule mod_expires.c&gt; <br>  # Allow expiration. <br>  ExpiresActive On <br><br>  # Cache all files for two weeks after access (A). <br>  ExpiresDefault A1209600 <br><br>  # Do not cache dynamically generated pages. <br>  ExpiresByType text / html A1 <br>  &lt;/ IfModule&gt; <br><br>  4. To speed up the processing of .htaccess files by the web server, their contents can be transferred to the main Apache configuration file - httpd.conf.  After that, it is necessary to prohibit the search for .htaccess files within the root directory of the web server by setting AllowOverride to None: <br><br>  &lt;Directory /&gt; <br>  AllowOverride <br>  ... <br>  &lt;/ Directory&gt; <br><br>  Since some modules inside their directories may contain .htaccess files, you should carefully work with this type of optimization, so that if you transfer the contents of all .htaccess files to httpd.conf, do not miss more than one .htaccess file. <br><br>  5. Install on the server: <br><ul><li>  log file analysis system (for example: AWstats), </li><li>  server performance monitoring system (for example: Munin); </li><li>  system for accounting of network traffic (for example: Vnstat). </li></ul><br><br>  6. Turn on the MySQL cache and set its size to 64 megabytes.  To do this, edit the my.cnf file in the / etc / mysql folder (when using Ubuntu 8.04).  Change the value: <br><br>  # query_cache_limit = 1M <br>  # query_cache_size = 16M <br><br>  on: <br><br>  query_cache_limit = 1M <br>  query_cache_size = 64M <br><br>  Then restart MySQL with the command: <br><br>  /etc/init.d/mysql restart <br><br>  A cache that is too small is inefficient, and a cache that is too large causes the search for the necessary information in the cache to take a long time.  Therefore, we recommend experimenting with the cache size on each specific server and selecting its optimal size. <br><br>  7. Check - the CPU load, the lack of RAM or disk space and possible overload of the server communication line with the Internet.  If it is necessary to place the Database on a separate server, for this we change, the settings for connecting to the database are in the settings.php file (in the / sites / default folder).  Or we will place the site on a cluster of servers (for example: using the services of Amazon C2). <br><br>  <b>Conclusion</b> <br><br>  To view server information from Drupal there is a handy module - System information ( <a href="http://drupal.org/project/systeminfo">http://drupal.org/project/systeminfo</a> ).  After it is installed and activated, information about your server can be viewed on the page - <a href="http://www.example.ru/admin/reports/systeminfo">http://www.example.ru/admin/reports/systeminfo</a> . <br><br>  To test the speed of the site and optimize its content, it is very convenient to use the YSlow plugin for the Internet browser Firefox, which shows detailed statistics on how to load pages from your site. <br><br>  An updated version of the article is divided into chapters, available on the website: <a href="http://www.mydrupalbook.ru/">http://www.mydrupalbook.ru/</a> . <br><br>  Author: Elena Tsaplina &amp; Vyacheslav <br></div><p>Source: <a href="https://habr.com/ru/post/64286/">https://habr.com/ru/post/64286/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../64270/index.html">Softline Venture Partners will hold a competition for the idea of ‚Äã‚Äãthe best "cloud" application at the iCamp conference</a></li>
<li><a href="../64272/index.html">How to make your temporary mail service</a></li>
<li><a href="../64276/index.html">Harsh everyday service engineer</a></li>
<li><a href="../64280/index.html">Virtual functions and destructor</a></li>
<li><a href="../64283/index.html">July 22 will happen the longest total solar eclipse of the XXI century</a></li>
<li><a href="../64287/index.html">Windows 95 on iPhone</a></li>
<li><a href="../64288/index.html">Invites to http://trendclub.ru</a></li>
<li><a href="../64289/index.html">Blogspot contact information</a></li>
<li><a href="../64290/index.html">Firefox and Parallelization to Processes</a></li>
<li><a href="../64291/index.html">Captcha and Usability</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Program for digitizing graphs, drawings, drawings: algorithms for the project ‚ÄúTutor: Mathematics‚Äù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Content 
 opening speech 
 Principle of operation 
 Program description 
 Final program code 
 Advantages of working with digitized functions with exa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Program for digitizing graphs, drawings, drawings: algorithms for the project ‚ÄúTutor: Mathematics‚Äù</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ac/nq/lt/acnqltv3k9dopboginytctelag0.png"></div><br><h1>  Content </h1><br>  <a href="https://habr.com/ru/company/tdb/blog/351068/">opening speech</a> <br>  <a href="https://habr.com/ru/company/tdb/blog/351068/">Principle of operation</a> <br>  <a href="https://habr.com/ru/company/tdb/blog/351068/">Program description</a> <br>  <a href="https://habr.com/ru/company/tdb/blog/351068/">Final program code</a> <br>  <a href="https://habr.com/ru/company/tdb/blog/351068/">Advantages of working with digitized functions with examples</a> <br>  <a href="https://habr.com/ru/company/tdb/blog/351068/">Epilogue</a> <br><br><hr><br><a name="1"></a><h2>  opening speech </h2><br>  In various fields related to science and education, engineering encounters a <i>task related to obtaining data from graphs</i> created at the time when digital media did not exist, or real data for which graphs were created were lost, or, finally, the schedule is the final form of work of some devices that do not give a set of coordinates of points in an explicit form. <br><br>  In order to get data, you need to ‚Äú <b>digitize</b> ‚Äù such a graph (or graphic object), in other words, you need to get a set of abscissas and ordinates of the graph points - then you can perform various manipulations on them: build a new (qualitative) graph, perform calculations, translating it into a new format (for example, building a spline), etc. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the project " <a href="https://repetitor.school/">Tutor: Mathematics</a> " (read the article on Habrahabr - <a href="https://habrahabr.ru/company/tdb/blog/350006/">"Tutor: Mathematics" to prepare for the EGE and CDF - from idea to release. A story about a unique educational project</a> ) we met this problem in two main ways: <br><br><ul><li>  ‚ÄúDigitizing‚Äù the graphics in order to make it fit our style or just make it look decent; </li><li>  obtaining a set of base points for constructing geometric drawings, histograms, etc., based on the author‚Äôs freehand drawing (or using simple graphic systems). </li></ul><br>  This post contains the code for the <b><a href="https://habr.com/ru/company/tdb/blog/351068/">graphicsDigitizing</a></b> function created for this, and also briefly describes how it works.  You can also see how it works <a href="https://habr.com/ru/company/tdb/blog/351068/">live</a> . <br><a name="habracut"></a><br><a name="2"></a><h2>  Principle of operation </h2><br>  The work of the program is quite simple.  It is necessary to put a digital illustration (scan, photo, screenshot, another picture) on some field on the ‚Äúfirst‚Äù layer.  Then it is processed manually: <br><br><ul><li>  selection of the working area (rectangle) with the specification of the ‚Äúreal‚Äù coordinates of its left lower and right upper vertex - in other words, the domain of definition and the values ‚Äã‚Äãof that function (graph, set of points), which we get as a result; </li><li>  setting the control points on which the B-spline of a given degree will be built; </li><li>  preview the result; </li><li>  output of the result in a calculated form for further work. </li></ul><br>  We chose <a href="https://ru.wikipedia.org/wiki/B-%25D1%2581%25D0%25BF%25D0%25BB%25D0%25B0%25D0%25B9%25D0%25BD">B-splines</a> for several reasons: <br><br><ul><li>  they give flexible curves (if the degree of the B-spline is higher than 1st), </li><li>  give compact analytical representations of curves ( <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D1%2580%25D0%25B8%25D0%25B2%25D0%25B0%25D1%258F_%25D0%2591%25D0%25B5%25D0%25B7%25D1%258C%25D0%25B5">Bezier curves</a> are a degenerate case of B-splines, in which each point, speaking simply, influences the whole look of the curve); </li><li>  they are easy to use (they are implemented in many packages and are not that complicated if you need to program them from scratch on your own). </li></ul><br>  The figure below shows a set of points (control points), a set of B-splines of the 1st, 2nd and 3rd degrees, as well as a Bezier curve (in the case shown, this is essentially a B-spline of the 7th degree). <br><br><img src="https://habrastorage.org/webt/nf/ih/gr/nfihgriyanekxjkqsbydgze2goa.png"><br><br>  To create a program for digitizing graphs - like for many other tasks - we use the <a href="http://www.wolfram.com/">Wolfram Language</a> . <br><br><a name="3"></a><h2>  Program description </h2><br>  Of course, we will not describe how the entire <a href="https://habr.com/ru/company/tdb/blog/351068/">code of the program</a> presented below works in steps, it would be very long and, as it seems to us, those who are interested in the issue under consideration or, moreover, those whom he is acutely aware of will be able to understand in all the "cogs" of the code, good, it is short. <br><br>  We will pay attention to its main elements. <br><br>  Let's start with a set of functions that will be required for implementation.  You can look at what each of them does in the documentation: <br><br>  <a href="http://reference.wolfram.com/language/ref/CompoundExpression.html">CompoundExpression</a> , <a href="http://reference.wolfram.com/language/ref/ClearAll.html">ClearAll</a> , <a href="http://reference.wolfram.com/language/ref/SetDelayed.html">SetDelayed</a> , <a href="http://reference.wolfram.com/language/ref/Optional.html">Optional</a> , <a href="http://reference.wolfram.com/language/ref/Pattern.html">Pattern</a> , <a href="http://reference.wolfram.com/language/ref/Blank.html">Blank</a> , <a href="http://reference.wolfram.com/language/ref/Image.html">Image</a> , <a href="http://reference.wolfram.com/language/ref/ImageResize.html">ImageResize</a> , <a href="http://reference.wolfram.com/language/ref/List.html">List</a> , <a href="http://reference.wolfram.com/language/ref/Rule.html">Rule</a> , <a href="http://reference.wolfram.com/language/ref/ColorSpace.html">ColorSpace</a> , <a href="http://reference.wolfram.com/language/ref/With.html">With</a> , <a href="http://reference.wolfram.com/language/ref/Set.html">Set</a> , <a href="http://reference.wolfram.com/language/ref/ImageDimensions.html">ImageDimensions</a> , <a href="http://reference.wolfram.com/language/ref/CreateDialog.html">CreateDialog</a> , <a href="http://reference.wolfram.com/language/ref/ExpressionCell.html">ExpressionCell</a> , <a href="http://reference.wolfram.com/language/ref/DynamicModule.html">DynamicModule</a> , <a href="http://reference.wolfram.com/language/ref/Grid.html">Grid</a> , <a href="http://reference.wolfram.com/language/ref/DefaultButton.html">DefaultButton</a> , <a href="http://reference.wolfram.com/language/ref/DialogReturn.html">DialogReturn</a> , <a href="http://reference.wolfram.com/language/ref/If.html">If</a> , <a href="http://reference.wolfram.com/language/ref/Less.html">Less</a> , <a href="http://reference.wolfram.com/language/ref/Length.html">Length</a> , <a href="http://reference.wolfram.com/language/ref/None.html">None</a> , <a href="http://reference.wolfram.com/language/ref/Drop.html">Drop</a> , <a href="http://reference.wolfram.com/language/ref/Transpose.html">Transpose</a> , <a href="http://reference.wolfram.com/language/ref/Part.html">Part</a> , <a href="http://reference.wolfram.com/language/ref/Span.html">Span</a> , <a href="http://reference.wolfram.com/language/ref/ReplaceAll.html">ReplaceAll</a> , <a href="http://reference.wolfram.com/language/ref/Rescale.html">Rescale</a> , <a href="http://reference.wolfram.com/language/ref/All.html">All</a> , <a href="http://reference.wolfram.com/language/ref/Min.html">Min</a> , <a href="http://reference.wolfram.com/language/ref/Max.html">Max</a> , <a href="http://reference.wolfram.com/language/ref/RuleDelayed.html">RuleDelayed</a> , <a href="http://reference.wolfram.com/language/ref/Real.html">Real</a> , <a href="http://reference.wolfram.com/language/ref/Round.html">Round</a> , <a href="http://reference.wolfram.com/language/ref/CopyToClipboard.html">CopyToClipboard</a> , <a href="http://reference.wolfram.com/language/ref/BSplineCurve.html">BSplineCurve</a> , <a href="http://reference.wolfram.com/language/ref/SplineDegree.html">SplineDegree</a> , <a href="http://reference.wolfram.com/language/ref/TabView.html">TabView</a> , <a href="http://reference.wolfram.com/language/ref/Row.html">Row</a> , <a href="http://reference.wolfram.com/language/ref/Slider.html">Slider</a> , <a href="http://reference.wolfram.com/language/ref/Dynamic.html">Dynamic</a> , <a href="http://reference.wolfram.com/language/ref/Times.html">Times</a> , <a href="http://reference.wolfram.com/language/ref/Pi.html">Pi</a> , <a href="http://reference.wolfram.com/language/ref/Power.html">Power</a> , <a href="http://reference.wolfram.com/language/ref/ImageSize.html">ImageSize</a> , <a href="http://reference.wolfram.com/language/ref/Small.html">Small</a> , <a href="http://reference.wolfram.com/language/ref/Slider2D.html">Slider2D</a> , <a href="http://reference.wolfram.com/language/ref/SetterBar.html">SetterBar</a> , <a href="http://reference.wolfram.com/language/ref/InputField.html">InputField</a> , <a href="http://reference.wolfram.com/language/ref/FieldSize.html">FieldSize</a> , <a href="http://reference.wolfram.com/language/ref/Alignment.html">Alignment</a> , <a href="http://reference.wolfram.com/language/ref/Left.html">Left</a> , <a href="http://reference.wolfram.com/language/ref/Spacings.html">Spacings</a> , <a href="http://reference.wolfram.com/language/ref/Automatic.html">Automatic</a> , <a href="http://reference.wolfram.com/language/ref/LocatorPane.html">LocatorPane</a> , <a href="http://reference.wolfram.com/language/ref/Framed.html">Framed</a> , <a href="http://reference.wolfram.com/language/ref/Graphics.html">Graphics</a> , <a href="http://reference.wolfram.com/language/ref/Inset.html">Inset</a> , <a href="http://reference.wolfram.com/language/ref/Cos.html">Cos</a> , <a href="http://reference.wolfram.com/language/ref/Sin.html">Sin</a> , <a href="http://reference.wolfram.com/language/ref/EdgeForm.html">EdgeForm</a> , <a href="http://reference.wolfram.com/language/ref/Directive.html">Directive</a> , <a href="http://reference.wolfram.com/language/ref/AbsoluteThickness.html">AbsoluteThickness</a> , <a href="http://reference.wolfram.com/language/ref/RGBColor.html">RGB Color</a> , <a href="http://reference.wolfram.com/language/ref/Opacity.html">Opacity</a> , <a href="http://reference.wolfram.com/language/ref/Yellow.html">Yellow</a> , <a href="http://reference.wolfram.com/language/ref/Rectangle.html">Rectangle</a> , <a href="http://reference.wolfram.com/language/ref/Dashed.html">Dashed</a> , <a href="http://reference.wolfram.com/language/ref/Blue.html">Blue</a> , <a href="http://reference.wolfram.com/language/ref/PlotRange.html">PlotRange</a> , <a href="http://reference.wolfram.com/language/ref/Plus.html">Plus</a> , <a href="http://reference.wolfram.com/language/ref/LocatorAutoCreate.html">LocatorAutoCreate</a> , <a href="http://reference.wolfram.com/language/ref/True.html">True</a> , <a href="http://reference.wolfram.com/language/ref/Center.html">Center</a> , <a href="http://reference.wolfram.com/language/ref/Top.html">Top</a> , <a href="http://reference.wolfram.com/language/ref/Axes.html">Axes</a> , <a href="http://reference.wolfram.com/language/ref/AspectRatio.html">AspectRatio</a> , <a href="http://reference.wolfram.com/language/ref/Initialization.html">Initialization</a> , <a href="http://reference.wolfram.com/language/ref/Null.html">Null</a> , <a href="http://reference.wolfram.com/language/ref/Condition.html">Condition</a> , <a href="http://reference.wolfram.com/language/ref/String.html">String</a> , <a href="http://reference.wolfram.com/language/ref/FileExistsQ.html">FileExists</a> , <a href="http://reference.wolfram.com/language/ref/Import.html">Import</a> , <a href="http://reference.wolfram.com/language/ref/BlankNullSequence.html">BlankNullSequence</a> , <a href="http://reference.wolfram.com/language/ref/Echo.html">Echo</a> , <a href="http://reference.wolfram.com/language/ref/Inactive.html">Inactive</a> , <a href="http://reference.wolfram.com/language/ref/Nothing.html">Nothing</a> <br><br>  One of the main functions in the work of this program is the <b>DynamicModule</b> function for creating interactive spaces and objects.  With its help, the "revival" of the whole structure occurs. <br><br>  The <b>Grid</b> function is necessary for organizing space - it allows you to build tables of various shapes and place content in their cells: texts, sliders, illustrations, interactive objects, etc. <br><br>  The <b>LocatorPane</b> , <b>Slider</b> , <b>Slider2D</b> , <b>InputField functions</b> are used to make interactive elements ‚Äî a field with a selection of points, sliders (one- and two-dimensional, respectively), a text input field (for the function definition area). <br><br>  To ‚Äúdraw‚Äù graphic primitives, use the <b>Graphics</b> function (and, if necessary in 3D, use <b>Graphics3D</b> ). <br><br>  And, of course, the most important here is the <b>BSplineCurve</b> function, which allows you to represent a set of points as a finished B-spline curve. <br><br><img src="https://habrastorage.org/webt/iv/uv/_o/ivuv_ozadntwbr21s8wh7ydhmhe.png"><br><br>  In the video below you can see how the program works live: <br><br><a name="youtube"></a><iframe width="560" height="315" src="https://www.youtube.com/embed/6v2b2Bpwi48" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><a name="4"></a><h2>  Final program code </h2><br>  The final function is actually not as great as it might seem.  Although this, of course, a direct consequence of the great opportunities Wolfram Language: <br><br><div class="spoiler">  <b class="spoiler_title">View code</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/as/1t/3o/as1t3obji0peoyppy5my4yyysne.png"><br><br><pre><code class="hljs markdown">ClearAll[<span class="hljs-string"><span class="hljs-string">graphicsDigitizing</span></span>]; graphicsDigitizing[<span class="hljs-string"><span class="hljs-string">image_Image: ImageResize[Image[{{{1,1,1}}},ColorSpace-&gt;"RGB"</span></span>],{600,600}]]:=With[<span class="hljs-string"><span class="hljs-string"> {im=ImageResize[image,600</span></span>]}, With[<span class="hljs-string"><span class="hljs-string"> {imdim=ImageDimensions[im</span></span>]}, CreateDialog[<span class="hljs-string"><span class="hljs-string">{ ExpressionCell[ DynamicModule[ {degree,xmin=0,xmax=1,ymin=0,ymax=1,currentFunction,u,unew,udiap,\[Alpha</span></span>],\[<span class="hljs-string"><span class="hljs-string">Beta</span></span>]1,\[<span class="hljs-string"><span class="hljs-string">Beta</span></span>]2}, Grid[<span class="hljs-string"><span class="hljs-string"> { { DefaultButton[ "    ", DialogReturn[ With[ {var1=If[ Length[u</span></span>]<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">4,</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">None</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">unew</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">Drop[u,2];</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">udiap</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">Transpose[u[[1;;2]]];</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Transpose</span></span></span></span><span class="xml"><span class="hljs-tag">[ { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Rescale</span></span></span></span><span class="xml"><span class="hljs-tag">[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">unew</span></span></span></span><span class="xml"><span class="hljs-tag">[[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">All</span></span></span></span><span class="xml"><span class="hljs-tag">,</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">1</span></span></span></span><span class="xml"><span class="hljs-tag">]],{</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Min</span></span></span></span><span class="xml"><span class="hljs-tag">[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">udiap</span></span></span></span><span class="xml"><span class="hljs-tag">[[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">1</span></span></span></span><span class="xml"><span class="hljs-tag">]]],</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Max</span></span></span></span><span class="xml"><span class="hljs-tag">[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">udiap</span></span></span></span><span class="xml"><span class="hljs-tag">[[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">1</span></span></span></span><span class="xml"><span class="hljs-tag">]]]},{</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">xmin</span></span></span></span><span class="xml"><span class="hljs-tag">,</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">xmax</span></span></span></span><span class="xml"><span class="hljs-tag">}], </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Rescale</span></span></span></span><span class="xml"><span class="hljs-tag">[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">unew</span></span></span></span><span class="xml"><span class="hljs-tag">[[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">All</span></span></span></span><span class="xml"><span class="hljs-tag">,</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">2</span></span></span></span><span class="xml"><span class="hljs-tag">]],{</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Min</span></span></span></span><span class="xml"><span class="hljs-tag">[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">udiap</span></span></span></span><span class="xml"><span class="hljs-tag">[[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">2</span></span></span></span><span class="xml"><span class="hljs-tag">]]],</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Max</span></span></span></span><span class="xml"><span class="hljs-tag">[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">udiap</span></span></span></span><span class="xml"><span class="hljs-tag">[[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">2</span></span></span></span><span class="xml"><span class="hljs-tag">]]]},{</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ymin</span></span></span></span><span class="xml"><span class="hljs-tag">,</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ymax</span></span></span></span><span class="xml"><span class="hljs-tag">}]} ]/</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">.x_Real:</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>Round[<span class="hljs-string"><span class="hljs-string">x,0.01</span></span>]],var2=degree}, CopyToClipboard[<span class="hljs-string"><span class="hljs-string">BSplineCurve[var1,SplineDegree-&gt;var2</span></span>]]] ]] }, { TabView[<span class="hljs-string"><span class="hljs-string"> {""-&gt;Grid[ { { Grid[ { { Row[{" :",Slider[Dynamic@\[Alpha</span></span>],{-Pi/6,Pi/6},ImageSize-&gt;Small]}," "] }, { Row[<span class="hljs-string"><span class="hljs-string">{":",Slider2D[Dynamic[\[Beta</span></span>]1],{0.2 Max[<span class="hljs-string"><span class="hljs-string">imdim</span></span>] {-1,-1},0.2 Max[<span class="hljs-string"><span class="hljs-string">imdim</span></span>] {1,1}}],Slider2D[<span class="hljs-string"><span class="hljs-string">Dynamic[\[Beta</span></span>]2],{0.2 Max[<span class="hljs-string"><span class="hljs-string">imdim</span></span>] {-1,-1},0.2 Max[<span class="hljs-string"><span class="hljs-string">imdim</span></span>] {1,1}}]}," "] }, { Row[<span class="hljs-string"><span class="hljs-string">{" :",SetterBar[Dynamic@degree,{0,1,2,3,4}</span></span>]}," "] }, { Grid[<span class="hljs-string"><span class="hljs-string">{{"\!\(\*SubscriptBox[\(x\), \(min\)</span></span>]\) =", InputField[<span class="hljs-string"><span class="hljs-string">Dynamic[xmin</span></span>],FieldSize-&gt;{3,1}],"\!\(\<span class="hljs-emphasis"><span class="hljs-emphasis">*SubscriptBox[\(x\), \(max\)]\) =", InputField[Dynamic[xmax],FieldSize-&gt;{3,1}]},{"\!\(\*</span></span>SubscriptBox[<span class="hljs-string"><span class="hljs-string">\(y\), \(min\)</span></span>]\) =", InputField[<span class="hljs-string"><span class="hljs-string">Dynamic[ymin</span></span>],FieldSize-&gt;{3,1}],"\!\(\*SubscriptBox[<span class="hljs-string"><span class="hljs-string">\(y\), \(max\)</span></span>]\) =", InputField[<span class="hljs-string"><span class="hljs-string">Dynamic[ymax</span></span>],FieldSize-&gt;{3,1}]}}] }}, Alignment-&gt;Left, Spacings-&gt;{Automatic,1}], LocatorPane[<span class="hljs-string"><span class="hljs-string"> Dynamic@u, Framed@Dynamic@Graphics[{Inset[im,{0,0},{0,0},imdim,{Cos[\[Alpha</span></span>]],Sin[<span class="hljs-string"><span class="hljs-string">\[Alpha</span></span>]]}], {EdgeForm[<span class="hljs-string"><span class="hljs-string">Directive[AbsoluteThickness[3</span></span>],RGBColor[<span class="hljs-string"><span class="hljs-string">{214,0,0}/255</span></span>]]], Opacity[<span class="hljs-string"><span class="hljs-string">0.2,Yellow</span></span>], Rectangle[<span class="hljs-string"><span class="hljs-string">u[[1</span></span>]],u[<span class="hljs-string"><span class="hljs-string">[2</span></span>]]]}, {Dashed,Blue,AbsoluteThickness[<span class="hljs-string"><span class="hljs-string">4</span></span>], If[<span class="hljs-string"><span class="hljs-string">Length[u</span></span>]<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">4,BSplineCurve[u[[1;;2]],SplineDegree-</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>2],BSplineCurve[<span class="hljs-string"><span class="hljs-string">Drop[u,2</span></span>],SplineDegree-&gt;degree]] }}, PlotRange-&gt;Transpose[<span class="hljs-string"><span class="hljs-string">{\[Beta</span></span>]1,imdim+\[<span class="hljs-string"><span class="hljs-string">Beta</span></span>]2}],ImageSize-&gt;600],LocatorAutoCreate-&gt;True] } },Alignment-&gt;{Center,Top} ], ""-&gt;Dynamic@Graphics[<span class="hljs-string"><span class="hljs-string"> {Blue,AbsoluteThickness[2</span></span>], If[<span class="hljs-string"><span class="hljs-string">Length[u</span></span>]<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">4,</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">BSplineCurve</span></span></span></span><span class="xml"><span class="hljs-tag">[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">u</span></span></span></span><span class="xml"><span class="hljs-tag">[[</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">1</span></span></span></span><span class="xml"><span class="hljs-tag">;;</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">2</span></span></span></span><span class="xml"><span class="hljs-tag">]],</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">SplineDegree-</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>2], BSplineCurve[<span class="hljs-string"><span class="hljs-string">unew=Drop[u,2</span></span>]; udiap=Transpose[<span class="hljs-string"><span class="hljs-string">u[[1;;2</span></span>]]]; Transpose[<span class="hljs-string"><span class="hljs-string"> {Rescale[unew[[All,1</span></span>]],{Min[<span class="hljs-string"><span class="hljs-string">udiap[[1</span></span>]]],Max[<span class="hljs-string"><span class="hljs-string">udiap[[1</span></span>]]]},{xmin,xmax}], Rescale[<span class="hljs-string"><span class="hljs-string">unew[[All,2</span></span>]],{Min[<span class="hljs-string"><span class="hljs-string">udiap[[2</span></span>]]],Max[<span class="hljs-string"><span class="hljs-string">udiap[[2</span></span>]]]},{ymin,ymax}]}], SplineDegree-&gt;degree]]}, PlotRange-&gt;{{xmin,xmax},{ymin,ymax}}, ImageSize-&gt;600, Axes-&gt;True, AspectRatio-&gt;imdim[<span class="hljs-string"><span class="hljs-string">[2</span></span>]]/imdim[<span class="hljs-string"><span class="hljs-string">[1</span></span>]]] },Alignment-&gt;Center] } } ], Initialization:&gt;(u={{0,0},imdim};\[<span class="hljs-string"><span class="hljs-string">Alpha</span></span>]=0; degree=3;\[<span class="hljs-string"><span class="hljs-string">Beta</span></span>]1=0.1 Max[<span class="hljs-string"><span class="hljs-string">imdim</span></span>] {-1,-1};\[<span class="hljs-string"><span class="hljs-string">Beta</span></span>]2=0.1 Max[<span class="hljs-string"><span class="hljs-string">imdim</span></span>] {1,1})] ]}];]]; graphicsDigitizing[<span class="hljs-string"><span class="hljs-string">image_String/;FileExistsQ[image</span></span>]]:=graphicsDigitizing[<span class="hljs-string"><span class="hljs-string">Import[image</span></span>]]; graphicsDigitizing[<span class="hljs-string"><span class="hljs-string">x___</span></span>]:=(Echo[<span class="hljs-string"><span class="hljs-string">Inactive[graphicsDigitizing</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">x</span></span>],"  : "]; Nothing)</code> </pre> </div></div><br><a name="5"></a><h2>  Advantages of working with digitized functions with examples </h2><br>  Naturally, with the graphics before digitizing, any work is extremely difficult, however, after you have digitized the schedule, say, with the help of our program, you can already do a lot.  Let us show some examples. <br><br>  For example, let the schedule be given: <br><br><img src="https://habrastorage.org/webt/fm/7c/cw/fm7ccwnaz5aslbdajpfh5io_8y0.png"><br><br>  Let's digitize it (see video <a href="https://habr.com/ru/company/tdb/blog/351068/">above</a> ) and make calculations. <br><br>  For a start, just replace the head part of the expression obtained during the operation of the program from <b>BSplineCurve</b> with <b>BSplineFunction</b> , which builds an analytical expression with which you can already perform calculations: <br><br><img src="https://habrastorage.org/webt/1k/bp/cz/1kbpczzwixspu2_wjwk9bpj-ohq.png"><br><br>  The only drawback is that such a function is normalized to 1, that is, the function f (t), when t is changed from 0 to 1, runs through all its values, which are B-spline points: <br><br><img src="https://habrastorage.org/webt/uh/u9/cs/uhu9csu3xdindmjxdsmx8evoifk.png"><br><br>  However, this is easy to deal with.  It is enough to construct an interpolation polynomial: <br><br><img src="https://habrastorage.org/webt/j_/gt/gf/j_gtgftycbmi875emrsvgyulfrs.png"><br><br>  After that, you can do anything. <br><br>  Build a graph, say, from 1 to 9: <br><br><img src="https://habrastorage.org/webt/er/vs/nd/ervsnd_icx8cldlzucnul5xry9k.png"><br><br>  Integrate the function across the entire task area: <br><br><img src="https://habrastorage.org/webt/28/hl/cq/28hlcqrmsak0nsfszsgmxypsuoe.png"><br><br>  Build a graph of the derivative: <br><br><img src="https://habrastorage.org/webt/kx/jd/g8/kxjdg84gqllzxgshwyzvtr5sfow.png"><br><br>  Find the length of the curve: <br><br><img src="https://habrastorage.org/webt/t6/ty/wd/t6tywd2jzq5glyhxwlft5pdysyw.png"><br><br>  Or the analytical representation of the curve (in parametric form): <br><br><img src="https://habrastorage.org/webt/zu/jd/3j/zujd3jznzjjohv3b20jjiivn1ye.png"><br><div class="spoiler">  <b class="spoiler_title">Code with an illustration</b> <div class="spoiler_text"><pre> <code class="hljs perl">pts=Rationalize[{{<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">01</span></span><span class="hljs-string"><span class="hljs-string">`,10.92`</span></span>},{<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">19</span></span><span class="hljs-string"><span class="hljs-string">`,16.36`</span></span>},{<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">34</span></span><span class="hljs-string"><span class="hljs-string">`,20.76`</span></span>},{<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">55</span></span><span class="hljs-string"><span class="hljs-string">`,25.17`</span></span>},{<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">96</span></span><span class="hljs-string"><span class="hljs-string">`,29.57`</span></span>},{<span class="hljs-number"><span class="hljs-number">1.9100000000000001</span></span><span class="hljs-string"><span class="hljs-string">`,34.49`</span></span>},{<span class="hljs-number"><span class="hljs-number">2.74</span></span><span class="hljs-string"><span class="hljs-string">`,38.63`</span></span>},{<span class="hljs-number"><span class="hljs-number">3.38</span></span><span class="hljs-string"><span class="hljs-string">`,42.09`</span></span>},{<span class="hljs-number"><span class="hljs-number">3.97</span></span><span class="hljs-string"><span class="hljs-string">`,44.03`</span></span>},{<span class="hljs-number"><span class="hljs-number">4.47</span></span><span class="hljs-string"><span class="hljs-string">`,49.77`</span></span>},{<span class="hljs-number"><span class="hljs-number">4.88</span></span><span class="hljs-string"><span class="hljs-string">`,56.5`</span></span>},{<span class="hljs-number"><span class="hljs-number">5.29</span></span><span class="hljs-string"><span class="hljs-string">`,63.24`</span></span>},{<span class="hljs-number"><span class="hljs-number">5.65</span></span><span class="hljs-string"><span class="hljs-string">`,69.19`</span></span>},{<span class="hljs-number"><span class="hljs-number">6.0600000000000005</span></span><span class="hljs-string"><span class="hljs-string">`,74.63`</span></span>},{<span class="hljs-number"><span class="hljs-number">6.53</span></span><span class="hljs-string"><span class="hljs-string">`,78.52`</span></span>},{<span class="hljs-number"><span class="hljs-number">7.0200000000000005</span></span><span class="hljs-string"><span class="hljs-string">`,83.96000000000001`</span></span>},{<span class="hljs-number"><span class="hljs-number">7.46</span></span><span class="hljs-string"><span class="hljs-string">`,86.55`</span></span>},{<span class="hljs-number"><span class="hljs-number">8.02</span></span><span class="hljs-string"><span class="hljs-string">`,89.4`</span></span>},{<span class="hljs-number"><span class="hljs-number">8.26</span></span><span class="hljs-string"><span class="hljs-string">`,86.55`</span></span>},{<span class="hljs-number"><span class="hljs-number">8.67</span></span><span class="hljs-string"><span class="hljs-string">`,82.4`</span></span>},{<span class="hljs-number"><span class="hljs-number">9.21</span></span><span class="hljs-string"><span class="hljs-string">`,80.85000000000001`</span></span>},{<span class="hljs-number"><span class="hljs-number">9.57</span></span><span class="hljs-string"><span class="hljs-string">`,79.81`</span></span>},{<span class="hljs-number"><span class="hljs-number">9.93</span></span><span class="hljs-string"><span class="hljs-string">`,79.81`</span></span>}},<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">100</span></span>]; ptsL=Length[pts]; splineDegree=<span class="hljs-number"><span class="hljs-number">3</span></span>; knots=ConstantArray[<span class="hljs-number"><span class="hljs-number">0</span></span>,splineDegree]~Join~Subdivide[ptsL-splineDegree]~Join~ConstantArray[<span class="hljs-number"><span class="hljs-number">1</span></span>,splineDegree]; FullSimplify@Simplify[ Sum[ pts[[i+<span class="hljs-number"><span class="hljs-number">1</span></span>]]PiecewiseExpand[BSplineBasis[{splineDegree,knots},i,t]], {i,<span class="hljs-number"><span class="hljs-number">0</span></span>,ptsL-<span class="hljs-number"><span class="hljs-number">1</span></span>}] ]</code> </pre> </div></div><br>  And you can, of course, simply improve the original schedule: <br><br><img src="https://habrastorage.org/webt/ac/ag/sa/acagsal3fo-zy9s1opvzy88_j1i.png"><br><br><a name="6"></a><h2>  Epilogue </h2><br>  We hope that the story about the digitization function will be useful to you and you can use our algorithm.  Ahead, as we promised in the previous article, you will find many more new stories about our application and algorithms that are under his hood. <br><hr>  <b>An article of their series of articles on the project " <a href="https://repetitor.school/">Tutor: Mathematics</a> " to prepare for the EGE and the CDF.</b> </div><p>Source: <a href="https://habr.com/ru/post/351068/">https://habr.com/ru/post/351068/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../351054/index.html">How to make a good UI animation great</a></li>
<li><a href="../351056/index.html">Where digital engineers will come from</a></li>
<li><a href="../351058/index.html">Guide to SEO javascript sites. Part 2. Problems, experiments and recommendations</a></li>
<li><a href="../351060/index.html">We write Telegram-bot on Go to search Wikipedia</a></li>
<li><a href="../351062/index.html">Hell of a bare iron programming</a></li>
<li><a href="../351070/index.html">Unexpected earnings difficulties on the Internet</a></li>
<li><a href="../351072/index.html">Password change: 10 steps to good implementation</a></li>
<li><a href="../351074/index.html">How to quickly write and roll out in the production of machine learning algorithm</a></li>
<li><a href="../351078/index.html">Performance and runtime at the JPoint 2018 conference</a></li>
<li><a href="../351080/index.html">Accelerate javascript build using webpack 2-3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
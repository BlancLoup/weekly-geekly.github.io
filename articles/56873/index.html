<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Semi-automatic tagging - solution</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sometime in September, someone torwald put the idea of semi-automatic generation of keywords , but no solution was proposed. 

 After listening to sug...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Semi-automatic tagging - solution</h1><div class="post__text post__text-html js-mediator-article">  Sometime in September, someone <a href="https://geektimes.ru/users/torwald/" class="user_link">torwald</a> put the idea <a href="http://habrahabr.ru/blogs/webdev/39060/">of semi-automatic generation of keywords</a> , but no solution was proposed. <br><br>  After listening to suggestions on the ngcms and 2z-project forums, a solution appeared: <br><br><img src="http://football-stat.com/images/max_dogadaylo_2.png" alt="View">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  <b>class.php (class that defines keywords)</b> <br><blockquote><ol><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000000">?&gt;</font></font></code> </li><li> <code><font color="black"><font color="#000000"><font color="#000000">&lt;?</font> <br> <font color="#3A00FF">class</font> autokeyword <font color="#009900">{</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$contents</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$keywords</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordOccuredMin</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordLengthMax</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordGoodArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordBlockArray</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordMaxCount</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordB</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordAddTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">var</font> <font color="#000088">$wordTitle</font> <font color="#339933">;</font> <br> <font color="#3A00FF">function</font> autokeyword <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#339933">,</font> <font color="#000088">$encoding</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">encoding</font> <font color="#339933">=</font> <font color="#000088">$encoding</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">&gt;</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">=</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#b1b100">for</font> <font color="#009900">(</font> <font color="#000088">$i</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">&lt;</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordAddTitle</font> <font color="#339933">;</font> <font color="#000088">$i</font> <font color="#339933">++</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">.=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordTitle</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$content</font> <font color="#339933">.</font> <font color="#0000ff">' '</font> <font color="#339933">.</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">&amp;&amp;</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#3A00FF">true</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">" <font color="#000099">\r</font> <font color="#000099">\n</font> "</font> <font color="#339933">,</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">replace_chars</font> <font color="#009900">(</font> <font color="#000088">$params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> replace_chars <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strtolower</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">strip_tags</font> <font color="#009900">(</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordB</font> <font color="#339933">==</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'![b](.*)[/b]!si'</font> <font color="#339933">,</font> <font color="#0000ff">'$1 $1'</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">','</font> <font color="#339933">,</font> <font color="#0000ff">')'</font> <font color="#339933">,</font> <font color="#0000ff">'('</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">"'"</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">';'</font> <font color="#339933">,</font> <font color="#0000ff">'!'</font> <font color="#339933">,</font> <font color="#0000ff">'?'</font> <font color="#339933">,</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'-'</font> <font color="#339933">,</font> <br> <font color="#0000ff">'_'</font> <font color="#339933">,</font> <font color="#0000ff">'['</font> <font color="#339933">,</font> <font color="#0000ff">']'</font> <font color="#339933">,</font> <font color="#0000ff">':'</font> <font color="#339933">,</font> <font color="#0000ff">'+'</font> <font color="#339933">,</font> <font color="#0000ff">'='</font> <font color="#339933">,</font> <font color="#0000ff">'#'</font> <font color="#339933">,</font> <font color="#0000ff">'$'</font> <font color="#339933">,</font> <font color="#0000ff">'"'</font> <font color="#339933">,</font> <font color="#0000ff">'¬©'</font> <font color="#339933">,</font> <font color="#0000ff">'&gt;'</font> <font color="#339933">,</font> <font color="#0000ff">'&lt;'</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">13</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#cc66cc">9</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$punctuations</font> <font color="#339933">=</font> <font color="#990000">array_merge</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordBlockArray</font> <font color="#339933">,</font> <font color="#000088">$punctuations</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">str_replace</font> <font color="#009900">(</font> <font color="#000088">$punctuations</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$content</font> <font color="#339933">=</font> <font color="#990000">preg_replace</font> <font color="#009900">(</font> <font color="#0000ff">'/ {2,}/si'</font> <font color="#339933">,</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$content</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$content</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> parse_words <font color="#009900">(</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$common</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#339933">,</font> <font color="#0000ff">"aaaaaaa"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$s</font> <font color="#339933">=</font> <font color="#990000">split</font> <font color="#009900">(</font> <font color="#0000ff">" "</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">contents</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&gt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMin</font> <font color="#339933">&amp;&amp;</font> <font color="#990000">strlen</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">&lt;=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordLengthMax</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">in_array</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#000088">$common</font> <font color="#009900">)</font> <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> <font color="#990000">is_numeric</font> <font color="#009900">(</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$k</font> <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#000088">$k</font> <font color="#339933">=</font> <font color="#990000">array_count_values</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">occure_filter</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordOccuredMin</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">arsort</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array_flip</font> <font color="#009900">(</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordGoodArray</font> <font color="#009900">)</font> <font color="#339933">+</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#990000">array_splice</font> <font color="#009900">(</font> <font color="#000088">$occur_filtered</font> <font color="#339933">,</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">wordMaxCount</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#000088">$imploded</font> <font color="#339933">=</font> <font color="#000088">$this</font> <font color="#339933">-&gt;</font> <font color="#004000">implode</font> <font color="#009900">(</font> <font color="#0000ff">", "</font> <font color="#339933">,</font> <font color="#000088">$occur_filtered</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$k</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#990000">unset</font> <font color="#009900">(</font> <font color="#000088">$s</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">return</font> <font color="#000088">$imploded</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#3A00FF">function</font> occure_filter <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#339933">,</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array_count_values</font> <font color="#b1b100">as</font> <font color="#000088">$word</font> <font color="#339933">=&gt;</font> <font color="#000088">$occured</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$occured</font> <font color="#339933">&gt;=</font> <font color="#000088">$min_occur</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#000088">$occur_filtered</font> <font color="#009900">[</font> <font color="#000088">$word</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$occured</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$occur_filtered</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#3A00FF">function</font> <font color="#990000">implode</font> <font color="#009900">(</font> <font color="#000088">$gule</font> <font color="#339933">,</font> <font color="#000088">$array</font> <font color="#009900">)</font> <br> <font color="#009900">{</font> <br> <font color="#000088">$c</font> <font color="#339933">=</font> <font color="#0000ff">""</font> <font color="#339933">;</font> <br> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$array</font> <font color="#b1b100">as</font> <font color="#000088">$key</font> <font color="#339933">=&gt;</font> <font color="#000088">$val</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#339933">@</font> <font color="#000088">$c</font> <font color="#339933">.=</font> <font color="#000088">$key</font> <font color="#339933">.</font> <font color="#000088">$gule</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#b1b100">return</font> <font color="#000088">$c</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#009900">}</font> <br> ?&gt;</font></font></code> </li> </ol><br></blockquote><br>  <b>ajax.php (which will return the cloud)</b> <br><blockquote><ol><li>  <font color="#000000">&lt;?</font> <br></li><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$ _POST</font> <font color="#009900">[</font> <font color="#0000ff">'q'</font> <font color="#009900">]</font> <font color="#009900">)</font> <br></li><li>  <font color="#009900">{</font> <br></li><li>  <font color="#990000">header</font> <font color="#009900">(</font> <font color="#0000ff">'Content-type: text / html; charset = windows-1251'</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  <font color="#b1b100">include_once</font> <font color="#009900">(</font> <font color="#0000ff">"class.php"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$ _POST</font> <font color="#009900">[</font> <font color="#0000ff">'q'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#0000ff">''</font> <font color="#339933">||</font> <font color="#000088">$ _POST</font> <font color="#009900">[</font> <font color="#0000ff">'q'</font> <font color="#009900">]</font> <font color="#339933">==</font> <font color="#0000ff">'undefined'</font> <font color="#009900">)</font> <font color="#990000">die</font> <font color="#009900">(</font> <font color="#0000ff">'{"res": "error", "msg": "No data!"} '</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  <font color="#000088">$ params</font> <font color="#009900">[</font> <font color="#0000ff">'content'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">iconv</font> <font color="#009900">(</font> <font color="#0000ff">'UTF-8'</font> <font color="#339933">,</font> <font color="#0000ff">'windows-1251'</font> <font color="#339933">,</font> <font color="#000088">$ _POST</font> <font color="#009900">[</font> <font color="#0000ff">'q'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  <font color="#000088">$ params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_length'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#cc66cc">5</font> <font color="#339933">;</font>  <font color="#666666">// minimum word length</font> <br></li><li>  <font color="#000088">$ params</font> <font color="#009900">[</font> <font color="#0000ff">'max_word_length'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#cc66cc">100</font> <font color="#339933">;</font>  <font color="#666666">// maximum word length</font> <br></li><li>  <font color="#000088">$ params</font> <font color="#009900">[</font> <font color="#0000ff">'min_word_occur'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#cc66cc">2</font> <font color="#339933">;</font>  <font color="#666666">// minimum number of posts</font> <br></li><li>  <font color="#000088">$ params</font> <font color="#009900">[</font> <font color="#0000ff">'word_sum'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#cc66cc">245</font> <font color="#339933">;</font>  <font color="#666666">// maximum length of all words (taking into account the space character)</font> <br></li><li>  <font color="#000088">$ params</font> <font color="#009900">[</font> <font color="#0000ff">'block_word'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#3A00FF">false</font> <font color="#339933">;</font>  <font color="#666666">// block stop words (which you do not want to add)</font> <br></li><li>  <font color="#000088">$ params</font> <font color="#009900">[</font> <font color="#0000ff">'block_array'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#0000ff">'hello'</font> <font color="#339933">;</font>  <font color="#666666">// list of stop words (new line separator)</font> <br></li><li>  <font color="#000088">$ params</font> <font color="#009900">[</font> <font color="#0000ff">'good_word'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#3A00FF">false</font> <font color="#339933">;</font>  <font color="#666666">// add favorite words (which you really want to add)</font> <br></li><li>  <font color="#000088">$ params</font> <font color="#009900">[</font> <font color="#0000ff">'good_array'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#0000ff">'habrabra'</font> <font color="#339933">;</font>  <font color="#666666">// list of favorite words (new line separator)</font> <br></li><li>  <font color="#000088">$ params</font> <font color="#009900">[</font> <font color="#0000ff">'add_title'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font>  <font color="#666666">// add title (the number of times you want to add a title)</font> <br></li><li>  <font color="#000088">$ params</font> <font color="#009900">[</font> <font color="#0000ff">'word_count'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#cc66cc">245</font> <font color="#339933">;</font>  <font color="#666666">// maximum number of words</font> <br></li><li>  <font color="#000088">$ params</font> <font color="#009900">[</font> <font color="#0000ff">'good_b'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#3A00FF">false</font> <font color="#339933">;</font>  <font color="#666666">// read the words in the &lt;b&gt; tag as double</font> <br></li><li>  <font color="#000088">$ keyword</font> <font color="#339933">=</font> <font color="#3A00FF">new</font> autokeyword <font color="#009900">(</font> <font color="#000088">$ params</font> <font color="#339933">,</font> <font color="#0000ff">"windows-1251"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  <font color="#000088">$ SQL</font> <font color="#009900">[</font> <font color="#0000ff">'keywords'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">substr</font> <font color="#009900">(</font> <font color="#000088">$ keyword</font> <font color="#339933">-&gt;</font> <font color="#004000">parse_words</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#000088">$ params</font> <font color="#009900">[</font> <font color="#0000ff">'word_sum'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  <font color="#000088">$ SQL</font> <font color="#009900">[</font> <font color="#0000ff">'keywords'</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">substr</font> <font color="#009900">(</font> <font color="#000088">$ SQL</font> <font color="#009900">[</font> <font color="#0000ff">'keywords'</font> <font color="#009900">]</font> <font color="#339933">,</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#990000">strrpos</font> <font color="#009900">(</font> <font color="#000088">$ SQL</font> <font color="#009900">[</font> <font color="#0000ff">'keywords'</font> <font color="#009900">]</font> <font color="#339933">,</font> <font color="#0000ff">','</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  <font color="#990000">echo</font> <font color="#0000ff">'{"res": "ok", "x1": "&lt;span&gt;'</font> <font color="#339933">.</font> <font color="#000088">$ SQL</font> <font color="#009900">[</font> <font color="#0000ff">'keywords'</font> <font color="#009900">]</font> <font color="#339933">.</font> <font color="#0000ff">'&lt;/ span&gt;"}'</font> <font color="#339933">;</font> <br></li><li>  <font color="#009900">}</font> <br></li><li>  <font color="#000000">?&gt;</font> </li></ol><br></blockquote><br><br>  <b>js.js (sends a request from your page)</b> <br><br><blockquote><ol><li>  <font color="#003366">function</font> SendPOST <font color="#009900">(</font> <font color="#009900">)</font> <br></li><li>  <font color="#009900">{</font> <br></li><li>  <font color="#003366">var</font> data <font color="#339933">=</font> document.  <font color="#660066">form</font> .  <font color="#660066">content</font> .  <font color="#660066">value</font> <font color="#339933">;</font> <br></li><li>  <font color="#003366">var</font> title <font color="#339933">=</font> document.  <font color="#660066">form</font> .  <font color="#660066">title</font> .  <font color="#660066">value</font> <font color="#339933">;</font> <br></li><li>  ajaxSendPOST <font color="#009900">(</font> <font color="#3366CC">'ajax.php'</font> <font color="#339933">,</font> <font color="#3366CC">'q ='</font> <font color="#339933">+</font> <font color="#000066">encodeURI</font> <font color="#009900">(</font> title <font color="#009900">)</font> <font color="#339933">+</font> <font color="#3366CC">''</font> <font color="#339933">+</font> <font color="#000066">encodeURI</font> <font color="#009900">(</font> data <font color="#009900">)</font> <font color="#339933">,</font> SendCallback <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  <font color="#009900">}</font> <br></li><li>  <font color="#003366">function</font> SendCallback <font color="#009900">(</font> answer <font color="#009900">)</font> <font color="#009900">{</font> <br></li><li>  <font color="#003366">var</font> ans <font color="#339933">=</font> <font color="#000066">eval</font> <font color="#009900">(</font> <font color="#3366CC">'('</font> <font color="#339933">+</font> answer <font color="#339933">+</font> <font color="#3366CC">')'</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  <font color="#000066">if</font> <font color="#009900">(</font> ans. <font color="#660066">res</font> <font color="#339933">==</font> <font color="#3366CC">'error'</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000066">alert</font> <font color="#009900">(</font> <font color="#3366CC">'Empty?'</font> <font color="#009900">)</font> <font color="#339933">;</font>  return <font color="#339933">;</font>  <font color="#009900">}</font> <br></li><li>  <font color="#000066">if</font> <font color="#009900">(</font> ans. <font color="#660066">res</font> <font color="#339933">! =</font> <font color="#3366CC">'ok'</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000066">alert</font> <font color="#009900">(</font> <font color="#3366CC">'I don‚Äôt know what to say'</font> <font color="#009900">)</font> <font color="#339933">;</font>  return <font color="#339933">;</font>  <font color="#009900">}</font> <br></li><li>  keys_out <font color="#339933">=</font> ans.  <font color="#660066">x1</font> <font color="#339933">;</font> <br></li><li>  keys_out <font color="#339933">=</font> keys_out.  <font color="#660066">replace</font> <font color="#009900">(</font> <font color="#009966">/, / g</font> <font color="#339933">,</font> <font color="#3366CC">'&lt;/ span&gt; &lt;span&gt;'</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  document.  <font color="#660066">getElementById</font> <font color="#009900">(</font> <font color="#3366CC">'autokey_out'</font> <font color="#009900">)</font> .  <font color="#660066">innerHTML</font> <font color="#339933">=</font> keys_out <font color="#339933">;</font> <br></li><li>  key_span <font color="#339933">=</font> document.  <font color="#660066">getElementById</font> <font color="#009900">(</font> <font color="#3366CC">'autokey_out'</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  key_click <font color="#339933">=</font> key_span.  <font color="#660066">getElementsByTagName</font> <font color="#009900">(</font> <font color="#3366CC">'span'</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  <font color="#000066">for</font> <font color="#009900">(</font> i <font color="#000066">in</font> key_click <font color="#009900">)</font> <br></li><li>  <font color="#009900">{</font> <br></li><li>  key_click <font color="#009900">[</font> i <font color="#009900">]</font> .  <font color="#660066">onclick</font> <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br></li><li>  <font color="#000066">if</font> <font color="#009900">(</font> document. <font color="#660066">form</font> . <font color="#660066">keywords</font> . <font color="#660066">value</font> <font color="#339933">==</font> <font color="#3366CC">''</font> <font color="#009900">)</font> <br></li><li>  <font color="#009900">{</font> <br></li><li>  document.  <font color="#660066">form</font> .  <font color="#660066">keywords</font> .  <font color="#660066">value</font> <font color="#339933">=</font> <font color="#000066">this</font> .  <font color="#660066">innerHTML</font> <font color="#339933">;</font> <br></li><li>  <font color="#000066">this</font> .  <font color="#660066">parentNode</font> .  <font color="#660066">removeChild</font> <font color="#009900">(</font> <font color="#000066">this</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  <font color="#009900">}</font> <br></li><li>  <font color="#000066">else</font> <br></li><li>  <font color="#009900">{</font> <br></li><li>  document.  <font color="#660066">form</font> .  <font color="#660066">keywords</font> .  <font color="#660066">value</font> <font color="#339933">+ =</font> <font color="#3366CC">','</font> <font color="#339933">+</font> <font color="#000066">this</font> .  <font color="#660066">innerHTML</font> <font color="#339933">;</font> <br></li><li>  <font color="#000066">this</font> .  <font color="#660066">parentNode</font> .  <font color="#660066">removeChild</font> <font color="#009900">(</font> <font color="#000066">this</font> <font color="#009900">)</font> <br></li><li>  <font color="#009900">}</font> <br></li><li>  <font color="#009900">}</font> <br></li><li>  <font color="#009900">}</font> <br></li><li>  <font color="#009900">}</font> <br></li><li>  <font color="#003366">function</font> ajaxSendPOST <font color="#009900">(</font> xmlpage <font color="#339933">,</font> data <font color="#339933">,</font> callback <font color="#009900">)</font> <br></li><li>  <font color="#009900">{</font> <br></li><li>  <font color="#003366">var</font> xmlh <font color="#339933">=</font> <font color="#003366">null</font> <font color="#339933">;</font> <br></li><li>  <font color="#000066">if</font> <font color="#009900">(</font> window. <font color="#660066">XMLHttpRequest</font> <font color="#009900">)</font> <br></li><li>  xmlh <font color="#339933">=</font> <font color="#003366">new</font> XMLHttpRequest <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  <font color="#000066">else</font> <br></li><li>  <font color="#000066">try</font> <br></li><li>  <font color="#009900">{</font> xmlh <font color="#339933">=</font> <font color="#003366">new</font> ActiveXObject <font color="#009900">(</font> <font color="#3366CC">'Msxml2.XMLHTTP'</font> <font color="#009900">)</font> <font color="#339933">;</font>  <font color="#009900">}</font> <br></li><li>  <font color="#000066">catch</font> <font color="#009900">(</font> ex <font color="#009900">)</font> <br></li><li>  <font color="#009900">{</font> xmlh <font color="#339933">=</font> <font color="#003366">new</font> ActiveXObject <font color="#009900">(</font> <font color="#3366CC">'Microsoft.XMLHTTP'</font> <font color="#009900">)</font> <font color="#339933">;</font>  <font color="#009900">}</font> <br></li><li>  <font color="#000066">if</font> <font color="#009900">(</font> xmlh <font color="#009900">)</font> <br></li><li>  <font color="#009900">{</font> <br></li><li>  xmlh.  <font color="#000066">open</font> <font color="#009900">(</font> <font color="#3366CC">'post'</font> <font color="#339933">,</font> xmlpage <font color="#339933">,</font> <font color="#003366">true</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  xmlh.  <font color="#660066">onreadystatechange</font> <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> x <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000066">if</font> <font color="#009900">(</font> xmlh. <font color="#660066">readyState</font> <font color="#339933">==</font> <font color="#CC0000">4</font> <font color="#009900">)</font> callback <font color="#009900">(</font> xmlh. <font color="#660066">responseText</font> <font color="#009900">)</font> <font color="#339933">;</font>  <font color="#009900">}</font> <br></li><li>  xmlh.  <font color="#660066">setRequestHeader</font> <font color="#009900">(</font> <font color="#3366CC">"Accept-Charset"</font> <font color="#339933">,</font> <font color="#3366CC">"windows-1251"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  xmlh.  <font color="#660066">setRequestHeader</font> <font color="#009900">(</font> <font color="#3366CC">"Accept-Language"</font> <font color="#339933">,</font> <font color="#3366CC">"ru, en"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  xmlh.  <font color="#660066">setRequestHeader</font> <font color="#009900">(</font> <font color="#3366CC">"Connection"</font> <font color="#339933">,</font> <font color="#3366CC">"close"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  xmlh.  <font color="#660066">setRequestHeader</font> <font color="#009900">(</font> <font color="#3366CC">"Content-length"</font> <font color="#339933">,</font> data. <font color="#660066">length</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  xmlh.  <font color="#660066">setRequestHeader</font> <font color="#009900">(</font> <font color="#3366CC">"Content-type"</font> <font color="#339933">,</font> <font color="#3366CC">"application / x-www-form-urlencoded"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  xmlh.  <font color="#660066">send</font> <font color="#009900">(</font> data <font color="#009900">)</font> <font color="#339933">;</font> <br></li><li>  <font color="#009900">}</font> <br></li><li>  <font color="#009900">}</font> </li></ol><br></blockquote><br><br>  <b>index.php</b> <br><blockquote><ol><li>  <font color="#0000ff">&lt; <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">=</font> <font color="#0000ff">"text / javascript"</font> <font color="#ff0000">src</font> <font color="#0000ff">=</font> <font color="#0000ff">"js.js"</font> &gt; &lt; <font color="#0000ff">/</font> <font color="#800000">script</font> &gt;</font> <br></li><li>  <font color="#0000ff">&lt; <font color="#800000">style</font> <font color="#ff0000">type</font> <font color="#0000ff">=</font> <font color="#0000ff">"text / css"</font> &gt;</font> <br></li><li>  #autokey_out span {cursor: pointer;  text-decoration: underline} <br></li><li>  <font color="#0000ff">&lt; <font color="#0000ff">/</font> <font color="#800000">style</font> &gt;</font> <br></li><li>  <font color="#0000ff">&lt; <font color="#800000">form</font> <font color="#ff0000">id</font> <font color="#0000ff">=</font> <font color="#0000ff">"postForm"</font> <font color="#ff0000">name</font> <font color="#0000ff">=</font> <font color="#0000ff">"form"</font> <font color="#ff0000">method</font> <font color="#0000ff">=</font> <font color="#0000ff">"post"</font> <font color="#ff0000">action</font> <font color="#0000ff">=</font> <font color="#0000ff">"#"</font> <font color="#ff0000">target</font> <font color="#0000ff">=</font> <font color="#0000ff">"_self"</font> &gt;</font> <br></li><li>  <font color="#0000ff">&lt; <font color="#800000">textarea</font> <font color="#ff0000">name</font> <font color="#0000ff">=</font> <font color="#0000ff">"content"</font> <font color="#ff0000">rows</font> <font color="#0000ff">=</font> <font color="#0000ff">"16"</font> <font color="#ff0000">cols</font> <font color="#0000ff">=</font> <font color="#0000ff">"60"</font> <font color="#ff0000">tabindex</font> <font color="#0000ff">=</font> <font color="#0000ff">"2"</font> &gt; &lt; <font color="#0000ff">/</font> <font color="#800000">textarea</font> &gt;</font> <br></li><li>  <font color="#0000ff"><font color="#800000">&lt;Br</font> <font color="#0000ff">/&gt;</font></font> <br></li><li>  <font color="#0000ff">&lt; <font color="#800000">input</font> <font color="#ff0000">type</font> <font color="#0000ff">=</font> <font color="#0000ff">"text"</font> <font color="#ff0000">name</font> <font color="#0000ff">=</font> <font color="#0000ff">"keywords"</font> <font color="#ff0000">size</font> <font color="#0000ff">=</font> <font color="#0000ff">"60"</font> <font color="#ff0000">value</font> <font color="#0000ff">=</font> <font color="#0000ff">""</font> &gt;</font> <br></li><li>  <font color="#0000ff">&lt; <font color="#800000">input</font> <font color="#ff0000">type</font> <font color="#0000ff">=</font> <font color="#0000ff">"submit"</font> <font color="#ff0000">value</font> <font color="#0000ff">=</font> <font color="#0000ff">"Get Keywords"</font> <font color="#ff0000">name</font> <font color="#0000ff">=</font> <font color="#0000ff">"autokey_keys"</font> <font color="#ff0000">onclick</font> <font color="#0000ff">=</font> <font color="#0000ff">"javascript: SendPOST (); return false;"</font></font>  <font color="#0000ff">&gt;</font> <br></li><li>  <font color="#0000ff"><font color="#800000">&lt;Br</font> <font color="#0000ff">/&gt;</font></font> <br></li><li>  <font color="#0000ff">&lt; <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">=</font> <font color="#0000ff">"autokey_out"</font> &gt; &lt; <font color="#0000ff">/</font> <font color="#800000">div</font> &gt;</font> <br></li><li>  <font color="#0000ff">&lt; <font color="#0000ff">/</font> <font color="#800000">form</font> &gt;</font> </li></ol><br></blockquote><br><br>  <b><a href="">Sorsy</a></b> <br><br>  This is the first article.  Do not scold much. <br>  ______________________ <br></div><p>Source: <a href="https://habr.com/ru/post/56873/">https://habr.com/ru/post/56873/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../56860/index.html">CSS Naked Day</a></li>
<li><a href="../56864/index.html">PHP code variant to output a string in the plural</a></li>
<li><a href="../56865/index.html">Disabled chariot</a></li>
<li><a href="../56869/index.html">Windows was blocked ... in a funny way :)</a></li>
<li><a href="../56870/index.html">Multi-level tree with markers (HTML, CSS, jQuery). Remember the selected node</a></li>
<li><a href="../56874/index.html">New type of transport: skateboard on tracks with electric</a></li>
<li><a href="../56875/index.html">Web services monetization: business models</a></li>
<li><a href="../56876/index.html">My rating</a></li>
<li><a href="../56878/index.html">YouTube launches Click-To-Buy in 8 more countries</a></li>
<li><a href="../56879/index.html">Neverending story</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
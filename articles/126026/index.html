<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Three-power Arduino Manipulator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A lot of interesting articles are available on the Arduino platform, which can be safely ordered on the Ebay online auction. There are many modules an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Three-power Arduino Manipulator</h1><div class="post__text post__text-html js-mediator-article">  A lot of interesting articles are available on the <a href="http://arduino.cc/">Arduino</a> platform, which can be safely ordered on the <a href="http://ebay.com/">Ebay</a> online auction.  There are many modules and articles on the Internet for this platform, so I wanted to do something interesting, though not always useful in everyday life. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/7ad/645/db6/7ad645db6063d4fca826b945a495783f.jpg" alt="image"><br><a name="habracut"></a><br><br>  At work, there is experience in managing platforms with different degrees of freedom, so the first thing I wanted to do was a <a href="http://en.wikipedia.org/wiki/Stewart_platform">six-degree platform (Stewart Platform)</a> , but unfortunately only four servo drives came, so first we will make a three-degree platform. <br><br><h3>  Tools and materials </h3><br>  So to build this unit we need the following components: <br><table><tbody><tr><td>  <b>Renaming</b> </td><td>  <b>amount</b> </td></tr><tr><td>  Arduino mega </td><td>  1 PC. </td></tr><tr><td>  Servo drive HXT900 </td><td>  3 pcs. </td></tr><tr><td>  Plywood </td><td>  1 PC. </td></tr><tr><td>  5V Voltage Stabilizer </td><td>  1 PC. </td></tr><tr><td>  Paper clip </td><td>  3 pcs. </td></tr><tr><td>  Wire mount </td><td>  3 pcs. </td></tr><tr><td>  USB Cord </td><td>  1 PC. </td></tr><tr><td>  Power Supply </td><td>  1 PC. </td></tr><tr><td>  Connecting wires </td><td>  13 pcs. </td></tr><tr><td>  Styracosaurus </td><td>  1 PC. </td></tr></tbody></table>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The cost of the board and controller Arduino Mega Kit at auction ranges from $ 50.  With the purchase of servos from China, too, there should be no problems, the cost of one piece is about $ 2.  Plywood can be found in the country or in the store.  Three paper clips at work.  The most difficult thing is to obtain a crayfish, usually these species of animals can be seen at the post office or in the children's store. <br><br><h3>  Platform making </h3><br>  The main task of manufacturing the platform is to cut out the base of the platform and the platform itself from plywood.  Control elements are placed inside the circle at angles of 120 degrees. <br><br><h5>  Step 1 - Sawing </h5><br>  Cutting out the base of the platform measuring 10x10 cm, as well as the platform itself measuring 8x8 cm. The platform itself can be left square, but for convenience the triangle was cut.  Cuts are made in the place of fastening of the supports. <br><br><h5>  Step 2 - Drilling </h5><br>  For drilling, you must first draw a circle, divided into three parts.  In the rays under 120 degrees it is necessary to attach the servos, as well as mark the points for drilling. <br><br>  Drill out the holes according to the prepared marking depending on the method of fastening.  For fastening with harnesses (best option), the holes should be 4 mm in diameter.  In the case of wire fastening (as in my case) there will be enough holes with a diameter of 2 mm. <br><br><h5>  Step 3 - Preparing Mounts </h5><br>  There was nothing for fastening except the clips (after the demonstration at work another option was proposed).  Clips must be made in the form of the letter "G", which is fixed on the servo, and inserted into the mount on the platform platform. <br><br>  At work, I was offered instead of clips to use a ball mount from a Trex 450 helicopter (already ordered from China).  With this type of attachment, the platform will be more rigid in construction. <br><br><h5>  4 Step - Build Platform </h5><br>  The platform is assembled in the following sequence: <br><ul><li>  threading the war in the base of the platform; </li><li>  mount servos on the base; </li><li>  installation of fasteners for wires on the platform platform; </li><li>  installation of fasteners in the form of the letter "G" on the servos. </li></ul><br><br><h5>  Results </h5><br>  The result is a base platform, shown in the figure below.  Runtime <b>1 hour</b> . <br><img src="https://habrastorage.org/getpro/geektimes/post_images/5da/926/d3a/5da926d3a638f91898952f3eaaab209f.jpg" alt="image"><br><br><h3>  Circuit assembly </h3><br>  To connect, the method described in the official <a href="http://www.arduino.cc/playground/Learning/SingleServoExample">documentation</a> on the Arduino website was originally used.  When connecting several servo drives, there is not enough power, so it is advisable to ‚Äúpower up‚Äù three drives separately via a 5V voltage regulator ( <a href="http://robocraft.ru/blog/projects/498.html">detailed connection description</a> ). <br><br>  In the case of connecting three servo drives on the Arduino, the power supply will be missed and the protection will be triggered.  The connection of three drives through a stabilizer on a breadboard is shown in the figure below: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/265/c85/509/265c8550958f3960d1c4c86b6c882ec3.jpg" alt="image"><br><br>  Control from the Arduino will be carried out using 1, 2, 3 analog outputs (Analog Pins) from the board.  In my case, the power is also connected from the board.  An example connection is shown in the figure: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/408/5c3/623/4085c3623b7cd83f7845128c3cc3a09e.jpg" alt="image"><br>  where from left to right: blue - 5V, yellow - ‚Äúground‚Äù, red - drive 1, black - drive 2, yellow drive 3. <br><br>  The entire wiring diagram is: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/0b4/5fd/543/0b45fd5434ad3f305f07d0258ba0e33c.jpg" alt="image"><br><br><h3>  Arduino Programming </h3><br>  The platform is controlled from a computer via a serial port provided by Arduino.  The port is handled by the Serial library, and servos are controlled by the SoftwareServo library. <br><br>  To parse a command from a serial port, use the following structure in the C language: <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">struct</font> _set_pos_cmd_t <br> { <br> <font color="#0000ff">char</font> cmd; <br> <font color="#0000ff">int</font> pos1; <br> <font color="#0000ff">int</font> pos2; <br> <font color="#0000ff">int</font> pos3; <br> }; <br> <br> typedef _set_pos_cmd_t set_pos_cmd_t;</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">struct</font> _set_pos_cmd_t <br> { <br> <font color="#0000ff">char</font> cmd; <br> <font color="#0000ff">int</font> pos1; <br> <font color="#0000ff">int</font> pos2; <br> <font color="#0000ff">int</font> pos3; <br> }; <br> <br> typedef _set_pos_cmd_t set_pos_cmd_t;</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> <br><br>  Accordingly, three positions are indicated in integer form.  The command byte is also indicated, in our case the command for writing positions to the controller is code <b>0xC1</b> . <br><br>  Setting the positions of the servos is performed using the update_positions function, which maps the values ‚Äã‚Äãfrom the command to the values ‚Äã‚Äãof the angle of rotation of the servo shaft. <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">void</font> update_positions() <br> { <br> <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); <br> myservo1.write(val); <br> val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); <br> myservo2.write(val); <br> val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); <br> myservo3.write(val); <br> delay(5); <br> SoftwareServo::refresh(); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">void</font> update_positions() <br> { <br> <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); <br> myservo1.write(val); <br> val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); <br> myservo2.write(val); <br> val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); <br> myservo3.write(val); <br> delay(5); <br> SoftwareServo::refresh(); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> <br><br><h5>  The final program for Arduino </h5><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote><ol><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> </ol> <code><code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> #include &lt;SoftwareServo.h&gt; <font color="#0000ff">#define</font> SET_CMD    0xC1 <font color="#0000ff">#define</font> COMMAND_ERROR 0x01 <font color="#0000ff">#define</font> FORMAT_ERROR  0x02 <font color="#0000ff">#define</font> VALUE_MINIMUM 0 <font color="#0000ff">#define</font> VALUE_MAXIMUM 4096 <font color="#0000ff">#define</font> SERVO_MINIMUM 0 <font color="#0000ff">#define</font> SERVO_MAXIMUM 90 SoftwareServo myservo1; SoftwareServo myservo2; SoftwareServo myservo3; <font color="#0000ff">int</font> servo_position1 = 0; <font color="#0000ff">int</font> servo_position2 = 0; <font color="#0000ff">int</font> servo_position3 = 0; <font color="#0000ff">struct</font> _set_pos_cmd_t { <font color="#0000ff">char</font> cmd; <font color="#0000ff">int</font> pos1; <font color="#0000ff">int</font> pos2; <font color="#0000ff">int</font> pos3; }; typedef _set_pos_cmd_t set_pos_cmd_t; <font color="#0000ff">void</font> setup() { pinMode(13, OUTPUT); myservo1.attach(A0); myservo2.attach(A1); myservo3.attach(A2); Serial.begin(115200); } boolean readBytes( <font color="#0000ff">char</font> *bytes, <font color="#0000ff">int</font> count) { <font color="#0000ff">char</font> data; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> counter = 0; counter &lt; count; ++counter) { data = Serial.read(); bytes[counter] = data; } Serial.flush(); <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; } <font color="#0000ff">void</font> set_positions( <font color="#0000ff">char</font> *data) { set_pos_cmd_t *command = (set_pos_cmd_t*)data; servo_position1 = command-&gt;pos1; servo_position2 = command-&gt;pos2; servo_position3 = command-&gt;pos3; } <font color="#0000ff">void</font> update_positions() { <font color="#0000ff">int</font> val = map(servo_position1, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo1.write(val); val = map(servo_position2, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo2.write(val); val = map(servo_position3, VALUE_MINIMUM, VALUE_MAXIMUM, SERVO_MINIMUM, SERVO_MAXIMUM); myservo3.write(val); delay(5); SoftwareServo::refresh(); } <font color="#0000ff">void</font> loop() { <font color="#0000ff">int</font> availableBytes = 0; <font color="#0000ff">char</font> buffer[128]; <font color="#0000ff">if</font> ((availableBytes = Serial.available()) &gt; 0) { <font color="#0000ff">if</font> (!readBytes(buffer, availableBytes)) { Serial.write(FORMAT_ERROR); } <font color="#0000ff">switch</font> (buffer[0]) { <font color="#0000ff">case</font> SET_CMD: set_positions(buffer); Serial.write(0xDA); <font color="#0000ff">break</font> ; } } update_positions(); } * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> <br><br><h4>  Management program </h4><br>  The three-step platform management program is written in C #, which in its original form had a simplified form: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/165/92e/848/16592e848986847eb864c3f4fd465b80.png" alt="image"><br><br>  The latest version of the platform control program took the form: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/b8d/cf7/bf8/b8dcf7bf85e976b119a5b4cb52e36e9a.png" alt="image"><br><br>  <b>UPD:</b> <a href="">control class source code</a> <br><br><h4>  Implementation video </h4><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/jzCo27oReN0%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhiLZOAw2KocsXvXsGDiMxl5Az0KJQ" frameborder="0" allowfullscreen=""></iframe><br><br><h4>  Thanks for attention! </h4></div><p>Source: <a href="https://habr.com/ru/post/126026/">https://habr.com/ru/post/126026/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../126017/index.html">US Universities Form Ultra-Fast Network Infrastructure</a></li>
<li><a href="../126020/index.html">Analyzing the power of freebies, or are all affiliate programs affiliate programs enough</a></li>
<li><a href="../126023/index.html">Web developers, all on PHP Subbotnik in Minsk!</a></li>
<li><a href="../126024/index.html">We release free SaaS-products for business management</a></li>
<li><a href="../126025/index.html">Storing passwords without saving them</a></li>
<li><a href="../126027/index.html">Introduction to SproutCore Part Two</a></li>
<li><a href="../126028/index.html">C ++ 0x. Not entered</a></li>
<li><a href="../126029/index.html">Where to go to an effective specialist</a></li>
<li><a href="../126030/index.html">Intellectual property protection in the aerospace and defense industries</a></li>
<li><a href="../126032/index.html">From idea to own game studio in 3 weeks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>From idea to release in one bottle. Cloud Management Development Process - Visual Studio Team Services</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When we think about which system to choose to manage the development process, several possibilities come to mind. Larger companies often choose a stac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>From idea to release in one bottle. Cloud Management Development Process - Visual Studio Team Services</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/762/e60/612/762e60612b934c2e8fbffb32f6f43e21.png" alt="image"></div><br>  When we think about which system to choose to manage the development process, several possibilities come to mind.  Larger companies often choose a stack from Atlassian (Jira, Bitbucket, Bamboo).  Smaller companies usually prefer solutions from JetBrains (YouTrack, Upsource, TeamCity).  Fans of open source are experimenting with GitHub / Lab, Jenkins and numerous task management solutions. <br><br>  In any case, this is a set of solutions that requires some integration. <br><br>  However, few people know that since relatively recently, Microsoft has been offering out of the box a fully integrated cloud solution for managing all phases of development.  The system is called ‚Äú <b>Visual Studio Team Services</b> ‚Äù (hereinafter <b>referred to as VSTS</b> ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It includes: <br><br><ul><li>  Private Git repository </li><li>  Scrum / Agile Task Management System </li><li>  Continuous Integration and Deployment (CI / CD) </li><li>  Test module </li><li>  Ability to integrate with Power BI to build analytics </li></ul><br>  All this is provided <b>free of charge</b> for 5 users.  If you are participating in the <a href="https://bizspark.microsoft.com/">BizSpark</a> startup program, you can connect another 5 for free. <br><br>  Attempts by Microsoft to become an open source company are reflected in this system.  For example, you can build JavaScript projects on a Linux server. <br><br>  If you are interested to get acquainted with the system, then read on. <br><a name="habracut"></a><br>  <b>Disclaimer.</b>  The author of this article has nothing to do with Microsoft.  All these facts and thoughts are based solely on my personal experience of working with this system, to a greater degree positive. <br><br>  It cannot be said that the system today is in high demand, at least in the Russian market.  The low popularity of VSTS, in my opinion, is associated with historical distrust of the company's products, especially in terms of supporting non-Microsoft solutions.  Also, for the sake of justice, it should be noted that the system is currently actively finishing, which, however, does not prevent us from using it to solve quite serious problems now. <br><br>  The system has a huge number of settings, but for a holistic acquaintance with it we will consider the minimum set of actions that must be performed in order to turn an idea into an application published in a productive environment. <br><br>  All names and screenshots will be given for the English-language interface for the convenience of further deeper acquaintance with the system.  Attempts to find Russian-language product documentation may encounter some difficulties. <br><br>  So, we had the idea to create a web server on Node.js, which would greet everyone with the phrase ‚ÄúHello World‚Äù.  We want to manage this project using the Agile methodology, store the code in the central private repository, and ensure that the application is automatically published when the code is changed. <br><br>  Below will be described the minimum set of steps to implement this process. <br><br>  <font color="#121ECC"><i>Small but important lyrical digressions are highlighted in blue italics.</i></font> <br><br>  <b>1. Create a Microsoft account</b> <br><br>  If you do not yet have your personal account in Microsoft (similar to Apple or Google Id), then you need to start it here <a href="https://account.microsoft.com/">account.microsoft.com</a> <br><br>  <b>2. Create a VSTS account</b> <br><br>  Next, under our personal account created in the previous step, we go to the website <a href="https://www.visualstudio.com/vso/">www.visualstudio.com/vso</a> , click the button ‚ÄúGet started for free‚Äù and come up with a name for the VSTS account, for example, ‚Äúvasya-pupkin‚Äù. <br><br>  <font color="#121ECC"><i>Since all VSTS accounts are registered as third-level domains of the visualstudio.com domain, it makes sense to stake out a beautiful name in advance.</i></font>  <font color="#121ECC"><i>At the time of this writing, the name "vasya-pupkin" was free :)</i></font> <br><br>  When creating a VSTS account, you must also create your first project.  When filling out the form, it is important not to forget to click on the ‚ÄúChange details‚Äù link to select the project name and management method (Organize work using).  The name of the project can be changed after its creation, but the management method is no longer there. <br><br>  Let's name the project NodeProject and leave the default control method (Agile). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f0d/5c3/21a/f0d5c321a7144ceca275cd91614ebab8.png" alt="image"></div><br>  <b>3. Create a Git repository</b> <br><br>  After creating the project we will get to the page of work with the Git repository.  It can also be accessed through the main menu "Code". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/aef/7a3/ad2/aef7a3ad26a94133831934c5d043f777.png" alt="image"></div><br>  <font color="#121ECC"><i>VSTS has one main menu as in the screenshot above and several menu options available when you click on the gear.</i></font> <font color="#121ECC"><i><br><br></i></font>  <font color="#121ECC"><i>There are three levels of settings menu:</i></font> <font color="#121ECC"><i><br><br></i></font> <ol><li>  account level (Account Settings) </li><li>  Team Level </li><li>  project level </li></ol><br>  Most things are done at the project level, so by default we will keep in mind the project level settings. <br><br>  The process of working with the Git VSTS repository is no different from working with GitHub, so I will not dwell on it in detail. <br><br>  Please note that by default VSTS offers to work via https protocol.  I recommend working on SSH.  The initial setup may take a little longer, but further work will be much more convenient. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/92a/c57/7aa/92ac577aab764bc3aad3c30d88542586.png" alt="image"></div><br>  <b>4. Create tasks in the Backlog</b> <br><br>  After creating the repository for storing the code, you can proceed to setting up the task management subsystem.  Let me remind you that when creating a project, we chose the Agile process. <br><br>  The Agile process in the system has a three-level hierarchy of tasks.  At the highest level is Epic (disabled by default).  Next is the Feature, then the User Story.  As a first approximation, User Story can be considered synonymous with the word Task. <br><br>  To enable Epic, you need to go to "Work" in the settings at the command level. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/dca/346/fdc/dca346fdc797457ab98778768fca59ef.png" alt="image"></div><br>  For our small project, the Epic level can be omitted. <br><br>  <font color="#121ECC"><i>According to the methodology, Agile all tasks in the system fall into the general task list called Backlog.</i></font>  <font color="#121ECC"><i>Then these tasks are implemented at a specific point in time.</i></font>  <font color="#121ECC"><i>These times are called iterations.</i></font> <br><br>  Let's create in the main menu ‚ÄúWork‚Äù Feature with the title ‚ÄúWeb server‚Äù and in it a User Story with the title ‚ÄúHello world‚Äù. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/5b5/fb8/dab/5b5fb8dabe01486ebd715b4403b93b23.png" alt="image"></div><br>  To implement our project, one iteration will be enough.  Since the stubs for three iterations are configured by default in VSTS, we will not create new ones, but will configure the current ones.  The setting consists in inventing a name and specifying the start and end dates of the iteration.  This is done in the project level settings in the Work menu. <br><br>  If you add a new iteration, you will also have to go to the command level settings and add it there. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c19/047/495/c19047495bbf41e7b1e61ce4beab20bc.png" alt="image"></div><br>  After creating the iteration, you need to specify which tasks we will solve during this iteration.  This is usually done on the first day of the iteration.  We will do it now.  We have only one task (User Story), therefore it should be dragged with the mouse to the newly created iteration.  After you have started the task, she needs to set the status to Active.  To use different "chips" Agile has also washed the Capacity section for the current iteration. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4c5/7b6/d65/4c57b6d65224415aa650e6f990ca7c99.png" alt="image"></div><br>  On this familiarity with the process of configuring VSTS to work with code and tasks can be completed. <br><br>  Now we move on to the more time-consuming task of setting up Continuous Integration and Continuous Deployment processes (CI / CD) <br><br>  <font color="#121ECC"><i>Why do I need a CI / CD?</i></font>  <font color="#121ECC"><i>After writing the code, we will want to place it somewhere.</i></font>  <font color="#121ECC"><i>In order not to engage in manual code transfer after each change, you can configure the processes that generally start after each update of the master repository branch (or another).</i></font>  <font color="#121ECC"><i>The CI process ensures that the project is successfully assembled and (optionally) tested with automated tests.</i></font>  <font color="#121ECC"><i>The CD process places the result of the CI process on the production server.</i></font> <br><br>  In general, the CI / CD process is not trivial, and the configuration varies greatly depending on the development technologies and project location.  We consider the simplest case for the Node.JS application hosted on a local server in order to understand the principles of working with CI / CD in the VSTS system. <br><br>  In our example, we will collect the project on a local machine (not in the cloud) and publish it there. <br><br>  Let's proceed to the steps of setting CI / CD. <br><br>  <b>6. Install Build / Deploy Agent</b> <br><br>  <font color="#121ECC"><i>Build / Deploy agent is a program that performs the necessary actions on the code to turn it into a final release.</i></font>  <font color="#121ECC"><i>If you are using cloud agents, you can skip this step.</i></font> <br><br>  You can install the agent on a Windows, Linux or OSX machine.  Installing the agent on a local Linux machine is well described here <a href="https://www.visualstudio.com/en-us/docs/build/actions/agents/v2-linux">www.visualstudio.com/en-us/docs/build/actions/agents/v2-linux</a> . <br><br>  You just need to download and install the package, get a token for the agent to communicate with the VSTS and add the agent to the agent pool. <br><br>  <b>7. Configure CI</b> <br><br>  The CI process is configured in the main menu item ‚ÄúBuild &amp; Release -&gt; Builds‚Äù.  It consists of two stages. <br><br><ol><li>  creating a new build definition </li><li>  adding steps to build definition </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a8f/6c7/e95/a8f6c7e9595f4966adbb840a6552a4b8.png" alt="image"></div><br>  After clicking on the Add New Definition button, you can select one of the preset processes or configure it from scratch.  We will set it up from scratch. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f96/faf/c1e/f96fafc1e0f34bc398021b6e5a505912.png" alt="image"></div><br>  At the next step, we will be asked to decide on which branch of the repository we will do Build and whether we will do it automatically upon updating this branch, i.e.  will we actually use CI.  Here you also need to specify the agent pool configured in clause 6. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/00f/925/98f/00f92598fcfd477784f7930b7b8c8e8a.png" alt="image"></div><br>  In order to successfully build our Node.js project in the created Build Definition, you need to add two steps: <br><br><ol><li>  Copy files from repository to agent folder (Copy files) </li><li>  Publish the result of copying as an artifact (Publish Build Artifacts).  This non-obvious step is necessary for integration with the CD process.  When you start the CD process, the agent will take this artifact and take the necessary actions with it to publish the project. </li></ol><br>  Both of these steps are available in the Utility section. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/79c/5a9/28b/79c5a928b3dd4ec59503986a619779b3.png" alt="image"></div><br>  In the process of setting the steps, you will have to actively use system variables.  For many of them there is a hint next to the field name. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ff6/1fd/7d6/ff61fd7d6005422c97a63f49bb210608.png" alt="image"></div><br>  <b>8. Customize CD</b> <br><br>  The CD process in the main menu item ‚ÄúBuild &amp; Release -&gt; Releases‚Äù is configured in the same way. <br><br>  After creating the New Definition, we select the steps that should occur after the CI process.  If we want to run a CD right after the end of the CI process, then we need to tick the appropriate box. <br><br>  In our case, the CD process will consist of the following steps: <br><br><ol><li>  Delete all old files </li><li>  Copy the artifact from CI to the desired folder on the productive server. </li><li>  Run npm install (yarn) to download the npm packages described in the package.json file </li><li>  Restart the application with the new code.  For a Node.js project, it might look like this: ‚Äúpm2 reload my_application‚Äù </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/files/621/893/2c8/6218932c8d954e1181d2d563df957a98.png" alt="image"></div><br>  Obviously, in each case, the set of steps will be different, but VSTS provides almost all the options of what can be done to successfully work CI / CD.  It is only necessary to closely monitor the rights under which the agent works so that it can perform its actions on the server. <br><br>  Now that we‚Äôre all set up, we can get to work on the code.  In order to make the most of the integration capabilities of VSTS, we will proceed as follows: <br><br>  <b>1. Go to our task</b> (User Story) in the main menu ‚ÄúWork‚Äù and from it create a new branch in the repository. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/19b/fcc/10d/19bfcc10d1504182836036eb268174cf.png" alt="image"></div><br>  <b>2. Copy the branch</b> to the local computer (git pull), write the application and save (git push) changes back to the repository in the same branch. <br><br>  <b>3. Go back</b> to our task and create a <b>pull request</b> from it <b>.</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/efd/ed4/aae/efded4aae5f74fcabedc7c93345ee224.png" alt="image"></div><br>  Closing this pull request will lead to merge changes to the master branch, which in turn will lead to the launch of the CI process, which, if successfully completed, will start the CD process, which will result in the publication of our application on a productive server. <br><br>  <font color="#121ECC"><i>It is not always necessary to run the CD automatically after CI.</i></font>  <font color="#121ECC"><i>Sometimes it is useful to check with hands the result of CI.</i></font>  <font color="#121ECC"><i>To do this, VSTS has the option to set up approval to launch a CD.</i></font> <font color="#121ECC"><i><br></i></font> <br><h3>  Conclusion </h3><br>  Thus, we have gone all the way from idea to release in one system.  The presence of a single system makes it easy to track the connection between tasks, branches in the repository and builds. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/225/0dc/6d0/2250dc6d0ed24bbe93dd4b932a7a17ec.png" alt="image"></div><br>  In addition, the system allows you to get interesting statistics on the work on the application in different perspectives when integrated with <a href="https://powerbi.microsoft.com/en-us/">Power BI</a> .  One example would be the number of clocks clocked by people and iterations. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e12/61e/f68/e1261ef68af34014bdd6772b21585aeb.png" alt="image"></div><br>  Behind the scenes work remained with the tests.  But this is too voluminous topic on which you can write several such articles. <br><br>  Questions and constructive comments are usually welcome.  Below is a set of links for more in-depth familiarity with the system: <br><br><ul><li>  <a href="https://www.visualstudio.com/en-us/docs/work/overview">Agile Task Management</a> </li><li>  <a href="https://www.visualstudio.com/en-us/docs/build/overview">Continuous Integration / Deployment</a> </li><li>  <a href="https://www.visualstudio.com/en-us/docs/report/powerbi/data-connector-connect">PowerBI Integration</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/325906/">https://habr.com/ru/post/325906/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325896/index.html">Surf Studio: machine learning in production</a></li>
<li><a href="../325898/index.html">Excursion to the Glasgow Science Center - and about the development of the game on "Fixico"</a></li>
<li><a href="../325900/index.html">Unity3d / Android: check user on Node.JS own server</a></li>
<li><a href="../325902/index.html">Fintech: adapt or die</a></li>
<li><a href="../325904/index.html">rssh, or How to allow SCP, but disable SSH</a></li>
<li><a href="../325908/index.html">Neural networks in the fight against cancer</a></li>
<li><a href="../325910/index.html">Collection and analysis of logs for beginners</a></li>
<li><a href="../325912/index.html">Caution: high voltage, or when tech support needs support</a></li>
<li><a href="../325916/index.html">Behind the closed door of the front of the EFS</a></li>
<li><a href="../325918/index.html">IP KVM do it yourself</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
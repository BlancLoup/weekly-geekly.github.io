<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Open source UTM on network perimeter protection</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habrovchane! 

 Today I would like to share the experience of creating a device for protecting the network perimeter of a small organization based...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Open source UTM on network perimeter protection</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habrovchane! <img align="right" src="https://habrastorage.org/files/94c/0a7/31b/94c0a731bbe840a1b9cb04b3b6a69ec4.png"><br><br>  Today I would like to share the experience of creating a device for protecting the network perimeter of a small organization based on open source solutions: <b>NETFilter</b> standard Linux firewall with Firewall Builder graphical interface, <b>Suricata</b> intrusion detection and prevention system with Snorby web interface and <b>OpenVPN</b> remote access gateway on one virtual machine. <br><br>  I hope this article will help young administrators in solving possible problems that may arise when installing open source network security solutions. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I invite everyone who is interested. <br><a name="habracut"></a><br><h4>  <b>What and where will we install</b> </h4><br>  We will collect the UTM solution (what is UTM, you can read <a href="http://en.wikipedia.org/wiki/Unified_threat_management">here</a> ), which will combine the firewall, IPS and VPN gateway. <br><br>  The order of installation and configuration is as follows: <br>  ‚Ä¢ Installing and configuring Snorby (web monitoring interface for Suricata), barnyard2 (utility for connecting Suricata and Snorby) and Suricata (actually, IPS itself); <br>  ‚Ä¢ Installing Firewall Builder (NETFilter configuration GUI), setting firewall policy (ACL and NAT); <br>  ‚Ä¢ Install and configure the server and client OpenVPN. <br><br>  The security solutions themselves (NETFilter, Suricata, OpenVPN) were chosen for the reason that they are a kind of ‚Äúclassics‚Äù and are very common, so if necessary, you can find a bunch of information about setting up and working with them.  We install graphical interfaces only for convenience of setting up and monitoring, no more, if you wish, you can do without them. <br><br>  The platform for our UTM solution will be a virtual server running Ubuntu 14.04 onboard and the following configuration: <br>  ‚Ä¢ 4 cores; <br>  ‚Ä¢ 4 GB of RAM; <br>  ‚Ä¢ 40 GB hard drive. <br><br>  Those.  To solve the problem of protecting the network perimeter of a small organization, the mediocre server will be suitable for its characteristics. <br><br><h4>  <b>Installation Suricata, Snorby, barnyard2</b> </h4><br>  Before you start it is better to upgrade: <br><pre><code class="bash hljs">sudo apt-get update sudo apt-get upgrade sudo apt-get dist-upgrade</code> </pre> <br>  Install the necessary packages: <br><pre> <code class="bash hljs">sudo apt-get install gcc g++ build-essential libssl-dev libreadline6-dev zlib1g-dev linux-headers-generic libsqlite3-dev libxslt-dev libxml2-dev imagemagick git-core libmysqlclient-dev mysql-server libmagickwand-dev default-jre ruby1.9.3</code> </pre><br>  Install wkhtmltopdf: <br><pre> <code class="bash hljs">wget http://sourceforge.net/projects/wkhtmltopdf/files/0.12.1/wkhtmltox-0.12.1_linux-trusty-i386.deb sudo dpkg -i wkhtmltox-0.12.1_linux-trusty-i386.deb</code> </pre><br>  Installing gems: <br><pre> <code class="bash hljs">sudo gem install thor i18n bundler tzinfo builder memcache-client rack rack-test erubis mail text-format rack-mount rails sqlite3</code> </pre><br>  Install Snorby: <br><pre> <code class="bash hljs">sudo git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> http://github.com/Snorby/snorby.git /var/www/snorby</code> </pre><br>  Edit the file /var/www/snorby/config/database.yml (if not, then you can edit * .example): <br><pre> <code class="bash hljs"> snorby: &amp;snorby adapter: mysql username: root password: &lt;enter the mysql root password here&gt; host: localhost</code> </pre><br>  Edit the /var/www/snorby/config/snorby_config.yml file (if not, then you can edit * .example): <br><pre> <code class="bash hljs"> development: domain: localhost:3000 wkhtmltopdf: /usr/bin/wkhtmltopdf <span class="hljs-comment"><span class="hljs-comment">#   - /usr/local/bin/wkhtmltopdf test: domain: localhost:3000 wkhtmltopdf: /usr/bin/wkhtmltopdf production: domain: localhost:3000 wkhtmltopdf: /usr/bin/wkhtmltopdf</span></span></code> </pre><br>  Run Snorby setup: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /var/www/snorby sudo bundle update activesupport railties rails sudo gem install arel ezprint &amp;&amp; sudo bundle install sudo bundle <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> rake snorby:setup</code> </pre><br>  Configuring mysql: <br><pre> <code class="bash hljs">mysql -u root -p create user <span class="hljs-string"><span class="hljs-string">'snorbyuser'</span></span>@<span class="hljs-string"><span class="hljs-string">'localhost'</span></span> IDENTIFIED BY <span class="hljs-string"><span class="hljs-string">'_'</span></span>; grant all privileges on snorby.* to <span class="hljs-string"><span class="hljs-string">'snorbyuser'</span></span>@<span class="hljs-string"><span class="hljs-string">'localhost'</span></span> with grant option; flush privileges; <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span></code> </pre><br>  Go back to editing the file /var/www/snorby/config/database.yml, where we enter the new user and password: <br><pre> <code class="bash hljs"> snorby: &amp;snorby adapter: mysql username: snorbyuser password: _ host: localhost</code> </pre><br>  Installing Apache2 and required packages: <br><pre> <code class="bash hljs">sudo apt-get install apache2 apache2-prefork-dev libapr1-dev libaprutil1-dev sudo apt-get install libcurl4-openssl-dev sudo service apache2 start</code> </pre><br>  Passenger installation: <br><pre> <code class="bash hljs">sudo gem install --no-ri --no-rdoc passenger sudo /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin/passenger-install-apache2-module -a</code> </pre><br>  Create the file /etc/apache2/mods-available/passenger.load and write there: <br><pre> <code class="bash hljs"> LoadModule passenger_module /var/lib/gems/1.9.1/gems/passenger-4.0.48/buildout/apache2/mod_passenger.so &lt;IfModule mod_passenger.c&gt; PassengerRoot /var/lib/gems/1.9.1/gems/passenger-4.0.48 PassengerDefaultRuby /usr/bin/ruby1.9.1 &lt;/IfModule&gt;</code> </pre><br>  Activation modules: <br><pre> <code class="bash hljs">sudo a2enmod passenger sudo a2enmod rewrite sudo a2enmod ssl sudo chown www-data:www-data /var/www/snorby -R</code> </pre><br>  Create the file / etc / apache2 / sites-available / snorby and write there: <br><pre> <code class="bash hljs"> &lt;VirtualHost *:80&gt; ServerAdmin webmaster@localhost ServerName snorby.local DocumentRoot /var/www/snorby/public &lt;Directory <span class="hljs-string"><span class="hljs-string">"/var/www/snorby/public"</span></span>&gt; AllowOverride all Order deny,allow Allow from all Options -MultiViews &lt;/Directory&gt; &lt;/VirtualHost&gt;</code> </pre><br>  Activate the site: <br><pre> <code class="bash hljs">sudo ln -s /etc/apache2/sites-available/snorby /etc/apache2/sites-enabled/snorby</code> </pre><br>  Restart apache: <br><pre> <code class="bash hljs">sudo service apache2 restart</code> </pre><br>  From / var / www / snorby we launch: <br><pre> <code class="bash hljs">sudo bundle pack &amp;&amp; sudo bundle install --path vender/cache</code> </pre><br>  In the /etc/apache2/sites-available/000-default.conf file, we change the line: <br><pre> <code class="bash hljs">DocumentRoot /var/www/</code> </pre><br>  We do a test run snorby.  In the folder / var / www / snorby run: <br><pre> <code class="bash hljs">sudo bundle <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> rails server -e production</code> </pre><br>  We go to <a href="http://localhost:3000/">http: // localhost: 3000</a> and if we see the login window, it means we are on the right path. <br><img src="https://habrastorage.org/files/089/788/dc5/089788dc57524509abf7d2bcbf636464.png"><br><br>  Next, we will put directly the very Suricata. <br><br>  Install the necessary packages: <br><pre> <code class="bash hljs">sudo apt-get install libpcre3 libpcre3-dbg libpcre3-dev build-essential autoconf automake libtool libpcap-dev libcap-ng-dev libnet1-dev mysql-client wget http://security.ubuntu.com/ubuntu/pool/main/m/mysql-dfsg-5.1/libmysqlclient16_5.1.73-0ubuntu0.10.04.1_i386.deb sudo dpkg -i libmysqlclient16_5.1.73-0ubuntu0.10.04.1_i386.deb wget http://www.netfilter.org/projects/libnfnetlink/files/libnfnetlink-1.0.1.tar.bz2 sudo tar xvfz libnfnetlink-1.0.1.tar.bz2 sudo ./configure &amp;&amp; sudo make &amp;&amp; sudo make install</code> </pre><br>  Yaml installation: <br><pre> <code class="bash hljs">wget http://pyyaml.org/download/libyaml/yaml-0.1.3.tar.gz sudo tar xvfz yaml-0.1.3.tar.gz <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> yaml-0.1.3 sudo ./configure &amp;&amp; sudo make &amp;&amp; sudo make install</code> </pre><br>  Install barnyard2: <br><pre> <code class="bash hljs">wget http://ftp.psu.ac.th/pub/snort/barnyard2-1.9.tar.gz sudo tar xvfz barnyard2-1.9.tar.gz <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> barnyard2-1.9 sudo ./configure --with-mysql &amp;&amp; sudo make &amp;&amp; sudo make install</code> </pre><br>  Installation suricata: <br><pre> <code class="bash hljs">sudo apt-get install suricata sudo cp /etc/suricata/suricata-debian.yaml /etc/suricata/suricata.yaml <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /etc/suricata sudo wget http://rules.emergingthreats.net/open/suricata/emerging.rules.tar.gz sudo tar xvfz emerging.rules.tar.gz</code> </pre><br>  In the /etc/suricata/suricata.yaml file, we change the lines: <br><pre> <code class="bash hljs"> default-rule-path: /etc/suricata/rules/ HOME_NET: <span class="hljs-string"><span class="hljs-string">"[ip_/]"</span></span> <span class="hljs-comment"><span class="hljs-comment">#  "[192.168.0.0/24]"</span></span></code> </pre><br>  Barnyard2 setup: <br><pre> <code class="bash hljs">sudo cp downloads_folder/barnyard2-1.9/etc/barnyard2.conf /etc/suricata/</code> </pre><br>  Change the lines in the /etc/suricata/barnyard2.conf file: <br><pre> <code class="bash hljs"> config reference_file: /etc/suricata/reference.config config classification_file: /etc/suricata/classification.config config gen_file: /etc/suricata/rules/gen-msg.map config sid_file: /etc/suricata/rules/sid-msg.map output database: <span class="hljs-built_in"><span class="hljs-built_in">log</span></span>, mysql, user=snorbyuser password=_ dbname=snorby host=localhost sensor_name=sensor1</code> </pre><br>  The final touch and everything should earn: <br><pre> <code class="bash hljs">sudo mkdir /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/barnyard2 sudo iptables -I FORWARD -j NFQUEUE sudo suricata -c /etc/suricata/suricata.yaml -q 0</code> </pre><br>  If you go back to <a href="http://localhost:3000/">http: // localhost: 3000</a> , you will see dashboards and information on some events. <br><img src="https://habrastorage.org/files/5b6/bf4/4fa/5b6bf44faea645abbd4feb2df7fba467.png"><br><br>  This completes the IPS configuration. <br><br><h4>  <b>Installing FWBuilder and configuring iptables</b> </h4><br>  Download the latest build on the <a href="http://sourceforge.net/projects/fwbuilder/files/Current_Packages/5.1.0/">link</a> . <br><br>  Install the necessary package: <br><pre> <code class="bash hljs">sudo apt-get install libqt4-gui</code> </pre><br>  Install FWBuilder: <br><pre> <code class="bash hljs">sudo dpkg -i fwbuilder_5.1.0.3599-ubuntu-precise-1_i386.deb</code> </pre><br>  Run FWBuilder and create the Firewall element.  To do this, click Create new firewall and fill in the fields: <br><img src="https://habrastorage.org/files/1ba/888/b09/1ba888b090194d9f9db1eaab9a7d31e3.png"><br><br>  Now we set up the interfaces: <br><img src="https://habrastorage.org/files/b56/202/b6b/b56202b6b722435c91a3d2ad05acbf6c.png"><br><img src="https://habrastorage.org/files/764/376/d56/764376d56e864ad087b635d65b55d289.png"><br><br>  Create the minimum required set of rules: <br><img src="https://habrastorage.org/files/75f/353/44f/75f35344f14a4bc18893e0caeb08ccba.png"><br><img src="https://habrastorage.org/files/f87/e05/356/f87e05356c5e4b1fb263f1ab9e127633.png"><br><br>  In principle, everything is pretty clear, so that you can continue to create rules to fit your needs. <br><br>  When the rules are ready, click Install, enter the login / password and gateway address: <br><img src="https://habrastorage.org/files/f61/3db/5f4/f613db5f41534b01a53dca48eebf7e9e.png"><br><br>  This completes the firewall setup. <br><br><h4>  <b>Installing and configuring OpenVPN</b> </h4><br>  Install OpenVPN and easy-rsa: <br><pre> <code class="bash hljs">sudo su apt-get install openvpn easy-rsa</code> </pre><br>  Create keys: <br><pre> <code class="bash hljs">mkdir /etc/openvpn/easy-rsa cp -r /usr/share/easy-rsa /etc/openvpn/easy-rsa mv /etc/openvpn/easy-rsa/easy-rsa /etc/openvpn/easy-rsa/2.0 <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /etc/openvpn/easy-rsa/2.0 nano vars</code> </pre><br>  Change the line at the end of the file: <br><pre> <code class="bash hljs"> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> KEY_COUNTRY=<span class="hljs-string"><span class="hljs-string">"RU"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> KEY_PROVINCE=<span class="hljs-string"><span class="hljs-string">"Moscow"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> KEY_CITY=<span class="hljs-string"><span class="hljs-string">"Moscow"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> KEY_ORG=<span class="hljs-string"><span class="hljs-string">"IT"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> KEY_EMAIL=<span class="hljs-string"><span class="hljs-string">"test@lab.local"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> KEY_OU=<span class="hljs-string"><span class="hljs-string">"Security Department"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> KEY_NAME=<span class="hljs-string"><span class="hljs-string">"UTM"</span></span></code> </pre><br><pre> <code class="bash hljs">cp openssl-1.0.0.cnf openssl.cnf . ./vars ./clean-all ./build-ca ./build-key-server server ./build-dh openvpn --genkey --secret keys/ta.key cp -r /etc/openvpn/easy-rsa/2.0/keys/ /etc/openvpn/</code> </pre><br>  Create a server configuration file: <br><pre> <code class="bash hljs">cp /usr/share/doc/openvpn/examples/sample-config-files/server.conf.gz /etc/openvpn/ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /etc/openvpn gunzip -d /etc/openvpn/server.conf.gz nano /etc/openvpn/server.conf</code> </pre><br><pre> <code class="bash hljs">port 1194 proto udp dev tun ca /etc/openvpn/keys/ca.crt cert /etc/openvpn/keys/server.crt key /etc/openvpn/keys/server.key <span class="hljs-comment"><span class="hljs-comment"># This file should be kept secret dh /etc/openvpn/keys/dh2048.pem server 10.8.0.0 255.255.255.0 ifconfig-pool-persist /etc/openvpn/ipp.txt push "route 192.168.1.0 255.255.255.0" keepalive 10 120 tls-server tls-auth /etc/openvpn/keys/ta.key 0 tls-timeout 120 auth SHA1 comp-lzo max-clients 1 persist-key persist-tun status /var/log/openvpn/openvpn-status.log verb 3 mute 20</span></span></code> </pre><br><pre> <code class="bash hljs">mkdir /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/openvpn</code> </pre><br>  Create a client configuration file: <br><pre> <code class="bash hljs">mkdir /etc/openvpn/ccd nano /etc/openvpn/ccd/client iroute 192.168.1.0 255.255.255.0</code> </pre><br>  Enable routing on the gateway, if it is not enabled: <br>  in the /etc/sysctl.conf file, let's comment on # net.ipv4.ip_forward = 1, then <br><pre> <code class="bash hljs">sudo sysctl -p</code> </pre><br>  Restart OpenVPN: <br><pre> <code class="bash hljs">openvpn restart</code> </pre><br>  Creating client keys: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /etc/openvpn/easy-rsa/2.0 . ./vars ./build-key client ./build-key-pass client</code> </pre><br>  From the /etc/openvpn/easy-rsa/2.0/keys folder, we take the ca.crt, dh2048.pem, client.crt, client.key, ta.key files, they will be useful for the client. <br><br>  Go to the client machine (I used Windows XP) and install the <a href="https://openvpn.net/index.php/open-source/downloads.html">OpenVPN Client</a> . <br>  After installation, you need the files ca.crt, dh2048.pem, client.crt, client.key, ta.key, which we created on the server to copy to the / config folder in the directory where the OpenVPN Client is installed (I have C: \ Program Files \ OpenVPN \ config). <br><br>  Now it remains to create a config for the client.  In the folder / config create a file client.ovpn with the following content: <br><pre> <code class="bash hljs">client dev tun proto udp remote 10.10.0.184 1194 resolv-retry infinite ca <span class="hljs-string"><span class="hljs-string">"C:\\Program Files\\OpenVPN\\config\\ca.crt"</span></span> cert <span class="hljs-string"><span class="hljs-string">"C:\\Program Files\\OpenVPN\\config\\client.crt"</span></span> key <span class="hljs-string"><span class="hljs-string">"C:\\Program Files\\OpenVPN\\config\\client.key"</span></span> tls-client tls-auth <span class="hljs-string"><span class="hljs-string">"C:\\Program Files\\OpenVPN\\config\\ta.key"</span></span> 1 auth SHA1 <span class="hljs-comment"><span class="hljs-comment"># -.  MD5 cipher BF-CBC remote-cert-tls server comp-lzo persist-key persist-tun status "C:\\Program Files\\OpenVPN\\log\\openvpn-status.log" log "C:\\Program Files\\OpenVPN\\log\\openvpn.log" verb 3 mute 20</span></span></code> </pre><br>  Now you can try to connect to the server. <br><br>  This completes the UTM setup, we hope that the article will be useful to you. <br><br>  Thank you all for your attention! <br><br>  Glebov Maxim </div><p>Source: <a href="https://habr.com/ru/post/238315/">https://habr.com/ru/post/238315/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../238299/index.html">Copyright vs Gunpowder and Crossbow</a></li>
<li><a href="../238301/index.html">The near future: wearable devices in a smart city</a></li>
<li><a href="../238303/index.html">Fail2ban [incremental]: Better, faster, more reliable</a></li>
<li><a href="../238305/index.html">Microsoft's first cloud-based technology talk show ended with the start of the contest</a></li>
<li><a href="../238307/index.html">Hub AnyMote Home will make any device in the house smart</a></li>
<li><a href="../238317/index.html">3D Sand Printing with Sun</a></li>
<li><a href="../238321/index.html">Grape: no single rails</a></li>
<li><a href="../238323/index.html">How we test CSS regressions with Gemini. Report on BEMup in Yandex</a></li>
<li><a href="../238325/index.html">Cloudify and its use in OpenStack. First step</a></li>
<li><a href="../238327/index.html">Google Play Game Services in Libgdx</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>RDP vs RemoteFX</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the group of enterprises "X" use terminal servers. 
 The new season began and in one of the offices cpu loading started to reach 100 percent, which...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>RDP vs RemoteFX</h1><div class="post__text post__text-html js-mediator-article">  In the group of enterprises "X" use terminal servers. <br>  The new season began and in one of the offices cpu loading started to reach 100 percent, which is bad, especially after users started complaining about the speed of work. <br>  The cause of the problem was not clear, the number of employees did not change, the software did not change ... All offices in the same conditions. <br><br>  I assembled a test stand and started looking for a solution ... <br>  For a long time I went through different settings of the server and client sites, this is a separate topic. <br>  In a creative search compared the RDP and RemoteFX protocols, I decided to publish the results. <br><a name="habracut"></a><br><blockquote>  Server: <br>  HP ML350 G6, 1 * Xeon5620, 42gb RAM. <br>  DirectX hardware video card is missing. <br>  Storage: <br>  HP MSA P2000 G3 SAS, array of R5 is assembled from 4 SAS disks. <br>  BY: <br>  ESXi 5.1 is installed on the server. <br>  Terminal servers are VM, 4 vcpu (8000 MHz) and 20gb RAM are allocated, Windows Server 2008R2 SP1 is used as the guest OS. <br></blockquote><br>  The processor load was compared in three applications: IE11, Adobe PDF Reader 11, 1c8. <br>  I made 8-10 measurements, at the time of measurements only the experimental user and the administrator user worked on the server. <br>  I used two laptops with Windows XP and Windows 7 SP1 as client sites, and the HP t510 thin client with the installed HP Smart Zero 4.4 OS. <br><br><h4>  results </h4><br>  IE11, a test video was launched that was on youtube. <br>  RDP - CPU load 21-23% <br>  RemoteFX - CPU load 11-18% 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After replacing laptops with HP thin client. <br>  RDP - CPU load 17-21% <br>  RemoteFX - CPU load 10-12% <br><br>  In laboratory conditions, the difference was 5-10% of the CPU time in favor of RemoteFX. <br>  I‚Äôll add that RDP doesn‚Äôt come close to RemoteFX when the video is played smoothly, with RemoteFX turned on, at first glance, there‚Äôs no difference in comparison with a regular PC. <br><br>  I decided to carry out all further measurements on the HP thin client. <br><br>  Go to the PDF document and scrolling. <br>  RDP - CPU load 16-20% <br>  RemoteFX - CPU load 12-17% <br>  The difference in favor of RemoteFX was 3-4%. <br><br>  It is the turn of 1c8, again we will be engaged in scrolling the list of documents. <br>  RDP - CPU load 14-17% <br>  RemoteFX - CPU load 17-18% <br>  The difference in favor of RDP was 1-3%. <br><br>  Honestly, I did not like the result of 1c8.  I decided to check everything and make additional measurements. <br>  Re-measured the results, like everything is OK, fit into an error in the measurements, about 1-2%. <br>  The results of 1c can be attributed to the measurement error, in the end it turns out that 1c doesn‚Äôt care how the user connects via RDP or RemoteFX. <br><br><h4>  If we sum up the preliminary results </h4><br>  I think that video is best suited to assess the quality of the codec, I decided to conduct the rest of the tests, since working with 1c and documents should take up most of the users' working time. <br><br>  I used to try to look at PCoIP, I did not like the result, maybe I need to look again, but it‚Äôs not cool, and RemoteFX will cost less than PCoIP, and I like the concept of VDI less than terminal servers. <br><br>  In the case of enterprise ‚ÄúX‚Äù, 18-24 users work on a single Xeon5620 processor with a load of 40-80%, and a domain controller, and some smaller vm, work in parallel with the terminal server. <br><br>  As I see it, the implementation of RemoteFX will reduce the server processor load by 20-30%, or add about 5-7 users. <br><br><h4>  Interest in RemoteFX began to grow, and decided to continue measurements </h4><br>  First we will compare how the increase in the quality of the transmitted sound affects. <br>  In standard settings, the sound quality is selected dynamically, when a sufficient number of users work on the server - this is audible. <br><br>  We look at the YouTube video (RDP), the processor load is 18-22%, with standard settings the result is 17-21%. <br>  We are watching a video on YouTube (RemoteFX), the processor load is 10-16%, with standard settings the result is 10-12%. <br><br>  I conclude that the difference is minimal and, if desired, you can safely set the high quality. <br><br>  However, please pay attention to the network traffic, I do not measure it, all users and servers are at a distance of the switch;  if you work on a narrow channel, you will have to consider network traffic. <br><br><h4>  Further, how RemoteFX will work when changing settings, frame rate, picture quality, codec optimization </h4><br><blockquote>  Screen capture rate = Lowest <br>  Screen Image Quality = Medium (default) </blockquote><br>  YouTube clip: <br>  CPU load 5-8% <br><br>  PDF and scrolling: <br>  CPU load 14-18% <br><br>  1c8 and scrolling: <br>  The load on the processor is 12-18%. <br><br>  In the case of media, we get a win, but it is immediately noticeable that the video does not play so smoothly and jerks are visible, similar to those in RDP. <br>  If you think about it, there is nothing wrong with that, it all depends on the tasks that users must perform. <br><br>  Although in the case of office work, the meaning is lost, working with documents consumes twice as much CPU time. <br><br><blockquote>  Screen capture rate = Medium (default) <br>  Screen Image Quality = Lowest </blockquote><br>  Video on youtube <br>  CPU load 5-11% <br><br>  PDF and scrolling <br>  CPU load 12-16% <br><br>  1c8 and scrolling <br>  The load on the processor is 18-21%. <br><br>  We get the result where there is no gain for office tasks, and for the media it will be possible to see the result on network traffic. <br><br><blockquote>  Screen capture rate = Lowest <br>  Screen Image Quality = Lowest </blockquote><br>  Video on youtube <br>  CPU load 5-10% <br><br>  PDF and scrolling <br>  CPU load 12-16% <br><br>  1c8 and scrolling <br>  The load on the processor is 16-19%. <br><br>  No comments. <br><br><blockquote>  Screen capture rate = Highest (best quality) <br>  Screen Image Quality = Highest (best quality) </blockquote><br>  YouTube clip: <br>  CPU load 9-13%. <br><br>  For results for 1c and PDF, as it turned out, I did not have enough patience. <br><br>  I expected a different result from the Highest (best quality) settings, and the result can be attributed to a measurement error. <br><br><h4>  Next in line is the codec optimization, Text vs Rich Multimedia </h4><br>  The default setting of the Rich Multimedia codec. <br><br>  PDF and scrolling: <br>  CPU load 13-16% <br><br>  1c8 and scrolling: <br>  CPU load 16-19% <br><br><h4>  Summary table </h4><br><img src="https://habrastorage.org/files/4df/ae3/4e1/4dfae34e14ef4b229ac758fc15c8ef8e.JPG"><br><img src="https://habrastorage.org/files/361/8fd/12c/3618fd12c3c34547bde66680de918283.JPG"><br><img src="https://habrastorage.org/files/9f4/d5d/4a3/9f4d5d4a36294b13b16d37cd0c023fe0.JPG"><br><img src="https://habrastorage.org/files/cd8/4f8/e0c/cd84f8e0c05e41e4b86591e38b0eb99f.JPG"><br><br><h4>  Total </h4><br>  On all terminal servers, I turned on RemoteFX, it won't be any worse. <br>  It became interesting how the result will change if you add a hardware video card. </div><p>Source: <a href="https://habr.com/ru/post/234235/">https://habr.com/ru/post/234235/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../234223/index.html">Skyforge load testing. One year later</a></li>
<li><a href="../234225/index.html">Roscosmos plans to build a device for cleaning the orbit of space debris</a></li>
<li><a href="../234227/index.html">Software Project Management Conference: Why it is important not to miss the main conference on IT project management</a></li>
<li><a href="../234229/index.html">Interview with Grigori Kornilov (Kaspersky Lab)</a></li>
<li><a href="../234231/index.html">Google will have to return the steering wheel and pedals to their robotic cars.</a></li>
<li><a href="../234237/index.html">Debugging C ++ programs in GNU / Linux OS</a></li>
<li><a href="../234239/index.html">Stay Journey. Part 1</a></li>
<li><a href="../234241/index.html">Contour.Elba for Android. Developer Notes</a></li>
<li><a href="../234243/index.html">Video surveillance from idea to ... idea. Data</a></li>
<li><a href="../234245/index.html">Monkey Selfie copyright problem solved by US Copyright Office</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
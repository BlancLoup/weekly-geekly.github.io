<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Connect to the CUBRID DBMS via PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So you, I am sure, already know how to connect and work in PHP with certain relational database systems. In this blog I will tell you how to get start...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Connect to the CUBRID DBMS via PHP</h1><div class="post__text post__text-html js-mediator-article">  So you, I am sure, already know how to connect and work in PHP with certain relational database systems.  In this blog I will tell you how to get started in PHP with the <a href="http://habrahabr.ru/company/cubrid/blog/117687/" title="Introducing CUBRID - Web-Optimized DBMS">CUBRID DBMS</a> , how it differs from other systems, and also give examples for a quick start.  The good news is that the latest version of <a href="http://habrahabr.ru/company/cubrid/blog/119342/" title="New CUBRID 8.4.0: now twice as fast">CUBRID 8.4.0</a> is 90% compatible with MySQL, both in terms of SQL syntax and in terms of PHP functions. <br><a name="habracut"></a><br>  At once I will make a reservation that we will be talking about PHP version 5.2 and higher, because this is the minimum requirement for working with CUBRID DBMS in PHP. <br><br><h4>  Installation </h4><br>  Installing a PHP driver for CUBRID is typical.  On Windows, you can use an automatic installer, or you can manually set everything you need in the <i>php.ini</i> configuration file.  In Linux, the instructions are almost the same: you can use the PECL installer, or you can change php.ini yourself. <br><br><h5>  Installing PHP Drivers using Windows Installer </h5><br>  1. Download the latest version of <b>CUBRID PHP API Installer</b> from the <a href="http://www.cubrid.org/php_install_wizard">official site</a> (&lt;870KB).  This installer has all versions of PHP drivers for various combinations of PHP and CUBRID. <br>  2. Make sure that the PHP engine and the CUBRID DBMS are installed. <br>  3. Run the installer. <br>  4. Everything is as in a typical Windows printer: <br><ul><li>  specify the path to install; </li><li>  confirm the folder name for the <i>Start</i> main menu; </li><li>  Click on " <b>Install</b> ". </li></ul><br>  Done!  Do not forget to restart your Web server.  As a result of this installation, the installer will automatically determine the version of your PHP engine, the CUBRID version of the DBMS, as well as the folder in which PHP stores its drivers by default (usually <i>C: \ Program Files \ PHP \ ext</i> ).  Based on this, the installer will copy the required <b>php_cubrid.dll</b> to this folder with all the other drivers.  Then he will add the following two lines to the php.ini configuration file. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>[PHP_CUBRID] <br> extension=php_cubrid.dll <br></code> <br>  Everything is standard, but everything happens automatically without your participation.  The same method, but in English and with screenshots can be viewed <a href="http://www.cubrid.org/php_install_wizard" title="CUBRID PHP API Installer">here</a> . <br><br><h5>  Manual configuration of php.ini in Windows </h5><br>  You can do the same thing as the CUBRID PHP API Installer yourself. <br><ol><li>  Download the driver you need from the <a href="http://www.cubrid.org/php_api_for_cubrid">official site</a> (&lt;40KB).  Both thread-safe and non-thread-safe versions for Apache and IIS are available. </li><li>  Unzip the archive. </li><li>  Copy <b>php_cubrid.dll</b> to the folder where your other PHP drivers are located. </li><li>  Open the <b>php.ini</b> configuration file and paste the above two lines at the end of the file. </li><li>  Save the changes and restart your Web server. </li></ol><br>  All is ready! <br><br><h5>  Installing PHP Drivers in Linux with the PECL Installer </h5><br>  Here we show how to install the CUBRID PHP driver in Linux based on DEBIAN.  For Linux based RPMs, see the instructions below. <br><ol><li>  Install phpize <br> <code>sudo apt-get install php5-dev</code> <br> </li><li>  Install the PEAR package that provides the PECL commands <br> <code>sudo apt-get install php-pear</code> <br> </li><li>  Now install the CUBRID PHP driver itself using the PECL command. <br> <code>sudo pecl install cubrid</code> <br>  This will install the latest <b>cubrid.so</b> driver.  If you need one of the previous versions, then specify the version when installing as follows: <br> <code>sudo pecl install cubrid-8.3.0.0005</code> <br>  If the query <b>‚Äúinstall install dir [autodetect]:‚Äù</b> appears at this point, enter the full path of the directory where CUBRID is installed.  For example, if CUBRID is set to <i>/ home / cubridtest / CUBRID</i> , enter <i>/ home / cubridtest / CUBRID</i> . <br></li><li>  At the end you need to change the configuration file php.ini, adding the following two lines at the end of the file. <br> <code>[CUBRID] <br> extension=cubrid.so <br></code> <br></li></ol><br>  Install CUBRID PHP drivers in Linux based on RPM. <br><ol><li>  Install phpize <br> <code>yum install php-devel</code> <br> </li><li>  Download the package PEAR <br> <code><a href=""></a> wget pear.php.net/go-pear.phar</code> <br> </li><li>  Run PEAR package in PHP <br> <code>php go-pear.phar</code> <br> </li><li>  Now install the CUBRID PHP driver itself using the PECL command. <br> <code>pecl install cubrid</code> <br>  This will install the latest <b>cubrid.so</b> driver.  If you need one of the previous versions, then specify the version when installing as follows: <br> <code>pecl install cubrid-8.3.0.0005</code> <br>  If the query <b>‚Äúinstall install dir [autodetect]:‚Äù</b> appears at this point, enter the full path of the directory where CUBRID is installed.  For example, if CUBRID is set to <i>/ home / cubridtest / CUBRID</i> , enter <i>/ home / cubridtest / CUBRID</i> . <br></li><li>  At the end you need to change the configuration file php.ini, adding the following two lines at the end of the file. <br> <code>[CUBRID] <br> extension=cubrid.so <br></code> <br></li></ol><br>  Done!  Do not forget to restart the Web server. <br><br><h5>  Manual configuration of php.ini in Linux </h5><br>  Install the CUBRID PHP driver without phpize and PEAR - manually.  See instructions below. <br><br><ol><li>  Download the driver you need from the <a href="http://www.cubrid.org/php_api_for_cubrid">official site</a> (&lt;80KB).  Versions are available for both x64 and x86. </li><li>  Unzip the archive. </li><li>  Copy <b>cubrid.so</b> to the directory where your other PHP drivers are located (usually <i>/ usr / lib / php5 / 20090626</i> for PHP 5.3.3, where <i>20090626 is the</i> name of the directory, which may vary depending on the PHP version). </li><li>  Open the <b>php.ini</b> configuration file (usually found in <i>/etc/php5/apache2/php.ini</i> ) and paste the following two lines at the end of the file. <br> <code>[CUBRID] <br> extension=cubrid.so <br></code> <br></li><li>  Save the changes and restart your Web server. </li></ol><br>  Done!  If you have problems installing the driver, write in the comments. <br><br><h4>  Using the CUBRID PHP Driver </h4><br>  As you must know, connecting and working with Oracle databases and PostgreSQL is similar in some way.  Working with them, you directly connect to a specific database, rather than to a host or server as a whole, as you usually do in MySQL and MSSQL.  In the case of MySQL and MSSQL, you create a connection with the host, then the second step is to select the database to which you need to connect. <br><br>  Working with the CUBRID DBMS is in this sense similar to Oracle and PostgreSQL.  You directly connect to the database you want to work with.  Therefore, in CUBRID PHP, as in Oracle and PostgreSQL, there are no functions that allow you to create, delete, or select databases, with the exception of those functions that provide information about the working database.  This is where they differ from the MySQL and MSSQL libraries. <br><br><h5>  Syntax </h5><br> <code>resource cubrid_connect(string $host, int $port, string $dbname [, string $userid [, string $passwd ]] )</code> <br> <br><h5>  Example </h5><br> <code>$host_ip = "localhost"; <br> $host_port = 33000; <br> $db_name = "demodb"; <br> <br> $conn = cubrid_connect($host_ip, $host_port, $db_name) <br> or die("Could not connect: " . cubrid_error()); <br> <br> print ("Connected successfully"); <br> <br> cubrid_close($conn); <br></code> <br><br>  By default, the <b>auto_commit</b> parameter is <b>disabled</b> when connecting, i.e.  in all of the following transactions, you must confirm the transaction yourself.  For example: <br><br> <code>cubrid_commit($conn); <br></code> <br>  Such an implementation is very convenient if you want to programmatically control further actions in case of errors in transactions (that is, to issue some specific messages, etc.).  If you prefer to fix all transactions, you can turn on <b>auto_commit</b> either immediately upon connection or during operation.  In the first case, connect via <a href="http://www.php.net/manual/en/function.cubrid-connect-with-url.php">cubrid_connect_with_url</a> . <br><br> <code>$conn_url = "cci:CUBRID:127.0.0.1:33088:demodb:dba:123456:?autocommit=off" <br> $conn = cubrid_connect_with_url($conn_url); <br></code> <br>  Thus, all requests will be recorded automatically.  In the second case, call the <a href="http://www.php.net/manual/en/function.cubrid-set-autocommit.php">cubrid_set_autocommit</a> function at the required moment, for example: <br><br> <code>if (cubrid_set_autocommit($conn, true)){ <br> echo "   "; <br> } <br></code> <br>  Similarly, you can disable <i>auto_commit</i> .  To find out the status of auto_commit while running, you can call <a href="http://www.php.net/manual/en/function.cubrid-get-autocommit.php">cubrid_get_autocommit</a> . <br><br>  All other queries in CUBRID are very similar to MySQL syntax. <br><br><pre> // The syntax is the same.
 $ sql = "select sports counting players
 // Replace with just the prefix "mysql_" with "cubrid_"
 $ result = cubrid_query ($ conn, $ sql);

 if ($ result) {
	 // number of columns in the query
	 $ num_fields = cubrid_num_fields ($ result);
	
	 echo ("&lt;tr&gt;");

	 // column names in MySQL syntax request
	 for ($ i = 0; $ i &lt;$ num_fields; ++ $ i) {
		 echo ("&lt;td align = center&gt;");
		 echo (cubrid_field_name ($ result, $ i));
		 echo ("&lt;/ td&gt;");
	 }

	 echo ("&lt;/ tr&gt;");

	 // the same can be done in the CUBRID style, but only with one request
	 $ columns = cubrid_column_names ($ result);
	 echo ("&lt;tr&gt;");

	 while (list ($ key, $ colname) = each ($ columns)) {
		 echo ("&lt;td align = center&gt; $ colname &lt;/ td&gt;");
	 }

	 echo ("&lt;/ tr&gt;");

	 // Get the numerical and associative array
	 while ($ row = cubrid_fetch_array ($ result)) {
		 // you can also use cubrid_fetch_assoc, cubrid_fetch_field,
		 // cubrid_fetch_lengths, cubrid_fetch_row and cubrid_fetch_object
		 // Just like in MySQL
		 echo ("&lt;tr&gt;");

		 for ($ i = 0; $ i &lt;$ num_fields; ++ $ i) {
			 echo ("&lt;td align = center&gt;");
			 echo ($ row [$ i]);
			 echo ("&lt;/ td&gt;");
		 }

		 echo ("&lt;/ tr&gt;");
	 }
 }

 cubrid_close ($ conn);
</pre><br>  To enter a new or update the old value, you can use the same functions as in MySQL, but with the prefix "cubrid_". <br><br><pre> $ sql = "insert into olympic (host_year, host_nation, host_city,"
		 .  "opening_date, closing_date) values ‚Äã‚Äã(2008, 'China', 'Beijing',"
		 .  "to_date ('08-08-2008 ',' mm-dd-yyyy '), to_date ('08-24-2008', 'mm-dd-yyyy'));"

 $ result = cubrid_query ($ cubrid_con, $ sql);

 if ($ result) {
	 // If auto_commit is not enabled by default, then confirm the transaction
	 if (! cubrid_get_autocommit ($ cubrid_con)) {
		 cubrid_commit ($ cubrid_con);
	 }

	 echo ("Inserted successfully");
 }
 else {
	 echo (cubrid_error ());
	 cubrid_rollback ($ cubrid_con);
 }

 cubrid_disconnect ($ cubrid_con);
</pre><br>  To get the <b>ID</b> generated by the last INSERT query, given that there is a column with an AUTO_INCREMENT constraint in the table, you can call the <a href="http://www.php.net/manual/en/function.cubrid-insert-id.php">cubrid_insert_id</a> function.  This function differs from <i>mysql_insert_id</i> only in that in CUBRID the function returns a string, while MySQL - the number int.  The convenience of the string is that this function can return a BIGINT type ID, while the MySQL function cannot be used for large numbers.  If there are no AUTO_INCREMENT columns in the table, cubrid_insert_id will return 0. <br><br>  After entering new values ‚Äã‚Äãor updating existing ones, as in MySQL, you can call <a href="http://www.php.net/manual/en/function.cubrid-affected-rows.php">cubrid_affected_rows</a> to find out how many rows have been changed as a result, specified as a parameter.  If the result resource is not specified, the result of the last query will be implied. <br><br> <code>$affected_num = cubrid_affected_rows(); <br> echo " : " . $affected_num; <br></code> <br>  A complete list of all CUBRID PHP functions associated with the corresponding MySQL PHP functions can be found <a href="http://www.cubrid.org/cubrid_mysql_php_function_comparison">here</a> , where you will notice that almost all functions are identical with the replacement of the <b>mysql_</b> prefix with <b>cubrid_</b> . <br><br><h5>  Permanent connections </h5><br>  Permanent connections are not implemented in the CUBRID PHP library for the sole reason that CUBRID itself supports persistent connections.  Those.  In CUBRID Broker configurations, you can set the value of the <a href="http://www.cubrid.org/manual/831/en/Parameter%2520by%2520Broker">CCI_PCONNECT</a> parameter [link to manual] as <b>ON</b> and restart the broker, after which all connections between the client application and the CUBRID database will be permanent even if you close them using <i>cubrid_close</i> . <br><br>  A pool of persistent connections can contain a maximum of 256 connections.  All other connections will open as normal until one of the permanent connections is released.  You can also set <b>KEEP_CONNECTION</b> . <br><br> <code>[%BROKER1] <br> SERVICE = ON <br> BROKER_PORT = 33000 <br> ... <br> KEEP_CONNECTION = ON <br> CCI_PCONNECT = ON <br> STATEMENT_POOLING = ON <br></code> <br><h5>  Prepared requests </h5><br>  In the CUBRID PHP library, you can also set prepared statements.  They can include both ‚Äú?‚Äù And named placeholders.  For example: <br><br>  Application?  as a placeholder <br> <code>// ?    <br> $sql = "SELECT * FROM game WHERE host_year = ?; <br> <br> $req = cubrid_prepare($conn, $sql); <br> <br> //   ,   1 <br> cubrid_bind($req, 1, 2004); <br> <br> cubrid_execute($req); <br></code> <br><br>  Using a named placeholder <br> <code>//   <br> $sql2 = "SELECT * FROM game WHERE host_year = :host_year"; <br> <br> $req = cubrid_prepare($conn, $sql); <br> <br> //    <br> cubrid_bind($req, ':host_year', 2004); <br> <br> cubrid_execute($req); <br></code> <br>  It's pretty simple.  In CUBRID Broker configurations, there is one more parameter <b>STATEMENT_POOLING</b> , which is responsible for the pooling of prepared requests.  If you enable this option (ON, OFF, the default <b>ON</b> ), then all prepared requests will be saved in a special pool, which allows them to be reused.  If disabled, the prepared requests will be closed immediately after the completion of transactions. <br><br>  So, as you noticed, almost everything that works with MySQL will work with CUBRID.  And if something does not work out of your box, write in the comments.  We will understand.  And maybe even thanks to you, there will be something new in the CUBRID PHP API. </div><p>Source: <a href="https://habr.com/ru/post/119514/">https://habr.com/ru/post/119514/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../119505/index.html">The most unpredictable device</a></li>
<li><a href="../119506/index.html">Process Approach to Interface Design</a></li>
<li><a href="../119508/index.html">We are sorry</a></li>
<li><a href="../119510/index.html">Using Protocol Buffers on the .Net platform (Part 2)</a></li>
<li><a href="../119512/index.html">Application under the Hosting Pictures</a></li>
<li><a href="../119515/index.html">Scientific studies of Russian schoolchildren</a></li>
<li><a href="../119516/index.html">Vedomosti introduces a paid subscription to the electronic version of the newspaper</a></li>
<li><a href="../119517/index.html">10,000 commits to the Open Source project from one person</a></li>
<li><a href="../119518/index.html">Not for people or "watchman syndrome" in the Security Council Yandex. Of money</a></li>
<li><a href="../119519/index.html">IT sphere where there is no Cisco - I cannot remember</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>